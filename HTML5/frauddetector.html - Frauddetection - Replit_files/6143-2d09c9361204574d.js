!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6a0a2529-30a4-4f5b-bce8-59b2694e149f",e._sentryDebugIdIdentifier="sentry-dbid-6a0a2529-30a4-4f5b-bce8-59b2694e149f")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"ea8dc62d"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6143],{4900:function(e,t,n){n.d(t,{k:function(){return U}});var r=n(27387),i=n(66626),o=n(96583),a=n(74985),l=n(42650),c=n(50959),s=n(82750),u=n(33817),d=n(92268),f=n(12285),h=n(86583),p=n(90926),m=n(48308),v=n(22281),g=n(85234),y=n.n(g),b=n(65047),w=n(49500);function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"debug";(0,b.nb)(function(e){for(var t=0,n=["received msg:","sending"];t<n.length;t++){var r=n[t],i="-- ".concat(r," "),o=e.indexOf(i);if(-1!==o){var a=e.slice(0,o),l=e.slice(o+i.length),c=void 0;try{c=JSON.parse(l)}catch(e){w.error(e)}if(!c)break;w.log(a,i,c);return}}w.log(e)}),(0,b.uR)(e)}var x=n(99149),C=n(74044);n(18770),C.Dy.Object({replId:C.Dy.String({format:"uuid"})});var _=C.Dy.Object({token:C.Dy.String()}),S=n(62130),k=n(85421),E=n(85733),T=n(36556),R=n(93913),I=n.n(R),D={minutes:30},B={},G=new(I());function A(){return(A=(0,r._)(function(e){return(0,o.Jh)(this,function(t){return[2,G.acquire(e,(0,r._)(function(){var t,n,r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if((t=B[e])&&new Date().getTime()<t.expiration)return[2,t.token];return[4,function(e){return P.apply(this,arguments)}(e)];case 1:return n=i.sent(),r=new Date().getTime()+6e4*D.minutes,B[e]={token:n,expiration:r},[2,n]}})}))]})})).apply(this,arguments)}function P(){return(P=(0,r._)(function(e){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,fetch("/ai/auth",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({replId:e})})];case 1:return[4,n.sent().json()];case 2:if(t=n.sent(),!x.B4.Check(_,t))throw(0,S.o)("Authentication to chat service failed",{detail:t});return[2,t.token]}})})).apply(this,arguments)}window.__enableAiChatServiceLogs=Z,window.location.search.includes("aiChatDebug")&&Z();var N=function(){"use strict";function e(t){(0,f._)(this,e),this.n=1,this.cleanup=t}var t=e.prototype;return t.ref=function(){this.n+=1},t.unref=function(){this.n-=1,0===this.n&&this.cleanup()},e}(),L=void 0,O=n(59695);function U(e){var t,n,d,f,g,b,w,Z,x,C,_,R,I,D,B,G,P,U,X,F,W,H,V,z,j,q,J,Y,K=e.replId,$=e.currentUserId,Q=e.endpoint,ee=e.hasAccessToAdvancedModel,et=e.children,en=(n=(t={replId:K,currentUserId:$,endpoint:Q,hasAccessToAdvancedModel:ee,testStore:e.testStore}).replId,d=t.currentUserId,f=t.endpoint,g=t.hasAccessToAdvancedModel,b=t.testStore,z=(Z=(w={replId:n,currentUserId:d,endpoint:f,hasAccessToAdvancedModel:g}).replId,x=w.endpoint,C=w.currentUserId,_=w.hasAccessToAdvancedModel,R=(0,k.useRouter)(),(0,c.useEffect)(function(){var e=function(){L=void 0};return R.events.on("beforeHistoryChange",e),function(){R.events.off("beforeHistoryChange",e)}}),D=(I=(0,i._)((0,c.useState)(1),2))[0],B=I[1],G="".concat(Z,"-").concat(_?"advanced":"basic","-").concat(D),U=(P=(0,c.useMemo)(function(){return function(e){var t=e.currentUserId,n=e.replId,i=e.endpoint,a=e.clientId;function l(){return(l=(0,r._)(function(){var e,t,r;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,function(e){return A.apply(this,arguments)}(n)];case 1:return e=o.sent(),t=performance.now(),(r=new URL(i)).searchParams.set("auth_token",e),[2,{ws:new h.Z(r.toString()),authDoneTime:t}]}})})).apply(this,arguments)}if(L&&L.clientId===a)L.refcount.ref();else{var c,s,u,d,f="".concat(t,"-").concat(y()()),g=new v.k((c=function(){(0,S.o)("Max retries during getWs")},s=0,u=0,d=null,(0,r._)(function(){var e,t,n,r,i,a,f,h;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(null==d||d(),!(s>0))return[3,2];return e=Math.min(1e3*Math.pow(2,s),6e4)+Math.floor(1e3*Math.random()),[4,new Promise(function(t){return setTimeout(t,e)})];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,4,,7]),[4,function(){return l.apply(this,arguments)}()];case 3:return n=(t=o.sent()).ws,r=t.authDoneTime,i=function(){n.removeEventListener("open",f),n.removeEventListener("close",a)},a=function(e){var t=e.code;T.kg.error("ai chat websocket closed before connecting",{closeCode:t,retryNumber:s,timeBetweenAuthDoneAndCloseMs:performance.now()-r,isBackgroundedTab:"hidden"===document.visibilityState}),i()},f=function(){i();var e=!1,t=function(){e=!0};n.addEventListener("close",t),setTimeout(function(){n.removeEventListener("close",t),e||(s=0)},1e4)},n.addEventListener("open",f),n.addEventListener("close",a),d=function(){i(),d=null},u+=1,s+=1,[2,n];case 4:if(h=o.sent(),20===u)throw c(),h;if(!(u>20))return[3,6];return T.kg.error("Max retries exceeded, but river still retryting"),[4,new Promise(function(){})];case 5:o.sent(),o.label=6;case 6:throw s+=1,u+=1,h;case 7:return[2]}})})),f,"SERVER",{codec:m.f,retryAttemptsMax:20,retryIntervalMs:1e3}),b=new N(function(){g.close()}),w=null==L?void 0:L.ctx;L={ctx:{client:(0,p.eI)(g),transport:g,cleanup:function(){return null==L?void 0:L.refcount.unref()}},clientId:a,refcount:b},null==w||w.transport.close()}return L.ctx}({currentUserId:C,replId:Z,endpoint:x,clientId:G})},[C,Z,x,G])).client,X=P.transport,F=P.cleanup,W=(0,c.useCallback)(function(){B(function(e){return e+1})},[]),(0,c.useEffect)(function(){return window.addEventListener("online",W),window.addEventListener("offline",F),function(){window.removeEventListener("online",W),window.removeEventListener("offline",F)}},[F,W]),H=(0,E.Z)(F),(0,c.useEffect)(function(){var e=H.current;return function(){e()}},[H]),V={client:U,transport:X,reconnect:W}).client,j=V.transport,q=V.reconnect,J=(0,O.Gn)("chatEngine").preferences.chatEngine,Y=(0,i._)((0,c.useState)(function(){if(b)throw Error("testStore in only meant for tests");var e=null!=b?b:(0,l.MT)();return e.set(u.aN,{client:z}),e.set(u.Uk,{replId:n,currentUserId:d,hasAccessToAdvancedModel:g,advancedChatEngineOverride:J}),e}),1)[0],(0,c.useEffect)(function(){Y.set(u.aN,{client:z})},[Y,z]),(0,c.useEffect)(function(){Y.set(u.Uk,{replId:n,currentUserId:d,hasAccessToAdvancedModel:g,advancedChatEngineOverride:J})},[Y,n,d,g,J]),{transport:j,reconnect:q,store:Y}),er=en.store,ei=en.transport,eo=en.reconnect;return(0,a.BX)(s.g3,{store:er,children:[et,(0,a.tZ)(M,{replId:K,transport:ei,reconnect:eo})]})}function M(e){var t=e.replId,n=e.transport,a=e.reconnect,l=(0,i._)((0,u.eP)(),2),s=l[0],f=l[1],h=(0,u.m8)(),p=(0,u.Bh)();(0,c.useEffect)(function(){var e=function(e){f("connect"===e.status)};return n.connections.size&&f(!0),n.addEventListener("connectionStatus",e),function(){n.removeEventListener("connectionStatus",e)}},[n,f]);var m=(0,u.ww)();return(0,c.useEffect)(function(){s&&m()},[h,s,m]),(0,c.useEffect)(function(){if(s)return(0,d.NO)(h,t,p)},[h,t,p,s]),(0,c.useEffect)(function(){var e=function(){return i.apply(this,arguments)};if(s){var t=!1,n=null;return e(),function(){t=!0,n&&clearTimeout(n)}}function i(){return(i=(0,r._)(function(){var r,i,l;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,Promise.race([h.chatService.pingPong.rpc({}),new Promise(function(e){return setTimeout(e,2e3)})])];case 1:if(r=o.sent(),t)return[2];if(i=!r,l=r&&!r.ok&&"UNEXPECTED_DISCONNECT"===r.payload.code,i||l)return a(),[2];return n=setTimeout(e,5e3),[2]}})})).apply(this,arguments)}},[h,s,a]),null}},73173:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(74985),i=n(43312),o=n(49224),a=n(72093),l=(0,i.iv)([a.l0.display.flex,a.l0.align.center,a.l0.justify.center,a.l0.backgroundColor.accentNegativeDefault,a.l0.minWidth(16),a.l0.height(16),a.l0.color.white,a.l0.position.absolute,a.l0.fontSize(a.TV.fontSizeSmall),{borderRadius:"10px",transform:"translate(50%, -50%)",padding:"2px 3px"}]),c=(0,o.X)({root:a.l0.display.flex,unreadIndicator:[a.l0.width(5),a.l0.height(5),a.l0.backgroundColor.redDefault,a.l0.position.absolute,{borderRadius:"10px",transform:"translate(8px, -1px)"}],count:l,countOverflow:[l,{transform:"translate(25%, -50%)"}]});function s(e){var t=e.unreadDot,n=e.size,i=void 0===n?12:n,o=e.count,a=void 0===o?null:o,l=a&&a>99,s=l?"99+":null==a?void 0:a.toString();return(0,r.BX)("span",{css:c.root,children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})}),t?(0,r.tZ)("div",{css:c.unreadIndicator}):null,!!a&&(0,r.tZ)("div",{css:l?c.countOverflow:c.count,children:s})]})}},62496:function(e,t,n){n.d(t,{AS:function(){return T},Hj:function(){return A},Rp:function(){return I},Tt:function(){return N},gE:function(){return B},j7:function(){return _},xT:function(){return k},yi:function(){return S}});var r=n(41733),i=n(21262),o=n(71440),a=n(58995),l=n(99165),c=n(293);function s(){var e=(0,i._)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    fullName\n    image\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function m(){var e=(0,i._)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function g(){var e=(0,i._)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return b=function(){return e},e}var w={},Z=(0,o.Ps)(s()),x=(0,o.Ps)(u()),C=(0,o.Ps)(d(),Z,x),_=(0,o.Ps)(f(),Z,C),S=(0,o.Ps)(h(),_);function k(e){var t=(0,r._)({},w,e);return a.a(S,t)}var E=(0,o.Ps)(p(),_);function T(e){var t=(0,r._)({},w,e);return l.D(E,t)}var R=(0,o.Ps)(m(),_);function I(e){var t=(0,r._)({},w,e);return l.D(R,t)}var D=(0,o.Ps)(v(),_);function B(e){var t=(0,r._)({},w,e);return l.D(D,t)}var G=(0,o.Ps)(g());function A(e){var t=(0,r._)({},w,e);return l.D(G,t)}var P=(0,o.Ps)(y(),_);function N(e){var t=(0,r._)({},w,e);return c.m(P,t)}b()},527:function(e,t,n){n.d(t,{Ft:function(){return d},Vy:function(){return m},kL:function(){return p}});var r=n(27387),i=n(66626),o=n(96583),a=n(80403),l=n(43182);function c(){return(c=(0,r._)(function(e,t,n){var r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(!e.path||"number"!=typeof e.indexStart||"number"!=typeof e.indexEnd||!e.otVersion)return[2];if(n===e.otVersion)return[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}];return[4,t({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:n})];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:n}]}})})).apply(this,arguments)}var s=n(81199),u=n(50959);function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,i,s,u,d;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(t=e.anchor,n=e.version,r=e.transformSelection,i=e.content,!t.path)return[2,null];return[4,function(e,t,n){return c.apply(this,arguments)}(t,r,n)];case 1:if(!(s=o.sent()))return[2,null];return d=function(){if(s){var e=s.indexStart,t=s.indexEnd;try{var n=a.xv.of(i.split("\n")),r=n.lineAt(e),o=n.lineAt(t),c=n.sliceString(n.line(Math.max(r.number-2,1)).from,e),u=n.sliceString(t,n.line(Math.min(o.number+2,n.lines)).to);return{precode:c,code:n.sliceString(e,t),postcode:u}}catch(e){l.Tb(e)}}},[2,{anchor:t,newSelection:s,newPosition:u,getHighlight:d,snippet:h(i,s)}]}})})).apply(this,arguments)}var h=function(e,t){var n=a.xv.of(e.split("\n")),r=n.lineAt(t.indexStart).number,i=n.lineAt(t.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(n.lines,i+1));for(var l=r;l<=i;l++)o.push(n.line(l).text);return{startLineNumber:r,lines:o}};function p(e){var t=(0,s.Z)().fs,n=(0,u.useRef)(null),r=(0,u.useRef)(null),o=(0,i._)((0,u.useState)(!1),2),a=o[0],l=o[1];return(0,u.useEffect)(function(){if(e){var i=function(){r.current=null,l(!1)},o=t.watchTextFile(e,{onReady:function(e){var t=e.transformSelection,i=e.initialContent;n.current=i.toString(),r.current=t,l(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var t=e.latestContent;n.current=t}});return function(){i(),o()}}},[e,t]),{contentRef:n,transformSelectionRef:r,loadedFile:a}}function m(e){var t=(0,s.Z)().fs,n=(0,i._)((0,u.useState)(null),2),r=n[0],o=n[1],a=p(null==e?void 0:e.path),c=a.contentRef,f=a.loadedFile,h=a.transformSelectionRef;return(0,u.useEffect)(function(){(null==e?void 0:e.path)&&f&&h.current&&null!==c.current&&d({anchor:e,version:t.getOTVersion(e.path),transformSelection:h.current,content:c.current}).then(function(e){o(e)}).catch(function(e){o(null),l.Tb(e)})},[t,e,f,h,c]),r}},25612:function(e,t,n){n.d(t,{n:function(){return u}});var r=n(41733),i=n(21262),o=n(71440),a=n(99165);function l(){var e=(0,i._)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r._)({},c,e);return a.D(s,t)}},68098:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(50959),o=n(39271),a=n(25612);function l(e){var t=(0,o.Z)(),n=(0,r._)((0,a.n)(),1)[0];(0,i.useEffect)(function(){if(e){var r=e.messages.filter(function(e){return!e.seen}).map(function(e){return e.id});0!==r.length&&n({variables:{replId:t,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map(function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}}),__typename:"AnnotationMessageList"}}})}},[t,e,n])}},30470:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(39271),i=n(41733),o=n(21262),a=n(71440),l=n(58995);function c(){var e=(0,o._)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n            fullName\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n            fullName\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e=(c={variables:{replId:(0,r.Z)()}},d=(0,i._)({},s,c),l.a(u,d)).data;if((null==e?void 0:e.repl.__typename)!=="Repl")return[];var t=[];(null===(f=e.repl.owner)||void 0===f?void 0:f.username)&&"User"===e.repl.owner.__typename&&t.push(e.repl.owner);var n=!0,o=!1,a=void 0;try{for(var c,d,f,h,p=e.repl.permissions[Symbol.iterator]();!(n=(h=p.next()).done);n=!0){var m,v=h.value;(null===(m=v.user)||void 0===m?void 0:m.username)&&t.push(v.user)}}catch(e){o=!0,a=e}finally{try{n||null==p.return||p.return()}finally{if(o)throw a}}return t}},69755:function(e,t,n){n.d(t,{q:function(){return B},J:function(){return D}});var r,i,o,a=n(41733),l=n(30509),c=n(98924),s=n(66626),u=n(74985),d=n(12285),f=n(4955),h=n(9670),p=n(80403),m=n(16826),v=n(5994),g=m.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),y=m.p.line({attributes:{class:"cm-diff-inserted"}}),b=m.p.line({attributes:{class:"cm-diff-deleted"}}),w=p.Py.define({map:function(e,t){return e.map(t)}}),Z=function(e){"use strict";(0,f._)(n,e);var t=(0,h._)(n);function n(){return(0,d._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},n}(m.l9);function x(e){var t=new p.f_,n=new Z;e.sort(function(e,t){return e.character-t.character});var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,s=c.character,u=c.padding,d=0;d<u;d++)t.add(s,s,m.p.widget({widget:n,side:-1,block:!0}))}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}function C(e){var t=e.coloredLines,n=e.colorDecoration;return[g,m.lg.fromClass(function e(r){"use strict";(0,d._)(this,e);var i=new p.f_,o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,f=r.state.doc.line(u);i.add(f.from,f.from,n)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}this.decorations=i.finish()},{decorations:function(e){return e.decorations}}),p.QQ.define({create:function(){return m.p.none},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(w))return l.value}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.docChanged?e.map(t.changes):e},provide:function(e){return m.tk.decorations.from(e)}})]}var _=n(51148),S=n(87502),k=n(50959),E=n(98001),T=(r=function(e,t){return m.tk.domEventHandlers({scroll:function(n,r){if(r===e&&n.target){var i=n.target;if(i.scrollTop){var o=i.scrollTop;t.scrollDOM.scrollTo({top:o})}}}})},i=new p.F6,o=new p.F6,{extensions:function(){return{right:i.of([]),left:o.of([])}},setup:function(e,t){e.dispatch({effects:o.reconfigure(r(e,t))}),t.dispatch({effects:i.reconfigure(r(t,e))})}}),R=T.extensions,I=T.setup;function D(e){var t=e.left,n=e.right,r=e.showDiffDecorations,i=void 0===r||r,o=t.code,u=(0,c._)(t,["code"]),d=n.code,f=(0,c._)(n,["code"]),h=(0,S.Z)(),m=h.ref,g=h.view,Z=(0,S.Z)(),_=Z.ref,E=Z.view,T=(0,k.useMemo)(function(){var e=R().left;return u.extensions?[u.extensions,e]:e},[u.extensions]),D=(0,k.useMemo)(function(){var e=R().right;return f.extensions?[f.extensions,e]:e},[f.extensions]);u=(0,l._)((0,a._)({},u),{extensions:T}),f=(0,l._)((0,a._)({},f),{extensions:D});var B=(0,s._)((0,k.useState)(!1),2),G=B[0],A=B[1],P=(0,s._)((0,k.useState)(!1),2),N=P[0],L=P[1];return(0,k.useEffect)(function(){if(g&&E&&G&&N&&i){var e=setTimeout(function(){var e;I(g,E),e=(0,v.Bz)(g.state.doc.sliceString(0),E.state.doc.sliceString(0)),g.dispatch({effects:[p.Py.appendConfig.of(C({coloredLines:e.leftColored.sort(function(e,t){return e-t}),colorDecoration:b})),w.of(x(e.leftPadded))]}),E.dispatch({effects:[p.Py.appendConfig.of(C({coloredLines:e.rightColored.sort(function(e,t){return e-t}),colorDecoration:y})),w.of(x(e.rightPadded))]})});return function(){return clearTimeout(e)}}},[g,E,G,N,i]),(0,k.useEffect)(function(){g&&(g.dispatch({changes:{from:0,to:g.state.doc.length,insert:o}}),A(!0))},[o,g]),(0,k.useEffect)(function(){E&&(E.dispatch({changes:{from:0,to:E.state.doc.length,insert:d}}),L(!0))},[d,E]),{left:{view:g,ref:m,code:o,options:u,ready:G},right:{view:E,ref:_,code:d,options:f,ready:N}}}function B(e){var t=e.diffViewer,n=(0,c._)(e,["diffViewer"]),r=(0,a._)({},t.options,n);return(0,u.BX)(u.HY,{children:[(0,u.tZ)(_.ZP,(0,a._)({ref:t.ref,css:{height:t.ready?0:"auto"},initialDoc:t.code,lineWrapping:!1,readOnly:!0},r)),!t.ready&&(0,u.tZ)(E.Z,{code:t.code,language:r.language,filePath:r.filePath,lineNumbers:!r.hideGutter,fontSize:r.fontSize})]})}},5994:function(e,t,n){n.d(t,{Bz:function(){return p},PO:function(){return m}});var r=n(12285),i=n(66626),o=n(96583),a=n(85386),l=n.n(a),c=l().DIFF_DELETE,s=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,t){var n=new(l()),r=n.diff_linesToChars_(e,t),i=r.chars1,o=r.chars2,a=r.lineArray,c=n.diff_main(i,o,!1);return n.diff_charsToLines_(c,a),c}function f(e){return e.split("\n").length-1}function h(e,t,n){if(e>0){var r=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return 0;var i=t.indexOf("\n",r);return -1===i?null:1===n?i+1:e(t,n-1,i+1)}(n,t);if(null!==r)return{lineNumber:t,character:r,padding:e}}return null}function p(e,t){var n=!1,r=!1;n="\n"===e[e.length-1],r="\n"===t[t.length-1];for(var o=d(e+(n?"":"\n"),t+(r?"":"\n")),a=0,l=0,p=[],m=[],v=[],g=[],y=0,b=0,w=0;w<o.length;w++){var Z=(0,i._)(o[w],2),x=Z[0],C=f(Z[1]);switch(x){case c:var _,S=(0,i._)(null!==(_=o[w+1])&&void 0!==_?_:[],2),k=S[0],E=S[1];a+=C;for(var T=0;T<C;T++)p.push(a-T);var R=C;k===s&&(R-=f(E));var I=h(R,l,t);I&&g.push(I);break;case s:var D,B=(0,i._)(null!==(D=o[w-1])&&void 0!==D?D:[],2),G=B[0],A=B[1];l+=C;for(var P=0;P<C;P++)m.push(l-P);var N=C;G===c&&(N-=f(A));var L=h(N,a,e);L&&v.push(L);break;case u:l>b&&(b=l),a>y&&(y=a),a+=C,l+=C}}return{leftPadded:v.filter(function(e){return e.lineNumber<b}),rightPadded:g.filter(function(e){return e.lineNumber<y}),leftColored:p,rightColored:m,changedTrailingNewline:n!==r,leftTrailingNewline:n,rightTrailingNewline:r}}var m=function(){"use strict";function e(t,n){(0,r._)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===t[t.length-1],this.otherTrailingNewline="\n"===n[n.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(t,n),a=[],l=!0,f=!1,h=void 0;try{for(var p,m=o[Symbol.iterator]();!(l=(p=m.next()).done);l=!0){var v=(0,i._)(p.value,2),g=v[0],y=v[1].split("\n");""===y[y.length-1]&&y.pop();var b=!0,w=!1,Z=void 0;try{for(var x,C=y[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var _=x.value;a.push([g,_])}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}}}catch(e){f=!0,h=e}finally{try{l||null==m.return||m.return()}finally{if(f)throw h}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([s,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var S=1,k=0,E=1,T=!0,R=!1,I=void 0;try{for(var D,B=a[Symbol.iterator]();!(T=(D=B.next()).done);T=!0){var G=(0,i._)(D.value,2),A=G[0],P=G[1];switch(A){case c:this.linePositions.set(S,k),this.lineLengths.set(S,P.length),this.deleted.add(S),k+=P.length+1,S++;break;case s:var N=S-1,L=this.inserted.get(N);L||(L=[],this.inserted.set(N,L)),L.push({number:E,content:P}),E++;break;case u:this.linePositions.set(S,k),this.lineLengths.set(S,P.length),k+=P.length+1,S++,E++}}}catch(e){R=!0,I=e}finally{try{T||null==B.return||B.return()}finally{if(R)throw I}}}var t=e.prototype;return t.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},t.lineIsDeleted=function(e){return this.deleted.has(e)},t.lineInsertions=function(e){var t=this.inserted.get(e);return t&&0!==t.length?t:null},t.lineInsertedContent=function(e){var t=this.lineInsertions(e);return t?t.map(function(e){return e.content}).join("\n"):null},t.offsetFor=function(e){var t,n,r;r=0+(null!==(n=null===(t=this.inserted.get(0))||void 0===t?void 0:t.length)&&void 0!==n?n:0);for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},t.linePosition=function(e){var t;return null!==(t=this.linePositions.get(e))&&void 0!==t?t:null},t.lineLength=function(e){var t;return null!==(t=this.lineLengths.get(e))&&void 0!==t?t:null},t.line=function(e){var t=this.linePosition(e),n=this.lineLength(e);if(null===t||null===n)return null;var r=this.offsetFor(e),i=this.lineIsDeleted(e),o=this.lineInsertions(e);return{number:e,from:t,to:t+n,length:n,offset:r,isDeleted:i,insertions:o}},t.lines=function(){var e,t,n,r,a,l,c,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:e=!0,t=!1,n=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i._)(a.value,1)[0],!(c=this.line(l)))throw Error("line should not be null");return[4,c];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=o.sent(),t=!0,n=s,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})},e}()},18857:function(e,t,n){n.d(t,{z:function(){return a}});var r=n(12285),i=n(96583),o=n(51743),a=function(){"use strict";function e(t,n,i,o){(0,r._)(this,e),this.a=t,this.b=n,this.chunks=i,this.map=o}var t=e.prototype;return t.line=function(e,t){return t===o.MF.A?this.a.line(e):this.b.line(e)},t.bounds=function(e){if(0===this.chunks.length)return null;var t=(0,o.Cf)(this.chunks[0],e),n=(0,o.Cf)(this.chunks[this.chunks.length-1],e),r=e===o.MF.A?this.a.length:this.b.length,i=Math.min(n.to,r);return{from:t.from,to:i}},t.hasChanges=function(){return this.chunks.length>0},t.updateA=function(t,n,r){var i=this.b,a=(0,o.U_)(t,i,{chunks:this.chunks,changesA:n},r),l=(0,o.XW)(t,i,a);return new e(t,i,a,l)},t.updateB=function(t,n,r){var i=this.a,a=(0,o.U_)(i,t,{chunks:this.chunks,changesB:n},r),l=(0,o.XW)(i,t,a);return new e(i,t,a,l)},t.getContainingChunk=function(e,t){for(var n=0,r=this.chunks.length-1;n<=r;){var i=n+r>>>1,a=this.chunks[i],l=(0,o.Cf)(a,t);if(e>=l.from&&e<=l.to)return a;e<l.from?r=i-1:e>l.to&&(n=i+1)}return null},t.getCorrespondingLine=function(e,t){var n=this.map.get(t===o.MF.A?-e:e);return n?this.line(n,(0,o.rN)(t)):null},t.getLineChangeType=function(e,t){if(this.map.get(t===o.MF.A?-e:e))return o.dQ.UNCHANGED;var n=this.line(e,t),r=this.getContainingChunk(n.from,t);return r?(0,o.dx)(n,t,r.changes,r):o.dQ.UNCHANGED},t.iterLines=function(e){var t,n,r,a;return(0,i.Jh)(this,function(i){switch(i.label){case 0:t=e===o.MF.A?this.a:this.b,n=1,i.label=1;case 1:if(!(n<=t.lines))return[3,4];return r=t.line(n),a=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:a}];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})},t.iterRanges=function(){var e,t,n,r,o;return(0,i.Jh)(this,function(i){switch(i.label){case 0:e=0,i.label=1;case 1:if(!(e<this.chunks.length))return[3,6];t=this.chunks[e].fromA,n=this.chunks[e].fromB,r=0,i.label=2;case 2:if(!(r<this.chunks[e].changes.length))return[3,5];return o=this.chunks[e].changes[r],[4,{fromA:t+o.fromA,toA:t+o.toA,fromB:n+o.fromB,toB:n+o.toB}];case 3:i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}})},e.create=function(t,n,r){var i=(0,o.U_)(t,n,void 0,r),a=(0,o.XW)(t,n,i);return new e(t,n,i,a)},e}()},66873:function(e,t,n){n.d(t,{p:function(){return q}});var r,i=n(80403),o=n(12285),a=n(4384),l=n(4955),c=n(9670),s=n(16826),u=n(33083),d=n(99415),f=n(18857),h=n(75869),p=i.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),m=i.QQ.define({create:function(){return{diff:null,tree:d.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(p),o=null===(n=t.state.facet(u.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===d.mp.empty?e:{diff:null,tree:d.mp.empty};var a=e.diff,l=e.tree;return(a&&a.a.eq(i)?t.docChanged&&(a=a.updateB(t.newDoc,t.changes)):(a=f.z.create(i,t.newDoc),l=d.mp.empty),(null===(r=t.startState.facet(u.dK))||void 0===r?void 0:r.parser)!==o&&(l=d.mp.empty),o&&l.length!==a.a.length)?(l=(0,h.p)({parser:o,text:a.a,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),v=n(42516),g=n(72093),y="cm-inline-diff-line-deletion-base",b="cm-inline-diff-line-deletion",w="cm-inline-diff-text-deletion",Z="cm-inline-diff-line-insertion-base",x="cm-inline-diff-line-insertion",C="cm-inline-diff-text-insertion",_="rgba(180, 0, 0, 0.075)",S="rgba(180, 0, 0, 0.125)",k="rgba(0, 180, 0, 0.075)",E="rgba(0, 180, 0, 0.125)",T="cm-inline-diff-marker",R="cm-inline-diff-marker-left",I="cm-inline-diff-marker-right";function D(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var B=s.tk.theme((r={},(0,v._)(r,".".concat(y,", .").concat(b),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(g.TV.accentPrimaryDimmest," !important")}}),(0,v._)(r,".".concat(y),{background:D(_)}),(0,v._)(r,".".concat(b),{background:D(_,S)}),(0,v._)(r,".".concat(Z),{background:D(k)}),(0,v._)(r,".".concat(x),{background:D(k,E)}),(0,v._)(r,".".concat(C),{display:"inline-block",background:E,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(E),paddingLeft:"3px",marginLeft:"-6px"}}),(0,v._)(r,".".concat(w),{display:"inline-block",background:S,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(S),paddingLeft:"3px",marginLeft:"-6px"}}),(0,v._)(r,".".concat(T),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,v._)(r,".".concat(R),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,v._)(r,".".concat(I),{width:"50%",textAlign:"right"}),r)),G=n(51743),A=n(90051),P=n(3341),N=n.n(P),L=function(e){"use strict";(0,l._)(n,e);var t=(0,c._)(n);function n(e,r,i){var a;return(0,o._)(this,n),(a=t.call(this)).line=e,a.index=r,a.changed=i,a}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(y):"cm-line ".concat(b),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!=s?s:"",t.appendChild(u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,h=null,p=null,m=function(t,n){if(!h)throw Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-h.from,n-h.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!h){var v=this.line[f].text;h={from:d,to:d+v.length}}if(!p){var g=!0,Z=!1,x=void 0;try{for(var C,_=this.changed[Symbol.iterator]();!(g=(C=_.next()).done);g=!0){var S=C.value;if(!(S.from>=h.to)&&!(S.to<=d)){var k=document.createElement("span");k.className=w,p={from:S.from,to:S.to,dom:k},d<p.from&&m(t,p.from),t.appendChild(k);break}}}catch(e){Z=!0,x=e}finally{try{g||null==_.return||_.return()}finally{if(Z)throw x}}}p?(d<p.to&&m(p.dom,p.to),d>=p.to&&(p=null)):m(t,h.to),d>=h.to&&(h=null,f++)}return t},r.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&N()(this.line,e.line)&&N()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,a._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(s.l9),O=s.p.line({class:Z}),U=s.p.line({class:x}),M=s.p.mark({class:C}),X=s.tk.decorations.compute([m],function(e){var t=function(e,t){if(r.getLineChangeType(e.number,G.MF.B)===G.dQ.COVERED)o.push(U.range(e.from));else{o.push(O.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,G.Po)(e,t,G.MF.B,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(M.range(s.from,s.to))}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(m,!1);if(!n||!n.diff)return s.p.none;var r=n.diff,i=n.tree,o=[],a=!0,l=!1,c=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;if(f.fromB!==f.endB)for(var h=r.b.lineAt(f.fromB),p=r.b.lineAt(f.endB),v=h.number;v<=p.number;v++)t(r.b.line(v),f);else f.fromA===f.endA&&t(r.b.lineAt(f.fromB),f);if(f.fromA!==f.toA)for(var g=r.a.lineAt(f.fromA),y=(0,A.CT)(i,r.a,e,f.fromA,f.endA),b=0;b<y.length;b++){var w=y[b],Z=r.a.line(g.number+b),x=r.getLineChangeType(Z.number,G.MF.A)===G.dQ.COVERED?null:(0,G.Po)(Z,f,G.MF.A,!0),C=s.p.widget({widget:new L(w,Z.number,x),block:!0,side:-(y.length-b)});o.push(C.range(f.fromB))}}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return s.p.set(o,!0)}),F=n(66382),W=(0,s.v5)({class:F.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(m,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;if(0===n.diff.a.length)return F.vP;var r=e.state.doc.lineAt(t.from);switch(n.diff.getLineChangeType(r.number,G.MF.B)){case G.dQ.COVERED:case G.dQ.MODIFIED:return F.vP;default:return null}},widgetMarker:function(e,t){if(!(t instanceof L))return null;var n=e.state.field(m,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;switch(n.diff.getLineChangeType(t.index,G.MF.A)){case G.dQ.COVERED:case G.dQ.MODIFIED:return F.We;default:return null}},initialSpacer:function(e){var t=e.state.field(m,!1);return(null==t?void 0:t.diff)?F.vP:F.Do},updateSpacer:function(e,t){var n=t.state.field(m,!1),r=(null==n?void 0:n.diff)?F.vP:F.Do;return e===r?e:r}}),H=n(67346),V=function(e){"use strict";(0,l._)(n,e);var t=(0,c._)(n);function n(e,r){var i;return(0,o._)(this,n),(i=t.call(this)).left=e,i.right=r,i}var r=n.prototype;return r.toDOM=function(e){var t=e.state.doc.lines.toString().length,n=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return n.className=T,r.className=R,i.className=I,n.style.width="".concat(2*t+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),n.appendChild(r),n.appendChild(i),n},r.eq=function(e){return e instanceof n&&this.left===e.left&&this.right===e.right},n}(s.SJ),z=H.X4.of(function(e,t){if(t instanceof L)return new V(t.index,null)}),j=[H.gy.of(function(e,t){var n,r=e.state.field(m,!1);if(r&&r.diff&&r.diff.hasChanges()){var i=e.state.doc.lineAt(t.from),o=r.diff.getCorrespondingLine(i.number,G.MF.B);return new V(null!==(n=null==o?void 0:o.number)&&void 0!==n?n:null,i.number)}}),z],q=i.r$.define({enables:function(e){return[p.computeN([e],function(t){return t.facet(e)}),F.Lw,m,B,X,j,W]}})},66382:function(e,t,n){n.d(t,{Do:function(){return I},Lw:function(){return S},Tr:function(){return d},Vt:function(){return R},We:function(){return E},vP:function(){return k},wp:function(){return T}});var r,i=n(12285),o=n(42516),a=n(4955),l=n(9670),c=n(16826),s=n(72093),u=s.TV.space2,d="cm-diff-gutter",f="".concat(d,"-element"),h="".concat(f,"-insertion"),p="".concat(f,"-modified"),m="".concat(f,"-deleted"),v="".concat(f,"-file-added"),g=s.TV.greenDefault,y=s.TV.greenStronger,b=s.TV.blueDefault,w=s.TV.blueStronger,Z=s.TV.redDefault,x=s.TV.redStronger,C=s.TV.greenDimmer,_=s.TV.greenDefault,S=c.tk.theme((r={},(0,o._)(r,".".concat(d,":first-of-type, .").concat(f),{width:u}),(0,o._)(r,".".concat(h),{backgroundColor:g,"&.cm-activeLineGutter":{backgroundColor:y}}),(0,o._)(r,".".concat(p),{backgroundColor:b,"&.cm-activeLineGutter":{backgroundColor:w}}),(0,o._)(r,".".concat(m),{backgroundColor:Z,"&.cm-activeLineGutter":{backgroundColor:x}}),(0,o._)(r,".".concat(v),{backgroundColor:C,"&.cm-activeLineGutter":{backgroundColor:_}}),r)),k=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(h),e}return n}(c.SJ)),E=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(m),e}return n}(c.SJ)),T=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(p),e}return n}(c.SJ)),R=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(v),e}return n}(c.SJ)),I=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return n}(c.SJ))},28360:function(e,t,n){n.d(t,{el:function(){return c},er:function(){return u},iG:function(){return s}});var r=n(80403),i=n(43182),o=n(34328),a=r.Py.define(),l=r.Py.define(),c=function(e){var t=e.view,n=e.insert,r=e.scrollIntoView;if(e.overwrite)t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:a.of(null),scrollIntoView:r,annotations:o.Z.of(!0)});else{var i=t.state.selection.main.head;t.dispatch({changes:{from:t.state.selection.main.from,insert:n},selection:{anchor:i+n.length},effects:a.of(null),scrollIntoView:r,annotations:o.Z.of(!0)})}},s=function(e){var t=e.state.field(u,!1);if(!t){i.Tb(Error("RevetGhostwriterCodeInsertState not found when trying to revert"));return}e.dispatch({changes:t,effects:l.of(null)})},u=r.QQ.define({create:function(){return null},update:function(e,t){e&&(e=e.map(t.changes));var n=!0,r=!1,i=void 0;try{for(var o,c=t.effects[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value;s.is(a)&&(e=t.changes.invert(t.startState.doc)),s.is(l)&&(e=null)}}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return e}})},26294:function(e,t,n){n.d(t,{i:function(){return d},o:function(){return u}});var r=n(68574),i=n(95683),o=n(34156),a=n(80332),l=n(34328),c=n(36480),s=n(22238),u=function(e){var t=e.state.field(a.WF,!1),n=e.state.facet(o.t);if(!(null==t?void 0:t.presented)||Date.now()-t.timestamp<150)return!1;var u=e.state.selection.main.head,d=e.state.doc.lineAt(u);if(u<=d.from+d.length-d.text.trimStart().length){var f=t.changes.closestRange(u);if(f.value instanceof c.Yf){var h=f.value.unfulfilled.toString(),p=(0,s.L)(h,e.state.tabSize);if(p>0&&p>=e.state.tabSize)return!1}}var m=t.changes.asChangeSpec(),v=e.state.changes(m),g=t.changes.extendSelection(e.state.selection);return(0,r._B)(e),e.dispatch({changes:v,selection:g,scrollIntoView:!0,effects:a.OK.of(t.dismiss(a.VJ.ACCEPTED_BY_USER)),annotations:[l.Z.of(!0),i.Iv.of("full")]}),n.onSuggestionAccepted(e,t),!0},d=function(e){var t=e.state.field(a.WF,!1),n=e.state.facet(o.t);return null!=t&&!!t.presented&&(e.dispatch({effects:a.OK.of(t.dismiss(a.VJ.DISMISSED_BY_USER))}),n.onSuggestionExplicitlyDismissed(e,t),!0)}},34156:function(e,t,n){n.d(t,{t:function(){return r}});var r=n(80403).r$.define({combine:function(e){var t=e.filter(Boolean);return{onDismiss:function(e){return t.forEach(function(t){var n;return null===(n=t.onDismiss)||void 0===n?void 0:n.call(t,e)})},onRequestIgnoredBackendOnly:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestIgnoredBackendOnly)||void 0===n?void 0:n.call(t,e)})},onRequestFirstEmit:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestFirstEmit)||void 0===n?void 0:n.call(t,e)})},onRequestEndedWithNoSuggestion:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestEndedWithNoSuggestion)||void 0===n?void 0:n.call(t,e)})},onRequestCompletelyPresented:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestCompletelyPresented)||void 0===n?void 0:n.call(t,e)})},onSuggestionExplicitlyDismissed:function(e,n){return t.forEach(function(t){var r;return null===(r=t.onSuggestionExplicitlyDismissed)||void 0===r?void 0:r.call(t,e,n)})},onSuggestionAccepted:function(e,n){return t.forEach(function(t){var r;return null===(r=t.onSuggestionAccepted)||void 0===r?void 0:r.call(t,e,n)})}}}})},19934:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(59695),i=n(80047),o=n(41733),a=n(21262),l=n(71440),c=n(58995);function s(){var e=(0,a._)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return s=function(){return e},e}var u={},d=(0,l.Ps)(s());function f(){var e,t,n,a,l=(0,r.Gn)("completeCodeEngine").preferences,s=(e=(0,o._)({},u,void 0),c.a(d,e)).data,f=null==l?void 0:l.completeCodeEngine;if(f&&(null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t.hasOverride)&&i.vw.has(f))return{engine:f,settings:i.Uw[f]};var h=null!==(a=null==s?void 0:null===(n=s.currentUser)||void 0===n?void 0:n.defaultEngine)&&void 0!==a?a:i.OO;return{engine:h,settings:i.Uw[h]}}},9853:function(e,t,n){n.d(t,{Yy:function(){return i},ZP:function(){return p},G_:function(){return h}});var r,i,o=n(9413),a=n(41733),l=n(21262),c=n(71440),s=n(58995);function u(){var e=(0,l._)(['\n  query CompleteCode {\n    currentUser {\n      id\n      hasAiPro\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function h(e){return"None"!==e&&"BackendOnly"!==e}function p(){var e,t=(e=(0,a._)({},d,void 0),s.a(f,e)).data,n=(0,o.v)().isTeamWithAiDisabled,r=null==t?void 0:t.currentUser;return!r||r.hasKillswitch||n?"None":r.hasAiPro?"Pro":"Basic"}(r=i||(i={})).None="None",r.Basic="Basic",r.Pro="Pro",r.BackendOnly="BackendOnly"},61269:function(e,t,n){n.d(t,{Z:function(){return e5}});var r,i,o=n(27387),a=n(96583),l=n(43182),c=n(80403),s=n(16826),u=n(26294),d=c.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),f=n(12285),h=n(4384),p=n(80332),m=function(){"use strict";function e(t,n){(0,f._)(this,e),this.cooldown=t,this.ignored=n}var t=e.prototype;return t.delay=function(t){return new e(Date.now()+t,this.ignored)},t.ignore=function(t){return this.ignored!==t?new e(this.cooldown,t):this},t.vent=function(){return null!==this.cooldown?new e(null,this.ignored):this},t.clear=function(){return null!==this.cooldown||null!==this.ignored?new e(null,null):this},t.tick=function(){return null!==this.cooldown&&Date.now()>this.cooldown?this.vent():this},t.handle=function(e,t){switch(t.reason){case p.VJ.FULLY_TYPED_INTO:case p.VJ.ACCEPTED_BY_USER:return this.clear();case p.VJ.DISMISSED_BY_USER:return this.delay(5e3).ignore(e.suggestion.content);case p.VJ.INCOMPATIBLE_DOCUMENT_CHANGE:case p.VJ.INCOMPATIBLE_CURSOR_CHANGE:return e.suggestion.ctx.onEmptyLine?this.delay(5e3):this.delay(1e3)}return this},t.isIgnored=function(e){return null!==this.ignored&&function(e,t){for(var n=Math.max(e.length,t.length),r=0,i=0;i<n;i++)e[i]!==t[i]&&r++;return 1-r/n}(this.ignored,e)>=.8},(0,h._)(e,[{key:"cooling",get:function(){return null!==this.cooldown&&Date.now()<this.cooldown}},{key:"remaining",get:function(){return null!==this.cooldown?Math.max(0,this.cooldown-Date.now()):0}}]),e}(),v=c.r$.define({combine:function(e){return!e.length||e[0]}}),g=c.QQ.define({create:function(){return new m(null,null)},update:function(e,t){if(!t.state.facet(v)||(e=e.tick()).cooling)return e;var n=t.startState.field(p.WF,!1),r=t.state.field(p.WF,!1);return n&&r&&n.presented&&r.stopped?e.handle(n,r):e}}),y=n(85500),b=n(8117),w=n(34328),Z=c.QQ.define({create:function(){return null},update:function(e,t){if(t.annotation(w.Z)||!t.state.field(p.WF).stopped)return null;if(!t.docChanged&&!t.selection)return e;var n=t.newDoc,r=t.newSelection.main.head;return t.annotation(c.YW.remote)?null!==e&&(0,y.zV)(n,r)&&(0,y.to)(n,r)?e:null:t.selection&&t.isUserEvent("select")?(0,y.zV)(n,r)&&(0,y.to)(n,r)?Date.now():null:t.docChanged&&null!==e?(0,y.zV)(n,r)&&(0,y.to)(n,r)?e:null:e}}),x=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.timeout=null}var t=e.prototype;return t.update=function(e){var t=this,n=e.startState.field(Z),r=e.state.field(Z);n!==r&&(null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),null!==r&&(this.timeout=setTimeout(function(){t.timeout=null,t.view.dispatch({effects:[b.mb.of(b.xz.NOW)]})},2500)))},t.destroy=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),C=s.lg.fromClass(x,{provide:function(){return Z}}),_=n(41733),S=n(30509),k=n(33083),E=n(92733),T=n(34156);(r=i||(i={}))[r.HIGH=1]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-1]="LOW";var R=c.r$.define({combine:function(e){var t=e.filter(Boolean);return function(e){return t.map(function(t){return"function"==typeof t?t(e):t}).filter(Boolean).flat()}}}),I=function(){"use strict";function e(t){if((0,f._)(this,e),this.priority=null!==(n=t.priority)&&void 0!==n?n:i.NORMAL,this.header=t.header,this.segments=t.segments,this.accepted=0,this.curLength=0,this.segments.length){var n,r=this.header?this.header.length+1:0;this.maxLength=r+this.segments.reduce(function(e,t){return e+t.length},0),this.minLength=r+this.segments[this.segments.length-1].length}else this.maxLength=0,this.minLength=0}var t=e.prototype;return t.acceptSegment=function(e){if(this.accepted===this.segments.length)return 0;var t=this.segments[this.index-1],n=0===this.accepted&&this.header?this.header.length+t.length+1:t.length;return n>e?0:(this.accepted++,this.curLength+=n,n)},t.acceptAll=function(){this.accepted=this.segments.length,this.curLength=this.maxLength},t.finalize=function(){return 0===this.accepted?null:(this.header?this.header+"\n":"")+this.segments.slice(this.index).join("").trimEnd()},e.acceptSegments=function(e,t){for(var n=t;t>0;){var r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value.acceptSegment(t);s&&(t-=s,r=!0)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!r)break}return n-t},(0,h._)(e,[{key:"index",get:function(){return this.segments.length-this.accepted}}]),e}(),D=function(){"use strict";function e(t){(0,f._)(this,e),this.priority=t,this.chunks=[],this.size=0}var t=e.prototype;return t.add=function(e){this.chunks.push(e),this.size+=e.maxLength},t.resize=function(e){if(e<this.accepted)throw Error("Cannot resize below already accepted");this.size=e},t.accept=function(){I.acceptSegments(this.chunks,this.size-this.accepted)},e.fromChunkViews=function(t){var n=[],r=new Map,i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=r.get(s.priority);u||(u=new e(s.priority),n.push(u),r.set(s.priority,u)),u.add(s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n},(0,h._)(e,[{key:"accepted",get:function(){return this.chunks.reduce(function(e,t){return e+t.curLength},0)}},{key:"empty",get:function(){return 0===this.size}}]),e}();function B(e,t){switch(e){case"coffeescript":case"dockerfile":case"elixir":case"julia":case"makefile":case"perl":case"python":case"python 3":case"shellscript":case"terraform":case"yaml":return"# ".concat(t);case"sql":case"lua":return"-- ".concat(t);case"html":case"svelte":case"xml":case"xsl":return"<!-- ".concat(t," -->");case"css":return"/* ".concat(t," */");case"tex":case"latex":case"matlab":return"% ".concat(t);case"vb":return"' ".concat(t);case"markdown":return"[]: # ".concat(t);case"handlebars":return"{{!-- ".concat(t," --}}");case"haml":return"-# ".concat(t);case"erb":return"<%# ".concat(t," %>");default:return"// ".concat(t)}}var G=n(31417),A=n(16689),P=n.n(A),N=["o17pu","o1gpu","ovgpu","ovgpure","ovgpuref","ovgpurf","ovgpuva","ovgpuvat","o!gpu","pnzfyhg","pnzjuber","puvap","puvax","pbba","pbbaf","phaavr","phag","phagsnpr","phagubyr","phagyvpx","phagyvpx","phagyvpxre","phagyvpxre","phagyvpxvat","phagyvpxvat","phagent","phagf","qnexvr","qngr encr","qngrencr","snt","sntont","sntt","snttvat","snttvg","snttvgg","snttbg","snttf","sntbg","sntbgf","sntf","sntgneq","sngnff","shpxgneq","shpxgneqf","tnat onat","tnatonat","tnatonatrq","tnatonatrq","tnatonatf","tnlgneq","tnljnq","tbngpk","tbngfr","tevatb","ubne","ubner","ubre","ubbxre","wnvy onvg","wnvyonvg","wnc","wvtnobb","wvttnobb","wvttreobb","xhag","y3v+pu","y3vgpu","yrzba cnegl","ybyvgn","a1ttn","a1ttre","anzoyn","arteb","avtt3e","avtt4u","avttn","avttnu","avttnf","avttnm","avttre","avttref","avtyrg","avt abt","dhrreonvg","dhrreubyr","encr","encvat","encvfg","ergneq","ehfxv","furznyr","fubgn","fxnax","fyhg","fyhgont","fyhgf","jrgonpx","juvgr cbjre","juber"],L=N.reduce(function(e,t){return Math.max(e,t.length)},0),O=new RegExp("(?:\\w+[^\\S\\n]*)?\\w*[^]{".concat(L,"}$")),U=null,M=function(){"use strict";function e(t){var n=this;(0,f._)(this,e),this.config=t,this.finished=!1,this.abortController=new AbortController,this.suggestion="",this.promise=this.start(),this.abortController.signal.addEventListener("abort",function(){if(!n.finished){var e,t;n.finished=!0,null===(e=(t=n.config).onFinished)||void 0===e||e.call(t,null)}})}var t=e.prototype;return t.start=function(){var e=this;return(0,o._)(function(){var t,n,r,i,o,l,c,s,u,d,f,h,p,m,v,g,b,w,Z,x,C,_,S,k,E,T,R,I,D,B,A,M;return(0,a.Jh)(this,function(a){switch(a.label){case 0:a.trys.push([0,13,,14]),i="",o=!0,l=!1,c=void 0;try{for(s=e.config.prefix.iter(-1)[Symbol.iterator]();!(o=(u=s.next()).done)&&(f=(d=u.value).trimEnd(),i=(d?d.slice(f.length):"\n")+i,!(f.length>0));o=!0);}catch(e){l=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}h=e.config.prefix.length-i.length,p=i?e.config.prefix.slice(0,h):e.config.prefix,v=e.config.request({prefix:p.toString(),suffix:null===(r=e.config.suffix)||void 0===r?void 0:r.toString(),header:null!==(m=e.config.header)&&void 0!==m?m:void 0,language:e.config.language,maxTokens:e.config.maxTokens,signal:e.abortController.signal}),g=!0,b=!!i,w="",Z=!1,x=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),_=(0,G._)(v),a.label=2;case 2:return[4,_.next()];case 3:if(!(Z=!(S=a.sent()).done))return[3,5];if(k=S.value,b){if(w+=k,(0,y.xb)(k))return[3,4];if(b=!1,E=(0,y.O8)(w),T=(0,y.O8)(i),!E.indentation.startsWith(T.indentation)||!!T.newlines!=!!E.newlines)return e.abort(),[3,5];k=E.indentation.slice(T.indentation.length)+E.content}if(function(e,t){if(t){var n,r;"string"!=typeof t&&(t=t.sliceString(Math.max(0,t.length-2*L))),e=(null!==(r=null===(n=t.match(O))||void 0===n?void 0:n[0])&&void 0!==r?r:t)+e}if(null===U){var i=N.map(function(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+("n">e.toLowerCase()?13:-13))})}).map(function(e){return P()(e.toLowerCase().trim())}).sort(function(e,t){return t.length-e.length}).join("|"),o="\\b|\\d|_";U=RegExp("(?:".concat(o,")(?:").concat(i,")(?:").concat(o,")"),"i")}return U.test(e)}(k,g?p:e.suggestion))return e.abort(),null===(R=(I=e.config).onError)||void 0===R||R.call(I,Error("Slur detected in output")),[3,5];if(e.suggestion+=k,e.config.onTextReceived&&!1===e.config.onTextReceived(e.suggestion,g))return e.abort(),[3,5];g=!1,a.label=4;case 4:return Z=!1,[3,2];case 5:return[3,12];case 6:return D=a.sent(),x=!0,C=D,[3,12];case 7:if(a.trys.push([7,,10,11]),!(Z&&null!=_.return))return[3,9];return[4,_.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(x)throw C;return[7];case 11:return[7];case 12:return[3,14];case 13:return B=a.sent(),e.aborted||e.abort(),B instanceof DOMException&&"AbortError"===B.name||null===(A=(M=e.config).onError)||void 0===A||A.call(M,B),[3,14];case 14:if(e.aborted)return[2,null];return e.finished=!0,null===(t=(n=e.config).onFinished)||void 0===t||t.call(n,e.suggestion),[2,e.suggestion]}})})()},t.abort=function(){this.aborted||this.abortController.abort()},t.then=function(e,t){return this.promise.then(e,t)},(0,h._)(e,[{key:"aborted",get:function(){return this.abortController.signal.aborted}}]),e}(),X=n(43037),F=n(75869),W=n(22897),H=function(){"use strict";function e(t,n,r,i,o){(0,f._)(this,e),this.text=t,this.pos=n,this.docA=r,this.treeA=i,this.parser=o}var t=e.prototype;return t.hasTree=function(){return null!==this.parser&&null!==this.treeA},t.update=function(t){var n=this,r=new e(t,this.pos,this.docA,this.treeA,this.parser);if(r._line=this._line,r._onEmptyLine=this._onEmptyLine,r._inEmptyBlock=this._inEmptyBlock,r._blockA=this._blockA,this.parser&&this.treeA&&(this.reuseData||this._treeB)){var i=(0,W.F)(this.text,t),o=[];i.iterChanges(function(e,t,r,i,a){o.push({from:n.pos+e,to:n.pos+t,insert:a})});var a=c.as.of(o,this.docB.length);this.reuseData&&!this._treeB?r.reuseData={diff:this.reuseData.diff.compose(a),docB:this.reuseData.docB,treeB:this.reuseData.treeB}:this._treeB&&(r.reuseData={diff:a,docB:this.docB,treeB:this._treeB})}return r},(0,h._)(e,[{key:"line",get:function(){return void 0===this._line&&(this._line=this.docA.lineAt(this.pos)),this._line}},{key:"onEmptyLine",get:function(){return void 0===this._onEmptyLine&&(this._onEmptyLine=(0,y.xb)(this.line)),this._onEmptyLine}},{key:"changesAtoB",get:function(){return void 0===this._changesAtoB&&(this._changesAtoB=c.as.of({from:this.pos,to:this.docA.length,insert:this.text},this.docA.length)),this._changesAtoB}},{key:"docB",get:function(){return void 0===this._docB&&(this._docB=this.reuseData?this.reuseData.diff.apply(this.reuseData.docB):this.changesAtoB.apply(this.docA)),this._docB}},{key:"treeB",get:function(){return void 0===this._treeB&&(this.treeA&&this.parser?this.reuseData?this._treeB=(0,F.p)({parser:this.parser,changes:this.reuseData.diff,text:this.docB,base:this.reuseData.treeB}):this._treeB=(0,F.p)({parser:this.parser,changes:this.changesAtoB,text:this.docB,base:this.treeA}):this._treeB=null),this._treeB}},{key:"inEmptyBlock",get:function(){return void 0===this._inEmptyBlock&&(this._inEmptyBlock=!!this.treeA&&(0,X.ib)(this.docA,this.treeA,this.pos)),this._inEmptyBlock}},{key:"blockA",get:function(){return void 0===this._blockA&&(this._blockA=this.treeA?(0,X.gQ)(this.treeA,this.pos):null),this._blockA}},{key:"blockB",get:function(){return void 0===this._blockB&&(this._blockB=this.treeB?(0,X.gQ)(this.treeB,this.pos):null),this._blockB}}]),e}(),V=n(63257),z=n(99415);function j(e,t,n){var r,i=null!==(r=e.prop(t<0?z.md.openedBy:z.md.closedBy))&&void 0!==r?r:null;if(null===i||n&&!i.includes(n.name)){if(!n)return null;i=i?(0,V._)(i).concat([n.name]):[n.name]}return i}function q(e,t,n){var r=j(e.type,t,n);if(null===r)return null;for(var i=e.cursor(),o=0;t<0?i.prevSibling():i.nextSibling();){if(0===o&&i.from!==i.to&&r.includes(i.name))return i.node;if(null!==j(i.type,t)){o++;continue}if(null!==j(i.type,-t)){if(0===o)return null;o--}}return null}function J(e){return e.split("").reverse().join("")}function Y(e){if(!e[0]||1===e.length)return e[0]||"";for(var t=0;e[0][t]&&e.every(function(n){return n[t]===e[0][t]});)t++;return e[0].substring(0,t)}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.length<1)return{halt:!1};for(var i=e[e.length-1],o=null!==r?i.split(r):e,a=1;a<=n;a++){var l=!1;if(o.length<a+t)break;for(var c=t;c>0;c--)if(o[o.length-c]!==o[o.length-c-a]){l=!0;break}if(!l)return{halt:!0,truncateLine:e.length-1}}return{halt:!1}}var $=function(e,t){return e.length<t.length},Q=function(e,t){var n=""===e?1:parseInt(e,10),r=parseInt(t,10);return!(isNaN(n)||isNaN(r))&&n+1===r};function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$;if(e.length<t)return{halt:!1};var o=e.slice(-1*t),a=Y(o),l=J(Y(o.map(J)));if(a.length<n||l.length<r)return{halt:!1};for(var c=null,s=0;s<t;s++){var u=o[s].substring(a.length),d=u.substring(0,u.length-l.length);if(!(!c||i(c,d)))return{halt:!1};c=d}return{halt:!0,truncateLine:e.length-t}}var et=[function(e){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=1;r<t;r++){var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return e.length<t||e[e.length-1].trim().length<n?{halt:!1}:e[e.length-1]===e[e.length-t-1]?{halt:!0,truncateLine:e.length-t}:{halt:!1}}(e,r,n);if(i.halt)return i}return{halt:!1}}(e,8,3)},function(e){return ee(e,3,6,3,$)},function(e){return ee(e,3,6,1,Q)},function(e){return K(e,12,12," ")},function(e){return K(e,8,16,"")}],en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return function(t){for(var n=t.split("\n"),r=n.slice(0,-1),i=0;i<e.length;i++){var o=e[i](n);if(o.halt)return{haltAfter:!0,replacementSuggestion:n.slice(0,o.truncateLine).join("\n")};var a=e[i](r);if(a.halt)return{haltAfter:!0,replacementSuggestion:r.slice(0,a.truncateLine).join("\n")}}return{haltAfter:!1}}}(),er=n(36480),ei=/[([{]+(?=\s*$)/,eo=/[)\]};]+\s*$/,ea=function(){"use strict";function e(t,n,r,i,o){(0,f._)(this,e),this.source=t,this.pos=n,this.newlines=r,this.content=i,this.ctx=o,this.empty=(0,y.xb)(i),this.text=this.empty?"":r+i,this.lines=(0,y.uq)(i)}var t=e.prototype;return t.with=function(t){var n=this.source,r=this.content,i=this.newlines;if("source"in t&&void 0!==t.source){n=t.source;var o=(0,y.O8)(n);r=o.indentation+o.content,i=o.newlines}if("text"in t&&void 0!==t.text){var a=(0,y.O8)(t.text);r=a.indentation+a.content,i=a.newlines}"content"in t&&void 0!==t.content&&(r=t.content),"newlines"in t&&void 0!==t.newlines&&(i=t.newlines);var l=this;if(n!==this.source||r!==this.content||i!==this.newlines){var c=this.ctx.update((0,y.xb)(r)?"":i+r);l=new e(n,this.pos,i,r,c)}return!l.empty&&t.process&&(l="boolean"==typeof t.process?l.process():l.process(t.process)),l},t.slice=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?this.with({text:this.text.slice(e,t)}):this.with({content:this.content.slice(e,t)})},t.splice=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r?this.text:this.content,o=i.slice(0,e),a=i.slice(e+t);return r?this.with({text:o+n+a}):this.with({content:o+n+a})},t.clip=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.pos>=e)return this.slice(0,a.index+a.offset,!0)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return this},t.stopAtLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?this.newlines.length:0;if(e<0||e>this.lines.length+n)throw Error("Index out of range: "+e);if(t&&e<n)return this.with({text:this.newlines.slice(0,e)});for(var r=e-n;r<this.lines.length&&(0,y.Jz)(this.lines[r]);)r++;var i=this.lines.slice(0,r).join("\n");return this.with({content:i})},t.removeIncompleteLine=function(){if(1===this.lines.length)return this;var e=this.lines[this.lines.length-1];return(0,y.xb)(e)||eo.test(e)?this:this.slice(0,this.content.length-e.length)},t.trimEnd=function(){return this.with({content:this.content.trimEnd()})},t.removeNewlinesIfOnEmptyLine=function(){return this.newlines&&this.ctx.onEmptyLine?this.with({newlines:""}):this},t.cutSuggestion=function(){if(this.empty)return this;if((0,y.Jz)(this.lines[0])||!this.ctx.hasTree())return this.stopAtLine(1);var e=(0,X.zX)(this.ctx.treeB,this.pos);if(!e.length)return this.stopAtLine(1);var t=this.pos+this.lines[0].length,n=this.ctx.inEmptyBlock?e:e.filter(function(e){return e.from<=t}),r=n.length?n[n.length-1].to-this.pos:null;return(null!==r&&r<0&&(r=null),this.ctx.blockB&&this.ctx.blockB.node.from<this.pos&&(null===r||r>this.ctx.blockB.node.to-this.pos)&&(this.ctx.inEmptyBlock||!this.ctx.blockA||this.ctx.blockA.node.from<this.ctx.blockB.node.from)&&(r=this.ctx.blockB.node.to-this.pos),null===r)?this.ctx.inEmptyBlock?this.ctx.blockA?this.clip(this.ctx.blockA.node.to):this:this.ctx.blockA?this.stopAtLine(1).clip(this.ctx.blockA.node.to):this.stopAtLine(1):this.ctx.blockA&&(this.ctx.inEmptyBlock||!this.ctx.onEmptyLine)?this.slice(0,r,!0).clip(this.ctx.blockA.node.to):this.slice(0,r,!0)},t.filter=function(){var e=en(this.content).replacementSuggestion;return e?this.with({content:e}):this},t.clearIfContentIsIsolated=function(){if(!this.ctx.onEmptyLine)return this;if(this.newlines)return this.with({content:""});if(1===this.segments.length&&0===this.segments[0].offset)return this;var e=this.segments.find(function(e){return!(0,y.xb)(e.text.slice(e.offset))});return e&&this.ctx.docA.lineAt(e.pos).number!==this.ctx.line.number?this.with({content:""}):this},t.removeDuplicateLastLine=function(){if(!this.newlines&&1===this.lines.length&&!this.ctx.onEmptyLine)return this;var e=this.segments[this.segments.length-1];if(e.offset===e.text.length-1)return this;var t=this.ctx.docA.lineAt(e.pos);if(t.number===this.ctx.docA.lines)return this;var n=e.text.slice(e.offset),r=n.lastIndexOf("\n"),i=-1!==r,o=i?e.index+e.offset+r:e.index+e.offset,a=i?n.slice(r+1):n;return(0,y.xb)(a)?this:(!i&&(0,y.xb)(t)&&(a=t.text+a),a===this.ctx.docA.line(t.number+1).text)?this.slice(0,o,!0):this},t.removeTrailingOpenBrackets=function(){var e=ei.exec(this.content);return e?this.splice(e.index,e.length):this},t.process=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.skipComplexProcessing?this.removeIncompleteLine().trimEnd().removeNewlinesIfOnEmptyLine():this.removeIncompleteLine().removeNewlinesIfOnEmptyLine().cutSuggestion().filter().trimEnd().removeDuplicateLastLine().removeTrailingOpenBrackets().trimEnd().clearIfContentIsIsolated()},e.create=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=(0,y.O8)(t),l=a.indentation+a.content,c=a.newlines,s=new H((0,y.xb)(l)?"":c+l,n,r,i,o);return new e(t,n,c,l,s)},(0,h._)(e,[{key:"segments",get:function(){if(void 0===this._segments){if(this.ctx.hasTree()){var e,t=function(e){var t=function(e){var t,n,r,i,o=e.insertion,a=e.pos;if("doc"in e){var l=e.parser;t=e.doc,n=e.tree;var s=c.as.of({from:a,to:t.length,insert:o},t.length);r=s.apply(t),i=(0,F.p)({parser:l,changes:s,text:r,base:n})}else t=e.docA,n=e.treeA,r=e.docB,i=e.treeB;return{insertion:o,pos:a,docA:t,treeA:n,docB:r,treeB:i}}(e),n=t.insertion,r=t.pos,i=t.docA,o=t.treeA,a=t.docB,l=t.treeB,s=[],u=[],d=l.cursor();do{if(null===j(d.type,-1))continue;var f=d.node,h=q(f,-1);if(h&&h.to<=r){var p=function(e,t){for(var n=t.resolveInner(e.from,1).node;n&&n.from===e.from;){if(n.type===e.type)return n;n=n.parent}return null}(h,o);if(p){s.push({openA:p,closeB:f});var m=q(p,1,f.type);m&&m.from>=r&&u.push(m)}}}while(d.prev()&&d.to>r);if(0===s.length||0===u.length)return null;var v=[],g=!0,y=!1,b=void 0;try{for(var w,Z=s[Symbol.iterator]();!(g=(w=Z.next()).done);g=!0){var x=w.value,C=x.openA,_=x.closeB,S=a.sliceString(_.from,_.to),k=j(C.type,1,_.type);if(null===k)throw Error("Unexpected null matching types");for(var E=0;E<u.length;E++){var T=u[E];if(k.includes(T.name)&&i.sliceString(T.from,T.to)===S){u.splice(0,E+1),v.unshift({closeA:T,closeB:_});break}}}}catch(e){y=!0,b=e}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw b}}if(0===v.length)return null;var R=[{text:n,pos:r,index:0,offset:0}],I=0,D=!0,B=!1,G=void 0;try{for(var A,P=v[Symbol.iterator]();!(D=(A=P.next()).done);D=!0){var N=A.value,L=N.closeA,O=N.closeB,U=R.pop();if(!U)throw Error("Unexpected empty split");var M=O.from-r,X=0;if(U.pos<L.from){for(var W=1;function(e,t,n,r){var i=e.sliceString(n,n+1);return i===t.sliceString(r,r+1)&&""===i.trim()}(i,a,L.from-W,O.from-W)&&L.from-W>=U.pos&&O.from-W>=r;)W++;X=W-1}M-=X;var H={text:n.slice(I,M),pos:U.pos,index:U.index,offset:U.offset},V={text:n.slice(M),pos:L.to,index:M,offset:L.to-L.from+X};I=M,R.push(H,V)}}catch(e){B=!0,G=e}finally{try{D||null==P.return||P.return()}finally{if(B)throw G}}return""===R[R.length-1].text&&R.pop(),R}({insertion:this.text,pos:this.pos,docA:this.ctx.docA,treeA:this.ctx.treeA,docB:this.ctx.docB,treeB:this.ctx.treeB});t&&(this._segments=t)}null!==(e=this._segments)&&void 0!==e||(this._segments=[{text:this.text,index:0,pos:this.pos,offset:0}])}return this._segments}},{key:"insertions",get:function(){if(void 0===this._insertions){var e=new c.f_,t=!0,n=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=c.xv.of((0,y.uq)(a.text)),s=new er.Yf(l,a.offset);e.add(a.pos,a.pos,s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this._insertions=e.finish()}return this._insertions}}]),e}(),el=n(15323),ec=n(20870),es=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.destroyed=!1,this.stream=null,this.debounceTimeout=null,this.queued=!1,this.lastPrefixLength=0}var t=e.prototype;return t.dispatchSuggestion=function(e){this.view.dispatch({effects:p.OK.of(e)})},t.dismiss=function(e){this.queued=!1,null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.stream||this.stream.finished||this.stream.aborted||this.stream.abort(),this.destroyed||this.suggestion.stopped||this.dispatchSuggestion(this.suggestion.dismiss(e)),this.listeners.onDismiss(this.view)},t.requestSuggestion=function(e){var t,n,r=this;if(null!==this.config&&null!==this.fileTypeConfig){if(null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.config.debounceAlways&&!this.regulator.cooling&&e===b.xz.NOW){this.requestSuggestionImmediately();return}var i=this.view.state.selection.main.head,o=this.view.state.wordAt(i),a=o&&o.from!==i?null!==(n=this.config.debounceTimeInsideWord)&&void 0!==n?n:0:null!==(t=this.config.debounceTimeOutsideWord)&&void 0!==t?t:0;this.regulator.cooling&&(a=Math.max(a,this.regulator.remaining)),0===a?this.requestSuggestionImmediately():this.debounceTimeout=setTimeout(function(){r.debounceTimeout=null,r.requestSuggestionImmediately()},a)}},t.requestSuggestionImmediately=function(){var e,t,n,r,i=this;if(this.dismiss(),!this.suggestion.stopped)throw Error("dismiss should have stopped the suggestion");if(null!==this.config&&null!==this.fileTypeConfig&&!this.destroyed&&this.view.hasFocus&&(0,y.zV)(this.view.state.doc,this.view.state.selection.main.head)){var o=this.config,a=this.view.state,c=a.selection.main.head,s=a.doc,u=(0,k.qz)(a),d=null!==(t=null===(e=a.facet(k.dK))||void 0===e?void 0:e.parser)&&void 0!==t?t:null,f=this.fileTypeConfig,h={skipComplexProcessing:null!==(n=f.skipComplexProcessing)&&void 0!==n&&n},m=a.facet(R),v=function(e){var t=e.doc,n=e.pos,r=e.path,i=e.language,o=e.infill,a=e.context,l=e.limit,c=void 0===l?E.UQ:l,s=e.reserved,u=void 0===s?E.i$:s,d=["Language: ".concat(i),"Path: ".concat(r)].map(function(e){return B(i,e)}).join("\n")+"\n";if(d.length>c)throw Error("Cannot fit required header parts in prompt");if(null==a?void 0:a.length){var f=function(e,t){if((t-=2*e.length)<=0)return null;var n=e.map(function(e){return new I(e)}).filter(function(e){return e.maxLength>0&&e.minLength<=t}).sort(function(e,t){return e.priority===t.priority?e.minLength-t.minLength:t.priority-e.priority});if(!n.length)return null;var r=D.fromChunkViews(n),i=r.reduce(function(e,t){return e+t.size},0);if(i>t){var o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u.size>t&&(i-=u.size-t,u.resize(t))}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}for(;i>t;){var d=1,f=!0,h=!1,p=void 0;try{for(var m,v=r[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;if(!g.empty){var y=Math.max(0,g.size-d);i-=g.size-y,g.resize(y),d++}}}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}var b=!0,w=!1,Z=void 0;try{for(var x,C=r[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var _=x.value;_.empty||_.accept()}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}var S=r.reduce(function(e,t){return e+t.accepted},0);S<t&&I.acceptSegments(n,t-S)}else n.forEach(function(e){return e.acceptAll()});return n.map(function(e){return e.finalize()}).filter(Boolean).reverse().join("\n\n")||null}(a,Math.max(u-d.length-2,c-n-d.length-2));f&&(d=f+"\n\n"+d)}var h=function(e,t,n){for(var r=e.slice(0,t);r.length>n;)r=r.lines>1?r.slice(r.line(1).to+1):r.slice(r.length-n);return r}(t,n,c-d.length),p=o?function(e,t){var n=e.slice(t);if(1===n.lines)return n;var r=0,i=null,o=!0,a=!1,l=void 0;try{for(var c,s=n.iterLines()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if(r++,""!==u&&u.trimStart()===u){i=n.line(r);break}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i?n.slice(0,i.to):n}(t,n):null;if(d.length+h.length>c)throw Error("Prompt is over the maximum length");return{prefix:h,suffix:p,header:d}}({doc:s,pos:c,path:f.path,language:f.id,infill:null!==(r=this.config.infill)&&void 0!==r&&r,context:m(this.view)}),g=v.prefix,w=v.suffix,Z=v.header,x=(0,X.ib)(s,u,c)?E.uV.EMPTY_BLOCK:E.uV.DEFAULT;this.lastPrefixLength=g.length,o.backendOnly||this.dispatchSuggestion(this.suggestion.start()),this.stream=new M({request:o.request,language:f.id,maxTokens:x,prefix:g,suffix:w,header:Z,onTextReceived:function(e,t){if(t&&i.listeners.onRequestFirstEmit(i.view),o.backendOnly){i.listeners.onRequestIgnoredBackendOnly(i.view);return}if(i.suggestion.stopped||!t&&i.suggestion.slotted)return!1;var n=i.suggestion.slotted?i.suggestion.upgrade(ea.create(e,c,s,u,d).process(h)):i.suggestion.with({source:e,process:h});if(n.stopped||n.suggestion.empty)return!1;i.dispatchSuggestion(n)},onFinished:function(e){var t=i.queued;if(i.queued=!1,!o.backendOnly){if(e&&i.suggestion.active){var n=i.suggestion.suggestion.source!==e?i.suggestion.with({source:e,process:h}):i.suggestion;if(!n.stopped&&!n.suggestion.empty&&!i.regulator.isIgnored(n.suggestion.content)){i.dispatchSuggestion(n.presented?n:n.present()),i.listeners.onRequestCompletelyPresented(i.view);return}}i.dismiss(p.VJ.INCOMPATIBLE_SUGGESTION),t&&i.requestSuggestion(b.xz.ENQUEUE),""===e&&i.listeners.onRequestEndedWithNoSuggestion(i.view)}},onError:function(e){l.$e(function(t){t.setExtra("prefix",g.toString()),t.setExtra("suffix",null==w?void 0:w.toString()),t.setExtra("header",Z),t.setExtra("maxTokens",x),t.setExtra("filePath",f.path),t.setExtra("language",f.id),t.setExtra("selection-head",c),t.setExtra("previous-character",s.sliceString(c-1,c)),t.setTag("ghostwriter",!0),l.Tb(e)})}})}},t.postUpdate=function(e){var t=e.startState.field(p.WF,!1),n=e.state.field(p.WF,!1);t&&n&&t.presented&&n.stopped&&n.reason===p.VJ.FULLY_TYPED_INTO&&this.listeners.onSuggestionAccepted(this.view,t),(0,ec.aU)(e,d,el.Yp,el.xR)&&this.dismiss(),(0,ec.aU)(e,p.WF)&&this.suggestion.stopped&&this.streaming&&this.dismiss();var r=(0,b.Io)(e.transactions);switch(r){case b.xz.STOP:this.active&&this.dismiss();break;case b.xz.ENQUEUE:case b.xz.NOW:this.active?this.queued=!0:this.requestSuggestion(r)}},t.destroy=function(){this.destroyed=!0,this.dismiss()},(0,h._)(e,[{key:"config",get:function(){return this.view.state.facet(d)}},{key:"listeners",get:function(){return this.view.state.facet(T.t)}},{key:"suggestion",get:function(){return this.view.state.field(p.WF)}},{key:"regulator",get:function(){return this.view.state.field(g)}},{key:"fileTypeConfig",get:function(){var e,t=this.view.state.facet(el.Yp),n=this.view.state.facet(el.xR),r=null==n?void 0:null===(e=n.getFeature("ai"))||void 0===e?void 0:e.complete;return t&&n&&(null==r?void 0:r.enabled)?(0,S._)((0,_._)({},r),{id:n.id,path:t}):null}},{key:"streaming",get:function(){return null!==this.debounceTimeout||null!==this.stream&&!this.stream.finished}},{key:"active",get:function(){return this.streaming||!this.suggestion.stopped}}]),e}(),eu=s.lg.fromClass(es,{provide:function(e){return s.tk.updateListener.of(function(t){var n;null===(n=t.view.plugin(e))||void 0===n||n.postUpdate(t)})}}),ed=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.gesture=null,this.touchstart=this.touchstart.bind(this),this.touchmove=this.touchmove.bind(this),this.touchend=this.touchend.bind(this),this.touchcancel=this.touchcancel.bind(this),t.dom.addEventListener("touchstart",this.touchstart)}var t=e.prototype;return t.shouldAllowSwiping=function(){if(!this.view.hasFocus)return!1;var e=this.view.state.selection.main.head,t=this.view.viewport;if(t.from>e||t.to<e)return!1;var n=this.view.state.field(p.WF,!1);return!!(null==n?void 0:n.presented)},t.stop=function(){this.gesture&&(this.gesture=null,document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel))},t.touchFor=function(e){if(!this.gesture)return null;var t=!0,n=!1,r=void 0;try{for(var i,o=e.changedTouches[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.identifier===this.gesture.id)return a}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null},t.touchstart=function(e){if(this.gesture&&!this.gesture.time)return this.stop();if(!this.gesture&&this.shouldAllowSwiping()&&1===e.changedTouches.length){var t=e.changedTouches[0];this.gesture={id:t.identifier,start:{x:t.clientX,y:t.clientY},end:{x:t.clientX,y:t.clientY},time:null},document.addEventListener("touchmove",this.touchmove,{passive:!1}),document.addEventListener("touchend",this.touchend,{passive:!1}),document.addEventListener("touchcancel",this.touchcancel)}},t.touchmove=function(e){var t=this.touchFor(e);if(this.gesture&&t){if(this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY,this.gesture.time&&Date.now()-this.gesture.time>500)return this.stop();var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);if(n>20)return this.stop();if(r>10){if(this.gesture.start.x>this.gesture.end.x)return this.stop();this.gesture.time||(this.gesture.time=Date.now()),e.preventDefault()}}},t.touchend=function(e){var t=this.touchFor(e);if(this.gesture&&t){this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY;var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);n<=20&&r>75&&this.gesture.start.x<this.gesture.end.x&&(!this.gesture.time||Date.now()-this.gesture.time<500)&&((0,u.o)(this.view),e.preventDefault()),this.stop()}},t.touchcancel=function(e){this.touchFor(e)&&this.stop()},t.update=function(){this.gesture&&!this.shouldAllowSwiping()&&this.stop()},t.destroy=function(){this.view.dom.removeEventListener("touchstart",this.touchstart),document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel)},e}(),ef=s.lg.fromClass(ed),eh=n(11407),ep=c.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null},enables:function(e){return[d.compute([e],function(t){return t.facet(e)}),p.WF,b._v,eu,ef,C,g,c.Wl.high(s.$f.compute([e],function(t){var n=t.facet(e),r=[];return(null==n?void 0:n.keyAcceptSuggestion)&&r.push({key:(0,eh.cU)(n.keyAcceptSuggestion),run:u.o}),(null==n?void 0:n.keyDismissSuggestion)&&r.push({key:(0,eh.cU)(n.keyDismissSuggestion),run:u.i}),r}))]}}),em=n(17528),ev=n(2178),eg=n(50959);function ey(){return(ey=(0,ev._)(function(e){var t,n,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:return[4,(0,em._)(t.read())];case 2:if(r=(n=o.sent()).done,i=n.value,r)return[3,4];return[4,i];case 3:return o.sent(),[3,1];case 4:return t.releaseLock(),[2]}})})).apply(this,arguments)}function eb(){return(eb=(0,ev._)(function(e){var t,n,r,i,o,l,c,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:t=new TextDecoder("utf-8"),n=!1,r=!1,a.label=1;case 1:a.trys.push([1,7,8,13]),o=(0,G._)(function(e){return ey.apply(this,arguments)}(e)),a.label=2;case 2:return[4,(0,em._)(o.next())];case 3:if(!(n=!(l=a.sent()).done))return[3,6];return c=l.value,[4,t.decode(c,{stream:!0})];case 4:a.sent(),a.label=5;case 5:return n=!1,[3,2];case 6:return[3,13];case 7:return s=a.sent(),r=!0,i=s,[3,13];case 8:if(a.trys.push([8,,11,12]),!(n&&null!=o.return))return[3,10];return[4,o.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(r)throw i;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}var ew=n(9853),eZ=n(36556),ex=n(90079),eC=new Map,e_={beforeCompletion:function(e){l.n_({category:"ghostwriter",message:"Called completeCode: "+e.engine,level:"debug"});var t=ex.YX.add(e),n=eZ.kg.timeStart({engine:e.engine,replid:e.replId,codeLength:e.header?e.header.length+e.prefix.length:e.prefix.length});return eC.set(t,n),t},afterCompletion:function(e,t,n,r){switch(e){case"aborted":ex.YX.abort(r),eC.delete(r);break;case"success":l.n_({category:"ghostwriter",message:"Suggestion emitted: "+n.partialSuggestion,level:"debug"});var i=eC.get(r);if(!i)throw Error("No latency logger found for handle: "+JSON.stringify(r));i("code suggestion",{type:"success"}),eC.delete(r);break;case"finished":ex.YX.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:n.completeSuggestion});break;default:throw Error("Unknown completion kind: "+e)}},erroredCompletion:function(e,t){t&&(ex.YX.abort(t),eC.delete(t)),eZ.kg.error("CompleteCode: error in completion provider",{err:String(e)})}},eS=n(60305),ek=n(24226),eE=n(60941),eT=n(59695),eR=n(59786),eI=n(39271),eD=n(36647),eB=n(50798);function eG(e){return JSON.stringify({text:e})+"\n"}var eA=function(){"use strict";function e(){(0,f._)(this,e),this.list=[]}var t=e.prototype;return t.add=function(e,t,n){this.list.push({prefix:e,suggestion:t,tokens:n}),this.list.length>25&&this.list.pop(),this.list.sort(function(e,t){return t.suggestion.length-e.suggestion.length})},t.retrieve=function(e,t){for(var n=0;n<this.list.length;n++){var r=this.list[n],i=r.prefix,o=r.suggestion,a=r.tokens;if(!(2*a<t)){if(e===i)return eG(o);if(!(i.length>e.length||i.length+o.length<=e.length||2*Math.floor((i.length+o.length-e.length)/(o.length/a))<t)){var l=o.lastIndexOf("\n");if(-1===l||!(l<=e.length-i.length)){var c=i+o;if(c.startsWith(e)){var s=c.slice(e.length);if(s.trim().length)return eG(s)}}}}}return null},e}(),eP=n(19934),eN=n(66626),eL=n(75958),eO=n(42650),eU=n(39460),eM="ai.codecomplete.lastTooltipHintTimestamp",eX=(0,eO.cn)({tooltipOpen:!1,consecutiveRejections:0}),eF=n(81199),eW=n(39743),eH=n(45077),eV=n(53557),ez=n(57127),ej=n(36559),eq=/\n\n(?![^\S\n])/g,eJ=new(function(){"use strict";function e(){(0,f._)(this,e),this.map=new Map}var t=e.prototype;return t.removeExpired=function(){if(this.map.size){var e=Date.now(),t=!0,n=!1,r=void 0;try{for(var i,o=this.map.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,eN._)(i.value,2),l=a[0],c=a[1];e-c.timestamp>6e4&&this.map.delete(l)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},t.get=function(e){return this.removeExpired(),this.map.get(e)},t.add=function(e,t,n){if(this.removeExpired(),!this.map.has(e)&&10===this.map.size){var r=null,i=!0,o=!1,a=void 0;try{for(var l,c=this.map.values()[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;(!r||s.timestamp<r.timestamp)&&(r=s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!r)throw Error("Expected to find entry to remove from file cache");this.map.delete(r.path)}this.map.set(e,{path:e,type:t,content:n,timestamp:Date.now()})},t.clear=function(){this.map.clear()},e}()),eY=function(){"use strict";function e(t,n,r){var i=this;(0,f._)(this,e),this.view=t,this.readFile=n,this.recentFiles=r,this.destroyed=!1,this.chunks=[],this.dispose=r.subscribe(function(){return i.updateChunks()}),r.current.length&&this.updateChunks()}var t=e.prototype;return t.updateChunks=function(){var e=this;return(0,o._)(function(){var t,n,r,o,l,c,s,u,d,f,h,p,m,v,g,b;return(0,a.Jh)(this,function(w){switch(w.label){case 0:if(r=[],e.chunks=r,o=e.view.state.facet(el.Yp),l=e.view.state.facet(el.xR),!o||!l)return[2];"all"===(s=null!==(c=null===(n=l.features.ai)||void 0===n?void 0:null===(t=n.complete)||void 0===t?void 0:t.groups)&&void 0!==c?c:[])&&(s=[]),u=e.recentFiles.current.filter(function(e){return e!==o&&(0,ej.Mb)(e)}),d=!0,f=!1,h=void 0,w.label=1;case 1:w.trys.push([1,6,7,8]),p=function(){var t,n,c,u,d,f,h,p,m,g,b,w,Z,x,C;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(t=v.value,h=null==(f=null!==(d=null==(u=eJ.get(t))?void 0:u.type)&&void 0!==d?d:eV.$R.from(t))?void 0:null===(n=f.features.ai)||void 0===n?void 0:n.complete,!f||!(null==h?void 0:h.enabled))return[2,"continue"];if(!(f.id===l.id||"all"===h.groups||(null===(c=h.groups)||void 0===c?void 0:c.some(function(e){return s.includes(e)}))))return[3,3];if(void 0!==(p=null==u?void 0:u.content))return[3,2];return[4,e.readFile(t)];case 1:if(m=a.sent(),e.destroyed||e.chunks!==r)return[2,{v:void 0}];if(null===m)return[2,"continue"];p=m,eJ.add(t,f,p),a.label=2;case 2:var _;if(!(g=(_=(_=p).trim())?_.split(eq).map(function(e){return e.trim()}).filter(Boolean):[]).length)return[2,"continue"];if(b=B(l.id,"Consider this snippet from ".concat((0,ez.LA)(t,o))),w=B(l.id,""),Z=g.map(function(e){return(0,y.uq)(e).map(function(e){return B(l.id,e)}).join("\n")+"\n".concat(w,"\n")}),x=r.length,C=i.NORMAL,x<2?C=i.HIGH:x>=5&&(C=i.LOW),r.push({header:b,segments:Z,priority:C}),r.length>=10)return[2,"break"];a.label=3;case 3:return[2]}})},m=u[Symbol.iterator](),w.label=2;case 2:if(d=(v=m.next()).done)return[3,5];return[5,(0,a.XA)(p())];case 3:if(g=w.sent(),"object"===(0,eH._)(g))return[2,g.v];if("break"===g)return[3,5];w.label=4;case 4:return d=!0,[3,2];case 5:return[3,8];case 6:return b=w.sent(),f=!0,h=b,[3,8];case 7:try{d||null==m.return||m.return()}finally{if(f)throw h}return[7];case 8:return[2]}})})()},t.update=function(e){(0,ec.aU)(e,el.Yp,el.xR)&&this.updateChunks()},t.destroy=function(){this.destroyed=!0,this.dispose()},e}(),eK=new eE.j(function(e,t){return e&&t?s.lg.define(function(n){return new eY(n,e,t)},{provide:function(e){return R.of(function(t){var n,r;return null!==(r=null===(n=t.plugin(e))||void 0===n?void 0:n.chunks)&&void 0!==r?r:null})}}):null}),e$=n(78950),eQ=n(33566),e0=[];function e1(e){if(!(e.length>800)){var t=e0.indexOf(e);-1!==t&&e0.splice(t,1),e0.unshift(e),e0.length>10&&e0.pop()}}var e2=!1;function e3(e,t){var n=(0,eQ.I)(t.state),r=n.text,i=n.linewise;if(r&&r.trim()){if(i){var o=r.split(t.state.lineBreak).filter(function(e){return e.trim()}),a=!0,l=!1,c=void 0;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;e1(d)}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}else e1(r)}}var e4=[s.lg.define(function(){return!function(){if(!e2){e2=!0;var e=function(e){var t,n=null===(t=document.getSelection())||void 0===t?void 0:t.toString();n&&n.trim()&&Promise.resolve().then(function(){e.defaultPrevented||e1(n)})};document.addEventListener("copy",e),document.addEventListener("cut",e)}}(),{}}),c.Wl.highest(s.tk.domEventObservers({copy:function(e,t){return e3(e,t)},cut:function(e,t){return e3(e,t)}})),R.of(function(e){if(!e0.length)return null;var t=e.state.facet(el.xR);if(!t)return null;var n=function(e){return B(t.id,e)},r=(0,e$._)(e0),o=r[0],a=r.slice(1),l=[];if(o&&o.trim()){var c=n("Consider the current clipboard:"),s=o.trimEnd().split("\n").map(function(e){return n(e)}).join("\n");l.push({header:c,segments:[s],priority:i.HIGH})}var u=a.filter(function(e){return e&&e.trim()});if(u.length){var d=n("Consider the clipboard history:"),f=u.map(function(e){return e.trimEnd().split("\n").map(function(e,t){return 0===t?n("- ".concat(e)):n("  ".concat(e))}).join("\n")}).reverse();l.push({header:d,segments:f})}return l.length?l:null})],e8=new eE.j(function(e,t,n,r,i,o,a,l,c){var s,u;return e?(t===ew.Yy.Pro?(s=E.Dz,u=E.Dz):(s=a,u=a),[ep.of({request:o,infill:i,backendOnly:t===ew.Yy.BackendOnly,debounceTimeOutsideWord:s,debounceTimeInsideWord:u,debounceAlways:t!==ew.Yy.Pro,keyAcceptSuggestion:n,keyDismissSuggestion:r}),l?e4:[],c?[]:v.of(!1)]):null}),e6=new eE.j(function(e,t,n,r){if(!e)return null;var i,o,a=(i=null,o=function(){},{queue:function(e){if(!(Math.random()>.1)){i&&clearTimeout(i);var t=function(){(0,eS.j)(eS.U3.CODE_SUGGESTION_USED,(0,_._)({type:"suggestionPresented"},e))};i=setTimeout(t,500),o=t}},flush:function(){i&&clearTimeout(i),o()},cancel:function(){i&&clearTimeout(i)}});return T.t.of({onDismiss:function(){a.cancel()},onRequestIgnoredBackendOnly:function(){l.n_({category:"ghostwriter",message:"called completeCode for free user but did not show the ghost text.",level:"info"}),(0,eS.j)(eS.U3.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:t,filePath:n,reason:"ghostTextNotEnabledForFreeUser"})},onRequestFirstEmit:function(e){var r=e.plugin(eu);r&&(l.n_({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),a.queue({engine:t,filePath:n,prefixLength:r.lastPrefixLength}))},onRequestEndedWithNoSuggestion:function(){l.n_({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,eS.j)(eS.U3.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:t,filePath:n,reason:"noSuggestion"})},onSuggestionAccepted:function(e,i){var o=e.plugin(eu);o&&(a.flush(),(0,eS.j)(eS.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",engine:t,filePath:n,prefixLength:o.lastPrefixLength,suggestionLength:i.suggestion.content.length}),l.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),null==r||r.recordAccept())},onSuggestionExplicitlyDismissed:function(e){var i=e.plugin(eu);i&&(a.flush(),(0,eS.j)(eS.U3.CODE_SUGGESTION_USED,{type:"suggestionDismissed",engine:t,filePath:n,prefixLength:i.lastPrefixLength}),l.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),null==r||r.recordReject())}})});function e5(e){var t,n,r,i,l,c,s,u,d,f,h,p,m,v=e.filePath,g=(0,eF.Z)().fs,y=(0,eI.Z)(),b=(0,eT.Gn)("codeSuggestion").preferences,w=(0,ew.ZP)(),Z=b.codeSuggestion&&w!==ew.Yy.None;(0,eg.useEffect)(function(){ex.YX.toggle(Z)},[Z]);var x=(0,eP.Z)(),C=x.engine,k=x.settings,T=(0,eB.gf)(ek.CN.acceptPrimaryCompletion.id),R=(0,eB.gf)(ek.CN.cancelCompletion.id),I=null!==(m=null==k?void 0:k.infill)&&void 0!==m&&m,D=(0,eD.Z)(function(){return new eA},[v,y,C]),A=(n=(t={engine:C,replId:y,provider:(0,eD.Z)(function(){var e;return e=(0,o._)(function(e,t){var n,r,i,o,l,c;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,fetch("/ai/complete",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},signal:t,body:JSON.stringify(e)})];case 1:if(r=(n=a.sent()).body,!(200!==(i=n.status)))return[3,3];return o=Error.bind,c=(l="Error (".concat(i,") response from /ai/complete: ")).concat,[4,n.text()];case 2:throw new(o.apply(Error,[void 0,c.apply(l,[a.sent()])]));case 3:if(!r)throw Error("No body in response");return[2,function(){return function(e){return eb.apply(this,arguments)}(r)}]}})}),function(t,n){return e.apply(this,arguments)}},[]),cache:D,hooks:e_}).engine,r=t.replId,i=t.provider,l=t.cache,c=t.hooks,(0,eg.useCallback)((s=(0,ev._)(function(e){var t,o,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,_,S,k,E,T,R,I,D;return(0,a.Jh)(this,function(A){switch(A.label){case 0:if(t=e.prefix,o=e.suffix,s=e.header,u=e.language,d=e.maxTokens,f=e.signal,!t)return[2];if(h={prefix:t,suffix:o,header:s,engine:n,maxTokens:d,replId:r,stop:["\n\n","```"]},"markdown"===u&&(h.maxTokens=75,h.stop=[]),p=null==c?void 0:c.beforeCompletion(h),!(null!==(v=l.retrieve(t,d))))return[3,1];return m=(0,ev._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,v];case 1:return e.sent(),[2]}})}),[3,4];case 1:return A.trys.push([1,3,,4]),[4,(0,em._)(i(h,f))];case 2:return m=A.sent(),[3,4];case 3:if((null==(g=A.sent())?void 0:g.name)==="AbortError")return[2];return null==c||c.erroredCompletion(g instanceof Error?g:Error("Unknown error"),p),[2];case 4:y="",b="",w=!0,Z=!1,f.addEventListener("abort",function(){p&&(null==c||c.afterCompletion("aborted",h,{},p)),Z=!0}),x=!1,C=!1,A.label=5;case 5:A.trys.push([5,13,14,19]),S=(0,G._)(m()),A.label=6;case 6:return[4,(0,em._)(S.next())];case 7:if(!(x=!(k=A.sent()).done))return[3,12];E=k.value,b+=E,T=void 0,A.label=8;case 8:var P;if(!(-1!==(T=b.indexOf("\n"))))return[3,11];if(R=JSON.parse(b.substring(0,T)).text,b=b.substring(T+1),P=u,I=({replacementSuggestion:R.split("\n").filter(function(e){return!(e.startsWith(B(P,"Language: "))||e.startsWith(B(P,"Path: ")))}).join("\n")}).replacementSuggestion,y+=I,Z)return[3,10];return[4,I];case 9:A.sent(),A.label=10;case 10:return!Z&&w&&p&&(null==c||c.afterCompletion("success",h,{fromCache:!!v,partialSuggestion:I},p)),w=!1,en(y).haltAfter&&(Z=!0),[3,8];case 11:return x=!1,[3,6];case 12:return[3,19];case 13:return D=A.sent(),C=!0,_=D,[3,19];case 14:if(A.trys.push([14,,17,18]),!(x&&null!=S.return))return[3,16];return[4,S.return()];case 15:A.sent(),A.label=16;case 16:return[3,18];case 17:if(C)throw _;return[7];case 18:return[7];case 19:if(null===v&&y.trim().length&&l.add(t,y,d),!(!Z&&b))return[3,21];return[4,b];case 20:A.sent(),A.label=21;case 21:return p&&(null==c||c.afterCompletion("finished",h,{completeSuggestion:y,fromCache:!!v},p)),[2]}})}),function(e){return s.apply(this,arguments)}),[n,r,l,c,i])),P=(d=(u=(0,eN._)((0,eU.KO)(eX),2))[0],f=u[1],h=(0,eR.P5)({controlName:"flag-killswitch-pichu",logFlagToAnalytics:!1}),(0,eg.useEffect)(function(){if(h&&d.tooltipOpen){var e=setTimeout(function(){return f(function(e){return(0,S._)((0,_._)({},e),{tooltipOpen:!1})})},2500);return function(){return clearTimeout(e)}}},[h,d.tooltipOpen,f]),(0,eg.useMemo)(function(){return h?{recordAccept:function(){f(function(e){return(0,S._)((0,_._)({},e),{consecutiveRejections:0})})},recordReject:function(){f(function(e){var t=e.consecutiveRejections+1;if(t>=5){var n=eL.Z.get(eM,"number");if(!n||Date.now()-n>=432e6)return eL.Z.set(eM,Date.now()),(0,S._)((0,_._)({},e),{consecutiveRejections:t,tooltipOpen:!0})}return(0,S._)((0,_._)({},e),{consecutiveRejections:t})})}}:null},[h,f])),N=(0,eg.useCallback)((p=(0,o._)(function(e){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,g.readFile(e)];case 1:if(null!==(t=n.sent()).error)return[2,null];return[2,t.content.toString()]}})}),function(e){return p.apply(this,arguments)}),[g]),L=(0,eW._3)(),O=(0,eR.P5)({controlName:"flag-gw-magikarp-bounce-time",logFlagToAnalytics:!1,default:E.yr,type:"number"}),U=(0,eR.P5)({controlName:"flag-completely-different-clipboard",logFlagToAnalytics:!0}),M=(0,eR.P5)({controlName:"flag-completely-different-regulator"}),X=[e8.use(Z,w,T,R,I,A,O,U,M),e6.use(Z,C,v,P),eK.use(N,L)];return(0,eg.useMemo)(function(){return X},X)}},27318:function(e,t,n){n.d(t,{$_:function(){return A},II:function(){return R},If:function(){return T},U1:function(){return G},Xs:function(){return D},fL:function(){return E},k4:function(){return B}});var r=n(66626),i=n(63257),o=n(74985),a=n(86257),l=n(55927),c=n(80012),s=n(19068),u=n(82230),d=n(64432),f=n(94778),h=n(49224),p=n(82314),m=n(29318),v=n(36397),g=n(61114),y=n(72093),b=n(7198),w=n(50959),Z=n(99236),x=n(87128),C=[y.l0.p(4),y.l0.center,y.l0.borderRadius(4)],_=(0,h.X)({root:(0,i._)(C).concat([y.l0.cursor.pointer,(0,c.ec)("blurple")]),disabled:(0,i._)(C).concat([(0,c.ec)("grey")])});function S(e){return e.disabled||e.connecting?(0,o.tZ)(f.G,{css:_.disabled,tag:"button","data-cy":"ghostwriter-inline-submit",children:e.connecting?(0,o.tZ)(m.Z,{size:12}):(0,o.tZ)(v.Z,{size:12})}):(0,o.tZ)(f.G,{"data-cy":"ghostwriter-inline-submit",css:_.root,tag:"button",onClick:e.onClick,children:e.loading?(0,o.tZ)(g.Z,{size:12}):(0,o.tZ)(v.Z,{size:12})})}var k=(0,h.X)({root:[y.l0.py(8),y.l0.pr(8),y.l0.maxWidth(800),y.l0.colWithGap(4),{fontFamily:y.TV.fontFamilyDefault}],container:[y.l0.position.relative,y.l0.backgroundColor.backgroundDefault],input:[s.gU.outlined,y.l0.borderRadius(4),{paddingBottom:36,"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:"transparent"}}}],textarea:[y.l0.p(8),y.l0.pb(0),{caretColor:"initial",fontFamily:y.TV.fontFamilyDefault,border:"0 none",resize:"none",height:"1em",backgroundColor:"transparent","@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}},"::placeholder":{color:y.TV.foregroundDimmest}}],footer:[y.l0.px(8),y.l0.pr(6),y.l0.rowWithGap(8),y.l0.align.center,y.l0.position.absolute,y.l0.bottom(0),y.l0.left(0),y.l0.width("100%"),{height:36}],footerLeft:[y.l0.rowWithGap(8),y.l0.flex.growAndShrink(1),y.l0.align.center],modelLabel:[y.l0.rowWithGap(4),y.l0.align.center,y.l0.pt(1)],iconText:[y.l0.rowWithGap(4),y.l0.align.center],footerRight:[y.l0.rowWithGap(4),y.l0.align.center,{"& button":[y.l0.height(22),y.l0.py(6),y.l0.py(4),y.l0.borderRadius(4)]}],error:[y.l0.color.accentNegativeStronger]}),E=function(e){var t=e.requestMeasure,n=e.type,r=e.children,i=e.isCodeMirrorPocket,a=(0,l.Z)(t);return(0,o.tZ)(b.Z,{bsod:!0,tags:{ai:!0},extras:{type:n},origin:"ErrorBoundary: InlineAiWidget",children:(0,o.tZ)(f.G,{css:k.root,innerRef:a,className:void 0===i||i?"cm-pocket-widget":void 0,children:r})})},T=function(e){var t=e.requestMeasure,n=e.type,r=e.children,i=e.isCodeMirrorPocket,a=e.error,l=e.clearError;return(0,o.BX)(E,{type:n,requestMeasure:t,isCodeMirrorPocket:void 0===i||i,children:[(0,o.tZ)(f.G,{css:k.container,children:r}),a?(0,o.tZ)(Z.E,{icon:(0,o.tZ)(x.Z,{color:y.TV.accentNegativeDefault}),text:a,closable:!0,closeAction:l}):null]})};function R(e){var t=(0,a.Z)();return(0,o.tZ)(f.G,{css:k.input,children:(0,o.tZ)("textarea",{value:e.value,onChange:e.onChange,placeholder:e.placeholder,css:k.textarea,ref:t.ref,onKeyDown:e.onKeyDown,autoFocus:e.autoFocus,"data-cy":"ghostwriter-inline-input"})})}var I={generateCode:"Generate new code based on this file.",transformCode:"Modify selected code based on the context of this file."};function D(e){var t=e.type;return(0,o.tZ)(d.u,{tooltip:I[t],children:(0,o.BX)(f.G,{css:k.modelLabel,children:[(0,o.tZ)(p.Z,{size:12,color:y.TV.foregroundDimmest}),(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:"transformCode"===t?"Modify":"Generate"})]})})}function B(e){var t=e.loading,n=e.disabled,r=e.onClick,i=e.connecting,a=e.escPressed;return(0,o.BX)(o.HY,{children:[t?(0,o.BX)(f.G,{css:k.iconText,children:[(0,o.tZ)(m.Z,{size:12,color:y.TV.blurpleDefault}),(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:"AI is writing"})]}):(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:a?"Press Esc again to dismiss":"Esc to close, Enter to submit"}),(0,o.tZ)(S,{connecting:i,loading:t,disabled:n,onClick:r})]})}function G(e){var t=e.onClose,n=e.loading,i=e.onSubmit,o=(0,r._)((0,w.useState)(""),2),a=o[0],l=o[1],c=(0,r._)((0,w.useState)(!1),2),s=c[0],u=c[1];return{value:a,setValue:l,onKeyDown:function(e){switch(e.key){case"Escape":e.preventDefault(),a.length?s?t():u(!0):t();break;case"Enter":if(e.preventDefault(),n)break;e.shiftKey?l(function(e){return e+"\n"}):!e.metaKey&&a.length&&a.trim()&&i();break;default:u(!1)}},escPressed:s}}var A=function(e){var t=(0,r._)(e.children,2),n=t[0],i=t[1];return(0,o.BX)(f.G,{css:k.footer,children:[(0,o.tZ)(f.G,{css:k.footerLeft,children:n}),(0,o.tZ)(f.G,{css:k.footerRight,children:i})]})}},44322:function(e,t,n){n.d(t,{W:function(){return tg}});var r,i,o,a=n(80403),l=n(16826),c=n(56683),s=n(12285),u=n(4384),d=n(4955),f=n(9670),h=n(33083),p=n(99415),m=n(18857),v=n(75869),g=a.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),y=a.QQ.define({create:function(){return{diff:null,tree:p.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(g),o=null===(n=t.state.facet(h.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===p.mp.empty?e:{diff:null,tree:p.mp.empty};var a=e.diff,l=e.tree;return(a&&a.b.eq(i)?t.docChanged&&(a=a.updateA(t.newDoc,t.changes)):(a=m.z.create(t.newDoc,i),l=p.mp.empty),(null===(r=t.startState.facet(h.dK))||void 0===r?void 0:r.parser)!==o&&(l=p.mp.empty),o&&l.length!==a.b.length)?(l=(0,v.p)({parser:o,text:a.b,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),b=n(42516),w=n(72093),Z="cm-transform-diff-line-deletion-base",x="cm-transform-diff-line-deletion",C="cm-transform-diff-text-deletion",_="cm-transform-diff-line-insertion-base",S="cm-transform-diff-line-insertion",k="cm-transform-diff-text-insertion",E="cm-transform-diff-number-marker",T="rgba(180, 0, 0, 0.1)",R="rgba(180, 0, 0, 0.125)",I="rgba(0, 180, 0, 0.1)",D="rgba(0, 180, 0, 0.125)";function B(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var G=l.tk.theme((i={},(0,b._)(i,".".concat(_,", .").concat(S),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(w.TV.accentPrimaryDimmest," !important")}}),(0,b._)(i,".".concat(Z),{background:B(T),backgroundClip:"content-box"}),(0,b._)(i,".".concat(x),{background:B(T,R),backgroundClip:"content-box"}),(0,b._)(i,".".concat(_),{background:B(I),backgroundClip:"content-box"}),(0,b._)(i,".".concat(S),{background:B(I,D),backgroundClip:"content-box"}),(0,b._)(i,".".concat(k),{display:"inline-block",background:D}),(0,b._)(i,".".concat(C),{display:"inline-block",background:R}),(0,b._)(i,".".concat(E),{opacity:.5}),i)),A=n(51743),P=n(90051),N=n(3341),L=n.n(N),O=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e,r,i){var o;return(0,s._)(this,n),(o=t.call(this)).line=e,o.index=r,o.changed=i,o}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(_):"cm-line ".concat(S),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!=s?s:"",t.appendChild(u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,h=null,p=null,m=function(t,n){if(!h)throw Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-h.from,n-h.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!h){var v=this.line[f].text;h={from:d,to:d+v.length}}if(!p){var g=!0,y=!1,b=void 0;try{for(var w,Z=this.changed[Symbol.iterator]();!(g=(w=Z.next()).done);g=!0){var x=w.value;if(!(x.from>=h.to)&&!(x.to<=d)){var C=document.createElement("span");C.className=k,p={from:x.from,to:x.to,dom:C},d<p.from&&m(t,p.from),t.appendChild(C);break}}}catch(e){y=!0,b=e}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw b}}}p?(d<p.to&&m(p.dom,p.to),d>=p.to&&(p=null)):m(t,h.to),d>=h.to&&(h=null,f++)}return t},r.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&L()(this.line,e.line)&&L()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,u._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(l.l9),U=l.p.line({class:Z}),M=l.p.line({class:x}),X=l.p.mark({class:C}),F=l.tk.decorations.compute([y],function(e){var t=function(e,t){if(r.getLineChangeType(e.number,A.MF.A)===A.dQ.COVERED)o.push(M.range(e.from));else{o.push(U.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,A.Po)(e,t,A.MF.A,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(X.range(s.from,s.to))}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(y,!1);if(!n||!n.diff)return l.p.none;var r=n.diff,i=n.tree,o=[],a=!0,c=!1,s=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;if(f.fromA!==f.endA)for(var h=r.a.lineAt(f.fromA),p=r.a.lineAt(f.endA),m=h.number;m<=p.number;m++)t(r.a.line(m),f);else f.fromB===f.endB&&t(r.a.lineAt(f.fromA),f);if(f.fromB!==f.toB)for(var v=r.b.lineAt(f.fromB),g=(0,P.CT)(i,r.b,e,f.fromB,f.endB),b=0;b<g.length;b++){var w=g[b],Z=r.b.line(v.number+b),x=r.getLineChangeType(Z.number,A.MF.B)===A.dQ.COVERED?null:(0,A.Po)(Z,f,A.MF.B,!0),C=l.p.widget({widget:new O(w,Z.number,x),block:!0,side:b+1}),_=Math.min(f.endA,r.a.length);o.push(C.range(_))}}}catch(e){c=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(c)throw s}}return l.p.set(o,!0)}),W=n(67346),H=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r;return(0,s._)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className=E,e.textContent=String(this.index),e},r.eq=function(e){return this.index===e.index},n}(l.SJ),V=W.X4.of(function(e,t){if(t instanceof O)return new H(t.index)}),z=a.r$.define({enables:function(e){return[g.computeN([e],function(t){return t.facet(e)}),y,G,F,V]}}),j=n(49532),q=n(5283);(r=o||(o={}))[r.Compare=0]="Compare",r[r.Original=1]="Original",r[r.Suggestion=2]="Suggestion";var J=a.Py.define(),Y=a.QQ.define({create:function(){return o.Suggestion},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;if(c.is(J))e=c.value;else if(c.is(q.Q))e=null;else if(c.is(q.h)){var s=t.state.field(j.$);if((null==s?void 0:s.type)==="transformCode"&&c.value){var u=t.startState.field(j.u),d=c.value;!u&&d&&(e=o.Suggestion)}}}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e}}),K=n(15323),$=n(20870),Q=a.QQ.define({create:function(){return null},update:function(e,t){if(!(0,$.aU)(t,"doc",j.$,K.Yp,Y,j.u))return e;var n,r=t.state.field(j.$),i=t.state.facet(K.Yp),a=t.state.field(Y);if(!r||!i||r.codeReference.filePath!==i||a!==o.Suggestion)return null;var l=r.codeReference.range.indexFrom,c=r.codeReference.range.indexTo,s=t.state.doc.slice(l,c),u=null!==(n=t.state.field(j.u))&&void 0!==n?n:"",d=s.lines,f=u.split(t.state.lineBreak).length-d;return e&&e.after===l&&e.offset===f?e:{after:l,offset:f}}}),ee=W.gy.of(function(e,t){var n=e.state.doc.lineAt(t.from),r=e.state.field(Q);if(r&&!(n.from<=r.after))return new W.un(n.number+r.offset)}),et=W.X4.of(function(e,t){if(t instanceof en)return new W.un(t.index)}),en=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e,r,i){var o;return(0,s._)(this,n),(o=t.call(this)).line=e,o.block=r,o.index=i,o}var r=n.prototype;return r.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var t=!0,n=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=a.text,c=a.tags,s=document.createElement("span");s.textContent=l||"\xa0",c&&(s.className=c),e.appendChild(s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},r.eq=function(e){return this.index===e.index&&(0,P.gj)(this.line,e.line)},r.ignoreEvent=function(){return!1},(0,u._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(l.l9),er=[Q,ee,et,l.tk.decorations.compute([h.dK,j.$,j.u,Y,y,K.Yp,a.yy.lineSeparator],function(e){var t=e.field(j.$),n=e.facet(K.Yp),r=e.field(Y);if(!t||"transformCode"!==t.type||!n||t.codeReference.filePath!==n||r!==o.Suggestion)return l.p.none;var i=t.codeReference.range.indexFrom,a=t.codeReference.range.indexTo,c=e.doc.lineAt(i),s=e.doc.lineAt(a),u=e.toText(null!==(x=e.field(j.u))&&void 0!==x?x:""),d=e.changes({from:i,to:a,insert:u}),f=d.apply(e.doc),p=i+u.length,m=null===(Z=e.facet(h.dK))||void 0===Z?void 0:Z.parser,g=null;if(m)g=(0,v.p)({parser:m,text:f,changes:d,base:e,upTo:p}),C=(0,P.CT)(g,f,e,i,p);else{C=[];var y=!0,b=!1,w=void 0;try{for(var Z,x,C,_,S=u.iterLines()[Symbol.iterator]();!(y=(_=S.next()).done);y=!0){var k=_.value;C.push([{text:k}])}}catch(e){b=!0,w=e}finally{try{y||null==S.return||S.return()}finally{if(b)throw w}}}var E=[];C.length>1&&i!==a&&0!==s.length&&a===s.to&&a<e.doc.length?E.push(l.p.replace({inclusive:!1,block:!0}).range(i,a)):E.push(l.p.replace({inclusiveStart:!1,block:!0}).range(i,a));for(var T=0;T<C.length;T++){var R=C[T],I=c.number+T,D=l.p.widget({widget:new en(R,T>0,I),inlineOrder:!0,side:T+1,block:T>0});E.push(D.range(i))}return l.p.set(E,!0)})],ei=n(74985),eo=n(80332),ea=n(52178),el=n(12674),ec=n(60941),es=n(38753),eu=n(60305),ed=n(94778),ef=n(49224),eh=n(73590),ep=n(35068),em=n(37058),ev=n(81202),eg=n.n(ev),ey=n(25150),eb=(0,ef.X)({container:[{marginRight:16},w.l0.height("100%")],hintButton:[w.l0.height("100%")]}),ew=new el.J(function(e){var t=e.onGenerateCode,n=e.height,r=(0,es.T3)(),i=(0,em.gf)(eh.x.id);return(0,ei.tZ)(ed.G,{css:eb.container,children:(0,ei.tZ)(ep.s,{keyCombo:r?void 0:i,text:"Generate",fontSize:Math.round(.6*n),css:eb.hintButton,onClick:function(){(0,eu.j)(ey.U3.GHOSTWRITER_CHAT_INLINE_HINT_CLICKED,{action:"generate"}),t()}})})}),eZ=l.tk.theme({".cm-ghostwriter-hint-layer":{width:"100%"}}),ex=function(e){var t=e.selection.main.head;return e.doc.lineAt(t)},eC=new ec.j(function(e){return a.QQ.define({create:function(e){return ex(e)},compare:eg(),update:function(e,t){return ex(t.state)},provide:function(t){return[eZ,a.Wl.high((0,l.EY)({above:!0,class:"cm-ghostwriter-hint-layer",update:function(e){return(0,$.aU)(e,t,j.$,eo.WF)},markers:function(n){var r=n.state.field(t,!1);if(!r||!n.state.selection.main.empty)return[];var i=n.state.field(j.$,!1),o=0===n.state.doc.length,a=(0,ea.o)(n.state);if(r.length>0||i||a||o)return[];var l=n.dom.querySelector(".cm-minimap-gutter"),c=(null==l?void 0:l.clientWidth)||0,s=r.to,u=n.lineBlockAt(s),d=u.top,f=u.height;return[new e_({top:d+n.documentPadding.top,height:f,right:c,pocketOpen:null!==i,activeEditor:n.hasFocus,onGenerateCode:e})]}}))]}})}),e_=function(){"use strict";function e(t){(0,s._)(this,e),this.options=t}var t=e.prototype;return t.position=function(e){e.style.top=this.options.top+"px",e.style.height=this.options.height+"px",e.style.right=this.options.right+"px",e.style.paddingRight=Math.round(.2*this.options.height)+"px"},t.draw=function(){var e=ew.create({onGenerateCode:this.options.onGenerateCode,height:this.options.height});return e.className="cm-ghostwriter-hint-marker",this.options.activeEditor||(e.style.visibility="hidden"),this.position(e),e},t.eq=function(e){return this.options.top===e.options.top&&this.options.pocketOpen===e.options.pocketOpen&&this.options.activeEditor===e.options.activeEditor},e}(),eS=n(50959),ek=n(65377),eE=n(85763),eT=n(64318),eR=n(38101),eI=n(27318),eD=n(95683),eB=n(28360),eG=n(34328);function eA(e,t){e.dispatch({effects:q.Q.of(null),selection:{anchor:t.range.indexTo,head:t.range.indexTo}}),e.hasFocus||e.focus()}function eP(e,t){(0,eB.el)({view:e,insert:t,scrollIntoView:!0}),e.dispatch({effects:q.Q.of(null)}),e.hasFocus||e.focus()}function eN(e,t){e.dispatch({effects:q.h.of(t)})}function eL(e,t,n){e.dispatch({changes:{from:n.range.indexFrom,to:n.range.indexTo,insert:t},scrollIntoView:!0,effects:q.Q.of(null),annotations:[eG.Z.of(!0),eD.Iv.of("full")]}),e.hasFocus||e.focus()}function eO(e,t){return e.range.indexFrom===t.range.indexFrom&&e.range.indexTo===t.range.indexTo&&e.filePath===t.filePath&&e.fileVersion===t.fileVersion&&e.referenceType===t.referenceType}var eU=(0,ef.X)({root:[w.l0.rowWithGap(8),w.l0.border({color:w.TV.outlineDimmest}),w.l0.p(8),w.l0.borderRadius(4)],text:[w.l0.flex.growAndShrink(1)]}),eM=new el.J(function(e){var t=e.onClose,n=e.requestMeasure;return(0,ei.tZ)(eI.fL,{requestMeasure:n,type:"ghostwriterKillswitch",children:(0,ei.BX)(ed.G,{css:eU.root,children:[(0,ei.tZ)(ed.G,{css:eU.text,children:(0,ei.tZ)(eR.r,{textVariant:"text"})}),(0,ei.tZ)(eE.hU,{alt:"Close",onClick:t,type:"button",children:(0,ei.tZ)(eT.Z,{})})]})})}),eX=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r}return n.prototype.toDOM=function(e){var t=this;return eM.create({onClose:function(){return eA(e,t.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(l.l9),eF=n(66626),eW=n(95369),eH=n(15235),eV=n(40509),ez=n(57159),ej=n(41974),eq=n(26949),eJ=n(33817),eY=n(74767),eK=n(14542),e$=n(65914),eQ=n(59695),e0=n(89421),e1=new el.J(function(e){var t=e.requestMeasure,n=e.codeReference,r=e.updateCodeBlock,i=e.acceptSuggestion,o=e.onClose,a=e.autoFocus,l=e.source,c=function(){var e=C();(null==e?void 0:e.code)?(i(e.code),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",message_content:e.code,source:l})):T()},s=function(){var e,t;I.current=B,(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",message_content:B,source:l}),Z({message:B,type:ez.G_.GENERATE_CODE,codeReference:{code:n.code,range:n.range,filePath:n.filePath,fileContent:null!==(e=n.fileContent)&&void 0!==e?e:"",fileVersion:n.fileVersion,language:null!==(t=n.language)&&void 0!==t?t:"",referenceType:ez.MD.INLINE}})},u=(0,eJ.xe)(),d=(0,eF._)((0,e$.s)(),2),f=d[0],h=d[1],p=(0,eJ.ZR)().hasAccessToAdvancedModel,m=(0,eF._)((0,eS.useState)(!1),2),v=m[0],g=m[1],y=(0,eQ.Gn)("chatEngine").preferences,b=(0,eq.G)(),w=(0,eW.XW)({onCode:r,getFileContext:b}),Z=w.sendMessage,x=w.stopMessage,C=w.getCode,_=w.loading,S=w.completed,k=w.error,E=w.clearError,T=(0,eS.useCallback)(function(){x(),o()},[x,o]),R=(0,eS.useCallback)(function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:l}),T()},[T,l]),I=(0,eS.useRef)(null),D=(0,eI.U1)({loading:_,onSubmit:function(){O?c():s()},onClose:R}),B=D.value,G=D.setValue,A=D.onKeyDown,P=D.escPressed,N=function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",message_content:B,source:l}),x()},L=(0,eJ.Un)(),O=L&&S&&I.current===B;return(0,ei.BX)(ei.HY,{children:[(0,ei.BX)(eI.If,{requestMeasure:t,type:"generateCode",error:k,clearError:E,children:[(0,ei.tZ)(eI.II,{value:B,onChange:function(e){return G(e.currentTarget.value)},placeholder:"Enter a prompt to generate new code",onKeyDown:A,autoFocus:a}),(0,ei.BX)(eI.$_,{children:[(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eI.Xs,{type:"generateCode"}),S?(0,ei.tZ)(eE.hU,{disabled:!L,alt:"Rerun the same prompt",onClick:function(){return s()},size:12,colorway:"grey",children:(0,ei.tZ)(eV.Z,{})}):null,u?(0,ei.tZ)(eK.q2,{userLimits:u,selectedItem:f,hasAccessToAdvancedModel:p,onChange:function(e){if(!p&&"advanced"===e){g(!0);return}h(e)},advancedChatEngineOverride:y.chatEngine}):null]}),O?(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eH.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=C();(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",message_content:(null==e?void 0:e.code)?e.code:"",source:l}),R()}}),(0,ei.tZ)(eH.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:c,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,ei.tZ)(eI.k4,{escPressed:P,connecting:!L,loading:_,disabled:!B||!B.trim(),onClick:function(){_?N():s()}})]})]}),(0,ei.tZ)(e0.Z,{isOpen:v,onClose:function(){return g(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),e2=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference,o=e.source;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r.source=o,r}var r=n.prototype;return r.toDOM=function(e){var t=this.codeReference,n=this.source,r=e1.create({requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return eA(e,t)},acceptSuggestion:function(t){return eP(e,t)},updateCodeBlock:function(t){return eN(e,t)},autoFocus:!0,source:n});return r.style.position="sticky",r.style.top="0px",r.style.zIndex=String(eY.M.floatingHeaderActive),r},r.updateDOM=function(e,t){var n=this.codeReference;return e1.update(e,function(e){return(0,ej.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eA(t,n)},e.acceptSuggestion=function(e){return eP(t,e)},e.updateCodeBlock=function(e){return eN(t,e)},e.autoFocus=!1})}),!0},r.eq=function(e){return eO(this.codeReference,e.codeReference)},n}(l.l9),e3=n(85733),e4=new el.J(function(e){var t=e.requestMeasure,n=e.codeReference,r=e.updateCodeBlock,i=e.acceptSuggestion,a=e.onClose,l=e.autoFocus,c=e.updateDiffSelection,s=e.source,u=function(){var e=S();(null==e?void 0:e.code)?((0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"modify",message_content:e.code,source:s}),i(e.code)):D()},d=function(){var e,t;G.current=N,(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"modify",message_content:N,source:s}),C({message:N,type:ez.G_.TRANSFORM_CODE,codeReference:{code:n.code,range:n.range,filePath:n.filePath,fileContent:null!==(e=n.fileContent)&&void 0!==e?e:"",fileVersion:n.fileVersion,language:null!==(t=n.language)&&void 0!==t?t:"",referenceType:ez.MD.INLINE}})},f=(0,eJ.xe)(),h=(0,eF._)((0,e$.s)(),2),p=h[0],m=h[1],v=(0,eJ.ZR)().hasAccessToAdvancedModel,g=(0,eF._)((0,eS.useState)(!1),2),y=g[0],b=g[1],w=(0,eQ.Gn)("chatEngine").preferences,Z=(0,eq.G)(),x=(0,eW.XW)({onCode:r,getFileContext:Z}),C=x.sendMessage,_=x.stopMessage,S=x.getCode,k=x.loading,E=x.completed,T=x.error,R=x.clearError,I=(0,e3.Z)(c);(0,eS.useEffect)(function(){if(k){I.current(o.Suggestion);return}E&&I.current(T?o.Original:o.Compare)},[I,E,T,k]);var D=(0,eS.useCallback)(function(){_(),a()},[_,a]),B=(0,eS.useCallback)(function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:s}),D()},[D,s]),G=(0,eS.useRef)(null),A=function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"modify",message_content:N,source:s}),_()},P=(0,eI.U1)({loading:k,onSubmit:function(){X?u():d()},onClose:B}),N=P.value,L=P.setValue,O=P.onKeyDown,U=P.escPressed,M=(0,eJ.Un)(),X=M&&!T&&E&&G.current===N;return(0,ei.BX)(ei.HY,{children:[(0,ei.BX)(eI.If,{requestMeasure:t,type:"generateCode",error:T,clearError:R,children:[(0,ei.tZ)(eI.II,{value:N,onChange:function(e){return L(e.currentTarget.value)},placeholder:"Enter a prompt to modify selection",onKeyDown:O,autoFocus:l}),(0,ei.BX)(eI.$_,{children:[(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eI.Xs,{type:"transformCode"}),E?(0,ei.tZ)(eE.hU,{alt:"Rerun the same prompt",onClick:function(){return d()},size:12,colorway:"grey",disabled:!M,children:(0,ei.tZ)(eV.Z,{})}):null,f?(0,ei.tZ)(eK.q2,{userLimits:f,selectedItem:p,hasAccessToAdvancedModel:v,onChange:function(e){if(!v&&"advanced"===e){b(!0);return}m(e)},advancedChatEngineOverride:w.chatEngine}):null]}),X?(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eH.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=S();(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"modify",message_content:(null==e?void 0:e.code)?e.code:"",source:s}),B()}}),(0,ei.tZ)(eH.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:u,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,ei.tZ)(eI.k4,{escPressed:U,connecting:!M,loading:k,disabled:!N||!N.trim(),onClick:function(){k?A():d()}})]})]}),(0,ei.tZ)(e0.Z,{isOpen:y,onClose:function(){return b(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),e8=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference,o=e.source;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r.source=o,r}var r=n.prototype;return r.toDOM=function(e){var t=this.codeReference,n=this.source;return e4.create({requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return eA(e,t)},acceptSuggestion:function(n){return eL(e,n,t)},updateCodeBlock:function(t){eN(e,t)},updateDiffSelection:function(t){e.dispatch({effects:J.of(t)})},autoFocus:!0,source:n})},r.updateDOM=function(e,t){var n=this.codeReference;return e4.update(e,function(e){return(0,ej.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eA(t,n)},e.acceptSuggestion=function(e){return eL(t,e,n)},e.updateCodeBlock=function(e){return eN(t,e)},e.updateDiffSelection=function(e){t.dispatch({effects:J.of(e)})},e.autoFocus=!1})}),!0},r.eq=function(e){return eO(this.codeReference,e.codeReference)},n}(l.l9),e6=n(5744),e5=n(82230),e9=n(55524),e7=n(29318),te=n(77794),tt=n(78377),tn=n(69249),tr=n(30341),ti=n(25270),to=a.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:function(){}}});new ec.j(function(e){return to.of(e)});var ta=(0,ef.X)({root:[w.l0.colWithGap(8),w.l0.border({color:w.TV.outlineDimmest}),w.l0.p(8),w.l0.borderRadius(4)],header:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.spaceBetween,w.l0.minHeight(28)],headerLeft:[w.l0.flex.growAndShrink(1),w.l0.rowWithGap(8),w.l0.align.center],footer:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.end]}),tl=new el.J(function(e){var t=e.requestMeasure,n=e.codeReference,r=e.onClose,i=e.openAiChatPane,o=e.source,a=(0,eq.G)(),l=(0,eW.gS)({getFileContext:a}),c=l.sessionId,s=l.sendMessage,u=l.stopMessage,d=l.model,f=l.loading,h=l.completed,p=l.message,m=l.retry,v=(0,eJ.Ud)(),g=(0,eS.useCallback)(function(){var e,t;(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"explain",source:o,message_content:n.code}),s({codeReference:{code:n.code,range:n.range,filePath:n.filePath,fileContent:null!==(e=n.fileContent)&&void 0!==e?e:"",fileVersion:n.fileVersion,language:null!==(t=n.language)&&void 0!==t?t:"",referenceType:ez.MD.INLINE}})},[s,n,o]),y=(0,e3.Z)(g),b=(0,e3.Z)(u);(0,eS.useEffect)(function(){y.current();var e=b.current;return function(){e()}},[y,b]);var Z=(0,eJ.Un)();return(0,ei.tZ)(eI.fL,{requestMeasure:t,type:"explainCode",children:(0,ei.BX)(ed.G,{css:ta.root,dataCy:"ghostwriter-inline-explain-content",children:[p||f?(0,ei.BX)(ed.G,{css:ta.header,children:[(0,ei.BX)(ed.G,{css:ta.headerLeft,children:[(0,ei.tZ)(tn.R,{advanced:"advanced"===d}),(0,ei.tZ)(ti.Dz,{intent:ez.$h.EXPLAIN,text:{color:"dimmest",variant:"small"},icon:{color:w.TV.foregroundDimmest}})]}),h?(0,ei.tZ)(eE.hU,{alt:"Close",dataCy:"ghostwriter-inline-close",children:(0,ei.tZ)(eT.Z,{onClick:function(){r(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:o})}})}):(0,ei.tZ)(eH.zx,{iconLeft:(0,ei.tZ)(tt.Z,{}),size:"small",text:"Stop",onClick:function(){u(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"explain",source:o,message_content:n.code})}})]}):null,f&&!p?(0,ei.tZ)(e7.Z,{}):null,p?(0,ei.tZ)(e6.JG,{text:p,codeComponent:e6._l}):null,h?(0,ei.BX)(ed.G,{css:ta.footer,children:[(0,ei.tZ)(e5.xv,{variant:"small",color:"dimmer",children:"Esc to close"}),(0,ei.tZ)(eH.zx,{iconLeft:(0,ei.tZ)(te.Z,{}),variant:"outlined",size:"small",text:"Retry",disabled:!Z,onClick:function(){m(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"response_regenerated",intent_type:"explain",source:o,message_content:n.code})}}),c?(0,ei.tZ)(eH.zx,{dataCy:"ghostwriter-inline-reply-in-chat",iconLeft:Z?(0,ei.tZ)(e9.Z,{}):(0,ei.tZ)(e7.Z,{}),disabled:!Z,size:"small",text:"Reply in Chat",colorway:Z?"blurple":void 0,onClick:function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"reply_in_chat",intent_type:"explain",source:o,message_content:n.code}),v(c,{sessionType:ez.FF.CHAT}),i(c)}}):null]}):null]})})}),tc=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference,o=e.source;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r.source=o,r}var r=n.prototype;return r.toDOM=function(e){var t=this.codeReference,n=this.source;return tl.create({requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return eA(e,t)},openAiChatPane:function(t){return(0,tr.ZM)(e.state,{pane:{type:"ghostwriterChat",data:{sessionId:t}}})},source:n})},r.updateDOM=function(e,t){var n=this.codeReference;return tl.update(e,function(e){return(0,ej.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eA(t,n)}})}),!0},r.eq=function(e){return eO(this.codeReference,e.codeReference)},n}(l.l9),ts=n(9413),tu=ek.TV.blurpleDimmest,td=ek.TV.accentPrimaryDimmest,tf=l.tk.theme({".cm-pocket-highlight":{backgroundColor:ek.TV.blurpleDimmest,opacity:.2},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(ek.TV.blurpleDimmest,", ").concat(td,", ").concat(tu,", ").concat(td,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),th=l.tk.decorations.compute([j.$,Y,K.Yp],function(e){var t=e.field(j.$),n=e.facet(K.Yp);if(!t||!n||t.codeReference.filePath!==n)return l.p.none;var r=e.doc.lineAt(t.codeReference.range.indexFrom).from,i={generateCode:e2,transformCode:e8,explainCode:tc,ghostwriterKillswitch:eX}[t.type],o=l.p.widget({widget:new i({codeReference:t.codeReference,source:t.source}),block:!0,side:0}).range(r);return l.p.set(o)}),tp=(0,l.EY)({above:!1,update:function(e){return(0,$.aU)(e,j.$)},markers:function(e){var t=e.state.field(j.$),n=e.state.facet(K.Yp);if(!t||!n||t.codeReference.filePath!==n)return[];var r=t.codeReference.range.indexFrom,i=t.codeReference.range.indexTo,o=e.state.doc.lineAt(i);o.from>=r&&o.to===i&&i<e.state.doc.length&&(i+=1);var c=a.jT.range(r,i),s=t.loading&&t.codeReference.range.indexFrom<t.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return l.dc.forRange(e,s,c)}}),tm=z.compute([j.$,j.u,K.Yp,Y],function(e){var t=e.field(j.$),n=e.field(j.u),r=e.facet(K.Yp),i=e.field(Y);return t&&n&&r&&t.codeReference.filePath===r&&"transformCode"===t.type&&i===o.Compare?a.as.of({from:t.codeReference.range.indexFrom,to:t.codeReference.range.indexTo,insert:n},e.doc.length).apply(e.doc):null}),tv=c.V.compute([j.$,j.u,K.Yp],function(e){var t=e.field(j.$),n=e.field(j.u),r=e.facet(K.Yp);return t&&n&&r&&t.codeReference.filePath===r&&"generateCode"===t.type?a.as.of({from:t.codeReference.range.indexTo,to:t.codeReference.range.indexTo,insert:n},e.doc.length):null});function tg(e){var t=e.onGenerateCode,n=(0,ts.v)().isTeamWithAiDisabled,r=eC.use(t);return(0,eS.useMemo)(function(){var e=[tf,j.$,j.u,th,tp,Y,tm,er,tv,r];return n||e.push(r),e},[r,n])}},5283:function(e,t,n){n.d(t,{Q:function(){return i},h:function(){return o}});var r=n(80403),i=r.Py.define(),o=r.Py.define()},49532:function(e,t,n){n.d(t,{$:function(){return f},u:function(){return h}});var r=n(41733),i=n(30509),o=n(80403),a=n(16826),l=n(5283),c=n(92370),s=n(32472),u=n(60305);function d(e){var t=e.state.field(f);if(t){var n=t.type;return"explainCode"===n?(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:t.source}):"generateCode"===n?(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:t.source}):"transformCode"===n&&(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:t.source}),e.dispatch({effects:l.Q.of(null)}),!0}return!1}var f=o.QQ.define({create:function(){return null},update:function(e,t){if((0,s.j)(t,l.Q,function(t){e=t.value?{codeReference:t.value.codeReference,type:t.value.type,source:t.value.source,loading:t.value.loading,data:t.value.data}:null}),!e||t.changes.empty)return e;var n=e.codeReference.range.indexFrom>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexTo);return n>=o?null:e=(0,i._)((0,r._)({},e),{codeReference:(0,i._)((0,r._)({},e.codeReference),{range:{indexFrom:n,indexTo:o,lineFrom:t.newDoc.lineAt(n).number,lineTo:t.newDoc.lineAt(o).number}})})},provide:function(e){return[o.Wl.highest(a.$f.of([{key:"Escape",run:d}])),c.gb.from(e,function(e){var t;return null!==(t=(null==e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)&&void 0!==t?t:null})]}}),h=o.QQ.define({create:function(){return null},update:function(e,t){if(!t.state.field(f))return null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;c.is(l.Q)&&(e=null),c.is(l.h)&&(e=c.value)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}})},33566:function(e,t,n){n.d(t,{I:function(){return r}});function r(e){var t=[],n=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e.selection.ranges[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.empty||(t.push(e.sliceDoc(s.from,s.to)),n.push(s))}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!t.length){var u=-1,d=!0,f=!1,h=void 0;try{for(var p,m=e.selection.ranges[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value.from,g=e.doc.lineAt(v);g.number>u&&(t.push(g.text),n.push({from:g.from,to:Math.min(e.doc.length,g.to+1)})),u=g.number}}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}},19127:function(e,t,n){n.d(t,{BB:function(){return C},AU:function(){return b},qU:function(){return x}});var r=n(27387),i=n(12285),o=n(96583),a=n(80403),l=n(16826),c=n(22648),s=n(32472),u=n(81202),d=n.n(u),f=n(39171),h=n(15323),p=n(118),m=n(20870),v=n(34635);function g(e){var t,n;return null!==(n=null===(t=e.facet(c.N))||void 0===t?void 0:t.isDocumentSymbolSupported)&&void 0!==n&&n}var y=a.Py.define(),b=a.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,s.j)(t,y,function(e){n=e.value}),n}});function w(){return(w=(0,r._)(function(e,t,n){var r,i,a,l,c,s,u,d,f;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.request.documentSymbol(t,{signal:n})];case 1:if(!(r=o.sent())||r.cancelled||!(i="result"in r&&!r.cancelled?r.result:null))return[2,null];a=[],l=!0,c=!1,s=void 0;try{for(u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)(f=d.value)&&"range"in f&&a.push(f)}catch(e){c=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}return[2,a.length?a:null]}})})).apply(this,arguments)}function Z(e){if("Debounced function cancelled"!==e.message)throw e}var x=a.QQ.define({create:function(){return[]},update:function(e,t){if(!(0,m.aU)(t,b,"selection"))return e;var n=t.state.field(b);return n?function e(t,n,r){var i=r.find(function(e){var r=e.range;return(0,p.RL)(t,r.end)>=n&&(0,p.RL)(t,r.start)<=n});return null==i?[]:i.children?[i].concat(e(t,n,i.children)):[i]}(t.state.doc,t.state.selection.main.head,n):[]},compare:d()});function C(e){return[b,x,l.lg.fromClass(function(){"use strict";function t(n){(0,i._)(this,t),this.abortControllers=[];var a=this;this.getSymbolMap=(0,f.Z)((0,r._)(function(){var t,r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!(t=n.state.facet(h.Yp)))return[2];return a.abortControllers=[],[4,Promise.all(e.map(function(e){if(!(0,v.Z)(e).isDocumentSymbolSupported)return null;var n=new AbortController;return a.abortControllers.push(n),function(e,t,n){return w.apply(this,arguments)}(e,t,n.signal)}))];case 1:return r=o.sent(),n.dispatch({effects:y.of(null!==(i=r.find(Boolean))&&void 0!==i?i:null)}),[2]}})}),{wait:200}),g(n.state)&&this.getSymbolMap().catch(Z)}var n=t.prototype;return n.update=function(e){(0,m.aU)(e,"doc",c.N)&&g(e.state)&&(this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap().catch(Z))},n.destroy=function(){this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap.isScheduled()&&this.getSymbolMap.cancel()},t}())]}},42433:function(e,t,n){n.d(t,{Z:function(){return O},f:function(){return M}});var r=n(27387),i=n(41733),o=n(30509),a=n(96583),l=n(80403),c=n(16826),s=n(15323),u=n(92370),d=n(22648),f=n(74985),h=n(19653),p=n(29609),m=n(15235),v=n(85763),g=n(82230),y=n(94778),b=n(49224),w=n(59947),Z=n(64318),x=n(72093),C=n(48311),_=n(50959),S=n(61694),k=(0,b.X)({styles0:[x.l0.p(4),x.l0.pl(8)],styles1:[x.l0.maxWidth(100),x.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],styles2:[x.l0.position.absolute,x.l0.top(4),x.l0.right(4)],styles3:[x.l0.flex.rowReverse,x.l0.p(8),x.l0.pt(0)]}),E=(0,b.X)({headerContainer:[x.l0.flex.row,x.l0.align.center,x.l0.pr(4)],bodyContainer:[x.l0.justify.center,x.l0.align.center,x.l0.p(8),x.l0.pt(4)],input:[x.l0.p(4),x.l0.borderRadius(4)],wrapper:[x.l0.flex.column,x.l0.justify.center,x.l0.borderRadius(4),x.l0.shadow(2),x.l0.width(200)]});function T(e){var t=(0,h.Z)(e.onClose,[e.onClose]),n=(0,_.useRef)(null),r=(0,p.Y)(e.currentValue,function(t){return t?t===e.currentValue?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}});return(0,f.tZ)(S.ZP,{children:(0,f.tZ)(y.G,{"data-testid":"RenameInput",innerRef:t,css:E.wrapper,onKeyDown:function(t){"Escape"===t.key&&e.onClose(),t.stopPropagation()},children:(0,f.BX)("form",{onSubmit:function(t){t.preventDefault(),r.error||e.onRename(r.value)},children:[(0,f.BX)(y.G,{css:E.headerContainer,children:[(0,f.tZ)(g.h4,{level:2,variant:"subheadDefault",css:k.styles0,children:"Rename"}),(0,f.tZ)(g.h4,{level:2,variant:"subheadDefault",color:"dimmer",css:k.styles1,children:e.currentValue}),(0,f.tZ)(v.hU,{alt:"Close rename input",tooltipBehavior:"hidden",onClick:e.onClose,css:k.styles2,children:(0,f.tZ)(Z.Z,{})})]}),(0,f.tZ)(y.G,{css:E.bodyContainer,children:(0,f.tZ)(C.ZP,{css:E.input,name:"rename",ref:n,onBlur:r.handleBlur,onChange:function(e){r.setValue(e.target.value)},value:r.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:r.error?[{message:r.error.message,state:"error"}]:void 0})}),(0,f.tZ)(y.G,{css:k.styles3,children:(0,f.tZ)(m.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,f.tZ)(w.Z,{}),disabled:!!r.error||!r.value})})]})})})}var R=n(86486),I=n(12674),D=n(32472),B=n(118),G=n(48594),A=n(34635),P=l.Py.define(),N=l.Py.define();function L(e){var t,n;return null!==(n=null===(t=e.facet(d.N))||void 0===t?void 0:t.isRenameSupported)&&void 0!==n&&n}var O=function(e){if(!L(e.state))return!1;var t=e.state.selection.main.head;return e.state.wordAt(t)?(e.dispatch({effects:P.of(t)}),!0):((0,R.J)(e,{message:"You cannot rename this element",offset:t}),!1)},U=l.QQ.define({create:function(){return null},update:function(e,t){return(null!==e&&(e=t.changes.mapPos(e,-1,l.gc.TrackDel)),(0,D.j)(t,P,function(t){e=t.value}),e&&(e>t.state.doc.length||!t.state.wordAt(e)||!L(t.state)))?null:e},provide:function(e){var t=new I.J(T),n=function(t){var n=t.field(e);if(null==n)throw Error("Expected non-null offset");var r=t.wordAt(n);if(!r)throw Error("Expected non-null range");return t.sliceDoc(r.from,r.to)},r=function(r){var a=r.state.field(e);if(null==a)throw Error("Expected non-null offset");if(!r.state.wordAt(a))throw Error("Expected non-null range");var l=t.create({currentValue:n(r.state),onClose:function(){r.dispatch({effects:P.of(null)}),r.focus()},onRename:function(e){r.dispatch({effects:N.of(e)})}});return l.classList.add("replit-tooltip"),l.style.padding="0",{dom:l,update:function(e){t.update(l,function(t){var r=n(e.state);return r!==t.currentValue?(0,o._)((0,i._)({},t),{currentValue:r}):t})}}};return c.hJ.from(e,function(e){return null===e?null:{pos:e,create:r}})}});function M(e,t){return[U,c.lg.define(function(n){var i=null;return{onRename:function(t,o){return(0,r._)(function(){var r,l,c,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!L(n.state))return[2,this.cancelInflightRequest()];if(this.cancelInflightRequest(),!(r=n.state.facet(s.Yp)))throw Error("Expected non-null file path");if(!(l=n.state.field(U)))return[2];return i={clientId:t.clientId,requestId:t.generateId()},[4,t.request.rename(r,(0,B.sg)(n.state.doc,l),o,{id:i.requestId,tap:function(e){return(0,u.SC)(n,e)}})];case 1:if((c=a.sent()).cancelled)return[2];if("error"in c)throw Error("Something went wrong renaming ".concat(c.error.message));if(!(d=c.result))return[2];return(0,G.w)({edit:d,fs:e,client:t}),n.dispatch({effects:P.of(null)}),[2]}})}).apply(this)},cancelInflightRequest:function(){if(i){var e=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;if(l.clientId===i.clientId){l.notify.cancelRequest(i.requestId);break}}}catch(e){n=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}i=null}},update:function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=!0,s=!1,u=void 0;try{for(var d,f=l.effects[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;if(h.is(N)){var p=!0,m=!1,v=void 0;try{for(var g,y=t[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value;if((0,A.Z)(b).isRenameSupported){this.onRename(b,h.value);return}}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}}}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},destroy:function(){this.cancelInflightRequest()}}})]}},48126:function(e,t,n){n.d(t,{hx:function(){return p},l:function(){return f},sy:function(){return h}});var r=n(80403),i=n(16826),o=n(15323),a=n(60941),l=n(91664),c=n(27025),s=n(36559),u=n(32508),d=n.n(u);function f(e){var t=e.view,n=e.event,i=e.clipboardText,o=e.filePath,a=t.state.selection;if(!o||!(0,s.gK)(o)||a.ranges.length>1||a.main.from===a.main.to||!i||!d()(i)){!function(){if(!n){var e=i||"";if(a.main.empty){var o=a.main.from+e.length;t.dispatch({changes:[{from:a.main.from,insert:e}],selection:r.jT.range(o,o)})}else t.dispatch(t.state.replaceSelection(e))}}();return}n&&n.preventDefault();var l=t.state.sliceDoc(a.main.from,a.main.to),c="[".concat(l,"](").concat(i,")"),u=a.main.from+c.length;t.dispatch({changes:{from:a.main.from,to:a.main.to,insert:c},selection:r.jT.range(u,u)})}var h=i.tk.domEventHandlers({paste:function(e,t){var n;f({filePath:t.state.facet(o.Yp),view:t,event:e,clipboardText:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text")})}}),p=new a.j(function(e,t){return i.tk.domEventHandlers({paste:function(n,r){var i=r.state.facet(o.Yp),a=null==n?void 0:null===(p=n.clipboardData)||void 0===p?void 0:p.files,u=function(e){var t=r.state.selection.main.head;r.dispatch({changes:{from:t,insert:e},selection:{anchor:t,head:t+e.length}})};if(a){var d=!0,f=!1,h=void 0;try{for(var p,m,v=a[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var g=m.value;e?(0,l.L0)(g).then(function(e){return u('"'+e+'"')}):i&&(0,s.gK)(i)&&(0,c.r)(g,t,i).then(u)}}catch(e){f=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}}}})})},32682:function(e,t,n){n.d(t,{ZB:function(){return w},qs:function(){return x},Lo:function(){return b},xv:function(){return R},xg:function(){return I},uh:function(){return y},Do:function(){return T},$X:function(){return D},Yt:function(){return Z},Gv:function(){return B},Pz:function(){return C}});var r=n(12285),i=n(4955),o=n(41733),a=n(30509),l=n(9670),c=n(80403),s=n(16826),u=n(8117),d=n(60305),f=n(66626),h={"AWS API Key":/AKIA[0-9A-Z]{16}/g,"AWS AppSync GraphQL Key":/da2-[a-z0-9]{26}/g,"AWS MWS ID":/mzn\.mws\.[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,"AWS client ID":/(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/g,"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Facebook OAuth":/[fF][aA][cC][eE][bB][oO][oO][kK].*['|"][0-9a-f]{32}['|"]/g,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Generic API Key":/[aA][pP][iI]_?[kK][eE][yY].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Generic Secret":/[sS][eE][cC][rR][eE][tT].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Gmail API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google OAuth Access Token":/ya29\\.[0-9A-Za-z\\-_]+/g,"Google YouTube API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Heroku API Key":/[hH][eE][rR][oO][kK][uU].*[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/g,"MailChimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mapbox, Public Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"Mapbox, Secret Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9]{48}/g,"PGP private key block":/-----BEGIN PGP PRIVATE KEY BLOCK-----/g,"Picatic API Key":/sk_live_[0-9a-z]{32}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SSH (DSA) private key":/-----BEGIN DSA PRIVATE KEY-----/g,"SSH (EC) private key":/-----BEGIN EC PRIVATE KEY-----/g,"SSH (RSA) private key":/-----BEGIN RSA PRIVATE KEY-----/g,"SendGrid API Key":/SG\\.[0-9A-Za-z\\-_]{22}\\.[0-9A-Za-z-_]{43}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack Token":/(xox[pborsa]-[0-9]{12}-[0-9]{12}-[0-9]{12}-[a-z0-9]{32})/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Bot Access Token":/xoxb-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Configuration Token":/xoxe.xoxp-1-[0-9a-zA-Z]{166}/g,"Slack, OAuth v2 Refresh Token":/xoxe-1-[0-9a-zA-Z]{147}/g,"Slack, OAuth v2 User Access Token":/xoxp-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Square Access Token":/sq0atp-[0-9A-Za-z\\-_]{22}/g,"Square OAuth Secret":/sq0csp-[0-9A-Za-z\\-_]{43}/g,"Stripe API Key":/sk_live_[0-9a-zA-Z]{24}/g,"Stripe Restricted API Key":/rk_live_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g,"Twitter Access Token":/[tT][wW][iI][tT][tT][eE][rR].*[1-9][0-9]+-[0-9a-zA-Z]{40}/g,"Twitter OAuth":/[tT][wW][iI][tT][tT][eE][rR].*['|"][0-9a-zA-Z]{35,44}['|"]/g,"Vault Token":/([sb]\.[a-zA-Z0-9]{24})/g},p={"Instagram oauth":/[0-9a-fA-F]{7}.[0-9a-fA-F]{32}/g},m=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(e,i){var o;return(0,r._)(this,n),(o=t.call(this)).id=e,o.result=i,o}return n.range=function(e,t,n){return new this(e,n).range(t.from,t.to)},n.generateId=function(){return this.secretId++},n}(c.uU);m.secretId=0;var v=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(e){var i;return(0,r._)(this,n),(i=t.call(this)).key=e,i}return n.from=function(e){return new this(e)},n}(c.uU),g=c.Py.define({map:function(e,t){var n=c.Xs.of(e).map(t).iter(),r=n.from,i=n.to;return m.range(e.value.id,c.jT.cursor(r,i),e.value.result)}}),y=c.Py.define(),b=c.Py.define(),w=c.Py.define(),Z=c.Py.define(),x=c.Py.define(),C=function(e){var t=e.state.field(I);if(!t.size)return!1;for(var n=t.iter(),r=[];n.value;){var i=n.from,o=n.to,a=n.value;r.push({from:i,to:o,value:a}),n.next()}var l=e.state.doc.length,s=c.as.empty(l),u=[],f=[],h=!0,p=!1,m=void 0;try{for(var v,g=r[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)!function(){var e=v.value,t=e.from,n=e.to,r=e.value,i=r.result.secret,o=c.as.of({from:t,to:n,insert:i},l).map(s,!0);u=u.map(function(e){return e.map(o)});var a=(s=s.compose(o)).mapPos(t)+i.length;u.push(c.jT.cursor(a)),f.push(y.of(r.id)),(0,d.j)(d.U3.PASTE_SCANNER_USED,{action:"original_accepted",provider:r.result.provider})}()}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}return e.dispatch({changes:s,effects:f,selection:c.jT.create(u)}),!0},_=function(e){return!!e.state.facet(D)&&!!e.state.field(I).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return b.of(e)})}),!0)},S=function(e){return!e.state.facet(D)&&k(e)},k=function(e){return!!e.state.field(I).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return y.of(e)})}),!0)};function E(e,t){var n,r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/plain");if(!r)return!1;var i=function(e){if(e.length>2e3)return!1;var t=!0,n=!1,r=void 0;try{for(var i,o=[h,p][Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=Object.entries(a)[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var m=(0,f._)(u.value,2),v=m[0],g=m[1],y=e.search(g);if(!(y<0)){var b=e.match(g);if(b){var w=y+b[0].length;return{start:y,end:w,secret:e.slice(y,w),provider:v}}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1}(r);if(!i)return!1;e.preventDefault(),e.stopPropagation();var l=r.slice(0,i.start)+r.slice(i.end),s=m.generateId();return t.dispatch((0,a._)((0,o._)({},t.state.changeByRange(function(e){var t=e.from,n=e.to,r=c.jT.cursor(t+i.start);return{range:r,changes:{from:t,to:n,insert:l},effects:g.of(m.range(s,r,i))}})),{scrollIntoView:!0})),(0,d.j)(d.U3.PASTE_SCANNER_USED,{action:"secret_detected",provider:i.provider}),!0}var T=c.QQ.define({create:function(){return c.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(Z)){var s=l.value,u=s.from,d=s.to,f=s.secret;e=e.update({add:[v.from(f).range(u,d)],filter:function(){return!1}})}l.is(x)&&(e=c.Xs.empty)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}}),R=c.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.field(I,!1),r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;n&&s.is(b)&&(s.value instanceof c.xm?n.between(s.value.from,s.value.to,function(t,n,r){e=r}):e=s.value),s.is(w)&&(e=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return e}}),I=c.QQ.define({create:function(){return c.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)!function(){var t=o.value;t.is(g)&&(e=e.update({add:[t.value],sort:!0})),t.is(y)&&(e=t.value instanceof c.xm?e.update({filter:function(){return!1},filterFrom:t.value.from,filterTo:t.value.to}):e.update({filter:function(e,n,r){return r.id!==t.value}}))}()}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(){return[s.tk.domEventHandlers({paste:E}),c.Wl.highest(s.$f.of([{key:"Mod-z",run:k},{key:"Enter",run:C},{key:"Tab",run:_,stopPropagation:!0},{key:"Escape",run:S}]))]}}),D=c.r$.define({combine:function(e){return e.some(Boolean)}}),B=u.RR.of(function(e){var t=e.state.field(I,!1);if(!t||!t.size)return!1;var n=!1;return t.between(e.newSelection.main.from,e.newSelection.main.to,function(){return n=!0,!1}),n})},38e3:function(e,t,n){n.d(t,{F:function(){return C},V:function(){return _}});var r=n(66626),i=n(74985),o=n(16826),a=n(43312),l=n(51148),c=n(87502),s=n(60941),u=n(32622),d=n(85763),f=n(16923),h=n(82230),p=n(94778),m=n(43449),v=n(72093),g=n(50959),y=n(118),b=(0,a.iv)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),w=(0,a.iv)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),Z={root:v.l0.backgroundColor.backgroundRoot,higher:v.l0.backgroundColor.backgroundHigher,highest:v.l0.backgroundColor.backgroundHighest,default:v.l0.backgroundColor.backgroundDefault},x=new s.j(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,o.Eu)({formatNumber:function(t,n){for(var r=String(n.doc.lines).length,i=String(t+e-1);r>i.length;)i="\xa0"+i;return i}})});function C(e){var t=e.path,n=e.initialDoc,r=e.maxHeight,o=e.minHeight,s=e.extensions,u=e.allowScroll,d=e.fontSize,f=e.hideGutter,h=e.startLineNumber,p=e.style,m=e.elevation,v=e.onNavigateToCode,C=(0,c.Z)(),_=C.ref,S=C.view,k=(0,g.useMemo)(function(){var e;return e=Z[null!=m?m:"default"],(0,a.iv)({".cm-editor":e,".cm-gutters":e})},[m]),E=x.use(h);return(0,i.tZ)("div",{style:p,children:(0,i.tZ)(l.ZP,{ref:_,initialDoc:n,css:[b,k,void 0===u||u?null:w],extensions:[E,void 0===s?[]:s],style:{minHeight:o,maxHeight:null!=r?r:"10em"},hideGutter:f,filePath:t,fontSize:d,readOnly:!0,onClick:function(e){if(v&&S){var t=e.clientX,n=e.clientY,r=S.posAtCoords({x:t,y:n});v(null!==r?(0,y.sg)(S.state.doc,r):null)}}})})}function _(e){var t=e.path,n=e.doc,o=e.extensions,a=e.numMatches,l=e.onNavigateToCode,c=e.initiallyExpanded,s=(0,r._)((0,g.useState)(c),2),y=s[0],b=s[1];return(0,i.BX)(p.G,{children:[(0,i.BX)(p.G,{css:[v.l0.width("100%"),v.l0.p(4),v.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,i.tZ)(f.Z,{path:t}),(0,i.tZ)(h.xv,{multiline:!1,title:t,css:[v.l0.flex.shrink(1),{textOverflow:"ellipsis"}],children:t}),(0,i.tZ)(h.xv,{color:"dimmest",multiline:!1,children:(0,u.Z)("match",a,!0)}),(0,i.tZ)(p.G,{css:v.l0.flex.grow(1)}),(0,i.tZ)(d.hU,{alt:y?"Collapse snippet":"Expand snippet",tooltipBehavior:"hidden",onClick:function(){return b(function(e){return!e})},children:(0,i.tZ)(m.Z,{rotate:y?180:0,style:{transition:"200ms ease"}})})]}),(0,i.tZ)(p.G,{css:[v.l0.p(4),{display:y?"block":"none"}],children:(0,i.tZ)(C,{path:t,initialDoc:n,extensions:void 0===o?[]:o,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:l})})]})}},2498:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(12285),i=n(4955),o=n(9670),a=n(80403),l=n(16826),c=n(32622),s=n(72093),u=new(function(e){"use strict";(0,i._)(n,e);var t=(0,o._)(n);function n(){var e;return(0,r._)(this,n),(e=t.call(this)).elementClass="cm-gutterElement-hidden",e}return n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e},n}(l.SJ)),d=function(e){"use strict";(0,i._)(n,e);var t=(0,o._)(n);function n(e){var i;return(0,r._)(this,n),(i=t.call(this)).numLines=e,i}var a=n.prototype;return a.eq=function(e){return e.numLines===this.numLines},a.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,c.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(l.l9),f=l.p.mark({class:"cm-searchResultMatch"}),h=l.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:s.TV.foregroundDefault,backgroundColor:s.TV.accentPrimaryDimmest,outline:s.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:s.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}});function p(e,t){var n=e.sort(function(e,t){return e.from-t.from}),r=n.map(function(e){var t=e.from,n=e.to;return f.range(t,n)});return[l.lg.define(function(){return{}},{decorations:function(){return l.p.set(r)}}),function(e,t){var n=[],r=1;e.forEach(function(i,o){var a=t.lineAt(i.from),l=t.lineAt(i.to);r<a.number-2&&n.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<t.lines&&n.push({startLine:r,endLine:t.lines})});var i=n.map(function(e){var n=t.line(e.startLine),r=t.line(e.endLine);return l.p.replace({widget:new d(e.endLine-e.startLine+1)}).range(n.from,r.to)}),o=n.map(function(e){var n=t.line(e.startLine);return l.p.line({class:"cm-line-hidden"}).range(n.from)}),c=a.QQ.define({create:function(){return l.p.set(i)},update:function(e){return e},provide:function(e){return l.tk.decorations.from(e)}}),s=a.QQ.define({create:function(){return l.p.set(o)},update:function(e){return e},provide:function(e){return l.tk.decorations.from(e)}}),f=n.map(function(e){var n=t.line(e.startLine);return u.range(n.from)});return[c,s,h,l.p2.of(a.Xs.of(f))]}(n,t)]}},90413:function(e,t,n){n.d(t,{d:function(){return d},z:function(){return u}});var r=n(12285),i=n(66626),o=n(50959),a=n(75958),l=n(86763),c=n.n(l),s=n(46870),u=function(){"use strict";function e(t){var n=this;if((0,r._)(this,e),this.saveToLocalStorage=c()(function(){a.Z.set("stateCache",{version:2,entries:Array.from(n.map.entries())})},500,{leading:!1,trailing:!0,maxWait:1e3}),this.map=new s.L(20),t){if("object"!=typeof t||null===t||!Object.prototype.hasOwnProperty.call(t,"version")||!Object.prototype.hasOwnProperty.call(t,"entries")||"number"!=typeof t.version||2!==t.version)return;var o=t.entries,l=!0,u=!1,d=void 0;try{for(var f,h=o[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var p=(0,i._)(f.value,2),m=p[0],v=p[1];this.map.set(m,v)}}catch(e){u=!0,d=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw d}}}}var t=e.prototype;return t.set=function(e,t){this.map.set(e,t),this.saveToLocalStorage()},t.get=function(e){return this.map.get(e)},e}(),d=(0,o.createContext)(null)},8043:function(e,t,n){n.d(t,{AL:function(){return Z},GD:function(){return m},VO:function(){return p},Y:function(){return b},tT:function(){return g}});var r=n(41733),i=n(21262),o=n(71440),a=n(62496),l=n(58995),c=n(99165);function s(){var e=(0,i._)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},p=(0,o.Ps)(s(),a.j7);function m(e){var t=(0,r._)({},h,e);return l.a(p,t)}var v=(0,o.Ps)(u(),a.j7);function g(e){var t=(0,r._)({},h,e);return c.D(v,t)}var y=(0,o.Ps)(d(),a.j7);function b(e){var t=(0,r._)({},h,e);return c.D(y,t)}var w=(0,o.Ps)(f(),a.j7);function Z(e){var t=(0,r._)({},h,e);return c.D(w,t)}},50054:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(41733),i=n(30509),o=n(66626),a=n(63257),l=n(62496),c=n(30470),s=n(8043),u=n(89016),d=n(69170),f=n(39271),h=n(36647),p=n(81199),m=n(24090),v=n(30826),g=n.n(v),y=n(50959),b=n(92834);function w(e,t){if(!e)return null;var n,r=e.state.field(b.OQ),i=e.state.field(b.ZS);return(null!==(n=r[t])&&void 0!==n?n:(null==i?void 0:i.id)===t?i:null)||null}function Z(e,t){if(!e)return null;var n=w(e,t);if(!n)return null;var r=Math.min(n.indexStart,n.indexEnd),i=Math.max(n.indexStart,n.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function x(e,t,n){var v=(0,d.Z)().showError,x=(0,f.Z)(),C=(0,c.Z)().map(function(e){return e.username}),_=(0,p.Z)().fs,S=(0,s.GD)({variables:{id:e}}),k=S.data,E=S.error,T=S.loading,R=S.client,I=function(){if(T||!k){var n;return!!t&&(null===(n=t.state.field(b.ZS))||void 0===n?void 0:n.id)===e}return"AnnotationAnchor"!==k.thread.__typename}(),D=(0,y.useMemo)(function(){return T||!k?null:"UserError"===k.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===k.thread.__typename?k.thread:null},[k,e,T]),B=(0,o._)((0,s.tT)({onError:function(e){return v(e.message)},update:function(e,t){var n,r;if(t.errors){t.errors.forEach(function(e){return v(e.message)});return}if((null===(r=t.data)||void 0===r?void 0:null===(n=r.createThread)||void 0===n?void 0:n.__typename)==="UserError"){v(t.data.createThread.message);return}}}),1)[0],G=(0,o._)((0,s.AL)({onError:function(e){return v(e.message)},update:function(e,t){if(t.errors){t.errors.forEach(function(e){return v(e.message)});return}var n,r=null===(n=t.data)||void 0===n?void 0:n.createThreadMessage;r&&"UserError"===r.__typename&&v(r.message)}}),1)[0],A=(0,o._)((0,s.Y)({onError:function(e){return v(e.message)},update:function(e,t){if(t.errors){t.errors.forEach(function(e){return v(e.message)});return}var n,r=null===(n=t.data)||void 0===n?void 0:n.updateThread;r&&"UserError"===r.__typename&&v(r.message)}}),1)[0],P=(0,o._)((0,l.Hj)(),1)[0],N=(0,h.Z)(function(){return g()(P,1e3,{trailing:!1})},[P]),L=function(){var e=null==k?void 0:k.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,fullName:e.fullName,image:e.image}}:{}};return{thread:D,isPlaceholder:I,error:E,loading:T,getHighlight:Z,getLatestAnchor:function(){return w(t,e)},updateThread:function(e){var t,n=e.changes,o=(null==k?void 0:null===(t=k.thread)||void 0===t?void 0:t.__typename)==="AnnotationAnchor"?k.thread:null;if(!o)throw Error("expected thread");A({variables:{id:o.id,changes:n},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i._)((0,r._)({},o,n),{isResolved:"boolean"==typeof n.isResolved?n.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l=o.message,c=o.messageId,d=(0,m.kW)(l,{users:(0,a._)(C).concat(["everyone"])}),f={id:c,text:l,mentions:d.mentions};if(I&&t&&n){var h=t.state.field(b.ZS),p={id:e,replId:x,indexStart:null==h?void 0:h.indexStart,indexEnd:null==h?void 0:h.indexEnd,otVersion:_.getOTVersion(n),path:n};B({variables:{thread:p,message:f,highlight:Z(t,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i._)((0,r._)({__typename:"AnnotationAnchor"},p,L()),{messages:[(0,i._)((0,r._)({id:c,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},L()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:p.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),R.writeQuery({query:s.VO,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i._)((0,r._)((0,i._)((0,r._)({},p),{isResolved:!1,isGeneral:!1}),L()),{messages:[(0,i._)((0,r._)({id:c,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},L()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:p.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null==k?void 0:k.currentUser}});var v=R.readQuery({query:u.Jq,variables:{replId:x,path:n}});if(v){var g,y,w=(null===(y=v.threadsByFile)||void 0===y?void 0:y.__typename)==="ThreadsByFileResult"?v.threadsByFile.threads:[],S=L().user;R.writeQuery({query:u.Jq,variables:{replId:x,path:n},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a._)(w).concat([(0,r._)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:S,isResolved:!1,participants:[S]},p)])}}})}return}var E=(null==k?void 0:null===(g=k.thread)||void 0===g?void 0:g.__typename)==="AnnotationAnchor"?k.thread:null;if(!E)throw Error("expected thread");G({variables:{replId:x,threadId:E.id,threadMessage:f,highlight:Z(t,E.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i._)((0,r._)({},E),{messages:(0,a._)(E.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,i._)((0,r._)({},L(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:E.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},changeThreadMessage:function(t){N({variables:{threadId:e,messageId:t.messageId,message:null}})}}}},89016:function(e,t,n){n.d(t,{Jq:function(){return s},eR:function(){return u}});var r=n(41733),i=n(21262),o=n(71440),a=n(58995);function l(){var e=(0,i._)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r._)({},c,e);return a.a(s,t)}},4495:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(80403),i=n(32472);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.Py.define(),o=r.QQ.define({create:function(){return t},update:function(t,r){return(0,i.j)(r,n,function(n){t=e(n.value,t)}),t}});return{effect:n,state:o}}},71462:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(74985),i=n(98001),o=n(50959);function a(e){var t=e.json,n=(0,o.useMemo)(function(){return JSON.stringify(t,null,2)},[t]);return(0,r.tZ)(i.Z,{language:"json",code:n})}},42701:function(e,t,n){n.d(t,{Lf:function(){return a},MH:function(){return o},Ss:function(){return i},cE:function(){return r}});var r="Tools",i="Switch to tab",o="Jump to tab",a="searchGroup"},82031:function(e,t,n){n.d(t,{X:function(){return tg}});var r,i=n(42516),o=n(41733),a=n(74985),l=n(37058),c=n(85733),s=n(55927),u=n(36647),d=n(19068),f=n(99266),h=n(99236),p=n(94778),m=n(49224),v=n(29318),g=n(72093),y=n(50959),b=n(27387),w=n(30509),Z=n(66626),x=n(96583),C=n(56731),_=n(41974),S=n(42650),k=n(88205),E=n(63257);function T(e,t){for(var n=e.indexPath,r=t.indexPath,i=Math.min(n.length,r.length),o=0;o<i;o++){if(n[o]>r[o])return 1;if(n[o]<r[o])return -1}return n.length-r.length}function R(e){return e.map(function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label}).join(":")}var I=n(42701),D=["","root",I.Lf,I.cE,I.Ss,I.MH];function B(e){var t=e.split(":").pop(),n=void 0!==t?D.indexOf(t):-1;return -1===n?Number.MAX_SAFE_INTEGER:n}function G(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e.slice(t)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;"group"!==c.data.type&&n.push(c.data.label)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return(0,E._)(new Set(n))}var A=n(30660),P=n(39460),N=n(37697),L=(0,y.createContext)(void 0);function O(){var e=(0,y.useContext)(L);if(!e)throw Error("Expected store in context");return e}function U(e){var t=O();return(0,P.Dv)(e,{store:t})}function M(e){return(0,N.lV)((0,y.useCallback)(function(t){return t(e)},[e]),{store:O()})}var X=function(e){var t=O();return(0,P.b9)(e,{store:t})};function F(e){return(0,A.b)(e,O())}var W=n(59786),H=function(e){return"item-"+e},V=(0,S.cn)(0),z=(0,S.cn)(0),j=(0,S.cn)(0),q=(0,S.cn)(function(e){return e(V)+e(z)+e(j)}),J=(0,S.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),Y=(0,S.cn)(!0),K=(0,S.cn)(!1),$=(0,S.cn)(null),Q=(0,S.cn)({}),ee=(0,k.kv)(Q,function(e){return!!e.openOnInput}),et=(0,k.kv)(Q,function(e){return!!e.autoFocus}),en=(0,k.kv)(Q,function(e){return e.keyboardShortcut}),er=(0,k.kv)(Q,function(e){return e.command}),ei=(0,k.kv)(Q,function(e){return e.overscan}),eo=(0,k.kv)(Q,function(e){return e.footer}),ea=(0,k.kv)(Q,function(e){return e.focusRef}),el=(0,k.kv)(Q,function(e){var t;return null!==(t=e.fontSize)&&void 0!==t?t:14}),ec=(0,k.kv)(Q,function(e){return!!e.compact}),es=(0,k.kv)(Q,function(e){var t;return null!==(t=e.minItemHeight)&&void 0!==t?t:32}),eu=(0,S.cn)(function(e){return!e(ee)}),ed=(0,k.kv)(Q,function(e){return!!e.iconBreadcrumbs}),ef=(0,S.cn)(null),eh=(0,S.cn)(function(e){return e(eb)>-1}),ep=(0,S.cn)(function(e){var t=e(J);return!t.isLoading&&0===t.rows.length}),em=(0,S.cn)({label:"",input:"",menu:""}),ev=(0,S.cn)(""),eg=(0,S.cn)(""),ey=(0,S.cn)(""),eb=(0,S.cn)(-1),ew=(0,S.cn)(function(e){var t=e(eb);return e(eZ).findIndex(function(e){return"item"===e.type&&e.index===t})}),eZ=(0,S.cn)(function(e){return e(J).rows}),ex=(0,S.cn)(function(e){return e(J).items}),eC=(0,S.cn)(function(e){return e(ex).length}),e_=(0,S.cn)(function(e){return e(eG).filter(function(e){return"context"===e.data.type&&!!e.match})}),eS=(0,S.cn)(function(e){return e(e_).length>0}),ek=(0,S.cn)(!1),eE=(0,S.cn)(null,function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t(ek,!0),t(J,function(e){return(0,_.Uy)(e,function(e){e.path=[e.path[0]]})}),e(eV).setPath(e(eG)),t(eb,-1),t(ev,""),t(eg,""),t(ey,""),e(ee)&&t(Y,!1),r.focus&&(null===(n=e(eX))||void 0===n||n.focus())}),eT=(0,S.cn)(function(e){return e(J).placeholder}),eR=(0,S.cn)(function(e){return e(J).isLoading}),eI=(0,S.cn)(function(e){return e(J).path.length}),eD=(0,S.cn)(function(e){return e(eS)||!!e(ev)}),eB=(0,S.cn)(null,(r=(0,b._)(function(e,t,n,r){var i,o,a,l,c,s;function u(n){var r;t(eO,null!=n?n:"Something went wrong"),null===(r=e(eX))||void 0===r||r.focus()}return(0,x.Jh)(this,function(d){switch(d.label){case 0:if("group"===n.data.type)return[2];if(t(ef,n),o=e(Q),"context"===n.data.type)return t(eM,l=n.path),t(eb,-1),e(eV).setPath(l),null===(a=e(eX))||void 0===a||a.focus(),[2];switch(n.data.type){case"output":case"error":return t(eE),null===(c=o.onSelect)||void 0===c||c.call(o,n),[2]}t(K,!0),s=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.resolve(n.data.run(r.nativeEvent))];case 2:return s=d.sent(),[3,4];case 3:return d.sent(),t(K,!1),u(),[2];case 4:if(t(K,!1),(null==s?void 0:s.type)==="error")return u(s.message),[2];return t(eE),null===(i=o.onAction)||void 0===i||i.call(o),[2]}})}),function(e,t,n,i){return r.apply(this,arguments)})),eG=(0,S.cn)(function(e){return e(J).path}),eA=(0,S.cn)(function(e){return 1===e(eG).length}),eP=(0,S.cn)(null,function(e,t,n){var r=e(eG),i=r.indexOf(n);-1!==i&&(r=r.slice(0,i+1),t(eb,0),e(eV).setPath(r),t(ev,""))});function eN(e,t){return t.match.score-e.match.score}var eL=(0,S.cn)(null,function(e,t,n){var r,i=e(ey);if(i===e(ey)){var o=n.items.sort(eN),a=n.path.length?n.path[n.path.length-1]:null,l=i?e(J).rows.filter(function(e){return"section"===e.type}).map(function(e){return e.key}):void 0,c=function(e,t,n){var r=new Map;e.forEach(function(e){var t=e.path.slice(0,-1),n="section:"+R(t),i=r.get(n);if(i)i.items.push(e);else{var o=t[t.length-1],a=(null==o?void 0:o.data.type)==="group";r.set(n,{type:"section",path:t,score:e.match.score,items:[e],unlabeled:a,key:n})}});var i=(0,E._)(r.entries()).sort(function(e,r){var i=(0,Z._)(e,2),o=i[0],a=i[1],l=(0,Z._)(r,2),c=l[0],s=l[1];if(t){var u=B(R(a.path)),d=B(R(s.path));if(u<d)return -1;if(u>d)return 1}if(!n||!n.includes(o)&&!n.includes(c))return s.score-a.score;var f=n.indexOf(o),h=n.indexOf(c);return f>-1&&h>-1?f-h:-1===f?1:-1}),o={items:[],rows:[]},a=0;return i.forEach(function(e){var t=(0,Z._)(e,2),n=t[0],r=t[1];o.rows.push({type:r.type,key:n,path:r.path,unlabeled:r.unlabeled}),r.items.forEach(function(e){o.items.push(e),o.rows.push({type:"item",item:e,index:a++})})}),o}(o,n.hasFlagPrioritizedCommandTypes||!1,l),s=c.items,u=c.rows,d=null!==(r=null==a?void 0:a.data)&&void 0!==r?r:null,f=null==d?void 0:d.description;e(ed)&&(null==d?void 0:d.type)!=="group"&&(f=null==d?void 0:d.label),t(J,function(e){return{items:s,rows:u,isLoading:!!n.partial,path:n.path,placeholder:f||e.placeholder}}),u.length&&-1===e(eb)&&t(eb,0)}}),eO=(0,S.cn)(null,function(e,t,n){t($,n),t(J,function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}})}),eU=(0,S.cn)(null,function(e,t,n){t(ev,n),t(eb,n?0:-1),t($,null),t(J,function(e){return(0,_.Uy)(e,function(e){e.isLoading=!!n})}),e(ee)&&t(Y,!!n)}),eM=(0,S.cn)(null,function(e,t,n){t(J,function(e){return(0,_.Uy)(e,function(e){e.items=[],e.rows=[],e.path=n})}),t(eU,""),t(eg,""),t(ey,"")}),eX=(0,S.cn)(null),eF=(0,S.cn)(null,function(e,t,n){var r=e(eb);if(!(r<0)){var i=e(ex)[r];i&&t(eB,i,n)}}),eW=(0,S.cn)(null,function(e,t,n){var r=e(Y),i=e(eC),o=e(eb);switch(n.key){case"ArrowDown":n.preventDefault();var a=o+1;t(eb,a<i?a:0),t(Y,!0);return;case"ArrowUp":n.preventDefault(),t(eb,Math.max(-1,o-1));return;case"Home":n.preventDefault(),n.shiftKey?n.currentTarget.selectionStart=0:n.currentTarget.setSelectionRange(0,0);return;case"End":n.preventDefault();var l=n.currentTarget.value.length;n.shiftKey?n.currentTarget.selectionEnd=l:n.currentTarget.setSelectionRange(l,l);return;case"Escape":if(!e(ev)||(n.preventDefault(),t(eU,""),t(eg,""),e(eu)))return;t(Y,!1);return;case"Enter":if(!r)return;n.preventDefault(),t(eF,n);return;case"PageUp":case"PageDown":if(!r)return;n.preventDefault();var c="PageUp"===n.key?-10:10;t(eb,function(e){return Math.max(Math.min(e+c,i-1),0)});return}}),eH=(0,S.cn)(null,function(e,t,n){var r=Array.isArray(n)?n:[n];e(ek)&&(r=[r[0]]);var i=e(eg);t(ey,i),e(eV).setPath(r,i)}),eV=(0,S.cn)({}),ez=(0,S.cn)(null,function(e,t){var n=e(eG),r=e(e_);if(r.pop()){var i=r.pop();if(!i){t(eE);return}var o=n.indexOf(i);n=n.slice(0,o+1),t(eb,0),t(eM,n),e(eV).setPath(n)}}),ej=n(64479),eq=n(70501),eJ=n(39944),eY=(0,m.X)({root:[g.l0.reset.button,g.l0.viewStyle,g.l0.flex.row,g.l0.align.center,g.l0.borderRadius(0),g.l0.cursor.pointer,g.l0.color.foregroundDimmer,{gap:(0,eJ.fP)(4),paddingLeft:(0,eJ.fP)(4),paddingRight:(0,eJ.fP)(4),"&:hover":{color:g.TV.foregroundDefault}}],icon:[g.l0.position.relative,(0,eJ.D$)(16),{width:(0,eJ.fP)(16),height:(0,eJ.fP)(16)}],iconRight:[(0,eJ.D$)(12),{width:(0,eJ.fP)(12),height:(0,eJ.fP)(12)}],text:[g.l0.truncate,g.l0.flex.shrink(1),{fontSize:"1em"}]}),eK=(0,y.memo)(function(){var e={iconOnly:U(ed),breadcrumbs:U(e_),onClick:X(eP)},t=e.breadcrumbs,n=e.iconOnly,r=e.onClick;return t.length?(0,a.tZ)(a.HY,{children:t.map(function(e,t){if(!e.data||!("label"in e.data))return null;var i=e.data,o=i.label,l=i.icon;return(0,a.BX)("button",{css:eY.root,onClick:function(){return r(e)},children:[(0,a.tZ)(p.G,{css:eY.icon,children:l}),n?null:(0,a.tZ)(p.G,{css:eY.text,children:o}),(0,a.tZ)(p.G,{css:eY.iconRight,children:(0,a.tZ)(eq.Z,{})})]},o+t)})}):null}),e$=n(43312),eQ=n(64318),e0=(0,e$.iv)([g.l0.reset.button,g.l0.viewStyle,g.l0.center,g.l0.height("100%"),g.l0.cursor.pointer,g.l0.color.foregroundDimmest,{paddingLeft:(0,eJ.fP)(4),paddingRight:(0,eJ.fP)(4),"&:hover":{color:g.TV.foregroundDefault}},(0,eJ.D$)(16)]);function e1(e){return(0,a.tZ)("button",{css:e0,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,a.tZ)(v.Z,{}):(0,a.tZ)(eQ.Z,{})})}var e2=n(47357),e3=n(93801),e4=function(e){return Math.round(e.value/14*e.fontSize)},e8=[g.l0.position.absolute,g.l0.top(0),g.l0.left(0),g.l0.width("100%")],e6=(0,m.X)({item:[e8,{userSelect:"none",cursor:"pointer","&:hover > div":{backgroundColor:"var(".concat(d.dj.interactiveBackground,")")}}],divider:[e8,g.l0.justify.center,{padding:"0 ".concat((0,eJ.fP)(8))}]}),e5=(0,y.memo)(function(e){var t,n,r,i,l,c,s,u,d=(t=e.index,n=X(eB),r=(0,y.useRef)(null),l="item"===(i=U((0,y.useMemo)(function(){return(0,k.kv)(eZ,function(e){return e[t]})},[t]))).type?i.index:null,c=U((0,y.useMemo)(function(){return(0,S.cn)(function(e){return null!==l&&e(eb)===l})},[l])),s=(null==i?void 0:i.type)==="item"?function(e){return n(i.item,e)}:void 0,u="item"===i.type?{id:H(t),role:"option","aria-selected":c}:void 0,{row:i,active:c,ref:r,onClick:s,ariaAttrs:u}),f=d.row,h=d.active,m=d.onClick,v=d.ariaAttrs,g=d.ref;if(!f)return null;var b={height:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===f.type)return(0,a.tZ)(tr,{path:f.path,style:b,border:e.index>0});var Z=f.item,x=Z.data,C=Z.match;if("group"===x.type)return null;var _=C.render;if(_&&"content"in _&&_.content)return(0,a.tZ)(p.G,(0,w._)((0,o._)({innerRef:g,css:e6.item,style:b,onClick:m},v),{children:(0,a.tZ)(ej.Tg,{elevated:h,children:(0,y.cloneElement)(_.content,{active:h})})}));var E=x.label,T=x.icon,R=x.dataCy,I=_&&"ranges"in _?_.ranges:void 0;return(0,a.tZ)(p.G,(0,w._)((0,o._)({innerRef:g,css:e6.item,style:b,onClick:m,dataCy:R},v),{children:(0,a.tZ)(te,{active:h,icon:T,text:E,highlight:I,description:x.description,shortcut:x.keyboardShortcut,hasChildren:"context"===Z.data.type})}))}),e9=[{padding:(0,eJ.fP)(8)}],e7=(0,m.X)({root:[e9,g.l0.align.center,g.l0.flex.row,g.l0.height("100%"),{gap:(0,eJ.fP)(8),userSelect:"none"}],iconText:[g.l0.align.center,g.l0.flex.row,g.l0.maxWidth("100%"),{gap:(0,eJ.fP)(8)}],description:[g.l0.truncate,g.l0.flex.growAndShrink(1),{fontSize:"0.9em"}],right:[g.l0.flex.row,g.l0.align.center,{gap:(0,eJ.fP)(4),justifySelf:"end",marginLeft:"auto"}],chevron:(0,eJ.D$)(12)});function te(e){var t=U(el);return(0,a.BX)(ej.Tg,{elevated:e.active,css:e7.root,children:[(0,a.BX)(p.G,{css:e7.iconText,children:[(0,a.tZ)(p.G,{className:"icon",css:tt.root,children:e.icon}),(0,a.tZ)(e3.x,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,a.tZ)(p.G,{css:e7.description,style:{color:e.active?g.TV.foregroundDimmer:g.TV.foregroundDimmest},children:e.description}):null,(0,a.BX)(p.G,{css:e7.right,children:[e.shortcut?(0,a.tZ)(l.bM,{keyCombo:e.shortcut,fontSize:Math.round(.85*t)}):null,e.hasChildren?(0,a.tZ)(p.G,{css:e7.chevron,children:(0,a.tZ)(eq.Z,{size:12,style:{pointerEvents:"none"}})}):null]})]})}var tt=(0,m.X)({root:[g.l0.position.relative,(0,eJ.D$)(16),{width:(0,eJ.fP)(16),height:(0,eJ.fP)(16)}]}),tn=(0,m.X)({borderHeaderWrap:[{userSelect:"none",padding:[8,8,4,8].map(eJ.fP).join(" ")},e8,g.l0.colWithGap(0),g.l0.justify.spaceBetween],borderWrap:[{userSelect:"none",paddingLeft:(0,eJ.fP)(8),paddingRight:(0,eJ.fP)(8)},e8,g.l0.justify.center],headerWrap:[{userSelect:"none",paddingLeft:(0,eJ.fP)(8),paddingRight:(0,eJ.fP)(8),paddingBottom:(0,eJ.fP)(4)},e8,g.l0.justify.end],header:[{userSelect:"none"},g.l0.align.center,g.l0.flex.row,{gap:(0,eJ.fP)(4)},(0,eJ.D$)(12)],text:[{userSelect:"none"},g.l0.flex.shrink(1),g.l0.color.foregroundDimmest,g.l0.truncate,{fontSize:"0.9em"}],border:[g.l0.height(1),g.l0.width("100%")]}),tr=(0,y.memo)(function(e){var t=U(eI),n=G(e.path,t),r=(0,a.tZ)(ej.Tg,{elevated:!0,css:tn.border}),i=0===n.length;if(e.border&&i)return(0,a.tZ)(p.G,{css:tn.borderWrap,style:e.style,children:r});var o=(0,a.tZ)(p.G,{css:tn.header,children:n.map(function(e,t){return(0,a.BX)(y.Fragment,{children:[t>0?(0,a.tZ)(eq.Z,{color:g.TV.foregroundDimmest}):null,(0,a.tZ)(p.G,{css:tn.text,children:e})]},e+t)})});return e.border||i?(0,a.BX)(p.G,{css:tn.borderHeaderWrap,style:e.style,children:[r,o]}):(0,a.tZ)(p.G,{css:tn.headerWrap,style:e.style,children:o})}),ti=(0,m.X)({root:[g.l0.flex.growAndShrink(1),g.l0.overflow("hidden"),{paddingTop:eJ.Cn.menuPaddingTop}],scrollParent:[g.l0.height("100%"),g.l0.overflowY("auto"),g.l0.flex.growAndShrink(1)]}),to=(0,y.memo)(function(e){var t,n,r,i,l=(t=U(eZ),n=U(Y),{rows:t,isOpen:n,scrollRef:(0,y.useRef)(null),currentPathIndex:U(eI),ariaAttrs:{id:(r=U(em)).menu,"aria-labelledby":r.label,role:"listbox"}}),c=l.rows,s=l.isOpen,u=l.scrollRef,d=l.currentPathIndex,f=l.ariaAttrs,h=X(z),m=U(el),v=U(ec),b=(0,e2.MG)({count:c.length,overscan:null!==(i=e.overscan)&&void 0!==i?i:1,getScrollElement:function(){return u.current},getItemKey:function(e){var t=c[e];return t?"section"===t.type?t.key:R(t.item.path):""},estimateSize:function(t){var n=c[t];return n?function(e){var t,n=e.row,r=e.currentPathIndex,i=e.compact,o=e.isFirst,a=e.fontSize,l=e.minItemHeight;if("section"===n.type){var c=G(n.path,r).length?24:0;if(o){var s=i?c+e4({fontSize:a,value:6}):c;return 0===c?s:e4({fontSize:a,value:c})}return c+e4({fontSize:a,value:16})}var u=n.item.match.render;return u&&"content"in u?Math.max(e4({fontSize:a,value:null!==(t=u.height)&&void 0!==t?t:32}),l):Math.max(e4({fontSize:a,value:32}),l)}({fontSize:m,row:n,currentPathIndex:d,compact:v,isFirst:0===t,minItemHeight:e.minItemHeight}):0},onChange:function(e){h(e.getTotalSize())}}),Z={borderRadius:e.hasFooter?void 0:g.TV.space8,display:s?void 0:"none"},x=b.scrollToIndex,C=b.getVirtualItems,_=U(ew);return(0,y.useEffect)(function(){var e=_;!(e<0)&&(1===e&&(e=0),C()[e]&&x(e,{behavior:"smooth"}))},[x,C,_]),(0,a.tZ)(p.G,(0,w._)((0,o._)({css:ti.root},f),{style:Z,children:(0,a.tZ)(p.G,{innerRef:u,css:ti.scrollParent,children:(0,a.tZ)(p.G,{style:{height:"".concat(b.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:s?b.getVirtualItems().map(function(e){return(0,a.tZ)(e5,{index:e.index,height:e.size,y:e.start},e.key)}):null})})}))}),ta=n(24268),tl=(0,m.X)({root:[g.l0.flex.shrink(1),g.l0.height("100%"),{fontSize:eJ.Cn.fontSize}],footer:{paddingTop:(0,eJ.fP)(8)},keyComboBlocks:{paddingRight:(0,eJ.fP)(8)},menuWrap:[g.l0.flex.shrink(1)],row:[g.l0.position.absolute,g.l0.top(0),g.l0.left(0),g.l0.width("100%")],menu:[g.l0.flex.shrink(1),g.l0.overflow("auto")],running:[g.l0.center,g.l0.flex.growAndShrink(1)],error:{padding:(0,eJ.fP)(8)}}),tc=(0,m.X)({root:[g.l0.viewStyle,g.l0.flex.growAndShrink(1),g.l0.height("100%"),{fontSize:"1em",padding:"0 ".concat((0,eJ.fP)(8)),backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:g.TV.foregroundDimmest},"&:hover::placeholder":{color:g.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:g.TV.foregroundDimmest}}]}),ts=(0,y.memo)(function(e){var t,n,r,i,l,c,s,u,d,f,h,p,m,v=(t=X(eX),n=U(eT),u=(s=(0,Z._)((r=U(ev),i=X(eU),l=X(eg),c=(0,Z._)((0,y.useTransition)(),2)[1],[r,(0,y.useCallback)(function(e){var t="string"==typeof e?e:e.currentTarget.value;i(t),c(function(){return l(t)})},[i,c,l])]),2))[0],d=s[1],f=X(eb),h=U(eb),p=U(em),m=U(Y),{onBlur:function(){return f(-1)},onChange:d,placeholder:n,value:u,ref:t,disabled:U(K),ariaAttrs:{id:p.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":h>-1?H(h):"","aria-controls":p.menu,"aria-expanded":m,"aria-labelledby":p.label}});return(0,a.tZ)("input",(0,o._)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:tc.root,placeholder:v.placeholder,value:v.value,onChange:v.onChange,ref:v.ref,onBlur:v.onBlur,disabled:v.disabled,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off"},v.ariaAttrs))}),tu=[d.gU.filled,g.l0.viewStyle,g.l0.flex.row,g.l0.align.center,g.l0.flex.growAndShrink(1),{height:(0,eJ.fP)(32),borderRadius:(0,eJ.fP)(4)}],td=(0,m.X)({container:[{padding:(0,eJ.fP)(8),"& > div > button + input":{paddingLeft:0}},g.l0.pb(0)],surface:tu,surfaceRunning:[tu,f.p.foregroundPulse()]}),tf=[d.gU.nofill,g.l0.flex.row,g.l0.align.center,g.l0.flex.growAndShrink(1),{height:(0,eJ.fP)(36),borderRadius:(0,eJ.fP)(8),borderBottomLeftRadius:eJ.Cn.borderBottomLeftRadius,borderBottomRightRadius:eJ.Cn.borderBottomRightRadius}],th=(0,m.X)({container:[{"& > div > button + input":{paddingLeft:0}},g.l0.pb(0)],surface:tf,surfaceRunning:[tf,f.p.foregroundPulse()],border:[g.l0.height(1),{display:eJ.Cn.compactInputBarBorderDisplay}]});function tp(e){var t=U(K),n=F(ep),r=X(V),o=(0,s.Z)(function(e){return r(e.height)}),l=U(ec),c=l?th:td,u=(0,y.useRef)(null);(0,ta.j)(u,n,function(e){var t;return t={},(0,i._)(t,eJ.Dq.borderBottomRightRadius,e?(0,eJ.fP)(8):"0"),(0,i._)(t,eJ.Dq.borderBottomLeftRadius,e?(0,eJ.fP)(8):"0"),t});var d=(0,y.useRef)(null);return(0,ta.j)(d,n,function(e){return(0,i._)({},eJ.Dq.compactInputBarBorderDisplay,e?"none":"inherit")}),(0,a.BX)(a.HY,{children:[(0,a.tZ)(p.G,{css:c.container,innerRef:o,children:(0,a.tZ)(p.G,{innerRef:u,css:t?c.surfaceRunning:c.surface,children:e.children})}),l?(0,a.tZ)(ej.Tg,{innerRef:d,elevated:!0,css:th.border}):null]})}var tm=(0,y.memo)(function(e){var t=U(eD),n=U(eR);return t?(0,a.tZ)(e1,{onClick:e.onClick,isLoading:n}):null}),tv=(0,y.memo)(function(){var e,t,n,r,o,d,f,m,b,w,Z,x,C,_,S,k,E,T,R,I,D,B,G,A=(r=U(Y),o=U(eD),d=U(ev),f=U(ep),m=U(K),b=U($),w=X(eW),Z=U(eh),x=X(eE),C=M(eX),_=U(eV),S=U(er),k=F(eA),E=F(eg),T=X(ey),R=X(eH),I=(0,c.Z)(S),(0,y.useEffect)(function(){k.current&&R(S)},[_,k,S,E,R]),(0,y.useEffect)(function(){return k.subscribe(function(e){e&&R(I.current)})},[_,E,k,R,I]),(0,y.useEffect)(function(){var e=function(e){T(e),_.search(e)};return e(E.current),E.subscribe(e)},[_,E,k,T,I]),D=(0,u.Z)(function(){return function(){var e;return null===(e=C())||void 0===e?void 0:e.focus()}},[C]),B=X(ez),{focus:D,onKeyDown:(0,u.Z)(function(){return function(e){if("Backspace"===e.key&&!e.currentTarget.value){B();return}return w(e)}},[w,B]),inputValue:d,isOpen:r,isClearable:o,noResults:f,hasHighlightedItem:Z,isRunning:m,actionError:b,clearCommands:x}),P=A.isOpen,N=A.focus,L=A.clearCommands,O=A.isClearable,W=A.onKeyDown,H=A.inputValue,z=A.noResults,J=A.hasHighlightedItem,ee=A.isRunning,eu=A.actionError,ed=(0,c.Z)({inputValue:H,noResults:z,hasHighlightedItem:J});e=M(Q),t=U(V),n=F(q),(0,y.useEffect)(function(){var r=function(t){var n=e().onTotalHeightChange;n&&(0===i&&(i=t),n({initial:i,current:t}))};if(0!==t){var i=0;return r(n.current),n.subscribe(r)}},[t,e,n]);var ef=U(et),eb=U(en),ew=U(ei),eZ=U(eo),ex=U(ea),eC=U(es),e_=M(Q),eS=(0,u.Z)(function(){return function(e){var t,n=ed.current,r=e_();if(null===(t=r.onKeyDown)||void 0===t||t.call(r,e,{inputValue:n.inputValue,noResults:n.noResults,hasHighlightedItem:n.hasHighlightedItem}),!e.defaultPrevented){if("Enter"===e.key&&n.inputValue&&n.noResults&&r.onSubmit){r.onSubmit(n.inputValue);return}W(e)}}},[ed,W,e_]);(0,y.useEffect)(function(){ex&&(ex.current=N)},[N,ex]);var ek=U(em),eT=X(j),eR=(0,s.Z)(function(e){return eT(e.height)}),eI=U(el),eB=U(ec);return(0,a.BX)(p.G,{css:tl.root,style:(G={},(0,i._)(G,eJ.Dq.fontSize,eI+"px"),(0,i._)(G,eJ.Dq.menuPaddingTop,eB?"0px":(0,eJ.fP)(8)),G),children:[(0,a.tZ)("label",{id:ek.label,htmlFor:ek.input,css:g.l0.visuallyHidden,children:"Commands"}),(0,a.BX)(tp,{children:[(0,a.tZ)(eK,{}),(0,a.tZ)(ts,{autoFocus:ef,onKeyDown:eS}),(0,a.tZ)(tm,{onClick:function(){return L({focus:!0})}}),eb&&!O?(0,a.tZ)(p.G,{css:tl.keyComboBlocks,children:(0,a.tZ)(l.bM,{keyCombo:eb,fontSize:.85*eI})}):null]}),eu?(0,a.tZ)(p.G,{css:tl.error,children:(0,a.tZ)(h.E,{colorway:"warning",text:eu})}):null,P&&!ee?(0,a.BX)(a.HY,{children:[(0,a.tZ)(to,{minItemHeight:eC,overscan:ew,hasFooter:!!eZ}),eZ?(0,a.tZ)(p.G,{innerRef:eR,css:tl.footer,children:eZ}):null]}):null,ee?(0,a.tZ)(p.G,{css:tl.running,children:(0,a.tZ)(v.Z,{size:24})}):null]})});function tg(e){var t,n,r,i,l=(n={label:(t=(0,C.U)())("label"),input:t("input"),menu:t("menu")},r=(0,W.P5)({controlName:"flag-prioritized-command-types",logFlagToAnalytics:!1}),i=(0,Z._)((0,y.useState)(function(){var t,i,a=(0,S.MT)();a.set(em,n),a.set(Q,e),a.set(Y,!e.openOnInput),a.set(eV,function(e){var t=e.initialPath,n=e.partialUpdateTimeout,r=e.onUpdate,i=t,o=null,a=0;function l(e){o&&clearTimeout(o);var t=++a,l=0,c=[],s=i[i.length-1];if(!s.commands){r({items:c,path:i});return}void 0!==n&&(o=setTimeout(function(){c.length&&r({items:(0,E._)(c).sort(T),partial:!0,path:i})},n)),function n(s,u,d){if(l++,!s.commands)throw Error("Expected commands");var f=(0,E._)(u).concat([s]),h=f.length===i.length;Promise.resolve(s.commands({active:h,search:e,path:f})).then(function(s){if(t!==a){o&&clearTimeout(o);return}l--,s.forEach(function(t,r){var i=(0,E._)(f).concat([t]),o=(0,E._)(d).concat([r]),a=t.match?t.match({search:e,data:t.data,path:i,active:h}):null;a&&c.push({path:i,data:t.data,match:a,indexPath:o}),t.commands&&n(t,f,o)}),l>0||(o&&clearTimeout(o),r({items:(0,E._)(c).sort(T),path:i}))})}(s,i.slice(0,i.length-1),[])}return{search:l,setPath:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i=e,l(t)},getPath:function(){return i}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:30,onUpdate:function(e){return a.set(eL,(0,w._)((0,o._)({},e),{hasFlagPrioritizedCommandTypes:r}))}}));var l=Array.isArray(e.command)?e.command[0]:e.command,c=null!==(i=null==l?void 0:null===(t=l.data)||void 0===t?void 0:t.description)&&void 0!==i?i:null;return c&&a.set(J,function(e){return(0,_.Uy)(e,function(e){e.placeholder=c})}),a}),1)[0],(0,y.useEffect)(function(){i.set(Q,e)},[i,e]),i);return(0,a.tZ)(L.Provider,{value:l,children:(0,a.tZ)(tv,{})})}},39944:function(e,t,n){n.d(t,{Cn:function(){return o},D$:function(){return c},Dq:function(){return i},fP:function(){return l}});var r=(0,n(33298).$)(["fontSize","menuPaddingTop","borderBottomLeftRadius","borderBottomRightRadius","compactInputBarBorderDisplay"]),i=r.cssVars,o=r.styleTokens,a=function(e){return Math.round(100*e)/100},l=function(e){return a(e/14)+"em"},c=function(e){var t=a(e/14)+"em";return{"&& svg":{minWidth:t,minHeight:t,width:t,height:t}}}},63908:function(e,t,n){n.d(t,{E:function(){return T}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(74985),c=n(60305),s=n(15235),u=n(45271),d=n(82230),f=n(94778),h=n(59947),p=n(72093),m=n(81199),v=n(50959),g=n(49224),y=n(59786),b=n(92443),w=n(41733),Z=n(21262),x=n(71440),C=n(58995);function _(){var e=(0,Z._)(["\n  query CurrentUserGithubToken {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return _=function(){return e},e}var S={},k=(0,x.Ps)(_()),E=(0,g.X)({styles0:[p.l0.colWithGap(16)],styles1:[p.l0.justify.end,p.l0.rowWithGap(16)]});function T(){var e,t=(0,m.Z)().replspaceApi,n=(0,o._)((0,v.useState)(null),2),p=n[0],g=n[1],Z=(0,o._)((0,v.useState)(!1),2),x=Z[0],_=Z[1],T=(e=(0,w._)({},S,void 0),C.a(k,e)).data,R=(null==T?void 0:T.currentUser)||void 0,I=(0,y.P5)({controlName:"flag-pid2-shell",logFlagToAnalytics:!1});return(0,v.useEffect)(function(){if(!I)return t.onConfirmSendToken(function(e){e&&(0,c.j)(c.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),g(function(){return e})})},[t,I]),(0,b.L)(function(e,t){var n;function l(){return(l=(0,i._)(function(){var i,l,s,u,d,f,h,p,m,v;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!I)return[2];return[4,e.replspaceApi.init.stream({session:t.from})];case 1:l=(i=o._.apply(void 0,[a.sent(),3]))[0],s=i[1],n=i[2],u=!1,d=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),h=function(){var e=m.value;if(e.ok&&"getGithubToken"===e.payload.$kind){var t,n,r=e.payload.nonce,i=null!==(n=null==R?void 0:null===(t=R.gitHubInfo)||void 0===t?void 0:t.accessToken)&&void 0!==n?n:void 0;if(!i)return l.push({$kind:"githubToken",nonce:r}),"continue";if(x)return l.push({$kind:"githubToken",token:i,nonce:r}),"continue";(0,c.j)(c.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),g(function(){return function(e){if(!e){g(null),l.push({$kind:"githubToken",nonce:r});return}l.push({$kind:"githubToken",token:i,nonce:r}),g(null),_(!0)}})}},p=(0,r._)(s),a.label=3;case 3:return[4,p.next()];case 4:if(!(u=!(m=a.sent()).done))return[3,6];h(),a.label=5;case 5:return u=!1,[3,3];case 6:return[3,13];case 7:return v=a.sent(),d=!0,f=v,[3,13];case 8:if(a.trys.push([8,,11,12]),!(u&&null!=p.return))return[3,10];return[4,p.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(d)throw f;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}return function(){l.apply(this,arguments)}(),function(){null==n||n()}},[R,x,I]),(0,l.tZ)(u.u,{isOpen:"function"==typeof p,onRequestClose:function(){null==p||p(!1),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),g(null)},children:(0,l.BX)(f.G,{css:E.styles0,children:[(0,l.tZ)(d.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,l.tZ)(d.xv,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,l.tZ)(d.xv,{children:"If you did not initiate a git command, you should deny this."}),(0,l.BX)(f.G,{css:E.styles1,children:[(0,l.tZ)(s.zx,{onClick:function(){null==p||p(!1),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),g(null)},text:"Deny"}),(0,l.tZ)(s.zx,{onClick:function(){null==p||p(!0),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),g(null)},iconLeft:(0,l.tZ)(h.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},41876:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(74985),i=n(15579),o=n(17971),a=n(82230),l=n(94778),c=n(72093),s=n(49224),u=n(61694),d=(0,s.X)({overlay:[c.l0.position.fixed,c.l0.flex.row,c.l0.align.center,c.l0.justify.center,c.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:c.n0+1,cursor:"not-allowed"}],animationWrapper:[c.l0.center,c.l0.minWidth(225),c.l0.height(225),c.l0.p(16),c.l0.color.foregroundDefault,c.l0.borderRadius(8),c.l0.backgroundColor.backgroundOverlay,c.l0.zIndex(c.n0+1),{cursor:"not-allowed"}],lockText:c.l0.mt(32)});function f(e){var t=e.reason;return(0,r.tZ)(o.h,{children:(0,r.tZ)(l.G,{css:d.overlay,children:(0,r.tZ)(u.ZP,{children:(0,r.BX)(l.G,{css:d.animationWrapper,tabIndex:-1,children:[(0,r.tZ)(i.Z,{height:80}),(0,r.tZ)(a.xv,{multiline:!1,variant:"subheadBig",css:d.lockText,dataCy:"lock-screen",children:t})]})})})})}},68568:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(66626),i=n(74985),o=n(15235),a=n(18060),l=n(82230),c=n(94778),s=n(72093),u=n(50959),d=(0,n(49224).X)({styles0:[s.l0.colWithGap(24)],styles1:[s.l0.color.accentNegativeStronger],styles2:[s.l0.rowWithGap(12),s.l0.justify.end]});function f(e){var t=e.prompt,n=e.desc,s=e.type,f=e.placeholder,h=e.confirmText,p=e.loading,m=e.errorMessage,v=e.onCancel,g=e.onConfirm,y=e.isDanger,b=e.buttonIcon,w=(0,r._)((0,u.useState)(),2),Z=w[0],x=w[1];return(0,i.BX)(c.G,{css:d.styles0,children:[(0,i.tZ)(l.h4,{variant:"headerDefault",level:2,children:t}),(0,i.tZ)(l.xv,{children:n}),(0,i.tZ)(a.II,{type:s,value:Z,placeholder:f,autoFocus:!0,onChange:function(e){return x(e.target.value)}}),m?(0,i.tZ)(l.xv,{css:d.styles1,multiline:!1,children:m}):null,(0,i.BX)(c.G,{css:d.styles2,children:[(0,i.tZ)(o.zx,{disabled:p,onClick:v,text:"Cancel"}),(0,i.tZ)(o.zx,{colorway:y?"negative":"primary",disabled:p,onClick:function(){return Z&&g(Z)},text:h||"Ok",iconLeft:b,dataCy:"prompt-confirm-button"})]})]})}},48342:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(74985),i=n(75993),o=n(15235),a=n(85638),l=n(85763),c=n(90029),s=n(82230),u=n(64432),d=n(94778),f=n(1383),h=n(20795),p=n(41733),m=n(30509),v=n(66548),g=function(e){return(0,r.tZ)(v.ZP,(0,m._)((0,p._)({viewBox:"0 0 800.5 907.77"},e),{children:(0,r.tZ)("path",{d:"M303.36,238.61c31.36-21.37,71.76-12.97,65-6.53c-12.89,12.28,4.26,8.65,6.11,31.31 c1.36,16.69-4.09,25.88-8.78,31.11c-9.79,1.28-21.69,3.67-36.02,8.33c-8.48,2.76-15.85,5.82-22.31,8.9 c-1.7-1.11-3.55-2.47-5.74-4.36C279.5,288.19,280.24,254.37,303.36,238.61 M490.68,370.72c5.69-4.41,31.55-12.72,55.49-15.55 c12.57-1.48,30.49-2.34,34.31-0.2c7.59,4.19,7.59,17.16,2.39,29.14c-7.57,17.4-18.27,36.63-30.39,38.21 c-19.77,2.61-38.46-8.09-59.8-24.03C485.06,392.56,480.38,378.68,490.68,370.72 M526.75,201.27c29.19,13.58,25.37,39.42,26.18,54.6 c0.22,4.36,0.15,7.3-0.22,9.32c-4.04-2.19-10.43-3.8-20.56-3.35c-2.96,0.12-5.84,0.47-8.63,0.91c-10.77-5.77-17.21-17.06-23.1-29.06 c-0.54-1.11-0.96-2.1-1.36-3.06c-0.17-0.44-0.35-0.91-0.52-1.31c-0.07-0.22-0.12-0.39-0.2-0.59c-3.23-10.25-1.06-12.3,0.3-15.46 c1.41-3.23,6.68-5.89-1.11-8.58c-0.67-0.25-1.5-0.39-2.44-0.57C500.25,197.72,515.7,196.17,526.75,201.27 M367.62,510.22 c-31.45-20.19-63.99-49.15-78.22-65.18c-2.39-1.8-2-9.79-2-9.79c12.84,9.98,66.11,48.04,122.44,65.42 c19.87,6.14,50.36,8.46,76.81-6.53c20.21-11.46,44.54-31.43,59.06-52.01l2.66,4.61c-0.1,3.06-6.78,17.97-10.18,23.96 c6.14,3.53,10.72,4.49,17.55,6.36l46.64-7.27c16.74-27.04,28.74-70.65,15.95-112.16c-7.3-23.81-45.36-71.22-48.09-73.83 c-9.56-9.19,1.6-44.69-17.35-83.42C532.86,159.41,480.67,116.69,458,98.1c6.68,4.88,47.82,21.47,67,44.62 c1.8-2.39,2.54-14.82,4.19-17.97c-16.47-21.57-17.75-59.95-17.75-70.21c0-18.81-9.56-40.13-9.56-40.13s16.47,13.04,20.73,35.5 c5.03,26.6,15.75,47.55,29.93,65.28c26.84,33.43,51.08,50.58,63.33,38.23C630.53,138.58,601,72.2,563.28,35.15 C519.25-8.09,507.74-2.52,481.91,6.7c-20.61,7.35-31.75,65.87-85.47,64.71c-9.1-1.06-32.54-1.63-44.13-1.53 c6.04-8.43,11.22-14.94,11.22-14.94s-18.02,7.25-33.38,16.44l-1.18-1.77c5.18-10.92,10.75-17.82,10.75-17.82s-14.4,8.65-27.54,19.01 c2.39-13.02,11.44-21.27,11.44-21.27s-18.19,3.28-41.36,28.77c-26.33,7.2-32.66,11.93-53.64,21.22 c-34.12-7.44-50.21-19.45-65.55-41.56c-11.68-16.89-32.47-19.45-53.71-10.72c-30.97,12.8-70.14,30.33-70.14,30.33 s12.77-0.52,26.08,0.05c-18.22,6.9-35.72,16.39-35.72,16.39s8.53-0.3,19.06-0.12c-7.27,6.04-11.29,8.92-18.22,13.51 c-16.66,12.1-30.17,26.08-30.17,26.08s11.31-5.15,21.47-8.04c-7.1,16.27-21.18,28.25-18.59,48.17 c2.49,18.19,24.82,55.66,53.64,78.66c2.49,2,41.86,38.43,71.56,23.47c29.68-14.94,41.39-28.25,46.27-48.66 c5.74-23.44,2.47-41.17-9.79-92.05c-4.04-16.79-14.57-51.37-19.65-67.91l1.13-0.81c9.71,20.49,34.56,74.5,44.57,110.78 c15.63,56.57,10.75,85.27,3.6,95.79c-21.57,31.73-76.84,35.92-101.98,18.34c-3.85,60.91,9.76,87.73,14.37,101.24 c-2.29,15.53,7.77,44.37,7.77,44.37s1.13-13.11,5.74-20.02c1.23,15.41,9,33.72,9,33.72s-0.47-11.31,3.06-21.08 c4.98,8.43,8.63,10.43,13.34,16.76c4.71,16.47,14.15,28.5,14.15,28.5s-1.53-8.83-0.69-18.02c23.05,22.14,27.02,54.45,29.31,79.28 c6.46,68.26-107.63,122.54-129.74,165.24c-16.76,25.29-26.8,65.3,1.58,88.89c68.6,56.97,42.25,72.65,76.59,97.69 c47.11,34.34,106.05,18.96,126.11-8.97c27.93-38.92,20.76-75.63,10.38-109.97c-8.11-26.85-30.15-71.46-57.41-88.72 c-27.86-17.65-54.95-20.95-77.9-18.59l2.12-2.44c33.01-6.56,67.52-2.96,92.49,13.14c28.35,18.22,54.28,49.47,67.84,97.37 c15.38-2.19,17.55-3.18,31.63-5.18l-31.7-246.76L367.62,510.22z M385.94,819.52l-3.65-34.22l71.29-108.74l80.93,23.64l69.59-116.23 L687.52,639l63.38-132.92l22.53,242.07L385.94,819.52z M774.27,456.51l-254.72,46.17c-6.31,8.13-21.91,22.41-29.41,26.13 c-32.17,16.2-53.91,11.51-72.7,6.63c-12.08-3.06-19.08-4.78-29.11-9.29l-62.17,8.53l37.74,314.87l436.35-78.66L774.27,456.51z"})}))},y=n(11721),b=n(72093),w=n(55460),Z=(0,n(49224).X)({styles0:[b.l0.rowWithGap(2),{alignItems:"center"}],styles1:[b.l0.align.center]});function x(e){var t=e.replId,n=e.showFlag,p=e.buttonsOnly,m=(0,w.F)().isDarkColorScheme;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.Z,{href:"https://app.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(t)}).toString(),iconLeft:(0,r.tZ)(g,{color:m?"#FFFFFF":"#632CA6"}),iconRight:(0,r.tZ)(f.Z,{}),target:"_blank",text:"View Datadog Logs by Repl ID"}),(0,r.tZ)(a.Z,{href:"https://app.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(t),agg_q:"@containerid",agg_q_source:"base",cols:"host,service",messageDisplay:"inline",stream_sort:"desc",top_n:"30",top_o:"top",viz:"transaction",x_missing:"true",live:"true"}).toString(),iconLeft:(0,r.tZ)(g,{color:m?"#FFFFFF":"#632CA6"}),iconRight:(0,r.tZ)(f.Z,{}),target:"_blank",text:"View Datadog Logs by Container ID"}),void 0!==p&&p?(0,r.tZ)(u.u,{maxWidth:300,tooltip:(0,r.tZ)(s.xv,{multiline:!1,children:t}),children:(0,r.tZ)(o.zx,{iconLeft:(0,r.tZ)(h.Z,{}),text:"Copy Repl ID",onClick:function(){return(0,i.Z)(t)}})}):(0,r.BX)(d.G,{css:Z.styles0,children:[void 0!==n&&n?(0,r.BX)(u.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:[(0,r.tZ)(y.Z,{})," "]}):null,(0,r.BX)(s.xv,{css:Z.styles1,multiline:!1,children:["Repl ID: ",(0,r.tZ)(c.Z,{children:t})]}),(0,r.tZ)(l.hU,{alt:"Copy to clipboard",onClick:function(){return(0,i.Z)(t)},children:(0,r.tZ)(h.Z,{})})]})]})}},87409:function(e,t,n){n.d(t,{$s:function(){return s},G$:function(){return i},fZ:function(){return o},p6:function(){return c}});var r=n(96955),i=.01,o=function(e,t){var n=t.resourceUsageType,r=t.forceGib,i=t.precision,o=t.skipUnits,a=t.additional,c=t.minimumValue,s=t.truncateToMillions,u=t.gibsDisplayAsBytes,d=l({input:e,resourceUsageType:n,forceGib:void 0!==r&&r,precision:void 0===i?4:i,minimumValue:void 0===c?null:c,truncateToMillions:void 0!==s&&s,gibsDisplayAsBytes:void 0!==u&&u});return void 0!==o&&o?d.formattedValue:void 0!==a&&a?[d.formattedValue,"additional",d.units].join(" "):[d.formattedValue,d.units].join(" ")};function a(e,t){var n=t.precision,r=t.minimumValue,i=t.forceGib,o=r&&0!==e;return e>=1073741824*(null!=r?r:1)||i?o&&e<1073741824*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:n})),units:"GiB"}:{formattedValue:s(e).toFixed(n),units:"GiB"}:o&&e<1048576*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:n})),units:"MiB"}:{formattedValue:c(e).toFixed(n),units:"MiB"}}var l=function(e){var t=e.input,n=e.resourceUsageType,i=e.forceGib,o=e.precision,l=e.minimumValue,c=e.truncateToMillions,s=e.gibsDisplayAsBytes,u=l&&0!==t&&t<l;switch(n){case"Bytes":return a(t,{precision:o,minimumValue:l,forceGib:i});case"GiB":if(0===t)return{formattedValue:t.toFixed(o),units:"GiB"};if(s)return a(1073741824*t,{precision:o,minimumValue:l,forceGib:!1});if(u)return{formattedValue:"<".concat(l.toLocaleString(void 0,{minimumFractionDigits:o})),units:"GiB"};return{formattedValue:t.toFixed(o),units:"GiB"};case"ComputeUnits":if(t>=1e6&&c)return{formattedValue:(t/1e6).toLocaleString(void 0,{maximumFractionDigits:t>=1e6&&c?2:0})+" million",units:"compute units"};return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute units"};case"ComputeHours":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute hours"};case"Requests":if(t>=1e6&&c)return{formattedValue:(t/1e6).toLocaleString(void 0,{maximumFractionDigits:t>=1e6&&c?2:0})+" million",units:"requests"};return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"requests"};case"Site":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"site"};case"Hours":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:2}),units:"hours"};case"ScheduledDays":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:2}),units:"days"};case"Tokens":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"tokens"};default:(0,r.Z)(n)}},c=function(e){return e/1048576},s=function(e){return e/1073741824}},4318:function(e,t,n){n.d(t,{u:function(){return o}});var r=n(21262);function i(){var e=(0,r._)(["\n  fragment BuildStatusBadgeHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,n(71440).Ps)(i())},23129:function(e,t,n){n.d(t,{e:function(){return p}});var r=n(74985),i=n(11491),o=n(77361),a=n(85438),l=n(82230),c=n(64432),s=n(94778),u=n(49224),d=n(72093),f=n(16572),h=(0,u.X)({root:[d.l0.py(4),d.l0.rowWithGap(4),d.l0.align.center]});function p(e){var t=e.deployment,n=e.small,u=t.currentBuild,d=i.VR[u.status],p=d.title,m=d.color,v=(0,f.Z)(new Date(u.timeCreated),Date.now(),{addSuffix:!0}),g="Deployed ".concat(v," by ").concat(u.user.displayName),y=u.status===a.Fe.Success?"Deployed":p;return(0,r.tZ)(c.u,{tooltip:g,children:(0,r.BX)(s.G,{css:h.root,children:[(0,r.tZ)(o.Z,{size:n?12:16,color:m}),(0,r.tZ)(l.xv,{variant:n?"small":void 0,color:"dimmest",multiline:!1,children:y})]})})}},98986:function(e,t,n){n.d(t,{$:function(){return s}});var r=n(66626),i=n(74985),o=n(50959),a=n(42650),l=n(15063),c=n(45375);function s(e){var t=(0,r._)((0,o.useState)(function(){var t,n,r,i,o,c;return n=(t={fs:e.fs,container:e.container,dotReplit:e.dotReplit,ports:e.ports}).container,r=t.fs,i=t.dotReplit,o=t.ports,(c=(0,a.MT)()).set(l.CK,n),c.set(l.bA,r),c.set(l.My,i),c.set(l.l,o),c}),1)[0];return(0,i.BX)(c.aT.Provider,{value:t,children:[e.children,(0,i.tZ)(l.jd,{replId:e.replId})]})}},24336:function(e,t,n){n.d(t,{Qm:function(){return s},fG:function(){return u},G8:function(){return p},lV:function(){return h},KU:function(){return m},Lv:function(){return d},lt:function(){return f}});var r=n(74985),i=n(43312),o=n(94778),a=n(59797),l=n(72093),c=(0,i.iv)({filter:"drop-shadow(0px 2px 6px rgba(0, 0, 0, 0.15))"});function s(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M7 42.2858L8 32.6684H14L15 42.2858H24L26 27.1837H32L34 42.2858H43L45 21.699H52L55 3.71436H56V43.0001H1V42.2858H7Z",fill:"url(#paint0_linear_3629_241)"}),(0,r.tZ)("path",{d:"M55 3.71436L52 21.699H45L43 42.2858H34L32 27.1837H26L24 42.2858H15L14 32.6684H8L7 42.2858H1",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("defs",{children:(0,r.BX)("linearGradient",{id:"paint0_linear_3629_241",x1:"28.5",y1:"3.71436",x2:"28.5",y2:"43.0001",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#0079F2"}),(0,r.tZ)("stop",{offset:"0.395833",stopColor:"#0079F2"}),(0,r.tZ)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function u(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.BX)("g",{clipPath:"url(#clip0_3629_246)",children:[(0,r.tZ)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",fill:"#2B3245"}),(0,r.tZ)("g",{filter:"url(#filter0_dii_3629_246)",children:(0,r.tZ)("path",{d:"M3 15C3 13.3431 4.34315 12 6 12H20C20.5523 12 21 12.4477 21 13V25C21 25.5523 20.5523 26 20 26H6C4.34315 26 3 24.6569 3 23V15Z",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter1_dii_3629_246)",children:(0,r.tZ)("rect",{x:"23",y:"12",width:"12",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter2_dii_3629_246)",children:(0,r.tZ)("rect",{x:"37",y:"12",width:"8",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.tZ)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",stroke:"#3C445C"})]}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_dii_3629_246",x:"-3",y:"6",width:"30",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.BX)("filter",{id:"filter1_dii_3629_246",x:"17",y:"6",width:"24",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.BX)("filter",{id:"filter2_dii_3629_246",x:"31",y:"6",width:"20",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.tZ)("clipPath",{id:"clip0_3629_246",children:(0,r.tZ)("rect",{width:"56",height:"44",fill:"white"})})]})]})}function d(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M1 42H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_304)",children:(0,r.tZ)("path",{d:"M21 11L35 25M38 18C38 23.5228 33.5228 28 28 28C22.4772 28 18 23.5228 18 18C18 12.4772 22.4772 8 28 8C33.5228 8 38 12.4772 38 18Z",stroke:"#0053A6",strokeWidth:"2"})}),(0,r.tZ)("defs",{children:(0,r.BX)("filter",{id:"filter0_d_3629_304",x:"9",y:"3",width:"38",height:"38",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"4"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"4"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0.32549 0 0 0 0 0.65098 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_304"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_304",result:"shape"})]})})]})}function f(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("circle",{cx:"28",cy:"22",r:"13",fill:"#0053A6"}),(0,r.tZ)("path",{d:"M28 9C30.2851 9 32.5297 9.6023 34.5079 10.7462L28 22L28 9Z",fill:"#0079F2"}),(0,r.tZ)("circle",{cx:"28",cy:"22",r:"10.5",stroke:"#57ABFF",strokeDasharray:"1 4"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_309)",children:(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28 36.3334C35.9161 36.3334 42.3333 29.9162 42.3333 22.0001C42.3333 15.1129 37.4759 9.36028 31 7.98119V6C31 5 30 4 29 4H27C26 4 25 5 25 6V7.9812C18.5241 9.36029 13.6667 15.1129 13.6667 22.0001C13.6667 29.9162 20.0839 36.3334 28 36.3334ZM15.6667 22.0001C15.6667 15.1886 21.1885 9.66675 28 9.66675C34.8115 9.66675 40.3333 15.1886 40.3333 22.0001C40.3333 28.8116 34.8115 34.3334 28 34.3334C21.1885 34.3334 15.6667 28.8116 15.6667 22.0001Z",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter1_d_3629_309)",children:(0,r.tZ)("path",{d:"M28 12V22L33 13.3",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_d_3629_309",x:"11.6667",y:"3",width:"32.6667",height:"36.3335",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]}),(0,r.BX)("filter",{id:"filter1_d_3629_309",x:"25.25",y:"10.25",width:"10.5001",height:"15.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]})]})]})}function h(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M0 37V6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H56V37H0Z",fill:"url(#paint0_linear_3629_271)"}),(0,r.tZ)("path",{d:"M1 6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("defs",{children:(0,r.BX)("linearGradient",{id:"paint0_linear_3629_271",x1:"28",y1:"6",x2:"28",y2:"37",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#0079F2",stopOpacity:"0.7"}),(0,r.tZ)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function p(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M16 8C16 6.89543 16.8954 6 18 6H37C38.1046 6 39 6.89543 39 8V13H16V8Z",fill:"#0053A6"}),(0,r.tZ)("path",{d:"M16 14H39V27C39 28.1046 38.1046 29 37 29H18C16.8954 29 16 28.1046 16 27V14Z",fill:"#0053A6"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_276)",children:(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1667 1.6665C22.719 1.6665 23.1667 2.11422 23.1667 2.6665V4.33317H31.8333V2.6665C31.8333 2.11422 32.281 1.6665 32.8333 1.6665C33.3856 1.6665 33.8333 2.11422 33.8333 2.6665V4.33317H36.8333C38.8584 4.33317 40.5 5.97479 40.5 7.99984V26.6665C40.5 28.6915 38.8584 30.3332 36.8333 30.3332H18.1667C16.1416 30.3332 14.5 28.6915 14.5 26.6665V7.99984C14.5 5.97479 16.1416 4.33317 18.1667 4.33317H21.1667V2.6665C21.1667 2.11422 21.6144 1.6665 22.1667 1.6665ZM21.1667 6.33317H18.1667C17.2462 6.33317 16.5 7.07936 16.5 7.99984V12.3332H38.5V7.99984C38.5 7.07936 37.7538 6.33317 36.8333 6.33317H33.8333V7.99984C33.8333 8.55212 33.3856 8.99984 32.8333 8.99984C32.281 8.99984 31.8333 8.55212 31.8333 7.99984V6.33317H23.1667V7.99984C23.1667 8.55212 22.719 8.99984 22.1667 8.99984C21.6144 8.99984 21.1667 8.55212 21.1667 7.99984V6.33317ZM38.5 14.3332H16.5V26.6665C16.5 27.587 17.2462 28.3332 18.1667 28.3332H36.8333C37.7538 28.3332 38.5 27.587 38.5 26.6665V14.3332Z",fill:"#57ABFF"})}),(0,r.BX)("g",{filter:"url(#filter1_d_3629_276)",children:[(0,r.tZ)("path",{d:"M43.0779 26.019C42.2616 23.6789 40.0353 22 37.4169 22C35.7617 22 34.2632 22.6709 33.1785 23.7556L30.2721 26.662M30.2721 26.662V22.666M30.2721 26.662H34.2667",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M31.7706 29.9688C32.5869 32.3089 34.8132 33.9878 37.4316 33.9878C39.0868 33.9878 40.5853 33.3169 41.67 32.2322L44.5764 29.3258M44.5764 29.3258L44.5764 33.3218M44.5764 29.3258L40.5818 29.3258",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_d_3629_276",x:"12.5",y:"0.666504",width:"30",height:"32.6665",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]}),(0,r.BX)("filter",{id:"filter1_d_3629_276",x:"27.5221",y:"20.25",width:"19.8043",height:"17.4878",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]})]})]})}function m(){return(0,r.tZ)(o.G,{css:[l.l0.py(6),l.l0.px(12),l.l0.color.accentPrimaryStronger],children:(0,r.tZ)(a.Z,{size:32})})}},41365:function(e,t,n){n.d(t,{Gs:function(){return f},Qw:function(){return d},un:function(){return h}});var r=n(41733),i=n(66626),o=n(74985),a=n(43312),l=n(94778),c=n(49224),s=n(50959),u=n(36855),d=(0,c.X)({maxWidth:{width:"100%",maxWidth:600,marginLeft:"auto",marginRight:"auto"}}),f=function(e,t){return(0,a.F4)("\n  0% {\n    opacity: 0;\n    height: ".concat((null==t?void 0:t.from)?t.from:0,"px;\n  }\n  99% {\n    opacity: 1;\n    height: ").concat(e,"px;\n  }\n  ").concat((null==t?void 0:t.noAuto)?"100% {\n        opacity: 1;\n        height: ".concat(e,"px;\n      }"):"100% {\n    height: auto;\n  }","\n"))};function h(e){var t,n,a,c=e.children,d=e.render,f=e.timeout,h=void 0===f?300:f,p=e.initialHeight,m=(0,s.useRef)(null),v=(0,s.useRef)(null),g=(n=(t=(0,i._)((0,s.useState)(0),2))[0],a=t[1],(0,s.useEffect)(function(){if(v.current){var e=new ResizeObserver(function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=i.value.borderBoxSize[0].blockSize;a(l)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}});return e.observe(v.current),function(){return e.disconnect()}}},[n,v]),n),y=g>0?g:p,b={transition:h+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},w={entering:{opacity:1,height:y},entered:{transitionProperty:"opacity",opacity:1,height:y,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,o.tZ)(u.ZP,{nodeRef:m,timeout:h,in:d,children:function(e){return(0,o.tZ)(l.G,{innerRef:m,style:(0,r._)({},b,w[e]),children:(0,o.tZ)(l.G,{innerRef:v,children:c})})}})}},94932:function(e,t,n){var r,i,o,a;n.d(t,{a:function(){return i},k:function(){return r}}),(o=r||(r={})).Intro="intro",o.Deployment="deployment",o.DeploymentInProgress="deployment_in_progress",o.Analytics="analytics",o.Logs="logs",o.Settings="settings",o.Schedule="schedule",o.ResourceMonitoring="resource_monitoring",o.ReservedVMTierSelection="reserved_vm_tier_selection",o.AutoscaleMachineConfiguration="autoscale_machine_configuration",(a=i||(i={})).SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",a.ChangeView="change_view",a.OpenPane="open_pane"},8260:function(e,t,n){n.d(t,{E:function(){return r},c:function(){return i}});var r="Procfile";function i(e){var t={};return e.split("\n").forEach(function(e){if(""!==e){var n=e.match(/^([A-Za-z0-9_]+):\s*(.+)$/);if(n){var r=n[2].trim().split(" ");t[n[1]]={command:r[0],options:r.slice(1)}}}}),t}},39064:function(e,t,n){n.d(t,{EC:function(){return v},U4:function(){return f}});var r=n(41733),i=n(21262),o=n(71440),a=n(99165);function l(){var e=(0,i._)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment MultiplayerRepl on Repl {\n    id\n    collaborators {\n      user {\n        ...MultiplayerUser\n      }\n    }\n    multiplayerInvites {\n      email\n      type\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment MultiplayerReplInvite on MultiplayerInvite {\n    email\n    repl {\n      ...MultiplayerRepl\n    }\n    invitePermissionType: type\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation AddOrInviteReplMultiplayer(\n    $input: AddOrInviteReplMultiplayerInput!\n  ) {\n    addOrInviteReplMultiplayer(input: $input) {\n      __typename\n      ... on AddOrInviteReplMultiplayerOuput {\n        result {\n          ... on MultiplayerInvite {\n            ...MultiplayerReplInvite\n          }\n          ... on ReplPermission {\n            id\n            repl {\n              ...MultiplayerRepl\n            }\n            user {\n              ...MultiplayerUser\n            }\n            replPermissionType: type\n          }\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var d={},f=(0,o.Ps)(l()),h=(0,o.Ps)(c(),f),p=(0,o.Ps)(s(),h),m=(0,o.Ps)(u(),p,h,f);function v(e){var t=(0,r._)({},d,e);return a.D(m,t)}},37053:function(e,t,n){var r=n(66626),i=n(43182),o=n(39064),a=n(69170),l=n(60305),c=n(85438),s=n(25150);t.Z=function(e){var t=e.isMobileApp,n=e.isTeam,u=e.handleUpgradeTriggered,d=e.replId,f=(0,a.Z)(),h=f.showConfirm,p=f.showError,m=function(e,t){i.n_({message:t}),i.Tb(Error(e.message)),p("Something unexpected happened, please try again.")},v=(0,r._)((0,o.EC)({onError:function(e){return m(e,"useAddOrInviteReplMultiplayerMutation")},onCompleted:function(e){var r,i,o,a=e.addOrInviteReplMultiplayer;switch(a.__typename){case"NotFoundError":case"UnauthorizedError":p(a.message);return;case"UserError":if(a.message.includes("reached the limit")){if(t&&!n){p("You have reached the invite limit for a free account. Please upgrade to add more collaborators.");return}if(!t&&u){u(!0);return}}p(a.message);return;case"AddOrInviteReplMultiplayerOuput":"MultiplayerInvite"===a.result.__typename?(r=c.ml.Email,i=a.result.email):(r=c.ml.Username,i=(null===(o=a.result.user)||void 0===o?void 0:o.username)?"@".concat(a.result.user.username):"user")}(0,l.j)(s.U3.MULTIPLAYER_INVITED,{replId:d,inviteMethod:r}),h("Added ".concat(i))}}),2);return{addOrInviteReplMultiplayer:v[0],loadingAddMutation:v[1].loading}}},55055:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(50959);function i(){return(0,r.useMemo)(function(){return function(){if("undefined"==typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()},[])}},12945:function(e,t,n){var r=n(50959);t.Z=function(e,t,n){(0,r.useEffect)(function(){var t=setTimeout(e,n);return function(){clearTimeout(t)}},t)}},23293:function(e,t,n){n.d(t,{f6:function(){return c},oj:function(){return l},xZ:function(){return u}});var r=n(66626),i=n(81199),o=n(50959);function a(e){var t=(0,r._)((0,o.useState)(!1),2),n=t[0],a=t[1],l=(0,i.Z)().dotReplit;return(0,o.useEffect)(function(){var t=!1;return l.getConfig().then(function(n){t||n.error||n.config.language!==e||a(!0)}),function(){t=!0}},[e,l]),n}function l(){return a("kaboom")}function c(){return a("kaboomdraw")}var s=/^draw.[tj]s$/;function u(e){return c()&&!!(null==e?void 0:e.match(s))}},9413:function(e,t,n){n.d(t,{v:function(){return d}});var r=n(41733),i=n(21262),o=n(71440),a=n(58995);function l(){var e=(0,i._)(["\n  query ReplTeamOrgSettings($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n            organization {\n              id\n              isAiEnabled\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l()),u=n(39271);function d(){var e,t,n,i,o=(n={variables:{replId:(0,u.Z)()}},i=(0,r._)({},c,n),a.a(s,i)).data;return{isTeamWithAiDisabled:(null==o?void 0:o.repl.__typename)==="Repl"&&(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)==="Team"&&(null===(t=o.repl.owner.organization)||void 0===t?void 0:t.isAiEnabled)===!1}}},63066:function(e,t,n){function r(){return"ontouchstart"in window||navigator.maxTouchPoints>0}n.d(t,{Z:function(){return r},y:function(){return a}});var i=/iPad|iPhone|iPod/,o=/MacIntel/;function a(){return!!i.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&o.test(navigator.platform)}},12789:function(e,t,n){n.d(t,{_:function(){return c}});var r=n(27387),i=n(96583),o=n(36556),a=n(81199),l=n(46298);function c(){var e=(0,a.Z)().toolchain;function t(){return(t=(0,r._)(function(t){return(0,i.Jh)(this,function(n){return[2,e.setModuleConfig(t)]})})).apply(this,arguments)}function n(){return(n=(0,r._)(function(t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.addModule(t).catch(function(e){o.kg.error("Toolchain: failed to add Nix module: "+e.message)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function c(){return(c=(0,r._)(function(t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.removeModule(t).catch(function(e){o.kg.error("Toolchain: failed to remove Nix module: "+e.message)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function s(){return(s=(0,r._)(function(t,n){return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,e.upgradeModule(t,n).catch(function(e){o.kg.error("Toolchain: failed to upgrade Nix module: "+e.message)})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}return{modules:(0,l.Z)(e.modules),configs:(0,l.Z)(e.configs),moduleConfig:(0,l.Z)(e.moduleConfig),setModuleConfig:function(e){return t.apply(this,arguments)},addModule:function(e){return n.apply(this,arguments)},removeModule:function(e){return c.apply(this,arguments)},upgradeModule:function(e,t){return s.apply(this,arguments)}}}},99036:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(66626),i=n(84806),o=n(81199),a=n(50959),l=n(39171),c=n(41733),s=n(21262),u=n(71440),d=n(99165);function f(){var e=(0,s._)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return f=function(){return e},e}var h={},p=(0,u.Ps)(f());function m(){var e,t=(0,r._)((e=(0,c._)({},h,void 0),d.D(p,e)),1)[0],n=(0,o.Z)().fs,s=(0,i.Z)(),u=null==s?void 0:s.currentUserPermissions.containerWrite,f=null==s?void 0:s.id;(0,a.useEffect)(function(){if(u&&f){var e=(0,l.Z)(function(){return t({variables:{replId:f}})},{wait:6e4,maxWait:6e5}),r=n.onStatusChange(function(){e()});return function(){e.isScheduled()&&e.flush(),r()}}},[n,f,u,t])}},91175:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(69407),i=n(50959);function o(){var e=(0,i.useContext)(r.Z);if(!e)throw Error("Expected Repl info to be in context");return e.language.startsWith("html")}},43816:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(66626),i=n(63257),o=n(14872),a=n(50959),l=n(41733),c=n(30509),s=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(0,r._)((0,a.useState)(null),2),o=i[0],u=i[1],d=(0,a.useCallback)(u,[u]),f=(0,a.useRef)(t);(0,a.useEffect)(function(){f.current=t},[t]);var h=(0,r._)((0,a.useState)(null),2),p=h[0],m=h[1];return(0,a.useEffect)(function(){if(o){var e=function(){var e=o.value,t=o.selectionStart;if(!t){m(null);return}var n=1===t||s(e[t-2]||""),r=e.length?e[t-1]:null;m(function(i){if(i&&(t<i.index||0===t))return null;if(!r||!i&&!n)return i;var o=f.current.includes(r);return i||o?i?s(r)?null:(0,c._)((0,l._)({},i),{text:e.slice(i.index,t)}):{index:t,text:"",match:r}:i})},t=function(){m(null)};return o.addEventListener("focus",e),o.addEventListener("keyup",e),o.addEventListener("blur",t),function(){m(null),o.removeEventListener("focus",e),o.removeEventListener("keyup",e),o.removeEventListener("blur",t)}}},[o,m]),[p,d]}function d(e){var t=(0,a.useRef)(e);(0,a.useEffect)(function(){t.current=e},[e]);var n=(0,r._)((0,a.useState)(!1),2),l=n[0],c=n[1],s=(0,r._)((0,a.useState)(null),2),d=s[0],f=s[1],h=(0,r._)(u.apply(void 0,(0,i._)(Object.keys(e))),2),p=h[0],m=h[1],v=(0,a.useRef)(p);(0,a.useEffect)(function(){v.current=p},[p]);var g=(0,o.Z)(p,100);return(0,a.useEffect)(function(){if(!g){f(null);return}var e=g.match,n=g.text,r=t.current[e]?t.current[e]:null;if(!r){f(null);return}var i=!1;return c(!0),r(n).then(function(e){i||v.current!==g||(c(!1),f({textTrigger:g,results:e,applySuggestion:function(e){var t=e.targetValue,n=e.suggestionValue,r=t.slice(0,g.index),i=n,o=t.slice(g.index+g.text.length);o&&o.startsWith(" ")||(i+=" ");var a=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))}),function(){i=!0}},[g,f]),[{isLoading:l,suggestions:d},m]}},42385:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(81199),i=n(46298);function o(){var e=(0,r.Z)().toolchain;return(0,i.Z)(e.configs)}},63891:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(38753),o=n(68883),a=n(50959);function l(){var e=(0,a.useRef)(0),t=(0,r._)((0,a.useState)(!1),2),n=t[0],l=t[1],c=(0,i.T3)(),s=(0,i.sG)(),u=(0,o.u)();return(0,a.useEffect)(function(){var t,n=window.visualViewport;if(n){if(s){l(null!==(t=null==u?void 0:u.isShown)&&void 0!==t&&t);return}if(c){var r=function(){l(n.height<.8*e.current)};return e.current=n.height,n.addEventListener("resize",r),function(){n.removeEventListener("resize",r)}}}},[c,s,null==u?void 0:u.isShown]),n}},18063:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(66626),i=n(69977),o=n(81199),a=n(50959),l=n(36556),c=n(59786),s=n(79834),u=n(43182);function d(e,t){var n,d,f,h,p=(n=(0,o.Z)().container,f=(d=(0,r._)((0,a.useState)(null),2))[0],h=d[1],(0,a.useEffect)(function(){if(n)return n.onConnectionStateChanged(function(){h(n.getConnectionMetadata())})},[n]),(0,a.useMemo)(function(){return f?(0,i.he)(f.token):null},[f])),m=(0,c.P5)({controlName:"flag-pid2",logFlagToAnalytics:!1});(0,a.useEffect)(function(){if(e&&t){var n,r,i,o=(null===(n=e.origin)||void 0===n?void 0:n.__typename)==="Repl"?e.origin.id:null,a={id:e.id,slug:e.slug,originId:o,roles:t.roles&&t.roles.map(function(e){return e.name}),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null===(i=e.source)||void 0===i?void 0:null===(r=i.release)||void 0===r?void 0:r.id,tokenCluster:null==p?void 0:p.cluster};if(m){var c=(0,s.jy)();u.YA("pid2Version",c),a.pid2Version=c}return(0,l.Fy)(a),function(){(0,l.dv)()}}},[e,t,p,m])}},31764:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(27387),i=n(96583),o=n(36559),a=/\(copy\)( \d+)?$/,l=/\d+$/,c=n(73372);function s(e,t){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e,t){var n,r,s,u,d,f;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return n=(0,o.Il)(e),[4,t.readDir(0===n.length?c.Ql:n)];case 1:if((r=i.sent()).error)throw r.error;return s=new Set(r.children.map(function(e){return e.filename})),u=function(e,t){for(var n=(0,o.r6)(e),r=(0,o.eb)(e),i=a.test(r)?e:"".concat(r," (copy)").concat(n.length>0?".".concat(n):""),c=1;c<=t.size&&t.has(i);c++){var s=(0,o.eb)(i),u=s.split(" ");l.test(s)&&u.pop(),i="".concat(u.join(" ")," ").concat(c),n.length>0&&(i+=".".concat(n))}return i}((0,o.UO)(e),s),d=n?"".concat(n,"/").concat(u):u,[4,t.copyFile(e,d)];case 2:if((f=i.sent()).error)throw f.error;return[2,d]}})})).apply(this,arguments)}},73117:function(e,t){t.Z={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true",allowpopups:"true"}},28488:function(e,t,n){n.d(t,{Y:function(){return C},K:function(){return _}});var r,i=n(74985),o=n(63952),a=n(59786),l=n(27387),c=n(12285),s=n(96583),u=n(61374),d=n(36556),f=new(function(){"use strict";function e(){(0,c._)(this,e)}var t=e.prototype;return t.export=function(e,t){var n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,s=a.value,f=s.spanContext(),h={name:s.name,service:"repl.it-web",trace_id:f.traceId,span_id:f.spanId,start:s.startTime,end:s.endTime,parent_id:s.parentSpanId,attributes:s.attributes};n.has(f.traceId)||n.set(f.traceId,[]),null===(c=n.get(f.traceId))||void 0===c||c.push(h)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var p=Array.from(n.values());if(0===p.length){t({code:u.I.SUCCESS});return}var m=(0,d.Q0)();fetch("/datadog/traces",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"fetch"},body:JSON.stringify({repl:{id:null==m?void 0:m.id,rootOriginReplUrl:null==m?void 0:m.rootOriginReplUrl},traces:p})}).then(function(){t({code:u.I.SUCCESS})}).catch(function(e){d.kg.error("Failed to send traces to Datadog: ".concat(e.message)),t({code:u.I.FAILED,error:e.message})})},t.shutdown=function(){return(0,l._)(function(){return(0,s.Jh)(this,function(e){return[2]})})()},t.forceFlush=function(){return(0,l._)(function(){return(0,s.Jh)(this,function(e){return[2]})})()},e}()),h=n(83176),p=n(25490),m=n(4955),v=n(9670),g=n(51305),y=n(70137),b=n(15451),w=function(e){"use strict";(0,m._)(n,e);var t=(0,v._)(n);function n(){var e;return(0,c._)(this,n),e=t.apply(this,arguments),e.spanSet=new Map,e}var r=n.prototype;return r.startSpan=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.D.active(),i=(0,h._)((0,p._)(n.prototype),"startSpan",this).call(this,e,t,r);return this.spanSet.set(i.spanContext().spanId,i),i},r.pruneSpans=function(){this.spanSet.forEach(function(e){e.isRecording()&&e.setAttribute("pruned",!0)}),this.spanSet=new Map},n}(y.k),Z=function(e){"use strict";(0,m._)(n,e);var t=(0,v._)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c._)(this,n),(e=t.call(this,r))._wsTracers=new Map,e._wsConfig=r,e}var r=n.prototype;return r.getTracer=function(e,t,n){var r="".concat(e,"@").concat(t||"",":").concat((null==n?void 0:n.schemaUrl)||"");return this._wsTracers.has(r)||this._wsTracers.set(r,new w({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._wsConfig,this)),this._wsTracers.get(r)},r.pruneSpansForTracer=function(e,t,n){var r,i="".concat(e,"@").concat(t||"",":").concat((null==n?void 0:n.schemaUrl)||"");this._wsTracers.has(i)&&(null===(r=this._wsTracers.get(i))||void 0===r||r.pruneSpans())},n}(b.m),x=n(50959);function C(){var e=(0,a.P5)({controlName:"flag-open-telemetry-tracing",forceCheckLiveClient:!0});return(0,x.useEffect)(function(){e&&((r=new Z).addSpanProcessor(new o.p(f)),r.register())},[e]),(0,i.tZ)(i.HY,{})}function _(e){r.pruneSpansForTracer(e)}},59775:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(34495);function i(e,t,n){n&&r.Z(e,t),t&&"object"==typeof t?(t.skipOverflowHiddenElements=!0,r.Z(e,t)):r.Z(e,{skipOverflowHiddenElements:!0})}},7714:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(66626),i=n(74985),o=n(69170),a=n(75993),l=n(60305),c=n(18060),s=n(18471),u=n(64479),d=n(78803),f=n(82230),h=n(94778),p=n(49224),m=n(17519),v=n(66958),g=n(29318),y=n(87128),b=n(72093),w=n(41733),Z=n(21262),x=n(71440),C=n(58995),_=n(99165);function S(){var e=(0,Z._)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return S=function(){return e},e}function k(){var e=(0,Z._)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return k=function(){return e},e}function E(){var e=(0,Z._)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return E=function(){return e},e}var T={},R=(0,x.Ps)(S()),I=(0,x.Ps)(k()),D=(0,x.Ps)(E()),B=n(12202),G=(0,p.X)({container:[b.l0.colWithGap(12),b.l0.px(16),b.l0.pt(12),{borderTop:"solid 1px ".concat(b.TV.outlineDimmest)}],header:[b.l0.flex.row,b.l0.justify.spaceBetween],globeIconContainer:[b.l0.width(40),b.l0.height(40),b.l0.backgroundColor.accentPrimaryDimmer,b.l0.borderRadius("full"),b.l0.align.center,b.l0.justify.center],title:[b.l0.fontWeight.medium],loading:[b.l0.rowWithGap(4),b.l0.align.center],inviteUrlContainer:[b.l0.borderRadius(8),b.l0.flex.row],input:[b.l0.borderRadius(8,0,0,8),b.l0.color.foregroundDimmer],copyToClipboard:[b.l0.borderRadius(0,8,8,0)],titleGroup:[b.l0.rowWithGap(12)]}),A=function(){return(0,i.BX)(h.G,{css:G.titleGroup,children:[(0,i.tZ)(h.G,{css:G.globeIconContainer,children:(0,i.tZ)(m.Z,{color:b.TV.accentPrimaryStrongest,size:20})}),(0,i.BX)(h.G,{children:[(0,i.tZ)(f.xv,{css:G.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.tZ)(f.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function P(e){var t,n,p,m,Z,x,S,k,E,P,N,L=e.replId,O=(0,o.Z)(),U=O.showConfirm,M=O.showError,X=(t=(0,w._)({},T,{variables:{replId:L}}),C.a(R,t)),F=X.data,W=X.loading,H=X.error,V=X.refetch,z=(0,r._)((n=(0,w._)({},T,{variables:{replId:L},onError:function(e){return M(e.message)},onCompleted:function(){return U("Join link created")}}),_.D(I,n)),2),j=z[0],q=z[1],J=(0,r._)((p=(0,w._)({},T,{variables:{replId:L},onError:function(e){return M(e.message)},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInviteLink.__typename){M(e.deleteMultiplayerInviteLink.message);return}"Repl"===e.deleteMultiplayerInviteLink.__typename&&U("Join link deleted")}}),_.D(D,p)),2),Y=J[0],K=J[1],$=(null==F?void 0:null===(m=F.repl)||void 0===m?void 0:m.__typename)==="Repl"?F.repl:null,Q=q.loading||K.loading,ee=(null==F?void 0:null===(Z=F.repl)||void 0===Z?void 0:Z.__typename)==="Repl"&&(null==$?void 0:null===(x=$.owner)||void 0===x?void 0:x.__typename)==="Team",et=(null==F?void 0:null===(S=F.repl)||void 0===S?void 0:S.__typename)==="Repl"&&(null==$?void 0:null===(k=$.owner)||void 0===k?void 0:k.__typename)==="Team"&&(null==$?void 0:null===(E=$.owner.capabilities)||void 0===E?void 0:E.isBusinessPlan)&&(null==$?void 0:null===(P=$.owner.capabilities)||void 0===P?void 0:P.hasValidSubscription),en=(null==F?void 0:null===(N=F.repl)||void 0===N?void 0:N.__typename)==="Repl"&&(null==$?void 0:$.inviteUrl)?window.location.origin+(null==$?void 0:$.inviteUrl):null;return W||ee&&!et?null:H?(0,i.BX)(h.G,{css:G.container,children:[(0,i.BX)(h.G,{css:G.header,children:[(0,i.tZ)(A,{}),(0,i.tZ)(d.r,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.tZ)(s.u,{css:[b.l0.textAlign.left],icon:(0,i.tZ)(y.Z,{color:b.TV.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return V({replId:L})}})]}):(0,i.BX)(h.G,{css:G.container,children:[(0,i.BX)(h.G,{css:G.header,children:[(0,i.tZ)(A,{}),W?(0,i.BX)(h.G,{css:G.loading,children:[(0,i.tZ)(g.Z,{color:b.TV.foregroundDimmer}),(0,i.tZ)(f.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.tZ)(d.r,{isSelected:!!en,isDisabled:Q,onChange:function(e){Q||(e?j():Y())},"aria-labelledby":"link-switch-label"})]}),!W&&en?(0,i.BX)(i.HY,{children:[(0,i.BX)(u.Tg,{css:G.inviteUrlContainer,children:[(0,i.tZ)(c.II,{type:"url",readOnly:!0,disabled:!0,value:Q?"Loading...":en,css:G.input}),(0,i.tZ)(B.q,{textToCopy:en,onClick:function(){en?((0,a.Z)(en),(0,l.j)(l.U3.JOIN_LINK_COPIED,{replId:null==$?void 0:$.id,isTeamRepl:ee,source:"replEnvironment"}),U("Link copied")):M("Could not copy link")},tooltipSuccessText:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.tZ)(v.Z,{}),css:G.copyToClipboard,colorway:"primary",disabled:Q})]}),(0,i.tZ)(h.G,{children:(0,i.BX)(f.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.tZ)("a",{css:b.l0.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key||(e.preventDefault(),Q||j())},onClick:function(e){e.preventDefault(),Q||j()},children:"Generate a new link"})]})})]}):null]})}},66415:function(e,t,n){n.d(t,{_U:function(){return A},ln:function(){return P},ZP:function(){return N}});var r=n(63257),i=n(74985),o=n(37053),a=n(38753),l=n(15605),c=n(64479),s=n(82230),u=n(64432),d=n(94778),f=n(98640),h=n(73789),p=n(29318),m=n(72093),v=n(42182),g=n(52425),y=n(85438),b=n(85421),w=n(51585),Z=n(14709),x=n.n(Z),C=n(41733),_=n(21262),S=n(71440),k=n(39064),E=n(58995);function T(){var e=(0,_._)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return T=function(){return e},e}var R={},I=(0,S.Ps)(T(),k.U4),D=n(36522),B=n(2619);function G(e,t){return t.some(function(t){return t.id===e})}var A={root:[m.l0.color.foregroundDefault,m.l0.flex.column,m.l0.colWithGap(12),m.l0.align.stretch,m.l0.flex.growAndShrink(1)],header:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center,m.l0.px(16)],header_mobile:[m.l0.px(0)],titleContainer:[m.l0.flex.row,m.l0.rowWithGap(4),m.l0.align.center],limitsContainer:[m.l0.align.center,m.l0.rowWithGap(8)],loading:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.grow(1),m.l0.justify.center],measureBar:[m.l0.height(8),m.l0.width(60)],searchContainer:[m.l0.px(16),m.l0.position.relative,m.l0.maxHeight(32)],userList:[m.l0.flex.column,m.l0.colWithGap(16),m.l0.scrollbar.thin,m.l0.position.relative,m.l0.overflowY("auto"),m.l0.flex.growAndShrink(1),m.l0.pb(8),{maxHeight:300,"::-webkit-scrollbar-thumb":[m.l0.backgroundColor.backgroundHighest,m.l0.borderRadius(4)],scrollbarColor:"".concat(m.TV.backgroundDefault," ").concat(m.TV.backgroundHighest)}],userGroup:{root:[m.l0.colWithGap(8)],titleContainer:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.px(16)],title:[m.l0.fontWeight.medium]},emptyContainer:[m.l0.position.relative,m.l0.flex.row,m.l0.rowWithGap(12),m.l0.py(64),m.l0.center,m.l0.px(16),{maxHeight:220,borderBottom:"solid 1px ".concat(m.TV.outlineDimmest)}]},P=function(e){var t=e.title,n=e.count,r=e.color,o=e.tooltip;return(0,i.BX)(d.G,{css:A.userGroup.titleContainer,children:[(0,i.tZ)(f.Z,{color:r,size:6}),(0,i.tZ)(s.xv,{variant:"small",css:A.userGroup.title,multiline:!1,children:t}),(0,i.tZ)(s.xv,{multiline:!1,variant:"small",color:"dimmest",css:A.userGroup.title,children:n}),o?(0,i.tZ)(u.u,{tooltip:o,children:(0,i.tZ)(h.Z,{})}):null]})},N=function(e){var t,n,u=e.replId,f=e.handleUpgradeTriggered,h=(0,b.useRouter)(),Z=(0,a.Gv)(h),_=(0,o.Z)({isMobileApp:Z,isTeam:!1,handleUpgradeTriggered:f,replId:u}),S=_.addOrInviteReplMultiplayer,k=_.loadingAddMutation,T=(0,g.aG)(),N=(t=(0,C._)({},R,{variables:{replId:u},pollInterval:8e3}),E.a(I,t)),L=N.data,O=N.loading,U=(null==L?void 0:L.repl.__typename)==="Repl"?L.repl:null,M=null==L?void 0:L.currentUser,X=(null!==(n=null==U?void 0:U.collaborators)&&void 0!==n?n:[]).reduce(function(e,t){var n=t.user;return(0,r._)(e).concat([n.username])},[]),F=(null==U?void 0:U.currentUserPermissions.editMultiplayers)||!1,W=!!(U&&!X.length&&!U.multiplayerInvites.length),H=null==U?void 0:U.collaborators.map(function(e){return e.user}).filter(function(e){return e.id!==(null==M?void 0:M.id)}),V=null==H?void 0:H.filter(function(e){return e&&G(e.id,T)}),z=null==H?void 0:H.filter(function(e){return e&&!G(e.id,T)}),j=H?H.length:null;return(0,i.BX)(c.Tg,{background:"default",css:A.root,children:[(0,i.BX)(d.G,{css:[A.header,Z&&A.header_mobile],children:[(0,i.tZ)(d.G,{css:A.titleContainer,children:(0,i.tZ)(s.xv,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,i.BX)(d.G,{css:A.limitsContainer,children:[O?(0,i.BX)(d.G,{css:A.loading,children:[(0,i.tZ)(p.Z,{color:m.TV.foregroundDimmer}),(0,i.tZ)(s.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,null===j||(null==M?void 0:M.isSubscribed)?null:(0,i.BX)(i.HY,{children:[(0,i.BX)(s.xv,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[j," / ",w.z]}),(0,i.tZ)(l.J,{css:A.measureBar,total:w.z,current:j,tooltip:"".concat(w.z-j," free editors remaining")})]}),O||(null==M?void 0:M.isSubscribed)||Z?null:(0,i.tZ)(v.Z,{size:"small",context:"workspace_multiplayer_header",onClickCallback:function(){f&&f(!0)},onCancel:function(){f&&f(!1)}})]})]}),F&&X&&U?(0,i.tZ)(d.G,{css:A.searchContainer,children:(0,i.tZ)(B.Z,{existingUsernames:X,onSubmit:function(e){(!O||(null==M?void 0:M.isSubscribed))&&(k||S({variables:{input:{replId:u,target:{method:x()(e)?y.ml.Email:y.ml.Username,value:e},level:y.gA.Rw}}}))}})}):null,W?(0,i.tZ)(d.G,{css:A.emptyContainer,children:(0,i.tZ)(d.G,{children:(0,i.tZ)(s.xv,{variant:"subheadDefault",color:"dimmer",multiline:!1,children:"No one else is here"})})}):(0,i.BX)(c.Tg,{css:A.userList,children:[(null==V?void 0:V.length)?(0,i.BX)(d.G,{css:A.userGroup.root,children:[(0,i.tZ)(P,{title:"Online",count:V.length||0,color:m.TV.greenStrongest}),V.map(function(e){return e?(0,i.tZ)(D.Z,{isPendingInvitation:!1,replId:u,canEditMultiplayers:F,user:e},e.id):null})]}):null,(null==z?void 0:z.length)?(0,i.BX)(d.G,{css:A.userGroup.root,children:[(0,i.tZ)(P,{title:"Offline",count:z.length||0,color:m.TV.outlineStrongest}),null==z?void 0:z.map(function(e){return e?(0,i.tZ)(D.Z,{canEditMultiplayers:F,isPendingInvitation:!1,user:e,replId:u},e.id):null})]}):null,(null==U?void 0:U.multiplayerInvites.length)?(0,i.BX)(d.G,{css:A.userGroup.root,children:[(0,i.tZ)(P,{title:"Pending Invitations",count:(null==U?void 0:U.multiplayerInvites.length)||0,color:m.TV.outlineStrongest}),U.multiplayerInvites.map(function(e){return(0,i.tZ)(D.Z,{canEditMultiplayers:F,replId:u,isPendingInvitation:!0,email:e.email},e.email)})]}):null]})]})}},36522:function(e,t,n){n.d(t,{Z:function(){return D}});var r=n(74985),i=n(38672),o=n(66626),a=n(43182),l=n(69170),c=n(41733),s=n(21262),u=n(71440),d=n(39064),f=n(99165);function h(){var e=(0,s._)(["\n  mutation RemoveMultiplayerUser($replId: String!, $username: String!) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,s._)(["\n  mutation DeleteMultiplayerInvite($replId: String!, $email: String!) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          collaborators {\n            user {\n              ...MultiplayerUser\n            }\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m={},v=(0,u.Ps)(h(),d.U4),g=(0,u.Ps)(p(),d.U4),y=function(){var e,t,n=(0,l.Z)(),r=n.showConfirm,i=n.showError,s=function(e,t){a.n_({message:t}),a.Tb(Error(e.message)),i("Something unexpected happened, please try again.")},u=(0,o._)((e=(0,c._)({},m,{onError:function(e){return s(e,"useRemoveMultiplayerUser")},onCompleted:function(e){var t,n=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;n?r("@".concat(n," removed")):r("User removed")}}),f.D(v,e)),2),d=u[0],h=u[1].loading,p=(0,o._)((t=(0,c._)({},m,{onError:function(e){return s(e,"useDeleteMultiplayerInviteMutation")},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInvite.__typename){i(e.deleteMultiplayerInvite.message);return}if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;r("Invite canceled for ".concat(t))}}}),f.D(g,t)),2);return{removeMultiplayerUser:d,loadingRemoveUser:h,deleteMultiplayerInvite:p[0],loadingDeleteInvite:p[1].loading}},b=n(85763),w=n(82230),Z=n(4276),x=n(94778),C=n(49224),_=n(44610),S=n(64318),k=n(72093),E=n(51950),T=n(47336),R=n.n(T),I=(0,C.X)({root:[k.l0.px(16),k.l0.py(4),k.l0.flex.row,k.l0.rowWithGap(8),k.l0.align.center,k.l0.cursor.default,k.l0.justify.spaceBetween],userContainer:k.l0.color.foregroundDefault,userContainer_pending:[k.l0.flex.grow(1),k.l0.flex.row,k.l0.rowWithGap(8),k.l0.align.center,{fontStyle:"italic"}],permissionsContainer:[k.l0.flex.row,k.l0.rowWithGap(8),k.l0.align.center]}),D=function(e){var t,n=e.isPendingInvitation,o=e.canEditMultiplayers,a=e.replId,l=y(),c=l.removeMultiplayerUser,s=l.loadingRemoveUser,u=l.deleteMultiplayerInvite,d=l.loadingDeleteInvite,f=!n,h=f?(0,r.tZ)(i.Z,{size:"m",url:e.user.image,username:e.user.username,fullName:e.user.fullName}):(0,r.tZ)(_.Z,{color:k.TV.outlineDefault,size:32}),p=f?e.user.username:e.email;return(0,r.BX)(x.G,{css:I.root,children:[f?(0,r.tZ)(E.Z,{username:e.user.username,children:(0,r.tZ)(R(),{legacyBehavior:!0,href:"/@".concat(e.user.username),passHref:!0,children:(0,r.tZ)(x.G,{tag:"a",css:I.userContainer,children:(0,r.tZ)(Z.n,{username:e.user.username,src:null!==(t=e.user.image)&&void 0!==t?t:null})})})}):(0,r.BX)(x.G,{css:[I.userContainer_pending],children:[h,(0,r.tZ)(w.xv,{color:f?"default":"dimmest",multiline:!1,children:p})]}),(0,r.BX)(x.G,{css:I.permissionsContainer,children:[(0,r.tZ)(w.xv,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),o?(0,r.tZ)(b.hU,{alt:f?"Remove member":"Cancel invitation",onClick:function(){!o||s||d||(f?c({variables:{replId:a,username:e.user.username}}):u({variables:{replId:a,email:e.email}}))},children:(0,r.tZ)(S.Z,{size:12})}):null]})]})}},2619:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(41733),i=n(30509),o=n(66626),a=n(74985),l=n(38672),c=n(14872),s=n(69170),u=n(15235),d=n(18060),f=n(64479),h=n(82230),p=n(94778),m=n(49224),v=n(59947),g=n(29318),y=n(72093),b=n(56731),w=n(21371),Z=n(50959),x=n(14709),C=n.n(x),_=n(27405),S=(0,m.X)({form:[y.l0.align.start,y.l0.display.flex,y.l0.rowWithGap(8),y.l0.width("100%")],searchContainer:[y.l0.position.relative,y.l0.flex.growAndShrink(1)],dropdownMenu:[y.l0.borderRadius(8),y.l0.overflow("hidden"),y.l0.mt(2),y.l0.zIndex(2),y.l0.border({color:y.TV.outlineDimmer,width:1,style:"solid"}),y.l0.maxHeight(280),y.l0.overflowY("auto"),y.l0.scrollbar.thin,{scrollbarColor:y.TV.backgroundHigher+" "+y.TV.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:y.TV.backgroundHighest}}],result:[y.l0.p(8),y.l0.rowWithGap(8),y.l0.justify.spaceBetween,y.l0.align.center,y.l0.cursor.pointer],result_active:[y.l0.backgroundColor.accentPrimaryDimmer],userContainer:[y.l0.rowWithGap(8),y.l0.align.center],loadingContainer:[y.l0.align.center,y.l0.m(8),y.l0.rowWithGap(8),y.l0.align.center],emptyText:[y.l0.m(8)]});function k(e){var t=e.onSubmit,n=e.existingUsernames,m=e.isDisabled,x=e.onChange,k=e.placeholder,E=(0,o._)((0,Z.useState)(""),2),T=E[0],R=E[1],I=(0,b.U)(),D=(0,c.Z)(T.trim().replace(/^@/,""),250),B=(0,_.sk)({skip:!D||C()(T),variables:{query:D,limit:6}}),G=B.data,A=B.loading,P=B.error,N=(0,s.Z)().showError;(0,Z.useEffect)(function(){P&&N(P.message)},[P,N]);var L=null==G?void 0:G.usernameSearch,O=function(e){R(e.currentTarget.value),null==x||x(e.currentTarget.value)},U=function(e){"Enter"===e.key&&T.match(/.+@.+/)&&(t(T),R(""),e.currentTarget.blur())};return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),t(T),R("")},css:S.form,children:[(0,a.tZ)(w.ZP,{onChange:function(e){e&&R(e.username)},itemToString:function(e){return(null==e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var t=e.getInputProps,o=e.getItemProps,c=e.getMenuProps,s=e.isOpen,u=e.highlightedIndex,m=e.getRootProps;return(0,a.BX)(p.G,(0,i._)((0,r._)({css:S.searchContainer},m({refKey:"innerRef"})),{children:[(0,a.tZ)(d.II,(0,r._)({id:I("username-search")},t({ref:null,value:T,onChange:O,placeholder:null!=k?k:"Add people by username or email",autoComplete:"off",onKeyDown:U}))),s?(0,a.BX)(p.G,{children:[L&&L.length?(0,a.tZ)(f.Tg,(0,i._)((0,r._)({elevated:!0,css:S.dropdownMenu,tag:"ul"},c({refKey:"innerRef"})),{children:L.map(function(e,t){return(0,a.BX)(p.G,(0,i._)((0,r._)({tag:"li"},o({item:e,index:t})),{css:[S.result,t===u&&S.result_active],children:[(0,a.BX)(p.G,{css:S.userContainer,children:[(0,a.tZ)(l.Z,{size:"m",url:e.image,username:e.username,fullName:e.fullName}),(0,a.tZ)(h.xv,{multiline:!1,children:e.username})]}),n.includes(e.username)?(0,a.tZ)(p.G,{children:(0,a.tZ)(v.Z,{color:y.TV.accentPositiveStronger})}):null]}),t)})})):null,A?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(p.G,{css:S.loadingContainer,children:[(0,a.tZ)(g.Z,{}),(0,a.tZ)(h.xv,{color:"dimmer",multiline:!1,children:"Loading…"})]})}):null,L&&0===L.length?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(h.xv,{css:S.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',T,'"']})}):null]}):null]}))}}),(0,a.tZ)(p.G,{children:(0,a.tZ)(u.zx,{colorway:"primary",type:"submit",disabled:m||!T,text:"Invite"})})]})}},79834:function(e,t,n){n.d(t,{ip:function(){return A},jy:function(){return P},Km:function(){return G},r9:function(){return B}});var r=n(27387),i=n(41733),o=n(30509),a=n(66626),l=n(96583),c=n(74985),s=n(59786),u=n(75958),d=n(8605),f=n(50959),h=n(61262),p=n(46547),m=n(12285),v=n(4955),g=n(9670),y=n(86583),b=n(91620).lW,w=Uint8Array.from([255,255]),Z=Uint8Array.from([0,0]);function x(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var C=function(){"use strict";function e(t){var n=this;(0,m._)(this,e),this.pendingWsRequest=null,this.ws=null,this.crosisWs=null,this.pid2Ws=null,this.crosisBuffer=[],this.pid2Buffer=[],this.wsGetter=function(){return t().then(function(e){return n.crosisBuffer=[],n.pid2Buffer=[],e})},this.pendingWsRequest=this.wsGetter()}var t=e.prototype;return t.close=function(e,t){var n,r;this.unbindCrosisWebSocket(e,t),this.unbindPid2WebSocket(e,t),null===(n=this.ws)||void 0===n||n.close(),this.ws=null,null===(r=this.pendingWsRequest)||void 0===r||r.then(function(e){e.close()}),this.pendingWsRequest=null},t.setupWs=function(e){var t=this,n=this.crosisWs,r=this.pid2Ws;e.onopen=function(i){if(n){var o;n.readyState=y.Z.OPEN,null===(o=n.onopen)||void 0===o||o.call(n,new Event("open"))}r&&(r.readyState=y.Z.OPEN,r.onopen(i)),t.ws=e},e.readyState===e.OPEN&&e.onopen({target:e}),e.onclose=function(e){t.close(e.code,e.reason)},e.onerror=function(e){var t;null==n||null===(t=n.onerror)||void 0===t||t.call(n,new Event("error")),null==r||r.onerror(e)},e.onmessage=function(e){var i,o=new Uint8Array(e.data),a=o.slice(0,2),l=b.from(o.slice(2));if(x(a,w)){if(!r){t.pid2Buffer.push(l);return}r.onmessage({type:"message",data:l,target:r})}else if(x(a,Z)){if(!n){t.crosisBuffer.push(l);return}null===(i=n.onmessage)||void 0===i||i.call(n,new MessageEvent("message",{data:l}))}else{var c=b.from(a).toString("hex");throw Error("unknown demux bit: 0x".concat(c))}}},t.bindPid2WebSocket=function(e){var t=this;return(0,r._)(function(){var n,r,i,o,a,c,s,u;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return null!==(n=t.pendingWsRequest)&&void 0!==n||(t.pendingWsRequest=t.wsGetter()),[4,t.pendingWsRequest];case 1:r=l.sent(),t.pid2Ws=e,t.setupWs(r),i=!0,o=!1,a=void 0;try{for(c=t.pid2Buffer[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)u=s.value,e.onmessage({type:"message",data:u,target:e})}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t.pid2Buffer=[],[2]}})})()},t.bindCrosisWebSocket=function(e){var t=this;return(0,r._)(function(){var n,r,i,o,a,c,s,u,d;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return null!==(n=t.pendingWsRequest)&&void 0!==n||(t.pendingWsRequest=t.wsGetter()),[4,t.pendingWsRequest];case 1:r=l.sent(),t.crosisWs=e,t.setupWs(r),i=!0,o=!1,a=void 0;try{for(c=t.crosisBuffer[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)u=s.value,null===(d=e.onmessage)||void 0===d||d.call(e,new MessageEvent("message",{data:u}))}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t.crosisBuffer=[],[2]}})})()},t.unbindPid2WebSocket=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pid2Ws;n&&(n.onclose({target:n,code:null!=e?e:1e3,reason:null!=t?t:"",wasClean:1e3===e}),n.readyState=y.Z.CLOSED,this.pid2Ws=null)},t.unbindCrosisWebSocket=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.crosisWs;r&&(null===(n=r.onclose)||void 0===n||n.call(r,new CloseEvent("close",{code:e,reason:t})),r.readyState=y.Z.CLOSED,this.crosisWs=null)},t.getPid2WebSocketClass=function(){var e=this;return this.unbindPid2WebSocket(),function(t){(0,v._)(r,t);var n=(0,g._)(r);function r(){return(0,m._)(this,r),n.call(this,e)}return r}(S)},t.getCrosisWebSocketClass=function(){var e=this;return this.unbindCrosisWebSocket(),function(t){(0,v._)(r,t);var n=(0,g._)(r);function r(){return(0,m._)(this,r),n.call(this,e)}return r}(_)},t.send=function(e){if(!this.ws)throw Error("invariant broken: underlying ws is not initialized");this.ws.send(e)},e}(),_=function(){"use strict";function e(t){(0,m._)(this,e),this.mux=t,this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.onmessage=null,this.onopen=null,this.onclose=null,this.onerror=null,this.binaryType="arraybuffer",this.readyState=this.CONNECTING,this.bufferedAmount=0,this.extensions="",this.protocol="pid2",this.url="pid2://fake",this.mux.bindCrosisWebSocket(this)}var t=e.prototype;return t.send=function(e){if(this.readyState===this.CONNECTING)throw Error("WebSocket is not open");this.readyState!==this.CLOSING&&this.readyState!==this.CLOSED&&this.mux.send(b.concat([Z,b.from(e)]))},t.close=function(e,t){this.mux.close(e,t)},t.addEventListener=function(){throw Error("Method `addEventListener` not implemented.")},t.removeEventListener=function(){throw Error("Method `removeEventListener` not implemented.")},t.dispatchEvent=function(){throw Error("Method `dispatchEvent` not implemented.")},e}();_.CONNECTING=0,_.OPEN=1,_.CLOSING=2,_.CLOSED=3;var S=function(){"use strict";function e(t){(0,m._)(this,e),this.mux=t,this.binaryType="arraybuffer",this.bufferedAmount=0,this.extensions="",this.protocol="pid2",this.url="pid2://fake",this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=WebSocket.CONNECTING,this.onclose=function(){},this.onerror=function(){},this.onmessage=function(){},this.onopen=function(){},this.mux.bindPid2WebSocket(this)}var t=e.prototype;return t.send=function(e){if(this.readyState===this.CONNECTING)throw Error("WebSocket is not open");this.readyState!==this.CLOSING&&this.readyState!==this.CLOSED&&this.mux.send(b.concat([w,b.from(e)]))},t.close=function(e,t){this.mux.close(e,t)},t.addEventListener=function(){throw Error("Method `addEventListener` not implemented.")},t.removeEventListener=function(){throw Error("Method `removeEventListener` not implemented.")},t.dispatchEvent=function(){throw Error("Method `dispatchEvent` not implemented.")},t.ping=function(){throw Error("Method `ping` not implemented.")},t.pong=function(){throw Error("Method `pong` not implemented.")},t.terminate=function(){throw Error("Method `terminate` not implemented.")},t.on=function(){throw Error("Method `on` not implemented.")},t.once=function(){throw Error("Method `once` not implemented.")},t.off=function(){throw Error("Method `off` not implemented.")},t.addListener=function(){throw Error("Method `addListener` not implemented.")},t.removeListener=function(){throw Error("Method `removeListener` not implemented.")},t.removeAllListeners=function(){throw Error("Method `removeAllListeners` not implemented.")},t.setMaxListeners=function(){throw Error("Method `setMaxListeners` not implemented.")},t.getMaxListeners=function(){throw Error("Method `getMaxListeners` not implemented.")},t.listeners=function(){throw Error("Method `listeners` not implemented.")},t.rawListeners=function(){throw Error("Method `rawListeners` not implemented.")},t.emit=function(){throw Error("Method `emit` not implemented.")},t.listenerCount=function(){throw Error("Method `listenerCount` not implemented.")},t.prependListener=function(){throw Error("Method `prependListener` not implemented.")},t.prependOnceListener=function(){throw Error("Method `prependOnceListener` not implemented.")},t.eventNames=function(){throw Error("Method `eventNames` not implemented.")},e}(),k=n(9253),E=n(1813),T=n(52623),R=n(36556),I=(0,f.createContext)(null),D=(0,f.createContext)(null);function B(){return(0,f.useContext)(I)}function G(){return(0,f.useContext)(D)}function A(e){return(0,s.P5)({controlName:"flag-pid2",logFlagToAnalytics:!1})?(0,c.tZ)(N,(0,o._)((0,i._)({},e),{children:(0,c.tZ)(O,(0,o._)((0,i._)({},e),{children:e.children}))})):(0,c.tZ)(c.HY,{children:e.children})}function P(){var e;return null!==(e=u.Z.get("pid2Version","string"))&&void 0!==e?e:"d27252478990fb30da11e9645326b36bf15c8f39"}function N(e){var t,n=e.replId,i=e.children,o=(0,f.useRef)(),s=(0,f.useCallback)((t=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:return e={replId:n,isLoggedIn:!0,pid2Version:P()},[4,(0,p.Z)()];case 1:return[2,h.Z.apply(void 0,[(e.overrideClusterMetadata=t.sent(),e)])]}})}),function(){return t.apply(this,arguments)}),[n]),u=(0,a._)((0,f.useState)(new C((0,r._)(function(){var e,t,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,s()];case 1:return e=r.sent(),o.current=e,(t=new URL(e.gurl)).pathname="/wsv2/".concat(e.token),t.search="?meta_protocol=".concat("v1"),(n=new y.Z(t.toString())).binaryType="arraybuffer",[2,n]}})}))),1)[0];(0,f.useEffect)(function(){return function(){u.close()}},[u]);var d=(0,f.useMemo)(function(){var e;return u?{muxer:u,getCachedConnectionMetadata:(e=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:if(o.current)return[2,o.current];return[4,s()];case 1:return e=t.sent(),o.current=e,[2,e]}})}),function(){return e.apply(this,arguments)})}:null},[u,s]);return(0,c.tZ)(D.Provider,{value:d,children:i})}var L=R.kg.info;function O(e){var t=e.clientName,n=e.replId,r=e.children,l=(0,E.uV)(),s=(0,f.useContext)(D),u=(0,a._)((0,f.useState)(!1),2),h=u[0],p=u[1],m=(0,a._)((0,f.useState)(null),2),v=m[0],g=m[1];return((0,f.useEffect)(function(){var e=function(e){e.type===d.bL.HandshakeFailed?p(!0):l((0,o._)((0,i._)({},e),{error:Error(e.message),tags:{pid2:!0},origin:"pid2: RiverClientProvider"})),a.transport.tryReconnecting=!1},n=function(){"visible"===document.visibilityState?(a.transport.tryReconnecting=!0,0===a.transport.connections.size&&a.transport.connect(d.o_)):a.transport.tryReconnecting=!1};if(s&&document){var r=s.muxer.getPid2WebSocketClass(),a=(0,d.ZP)("".concat(t,"-").concat((0,k.x0)(8)),L,function(){return Promise.resolve(new r)});return a.transport.connect(d.o_),g(a),a.transport.addEventListener("protocolError",e),document.addEventListener("visibilitychange",n),function(){a.transport.removeEventListener("protocolError",e),a.transport.close(),document.removeEventListener("visibilitychange",n)}}},[t,n,s,l]),s&&v)?(0,c.BX)(I.Provider,{value:v,children:[(0,c.tZ)(T.Z,{isOpen:h}),r]}):(0,c.tZ)(c.HY,{children:r})}},37715:function(e,t,n){n.d(t,{U:function(){return l}});var r=n(63257),i=n(79834),o=n(74309),a=n(50959);function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,i.r9)(),l=(0,o.G)();return(0,a.useMemo)(function(){return n&&l?e(n.client,l):null},[n,l].concat((0,r._)(t)))}},92443:function(e,t,n){n.d(t,{L:function(){return l}});var r=n(63257),i=n(50959),o=n(79834),a=n(74309);function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,o.r9)(),l=(0,a.G)();(0,i.useEffect)(function(){if(n&&l){var t=e(n.client,l);return function(){null==t||t()}}},[n,l].concat((0,r._)(t)))}},74309:function(e,t,n){n.d(t,{G:function(){return l}});var r=n(66626),i=n(79834),o=n(8605),a=n(50959);function l(){var e=(0,i.r9)(),t=(0,r._)((0,a.useState)(null),2),n=t[0],l=t[1];return(0,a.useEffect)(function(){var t=function(e){"connect"===e.status?l(e.session):l(null)};if(e){var n=e.transport.sessions.get(o.o_);return n&&t({status:"connect",session:n}),e.transport.addEventListener("sessionStatus",t),function(){e.transport.removeEventListener("sessionStatus",t)}}},[e]),n}},71481:function(e,t,n){n.d(t,{e9:function(){return h},wd:function(){return d}});var r=n(41733),i=n(21262),o=n(71440),a=n(72175),l=n(58995);function c(){var e=(0,i._)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(s());function h(e){var t=(0,r._)({},u,e);return l.a(f,t)}},47745:function(e,t,n){n.d(t,{Z:function(){return d},_:function(){return p}});var r=n(66626),i=n(74985),o=n(27022),a=n(72093),l=n(30124),c=n(85447),s=n(24857),u=n(50959);function d(e){var t=(0,r._)((0,u.useState)(!1),2),n=t[0],o=t[1],a=[],d=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,h=!0,m=!1,v=void 0;try{for(var g,y=e.variables[Symbol.iterator]();!(h=(g=y.next()).done);h=!0){var b=g.value;b.parentVariableReference===f?a.push(b):d.push(b)}}catch(e){m=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw v}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(s.gC,{align:"stretch",constrainWidth:!0,children:[a.map(function(t){return(0,i.tZ)(p,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}),d.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(l.Z,{filled:!1,border:!1,onClick:function(){return o(function(e){return!e})},children:["See ",n?"Less":"More"]}),n&&d.map(function(t){return(0,i.tZ)(p,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})]})]})]})}function f(e){var t=e.variable,n=e.expanded;return t.variablesReference>0?(0,i.tZ)("div",{css:[a.l0.transition.snappy,{transform:"rotate(".concat(n?0:-90,"deg)")}],children:(0,i.tZ)(o.Z,{})}):null}function h(e){var t=e.expanded,n=e.depth,r=e.variable;return 0!==n||"parentVariableReference"in r?(0,i.tZ)("div",{css:[a.l0.flex.grow(0),a.l0.flex.shrink(0),a.l0.width(a.TV.space16),a.l0.display.flex,a.l0.align.center,a.l0.justify.end],children:(0,i.tZ)(f,{expanded:t,variable:r})}):(0,i.tZ)(f,{expanded:t,variable:r})}function p(e){var t=e.depth,n=e.variable,o=e.client,a=(0,r._)((0,u.useState)(!1),2),l=a[0],c=a[1],d=(0,r._)((0,u.useState)([]),2),f=d[0],m=d[1];return(0,u.useEffect)(function(){l&&o.fetchVariables(n.variablesReference).then(function(e){return m(e)},function(){return c(!1)})},[l,o,n.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{className:"variable",onClick:function(){n.variablesReference>0&&c(function(e){return!e})},css:{"&":{display:"flex",alignItems:"center",maxWidth:"100%",height:"var(--space-32)",minHeight:"var(--space-32)",cursor:"pointer",color:"var(--foreground-dimmer)",borderRadius:"var(--border-radius-4)",fontSize:"var(--font-size-default)",paddingLeft:"calc(".concat(t," * var(--space-16))"),fontFamily:"var(--font-family-code)"},"&:hover":{backgroundColor:"var(--background-higher)",color:"var(--foreground-default)"},".label":{fontSize:"var(--font-size-default)",paddingLeft:"var(--space-8)",paddingRight:"var(--space-8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:"1 0 auto"},".type":{opacity:"0.5"},".value":{textAlign:"right",flexShrink:1}},children:[(0,i.tZ)(h,{expanded:l,variable:n,depth:t}),(0,i.BX)("div",{className:"label",children:[n.name,n.type?(0,i.BX)("span",{className:"type",children:[" ",n.type]}):null,""!==n.value&&": "]}),(0,i.tZ)("div",{className:"label value",children:(0,i.tZ)("pre",{children:n.value})})]}),l?(0,i.tZ)(s.gC,{align:"stretch",constrainWidth:!0,children:f.map(function(e){return(0,i.tZ)(p,{depth:t+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)})}):null]})}},74767:function(e,t,n){n.d(t,{M:function(){return i}});var r=n(32317),i={overlay:r.Is+20,gutterActive:r.Is+19,maximizedTooltip:r.Is+18,maximizedPane:r.Is+17,maximizedHeader:r.Is+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,dropPreview:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1}},13621:function(e,t,n){var r,i;n.d(t,{y:function(){return r}}),(i=r||(r={})).Welcome="Welcome",i.Editor="Editor",i.Examples="Examples",i.Run="Run",i.Output="Output",i.Sidepane="Sidepane",i.Share="Share"},57100:function(e,t,n){n.d(t,{d:function(){return l}});var r=n(21262),i=n(71440),o=n(4318);function a(){var e=(0,r._)(["\n  fragment BulkDeleteConfirmationModalRepl on Repl {\n    id\n    iconUrl\n    title\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ...BuildStatusBadgeHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o.u)},33146:function(e,t,n){var r=n(66626),i=n(74985),o=n(23129),a=n(32622),l=n(72333),c=n(15235),s=n(18060),u=n(45271),d=n(99236),f=n(82230),h=n(94778),p=n(49224),m=n(55821),v=n(87128),g=n(72093),y=n(50959),b=(0,p.X)({wrapper:[g.l0.colWithGap(16)],repls:[g.l0.maxHeight("60vh"),g.l0.overflow("auto"),{"& > div":[g.l0.py(8),{borderTop:"1px solid "+g.TV.outlineDimmest}],"& > div:last-of-type":{borderBottom:"1px solid "+g.TV.outlineDimmest}}],row:[g.l0.colWithGap(8)],replRow:[g.l0.rowWithGap(8),g.l0.align.center],additionalReplsCount:[g.l0.pl(12),g.l0.pt(8)],buttons:[g.l0.rowWithGap(12),g.l0.justify.end]}),w=function(e){var t,n=e.repl,a=e.onConfirmedChange,c=(0,r._)((0,y.useState)(""),2),u=c[0],p=c[1],m=(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?n.hostingDeployment:null,g=(0,y.useRef)(!1),w=(null==m?void 0:m.replitAppSubdomain)?m.replitAppSubdomain:n.title;return(0,i.BX)(h.G,{css:b.row,children:[(0,i.BX)(h.G,{css:b.replRow,children:[(0,i.tZ)(l.ZP,{size:24,iconUrl:n.iconUrl,alt:""}),(0,i.tZ)(f.xv,{height:"singleLine",multiline:!1,children:n.title}),m?(0,i.tZ)(o.e,{deployment:m}):null]},n.id),m?(0,i.BX)(i.HY,{children:[(0,i.tZ)(d.E,{icon:(0,i.tZ)(v.Z,{}),colorway:"red",text:"This repl has been deployed. If you delete this Repl, the associated\nproduction deployment will also be shut down and deleted. To\nproceed, please type: ".concat(w)}),(0,i.tZ)(s.II,{placeholder:"Type here",value:u,onChange:function(e){var t=e.currentTarget.value;p(t);var n=t===w;n!==g.current&&a(n),g.current=n}})]}):null]})};t.Z=function(e){var t=e.selectedRepls,n=e.isOpen,o=e.onClose,l=e.onDelete,s=e.deleting,d=t.length,p=(0,a.Z)("Repl",d),v=t.filter(function(e){var t;return(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"}).length,g=(0,a.Z)("Deployment",v),Z=v>0?" & ".concat(v>1?v+" ":""," ").concat(g):"",x=(0,r._)((0,y.useState)(0),2),C=x[0],_=x[1];return(0,y.useEffect)(function(){n||_(0)},[n]),(0,i.tZ)(u.u,{isOpen:n,onRequestClose:o,children:(0,i.BX)(h.G,{css:b.wrapper,children:[(0,i.BX)(f.h4,{variant:"subheadBig",level:2,children:["Delete ",p,v>0?" & ".concat(g):"","?"]}),(0,i.tZ)(f.xv,{color:"dimmer",children:"Are you sure? This cannot be undone. Some Repls may take a few minutes to finish deleting."}),(0,i.tZ)(h.G,{css:b.repls,children:t.map(function(e){return(0,i.tZ)(w,{css:b.row,repl:e,onConfirmedChange:function(e){return _(function(t){return t+(e?1:-1)})}},e.id)})}),(0,i.BX)(h.G,{css:b.buttons,children:[(0,i.tZ)(c.zx,{text:"Cancel",onClick:o,disabled:s}),(0,i.tZ)(c.zx,{iconLeft:(0,i.tZ)(m.Z,{}),onClick:l,disabled:s||C<v,text:"Yes, delete ".concat(d>1?d+" ":""," ").concat(p).concat(Z),colorway:"negative"})]})]})})}},21068:function(e,t,n){n.d(t,{Zo:function(){return k},av:function(){return Z},xV:function(){return _}});var r=n(41733),i=n(30509),o=n(98924),a=n(66626),l=n(74985),c=n(50959),s=n(49224),u=n(72093),d=n(1169),f=n(94778),h=n(59520),p=n(19068),m=n(82230),v=n(32883),g=n(27879),y=n(61694),b=n(64479),w=function(){var e=(0,a._)((0,c.useState)(!1),2),t=e[0],n=e[1],r=(0,a._)((0,c.useState)({x:0,y:0}),2);return{clicked:t,setClicked:n,points:r[0],setPoints:r[1]}},Z=function(){var e=w(),t=e.clicked,n=e.setClicked,o=e.points,a=e.setPoints;(0,c.useEffect)(function(){var e=function(){return n(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[n]);var l=(0,c.useCallback)(function(e){var t=e.x,r=e.y;n(!0),a({x:t,y:r})},[n,a]),s=(0,c.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),l({x:e.clientX,y:e.clientY})},[l]),u=(0,c.useCallback)(function(){n(!1)},[n]);return{triggerProps:{onContextMenu:s},menuProps:(0,i._)((0,r._)({},o),{isOpen:t}),onClose:u,open:l}},x=(0,s.X)({menu:[u.l0.position.fixed,u.l0.flex.column,u.l0.borderRadius(8),u.l0.shadow(1),{"& > :first-child":[u.l0.borderRadius(8,8,0,0)],"& > :last-child":[u.l0.borderRadius(0,0,8,8)]}],item:[u.l0.reset.button,{'&:not([disabled]):not([aria-disabled="true"])':[p.gU.listItem],'&[disabled], &[aria-disabled="true"]':[u.l0.color.foregroundDimmest]},u.l0.p(8),u.l0.rowWithGap(8),u.l0.align.center],underlay:[u.l0.position.fixed,{top:0,left:0,bottom:0,right:0}]}),C=function(e){e.preventDefault()},_=function(e){var t=e.children,n=e.isOpen,a=e.defaultOpen,s=e.onOpenChange,u=e.x,f=e.y,h=(0,o._)(e,["children","isOpen","defaultOpen","onOpenChange","x","y"]),p=(0,g.d)({isOpen:n,defaultOpen:a,onOpenChange:s}),m=(0,c.useRef)(null),w=(0,v.NE)({},p,m),Z=w.modalProps,_=w.underlayProps;return n?(0,l.tZ)(v.aV,{portalContainer:document.body,children:(0,l.tZ)("div",(0,i._)((0,r._)({css:x.underlay},_),{onContextMenu:C,children:(0,l.tZ)(y.ZP,{children:(0,l.tZ)(b.Tg,(0,i._)((0,r._)({elevated:!0,css:x.menu},Z,h),{innerRef:m,tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",style:{left:u,top:f},children:(0,l.tZ)(d.uP,{options:{direction:"vertical"},children:t})}))})}))}):null},S=f.K.button,k=c.forwardRef(function(e,t){var n=e.children,s=e.iconLeft,u=e.isDisabled,f=void 0!==u&&u,p=e.onClick,v=(0,o._)(e,["children","iconLeft","isDisabled","onClick"]),g=(0,c.useRef)(null),y=(0,a._)((0,d.XZ)(g,f),4),b=y[0],w=y[1],Z=y[2],C=y[3];(0,d.Ym)(w,g);var _=(0,c.useCallback)(function(e){f||(C(),null==p||p(e))},[C,f,p]);return(0,l.BX)(S,(0,i._)((0,r._)({disabled:f,css:x.item,role:"menuitem",ref:(0,h.lq)(t,g),tabIndex:b,onKeyDown:Z,onClick:_},v),{children:[s,(0,l.tZ)(m.xv,{multiline:!1,children:n})]}))})},31741:function(e,t,n){n.d(t,{cp:function(){return f},qQ:function(){return d}});var r=n(41733),i=n(30509),o=n(98924),a=n(74985),l=n(43312),c=n(72093),s=n(50959),u=n(36759),d=(0,l.iv)([c.l0.color.accentNegativeStronger]),f=(0,s.forwardRef)(function(e,t){var n=e.dataCy,l=(0,o._)(e,["dataCy"]);return(0,a.tZ)(u.cp,(0,i._)((0,r._)({},l),{"data-cy":n,css:d,ref:t}))})},90029:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(74985);n(50959);var i=n(72093),o=n(64479);function a(e){var t=e.className,n=e.children;return(0,r.tZ)(o.Tg,{elevated:!0,tag:"span",css:[{display:"inline",lineHeight:1},i.l0.fontSize(i.TV.fontSizeSmall),i.l0.borderRadius(4),i.l0.px(4),i.l0.font.code,t],children:n})}},15605:function(e,t,n){n.d(t,{J:function(){return g}});var r=n(41733),i=n(30509),o=n(98924),a=n(74985),l=n(43312),c=n(11120),s=n(49224),u=n(19068),d=n(99266),f=n(72093),h=n(64432),p=n(94778),m=(0,l.F4)("from{opacity:0}to{opacity:1}"),v=(0,s.X)({self:[f.l0.flex.row,f.l0.flex.growAndShrink(1),f.l0.height(f.TV.space12),f.l0.borderRadius(16),f.l0.position.relative,u.gU.filledAndOutlined],progressWrapper:[f.l0.flex.row,f.l0.flex.growAndShrink(1),f.l0.height("100%"),f.l0.width("100%"),f.l0.borderRadius(16),f.l0.overflow("clip"),f.l0.position.relative],progress:[f.l0.position.relative,f.l0.width("100%"),f.l0.height("100%"),{top:0,left:0}],loading:d.p.backgroundPulse(),smoke:[f.l0.width("100%"),f.l0.height("500%"),f.l0.position.absolute,f.l0.left("50%"),f.l0.top("100%"),{opacity:.4,transition:"1s opacity",transform:"translate(-50%, -100%)",pointerEvents:"none"}],fadeInAnim:{animation:"".concat(m," 120ms forwards ease-out alternate")}});function g(e){var t,n=e.total,s=e.tooltip,u=e.className,d=e.disabled,f=void 0!==d&&d,m=e.smoke,g=void 0!==m&&m,b=e.loading,w=void 0!==b&&b,Z=e.tooltipHidden,x=(0,o._)(e,["total","tooltip","className","disabled","smoke","loading","tooltipHidden"]),C=!(0,c.T)(),_=null;return s?_=s:"current"in x?_="".concat(x.current||"0","/").concat(n):"data"in x&&(_=null===(t=x.data)||void 0===t?void 0:t.map(function(e){var t=e.current;return"".concat(t||"0","/").concat(n)}).join(" | ")),(0,a.tZ)(h.u,{placement:"top",tooltip:_,maxWidth:280,isDisabled:w||void 0!==Z&&Z,children:function(e,t){var o,c;return w?o=null:"current"in x&&x.current?o=(0,a.tZ)(y,{total:n,disabled:f,current:x.current,color:x.color}):"data"in x&&(o=null===(c=x.data)||void 0===c?void 0:c.map(function(e,t){var o;return(0,l.az)(y,(0,i._)((0,r._)({},e),{key:"measure-bar-".concat(t),total:n,disabled:f,isLast:t+1===(null===(o=x.data)||void 0===o?void 0:o.length)}))})),(0,l.az)(p.G,(0,i._)((0,r._)({},e),{css:[v.self,v.fadeInAnim,w&&v.loading],className:u,innerRef:t,onClick:void 0,key:w?"loadingMeasureBar":"finishedLoadingMeasureBar",role:"group",children:[(0,a.tZ)(p.G,{css:v.progressWrapper,children:o},"measureBarProgress"),C?(0,a.tZ)("img",{src:"/public/images/smoke.gif",alt:"",style:{opacity:g?void 0:0},css:v.smoke},"measureBarSmoke"):null]}))}})}function y(e){var t=e.current,n=e.total,i=e.color,o=void 0===i?f.TV.accentPrimaryDefault:i,l=e.disabled,c=e.isLast,s=(0,r._)({backgroundColor:void 0!==l&&l?f.TV.outlineDefault:o,width:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===t||0===e?0:Math.max(0,Math.min(100,e/t*100))}(t,n)+"%"},void 0!==c&&c?{borderTopRightRadius:f.TV.borderRadiusRound,borderBottomRightRadius:f.TV.borderRadiusRound}:{});return(0,a.tZ)(p.G,{css:v.progress,style:s,role:"meter","aria-label":"".concat(t," out of ").concat(n),"aria-valuemin":0,"aria-valuenow":t,"aria-valuemax":n})}},15758:function(e,t,n){n.d(t,{T:function(){return u}});var r=n(41733),i=n(30509),o=n(98924),a=n(74985);n(50959);var l=n(94778),c=n(8261),s=l.K.button;function u(e){var t=e.iconLeft,n=e.iconRight,l=e.text,u=e.innerRef,d=e.colorway,f=(0,o._)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.BX)(s,(0,i._)((0,r._)({ref:u},f),{css:[(0,c.E)({colorway:d,clickable:!0,variant:"filled",iconLeft:!!t,iconRight:!!n}),{color:"inherit"}],children:[t,(0,a.tZ)("span",{children:l}),n]}))}},26246:function(e,t,n){n.d(t,{FE:function(){return m},nv:function(){return p}});var r=n(41733),i=n(30509),o=n(98924),a=n(74985),l=n(43312),c=n(82230),s=n(72093),u=n(50959),d=n(59520),f=n(36759),h=(0,l.iv)([s.l0.viewStyle,s.l0.colWithGap(4)]),p=(0,u.forwardRef)(function(e,t){var n=e.dataCy,l=(0,o._)(e,["dataCy"]);return(0,a.tZ)(f.nv,(0,i._)((0,r._)({},l),{"data-cy":n,ref:t,css:h}))}),m=(0,u.forwardRef)(function(e,t){var n=e.variant,l=e.color,s=(0,o._)(e,["variant","color"]),u=(0,f.jn)(f.jV,"description");return(0,a.tZ)(c.xv,(0,i._)((0,r._)({},(0,d.dG)(s,{variant:void 0===n?"small":n,color:void 0===l?"dimmer":l},u)),{ref:t}))})},23987:function(e,t,n){n.d(t,{O:function(){return p}});var r=n(74985),i=n(60199),o=n(70501),a=n(64318),l=n(72143),c=n(15235),s=n(80012),u=n(85763),d=n(82230),f=n(94778),h=n(72093);function p(e){var t=e.title,n=e.content,l=e.colorway,p=void 0===l?"primary":l,v=e.totalSteps,g=void 0===v?1:v,y=e.currentStepIndex,b=void 0===y?0:y,w=e.onDismiss,Z=e.onCurrentStepChange,x=e.cypressCloseData;return(0,r.BX)(f.G,{css:[h.l0.p(8),{paddingBottom:12,paddingRight:t?void 0:32,backgroundColor:s.Br[p].dimmest,border:"1px solid "+s.Br[p].dimmer,position:"relative"},h.l0.borderRadius(8),h.l0.shadow(2),h.l0.colWithGap(8)],children:[(0,r.tZ)(u.hU,{alt:"Close",colorway:p,css:{position:"absolute",top:h.TV.space8,right:h.TV.space8},onClick:w,dataCy:x,children:(0,r.tZ)(a.Z,{})}),t?(0,r.tZ)(d.xv,{variant:"subheadBig",multiline:!1,children:t}):null,"function"==typeof n?(0,r.tZ)(n,{}):(0,r.tZ)(d.xv,{children:n}),g>1&&Z?(0,r.BX)(f.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.justify.spaceBetween],children:[(0,r.tZ)(c.zx,{css:{visibility:b<=0?"hidden":void 0},colorway:p,text:"Back",iconLeft:(0,r.tZ)(i.Z,{}),onClick:function(){return Z(b-1)}}),(0,r.tZ)(m,{colorway:p,total:g,current:b}),(0,r.tZ)(c.zx,{"data-autofocus":!0,colorway:p,text:b>=g-1?"Done":"Next",iconLeft:(0,r.tZ)(o.Z,{}),onClick:function(){return b>=g-1?w():Z(b+1)}})]}):null]})}function m(e){var t=e.total,n=e.current,i=e.colorway;return(0,r.BX)(f.G,{children:[(0,r.tZ)(l.T,{children:(0,r.tZ)("progress",{value:n+1,max:t,"aria-label":"Step"})}),(0,r.tZ)(f.G,{"aria-hidden":!0,css:h.l0.rowWithGap(8),children:Array(t).fill(0).map(function(e,t){return(0,r.tZ)(f.G,{css:[h.l0.borderRadius("full"),{width:h.TV.space8,height:h.TV.space8,backgroundColor:t===n?s.Br[i].stronger:s.Br[i].dimmer}]},t)})})]})}},33980:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(66626),i=n(50959);function o(e){var t=(0,r._)((0,i.useState)(e.getConnectionState()),2),n=t[0],o=t[1];return(0,i.useEffect)(function(){return e.onConnectionStateChanged(o)},[e]),n}},21625:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(66626),i=n(33980),o=n(50959),a=n(2993),l=n(30095),c=n(59786);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fallbackToReplCo:!0},n=(0,i.Z)(e),s=(0,r._)((0,o.useState)(null),2),u=s[0],d=s[1],f=(0,c.P5)({controlName:"flag-webview-fallback-url"});return(0,o.useEffect)(function(){if(e.getConnectionState()===a.em.CONNECTED){var n=e.getDotdevUrl();if(n){var r=(0,l.bR)();if(!f||!t.fallbackToReplCo||!r||r.dotDev){d(n);return}d(n.replace(/.replit.dev$/,".repl.co"))}}},[e,n,f,t]),u}},47149:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(27387),i=n(66626),o=n(96583),a=n(85733),l=n(50959),c={isConnecting:!0,channel:null,context:null};function s(e){var t,n,s,u,d,f,h,p,m,v=(n=(t={container:e,service:"exec"}).container,s=t.service,u=t.name,f=void 0!==(d=t.skip)&&d,p=(h=(0,i._)((0,l.useState)(c),2))[0],m=h[1],(0,l.useEffect)(function(){m(c);var e=!1,t=n.openChannel({service:s,name:u,skip:function(){return f}},function(t){if(!e)return m({context:t.context,channel:t.channel,isConnecting:!1}),function(t){e||m({isConnecting:t.willReconnect,channel:null,context:null})}});return function(){e=!0,t()}},[n,s,u,f]),p).channel,g=(0,l.useRef)(!1),y=(0,l.useRef)([]),b=(0,a.Z)((0,r._)(function(){var e,t,n,r,a,l,c,s,u,d;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(g.current||!y.current.length||(null==v?void 0:v.status)!=="open")return[2];if(!(e=y.current.pop()))throw Error("Expected request");return r=(n=(t=(0,i._)(e,2))[0]).args,a=n.env,l=t[1],c="",s=v.onCommand(function(e){e.output&&(c+=e.output)}),g.current=!0,[4,v.request({exec:{args:r,env:a}})];case 1:return u=o.sent(),g.current=!1,s(),d=u.channelClosed?"Channel closed":u.error,l(d?{error:d,output:c||null}:{output:c,error:null}),b.current(),[2]}})})),w=null==v?void 0:v.status;return(0,l.useEffect)(function(){"open"===w&&b.current()},[w,b]),(0,l.useCallback)(function(e){var t=e.args,n=e.env;return new Promise(function(e){y.current.push([{args:t,env:n},e]),b.current()})},[b])}},84806:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(2993),o=n(81199),a=n(50959);function l(){var e,t,n=(0,o.Z)().container,l=(0,r._)((0,a.useState)(null!==(t=null===(e=n.getContext())||void 0===e?void 0:e.repl)&&void 0!==t?t:null),2),c=l[0],s=l[1];return(0,a.useEffect)(function(){return n.onConnectionStateChanged(function(e){var t,r;e===i.em.CONNECTED&&s(null!==(r=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==r?r:null)})},[s,n]),c}},10118:function(e,t,n){n.d(t,{J_:function(){return d},O2:function(){return s},hw:function(){return u}});var r=n(57967),i=n(91175),o=n(21625),a=n(48058),l=n(81199),c=n(94563);function s(e){return 80===e||443===e}function u(e,t){var n=new URL(e);return!t||s(t)?n.port&&(n.port=""):n.port=t.toString(),n}function d(e){var t,n,s,d=(0,r.Z)(),f=!(n=(0,a.bg)()).length||n.some(function(e){return 80===e.configuration.externalPort})?80:null!==(t=n[0].configuration.externalPort)&&void 0!==t?t:80,h=(0,l.Z)().container,p=(0,o.Z)(h),m=(0,c.I5)({variables:{id:e}}).data,v=(0,i.T)();if(!f&&!v||!((null==m?void 0:m.repl.__typename)==="Repl"?m.repl:null)||!p)return null;var g=u(p,f).toString(),y=u(p+"/__replco/devtools_wrapper.html",f).toString();return{iframeSrc:d?(s=new URL(g)).hostname.endsWith(".localhost")?g:(s.protocol="https:",s.toString()):y,presentationUrl:g}}},12910:function(e,t,n){n.d(t,{H:function(){return nb}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w=n(27387),Z=n(41733),x=n(30509),C=n(66626),_=n(96583),S=n(51305),k=n(60305),E=n(70316),T=n(50959),R=n(25150),I=n(367),D=n(36632),B=n(20075),G=n(43182),A=n(12663),P=n(38117);function N(e){return L.apply(this,arguments)}function L(){return(L=(0,w._)(function(e){var t,n;return(0,_.Jh)(this,function(r){return t=e.container,n=e.service,[2,new Promise(function(e){var r=t.openChannel({service:n},function(t){return e([t.channel,r]),r})})]})})).apply(this,arguments)}(r=d||(d={})).OUTPUT="OUTPUT",r.ERROR="ERROR",r.STATE_CHANGED="STATE_CHANGED",r.CHANNEL_OPENED="CHANNEL_OPENED";var O=n(35377);(f||(f={})).MESSAGE_RECEIVED="MESSAGE_RECEIVED";var U=n(2993),M=n(48376),X=n(63257),F=n(75706),W=n(12285),H=n(36556),V=n(91620).lW,z=new TextEncoder,j=new TextDecoder,q=(i=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source,RegExp("(".concat(i,"\\r\\n)*(").concat(i,")$"),"i")),J=function(){"use strict";function e(t){(0,W._)(this,e),this.onMessage=t,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var t=e.prototype;return t.consumeHeaders=function(){var e=function(e){var t=e.findIndex(function(t,n){return 13===t&&10===e[n+1]&&13===e[n+2]&&10===e[n+3]});if(-1!==t){var n=j.decode(e.slice(0,t)),r=n.match(q);if(!r)throw H.kg.error("Failed to parse LSP header, no matches",{fragment:n}),Error("Unable to match header, text: ".concat(n));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,l=!1,c=void 0;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=d.indexOf(":");if(-1===f)throw H.kg.error("Failed to parse LSP header, missing colon",{fragment:n}),Error('Message header must separate key and value using ":"');var h=d.substr(0,f),p=d.substr(f+1).trim();if("Content-Length"===h){var m=parseInt(p,10);if(isNaN(m))throw H.kg.error("Failed to parse LSP header, NaN content length",{fragment:n}),Error("Content-Length value must be a number.");i[h]=parseInt(p,10)}else i[h]=p}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}if(null==i["Content-Length"])throw H.kg.error("Failed to parse LSP header, no Content-Length",{fragment:n}),Error("Header must provide a Content-Length property.");return{headerLength:t,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},t.read=function(e){for(this.buffer=(t=this.buffer,n=z.encode(e),(r=new Uint8Array(t.length+n.length)).set(t),r.set(n,t.length),r);null!==(i=this.headers)&&void 0!==i?i:this.headers=this.consumeHeaders();){var t,n,r,i,o=this.headers.value["Content-Length"];if(this.buffer.length<o)return;var a=function(e,t,n){var r=j.decode(e.slice(0,t));try{return{json:JSON.parse(r),buffer:e.slice(t)}}catch(c){var i=V.from(e).toString();if(c instanceof SyntaxError&&"Unexpected end of JSON input"===c.message){H.kg.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:t,rpcContent:r,attempt:"original-length",headers:JSON.stringify(n)});var o=function(e,t){for(var n=0,r=0,i=!1,o=t;o<e.length+1;o++){if(o!==t&&!n&&!r&&!i)return o;var a=e[o];switch(a){case 92:o++;continue;case 34:i=!i;continue}if(!i)switch(a){case 123:n++;break;case 125:n--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==o){var a=e.slice(0,o),l=j.decode(a);try{return{json:JSON.parse(l),buffer:e.slice(o)}}catch(e){H.kg.error("Failed to parse LSP message",{givenError:e,buffer:i,length:t,rpcContent:r,attempt:"recomputed-length"})}}}else H.kg.error("Failed to parse LSP message",{givenError:c,buffer:i,length:t,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(t)}}}(this.buffer,o,this.headers),l=a.json,c=a.buffer;if(this.headers=void 0,this.buffer=c,void 0!==l)try{this.onMessage(l)}catch(e){G.Tb(e)}}},e}(),Y=n(91620).lW,K=n(39126),$=n(1675);function Q(e,t){return ee.apply(this,arguments)}function ee(){return(ee=(0,w._)(function(e,t){var n,r,i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return n=t.upstream,r=t.branchName,i=["--set-upstream-to",n],r&&i.push((0,$.Gw)(r)),[4,e("git branch ".concat(i.join(" ")),{serviceMethod:"git-set-branch-upstream"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{error:null}]}})})).apply(this,arguments)}var et=["git diff -z --name-only --diff-filter=U","echo -n ".concat("\x1f"),"{ git grep -z -l -E '<{7,}|={7,}|>{7,}' || exit $(( $? == 1 ? 0 : $? )); }"].join(" && ");function en(e){return er.apply(this,arguments)}function er(){return(er=(0,w._)(function(e){var t,n,r,i,o,a,l,c,s,u,d;return(0,_.Jh)(this,function(f){switch(f.label){case 0:return[4,e(et,{serviceMethod:"git-get-conflicting-files"})];case 1:if((t=f.sent()).error)return[2,t];if(r=(n=(0,C._)(t.output.split("\x1f").map(function(e){return(0,$.so)(e,"\x00")}),2))[0],i=n[1],!r.length)return[2,{files:new Map,error:null}];o=new Map,a=!0,l=!1,c=void 0;try{for(s=r[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)d=u.value,o.set(d,!i.includes(d))}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return[2,{files:o,error:null}]}})})).apply(this,arguments)}var ei=n(72658),eo=n(19871);function ea(e){return el.apply(this,arguments)}function el(){return(el=(0,w._)(function(e){var t,n,r,i,o,a;return(0,_.Jh)(this,function(l){switch(l.label){case 0:return[4,(0,ei.ZP)(e)];case 1:if((t=l.sent()).error)return[2,t];if(t.state!==ei.yG.MERGING)return[2,{error:eo.aq.INVALID_STATE}];return[4,e("cat '.git/MERGE_HEAD'",{serviceMethod:"git-get-merging-refs"})];case 2:if((n=l.sent()).error)return[2,n];if(!(r=(0,$.so)(n.output,"\n")).length)return[2,{commits:[],branches:[],error:null}];return i="{ grep -F '".concat(r.join("\n"),"' || exit 0; }"),[4,e("".concat('git for-each-ref --format="%(objectname)	%(refname)" refs/heads/ refs/remotes/'," | ").concat(i),{serviceMethod:"git-get-merging-refs"})];case 3:if((o=l.sent()).error)return[2,o];if(!o.output)return[2,{commits:r,branches:[],error:null}];return a=(0,$.so)(o.output,"\n").map(function(e){return e.split("	")[1]}).map($.C),[2,{commits:r,branches:a,error:null}]}})})).apply(this,arguments)}var ec=n(15026);function es(e){return eu.apply(this,arguments)}function eu(){return(eu=(0,w._)(function(e){var t,n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,e("if [ -f '.git/FETCH_HEAD' ]; then stat -c %Y '.git/FETCH_HEAD'; fi",{serviceMethod:"git-last-fetched"})];case 1:if((t=r.sent()).error)return[2,t];if(!t.output||isNaN(n=parseInt(t.output,10)))return[2,{lastFetched:null,error:null}];return[2,{lastFetched:new Date(n*=1e3),error:null}]}})})).apply(this,arguments)}var ed=n(97658),ef=n(70886);function eh(e,t){return ep.apply(this,arguments)}function ep(){return(ep=(0,w._)(function(e,t){var n,r,i,o,a,l;return(0,_.Jh)(this,function(c){switch(c.label){case 0:if(n=(t=(0,ed.Qj)(t)).startsWith("refs/heads/"),r=t.startsWith("refs/remotes/"),n)return[3,2];return i=r?t:"refs/remotes/".concat(t),[4,e("git show-ref --verify ".concat(i),{serviceMethod:"git-branch-exists"})];case 1:if(!(o=c.sent()).error)return[2,{exists:!0,ref:(0,ef.L)(i),error:null}];if(o.error!==eo.aq.INVALID_REFERENCE)return[2,o];c.label=2;case 2:if(r)return[3,4];return a=n?t:"refs/heads/".concat(t),[4,e("git show-ref --verify ".concat(a),{serviceMethod:"git-branch-exists"})];case 3:if(!(l=c.sent()).error)return[2,{exists:!0,ref:(0,ef.L)(a),error:null}];if(l.error!==eo.aq.INVALID_REFERENCE)return[2,l];c.label=4;case 4:return[2,{exists:!1,ref:null,error:null}]}})})).apply(this,arguments)}function em(e,t,n){return ev.apply(this,arguments)}function ev(){return(ev=(0,w._)(function(e,t,n){var r,i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:if((0,ed.Pi)(t,n)){if(t=(0,ed.bF)(t,!0),n=(0,ed.bF)(n),t===n)return[2,{canMerge:!0,error:null}]}else t=(0,ed.bF)(t),n=(0,ed.bF)(n);return t=(0,$.Gw)(t),n=(0,$.Gw)(n),r="git merge-base ".concat(t," ").concat(n),i='git merge-tree "$('.concat(r,')" ').concat(t," ").concat(n),[4,e("set -eo pipefail; (".concat(i," | ").concat("( (grep -q -e '^+<* \\.our$' && echo '1') || echo '0')",") || test $? -eq 141"),{serviceMethod:"git-can-merge-branches"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{canMerge:"0"===o.output,error:null}]}})})).apply(this,arguments)}function eg(e,t){return ey.apply(this,arguments)}function ey(){return(ey=(0,w._)(function(e,t){var n,r,i,o,a,l,c,s,u;return(0,_.Jh)(this,function(d){switch(d.label){case 0:return n=t.branch,r=t.message,o=void 0!==(i=t.allowConflicts)&&i,[4,(0,ei.ZP)(e)];case 1:if((a=d.sent()).error)return[2,a];if(l=a.state,a.type!==ei.y5.NORMAL||l===ei.yG.DIRTY_WORKTREE||l===ei.yG.DIRTY_INDEX)return[2,{error:eo.aq.INVALID_STATE}];return[4,eh(e,n)];case 2:if((c=d.sent()).error)return[2,c];if(!c.exists)return[2,{error:eo.aq.INVALID_REFERENCE}];if(o)return[3,4];return[4,em(e,n,"HEAD")];case 3:if((s=d.sent()).error)return[2,s];if(!s.canMerge)return[2,{error:eo.aq.MERGE_CONFLICT}];d.label=4;case 4:var f,h,p,m;return h=(f={branch:n,message:r}).branch,p=f.message,h=(0,ed.Qj)(h),m=["--quiet","--no-edit","--no-ff","--overwrite-ignore","--commit"],p&&m.push("-m",(0,$.Gw)(p)),m.push((0,$.Gw)(h)),[4,e("git merge ".concat(m.join(" ")),{serviceMethod:"git-merge"})];case 5:if((u=d.sent()).error!==eo.aq.MERGE_CONFLICT)return[3,8];if(o)return[3,7];return[4,e("git merge --abort")];case 6:return d.sent(),[2,u];case 7:return[2,{hasConflicts:!0,error:null}];case 8:if(u.error)return[2,u];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}function eb(e){return ew.apply(this,arguments)}function ew(){return(ew=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,e("git merge --abort",{serviceMethod:"git-merge-abort"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{error:null}]}})})).apply(this,arguments)}function eZ(e){return ex.apply(this,arguments)}function ex(){return(ex=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,e("GIT_EDITOR=/bin/true git merge --continue",{serviceMethod:"git-merge-continue"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{error:null}]}})})).apply(this,arguments)}var eC=n(44906);function e_(e,t,n){return eS.apply(this,arguments)}function eS(){return(eS=(0,w._)(function(e,t,n){var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g;return(0,_.Jh)(this,function(y){switch(y.label){case 0:if("string"==typeof t){if(""===t)return[2,{error:null}];t=[t]}if(!0!==t&&0===t.length)return[2,{error:null}];if(!(void 0!==n))return[3,2];return r=["--quiet","--no-overlay","--worktree","--source=".concat(n),!0===t?".":"-- ".concat(t.join(" "))],[4,e("git --literal-pathspecs restore ".concat(r.join(" ")),{serviceMethod:"git-restore-files"})];case 1:if((i=y.sent()).error)return[2,i];return[2,{error:null}];case 2:return[4,(0,eC.Z)(e)];case 3:if((o=y.sent()).error)return[2,o];a=[],l=[],c=!0,s=!1,u=void 0;try{for(d=o.changes[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)if(h=f.value,!0===t||t.includes(h.path))switch(h.type.worktree){case eC.h.UNMODIFIED:continue;case eC.h.UNTRACKED:a.push((0,$.Gw)(h.path));break;default:l.push((0,$.Gw)(h.path))}}catch(e){s=!0,u=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}if(0===a.length&&0===l.length&&void 0===n)return[2,{error:null}];return p=[],a.length&&(m=["--quiet","--force","--",a.join(" ")],p.push("git --literal-pathspecs clean ".concat(m.join(" ")))),l.length&&(v=["--quiet","--no-overlay","--worktree","-- ".concat(l.join(" "))],p.push("git --literal-pathspecs restore ".concat(v.join(" ")))),[4,e(p,{serviceMethod:"git-restore-files"})];case 4:if((g=y.sent()).error)return[2,g];return[2,{error:null}]}})})).apply(this,arguments)}var ek=function(){"use strict";function e(t,n){(0,W._)(this,e),this.cache=new Map,this.lastInvalidation=0,this.ttl=t,this.debounceTime=n}var t=e.prototype;return t.has=function(e){return this.cache.has(e)},t.get=function(e){var t=this.cache.get(e);if(!t)throw Error("No value found for key: ".concat(e));return t.result},t.set=function(e,t){var n=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:t,timeout:setTimeout(function(){return n.cache.delete(e)},this.ttl),pending:!0};t.finally(function(){return i.pending=!1}),this.cache.set(e,i)},t.invalidate=function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,t=!0,n=!1,r=void 0;try{for(var i,o=this.cache[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,C._)(i.value,2),l=a[0],c=a[1];c.pending?e.set(l,c):clearTimeout(c.timeout)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this.cache=e,this.lastInvalidation=Date.now()}},t.clear=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;clearTimeout(o.timeout)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.cache.clear(),this.lastInvalidation=0},e}(),eE=n(15229),eT=/^(fatal: |error: |remote: error: |CONFLICT \([^)]+\): )/im,eR=/^cat: .*: No such file or directory$/im;function eI(e){return RegExp("^fatal: ".concat(e.source),"im")}function eD(e){return RegExp("^error: ".concat(e.source),"im")}var eB=[{error:eo.aq.NOT_INITIALIZED,match:[eI(/not a git repository/)]},{error:eo.aq.UNAUTHENTICATED,match:[eI(/Authentication failed/),eI(/unable to access/),eI(/repository \S+ not found/),eI(/could not read Username/),eI(/could not read Password/),eI(/Could not read from remote/)]},{error:eo.aq.INDEX_FILE_CORRUPT,match:[eI(/index file corrupt/),eI(/index file smaller than expected/),eD(/index file .*?\.idx is too small/)]},{error:eo.aq.UNKNOWN_REMOTE,match:[eI(/No such remote/),eD(/No such remote/)]},{error:eo.aq.INDEX_LOCKED,match:[eI(/Unable to create .*?\.git\/index\.lock/),eD(/Unable to create .*?\.git\/index\.lock/)]},{error:eo.aq.NO_COMMITS,match:[eI(/your current branch '.*?' does not have any commits yet/)]},{error:eo.aq.PATH_MATCHED_NO_FILES,match:[eI(/pathspec '.*?' did not match any files/),eI(/pathspec '.*?' did not match any file\(s\) known to git/),eI(/path '.*?' does not exist/),eI(/path '.*?' exists on disk, but not in/)]},{error:eo.aq.USER_NOT_CONFIGURED,match:[eI(/unable to auto-detect email address/),eI(/unable to auto-detect name/),eI(/empty ident name \(for <.*?>\) not allowed/)]},{error:eo.aq.INVALID_REFERENCE,match:[eI(/invalid reference: .*?$/),eI(/'.*?' - not a valid ref/)]},{error:eo.aq.BRANCH_ALREADY_EXISTS,match:[eI(/A branch named '.*?' already exists/)]},{error:eo.aq.MERGE_CONFLICT,match:[eI(/Not possible to fast-forward, aborting/),eI(/refusing to merge unrelated histories/),eI(/Exiting because of an unresolved conflict/),eI(/Exiting because of unfinished merge/),eD(/Failed to merge in the changes/),RegExp("^CONFLICT \\([^\\)]+\\): ".concat(/Merge conflict in/.source),"im")]},{error:eo.aq.UPSTREAM_NOT_SET,match:[eI(/The current branch \S+ has no upstream branch/),eI(/No configured push destination/)]},{error:eo.aq.HEAD_DETACHED,match:[eI(/HEAD does not point to a branch/),eI(/ref HEAD is not a symbolic ref/)]},{error:eo.aq.DIRTY_WORKTREE,match:[eD(/Your local changes to the following files would be overwritten/),eD(/The following untracked working tree files would be overwritten/),eD(/\S+ is not possible because you have unmerged files/),eD(/cannot rebase: You have unstaged changes/)]},{error:eo.aq.PROTECTED_BRANCH,match:[RegExp("^remote: error: ".concat(/.*? Protected branch update failed/.source),"im")]},{error:eo.aq.PUSH_REJECTED,match:[eD(/failed to push some refs to/)]},{error:eo.aq.REMOTE_ALREADY_EXISTS,match:[eI(/remote .*? already exists/),eD(/remote .*? already exists/)]},{error:eo.aq.INVALID_STATE,match:[eI(/There is no merge in progress/),eI(/There is no merge to abort/),eI(/No rebase in progress/)]}],eG=n(56391);function eA(){return(eA=(0,w._)(function(e,t,n,r){var i,o,a,l,c,s,u;return(0,_.Jh)(this,function(d){switch(d.label){case 0:if("open"!==e.status)return[2,{output:"JS Error\nchannel closed before command was run",error:eo.aq.CHANNEL_CLOSED}];d.label=1;case 1:return d.trys.push([1,3,,4]),i="",o=e.onCommand(function(e){null!==e.output&&void 0!==e.output&&(i+=e.output)}),a=void 0,(l=Promise.race([new Promise(function(e){return a=setTimeout(e,9e4)}),e.request({exec:{env:n,args:t,blocking:!0}})])).finally(function(){o(),clearTimeout(a)}),[4,l];case 2:if(void 0===(c=d.sent()))return H.kg.error("Git request timed out.",(0,Z._)({appService:"git",command:t,gitEnv:JSON.stringify(n),TIMEOUT:9e4},r)),[2,{output:i,error:eo.aq.TIMEOUT}];if(!c.ok&&c.channelClosed)return[2,{output:"JS Error\nchannel closed during command execution",error:eo.aq.CHANNEL_CLOSED}];if(c.error||!c.ok)return[2,{output:s="".concat(c.error,"\n").concat(i),error:function(e){if(eT.test(e)){for(var t=0;t<eB.length;t++)for(var n=0;n<eB[t].match.length;n++)if(eB[t].match[n].test(e))return eB[t].error;return eo.aq.UNKNOWN}return eR.test(e)?eo.aq.PATH_MATCHED_NO_FILES:eo.aq.UNKNOWN_NOT_GIT}(s)}];return[2,{output:i,error:null}];case 3:return u=d.sent(),G.$e(function(e){e.setTag("service","git"),e.setExtra("command",t),e.setExtra("env",n),r&&e.setExtra("options",r),G.Tb(u)}),[2,{output:"JS Error\n".concat(String(u)),error:eo.aq.UNKNOWN_NOT_GIT}];case 4:return[2]}})})).apply(this,arguments)}var eP=function(){"use strict";function e(t){var n=t.container,r=t.getEnv,i=t.awaitPromise,o=this;(0,W._)(this,e),this.cache=new ek(3e4,2e3),this.running=(0,M.u)(!1),this.queue=[],n.openChannel({service:"exec"},function(e){var t,n,a=e.channel,l=(t=(0,w._)(function(e,t){var n,o;return(0,_.Jh)(this,function(l){switch(l.label){case 0:if(0===e.length)throw Error("Expected at least one command");if(!i)return[3,2];return[4,i];case 1:l.sent(),l.label=2;case 2:return n=Date.now(),[4,function(e,t,n,r){return eA.apply(this,arguments)}(a,["bash","-c",Array.isArray(e)?e.join(" && "):e],r(),t)];case 3:if(o=l.sent(),(0,eE.J)(e,o,!1,n),o.error)return[2,o];return[2,{output:(null==t?void 0:t.verbatim)?o.output:o.output.trim(),error:null}]}})}),function(e,n){return t.apply(this,arguments)}),c=function(e,t){if(0===e.length)throw Error("Expected at least one command");var n=Array.isArray(e)?e.join(" && "):e;if(o.cache.has(n)){var r=o.cache.get(n);return r.then(function(t){(0,eE.J)(e,t,!0)}),r}var i=l(n,t);return o.cache.set(n,i),i},s=function(e,t){return o.cache.clear(),l(e,t)},u=(n=(0,w._)(function(){var e;return(0,_.Jh)(this,function(t){switch(t.label){case 0:if(!(o.queue.length>0)||"open"!==a.status)return[3,7];if(!(e=o.queue.shift()))return[3,6];if("read"!==e.type)return[3,2];return[4,e.fn(c)];case 1:case 3:return t.sent(),[3,6];case 2:if("write"!==e.type)return[3,4];return[4,e.fn(s)];case 4:return[4,e.fn(l)];case 5:t.sent(),t.label=6;case 6:return[3,0];case 7:return 0===o.queue.length&&o.running.set(!1),[2]}})}),function(){return n.apply(this,arguments)});return o.running.current&&u(),o.running.subscribe(function(e){e&&u()})})}var t=e.prototype;return t.add=function(e,t){var n,r=(0,eG.Z)();return this.queue.push({type:t,fn:(n=(0,w._)(function(t){var n;return(0,_.Jh)(this,function(i){switch(i.label){case 0:return[4,e(t)];case 1:return n=i.sent(),r.resolve(n),[2]}})}),function(e){return n.apply(this,arguments)})}),this.running.current||this.running.set(!0),r.promise},t.wrap=function(e,t){var n=this;if("function"!=typeof e)throw Error("Expected a function");return function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.add(function(t){return e.apply(void 0,[t].concat((0,X._)(i)))},t)}},e}(),eN=n(86763),eL=n.n(eN);function eO(e,t){return eU.apply(this,arguments)}function eU(){return(eU=(0,w._)(function(e,t){var n,r,i;return(0,_.Jh)(this,function(o){switch(o.label){case 0:if(n=t.name,r=t.url,n=(0,$.ss)(n),!(0,ed.GE)(n))return[2,{error:eo.aq.INVALID_REFERENCE}];return n=(0,$.Gw)(n),r=(0,$.Gw)(r),[4,e("git remote add ".concat(n," ").concat(r),{serviceMethod:"git-add-remote"})];case 1:if((i=o.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}function eM(e,t){return eX.apply(this,arguments)}function eX(){return(eX=(0,w._)(function(e,t){var n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:var i,o,a;return[4,e((i=t.message,o=t.files,a=["--allow-empty","--allow-empty-message","--cleanup=whitespace","--no-edit","--quiet","-m ".concat((0,$.Gw)(i))],o&&a.push.apply(a,["--only","--"].concat((0,X._)(o.map($.Gw)))),"git --literal-pathspecs commit ".concat(a.join(" "))),{serviceMethod:"git-commit"})];case 1:if((n=r.sent()).error)return[2,n];return[2,{error:null}]}})})).apply(this,arguments)}function eF(e,t){return eW.apply(this,arguments)}function eW(){return(eW=(0,w._)(function(e,t){var n,r,i,o,a,l;return(0,_.Jh)(this,function(c){switch(c.label){case 0:return[4,eh(e,t=(0,ed.Qj)(t,!0))];case 1:if((n=c.sent()).error)return[2,n];if(!n.exists)return[2,{error:eo.aq.INVALID_REFERENCE}];if(r=["--quiet","--no-guess"],n.ref.type!==ef.l.REMOTE_BRANCH)return[3,3];return i=n.ref.branch,o=n.ref.name,[4,eh(e,"refs/heads/".concat(i))];case 2:if((a=c.sent()).error)return[2,a];return a.exists?r.push((0,$.Gw)(i),"--"):r.push("-t","-b",(0,$.Gw)(i),(0,$.Gw)(o),"--"),[3,4];case 3:r.push((0,$.Gw)(n.ref.name),"--"),c.label=4;case 4:return[4,e("git checkout ".concat(r.join(" ")),{serviceMethod:"git-switch-branch"})];case 5:if((l=c.sent()).error)return[2,l];return[2,{error:null}]}})})).apply(this,arguments)}function eH(e,t){return eV.apply(this,arguments)}function eV(){return(eV=(0,w._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f;return(0,_.Jh)(this,function(h){switch(h.label){case 0:return n=t.name,i=void 0===(r=t.startPoint)?"HEAD":r,o=t.track,l=void 0!==(a=t.checkout)&&a,[4,eh(e,n=(0,$.C)(n))];case 1:if((c=h.sent()).error)return[2,c];if(c.exists)return[2,{error:eo.aq.BRANCH_ALREADY_EXISTS}];if("HEAD"===i){if(!0===o)return[2,{error:eo.aq.INVALID_REFERENCE}];o=!1}if(!(!1!==o))return[3,3];return[4,eh(e,i)];case 2:if((s=h.sent()).error)return[2,s];if(!s.exists&&!0===o)return[2,{error:eo.aq.INVALID_REFERENCE}];s.exists&&s.ref.type===ef.l.REMOTE_BRANCH&&void 0===o&&(o=!0),h.label=3;case 3:return u=["--quiet",o?"--track":"--no-track",(0,$.Gw)(n),(0,$.Gw)(i)],[4,e("git branch ".concat(u.join(" ")),{serviceMethod:"git-create-branch"})];case 4:if((d=h.sent()).error)return[2,d];if(!l)return[3,6];return[4,eF(e,n)];case 5:if((f=h.sent()).error)return[2,f];h.label=6;case 6:return[2,{error:null}]}})})).apply(this,arguments)}function ez(e){return ej.apply(this,arguments)}function ej(){return(ej=(0,w._)(function(e){var t,n,r,i,o=arguments;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},n=["--quiet"],t.depth&&(r=t.deepen?"--deepen":"--depth",n.push("".concat(r,"=").concat(t.depth))),t.remote?n.push((0,$.Gw)(t.remote)):n.push("--all"),[4,e("git fetch ".concat(n.join(" ")),{serviceMethod:"git-fetch"})];case 1:if((i=a.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}var eq=["main","master","trunk","dev","develop","development","staging","prod","production"].map(function(e){return'if [ $(git rev-parse --verify --quiet "heads/'.concat(e,'") ]; then\n      echo "refs/heads/').concat(e,'"\n    fi')}).join("\n"),eJ='\ngit remote | while IFS= read -r remote; do\n  if [ -z "$remote" ]; then continue; fi\n  branch="$('.concat('\nif [ -f ".git/refs/remotes/$remote/HEAD" ]; then\n  echo "$(sed -e "s/^ref: refs\\/remotes\\/$remote\\///" < .git/refs/remotes/$remote/HEAD)"\nelse\n  remote_result="$(git ls-remote --symref "$remote" HEAD)"\n  if [ -z "$remote_result" ]; then\n    echo ""\n  else\n    branch_name="$(\n      echo "$remote_result" | \\\n      head -1 | \\\n      awk \'{print $2}\' | \\\n      sed -e "s/^refs\\/heads\\///"\n    )"\n    git remote set-head "$remote" "$branch_name" >&2\n    echo "$branch_name"\n  fi\nfi\n'.trim(),')"\n  if [ -z "$branch" ]; then continue; fi\n  echo "refs/remotes/$remote/$branch"\n  if [ $(git rev-parse --verify --quiet "heads/$branch") ]; then\n    echo "refs/heads/$branch"\n  fi\ndone\n').concat(eq,"\n").trim();function eY(e){return eK.apply(this,arguments)}function eK(){return(eK=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,e(eJ,{serviceMethod:"git-find-default-branches"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{refs:(0,X._)(new Set((0,$.so)(t.output,"\n"))).map(function(e){return(0,ef.L)(e)}),error:null}]}})})).apply(this,arguments)}var e$=n(52621);function eQ(e,t){return e0.apply(this,arguments)}function e0(){return(e0=(0,w._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f,h;return(0,_.Jh)(this,function(p){switch(p.label){case 0:if(t=(0,ed.bF)(t,!0),!(0,ed.Dc)(t))return[2,{error:eo.aq.INVALID_REFERENCE}];return n=(0,$.C)(t),i=(r=(0,C._)((0,$.Tg)(t),2))[0],o=r[1],a=["refs/heads/".concat(n),"refs/remotes/*/".concat(n)],i&&o&&(a.push("refs/heads/".concat(o)),a.push("refs/remotes/".concat(i,"/").concat(o))),[4,(0,e$.ZP)(e,{pattern:a})];case 1:if((l=p.sent()).error)return[2,l];if(0===l.branches.length)return[2,{error:eo.aq.INVALID_REFERENCE}];c=!0,s=!1,u=void 0;try{for(d=l.branches[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)if((h=f.value).type!==e$.HO.REMOTE&&h.name===n||i&&o&&h.type!==e$.HO.LOCAL&&h.remote===i&&h.name===o)return[2,{branch:h,error:null}]}catch(e){s=!0,u=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}return[2,{error:eo.aq.INVALID_REFERENCE}]}})})).apply(this,arguments)}var e1=n(36559);function e2(e,t){return e3.apply(this,arguments)}function e3(){return(e3=(0,w._)(function(e,t){var n,r,i,o,a;return(0,_.Jh)(this,function(l){switch(l.label){case 0:if(n=t.path,i=void 0===(r=t.revision)?"HEAD":r,""===n)return[2,{content:null,error:null}];return o=(0,$.Gw)("".concat(i,":").concat(n)),[4,e((0,e1.T3)(n)?"git --no-pager show ".concat(o," | base64"):"git --no-pager show ".concat(o),{verbatim:!0,serviceMethod:"git-get-file-contents"})];case 1:if((a=l.sent()).error){if(a.error===eo.aq.PATH_MATCHED_NO_FILES)return[2,{content:null,error:null}];return[2,a]}return[2,{content:a.output,error:null}]}})})).apply(this,arguments)}function e4(e){return e8.apply(this,arguments)}function e8(){return(e8=(0,w._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p;return(0,_.Jh)(this,function(m){switch(m.label){case 0:return[4,e("git remote -v",{serviceMethod:"git-get-remotes"})];case 1:if((t=m.sent()).error)return[2,t];if(""===t.output)return[2,{remotes:new Map,error:null}];n=new Map,r=!0,i=!1,o=void 0;try{for(a=(0,$.so)(t.output,"\n")[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)c=l.value,u=(s=(0,C._)(c.split(/\s+/),3))[0],d=s[1],f=s[2],u&&d&&f&&(p=null!==(h=n.get(u))&&void 0!==h?h:{name:u,fetch:"",push:""},"(fetch)"===f?(p.fetch=d,""===p.push&&(p.push=d),n.set(u,p)):"(push)"===f&&(p.push=d,""===p.fetch&&(p.fetch=d),n.set(u,p)))}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return[2,{remotes:n,error:null}]}})})).apply(this,arguments)}var e6='git commit --allow-empty --no-edit --quiet -m "Initial commit"',e5='git add -A && git commit --allow-empty --no-edit --quiet -m "Initial commit"';function e9(e){return e7.apply(this,arguments)}function e7(){return(e7=(0,w._)(function(e){var t,n,r,i,o,a,l,c,s,u=arguments;return(0,_.Jh)(this,function(d){switch(d.label){case 0:return r=void 0===(n=(t=u.length>1&&void 0!==u[1]?u[1]:{}).initialCommit)||n,o=void 0===(i=t.includeAllInitialFiles)||i,[4,(0,ei.ZP)(e)];case 1:if((a=d.sent()).error)return[2,a];if(a.type!==ei.y5.INITIALIZING)return[2,{error:eo.aq.ALREADY_INITIALIZED}];if(a.state!==ei.yG.ON_UNBORN_BRANCH)return[3,4];if(!r)return[3,3];return[4,e(o?e5:e6,{serviceMethod:"git-init"})];case 2:if((l=d.sent()).error)return[2,l];d.label=3;case 3:return[2,{error:null}];case 4:return[4,e(["git init","git checkout -b main"],{serviceMethod:"git-init"})];case 5:if((c=d.sent()).error)return[2,c];if(!r)return[3,7];return[4,e(o?e5:e6,{serviceMethod:"git-init"})];case 6:if((s=d.sent()).error)return[2,s];d.label=7;case 7:return[2,{error:null}]}})})).apply(this,arguments)}function te(e){return tt.apply(this,arguments)}function tt(){return(tt=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,e("git rev-parse --is-inside-work-tree",{serviceMethod:"git-is-initialized"})];case 1:if((t=n.sent()).error){if(t.error===eo.aq.NOT_INITIALIZED)return[2,{initialized:!1,error:null}];return[2,t]}return[2,{initialized:"true"===t.output,error:null}]}})})).apply(this,arguments)}function tn(e){var t=(0,C._)(e.trimStart().split("\x1f"),11),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],l=t[5],c=t[6],s=t[7],u=t[8],d=t[9],f=t[10],h=[],p=i?i.split(" "):null,m=!1,v=!0,g=!1,y=void 0;try{for(var b,w=(0,$.so)(n,",")[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var Z=b.value;if("grafted"===Z){m=!0;continue}h.push((0,ef.L)(Z))}}catch(e){g=!0,y=e}finally{try{v||null==w.return||w.return()}finally{if(g)throw y}}return{refs:h,hash:r,parents:p,grafted:m,author:{name:o,email:a,date:1e3*parseInt(l,10)},committer:{name:c,email:s,date:1e3*parseInt(u,10)},subject:d?d.trim():"",body:f?f.trim():""}}function tr(e){return ti.apply(this,arguments)}function ti(){return(ti=(0,w._)(function(e){var t,n=arguments;return(0,_.Jh)(this,function(r){switch(r.label){case 0:var i,o,a,l,c,s,u;return[4,e((a=void 0===(o=(i=n.length>1&&void 0!==n[1]?n[1]:{}).max)?25:o,l=i.skip,c=i.revRange,s=i.path,u=["-z","--decorate=full","--full-history",'--format="format:%D%x1f%H%x1f%P%x1f%an%x1f%ae%x1f%at%x1f%cn%x1f%ce%x1f%ct%x1f%s%x1f%b"'],a=Math.max(1,Math.min(a,200)),u.push("-n ".concat(a)),l&&u.push("--skip ".concat(l)),c&&u.push(c),u.push("--"),s&&u.push(s),"git log ".concat(u.join(" "))),{serviceMethod:"git-log"})];case 1:if((t=r.sent()).error){if(t.error===eo.aq.NO_COMMITS)return[2,{commits:[],error:null}];return[2,t]}return[2,{commits:(0,$.so)(t.output,"\x00").map(tn),error:null}]}})})).apply(this,arguments)}function to(e){return ta.apply(this,arguments)}function ta(){return(ta=(0,w._)(function(e){var t,n=arguments;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e.cached&&t.push("--cached"),e.deleted&&t.push("--deleted"),e.modified&&t.push("--modified"),e.others&&t.push("--others"),e.ignored&&t.push("--ignored"),e.directory&&t.push("--directory"),e.noEmptyDirectory&&t.push("--no-empty-directory"),"git ls-files ".concat(t.join(" "))}(n.length>1&&void 0!==n[1]?n[1]:{}),{serviceMethod:"git-ls-files"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{files:t.output.split("\n").filter(function(e){return e.length>0}),error:null}]}})})).apply(this,arguments)}var tl=n(97975);function tc(e){return ts.apply(this,arguments)}function ts(){return(ts=(0,w._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f=arguments;return(0,_.Jh)(this,function(h){switch(h.label){case 0:return t=f.length>1&&void 0!==f[1]?f[1]:{},[4,(0,eC.Z)(e)];case 1:if((n=h.sent()).error)return[2,n];if(!n.branch)return[2,{error:eo.aq.HEAD_DETACHED}];if(r=null,i=null,t.publish){if(n.upstream)return[2,{error:eo.aq.BRANCH_ALREADY_EXISTS}];r=t.publish.remote,i=null!==(o=t.publish.name)&&void 0!==o?o:n.branch,r=(0,$.C)(r),i=(0,$.C)(i)}else{if(!n.upstream)return[2,{error:eo.aq.UPSTREAM_NOT_SET}];if(!t.force&&n.upstream.behind>0)return[2,{error:eo.aq.PUSH_REJECTED}];r=(a=(0,C._)((0,$.Tg)(n.upstream.branch),2))[0],i=a[1]}if(!r||!i)return[2,{error:eo.aq.UPSTREAM_NOT_SET}];if(t.force)return[3,3];return[4,ez(e,{remote:r})];case 2:if((l=h.sent()).error)return[2,l];h.label=3;case 3:if(!t.publish)return[3,5];return[4,eh(e,"refs/remotes/".concat(r,"/").concat(i))];case 4:if((c=h.sent()).error)return[2,c];if(c.exists&&c.ref.type===ef.l.REMOTE_BRANCH)return[2,{error:eo.aq.BRANCH_ALREADY_EXISTS}];h.label=5;case 5:return s=["--quiet"],t.force&&!t.publish&&s.push("--force-with-lease"),t.publish&&s.push("--set-upstream"),u="refs/heads/".concat(n.branch,":refs/heads/").concat(i),s.push((0,$.Gw)(r),(0,$.Gw)(u)),[4,e("git push ".concat(s.join(" ")),{serviceMethod:"git-push"})];case 6:if((d=h.sent()).error)return[2,d];return[2,{error:null}]}})})).apply(this,arguments)}function tu(e,t){return td.apply(this,arguments)}function td(){return(td=(0,w._)(function(e,t){var n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:if(t=(0,$.ss)(t),!(0,ed.GE)(t))return[2,{error:eo.aq.INVALID_REFERENCE}];return[4,e("git remote rm ".concat((0,$.Gw)(t)),{serviceMethod:"git-remove-remote"})];case 1:if((n=r.sent()).error)return[2,n];return[2,{error:null}]}})})).apply(this,arguments)}function tf(e,t){return th.apply(this,arguments)}function th(){return(th=(0,w._)(function(e,t){var n,r,i;return(0,_.Jh)(this,function(o){switch(o.label){case 0:if(n=t.remote,r=t.url,n=(0,$.ss)(n),!(0,ed.GE)(n)||!(0,ed.LY)(r))return[2,{error:eo.aq.INVALID_REFERENCE}];return n=(0,$.Gw)(n),r=(0,$.Gw)(r),[4,e("git remote set-url ".concat(n," ").concat(r),{serviceMethod:"git-set-remote-url"})];case 1:if((i=o.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}function tp(e,t){return tm.apply(this,arguments)}function tm(){return(tm=(0,w._)(function(e,t){var n,r;return(0,_.Jh)(this,function(i){switch(i.label){case 0:if(!(n=function(e){if("all"in e)return e.all?["git add -A"]:["git reset -q -- ."];var t=e.add,n=e.reset;if(!(null==t?void 0:t.length)&&!(null==n?void 0:n.length))return null;var r=[];if(t){var i=t.map($.Gw).join(" ");r.push("git --literal-pathspecs add -- ".concat(i))}if(n){var o=n.map($.Gw).join(" ");r.push("git --literal-pathspecs reset -q -- ".concat(o))}return r}(t)))return[2,{error:null}];return[4,e(n,{serviceMethod:"git-stage-files"})];case 1:if((r=i.sent()).error)return[2,r];return[2,{error:null}]}})})).apply(this,arguments)}var tv=n(29139),tg=n(50508),ty=n(21262),tb=n(71440);function tw(){var e=(0,ty._)(["\n  fragment GitServiceGitHubUser on CurrentUser {\n    image\n    username\n    email\n    firstName\n    lastName\n    gitHubInfo {\n      isAppCurrentlyInstalled\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n  }\n"]);return tw=function(){return e},e}function tZ(){var e=(0,ty._)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceGitHubUser\n    }\n  }\n  ","\n"]);return tZ=function(){return e},e}var tx=(0,tb.Ps)(tw()),tC=(0,tb.Ps)(tZ(),tx);function t_(e){return tS.apply(this,arguments)}function tS(){return(tS=(0,w._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x;return(0,_.Jh)(this,function(C){switch(C.label){case 0:return t=e.defaultUsername,n=e.defaultUserId,r=e.onProfiles,a=new Map,[4,null===tv.l||void 0===tv.l?void 0:tv.l.query({query:tC,fetchPolicy:"network-only",context:{noBatch:!0}})];case 1:var _,S;return d=(u=null!==(s=null==(c=(null!==(l=C.sent())&&void 0!==l?l:{data:null}).data)?void 0:c.currentUser)&&void 0!==s?s:{username:t,id:n,firstName:null,lastName:null}).id,f=u.firstName,h=u.lastName,p=u.username,d&&p&&(v=p,f&&(v=f),h&&(v=h),f&&h&&(v=f+" "+h),y={provider:eo.rG.REPLIT_DEFAULT,email:"".concat(d,"-").concat(p,"@").concat(tg.J),name:v,username:p,avatar:null!==(g=null==c?void 0:null===(m=c.currentUser)||void 0===m?void 0:m.image)&&void 0!==g?g:null},a.set(y.provider,y)),(b=null==c?void 0:null===(o=c.currentUser)||void 0===o?void 0:null===(i=o.gitHubInfo)||void 0===i?void 0:i.userInfo)&&b.email&&b.username&&(null==c?void 0:null===(S=c.currentUser)||void 0===S?void 0:null===(_=S.gitHubInfo)||void 0===_?void 0:_.isAppCurrentlyInstalled)&&(x={provider:eo.rG.GITHUB,email:b.email,name:null!==(w=b.name)&&void 0!==w?w:b.username,username:b.username,avatar:null!==(Z=b.avatarUrl)&&void 0!==Z?Z:null},a.set(x.provider,x)),r(a),[2]}})})).apply(this,arguments)}function tk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.author,n=e.committer,r={GIT_AUTHOR_NAME:"",GIT_AUTHOR_EMAIL:"",GIT_COMMITTER_NAME:"",GIT_COMMITTER_EMAIL:"",GIT_ASKPASS:"replit-git-askpass",GIT_PAGER:"",GIT_EDITOR:"",PAGER:"",EDITOR:""};if(t){r.GIT_AUTHOR_NAME=t.username,r.GIT_COMMITTER_NAME=t.username;var i=tE(t);r.GIT_AUTHOR_EMAIL=i,r.GIT_COMMITTER_EMAIL=i,n&&(r.GIT_COMMITTER_NAME=n.username,r.GIT_COMMITTER_EMAIL=tE(n))}return r}function tE(e){if("id"in e)return"".concat(e.id,"-").concat(e.username,"@users.noreply.replit.com");if("email"in e)return e.email;throw Error("Invalid user")}var tT=n(73372),tR=n(57253),tI=".git",tD=n(29556),tB=n(47527),tG=n(29339),tA=n.n(tG),tP=n(54960),tN=n(3341),tL=n.n(tN),tO=n(48594),tU=n(98924),tM=n(81202),tX=n.n(tM),tF=n(35554),tW=n.n(tF),tH=n(24598),tV=n(84570),tz=n(22712),tj=function(e){var t=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[1,2]}},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:tV.Z}},semanticTokens:{dynamicRegistration:!0,requests:{range:!0,full:{delta:!0}},tokenTypes:tz.rN,tokenModifiers:tz.ho,formats:[tH.TokenFormat.Relative],overlappingTokenSupport:!0,multilineTokenSupport:!0,serverCancelSupport:!0,augmentsSyntaxTokens:!0},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,contextSupport:!0,completionItem:{commitCharactersSupport:!0,documentationFormat:["markdown","plaintext"],labelDetailsSupport:!0,resolveSupport:{properties:["detail","documentation"]},snippetSupport:!0},completionList:{itemDefaults:["commitCharacters"]}},codeAction:{resolveSupport:{properties:["edit"]},dataSupport:!0,dynamicRegistration:!0,isPreferredSupport:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(tH.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:t.clientToServer||t.serverToClient?{dynamicRegistration:!0}:void 0,configuration:t.serverToClient,semanticTokens:{refreshSupport:!0},executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[tH.ResourceOperationKind.Create,tH.ResourceOperationKind.Delete,tH.ResourceOperationKind.Rename]}}}},tq=n(47703),tJ=n(53557),tY=function(){"use strict";function e(){(0,W._)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("css-language-server")},t.onResponse=function(e,t){return"textDocument/hover"===e?this.onHover(t):t},t.onHover=function(e){if("error"in e)return e;var t=e.result;return"cancelled"in e&&!1!==e.cancelled||!t?e:(Array.isArray(t.contents)&&(t.contents={kind:"markdown",value:["```html",t.contents[0],"```",t.contents[1],""].join("\n")}),(0,x._)((0,Z._)({},e),{result:t}))},e}(),tK=[new(function(){"use strict";function e(){(0,W._)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("typescript-language-server")},t.onResponse=function(e,t){return"textDocument/completion"===e?this.onCompletion(t):t},t.onCompletion=function(e){if("error"in e||"cancelled"in e&&!1!==e.cancelled)return e;var t=e.result;if(!t)return e;Array.isArray(t)&&(t={isIncomplete:!1,items:t});for(var n=0;n<t.items.length;n++){var r=t.items[n];r.sortText&&r.sortText.startsWith("￿")&&(r.sortText=r.sortText.replace("￿",""))}return(0,x._)((0,Z._)({},e),{result:t})},e}()),new tY],t$=function(){"use strict";function e(){(0,W._)(this,e)}var t=e.prototype;return t.supports=function(){return!0},t.onResponse=function(e,t){return t},e}(),tQ=n(23689),t0=n(118),t1=n(91620).lW;function t2(e,t){var n,r;return null!==(r=null===(n=tJ.$R.from(e))||void 0===n?void 0:n.id)&&void 0!==r?r:t}function t3(){return Math.floor(2147483647*Math.random())}function t4(e){var t=JSON.stringify((0,x._)((0,Z._)({},e),{jsonrpc:"2.0"})),n=t1.byteLength(t,"utf8");return"Content-Length: ".concat(n,"\r\n\r\n").concat(t)}function t8(e,t){var n,r,i,o,a,l;return t&&t?!!(tL()(null==e?void 0:e.fileTypeAttrs,t.fileTypeAttrs)&&tL()(null==e?void 0:null===(n=e.config)||void 0===n?void 0:n.startCommand,null===(r=t.config)||void 0===r?void 0:r.startCommand)&&tL()(null==e?void 0:null===(i=e.config)||void 0===i?void 0:i.initializationOptionsJson,null===(o=t.config)||void 0===o?void 0:o.initializationOptionsJson)&&tL()(null==e?void 0:null===(a=e.config)||void 0===a?void 0:a.configurationJson,null===(l=t.config)||void 0===l?void 0:l.configurationJson)):!!t==!!t}function t6(e,t){return t5.apply(this,arguments)}function t5(){return(t5=(0,w._)(function(e,t){var n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,e.exec("pwd")];case 1:if(null!==(n=r.sent()).error){if(!t())return[2,{error:Error("LSPNix: Could not get working directory "+n.error),workingDirectory:null}];return[2,t6(e,t)]}return[2,{error:null,workingDirectory:n.output.replace("\n","")}]}})})).apply(this,arguments)}(o=h||(h={})).INITIALIZED="INITIALIZED",o.READY="READY",o.DIAGNOSTICS="DIAGNOSTICS",o.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",o.SERVER_HEALTH_CHANGE="SERVER_HEALTH_CHANGE",o.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",o.REQUEST="REQUEST",o.RESPONSE="RESPONSE",o.CANCEL_REQUEST="CANCEL_REQUEST",o.SEND_NOTIFICATION="SEND_NOTIFICATION",o.RECEIVE_NOTIFICATION="RECEIVE_NOTIFICATION",o.SEMANTIC_TOKENS_REFRESH="SEMANTIC_TOKENS_REFRESH",(a=p||(p={})).OUTPUT="OUTPUT",a.ERROR="ERROR",a.STATE_CHANGED="STATE_CHANGED",a.CHANNEL_OPENED="CHANNEL_OPENED";var t9=n(40824);(l=m||(m={})).USER_JOIN="USER_JOIN",l.USER_LEAVE="USER_LEAVE",l.USERS_UPDATE="USERS_UPDATE",l.USER_OPENED_FILE="USER_OPENED_FILE",l.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",l.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED";var t7=n(32902),ne=n(19327);function nt(){var e=(0,ty._)(["\n  query GitHubAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return nt=function(){return e},e}var nn=(0,tb.Ps)(nt());function nr(){return(nr=(0,w._)(function(){var e;return(0,_.Jh)(this,function(t){switch(t.label){case 0:if(!tv.l)throw Error("Expected apollo");return[4,tv.l.query({query:nn})];case 1:if(!(null==(e=t.sent().data)?void 0:e.currentUser))throw Error("Expected current user");return[2,e.currentUser]}})})).apply(this,arguments)}function ni(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}var no=n(45929),na=n(78986);function nl(e){var t,n,r;return(null===(t=e.runner.id)||void 0===t?void 0:t.startsWith(".replit/"))?0:(null===(n=e.runner.id)||void 0===n?void 0:n.startsWith("module:"))?1:(null===(r=e.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}var nc=n(41974),ns=n(92674),nu=n.n(ns);(v||(v={})).MESSAGE="MESSAGE";var nd=function(){"use strict";function e(t){(0,W._)(this,e),this.buffer=Array(t).fill(null),this.start=0,this.end=0,this.isFull=!1}var t=e.prototype;return t.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},t.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function nf(e){var t=new nd(e.maxHistorySize),n=(0,A.ZP)();return{emitMessage:function(e){t.write(e),n.emit("MESSAGE",e)},onMessage:function(e){return n.on("MESSAGE",e),Promise.resolve().then(function(){return e(t.readAll())}),function(){return n.removeListener("MESSAGE",e)}}}}function nh(e){return 1e3*e.seconds+e.nanos/1e6}var np=n(25114).F,nm="\x1b[?25l";(c=g||(g={})).BEFORE_RUN="BEFORE_RUN",c.SERVER="SERVER",c.NONE="NONE",c.STOPPING="STOPPING";var nv=n(42516),ng=n(32822);(s=y||(y={})).DEEPLINK_CHANGED="DEEPLINK_CHANGED",s.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED";var ny=n(45077);function nb(e){var t=(0,C._)((0,T.useState)(null),2),n=t[0],r=t[1];return(0,T.useEffect)(function(){var t,n,i,o,a,l,c,s,u,h,v,g,T,L,W,V,z,j,q,$,ee,et,er,el,eu,ed,ef,ep,ev,ey,ew,ex,eS,ek,eE,eT,eR,eI,eD,eB,eG,eA,eN,eU,eX,eW,eV,ej,eq,eJ,eK,e0,e3,e8,e6,e5,e7,tt,tn,ti,ta,ts,td,th,tm,tv,tg,ty,tb,tw,tZ,tx,tC,tS,tE,tG,tN,tL,tM=function(e){var t=S.D.active();if(e.openTelemetryTracing)return(0,I.eh)(t,"workspace.useCreateServices")}(e),tF=(eU=(t=(0,x._)((0,Z._)({},e),{ctx:null==tM?void 0:tM.childCtx})).connCtx,eW=void 0===(eX=t.runnerMode)?"outputs":eX,eV=t.onUnrecoverableError,ej=t.openFile,eq=t.openMultipleFiles,eJ=t.openMultipleURLs,eK=t.onFirewallDenied,e0=t.channelRequestPriority,e3=t.enableUserEvents,e8=t.enableMultipleLSPClientsPerFile,e6=t.onPresenceCommand,e5=t.getColorForUser,e7=t.openTelemetryTracing,tt=t.ctx,ti=function(e){var t=e.container,n=e.enabled,r=e.onEventSent,i=(0,A.ZP)();r&&i.on(b.EVENT_SENT,r);var o=null;function a(e,t){return l.apply(this,arguments)}function l(){return(l=(0,w._)(function(e,r){var o,a,l,s,u,d,f,h;return(0,_.Jh)(this,function(p){switch(p.label){case 0:if(!n)return[2];return[4,function(){return c.apply(this,arguments)}()];case 1:if(l=p.sent(),u=null==(s=t.getContext())?void 0:null===(o=s.currentUser)||void 0===o?void 0:o.id,d=null==s?void 0:null===(a=s.repl)||void 0===a?void 0:a.id,f=window.location.href,h={userEvent:{eventName:e,eventData:function e(t){if(!("object"==typeof t&&null!==t&&null!==Object.getPrototypeOf(t)))throw Error("encodeBareStruct must be called with a plain object");return{fields:Object.entries(t).reduce(function(t,n){var r=(0,C._)(n,2),i=r[0],o=r[1];return void 0===o||"object"==typeof o&&o&&0===Object.keys(o).length?t:(0,x._)((0,Z._)({},t),(0,nv._)({},i,function t(n){switch(void 0===n?"undefined":(0,ny._)(n)){case"string":return{kind:"stringValue",stringValue:n};case"number":return{kind:"numberValue",numberValue:n};case"boolean":return{kind:"boolValue",boolValue:n};case"object":if(null===n)return{kind:"nullValue",nullValue:null};if(Array.isArray(n))return{kind:"listValue",listValue:{values:n.map(t)}};return{kind:"structValue",structValue:e(n)};default:throw Error("Unexpected value: ".concat(n))}}(o)))},{})}}((0,Z._)({userId:u,replId:d,url:f},r))}},"open"!==l.status)return G.$e(function(e){e.setTag("service","user-events"),e.setExtra("command",h),e.setExtra("userId",u),e.setExtra("replId",d),e.setExtra("url",f),e.setExtra("channelId",l.id),G.Tb(Error("UserEvents channel is not open: ".concat(l.status)))}),[2];return i.emit(b.EVENT_SENT,e,r),l.send(h),[2]}})})).apply(this,arguments)}function c(){return(c=(0,w._)(function(){return(0,_.Jh)(this,function(e){return o?[2,o]:[2,new Promise(function(e){i.once(b.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}return a("meta:start",{}),t.openChannel({service:"null",skip:function(){return!n}},function(e){var t=e.channel;return a("meta:ready",{}),o=t,i.emit(b.CHANNEL_OPENED,t),function(){o=null}}),{emit:a}}({container:tn=(0,U.ZP)({connCtx:eU,onUnrecoverableError:eV,onFirewallDenied:eK,ctx:tt}),enabled:!!(void 0!==e3&&e3)}),ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,A.ZP)();t.setMaxListeners(1e3);var n=null,r={openFiles:[],activeTab:0};function i(e){tX()(r,e)||(r=e,t.emit(y.SESSION_STATE_CHANGED,r))}return{onSessionStateChanged:function(e){return t.on(y.SESSION_STATE_CHANGED,e),function(){t.removeListener(y.SESSION_STATE_CHANGED,e)}},onDeeplinkUpdated:function(e){return t.on(y.DEEPLINK_CHANGED,e),n&&(e(n),n=null),function(){t.removeListener(y.DEEPLINK_CHANGED,e)}},openFile:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.openFile){e.openFile({path:t,newTab:n.newTab,newPane:n.newPane,newPaneEdge:n.newPaneEdge,col:n.col,line:n.line});return}var o=n.tabIndex,a=n.newTab;if(void 0!==o){!function(e,t){var n=t||r.openFiles.length;if(e<0||e>=n||!Number.isInteger(e))throw Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(n))}(o,r.openFiles.length+1);var l=r.openFiles.slice(),c=r.openFiles.indexOf(t);if(-1===c){l.splice(o,1,t),i({openFiles:l,activeTab:l.indexOf(t)});return}if(c===o){i((0,x._)((0,Z._)({},r),{activeTab:l.indexOf(t)}));return}l.splice(c,1),l.splice(o,0,t);var s=l.indexOf(t);i({openFiles:l,activeTab:s});return}if(r.openFiles.includes(t)){i((0,x._)((0,Z._)({},r),{activeTab:r.openFiles.indexOf(t)}));return}var u=r.openFiles.slice();if(a){var d=0===u.length?0:r.activeTab+1;u.splice(d,0,t),i({openFiles:u,activeTab:d});return}var f=r.activeTab;u.splice(f,1,t),i({openFiles:u,activeTab:f})},updateDeeplink:function(e){t.emit(y.DEEPLINK_CHANGED,e),n=e},getActiveFile:function(){var e=r.openFiles,t=r.activeTab;if(0!==e.length)return e[t]},getState:function(){return r}}}({openFile:ej}),ts=(0,K.Z)({container:tn,channelRequestPriority:null==e0?void 0:e0.fs}),td=function(e){var t=e.container,n=e.onCommand,r=e.getColorForUser,i=(0,A.ZP)();i.setMaxListeners(1/0);var o=[],a=null,l=[],c={},s=null;function u(){return d.apply(this,arguments)}function d(){return(d=(0,w._)(function(){return(0,_.Jh)(this,function(e){return s?[2,s]:[2,new Promise(function(e){i.once(m.USERS_UPDATE,function(){if(!s)throw Error("Expected presenceChannel to be set");e(s)})})]})})).apply(this,arguments)}function f(e){tX()(a,e)||(a=e,i.emit(m.FOLLOWED_USER_CHANGED,e))}function h(){return(h=(0,w._)(function(e){var t,n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:if((null==a?void 0:a.username)===e)throw Error("Already following user with username ".concat(e));if(!a)return[3,2];return[4,p()];case 1:r.sent(),r.label=2;case 2:return[4,u()];case 3:if(t=r.sent(),!(n=o.find(function(t){return t.username===e})))return[2];return f(n),n.sessions.forEach(function(e){t.send({followUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}function p(){return v.apply(this,arguments)}function v(){return(v=(0,w._)(function(){var e,t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:if(!a)throw Error("No user to unfollow");return e=a,f(null),[4,u()];case 1:return t=n.sent(),e.sessions.forEach(function(e){t.send({unfollowUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}return t.openChannel({service:"presence",name:"presencer"},function(e){var t=e.channel;return t.onCommand(function(e){null==n||n(e);var t={cmd:e,emitter:i,activeUsers:o,userIdToFile:c,followedUser:a,setFollowedUser:f,followingUsers:l,getColorForUser:r};switch(e.body){case"roster":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser,c=e.getColorForUser,s=t.roster;if(s){var u=s.user,d=s.files;if(u&&d){var f=new Set;if(r.splice(0,r.length),u.forEach(function(e){if(!(!e.id||!e.name||!e.roles||f.has(e.id))){var t=d.filter(function(t){return t.userId===e.id}).map(function(e){if(!e.session||!e.timestamp)throw Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:(0,t9.gs)(e.timestamp)}}),n=null==c?void 0:c({userId:e.id});r.push({id:e.id,username:e.name,roles:e.roles,color:null!=n?n:(0,t9.i7)(r),sessions:t}),f.add(e.id)}}),r.forEach(function(e){i[e.id]=(0,t9.f0)(e)}),n.emit(m.USERS_UPDATE,(0,X._)(r)),a.filter(function(e){return!r.some(function(t){return t.id===e.id})}).forEach(function(e){var t=a.indexOf(e);-1!==t&&(a.splice(t,1),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,X._)(a),user:e,type:"unfollow"}))}),o){if(!r.some(function(e){return e.id===o.id})){l(null);return}var h=i[o.id];n.emit(m.USER_OPENED_FILE,{user:o,file:h})}}}}(t);break;case"join":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.getColorForUser,a=t.join;if(a.id&&a.name&&a.roles&&a.session){var l=r.find(function(e){return e.id===a.id}),c=Math.floor(Date.now()/1e3),s=B.google.protobuf.Timestamp.create({seconds:c}),u=(0,t9.gs)(s);if(l)l.sessions.push({id:a.session,activeFile:null,timestamp:u});else{var d=null==o?void 0:o({userId:a.id}),f={id:a.id,username:a.name,roles:a.roles,color:null!=d?d:(0,t9.i7)(r),sessions:[{id:a.session,activeFile:null,timestamp:u}]};i[a.id]=null,r.push(f),n.emit(m.USER_JOIN,f),n.emit(m.USERS_UPDATE,(0,X._)(r))}}}(t);break;case"part":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser;if(t.part&&t.part.id&&t.part.session){var c=t.part,s=c.id,u=c.session,d=r.findIndex(function(e){return e.id===s}),f=r[d];if(1===f.sessions.length){r.splice(d,1),delete i[f.id],n.emit(m.USER_LEAVE,f),n.emit(m.USERS_UPDATE,(0,X._)(r)),o&&l(null);var h=a.findIndex(function(e){return e.id===f.id});-1!==h&&(a.splice(h,1),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,X._)(a),user:f,type:"unfollow"}))}else{f.sessions=f.sessions.filter(function(e){return e.id!==u});var p=(0,t9.f0)(f);i[f.id]!==p&&(i[f.id]=p,n.emit(m.USER_OPENED_FILE,{user:f,file:p}))}}}(t);break;case"fileOpened":!function(e){var t=e.emitter,n=e.cmd,r=e.activeUsers,i=e.userIdToFile;if(n.fileOpened){var o=n.fileOpened,a=o.userId,l=o.file,c=o.timestamp,s=o.session,u=l||null;if(!a||!c)throw Error("Expected userId and timestamp associated with file opened command");var d=r.find(function(e){return e.id===a});if(!d)throw Error("Expected user with ID ".concat(a));var f=d.sessions.find(function(e){return e.id===s});if(!f)throw Error("Expected session with ID ".concat(f));f.activeFile=u,f.timestamp=(0,t9.gs)(c),i[a]=u,t.emit(m.USER_OPENED_FILE,{user:d,file:u})}}(t);break;case"followUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,o=t.followUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,t9.N5)(a,r);i.some(function(e){return e.id===l.id})||(i.push(l),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,X._)(i),user:l,type:"follow"}))}(t);break;case"unfollowUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,o=t.unfollowUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,t9.N5)(a,r),c=i.findIndex(function(e){return e.id===l.id});-1!==c&&(i.splice(c,1),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,X._)(i),user:l,type:"unfollow"}))}(t);break;case"sessionTimestampUpdated":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=t.sessionTimestampUpdated;if(!o.session||!o.timestamp)throw Error("Expected session and tiemstamp associated with update");var a=o.session,l=(0,t9.N5)(a,r),c=i[l.id],s=l.sessions.find(function(e){return e.id===a});if(!s)throw Error("Expected user ".concat(l.id," to have a session with ID ").concat(a));s.timestamp=(0,t9.gs)(o.timestamp);var u=s.activeFile;u!==c&&(i[l.id]=u,n.emit(m.USER_OPENED_FILE,{user:l,file:u}))}(t)}}),s=t,function(){s=null}}),{onUserLeave:function(e){return i.on(m.USER_LEAVE,e),function(){i.removeListener(m.USER_LEAVE,e)}},onUserJoin:function(e){return i.on(m.USER_JOIN,e),function(){i.removeListener(m.USER_LEAVE,e)}},onActiveUsersChange:function(e){return i.on(m.USERS_UPDATE,e),function(){i.removeListener(m.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return i.on(m.USER_OPENED_FILE,e),function(){i.removeListener(m.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return i.on(m.FOLLOWED_USER_CHANGED,e),function(){i.removeListener(m.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return i.on(m.FOLLOWING_USERS_CHANGED,e),function(){i.removeListener(m.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var t=c[e];if(void 0===t)throw Error("Expected file for user with ID ".concat(e," to be defined"));return t},updateOpenFile:function(e){return(0,w._)(function(){return(0,_.Jh)(this,function(t){switch(t.label){case 0:return[4,u()];case 1:return t.sent().send({openFile:{file:e}}),[2]}})})()},updateSessionTimestamp:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}})})()},followUser:function(e){return h.apply(this,arguments)},unfollowUser:p,getActiveUsers:function(){return o},getFollowedUser:function(){return a},getFollowingUsers:function(){return l},getUserIdToFile:function(){return c},getPathToUserIds:function(){var e=new Map;return o.forEach(function(t){var n=t.id,r=c[n];r&&function t(n,r){if(""!==n){e.has(n)||e.set(n,[]);var i,o=e.get(n);if(!o)throw Error("Expected user Ids");o.some(function(e){return e===r})||(null===(i=e.get(n))||void 0===i||i.push(r),t((0,e1.Il)(n),r))}}(r,n)}),e}}}({container:tn,onCommand:e6,getColorForUser:e5}),th=(0,D.Z)({container:tn,fs:ts,channelRequestPriority:null==e0?void 0:e0.dotReplit,ctx:tt}),tm=function(e){var t,n,r,i=e.container,o=(0,A.ZP)(),a=null;function l(){return c.apply(this,arguments)}function c(){return(c=(0,w._)(function(){return(0,_.Jh)(this,function(e){return a&&"open"===a.status?[2,a]:[2,new Promise(function(e){o.once(p.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}function s(){return u.apply(this,arguments)}function u(){return(u=(0,w._)(function(){return(0,_.Jh)(this,function(e){return[2,N({container:i,service:"nix"})]})})).apply(this,arguments)}return i.openChannel({service:"nix"},function(e){var t=e.channel;return a=t,o.emit(p.CHANNEL_OPENED,t),function(){a=null}}),{searchPackages:(t=(0,w._)(function(e){var t,n,r,i,o,a=arguments;return(0,_.Jh)(this,function(l){switch(l.label){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},[4,s()];case 1:return r=(n=C._.apply(void 0,[l.sent(),2]))[0],i=n[1],[4,r.request({nixPackageSearchRequest:(0,Z._)({query:e},t)})];case 2:if((o=l.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(i(),o.error)return[2,{error:o.error,packages:null}];if(!o.nixPackageSearchResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:o.nixPackageSearchResponse.packages,error:null}]}})}),function(e){return t.apply(this,arguments)}),listPackages:(0,w._)(function(){var e,t,n,r;return(0,_.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=C._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixPackageListRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(n(),r.error)return[2,{error:r.error,packages:null}];if(!r.nixPackageListResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:r.nixPackageListResponse.packages,error:null}]}})}),getChannels:(0,w._)(function(){var e,t,n,r;return(0,_.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=C._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelsRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channels:null}];if(n(),r.error)return[2,{error:r.error,channels:null}];if(!r.nixChannelsResponse)return[2,{error:"Response expected but none received",channels:null}];return[2,{channels:r.nixChannelsResponse.channels,error:null}]}})}),getLatestStableChannel:(0,w._)(function(){var e,t,n,r;return(0,_.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=C._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelLatestStableRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channel:null}];if(n(),r.error)return[2,{error:r.error,channel:null}];if(!r.nixChannelLatestStableResponse)return[2,{error:"Response expected but none received",channel:null}];return[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]}})}),addPackages:(n=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageAddRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageAddResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return n.apply(this,arguments)}),removePackages:(r=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageRemoveResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return r.apply(this,arguments)}),packageInfo:function(e){return(0,w._)(function(){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageInfoRequest:{name:e}})];case 2:if((t=n.sent()).channelClosed)return[2,{package:null,error:"channel closed"}];if(t.error)return[2,{package:null,error:t.error}];if(!t.nixPackageInfoResponse)return[2,{package:null,error:"response expected but non received"}];if(!t.nixPackageInfoResponse.package)return[2,{package:null,error:"package not found"}];return[2,{package:t.nixPackageInfoResponse.package,error:null}]}})})()}}}({container:tn}),tv=(0,O.Z)({container:tn,dotReplit:th}),tg=function(e){var t=e.container,n=e.forceTrace,r=e.track,i=(0,A.ZP)(),o=new Map;function a(e){var t=o.get(e);return t||(t={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},o.set(e,t)),t}function l(e){return c.apply(this,arguments)}function c(){return(c=(0,w._)(function(e){var n,r,i,o,a=arguments;return(0,_.Jh)(this,function(c){switch(c.label){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,[4,N({container:t,service:"packager3"})];case 1:if(i=(r=C._.apply(void 0,[c.sent(),2]))[0],o=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:c.sent(),c.label=3;case 3:if("open"!==i.status){if(n>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,l(e,n+1)]}return[2,[i,o]]}})})).apply(this,arguments)}function s(e){return u.apply(this,arguments)}function u(){return(u=(0,w._)(function(e){var n;return(0,_.Jh)(this,function(r){return((n=a(e)).didCallOpenChannel||function(e){var n=a(e);if(n.didCallOpenChannel)throw Error("Already called open channel");n.didCallOpenChannel=!0,n.closeChannel=t.openChannel({service:"packager3",name:e||"packager",action:B.api.OpenChannel.Action.ATTACH_OR_CREATE},function(t){var r=t.channel;return r.onCommand(function(t){if(null!=t.state){var n=t.state===B.api.State.Running;i.emit(d.STATE_CHANGED,n,e)}else null!=t.output?i.emit(d.OUTPUT,t.output,e):null!=t.error&&i.emit(d.ERROR,t.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){n.packagerChannel=r,i.emit(d.CHANNEL_OPENED,r,e)}):(n.packagerChannel=r,i.emit(d.CHANNEL_OPENED,r,e)),function(){n.packagerChannel=null}})}(e),n.packagerChannel&&"open"===n.packagerChannel.status)?[2,n.packagerChannel]:[2,new Promise(function(t){i.once(d.CHANNEL_OPENED,function(n,r){r===e&&t(n)})})]})})).apply(this,arguments)}return{addPackages:function(e,t){return(0,w._)(function(){var n,i,o,a;return(0,_.Jh)(this,function(l){switch(l.label){case 0:return[4,s(t)];case 1:if("open"!==(i=l.sent()).status)return[2,!1];return o=e.map(function(e){return{name:e.name,spec:e.version}}),[4,i.request({packageAdd:{pkgs:o,useNewResponse:!0}})];case 2:if((a=l.sent()).channelClosed||a.error)return[2,!1];return(null===(n=a.packageAddResponse)||void 0===n?void 0:n.installedSystemDependencies)&&r&&r(R.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,!0]}})})()},removePackages:function(e,t){return(0,w._)(function(){var n,r,i;return(0,_.Jh)(this,function(o){switch(o.label){case 0:return[4,s(t)];case 1:if("open"!==(n=o.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,n.request({packageRemove:{pkgs:r}})];case 2:if((i=o.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,t){return(0,w._)(function(){var n,r,i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return[4,l(t)];case 1:return r=(n=C._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageSearch:{query:e}})];case 2:if((o=a.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===o.body&&o.packageSearchResp)return[2,o.packageSearchResp.results||[]];return G.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageSearchResp. Received error: ".concat(o.error))),[2,[]]}})})()},fetchPackageInfo:function(e,t){return(0,w._)(function(){var n,r,i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return[4,l(t)];case 1:return r=(n=C._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((o=a.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===o.body&&o.packageInfoResp)return[2,o.packageInfoResp.pkg||void 0];return G.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageInfoResp. Received error: ".concat(o.error))),[2,void 0]}})})()},installPackages:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,w._)(function(){return(0,_.Jh)(this,function(o){var a;return[2,(0,I.nO)(e,"packager.installPackages",(a=(0,w._)(function(e){var o,a,l;return(0,_.Jh)(this,function(c){switch(c.label){case 0:return[4,s(t)];case 1:if("open"!==(o=c.sent()).status)return[2,(0,P.UG)("ChannelClosed")];return[4,o.request({packageInstall:{useNewResponse:!0,disableGuess:i},traceInfo:(0,I.Rg)(e),forceTrace:n})];case 2:if((a=c.sent()).error)return[2,(0,P.UG)(a.error)];if(a.channelClosed)return[2,(0,P.UG)("ChannelClosed")];if(!(l=a.packageInstallResponse))return[2,(0,P.UG)("No package install response found")];return l.installedSystemDependencies&&r&&r(R.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,(0,P.Ok)(l)]}})}),function(e){return a.apply(this,arguments)}))]})})()},listSpecfile:function(e){return(0,w._)(function(){var t,n,r,i,o,a,c;return(0,_.Jh)(this,function(s){switch(s.label){case 0:return[4,l(e)];case 1:return n=(t=C._.apply(void 0,[s.sent(),2]))[0],r=t[1],[4,n.request({packageListSpecfile:{}})];case 2:if((i=s.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":if(!(a=null===(o=i.packageListSpecfileResp)||void 0===o?void 0:o.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:a,error:null}];default:return c="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",G.Tb(Error(c)),[2,{packages:null,error:c}]}return[2]}})})()},getPackagerIds:function(){return Array.from(o.keys())},clearPackager:function(e){var t=o.get(e);(null==t?void 0:t.closeChannel)&&t.closeChannel(),o.delete(e)},onOutput:function(e){return i.on(d.OUTPUT,e),function(){i.removeListener(d.OUTPUT,e)}},onError:function(e){return i.on(d.ERROR,e),function(){i.removeListener(d.ERROR,e)}},onStateChanged:function(e){return i.on(d.STATE_CHANGED,e),function(){i.removeListener(d.STATE_CHANGED,e)}}}}({container:tn,forceTrace:e7,track:k.j}),ty=(i=(n={container:tn,fs:ts,openMultipleFiles:eq,openMultipleURLs:eJ}).container,o=n.fs,a=n.openMultipleFiles,l=n.openMultipleURLs,c=new Set,s=!1,u=null,i.openChannel({service:"open",name:"open"},function(e){e.channel.onCommand(function(e){if("replspaceApiOpenMultipleFiles"===e.body){if(!e.replspaceApiOpenMultipleFiles)throw Error("Expected replspaceApiOpenMultipleFiles");var t=e.replspaceApiOpenMultipleFiles,n=t.files,r=t.urls;a&&n.length>0&&(ni(),a({paths:n})),l&&r.length>0&&(ni(),l({urls:r}))}})}),i.openChannel({service:"git",name:"git"},function(e){var t,n=e.channel;return n.onCommand((t=(0,w._)(function(e){var t,r,i,l,d,f,h,p,m,v,g,y,b,w,Z,x;return(0,_.Jh)(this,function(C){switch(C.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7]}return[3,9];case 1:if(!e.replspaceApiOpenFile)throw Error("Expected replspaceApiOpenFile");if(r=(t=e.replspaceApiOpenFile).file,i=t.waitForClose,l=t.nonce,a)return[3,3];if(!r.endsWith(".git/COMMIT_EDITMSG"))return i&&n.send({replspaceApiCloseFile:{file:r,nonce:l}}),window.alert("tried to open ".concat(r," but failed")),[2];return d=window.prompt("Enter a commit message"),[4,o.writeFile(r,null!=d?d:"")];case 2:if(C.sent(),!i)return[2];return[3,5];case 3:if(ni(),a({paths:[r]}),!i||!u)return[2];return[4,u(r)];case 4:C.sent(),C.label=5;case 5:return[4,o.flush()];case 6:if(C.sent(),"open"!==n.status)return[2];return n.send({replspaceApiCloseFile:{file:r,nonce:l}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw Error("Expected replspaceApiGetGitHubToken");return f=function(){var t;"open"===n.status&&n.send({replspaceApiGitHubToken:{token:"",nonce:null===(t=e.replspaceApiGetGitHubToken)||void 0===t?void 0:t.nonce}})},[4,function(){return nr.apply(this,arguments)}()];case 8:if(null==(h=C.sent()).gitHubInfo)return f(),[2];if(!c.size)return f(),H.kg.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2];if(p=function(){var t,r;"open"===n.status&&n.send({replspaceApiGitHubToken:{token:null===(t=h.gitHubInfo)||void 0===t?void 0:t.accessToken,nonce:null===(r=e.replspaceApiGetGitHubToken)||void 0===r?void 0:r.nonce}})},s)return p(),[2];m=!1,v=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=c[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},g=!0,y=!1,b=void 0;try{for(w=c[Symbol.iterator]();!(g=(Z=w.next()).done)&&(x=Z.value,!m);g=!0)x(function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!m){if(m=!0,!e){f(),v();return}t&&(s=e),p(),v()}})}catch(e){y=!0,b=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw b}}C.label=9;case 9:return[2]}})}),function(e){return t.apply(this,arguments)})),function(){}}),i.openChannel({service:"shelltracker",name:"shelltracker"},function(e){e.channel.onCommand(function(e){if(null!=e.replspaceApiShellTracker){var t,n;(0,k.j)(k.U3.SHELL_COMMAND_EVALED,{context:e.replspaceApiShellTracker.cmd,replId:null===(n=i.getContext())||void 0===n?void 0:null===(t=n.repl)||void 0===t?void 0:t.id,api:"replspace",pwd:e.replspaceApiShellTracker.pwd})}})}),{onConfirmSendToken:function(e){var t=function(t){return e(t)};return c.add(t),function(){c.delete(t)}},setWaitForFileClose:function(e){u=e}}),tw=(g=(v={container:tn,beforeRun:tb=(h=(0,w._)(function(e,t){var n;return(0,_.Jh)(this,function(r){var i;return n=(null==t?void 0:t.ctx)||S.D.active(),[2,(0,I.nO)(n,"beforeRun",(i=(0,w._)(function(n){var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y;return(0,_.Jh)(this,function(b){switch(b.label){case 0:return[4,(0,I.nO)(n,"toolchain.getConfigs",function(){return tv.getConfigs()})];case 1:if((r=b.sent()).disableInstallBeforeRun)return[2];return i=(0,Z._)({},t),delete i.ctx,ti.emit("user:run:prerun",(0,Z._)({runnerMode:eW},i)),[4,(0,I.nO)(n,"fs.flush",function(){return ts.flush()})];case 2:if(b.sent(),e&&e("prerun flush finished"),!(null==r?void 0:r.packagers))return[3,10];o=!0,a=!1,l=void 0,b.label=3;case 3:b.trys.push([3,8,9,10]),c=r.packagers[Symbol.iterator](),b.label=4;case 4:if(o=(s=c.next()).done)return[3,7];if(!(u=s.value).guessImports)return[3,6];return d=performance.now(),f=r.disableGuessImports,[4,tg.installPackages(n,u.id,f)];case 5:h=b.sent(),p=performance.now()-d,e&&(h.error?e("prerun packager install finished",{packagerId:u.id,language:u.language,errorMessage:h.error,success:!1}):(g=(v=(null==(m=h.value)?void 0:m.guessedPkgs)||[]).length,e("prerun packager install finished",{packagerId:u.id,language:u.language,guessedPkgs:v,guessedPkgsCount:g,guessedAnyPkgs:g>0,upmGuessDurationMs:null==m?void 0:m.upmGuessDurationMs,upmAddDurationMs:null==m?void 0:m.upmAddDurationMs,upmLockDurationMs:null==m?void 0:m.upmLockDurationMs,backendTotalDurationMs:null==m?void 0:m.totalDurationMs,frontendTotalDurationMs:p,success:!0}),g>0&&(0,k.j)(R.U3.PACKAGER_PACKAGES_GUESSED,{packages:v}))),b.label=6;case 6:return o=!0,[3,4];case 7:return[3,10];case 8:return y=b.sent(),a=!0,l=y,[3,10];case 9:try{o||null==c.return||c.return()}finally{if(a)throw l}return[7];case 10:return ti.emit("user:run:initiate",{}),[2]}})}),function(e){return i.apply(this,arguments)}))]})}),function(e,t){return h.apply(this,arguments)})}).container,T=v.beforeRun,{mainClient:L=(0,M.u)(null),connect:function(){return new Promise(function(e){L.current||g.openChannel({service:"debugger"},function(t){return L.current=function(e){var t,n=e.channel,r=e.beforeRun,i=(0,M.u)("terminated"),o=(0,M.u)([]),a=(0,M.u)([]),l=(0,M.u)(new Map),c=(0,M.u)(null),s=(0,A.ZP)(),u=function(e,t){var n=new Map,r=new Map,i=new Map;function o(){return(o=(0,w._)(function(t){var o,a,l,c,s,u,d;return(0,_.Jh)(this,function(f){switch(f.label){case 0:o=!0,a=!1,l=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),c=function(){var n,o,a,l,c,s,d,f,h,p,m,v,g,y,b,w,x,S,k,E,T,R,I,D,B,G,A,P,N,L,O,U,M,X,F;return(0,_.Jh)(this,function(W){switch(W.label){case 0:if(o=(n=(0,C._)(u.value,2))[0],a=n[1],void 0!==t&&t!==o)return[2,"continue"];return[4,e({command:"setBreakpoints",arguments:{source:{name:o,path:o},breakpoints:a.map(function(e){return{line:e.line,logMessage:e.logMessage||void 0}})}})];case 1:if(!(l=W.sent()).success)return[2,"continue"];c=!0,s=!1,d=void 0;try{for(f=r[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){m=(p=(0,C._)(h.value,2))[0],v=p[1],(null===(g=v.source)||void 0===g?void 0:g.name)===o&&r.delete(m),y=!0,b=!1,w=void 0;try{for(x=i[Symbol.iterator]();!(y=(S=x.next()).done);y=!0)E=(k=(0,C._)(S.value,2))[0],k[1]===m&&i.delete(E)}catch(e){b=!0,w=e}finally{try{y||null==x.return||x.return()}finally{if(b)throw w}}}}catch(e){s=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw d}}T=l,R=!0,I=!1,D=void 0;try{for(B=T.body.breakpoints[Symbol.iterator]();!(R=(G=B.next()).done);R=!0)A=G.value,null!=A.id&&r.set(A.id,(0,Z._)({source:{name:o,path:o}},A))}catch(e){I=!0,D=e}finally{try{R||null==B.return||B.return()}finally{if(I)throw D}}P=!0,N=!1,L=void 0;try{for(O=(function(e,t){var n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:if(e.length!==t.length)return[2];n=0,r.label=1;case 1:if(!(n<e.length))return[3,4];return[4,[e[n],t[n]]];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}})})(a,T.body.breakpoints)[Symbol.iterator]();!(P=(U=O.next()).done);P=!0)X=(M=(0,C._)(U.value,2))[0],F=M[1],X.breakpointId&&null!=F.id&&i.set(X.breakpointId,F.id)}catch(e){N=!0,L=e}finally{try{P||null==O.return||O.return()}finally{if(N)throw L}}return[2]}})},s=n.entries()[Symbol.iterator](),f.label=2;case 2:if(o=(u=s.next()).done)return[3,5];return[5,(0,_.XA)(c())];case 3:f.sent(),f.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return d=f.sent(),a=!0,l=d,[3,8];case 7:try{o||null==s.return||s.return()}finally{if(a)throw l}return[7];case 8:return[2]}})})).apply(this,arguments)}function a(){var e=new Map,t=new Set,o=!0,a=!1,l=void 0;try{for(var c,s=n.entries()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,C._)(c.value,2),d=u[0],f=u[1];if(0!==f.length){var h=[],p=!0,m=!1,v=void 0;try{for(var g,y=f[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value;if(b.breakpointId&&b.line){var w=i.get(b.breakpointId),Z=void 0===w?void 0:r.get(w);Z&&t.add(w),h.push({dapId:w,pid1Id:b.breakpointId,line:Z&&Z.line||b.line,verified:!!(null==Z?void 0:Z.verified),logMessage:b.logMessage||void 0})}}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}e.set(d,h)}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}var x=!0,_=!1,S=void 0;try{for(var k,E=r.entries()[Symbol.iterator]();!(x=(k=E.next()).done);x=!0){var T=(0,C._)(k.value,2),R=T[0],I=T[1];if(!t.has(R)){var D=(0,F.IT)((null===(O=I.source)||void 0===O?void 0:O.path)||(null===(U=I.source)||void 0===U?void 0:U.name)||""),B=I.line;if(D&&B){var G=e.get(D);G||(G=[],e.set(D,G));var A=!1,P=!0,N=!1,L=void 0;try{for(var O,U,M,X=G[Symbol.iterator]();!(P=(M=X.next()).done);P=!0){var W=M.value;if(W.line===I.line){W.dapId=R,W.verified=I.verified,A=!0;break}}}catch(e){N=!0,L=e}finally{try{P||null==X.return||X.return()}finally{if(N)throw L}}A||G.push({dapId:R,line:B,verified:I.verified})}}}}catch(e){_=!0,S=e}finally{try{x||null==E.return||E.return()}finally{if(_)throw S}}return e}return{findPathByBreakpointId:function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=n.entries()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,C._)(o.value,2),c=l[0];if(l[1].some(function(t){return t.breakpointId===e}))return c}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return null},getBreakpoints:a,flush:function(e){return o.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var n=e.body,i=n.reason,o=n.breakpoint,l=o.id;if(null!=l){switch(i){case"changed":case"new":r.set(l,(0,Z._)({},r.get(l),o));break;case"removed":r.delete(l);break;default:return}t(a())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,F.IT)(e.absolutePath):null;r&&(n.set(r,e.breakpoints||[]),t(a()))},handleDebugSessionEnded:function(){r.clear(),i.clear();var e=!0,o=!1,l=void 0;try{for(var c,s=n.entries()[Symbol.iterator]();!(e=(c=s.next()).done);e=!0){var u=(0,C._)(c.value,2),d=u[0],f=u[1];0===f.length&&n.delete(d)}}catch(e){o=!0,l=e}finally{try{e||null==s.return||s.return()}finally{if(o)throw l}}t(a())}}}(y,function(e){l.current=e}),d=(0,M.u)(!1),f=[],h=new J(function(e){if(f.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":i.current="running";break;case"stopped":var t;i.current="paused",c.current=null!==(t=e.body.threadId)&&void 0!==t?t:null,s.emit("paused",e.body.reason),function(){E.apply(this,arguments)}();break;case"breakpoint":u.handleDAPBreakpointEvent(e)}else if("response"===e.type){var n=p.get(e.request_seq);n&&(p.delete(e.request_seq),n(e))}}),p=new Map,m=100;function v(){i.current="terminated",o.current=[],a.current=[],c.current=null,u.handleDebugSessionEnded(),d.current=!1}var g=!1;function y(e){return b.apply(this,arguments)}function b(){return(b=(0,w._)(function(e){return(0,_.Jh)(this,function(t){return[2,new Promise(function(t){var r,i=m++;p.set(i,t);var o=(0,x._)((0,Z._)({},e),{type:"request",seq:i});f.push({time:Date.now(),direction:"out",data:o});var a={debugInput:{session:"main",adapterInput:(r=JSON.stringify(o),"Content-Length: ".concat(Y.byteLength(r),"\r\n\r\n").concat(r))}};f.push({time:Date.now(),direction:"out",data:a}),n.send(a)})]})})).apply(this,arguments)}function S(e){return k.apply(this,arguments)}function k(){return(k=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return f.push({time:Date.now(),direction:"out",data:e}),[4,n.request(e)];case 1:if(t=r.sent(),f.push({time:Date.now(),direction:"in",data:t}),t.error)throw t.error;return[2,t]}})})).apply(this,arguments)}function E(){return(E=(0,w._)(function(){var e,t,n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return o.current=[],a.current=[],[4,y({command:"stackTrace",arguments:{threadId:c.current}})];case 1:if(!(e=r.sent()).success||(o.current=e.body.stackFrames,0===o.current.length))return[2];return[4,y({command:"scopes",arguments:{frameId:o.current[0].id}})];case 2:if(!(t=r.sent()).success)return[2];return[4,Promise.all(t.body.scopes.map(function(e){return y({command:"variables",arguments:{variablesReference:e.variablesReference}}).then(function(t){return{response:t,parentVariableReference:e.variablesReference}})}))];case 3:return n=r.sent(),a.current=n.filter(function(e){return e.response.success}).reduce(function(e,t){var n=t.response,r=t.parentVariableReference;return e.concat(n.body.variables.map(function(e){return(0,x._)((0,Z._)({},e),{parentVariableReference:r})}))},[]),[2]}})})).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=(0,w._)(function(e){var t,a,l,c,h,p,m;return(0,_.Jh)(this,function(v){switch(v.label){case 0:if("terminated"!==i.current)throw Error("Cant start while debugger is already running");return i.current="preinitializing",o.current=[],[4,r()];case 1:if(v.sent(),"stopping"===i.current)return i.current="terminated",[2];return g=!0,i.current="initializing",l={session:"main",readOnly:!1},e&&(l.debuggerId=e.debuggerOption.id,e.filePath&&(l.filePath=e.filePath)),c={debugMain:l},f.push({time:Date.now(),direction:"out",data:c}),[4,n.request(c)];case 2:if(h=v.sent(),f.push({time:Date.now(),direction:"in",data:h}),h.error)return s.emit("output",h.error),i.current="terminated",[2];return[4,y({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:if(!(p=v.sent()).success)return i.current="terminated",[2];return d.current=!!(null===(t=p.body)||void 0===t?void 0:t.supportsStepBack),m=!(null===(a=p.body)||void 0===a?void 0:a.supportsConfigurationDoneRequest),[4,u.flush()];case 4:if(v.sent(),m)return[3,6];return[4,y({command:"configurationDone"})];case 5:v.sent(),v.label=6;case 6:return"initializing"===i.current&&(i.current="running"),s.emit("started",m),[2]}})})).apply(this,arguments)}function I(e,t){return D.apply(this,arguments)}function D(){return(D=(0,w._)(function(e,t){var n,r,o,a;return(0,_.Jh)(this,function(l){switch(l.label){case 0:return n=t.line,r=t.otIndex,o=t.otVersion,a=t.logMessage,[4,S({debugAddBreakpointRequest:{path:(0,F.om)(e)||e,line:n,otIndex:r,otVersion:o,logMessage:a}})];case 1:if(l.sent(),!("terminated"!==i.current))return[3,3];return[4,u.flush(e)];case 2:l.sent(),l.label=3;case 3:return s.emit("breakpoint","added"),[2]}})})).apply(this,arguments)}function G(e){return P.apply(this,arguments)}function P(){return(P=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return t=u.findPathByBreakpointId(e),[4,S({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:if(n.sent(),!("terminated"!==i.current&&t))return[3,3];return[4,u.flush(t)];case 2:n.sent(),n.label=3;case 3:return s.emit("breakpoint","removed"),[2]}})})).apply(this,arguments)}function N(){return(N=(0,w._)(function(e,t){var n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:if(!(n=u.findPathByBreakpointId(e)))return[2];return[4,S({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:t.logMessage}})];case 1:if(r.sent(),!("terminated"!==i.current))return[3,3];return[4,u.flush(n)];case 2:r.sent(),r.label=3;case 3:return s.emit("breakpoint","updated"),[2]}})})).apply(this,arguments)}function L(){return(L=(0,w._)(function(e,t){var n,r,i;return(0,_.Jh)(this,function(o){switch(o.label){case 0:if(!(i=null===(r=l.current.get(e))||void 0===r?void 0:null===(n=r.find(function(e){return e.line===t.line&&void 0!==e.pid1Id}))||void 0===n?void 0:n.pid1Id))return[3,2];return[4,G(i)];case 1:return o.sent(),[3,4];case 2:return[4,I(e,t)];case 3:o.sent(),o.label=4;case 4:return[2]}})})).apply(this,arguments)}function O(e){return s.on("started",e),function(){s.removeListener("started",e)}}return n.onCommand(function(e){f.push({time:Date.now(),direction:"in",data:e});var t,n,r=e.debugOutput,o=e.debugState,a=e.debugBreakpointEvent,l=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&h.read(r.adapterOutput),r.output&&s.emit("output",r.output)}if(a&&u.handlePID1BreakpointEvent(a),o&&o.state===B.api.State.Stopped&&v(),((null==l?void 0:null===(t=l.sessions)||void 0===t?void 0:t.main)===B.api.State.Running||(null==o?void 0:o.state)===B.api.State.Running)&&"terminated"===i.current&&T(),(null==l?void 0:null===(n=l.sessions)||void 0===n?void 0:n.main)===B.api.State.Stopped||(null==o?void 0:o.state)===B.api.State.Stopped){if(g){g=!1;return}v()}}),{state:i,stackFrames:o,variables:a,breakpoints:l,supportsStepBack:d,onOutput:function(e){return s.on("output",e),function(){s.removeListener("output",e)}},onStarted:O,onPaused:function(e){return s.on("paused",e),function(){s.removeListener("paused",e)}},onBreakpoint:function(e){return s.on("breakpoint",e),function(){s.removeListener("breakpoint",e)}},sendInput:function(e){return(0,w._)(function(){var t,r;return(0,_.Jh)(this,function(i){switch(i.label){case 0:return t={debugInput:{session:"main",input:e}},f.push({time:Date.now(),direction:"out",data:t}),[4,n.request(t)];case 1:if(r=i.sent(),f.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}})})()},fetchVariables:function(e){return(0,w._)(function(){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,y({command:"variables",arguments:{variablesReference:e}})];case 1:if((t=n.sent()).success)return[2,t.body.variables.map(function(t){return(0,x._)((0,Z._)({},t),{parentVariableReference:e})})];throw Error(t.message)}})})()},evaluate:function(e){var n=e.frameId,r=void 0===n?null===(t=o.current[0])||void 0===t?void 0:t.id:n,i=e.expression,a=e.context;return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return[4,y({command:"evaluate",arguments:{frameId:r,expression:i,context:a}})];case 1:return[2,e.sent()]}})})()},addBreakpoint:I,removeBreakpoint:G,updateBreakpoint:function(e,t){return N.apply(this,arguments)},toggleBreakpoint:function(e,t){return L.apply(this,arguments)},start:T,continue:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return o.current=[],i.current="running",[4,y({command:"continue",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},reverseContinue:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return o.current=[],i.current="running",[4,y({command:"reverseContinue",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},back:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepBack",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},next:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepIn",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},skip:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"next",arguments:{threadId:c.current,granularity:"line"}})];case 1:return e.sent(),[2]}})})()},stepOut:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepOut",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},stop:function(){return(0,w._)(function(){var e,t,r,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:if("terminated"===i.current)throw Error("Debugger already terminated");if(e=i.current,i.current="stopping","preinitializing"===e)return[2];if("initializing"!==e)return[3,2];return t=[],[4,Promise.race([new Promise(function(e){t.push(i.subscribe(function(){return e()}))}),new Promise(function(e){t.push(O(function(){return e()}))})])];case 1:if(a.sent(),t.forEach(function(e){return e()}),"terminated"===i.current)return[2];a.label=2;case 2:return r={debugStop:{session:"main"}},f.push({time:Date.now(),direction:"out",data:r}),[4,n.request(r)];case 3:if(o=a.sent(),f.push({time:Date.now(),direction:"in",data:o}),o.error)throw Error("Failed to stop debugger "+o.error);return[2]}})})()},getSource:function(e){return(0,w._)(function(){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,y({command:"source",arguments:{source:{path:e}}})];case 1:if(!(t=n.sent()).success)throw Error(t.message);return[2,t.body.content]}})})()},getDebugLogs:function(){return Object.entries({state:i,stackFrames:o,variables:a,breakpoints:l,threadId:c}).map(function(e){var t=(0,C._)(e,2),n=t[0],r=t[1];return"".concat(n," = ").concat(JSON.stringify(r.current instanceof Map?(0,X._)(r.current):r.current,void 0,2))}).join("\n")+"\n\n"+f.map(function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")}).join("\n")}}}({channel:t.channel,beforeRun:T}),e(null),function(){L.current=null}})})}}),tZ=(0,E.TE)({container:tn,dotReplit:th}),tx=function(e){var t;if("outputs"===e.mode?t=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y=e.container,b=e.toolchain,x=e.beforeRun,C=e.packager,S=e.debuggest,E=(0,A.ZP)(),T=null,R={runId:nu()(),runState:no.Ah.OFFLINE,runningStage:"NONE",outputBlocks:[]};function D(e){R=(0,nc.Uy)(R,e)}function G(e){var t=R.outputBlocks.find(function(t){return t.id===e});if(!t)throw Error("can't find block for id: ".concat(e));E.emit(no.zW.BLOCK_CHANGED,t)}function P(){E.emit(no.zW.ALL_BLOCKS_CHANGED,R.outputBlocks)}function N(e){R.runState!==e&&(D(function(t){t.runState=e}),E.emit(no.zW.STATE_CHANGE,e))}function L(){if(!T){N(no.Ah.OFFLINE);return}if("BEFORE_RUN"===R.runningStage){N(no.Ah.BEFORE_RUN);return}if("STOPPING"===R.runningStage){N(no.Ah.STOPPING);return}if("NONE"!==R.runningStage){N(no.Ah.RUNNING);return}N(no.Ah.IDLE)}function O(e,t){var n=(null!=t?t:R).outputBlocks.filter(function(t){return t.type===e}),r=n[n.length-1];if(r)return r}function U(e,t){var n;D(function(r){var i=O(e,r);i&&(n=i.id,t(i))}),n&&G(n)}function M(){return(M=(0,w._)(function(e){return(0,_.Jh)(this,function(t){var n;return[2,(0,I.GK)("outputs.run",(n=(0,w._)(function(t){var n,r,i,o,a,l,c,s,u,d;return(0,_.Jh)(this,function(f){switch(f.label){case 0:if(R.runState!==no.Ah.IDLE&&R.runState!==no.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+R.runState);return i=R.outputBlocks.length>1&&R.outputBlocks[R.outputBlocks.length-1],(0,k.j)(k.U3.WS_CONSOLE_OUTPUT_STARTED,{replId:null===(n=y.getContext())||void 0===n?void 0:n.repl.id,runId:R.runId,lastBlock:i?(0,Z._)({type:i.type,isDone:i.isDone,endTime:i.endTime,startTime:i.startTime},i.type===no.kH.EXECUTION?{executionMode:i.data.executionMode,exitCode:i.data.exitCode,stderr:i.data.stderr}:{},i.type===no.kH.DEBUGGER?{debugState:i.data.debugState}:{}):void 0,previousBlockNumber:R.outputBlocks.length,previousBlocksAvgTimeMs:R.outputBlocks.length>1?Math.floor(R.outputBlocks.reduce(function(e,t){return t.endTime&&t.startTime?e+(t.endTime-t.startTime):e},0)):void 0}),o=nu()(),D(function(e){e.runId=o,e.runningStage="BEFORE_RUN"}),E.emit(no.zW.LOCAL_RUN),L(),!e&&(l=function(e,t,n,r){if(!(null==e?void 0:e.runs))return[];var i=[];if(t=t.slice(),n){var o=t.indexOf(n);-1!==o&&(t.splice(o,1),t.splice(0,0,n))}if(r){var a=t.indexOf(r);-1!==a&&t.splice(a,1),t.splice(0,0,r)}var l=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;if(f.match(/(\.[a-z0-9]+)$/)){var h=!0,p=!1,m=void 0;try{for(var v,g=e.runs[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.fileParam||y.optionalFileParam){var b=(0,tJ.rF)(y.fileTypeAttrs);null===b&&y.language&&(b=tJ.$R.from(y.language)),b&&(0,na.JW)(f,b)&&i.push({runner:y,filePath:f})}}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}var w=!0,Z=!1,x=void 0;try{for(var C,_=e.runs[Symbol.iterator]();!(w=(C=_.next()).done);w=!0){var S=C.value;S.fileParam||i.push({runner:S})}}catch(e){Z=!0,x=e}finally{try{w||null==_.return||_.return()}finally{if(Z)throw x}}return function(e){e.sort(function(e,t){var n=nl(e),r=nl(t);return n!==r?n-r:e.runner.interpreter===t.runner.interpreter?0:e.runner.interpreter?-1:1})}(i),i}(b.configs.current,[],null,(null===(a=b.configs.current)||void 0===a?void 0:a.entrypoint)||null)).length>0&&(e=l[0]),[4,x(c=H.kg.timeStart({runnerId:null==e?void 0:e.runner.id,filePath:null==e?void 0:e.filePath,isInterpreter:null==e?void 0:e.runner.interpreter,replLanguage:null===(r=y.getContext())||void 0===r?void 0:r.repl.language}),{runId:o,channelId:null==T?void 0:T.id,type:"outputs",runConfig:e,ctx:t})];case 1:if(f.sent(),R.runId!==o||"NONE"===R.runningStage||"SERVER"===R.runningStage)return[2];if(!T)throw Error("State is RUNNING but outputs is null?");if("open"!==T.status)return[2];return(s=X()).isStopped||s.stop(),u={},e&&(u.runnerId=e.runner.id,u.filePath=e.filePath),d=T,[4,(0,I.nO)(t,"timeToRunning",(0,w._)(function(){var e,t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return e=performance.now(),d.send({runMain:u}),[4,new Promise(function(e){var t=d.onCommand(function(n){"state"===n.body&&(t(),e())})})];case 1:return n.sent(),t=performance.now()-e,c("run finished",{timeToRunningMs:t}),[2]}})}))];case 2:return f.sent(),[2]}})}),function(e){return n.apply(this,arguments)}))]})})).apply(this,arguments)}function X(){var e=S.mainClient.current,t=null==e?void 0:e.state.current;return{client:e,state:t,sendInput:function(t){return null==e?void 0:e.sendInput(t)},stop:function(){return null==e?void 0:e.stop()},isRunning:"running"===t,isStopped:null==t||"terminated"===t}}function F(){return(F=(0,w._)(function(e){var t,n;return(0,_.Jh)(this,function(r){if(R.runState===no.Ah.OFFLINE)return[2];if(t=X(),n=R.outputBlocks[R.outputBlocks.length-1].type===no.kH.DEBUGGER,t.isRunning&&n&&t.sendInput(e),R.runState!==no.Ah.IDLE&&R.runState!==no.Ah.RUNNING)throw Error("Can only send input when running or idle");if(!T)throw Error("State is not OFFLINE but outputs is null?");return"open"!==T.status||T.send({input:e}),[2]})})).apply(this,arguments)}return n=(t={packager:C,updateState:D,getRunningBlockOfType:O,updateRunningBlockOfType:U,emitBlockUpdate:G}).packager,r=t.updateState,i=t.getRunningBlockOfType,o=t.updateRunningBlockOfType,a=t.emitBlockUpdate,(l=[]).push(n.onOutput(function(e){var t=i(no.kH.PACKAGER);null==t||t.data.emitMessage(e.replace(/\n/g,"\n\r"))})),l.push(n.onError(function(e){o(no.kH.PACKAGER,function(t){t.error?t.error+="\n"+e:t.error=e})})),l.push(n.onStateChanged(function(e){if(e){var t=nu()();r(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:no.MZ.EXPANDED,type:no.kH.PACKAGER,data:(0,Z._)({},nf({maxHistorySize:np}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),a(t)}else o(no.kH.PACKAGER,function(e){e.data.emitMessage(nm),e.localEndTime=Date.now(),e.isDone=!0})})),d=(c={debuggest:S,updateState:D,updateRunningBlockOfType:U,getRunningBlockOfType:O,emitRunState:N,emitBlockUpdate:G,stopCurrentRun:function(){D(function(e){e.runningStage="BEFORE_RUN"}),null==T||T.send({clear:{}})}}).debuggest,f=c.updateState,h=c.updateRunningBlockOfType,p=c.getRunningBlockOfType,m=c.emitBlockUpdate,v=c.emitRunState,g=c.stopCurrentRun,d.mainClient.subscribe(function(e){e&&(null==u||u(),null==s||s(),u=e.state.subscribe(function(e){if("initializing"===e){g();var t=nu()();f(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,type:no.kH.DEBUGGER,visualState:no.MZ.EXPANDED,data:(0,Z._)({debugState:"paused"},nf({maxHistorySize:np}))})}),m(t),v(no.Ah.RUNNING)}"paused"===e&&h(no.kH.DEBUGGER,function(e){e.data.debugState="paused"}),"running"===e&&h(no.kH.DEBUGGER,function(e){e.data.debugState="running"}),"stopping"===e&&v(no.Ah.STOPPING),"terminated"===e&&(h(no.kH.DEBUGGER,function(e){e.localEndTime=Date.now(),e.data.emitMessage(nm),e.isDone=!0}),v(no.Ah.IDLE))}),s=e.onOutput(function(e){var t=p(no.kH.DEBUGGER);null==t||t.data.emitMessage(e)}))}),y.openChannel({name:"output",service:"output"},function(e){var t=e.channel;return T=t,L(),t.onCommand(function(e){if(null!=e.state){var t=e.state===B.api.State.Stopped;"STOPPING"===R.runningStage&&t&&D(function(e){e.runningStage="NONE"}),t?"SERVER"===R.runningStage&&D(function(e){e.runningStage="NONE"}):D(function(e){e.runningStage="SERVER"}),L();return}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==R.outputBlocks.find(function(e){return e.type===no.kH.EXECUTION&&!e.isDone}))return;var n=e.outputBlockStartEvent,r=n.cgroup,i=n.executionMode,o=nh(n.measureStartTime),a=nu()();D(function(e){e.outputBlocks.push({id:a,localStartTime:Date.now(),startTime:o,isDone:!1,type:no.kH.EXECUTION,visualState:no.MZ.EXPANDED,data:(0,Z._)({cgroup:r,executionMode:i===B.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret"},nf({maxHistorySize:np}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),G(a)}if(null!=e.output){var l=O(no.kH.EXECUTION);null==l||l.data.emitMessage(e.output)}if(null!=e.hint){var c=O(no.kH.EXECUTION);null==c||c.data.emitMessage("\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))}if(null!=e.stderr&&U(no.kH.EXECUTION,function(t){t.data.stderr=(t.data.stderr||"")+e.stderr}),null!=e.error){var s=e.error;U(no.kH.EXECUTION,function(e){e.error?e.error+="\n"+s:e.error=s})}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var u,d=e.outputBlockEndEvent.exitCode;(0,k.j)(k.U3.WS_CONSOLE_OUTPUT_RAN,{exitCode:d,replId:null===(u=y.getContext())||void 0===u?void 0:u.repl.id,runId:R.runId});var f=nh(e.outputBlockEndEvent.measureEndTime);U(no.kH.EXECUTION,function(e){e.data.emitMessage(nm),e.data.exitCode=d,e.localEndTime=Date.now(),e.endTime=f,e.isDone=!0})}}),function(){T=null,D(function(e){e.runId=nu()(),e.runState=no.Ah.OFFLINE,e.runningStage="NONE",e.outputBlocks.forEach(function(e){if(!e.isDone){e.data.emitMessage(nm),e.localEndTime=Date.now(),e.isDone=!0;var t="Connection was lost";e.error?e.error+="\n"+t:e.error=t}})}),L(),P()}}),{mode:"outputs",run:function(e){return M.apply(this,arguments)},stopRun:function(){if(R.runState===no.Ah.RUNNING){var e=X();if(!e.isStopped){e.stop(),D(function(e){e.runningStage="STOPPING"}),L();return}if("BEFORE_RUN"===R.runningStage){D(function(e){e.runningStage="NONE"}),L();return}D(function(e){e.runningStage="STOPPING"}),L(),null==T||T.send({clear:{}})}},sendInput:function(e){return F.apply(this,arguments)},onLocalRun:function(e){return E.on(no.zW.LOCAL_RUN,e),function(){E.removeListener(no.zW.LOCAL_RUN,e)}},onStateChanged:function(e){return E.on(no.zW.STATE_CHANGE,e),function(){return E.removeListener(no.zW.STATE_CHANGE,e)}},getRunState:function(){return R.runState},getOutputBlocks:function(){return R.outputBlocks},clearBlockHistory:function(){D(function(e){e.outputBlocks=e.outputBlocks.filter(function(e){return!e.isDone})}),P()},onBlockChanged:function(e){return E.on(no.zW.BLOCK_CHANGED,e),function(){return E.removeListener(no.zW.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return E.on(no.zW.ALL_BLOCKS_CHANGED,e),function(){return E.removeListener(no.zW.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,t){if(T&&"open"===T.status){var n=R.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("tried to resize terminal of non-existing block");n.isDone||T.send({resizeTerm:t})}},startBlock:function(e){var t=nu()();return D(function(n){n.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:no.MZ.EXPANDED,type:e,data:(0,Z._)({},nf({maxHistorySize:np}))})}),G(t),{id:t}},endBlock:function(e){D(function(t){var n=t.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("couldn't find a block");n.data.emitMessage(nm),n.localEndTime=Date.now(),n.isDone=!0}),G(e)},writeOutputToBlock:function(e,t){var n=R.outputBlocks.find(function(t){return t.id===e});n&&n.data.emitMessage(t)},writeErrorToBlock:function(e,t){D(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.error?r.error+="\n"+t:r.error=t}),G(e)},setBlockVisualState:function(e,t){D(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.visualState=t}),G(e)}}}({container:e.container,toolchain:e.toolchain,beforeRun:e.beforeRun,packager:e.packager,debuggest:e.debuggest}):"html"===e.mode&&(t=function(e){var t=e.beforeRun,n=e.container,r=(0,A.ZP)(),i=no.Ah.OFFLINE,o="none",a=Math.random();function l(){var e=function(e){i!==e&&(i=e,r.emit(no.zW.STATE_CHANGE,i))};if("none"!==o){e(no.Ah.RUNNING);return}e(no.Ah.IDLE)}function c(){return(c=(0,w._)(function(){var e;return(0,_.Jh)(this,function(n){switch(n.label){case 0:if(i!==no.Ah.IDLE&&i!==no.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+i);return a=e=Math.random(),r.emit(no.zW.LOCAL_RUN),o="before-run",l(),[4,t(H.kg.timeStart({replLanguage:"html"}),{runId:e.toString(),type:"html"})];case 1:if(n.sent(),a!==e||"none"===o)return[2];return o="running",l(),o="none",l(),[2]}})})).apply(this,arguments)}return n.onConnectionStateChanged(function(e){e===U.em.CONNECTED&&(o="none",l())}),{mode:"html",run:function(){return c.apply(this,arguments)},stopRun:function(){if(i!==no.Ah.RUNNING)throw Error("stopRun must be called when running but got ".concat(i));o="none",l()},onStateChanged:function(e){return r.on(no.zW.STATE_CHANGE,e),function(){r.removeListener(no.zW.STATE_CHANGE,e)}},onLocalRun:function(e){return r.on(no.zW.LOCAL_RUN,e),function(){r.removeListener(no.zW.LOCAL_RUN,e)}},getRunState:function(){return i}}}({beforeRun:e.beforeRun,container:e.container})),!t)throw Error("mode not supported: "+e.mode);return t}({mode:eW,container:tn,toolchain:tv,beforeRun:tb,packager:tg,debuggest:tw}),tC=(V=(0,A.ZP)(),z=new Promise(function(e){return W=e}),j=null,q=new Map,tn.openChannel({service:"chat",name:"broadcaster"},function(e){var t=e.channel,n=e.context;return n.currentUser&&(j=n.currentUser.username),t.onCommand(function(e){if("chatMessage"===e.body){var t=e.chatMessage;if(!t||!t.username||!t.text)throw Error("unexpected broadcast without a message");V.emit(f.MESSAGE_RECEIVED,{text:t.text,username:t.username})}}),W(t),function(){z=new Promise(function(e){return W=e})}}),{broadcastMessage:function(e,t){var n=t.text;return(0,w._)(function(){var t,r,i,o,a,l,c,s,u,d;return(0,_.Jh)(this,function(f){switch(f.label){case 0:return[4,z];case 1:if(t=f.sent(),!j)throw Error("Cannot broadcast without as username. Is currentUser in context?");r={text:n,username:j},i=!0,o=!1,a=void 0;try{for(l=q[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)u=(s=(0,C._)(c.value,2))[0],d=s[1],u!==e&&d(r)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return t.send({chatMessage:r}),[2]}})})()},onBroadcastReceived:function(e,t){return q.set(e,t),V.on(f.MESSAGE_RECEIVED,t),function(){V.removeListener(f.MESSAGE_RECEIVED,t),q.delete(e)}}}),tS=function(e){var t=e.container,n=e.toolchain,r=e.fs,i=e.enableMultipleLSPClientsPerFile,o=void 0!==i&&i,a=new Map,l=new Map,c={},s=!0;function u(e){var t=c[e];if(!t)throw Error("LSPNix: removeLanguage called with lspId never configured");var n=t.client;if(n){t.client=null,n.destroy();var r=!0,i=!1,o=void 0;try{for(var s,u=a[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var d=(0,C._)(s.value,2),f=d[0],h=d[1],p=l.get(f);if(p){p.delete(n),l.set(f,p);var m=!0,v=!1,g=void 0;try{for(var y,b=h[Symbol.iterator]();!(m=(y=b.next()).done);m=!0)(0,y.value)(Array.from(p))}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}}}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}t.closeChannel(),delete c[e]}function d(e,t){if(c[e])throw Error("LSPNix: addLanguage called with lspId already configured");c[e]={client:null,option:t,closeChannel:function(){}},s&&m(e)}var f=new Map;function h(e){if(!s)return!1;var t=c[e];return!!t&&!t.client}function p(e,t,n){new Date().getTime()-n.getTime()<5e3?t<3?setTimeout(function(){h(e)&&m(e,t+1)},1e3*Math.pow(2,t)):H.kg.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"}):setTimeout(function(){h(e)&&m(e)})}function m(e){return v.apply(this,arguments)}function v(){return(v=(0,w._)(function(e){var n,i,u,d,h,m,v,g,y=arguments;return(0,_.Jh)(this,function(b){switch(b.label){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:0,!s)throw Error("LSPNix: Called startClient while not enabled");if(!c[e])throw Error("LSPNix: No config found for lspId: ".concat(e));if(!f.get(e))return[3,2];return[4,f.get(e)];case 1:if(b.sent())return[2];b.label=2;case 2:if(u=(i=c[e]).client,i.closeChannel,d=i.option,u)throw Error("LSPNix: A previous client is already set for language: ".concat(e));return h=function(){},m=new Promise(function(e){h=e}),f.set(e,m),v=[],g=t.openChannel({service:"lsp2",skip:function(e){var t=e.repl.language,n=t.startsWith("nix")||t.startsWith("html");return n||(H.kg.error("Skipped opening lsp channel for non-nix repl",{language:t,appService:"lspnix"}),h(null)),!n}},function(i){var u=i.channel,m=null,y=!1,b=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!y){y=!0,t||(h(null),f.delete(e)),v.forEach(function(e){return e()}),null==m||m.destroy(),(null===(o=c[e])||void 0===o?void 0:o.client)===m&&(c[e].client=null),t&&s||g();var n=!0,r=!1,i=void 0;try{for(var o,u,d=a[Symbol.iterator]();!(n=(u=d.next()).done);n=!0){var p=(0,C._)(u.value,2),b=p[0],w=p[1],Z=l.get(b);if(Z&&m&&Z.has(m)){Z.delete(m),Z.size?l.set(b,Z):l.delete(b);var x=!0,_=!1,S=void 0;try{for(var k,E=w[Symbol.iterator]();!(x=(k=E.next()).done);x=!0)(0,k.value)(Array.from(Z))}catch(e){_=!0,S=e}finally{try{x||null==E.return||E.return()}finally{if(_)throw S}}}}}catch(e){r=!0,i=e}finally{try{n||null==d.return||d.return()}finally{if(r)throw i}}}};if("open"!==u.status){H.kg.error("LSPNix got a channel that wasn't open. This is expected to be impossible.",{lspId:e,appService:"lspnix"});return}var S=new Date;return u.request({startLSP:{languageServerId:e}}).then(function(i){if(!i.ok){H.kg.error("LSP server failed to start",{lspId:e,appService:"lspnix",serverError:i.error});return}if(s&&c[e]){v.push(u.onCommand(function(t){t.state===B.api.State.Stopped&&(H.kg.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),b(),s&&p(e,n,S))}));var g=0;t6(t,function(){return g++<5&&s&&t8(c[e].option,d)&&"open"===u.status}).then(function(t){if(!c[e]){H.kg.info("LSPNix: lsp map changed while getting working directory",{lspId:e,appService:"lspnix"});return}if(!t8(c[e].option,d)){H.kg.info("LSPNix: configuration changed while getting working directory",{lspId:e,appService:"lspnix"});return}if("open"!==u.status){H.kg.error("LSPNix: channel wasn't open after getting working directory",{lspId:e,appService:"lspnix"});return}if(t.error){H.kg.error("LSPNix: failed to get working directory",{lspId:e,appService:"lspnix",originalError:null===(k=t.error)||void 0===k?void 0:k.message});return}if(m=function(e){var t,n=e.connection,r=e.isSupportedFile,i=e.clientId,o=e.clientName,a=e.getWorkspaceConfiguration,l=e.onWorkspaceConfigurationChange,c=e.applyWorkspaceEdit,s=(0,A.ZP)();s.setMaxListeners(1/0);var u=null,d=tq.a.OFFLINE,f=tq.N.NOT_READY,h=null,p=!1,m=new Map,v=new Map,g=null;function y(e){if(!u)throw Error("Expected rootUri");var t=e.slice(u.length+1);try{return decodeURIComponent(t)}catch(e){throw G.$e(function(n){n.setExtra("fragment_to_decode",t),G.Tb(e)}),e}}function b(e){if(!u)throw Error("Expected rootUri");if(e.startsWith("/"))throw Error("Path must be relative. Got: ".concat(e));return u+"/"+e}function C(e){d!==e&&(d!==tq.a.INITIALIZED&&S(tq.N.NOT_READY),d=e,s.emit("SERVER_STATE_CHANGE",d))}function S(e){f!==e&&(f=e,s.emit("SERVER_HEALTH_CHANGE",f))}function k(e){s.emit("SEND_NOTIFICATION",e),n.write(t4(e))}function E(e){return T.apply(this,arguments)}function T(){return(T=(0,w._)(function(e){var t,r,o,a,l,c,u,f;return(0,_.Jh)(this,function(h){if(a=void 0===(o=(r=void 0===(t=e.options)?{}:t).id)?t3():o,l=r.signal,c=r.tap,u=(0,tU._)(e,["options"]),!Number.isInteger(a))throw Error("Request ID must be an integer");return n.didClose()?[2,Promise.resolve({result:null,cancelled:!0})]:(s.emit("REQUEST",{id:a,data:u}),null==l||l.addEventListener("abort",function(){I(a)},{once:!0}),n.write(t4((0,x._)((0,Z._)({},u),{id:a}))),null===g&&(g=setTimeout(function(){S(tq.N.STALLED)},3e4)),f=new Promise(function(e){v.set(a,e)}),c&&c(f),[2,f.then(function(e){return null!==g&&(clearTimeout(g),g=null),d!==tq.a.INITIALIZED||e.cancelled||S(tq.N.READY),(function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=tK[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.supports(e))return a}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return new t$})(i).onResponse(u.method,e)})])})})).apply(this,arguments)}function R(e,t){n.write(t4((0,x._)((0,Z._)({},t),{id:e})))}function I(e){var t=v.get(e);t&&(s.emit("CANCEL_REQUEST",e),t({result:null,cancelled:!0}),v.delete(e),k({method:"$/cancelRequest",params:{id:e}}))}var D=0,B=new J(function(e){var t=v.get(e.id);if(e.id&&t){v.delete(e.id);var n=e.result,r=e.error;if((void 0!==n||r)&&s.emit("RESPONSE",e),void 0!==n){D=0,t({result:n,cancelled:!1});return}if(r){D++;var o=r.code,l=r.message,u=r.data;H.kg.error("LSP request failed",{code:o,lspId:i,errorMessage:l,data:JSON.stringify(u)}),t({error:r}),D>20&&(H.kg.error("LSP experienced 20 consecutive errors. Setting server health to 'BROKEN",{lspId:i}),S(tq.N.BROKEN),D=0);return}throw H.kg.error("LSP response message contained neither error nor result"),new tQ.Z("Expected either message or error in LSP response").setExtra("message",JSON.stringify(e))}var d=e.method;if("client/registerCapability"===d){var f=e.params.registrations;if(!f||!Array.isArray(f))throw Error("Expected registrations array");f.forEach(function(e){var t=e.method;if(!t)throw Error("Expected registration method");if(!h)throw Error("Expected server capabilities");var n=e.registerOptions||!0;switch(t){case"textDocument/definition":h.definitionProvider=!0;break;case"textDocument/typeDefinition":h.typeDefinitionProvider=!0;break;case"textDocument/implementation":h.implementationProvider=!0;break;case"textDocument/references":h.referencesProvider=!0;break;case"textDocument/hover":h.hoverProvider=!0;break;case"textDocument/semanticTokens":h.semanticTokensProvider=n;break;case"textDocument/completion":h.completionProvider=n;break;case"textDocument/formatting":h.documentFormattingProvider=n;break;case"textDocument/rename":h.renameProvider=n;break;case"textDocument/codeAction":h.codeActionProvider=n;break;case"textDocument/signatureHelp":h.signatureHelpProvider=n;break;case"textDocument/didSave":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{save:n});break;case"textDocument/willSaveWaitUntil":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{change:n});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":h.executeCommandProvider=n;break;default:H.kg.info("Unexpected dynamically registered capability in LSP client",{method:t})}s.emit("SERVER_CAPABILITIES_CHANGE",h)}),R(e.id,{result:null,cancelled:!1});return}if("workspace/applyEdit"===d){c(e.params).then(function(t){R(e.id,{result:t,cancelled:!1})});return}if("textDocument/publishDiagnostics"===d){var p=y(e.params.uri),g=m.get(p);if(!g)return;var b=e.params.diagnostics;if(tX()(g.diagnostics,b))return;g.diagnostics=b,s.emit("DIAGNOSTICS",{path:p,diagnostics:b});return}if("workspace/configuration"===d){var w,C=e.params,_=Array(C.items.length).fill(null),k=null!==(w=null==a?void 0:a())&&void 0!==w?w:null;k&&(_=C.items.map(function(e){return e.section?tW()(k,e.section):k})),R(e.id,{result:_,cancelled:!1})}("window/logMessage"===d||"telemetry/event"===d)&&s.emit("RECEIVE_NOTIFICATION",e),"workspace/semanticTokens/refresh"===d&&s.emit("SEMANTIC_TOKENS_REFRESH")});function P(e){if(!h)throw Error("Expected client to be initialized");if(!h[e])throw Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return h[e]}function N(e){return u&&e?e.filter(function(e){return"uri"in e?e.uri.startsWith(u):e.targetUri.startsWith(u)}):e}n.read(B.read);var L=function(){};return{initialize:function(e){var n=e.pwd,r=e.initializationOptions;return(0,w._)(function(){var e,i;return(0,_.Jh)(this,function(o){switch(o.label){case 0:return C(tq.a.INITIALIZING),u="file://".concat(n),[4,E({method:"initialize",params:{initializationOptions:r,capabilities:tj({configurationSupport:{serverToClient:!!a,clientToServer:!!l}}),processId:null,rootUri:u,workspaceFolders:[{name:u,uri:u}]}})];case 1:if("error"in(e=o.sent()))throw Error("Something went wrong initializing the LSP client: ".concat(e.error.message));if(e.cancelled)throw Error("Initialize request cancelled");if(!e.result)throw Error("Expected result in initialize request");return k({method:"initialized",params:{}}),h=e.result.capabilities,t=e.result.serverInfo,s.emit("SERVER_CAPABILITIES_CHANGE",h),C(tq.a.INITIALIZED),l&&(L=l(function(e){k({method:"workspace/didChangeConfiguration",params:{settings:e}})})),a&&(i=a())&&k({method:"workspace/didChangeConfiguration",params:{settings:i}}),[2]}})})()},generateId:t3,notify:{didOpen:function(e,t){if(!r(e))throw Error("Path not supported");var n,o=m.get(e);if(o&&0!==o.buffers){o.buffers++,m.set(e,o);return}var a=null!==(n=null==o?void 0:o.version)&&void 0!==n?n:0;m.set(e,{version:a,buffers:1,diagnostics:[]}),k({method:"textDocument/didOpen",params:{textDocument:{uri:b(e),languageId:t2(e,i),text:t,version:a}}})},didChange:function(e,t){var n=m.get(e);if(!n)throw Error('Document for "'.concat(e,'" is not open'));n.version++,k({method:"textDocument/didChange",params:{textDocument:{uri:b(e),version:n.version},contentChanges:t}})},didSave:function(e){if(!m.get(e))throw Error('Document for "'.concat(e,'" is not open'));P("textDocumentSync"),k({method:"textDocument/didSave",params:{textDocument:{uri:b(e)}}})},didClose:function(e){var t=m.get(e);if(!t)throw Error('Document for "'.concat(e,'" is not open'));t.buffers--,t.buffers>0||(k({method:"textDocument/didClose",params:{textDocument:{uri:b(e)}}}),m.delete(e))},cancelRequest:function(e){I(e)}},request:{completion:function(e,t,n,r){return P("completionProvider"),E({options:r,method:"textDocument/completion",params:{textDocument:{uri:b(e)},position:t,context:n}})},resolveCompletionItem:function(e){if(!P("completionProvider").resolveProvider)throw Error("LSP Server does not support resolving completion items");return E({method:"completionItem/resolve",params:e})},signatureHelp:function(e,t,n){return E({options:n,method:"textDocument/signatureHelp",params:{textDocument:{uri:b(e)},position:t}})},hover:function(e,t,n){return E({options:n,method:"textDocument/hover",params:{textDocument:{uri:b(e)},position:t}})},codeActions:function(e,t,n,r){var i=m.get(e);if(!i)throw Error("Document for path ".concat(e," is not open."));var o=i.diagnostics.filter(function(e){return(0,t0.dI)(e.range,t)});return E({method:"textDocument/codeAction",params:{textDocument:{uri:b(e)},range:t,context:(0,x._)((0,Z._)({},r),{diagnostics:o})},options:n})},resolveCodeAction:function(e){return E({method:"codeAction/resolve",params:e})},executeCommand:function(e,t){return E({method:"workspace/executeCommand",params:{command:e,arguments:t}})},format:function(e,t){return P("documentFormattingProvider"),E({method:"textDocument/formatting",params:{textDocument:{uri:b(e)},options:t}})},formatRange:function(e,t,n){return P("documentRangeFormattingProvider"),E({method:"textDocument/rangeFormatting",params:{textDocument:{uri:b(e)},range:t,options:n}})},findDefinitions:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,w._)(function(){var i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return P("definitionProvider"),[4,E({options:n,method:"textDocument/definition",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=N(Array.isArray(o)?o:[o])),[2,(0,x._)((0,Z._)({},i),{result:o})]}})})()},findTypeDefinitions:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,w._)(function(){var i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return P("typeDefinitionProvider"),[4,E({options:n,method:"textDocument/typeDefinition",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=N(Array.isArray(o)?o:[o])),[2,(0,x._)((0,Z._)({},i),{result:o})]}})})()},findImplementations:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,w._)(function(){var i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return P("implementationProvider"),[4,E({options:n,method:"textDocument/implementation",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=N(Array.isArray(o)?o:[o])),[2,(0,x._)((0,Z._)({},i),{result:o})]}})})()},findReferences:function(e,t,n){return P("referencesProvider"),E({method:"textDocument/references",params:{textDocument:{uri:b(e)},position:t,context:n}})},rename:function(e,t,n,r){return P("renameProvider"),E({options:r,method:"textDocument/rename",params:{textDocument:{uri:b(e)},position:t,newName:n}})},prepareRename:function(e,t){var n=P("renameProvider");if("boolean"==typeof n||!n.prepareProvider)throw Error("LSP server does not support prepare rename");return E({method:"textDocument/prepareRename",params:{textDocument:{uri:b(e)},position:t}})},documentHighlights:function(e,t,n){return(0,w._)(function(){return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,E({options:n,method:"textDocument/documentHighlight",params:{position:t,textDocument:{uri:b(e)}}})];case 1:return[2,r.sent()]}})})()},documentSymbol:function(e,t){return(0,w._)(function(){var n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,E({options:t,method:"textDocument/documentSymbol",params:{textDocument:{uri:b(e)}}})];case 1:if(!("result"in(n=r.sent())))return[2,n];if(n.result)return[2,{result:n.result,cancelled:!1}];return[2]}})})()}},semanticTokensFull:function(e,t){if(!P("semanticTokensProvider").full)throw Error("LSP server does not support full semantic tokens");return E({options:t,method:"textDocument/semanticTokens/full",params:{textDocument:{uri:b(e)}}})},semanticTokensDelta:function(e,t,n){var r=P("semanticTokensProvider");if(!(null==r?void 0:r.full)||"object"!=typeof r.full||!r.full.delta)throw Error("LSP server does not support delta semantic tokens");return E({options:n,method:"textDocument/semanticTokens/full/delta",params:{textDocument:{uri:b(e)},previousResultId:t}})},semanticTokensRange:function(e,t,n){if(!P("semanticTokensProvider").range)throw Error("LSP server does not support range semantic tokens");return E({options:n,method:"textDocument/semanticTokens/range",params:{textDocument:{uri:b(e)},range:t}})},onDiagnostics:(0,A.JV)(s,"DIAGNOSTICS"),onServerStateChange:(0,A.JV)(s,"SERVER_STATE_CHANGE"),onServerHealthChange:(0,A.JV)(s,"SERVER_HEALTH_CHANGE"),onServerCapabilitiesChange:(0,A.JV)(s,"SERVER_CAPABILITIES_CHANGE"),onRequest:(0,A.JV)(s,"REQUEST"),onResponse:(0,A.JV)(s,"RESPONSE"),onCancelRequest:(0,A.JV)(s,"CANCEL_REQUEST"),onSendNotification:(0,A.JV)(s,"SEND_NOTIFICATION"),onReceiveNotification:(0,A.JV)(s,"RECEIVE_NOTIFICATION"),onSemanticTokensRefresh:(0,A.JV)(s,"SEMANTIC_TOKENS_REFRESH"),shutdown:function(){for(var e in C(tq.a.EXITING),m.clear(),v)I(Number(e));L(),E({method:"shutdown"}).then(function(){k({method:"exit"}),C(tq.a.EXITED),s.removeAllListeners()})},isDestroyed:function(){return p},destroy:function(){for(var e in p=!0,m.clear(),v)I(Number(e));L(),C(tq.a.EXITED),s.removeAllListeners()},getServerState:function(){return d},getServerHealth:function(){return f},getServerCapabilities:function(){return h},getServerInfo:function(){return t},getDiagnostics:function(e){var t=m.get(e);if(!t)throw Error("File with path ".concat(e," is not open."));return t.diagnostics},isOpen:function(e){return m.has(e)},documentUriToPath:y,pathToDocumentURI:b,isSupportedFile:r,getLanguageId:function(e){return t2(e,i)},clientId:i,clientName:o}}({connection:{read:function(e){"open"===u.status&&u.onCommand(function(t){t.output&&e(t.output)})},write:function(e){if("open"!==u.status){(null==m?void 0:m.isDestroyed())&&H.kg.error("LSPNix: tried to write to channel but the lsp client is already destroyed");return}u.send({input:e})},didClose:function(){return"open"!==u.status}},clientId:e,clientName:c[e].option.name,isSupportedFile:function(e){return(0,tP.F)(e,d)},applyWorkspaceEdit:(g=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){return(t=e.edit,m)?[2,(0,tO.w)({edit:t,fs:r,client:m})]:[2,{applied:!1}]})}),function(e){return g.apply(this,arguments)}),getWorkspaceConfiguration:function(){if(!(null===(e=d.config)||void 0===e?void 0:e.configurationJson))return null;var e,t=null;try{t=JSON.parse(d.config.configurationJson)}catch(e){H.kg.error("Failed to parse LSP workspace configuration",{configurationJson:d.config.configurationJson})}return t}}),null===(y=d.config)||void 0===y?void 0:y.initializationOptionsJson)try{E=JSON.parse(d.config.initializationOptionsJson)}catch(e){H.kg.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:d.config.initializationOptionsJson})}var i,g,y,k,E,T=m.initialize({pwd:t.workingDirectory,initializationOptions:E}).catch(function(t){if((null==t?void 0:t.message)!=="Initialize request cancelled")throw H.kg.error("LSPNix: failed to initialize client",{lspId:e,appService:"lspnix",originalError:null==t?void 0:t.message}),t});v.push(m.onServerHealthChange(function(t){if(t===tq.N.BROKEN&&(H.kg.info("LSP: Server health broken",{lspId:e}),b(),s)){H.kg.info("LSP: retrying after server health broken",{lspId:e}),p(e,n,S);return}}),m.onServerStateChange((i=(0,w._)(function(t){var n,r,i,s,p,v,g,y,w,Z,x,S,k,E,R;return(0,_.Jh)(this,function(_){switch(_.label){case 0:if("open"!==u.status)return H.kg.info("LSPNix: channel wasn't open on state change",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(!m)return H.kg.info("LSPNix: client was null on state change. This should never happen",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(!t8(c[e].option,d))return H.kg.info("LSPNix: configuration changed and received state change",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(t===tq.a.EXITED)return H.kg.info("LSP server exited via 'exit' notification",{lspId:e,appService:"lspnix"}),b(),[2];if(t!==tq.a.INITIALIZED)return[2];return[4,T];case 1:if(_.sent(),"open"!==u.status)return H.kg.info("LSPNix: channel wasn't open after initialization",{lspId:e,appService:"lspnix"}),b(),[2];h(m),f.delete(e),c[e].client=m,n=!0,r=!1,i=void 0;try{for(s=a[Symbol.iterator]();!(n=(p=s.next()).done);n=!0)if(g=(v=(0,C._)(p.value,2))[0],y=v[1],(0,tP.F)(g,d)&&(w=l.get(g),o||!w||!w.size)){Z=w?w.add(m):new Set([m]),l.set(g,Z),x=!0,S=!1,k=void 0;try{for(E=y[Symbol.iterator]();!(x=(R=E.next()).done);x=!0)(0,R.value)(Array.from(Z))}catch(e){S=!0,k=e}finally{try{x||null==E.return||E.return()}finally{if(S)throw k}}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return[2]}})}),function(e){return i.apply(this,arguments)})))})}}),function(e){b(e.willReconnect)}}),c[e].closeChannel=g,[2]}})})).apply(this,arguments)}function g(e){var t=null==e?void 0:e.languageServers;if(!t||0===t.length){var n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(c)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;u(l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return}var s={},f=!0,h=!1,p=void 0;try{for(var m,v=t[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;s[g.id]=g}}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}var y=!0,b=!1,w=void 0;try{for(var Z,x=Object.keys(c)[Symbol.iterator]();!(y=(Z=x.next()).done);y=!0){var C=Z.value;s[C]||u(C)}}catch(e){b=!0,w=e}finally{try{y||null==x.return||x.return()}finally{if(b)throw w}}var _=!0,S=!1,k=void 0;try{for(var E,T=Object.keys(s)[Symbol.iterator]();!(_=(E=T.next()).done);_=!0){var R=E.value,I=c[R],D=s[R];if(!I){d(R,D);continue}t8(I.option,D)||(u(R),d(R,D))}}catch(e){S=!0,k=e}finally{try{_||null==T.return||T.return()}finally{if(S)throw k}}}function y(){return(y=(0,w._)(function(){var e;return(0,_.Jh)(this,function(t){try{e=n.configs.current,g(e),n.configs.subscribe(g)}catch(e){H.kg.error("LSP initialization failed: "+e.message)}return[2]})})).apply(this,arguments)}return function(){y.apply(this,arguments)}(),{disable:function(){if(s){s=!1;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.values(c)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.closeChannel(),null===(h=o.client)||void 0===h||h.destroy(),o.client=null;var u=!0,d=!1,f=void 0;try{for(var h,p,m=a[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var v=(0,C._)(p.value,2),g=v[0],y=v[1];if(l.has(g)){l.delete(g);var b=!0,w=!1,Z=void 0;try{for(var x,_=y[Symbol.iterator]();!(b=(x=_.next()).done);b=!0)(0,x.value)([])}catch(e){w=!0,Z=e}finally{try{b||null==_.return||_.return()}finally{if(w)throw Z}}}}}catch(e){d=!0,f=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw f}}}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},enable:function(){if(!s){s=!0;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.keys(c)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;m(o)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},onClient:function(e,t){a.has(e)||a.set(e,[]),null===(d=a.get(e))||void 0===d||d.push(t);var n=l.get(e);if(n&&n.size)t(Array.from(n));else{var r=[],i=!0,s=!1,u=void 0;try{for(var d,f,h=Object.values(c)[Symbol.iterator]();!(i=(f=h.next()).done);i=!0){var p=f.value;if((0,tP.F)(e,p.option)&&p.client&&(r.push(p.client),!o))break}}catch(e){s=!0,u=e}finally{try{i||null==h.return||h.return()}finally{if(s)throw u}}r.length&&t(r)}return function(){var n,r=null!==(n=a.get(e))&&void 0!==n?n:[];a.set(e,r.filter(function(e){return e!==t}))}}}}({container:tn,toolchain:tv,fs:ts,enableMultipleLSPClientsPerFile:void 0!==e8&&e8}),tE=(ee=($={container:tn,beforeRun:tb}).container,et=$.beforeRun,er=(0,A.ZP)(),el=tB.Z.Idle,eu=new Date(0),ed=!1,er.on(tB.z.TEST_RESULT,function(e){ed=ed&&"passed"===e.body}),ef=function(e){er.emit(tB.z.STATE_CHANGED,e),el=e},ep=(0,w._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f;return(0,_.Jh)(this,function(h){switch(h.label){case 0:if(n=tD.api.Payload.fromObject(t),r=tD.api.Payload.verify(n))throw r;return i=new(tA())(function(e){var t=tD.api.Response.fromObject(e),r=tD.api.Response.verify(t);if(r){G.Tb(TypeError("invalid payload received"),function(i){return i.setExtras({validationError:r,payload:n,message:e,response:t})});return}switch(t.body){case"error":return er.emit(tB.z.ERROR,t.error);case"instructionResult":return er.emit(tB.z.INSTRUCTION_RESULT,t.instructionResult);case"testResult":return er.emit(tB.z.TEST_RESULT,t.testResult);case"status":switch(t.status){case tD.api.Status.Ready:return ef(tB.Z.Ready);case tD.api.Status.Building:return ef(tB.Z.Building);case tD.api.Status.Running:return ef(tB.Z.Running)}}}),o=e.onCommand(function(e){if(e.output)try{i.submit(e.output)}catch(t){G.Tb(SyntaxError("invalid response received from i/o testing binary"),function(r){return r.setExtras({err:t,payload:n,cmd:e})})}}),a=e.request({exec:{args:["io-tester"],splitStderr:!0,lifecycle:B.api.Exec.Lifecycle.STDIN,splitLogs:!0}}),[4,new Promise(function(e,t){var n,r=function(){n(),e()};er.once(tB.z.STATE_CHANGED,r);var i=setTimeout(function(){n(),t(Error("timeout while waiting for iotester to start"))},2e4);n=function(){clearTimeout(i),er.off(tB.z.STATE_CHANGED,r)}})];case 1:return h.sent(),[4,e.request({input:JSON.stringify(n)+"\n"})];case 2:if(!(l=h.sent()).ok)throw s=Error(null!==(c=l.error)&&void 0!==c?c:"unexpected error occurred while sending input to i/o testing binary"),G.Tb(s,function(e){return e.setExtra("status",l)}),s;return[4,a];case 3:return(u=h.sent()).ok||(f=Error(null!==(d=u.error)&&void 0!==d?d:"unexpected error occurred while executing i/o testing binary"),G.Tb(f,function(e){return e.setExtra("result",u)})),o(),[2]}})}),{run:function(e){if(el!==tB.Z.Idle)throw Error("iotester already running");return ef(tB.Z.Starting),eu=new Date,ed=!0,et().then(function(){return new Promise(function(t){var n=ee.openChannel({service:"exec"},function(r){var i="",o="",a=r.channel.onCommand(function(e){e.log?i+=e.log:e.stderr&&(o+=e.stderr)});return t((function(e,t){return ep.apply(this,arguments)})(r.channel,e).finally(function(){a(),n(),(o||i)&&G.Tb(Error("logs received from IOTester"),function(t){return t.setExtras({logs:i,stderr:o,payload:e})})})),n})})}).catch(function(e){return ed=!1,Promise.reject(e)}).finally(function(){return ef(tB.Z.Idle)})},get lastRunAt(){return eu},get state(){return el},get lastRunDidPass(){return ed},onInstructionResult:function(e){return er.on(tB.z.INSTRUCTION_RESULT,e),function(){er.off(tB.z.INSTRUCTION_RESULT,e)}},onStateChanged:function(e){return er.on(tB.z.STATE_CHANGED,e),function(){er.off(tB.z.STATE_CHANGED,e)}},onTestResult:function(e){return er.on(tB.z.TEST_RESULT,e),function(){er.off(tB.z.TEST_RESULT,e)}},onError:function(e){return er.on(tB.z.ERROR,e),function(){er.off(tB.z.ERROR,e)}}}),tG=(ey=(ev={container:tn,fs:ts}).container,ew=ev.fs,eS=void 0===(ex=ev.provideProfiles)?t_:ex,(ek=(0,A.ZP)()).setMaxListeners(1/0),eE=tk(),eT=!1,eR=new Map,eI=null,eD=ey.getContext(),eA=new eP({container:ey,getEnv:function(){return eE},awaitPromise:(eB=(0,w._)(function(e){var t,n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,eS({defaultUsername:null==eD?void 0:null===(t=eD.currentUser)||void 0===t?void 0:t.username,defaultUserId:null==eD?void 0:null===(n=eD.currentUser)||void 0===n?void 0:n.id,onProfiles:function(t){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,C._)(o.value,2),c=l[0],s=l[1];eR.set(c,s),ek.emit(eo.dq.NEW_PROFILE)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t.has(eo.rG.GITHUB)||eR.delete(eo.rG.GITHUB);var u=eR.get(eo.rG.REPLIT_DEFAULT),d=eR.get(eo.rG.GITHUB);if(eI&&!e&&(e=eI.provider),e===eo.rG.GITHUB&&d)eI=d;else{if(!u)return;eI=u}ek.emit(eo.dq.CHANGED_PROFILE)}})];case 1:return[2,r.sent()]}})}),eG=function(e){return eB.apply(this,arguments)})(eo.rG.GITHUB)}),ek.on(eo.dq.FS_CHANGE,function(){return eA.cache.invalidate()}),ek.on(eo.dq.FORCED_REFRESH,function(){return eA.cache.invalidate()}),ek.on(eo.dq.NEW_PROFILE,function(){return eA.cache.invalidate()}),ek.on(eo.dq.CHANGED_PROFILE,function(){return eA.cache.invalidate()}),eN=function(){var e,t=ey.getContext(),n=null==t?void 0:null===(e=t.currentUser)||void 0===e?void 0:e.id;if(null!=n){var r="[init]\ndefaultBranch = main\n[user]\n";""!==eE.GIT_AUTHOR_EMAIL&&(r+="email = ".concat(eE.GIT_AUTHOR_EMAIL.replace(/'/g,"'\"'\"'"),"\n")),""!==eE.GIT_AUTHOR_NAME&&(r+="name = ".concat(eE.GIT_AUTHOR_NAME.replace(/'/g,"'\"'\"'"),"\n"));var i="/run/replit/user/".concat(n,"/.config/git");null!=n&&ey.exec("bash","-c","tmpf=$(mktemp); mkdir -p ".concat(i," && echo '").concat(r,'\' > "$tmpf" && mv "$tmpf" ').concat("".concat(i,"/config")))}},ey.onConnectionStateChanged(function(e){e===U.em.CONNECTED&&eN()}),ek.on(eo.dq.CHANGED_PROFILE,function(){null!=eI&&(eE=tk({author:{username:eI.name,email:eI.email}}),eN())}),{getEnv:function(){return eE},getProfiles:function(){return Array.from(eR.values())},hasProfile:function(e){return eR.has(e)},getProfile:function(e){var t=eR.get(e);if(!t)throw Error("Fetched a profile that has not been setup!");return t},addProfile:function(e){eR.set(e.provider,e),ek.emit(eo.dq.NEW_PROFILE)},getCurrentProfile:function(){return eI},setCurrentProfile:function(e){var t=eR.get(e);if(!t)throw Error("Can't set a non-existent profile!");eI=t,eE=tk({author:{username:t.name,email:t.email}}),ek.emit(eo.dq.CHANGED_PROFILE)},onProfileAdded:function(e){var t=function(){e(Array.from(eR.values()))};return ek.on(eo.dq.NEW_PROFILE,t),function(){ek.off(eo.dq.NEW_PROFILE,t)}},onCurrentProfileChanged:function(e){var t=function(){e(eI)};return ek.on(eo.dq.CHANGED_PROFILE,t),function(){ek.off(eo.dq.CHANGED_PROFILE,t)}},refreshProfiles:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preferredProvider;return eG(e)},onRefresh:function(e){eT||(function(e,t,n){var r,i,o,a,l,c,s,u,d,f,h=!1,p=!1,m=(r=function(){return n.emit(eo.dq.FS_CHANGE)},a=(i={wait:1e3,cooldown:5e3,maxWait:5e3}).wait,l=i.cooldown,c=i.maxWait,s=null,u=!1,d=eL()(function(e){return s=setTimeout(function(){return s=null},l),u=!1,o=r.apply(void 0,(0,X._)(e))},a,{maxWait:c}),(f=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return null!==s?o:(u||(u=!0),d(t))}).cancel=function(){null!==s?(clearTimeout(s),s=null):(d.cancel(),u=!1)},f.flush=function(){return null!==s?(clearTimeout(s),s=null,o):d.flush()},f.isPending=function(){return u},f.isInCooldown=function(){return null!==s},f);function v(){return(v=(0,w._)(function(){var n;return(0,_.Jh)(this,function(r){return n=!0,t.watchDir(tT.Ql,{onChange:function(r){!h&&r.find(function(e){return e.filename===tI&&e.type===tR.Tv.Directory})&&(function(){if(!h){h=!0;var n=!0;t.watchDir(tI,{onChange:function(){n?n=!1:m()},onMoveOrDelete:function(){h=!1,m()},onError:function(t,n){h=!1,RegExp(".+permission denied","im").test(t.message)||e.unrecoverableError(t,n)}})}}(),n||m()),n&&(n=!1)},onError:function(t,n){return e.unrecoverableError(t,n)}}),[2]})})).apply(this,arguments)}(function(){v.apply(this,arguments)})(),t.onStatusChange(function(e){h&&(e===tR.kO.Syncing&&m.isInCooldown()?p=!0:e===tR.kO.Clean&&(p||m(),p=!1))})}(ey,ew,ek),eT=!0);var t=function(){return e(eo.dq.FS_CHANGE)},n=function(){return e(eo.dq.FORCED_REFRESH)},r=function(){return e(eo.dq.NEW_PROFILE)},i=function(){return e(eo.dq.CHANGED_PROFILE)};return ek.on(eo.dq.FS_CHANGE,t),ek.on(eo.dq.FORCED_REFRESH,n),ek.on(eo.dq.NEW_PROFILE,r),ek.on(eo.dq.CHANGED_PROFILE,i),function(){ek.off(eo.dq.FS_CHANGE,t),ek.off(eo.dq.FORCED_REFRESH,n),ek.off(eo.dq.NEW_PROFILE,r),ek.off(eo.dq.CHANGED_PROFILE,i)}},forceRefresh:function(){ek.emit(eo.dq.FORCED_REFRESH)},isBusy:function(){return eA.running.current},onBusyChange:function(e){var t=!1,n=eL()(e,200);return eA.running.subscribe(function(e){t&&!e?(n(!1),t=!1):!t&&e&&(n(!0),t=!0)})},init:eA.wrap(e9,"write"),isInitialized:eA.wrap(te,"read"),lsFiles:eA.wrap(to,"read"),status:eA.wrap(eC.Z,"read"),log:eA.wrap(tr,"read"),findDefaultBranches:eA.wrap(eY,"read"),listBranches:eA.wrap(e$.ZP,"read"),setBranchUpstream:eA.wrap(Q,"write"),stageFiles:eA.wrap(tp,"write"),commit:eA.wrap(eM,"write"),switchBranch:eA.wrap(eF,"write"),branchExists:eA.wrap(eh,"read"),createBranch:eA.wrap(eH,"write"),getRemotes:eA.wrap(e4,"read"),fetch:eA.wrap(ez,"write"),canMergeBranches:eA.wrap(em,"read"),pull:eA.wrap(tl.Z,"write"),push:eA.wrap(tc,"write"),getRepositoryState:eA.wrap(ei.ZP,"read"),getFileContents:eA.wrap(e2,"read"),addRemote:eA.wrap(eO,"write"),removeRemote:eA.wrap(tu,"write"),setRemoteURL:eA.wrap(tf,"write"),getBranch:eA.wrap(eQ,"read"),restoreFiles:eA.wrap(e_,"write"),lastFetched:eA.wrap(es,"read"),merge:eA.wrap(eg,"write"),mergeContinue:eA.wrap(eZ,"write"),mergeAbort:eA.wrap(eb,"write"),getConflictingFiles:eA.wrap(en,"read"),getMergingRefs:eA.wrap(ea,"read"),getFilesForCommit:eA.wrap(ec.ZP,"read"),escapeHatchGitExecRead:eA.wrap(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,(0,X._)(n))},"read"),escapeHatchGitExecWrite:eA.wrap(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,(0,X._)(n))},"write")}),tN=function(e){var t,n,r=e.container,i=e.nixService;function o(e){return a.apply(this,arguments)}function a(){return(a=(0,w._)(function(e){return(0,_.Jh)(this,function(t){switch(t.label){case 0:if(e&&(n=void 0),!n){var r;n=new Promise((r=(0,w._)(function(e){var t,n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,i.listPackages()];case 1:if(null==(n=r.sent())?void 0:null===(t=n.packages)||void 0===t?void 0:t.some(function(e){return"pkgs.postgresql"===e.name}))return[3,3];return[4,i.addPackages(["pkgs.postgresql"])];case 2:return r.sent(),e(),[3,4];case 3:e(),r.label=4;case 4:return[2]}})}),function(e){return r.apply(this,arguments)}))}return[4,n];case 1:return t.sent(),[2]}})})).apply(this,arguments)}return{ensureNixPsqlPackageInstalled:o,run:(t=(0,w._)(function(e){var t,n,i,a,l,c,s,u,d,f,h,p,m;return(0,_.Jh)(this,function(v){switch(v.label){case 0:return t=e.query,n=e.connectionString,[4,o()];case 1:v.sent(),i=(0,ne.Z)({container:r}),a=[],l=null,c=new t7.t(function(e){return a.push(e)}),s=null,u=!1,d=new Promise(function(e){var t=i.onStateChanged(function(n){var r=n.state,i=n.stderrBuffer;if(r===B.api.State.Running){u=!0;return}u&&(s=i,t(),e())})}),i.onOutput(function(e){try{c.process(e)}catch(t){l||(l=t,G.Tb(t,function(t){return t.setExtra("chunk",e)}))}}),v.label=2;case 2:return v.trys.push([2,,5,6]),[4,i.request({args:["psql",n,"--csv","--command",t],splitStderr:!0})];case 3:return f=v.sent(),[4,d];case 4:return v.sent(),f.error&&!s&&(s=f.error),c.flush(),[3,6];case 5:return i.dispose(),[7];case 6:if(s)return[2,{columns:c.headers(),rows:a,error:s}];if(l)return h=l.message,[2,{columns:null!==(p=c.headers())&&void 0!==p?p:[],rows:a,error:h}];return[2,{columns:null!==(m=c.headers())&&void 0!==m?m:[],rows:a,error:null}]}})}),function(e){return t.apply(this,arguments)})}}({container:tn,nixService:tm}),tL=function(e){var t=e.fs,n={id:0,ops:[],requests:[]};function r(){return(r=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,a()];case 1:return[2,(t=n.sent()[e])?{key:e,value:t}:void 0]}})})).apply(this,arguments)}function i(){return o.apply(this,arguments)}function o(){return(o=(0,w._)(function(){var e;return(0,_.Jh)(this,function(t){switch(t.label){case 0:return e=Object.entries,[4,a()];case 1:return[2,e.apply(Object,[t.sent()]).map(function(e){var t=(0,C._)(e,2);return{key:t[0],value:t[1]}})]}})})).apply(this,arguments)}function a(){return l.apply(this,arguments)}function l(){return(l=(0,w._)(function(){var e;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,t.readFile(tT.wL)];case 1:if((e=n.sent()).error===tR.Df.NotFound)return[2,{}];if(e.error)throw e.error;return[2,ng.Z.parse(e.content.toString())]}})})).apply(this,arguments)}function c(){return(c=(0,w._)(function(e){return(0,_.Jh)(this,function(t){switch(t.label){case 0:return[4,s([e])];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function s(e,t){return u.apply(this,arguments)}function u(){return(u=(0,w._)(function(e,t){return(0,_.Jh)(this,function(r){switch(r.label){case 0:return Array.isArray(e)||(e=Object.entries(e).map(function(e){var t=(0,C._)(e,2);return{key:t[0],value:t[1]}})),(null==t?void 0:t.removeMissing)&&n.ops.push({op:"clear"}),e.forEach(function(e){return n.ops.push({op:"upsert",secret:e})}),[4,p()];case 1:return r.sent(),[2]}})})).apply(this,arguments)}function d(){return(d=(0,w._)(function(e){return(0,_.Jh)(this,function(t){switch(t.label){case 0:return[4,f([e])];case 1:return[2,t.sent()]}})})).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=(0,w._)(function(e){return(0,_.Jh)(this,function(t){switch(t.label){case 0:return e.forEach(function(e){return n.ops.push({op:"remove",key:e})}),[4,p()];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function p(){return m.apply(this,arguments)}function m(){return(m=(0,w._)(function(){var e,r,o,a,l,c,s,u,d,f,h,p,m,v,g;return(0,_.Jh)(this,function(y){switch(y.label){case 0:return e=n.id+=1,[4,i()];case 1:var b;if(r=y.sent(),e!==n.id)return[2,new Promise(function(e){n.requests.push(e)})];o=r.reduce(function(e,t){return(0,x._)((0,Z._)({},e),(0,nv._)({},t.key,t.value))},{}),a=!0,l=!1,c=void 0;try{for(s=n.ops[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)switch((d=u.value).op){case"upsert":o[d.secret.key]=d.secret.value;break;case"remove":delete o[d.key];break;case"clear":f=!0,h=!1,p=void 0;try{for(m=Object.keys(o)[Symbol.iterator]();!(f=(v=m.next()).done);f=!0)g=v.value,delete o[g]}catch(e){h=!0,p=e}finally{try{f||null==m.return||m.return()}finally{if(h)throw p}}}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return n.ops=[],[4,new Promise((b=(0,w._)(function(e){return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,t.writeFile(tT.wL,ng.Z.serialize(o)).finally(function(){n.requests.forEach(function(e){return e()}),n.requests=[]})];case 1:return r.sent(),e(),[2]}})}),function(e){return b.apply(this,arguments)}))];case 2:return[2,y.sent()]}})})).apply(this,arguments)}return{readSecret:function(e){return r.apply(this,arguments)},readSecrets:i,writeSecret:function(e){return c.apply(this,arguments)},writeSecrets:s,removeSecret:function(e){return d.apply(this,arguments)},removeSecrets:f,watchSecrets:function(e){var n,r=t.watchDir(tT.Ql,{onChange:function(r){var i=r.find(function(e){return e.filename===tT.wL});i&&!n&&(n=t.watchFile(tT.wL,{onChange:function(t){e.onChange(Object.entries(ng.Z.parse(t.toString())).map(function(e){var t=(0,C._)(e,2);return{key:t[0],value:t[1]}}))},onError:function(t){var r;n=void 0,null===(r=e.onError)||void 0===r||r.call(e,t)}})),!i&&n&&(n(),n=void 0)},onError:function(){n&&(n(),n=void 0)}});return function(){n&&(n(),n=void 0),r()}}}}({fs:ts}),{session:ta,presence:td,packager:tg,container:tn,fs:ts,runner:tx,debuggest:tw,broadcast:tC,dotReplit:th,nixService:tm,lspnix:tS,iotester:tE,git:tG,psql:tN,userEvents:ti,replspaceApi:ty,toolchain:tv,ports:tZ,secrets:tL});return null==tM||tM.span.end(),r(tF),function(){r(null),setTimeout(function(){tF.container.destroy()},500)}},[e]),n}(u=b||(b={})).CHANNEL_OPENED="CHANNEL_OPENED",u.EVENT_SENT="EVENT_SENT"},94694:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(66626),i=n(50959);function o(e,t){var n=(0,r._)((0,i.useState)(null),2),o=n[0],a=n[1];return(0,i.useEffect)(function(){var n=!1;return e.readFile(t).then(function(e){n||a(e)}),function(){n=!0}},[e,t]),o}},72658:function(e,t,n){n.d(t,{ZP:function(){return f},y5:function(){return a},yG:function(){return o}});var r,i,o,a,l=n(27387),c=n(96583),s=n(19871);function u(e,t){return"{ ".concat(e,"; } > /dev/null 2>&1 && echo -n '").concat(t,"' && exit 0")}(r=o||(o={})).NOT_INITIALIZED="NOT_INITIALIZED",r.ON_UNBORN_BRANCH="ON_UNBORN_BRANCH",r.MERGING="MERGING",r.REBASING="REBASING",r.REVERTING="REVERTING",r.CHERRY_PICKING="CHERRY_PICKING",r.APPLYING_MAILBOX="APPLYING_MAILBOX",r.BISECTING="BISECTING",r.DIRTY_WORKTREE="DIRTY_WORKTREE",r.DIRTY_INDEX="DIRTY_INDEX",r.CLEAN="CLEAN",r.DETACHED_HEAD="DETACHED_HEAD",(i=a||(a={})).INITIALIZING="INITIALIZING",i.INTERMEDIATE="INTERMEDIATE",i.NORMAL="NORMAL",i.DETACHED_HEAD="DETACHED_HEAD";var d=[u("! git rev-parse --is-inside-work-tree","NOT_INITIALIZED"),u('[ "$(! git rev-parse HEAD -- 2>&1)" = "fatal: bad revision \'HEAD\'" ]',"ON_UNBORN_BRANCH"),u("git rev-parse -q --verify MERGE_HEAD","MERGING"),u("[ -d '.git/rebase-apply' ] && [ -f '.git/rebase-apply/applying' ]","APPLYING_MAILBOX"),u("[ -d '.git/rebase-apply' ] || [ -d '.git/rebase-merge' ]","REBASING"),u("git rev-parse -q --verify REVERT_HEAD","REVERTING"),u("git rev-parse -q --verify CHERRY_PICK_HEAD","CHERRY_PICKING"),u("[ -f '.git/BISECT_LOG' ]","BISECTING"),u("! git symbolic-ref -q HEAD","DETACHED_HEAD"),"git update-index -q --refresh > /dev/null || exit $?",u('{ ! git diff-files --quiet; } || [ -n "$(git ls-files --others --exclude-standard)" ]',"DIRTY_WORKTREE"),u("! git diff-index --cached --quiet HEAD --","DIRTY_INDEX"),'echo -n "CLEAN"'].join(";");function f(e){return h.apply(this,arguments)}function h(){return(h=(0,l._)(function(e){var t,n,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return[4,e(d,{serviceMethod:"git-get-repository-state"})];case 1:if((t=i.sent()).error)return[2,t];if(!(t.output in o))return[2,{error:s.aq.UNKNOWN}];return r=function(e){switch(e){case"NOT_INITIALIZED":case"ON_UNBORN_BRANCH":return"INITIALIZING";case"MERGING":case"REBASING":case"REVERTING":case"CHERRY_PICKING":case"APPLYING_MAILBOX":case"BISECTING":return"INTERMEDIATE";case"DIRTY_WORKTREE":case"DIRTY_INDEX":case"CLEAN":return"NORMAL";case"DETACHED_HEAD":return"DETACHED_HEAD"}}(n=t.output),[2,{state:n,type:r,error:null}]}})})).apply(this,arguments)}},15026:function(e,t,n){n.d(t,{Bi:function(){return m},ZP:function(){return y},qE:function(){return p},yH:function(){return a}});var r,i,o,a,l=n(27387),c=n(66626),s=n(63257),u=n(96583);function d(e){switch(e){case"A":return"ADDED";case"C":return"COPIED";case"D":return"DELETED";case"M":return"MODIFIED";case"R":return"RENAMED";case"T":return"TYPE_CHANGED";case"X":default:return"UNKNOWN";case"B":return"BROKEN"}}(r=a||(a={})).ADDED="ADDED",r.COPIED="COPIED",r.DELETED="DELETED",r.MODIFIED="MODIFIED",r.RENAMED="RENAMED",r.TYPE_CHANGED="TYPE_CHANGED",r.UNKNOWN="UNKNOWN",r.BROKEN="BROKEN";var f=(i=(0,l._)(function(e,t){var n;return(0,u.Jh)(this,function(r){switch(r.label){case 0:return[4,e("git log -1 --pretty=%P ".concat(t))];case 1:if((n=r.sent()).error)return[2,!1];return[2,n.output.trim().length>0]}})}),function(e,t){return i.apply(this,arguments)}),h=(o=(0,l._)(function(e,t){var n,r,i,o,a,l,c,s,d;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return[4,e("git ls-tree --name-only -r ".concat(t),{serviceMethod:"git-get-files-for-commit"})];case 1:if((n=u.sent()).error)return[2,n];r=[],i=n.output.split("\n").filter(Boolean),o=!0,a=!1,l=void 0;try{for(c=i[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)d=s.value,r.push({path:d,type:"ADDED"})}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return[2,{files:r,error:null}]}})}),function(e,t){return o.apply(this,arguments)});function p(e){return Array.from(e.matchAll(g)).map(function(e){var t=(0,c._)(e,4),n=t[1],r=t[2];return{path:t[3],originalPath:r,type:d(n)}})}function m(e){return Array.from(e.matchAll(v)).map(function(e){var t=(0,c._)(e,3),n=t[1];return{path:t[2],type:d(n)}})}var v=/([ADMUXBT])\0([^\0]+)/g,g=/([RC])\d*\0([^\0]+)\0([^\0]+)/g;function y(e,t){return b.apply(this,arguments)}function b(){return(b=(0,l._)(function(e,t){var n,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:return[4,f(e,t)];case 1:if(!o.sent())return[2,h(e,t)];return[4,e("git diff-tree --no-commit-id --name-status -z -r -C --find-copies-harder -M ".concat(t),{serviceMethod:"git-get-files-for-commit"})];case 2:if((n=o.sent()).error)return[2,n];return r=p(n.output),i=m(n.output),[2,{files:(0,s._)(r).concat((0,s._)(i)),error:null}]}})})).apply(this,arguments)}},97658:function(e,t,n){n.d(t,{CH:function(){return v},Dc:function(){return d},GE:function(){return f},LY:function(){return h},Pi:function(){return g},Qj:function(){return m},bF:function(){return p},dC:function(){return u}});var r=n(66626),i=n(1675),o=n(70886),a=n(52621),l=/[~^:?*[\\\0-\x20\x7F]/,c=/^(([A-Za-z0-9]+@|http(|s):\/\/)|(http(|s):\/\/[A-Za-z0-9]+@))([A-Za-z0-9.]+(:\d+)?)(?::|\/)([\d/\w.-]+?)$/,s=new RegExp([l,/^$/,/^\//,/\/$/,/\.lock$/,/\/{2,}/,/^\./,/\.$/,/\/\./,/\.\./,/@\{/,/^@$/,/^-/].map(function(e){return"(?:".concat(e.source,")")}).join("|"));function u(e){return 0===e.length||!l.test(e)}function d(e){return!s.test(e)}function f(e){return!s.test(e)}function h(e){return c.test(e)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"==typeof e?(0,i.C)(e):"commit"in e?e.type===a.HO.LOCAL||t&&e.type===a.HO.TRACKED?e.name:"".concat(e.remote,"/").concat(e.name):e.name}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return e;if("commit"in e)return e.type===a.HO.LOCAL||t&&e.type===a.HO.TRACKED?"refs/heads/".concat(e.name):"refs/remotes/".concat(e.remote,"/").concat(e.name);if(e.type===o.l.BRANCH)return"refs/heads/".concat(e.name);if(e.type===o.l.REMOTE_BRANCH)return"refs/remotes/".concat(e.remote,"/").concat(e.branch);throw Error("Unknown branch object")}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return t&&!e.startsWith("refs/remotes/")?null:(0,r._)((0,i.Tg)(e),1)[0];if("commit"in e)return t&&e.type!==a.HO.REMOTE?null:e.remote;if(e.type===o.l.BRANCH)return null;if(e.type===o.l.REMOTE_BRANCH)return e.remote;throw Error("Unknown branch object")}function g(e,t){return e===t||null!==e&&null!==t&&m(e)===m(t)}},70886:function(e,t,n){n.d(t,{L:function(){return function e(t){var n;switch("HEAD"===(n=t)||"refs/HEAD"===n||n.startsWith(l)?"HEAD":n.startsWith(c)?"BRANCH":n.startsWith(s)?f.test(n)?"REMOTE_HEAD":"REMOTE_BRANCH":n.startsWith(d)||n.startsWith(u)?"TAG":"BRANCH"){case"HEAD":if(t.startsWith(l)){if(t.endsWith("(detached)"))return{type:"HEAD",name:"HEAD",detached:!0,ref:null};return{type:"HEAD",name:"HEAD",detached:!1,ref:e(t.slice(l.length))}}return{type:"HEAD",name:"HEAD",detached:!1,ref:null};case"REMOTE_HEAD":var r=t.slice(s.length);return{type:"REMOTE_HEAD",name:"HEAD",remote:(0,o._)(r.split("/"),1)[0]};case"BRANCH":return{type:"BRANCH",name:t.startsWith(c)?t.slice(c.length):t};case"REMOTE_BRANCH":var i=t.slice(s.length),h=(0,a._)(i.split("/"));return{type:"REMOTE_BRANCH",name:i,remote:h[0],branch:h.slice(1).join("/")};case"TAG":return t.startsWith(u)&&(t=t.slice(u.length)),t.startsWith(d)&&(t=t.slice(d.length)),{type:"TAG",name:t}}}},l:function(){return i}});var r,i,o=n(66626),a=n(78950),l="HEAD -> ",c="refs/heads/",s="refs/remotes/",u="tag: ",d="refs/tags/",f=/^refs\/remotes\/([^/]+)\/HEAD$/;(r=i||(i={})).HEAD="HEAD",r.REMOTE_HEAD="REMOTE_HEAD",r.BRANCH="BRANCH",r.REMOTE_BRANCH="REMOTE_BRANCH",r.TAG="TAG"},52621:function(e,t,n){n.d(t,{HO:function(){return i},ZP:function(){return h},p3:function(){return d}});var r,i,o=n(27387),a=n(66626),l=n(63257),c=n(96583),s=n(1675),u=n(70886);function d(e,t){return!!e&&!!t&&(e===t||e.name===t.name&&e.remote===t.remote)}function f(e){var t=(0,a._)(e.split("	"),6),n=t[0],r=t[1],i=t[2],o=t[3],l=t[4],c=t[5],d=(0,u.L)(n),f={hash:i,author:{name:o,email:(0,s.tc)(l),date:1e3*parseInt(c,10)}};if(d.type===u.l.BRANCH){var h=r?(0,u.L)(r):null,p=h&&(h.type===u.l.REMOTE_BRANCH||h.type===u.l.BRANCH)?h:null;return{type:"LOCAL",name:d.name,push:p,remote:null,tracking:null,commit:f}}return d.type===u.l.REMOTE_BRANCH?{type:"REMOTE",name:d.branch,remote:d.remote,push:null,tracking:null,commit:f}:null}function h(e){return p.apply(this,arguments)}function p(){return(p=(0,o._)(function(e){var t,n,r=arguments;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1===e.local&&!1===e.remote)throw Error("Cannot specify both local and remote as false");var t=[];if(t.push('--format="%(refname)%09%(push)%09%(objectname)%09%(authorname)%09%(authoremail)%09%(authordate:unix)"'),e.max&&t.push("--count=".concat(e.max)),e.pattern){if("string"==typeof e.pattern)t.push((0,s.Gw)(e.pattern));else{var n,r,i=e.pattern.map(function(e){return(0,s.Gw)(e)});t.push.apply(t,(0,l._)(i))}}else(null===(n=e.local)||void 0===n||n)&&t.push("refs/heads"),(null===(r=e.remote)||void 0===r||r)&&t.push("refs/remotes");return"git for-each-ref ".concat(t.join(" "))}(r.length>1&&void 0!==r[1]?r[1]:{}),{serviceMethod:"git-list-branches"})];case 1:if((t=i.sent()).error)return[2,t];return(n=function(e){var t=[],n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var s=a.value;"LOCAL"===s.type?t.push(s):"REMOTE"===s.type&&n.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}var d=new Set,f=[],h=!0,p=!1,m=void 0;try{for(var v,g=n[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)!function(){var e=v.value,n=t.find(function(t){return t.push&&t.push.type===u.l.REMOTE_BRANCH&&t.push.remote===e.remote&&t.push.branch===e.name&&t.name===e.name});n&&(d.add(e),d.add(n),f.push({type:"TRACKED",name:n.name,remote:e.remote,push:n.push,tracking:e,commit:n.commit}))}()}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}var y=e.filter(function(e){return!d.has(e)});return(0,l._)(y).concat((0,l._)(f))}((0,s.so)(t.output,"\n").map(f).filter(function(e){return null!==e}))).sort(function(e,t){return t.commit.author.date-e.commit.author.date}),[2,{branches:n,error:null}]}})})).apply(this,arguments)}(r=i||(i={})).LOCAL="LOCAL",r.REMOTE="REMOTE",r.TRACKED="TRACKED"},97975:function(e,t,n){n.d(t,{T:function(){return i},Z:function(){return d}});var r,i,o=n(27387),a=n(66626),l=n(96583),c=n(19871),s=n(1675),u=n(44906);function d(e){return f.apply(this,arguments)}function f(){return(f=(0,o._)(function(e){var t,n,r,i,o,d,f,h,p,m=arguments;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=m.length>1&&void 0!==m[1]?m[1]:{},[4,(0,u.Z)(e)];case 1:if((n=l.sent()).error)return[2,n];if(!n.branch)return[2,{error:c.aq.HEAD_DETACHED}];if(!n.upstream||(i=(r=(0,a._)((0,s.Tg)(n.upstream.branch),2))[0],o=r[1],!i||!o))return[2,{error:c.aq.UPSTREAM_NOT_SET}];if(n.changes.length>0)return[2,{error:c.aq.DIRTY_WORKTREE}];if("FF_ONLY"===(f=null!==(d=t.mode)&&void 0!==d?d:"FF_ONLY")&&n.upstream.ahead>0)return[2,{error:c.aq.MERGE_CONFLICT}];switch("FF_ONLY"!==f&&0===n.upstream.ahead&&(f="FF_ONLY"),h=["--quiet","--no-edit"],f){case"FF_ONLY":h.push("--no-rebase","--ff-only");break;case"MERGE":h.push("--no-rebase","--ff");break;case"REBASE":h.push("--rebase")}return h.push((0,s.Gw)(i),(0,s.Gw)(o)),[4,e("git pull ".concat(h.join(" ")),{serviceMethod:"git-pull"})];case 2:if((p=l.sent()).error!==c.aq.MERGE_CONFLICT)return[3,8];if(t.allowConflicts)return[2,{hasConflicts:!0,error:null}];switch(f){case"MERGE":return[3,3];case"REBASE":return[3,5]}return[3,7];case 3:return[4,e("git merge --abort",{serviceMethod:"git-pull"})];case 4:case 6:return l.sent(),[3,7];case 5:return[4,e("git rebase --abort",{serviceMethod:"git-pull"})];case 7:return[2,p];case 8:if(p.error)return[2,p];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}(r=i||(i={})).FF_ONLY="FF_ONLY",r.MERGE="MERGE",r.REBASE="REBASE"},50508:function(e,t,n){n.d(t,{J:function(){return r},O:function(){return i}});var r="users.noreply.replit.com",i="users.noreply.github.com"},15229:function(e,t,n){n.d(t,{J:function(){return i},e:function(){return r}});var r=(0,n(48376).u)(null);function i(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Array.isArray(e)||(e=[e]);var a=null!==(i=t.output)&&void 0!==i?i:"",l=t.error,c=n?o:Date.now(),s="".concat(o,"-").concat(Math.random());r.set({input:e,output:a,error:l,start:o,end:c,cached:n,key:s})}},19871:function(e,t,n){var r,i,o,a,l,c;n.d(t,{aq:function(){return r},dq:function(){return i},rG:function(){return o}}),(a=r||(r={})).UNKNOWN_NOT_GIT="UNKNOWN_NOT_GIT",a.UNKNOWN="UNKNOWN",a.TIMEOUT="TIMEOUT",a.CHANNEL_CLOSED="CHANNEL_CLOSED",a.NOT_INITIALIZED="NOT_INITIALIZED",a.UNAUTHENTICATED="UNAUTHENTICATED",a.INDEX_FILE_CORRUPT="INDEX_FILE_CORRUPT",a.UNKNOWN_REMOTE="UNKNOWN_REMOTE",a.INDEX_LOCKED="INDEX_LOCKED",a.NO_COMMITS="NO_COMMITS",a.PATH_MATCHED_NO_FILES="PATH_MATCHED_NO_FILES",a.USER_NOT_CONFIGURED="USER_NOT_CONFIGURED",a.INVALID_REFERENCE="INVALID_REFERENCE",a.BRANCH_ALREADY_EXISTS="BRANCH_ALREADY_EXISTS",a.MERGE_CONFLICT="MERGE_CONFLICT",a.UPSTREAM_NOT_SET="UPSTREAM_NOT_SET",a.HEAD_DETACHED="HEAD_DETACHED",a.DIRTY_WORKTREE="DIRTY_WORKTREE",a.PUSH_REJECTED="PUSH_REJECTED",a.REMOTE_ALREADY_EXISTS="REMOTE_ALREADY_EXISTS",a.ALREADY_INITIALIZED="ALREADY_INITIALIZED",a.INVALID_STATE="INVALID_STATE",a.PROTECTED_BRANCH="PROTECTED_BRANCH",(l=i||(i={})).FS_CHANGE="FS_CHANGE",l.FORCED_REFRESH="FORCED_REFRESH",l.NEW_PROFILE="NEW_PROFILE",l.CHANGED_PROFILE="CHANGED_PROFILE",(c=o||(o={})).REPLIT_DEFAULT="REPLIT_DEFAULT",c.GITHUB="GITHUB"},69880:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(66626),i=n(63257),o=n(85733),a=n(36647),l=n(19871),c=n(81199),s=n(3341),u=n.n(s),d=n(50959);function f(e){var t,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=(0,r._)((0,d.useState)(null),2),p=h[0],m=h[1],v=(0,o.Z)(p),g=null===(n=null!==(t=f.keepStaleResult)&&void 0!==t?t:f.refresh)||void 0===n||n,y=(0,d.useCallback)(function(e){u()(e,v.current)||m(e)},[v]),b=(0,a.Z)(function(){return e},(0,i._)(s)),w=(0,c.Z)().git,Z=(0,d.useRef)(null),x=(0,d.useCallback)(function(){Z.current?Z.current():g||y(null);var e=!1;b(w).then(function(t){e||(y(t),Z.current=null)}).catch(function(){e||(y({error:l.aq.UNKNOWN}),Z.current=null)}),Z.current=function(){e=!0,Z.current=null,g||y(null)}},[y,b,w,g]);return(0,d.useEffect)(function(){return x()},[x]),(0,d.useEffect)(function(){var e;if(null===(e=f.refresh)||void 0===e||e)return w.onRefresh(x)},[w,x,f.refresh]),p}},47527:function(e,t,n){var r,i,o,a;n.d(t,{Z:function(){return i},z:function(){return r}}),(o=r||(r={})).INSTRUCTION_RESULT="INSTRUCTION_RESULT",o.TEST_RESULT="TEST_RESULT",o.ERROR="ERROR",o.STATE_CHANGED="STATE_CHANGED",(a=i||(i={}))[a.Idle=0]="Idle",a[a.Starting=1]="Starting",a[a.Ready=2]="Ready",a[a.Building=3]="Building",a[a.Running=4]="Running"},22712:function(e,t,n){n.d(t,{ho:function(){return o},ib:function(){return l},rN:function(){return i},uH:function(){return a}});var r=n(7225),i=[r.SemanticTokenTypes.namespace,r.SemanticTokenTypes.type,r.SemanticTokenTypes.class,r.SemanticTokenTypes.enum,r.SemanticTokenTypes.interface,r.SemanticTokenTypes.struct,r.SemanticTokenTypes.typeParameter,r.SemanticTokenTypes.parameter,r.SemanticTokenTypes.variable,r.SemanticTokenTypes.property,r.SemanticTokenTypes.enumMember,r.SemanticTokenTypes.event,r.SemanticTokenTypes.function,r.SemanticTokenTypes.method,r.SemanticTokenTypes.macro,r.SemanticTokenTypes.keyword,r.SemanticTokenTypes.modifier,r.SemanticTokenTypes.comment,r.SemanticTokenTypes.string,r.SemanticTokenTypes.number,r.SemanticTokenTypes.regexp,r.SemanticTokenTypes.operator,r.SemanticTokenTypes.decorator,"angle","arithmetic","attribute","attributeBracket","bitwise","boolean","brace","bracket","builtinAttribute","builtinType","character","colon","comma","comparison","constParameter","derive","deriveHelper","dot","escapeSequence","invalidEscapeSequence","formatSpecifier","generic","label","lifetime","logical","macroBang","parenthesis","punctuation","selfKeyword","selfTypeKeyword","semicolon","typeAlias","toolModule","union","unresolvedReference","tomlArrayKey","tomlTableKey"],o=[r.SemanticTokenModifiers.declaration,r.SemanticTokenModifiers.definition,r.SemanticTokenModifiers.readonly,r.SemanticTokenModifiers.static,r.SemanticTokenModifiers.deprecated,r.SemanticTokenModifiers.abstract,r.SemanticTokenModifiers.async,r.SemanticTokenModifiers.modification,r.SemanticTokenModifiers.documentation,r.SemanticTokenModifiers.defaultLibrary,"attribute","callable","constant","consuming","controlFlow","crateRoot","injected","intraDocLink","library","macro","mutable","public","reference","trait","unsafe"];function a(e,t){var n=e.tokenTypes[t];return n&&i.includes(n)?n:null}function l(e,t){for(var n=[],r=0;r<e.tokenModifiers.length;r++)if(t&1<<r){var i=e.tokenModifiers[r];i&&o.includes(i)&&n.push(i)}return n}},84570:function(e,t,n){var r=n(7225);t.Z=[r.SymbolKind.Array,r.SymbolKind.Boolean,r.SymbolKind.Class,r.SymbolKind.Constant,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.EnumMember,r.SymbolKind.Event,r.SymbolKind.Field,r.SymbolKind.File,r.SymbolKind.Function,r.SymbolKind.Interface,r.SymbolKind.Key,r.SymbolKind.Method,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Object,r.SymbolKind.Operator,r.SymbolKind.Package,r.SymbolKind.Property,r.SymbolKind.String,r.SymbolKind.Struct,r.SymbolKind.TypeParameter,r.SymbolKind.Variable]},47703:function(e,t,n){var r,i,o,a;n.d(t,{N:function(){return r},a:function(){return i}}),(o=r||(r={})).NOT_READY="NOT_READY",o.READY="READY",o.STALLED="STALLED",o.BROKEN="BROKEN",(a=i||(i={})).OFFLINE="OFFLINE",a.INITIALIZING="INITIALIZING",a.INITIALIZED="INITIALIZED",a.EXITING="EXITING",a.EXITED="EXITED"},33530:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(66626),i=n(39271),o=n(81199),a=n(50959),l=n(41733),c=n(30509),s=n(36556),u=n(16783),d=n.n(u),f=n(8252),h=n(47703);function p(e){return Math.floor(performance.now()-e.startTime)}var m=new WeakSet,v=n(40750);function g(e){var t=(0,i.Z)(),n=(0,o.Z)().lspnix,u=(0,r._)((0,a.useState)([]),2),g=u[0],y=u[1],b=(0,v.k)();return(0,a.useEffect)(function(){if(e){var t=n.onClient(e,y);return function(){t(),y([])}}},[n,e]),(0,a.useEffect)(function(){return(0,f.uf)(g.map(function(n){return function(e){var t=e.client,n=e.replId,r=e.language,i=e.debug;if(!m.has(t)){m.add(t);var o=new Map,a=function(e){var i,o=t.getServerState(),a=null!==(i=t.getServerInfo())&&void 0!==i?i:{name:"unknown",version:"none"},l=o===h.a.INITIALIZED?"".concat(null==a?void 0:a.name,"@").concat(null==a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:n,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:t.clientId}},u=d()(function(e,t){var n=p(t);n>1e4&&s.kg.time("LSP unresponsive request",n,a(t))}),v=setInterval(function(){o.forEach(function(e){u(e.id,e)})},2e3);return(0,f.uf)([t.onRequest(function(e){var t=e.id,n=e.data;(i||.01>Math.random())&&o.set(t,{id:t,method:n.method,startTime:performance.now()})}),t.onResponse(function(e){var t=e.id,n=e.error,r=o.get(t);null!=r&&(o.delete(t),s.kg.time("LSP request",p(r),(0,c._)((0,l._)({},a(r)),{result:null==n?"ok":"error"})))}),t.onCancelRequest(function(e){var t=o.get(e);null!=t&&(o.delete(e),s.kg.time("LSP request",p(t),(0,c._)((0,l._)({},a(t)),{result:"cancelled"})))}),function(){return clearInterval(v)},function(){return m.delete(t)}])}}({client:n,replId:t,language:n.getLanguageId(e),debug:b})}))},[g,t,e,b]),g}},29121:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(50959),o=n(34635),a=n(8252);function l(e){var t=(0,r._)((0,i.useState)(null),2),n=t[0],l=t[1];return(0,i.useEffect)(function(){var t=function(){l((0,o.H)(e.map(function(e){return(0,o.Z)(e)})))};return t(),(0,a.uf)(e.map(function(e){return e.onServerCapabilitiesChange(function(){return t()})}))},[e]),n}},70316:function(e,t,n){n.d(t,{DL:function(){return i},OD:function(){return Z},TE:function(){return E},UK:function(){return b},VZ:function(){return x}});var r,i,o=n(27387),a=n(41733),l=n(30509),c=n(63257),s=n(96583),u=n(43182),d=n(41974),f=n(86763),h=n.n(f),p=n(96955),m=n(48376),v=n(66810),g=n(3341),y=n.n(g),b=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function w(e,t){return new Set(Array.from(e).filter(function(e){return!t.has(e)}))}function Z(e){var t=e.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,p.Z)(t)}}function x(e){var t;return null!==(t=e.isLocalhost)&&void 0!==t&&t}function C(e){return e===v.Y8}function _(e){return C(e.localPort)}function S(e){return e?w(b,new Set(e.map(function(e){return Z(e.configuration)}))):b}function k(e){var t=e.localPort,n=S(e.portsState.current);if(0!==n.size){var r=n.has(80),i=n.has(t);return r?80:i?t:Array.from(n).sort()[0]}}function E(e){var t=e.container,n=e.dotReplit,r=(0,m.u)(null),i=(0,m.u)(!1),f=(0,m.u)("only-global"),v=h()((0,o._)(function(){var e;return(0,s.Jh)(this,function(t){switch(t.label){case 0:if(!r.current)return[2];return e=r.current.filter(function(e){return!e.isTemporary}).map(function(e){var t=e.configuration.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return(0,a._)({localPort:e.configuration.localPort,externalPort:e.configuration.externalPort},x(e.configuration)?{exposeLocalhost:!0}:void 0);case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,p.Z)(t)}}).filter(Boolean).sort(function(e,t){return e.localPort-t.localPort}),[4,n.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])];case 1:return t.sent(),[2]}})}),1e3,{leading:!1,trailing:!0});function g(){i.set(!0),v()}return!function(e){var t=e.container,n=e.dotReplit,r=e.portsState,i=e.writeDotReplitPortsConfig,o=e.isThisServiceUpdatingDotReplit,s=e.forwardPortsAutomatically;function f(e){return e.sort(function(e,t){var n,r;return(null!==(n=e.configuration.localPort)&&void 0!==n?n:0)-(null!==(r=t.configuration.localPort)&&void 0!==r?r:0)})}var h=[];function p(e){try{var t=function(e){var t=e.portsState,n=e.portInfo,r=e.forwardPortsAutomatically;if(null===t.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");var i={pid:n.pid,cgroup:n.cgroup,address:n.address,cmdline:n.cmdline},o="127.0.0.1"===i.address,c=n.isVnc,s=t.current.find(function(e){return e.configuration.localPort===n.port});if(void 0!==s)return{isOpen:!0,isTemporary:!!c||s.isTemporary,processInfo:i,configuration:(0,l._)((0,a._)({},s.configuration),{isLocalhost:o})};if("none"===r.current||"only-global"===r.current&&o||c)return{isOpen:!0,isTemporary:!0,processInfo:i,configuration:{type:"INTERNAL_ONLY",localPort:n.port,isLocalhost:o,isVnc:c}};var u=k({localPort:n.port,portsState:t});return void 0===u?{isOpen:!0,isTemporary:!1,processInfo:i,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:n.port,isLocalhost:o,isVnc:c}}:{isOpen:!0,isTemporary:!1,processInfo:i,configuration:{type:"FORWARDED",localPort:n.port,externalPort:u,isLocalhost:o,isVnc:c}}}({portsState:r,portInfo:e,forwardPortsAutomatically:s}),n=!1;r.update(function(r){if(!r)throw Error("processOpenedPort can only execute if we red .replit first");return(0,d.Uy)(r,function(i){var o=i.findIndex(function(t){return t.configuration.localPort===e.port});return -1===o?(o=r.length,n=!0):y()(r[o].configuration,t.configuration)||(n=!0),i[o]=t,f(i)})}),n&&i()}catch(e){throw u.$e(function(t){t.setTag("service","ports"),u.Tb(e)}),e}}function m(e){try{var t=!1;r.update(function(n){if(!n)throw Error("onPortClosed can only execute if we red .replit first");return(0,d.Uy)(n,function(n){var r,i=n.findIndex(function(t){return t.configuration.localPort===e.port});if(-1!==i){var o=n[i];o.isTemporary||(r=o.configuration.localPort,32768<=r&&r<=60999)?(n.splice(i,1),t=!0):o.isOpen=!1}})}),t&&i()}catch(e){throw u.$e(function(t){t.setTag("service","ports"),u.Tb(e)}),e}}t.onPortOpened(function(e){null===r.current?h.push({type:"portOpen",portInfo:e}):p(e)}),t.onPortClosed(function(e){null===r.current?h.push({type:"portClose",portInfo:e}):m(e)}),n.watch(function(e){var t,n=e.config,i=null!==(t=null==n?void 0:n.ports)&&void 0!==t?t:[];if(!0===o.current){var s=r.current;if(!s||i.length!==s.length)return;i.every(function(e,t){var n,r=s[t];return e.localPort===r.configuration.localPort&&e.externalPort===(null!==(n=Z(r.configuration))&&void 0!==n?n:0)})&&o.set(!1);return}r.update(function(e){e||(e=[]);var t=new Set(i.map(function(e){return e.localPort}).filter(function(e){return null!=e})),n=new Set(e.map(function(e){return e.configuration.localPort})),r=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),o=w(t,n),s=(m=new Set((0,c._)(Array.from(t)).concat((0,c._)(Array.from(r)))),new Set(Array.from(n).filter(function(e){return m.has(e)}))),u=[],d=!0,h=!1,p=void 0;try{for(var m,v,g=s[Symbol.iterator]();!(d=(v=g.next()).done);d=!0)!function(){var t=v.value,n=e.find(function(e){return e.configuration.localPort===t}),r=i.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));if(!r)return u.push((0,l._)((0,a._)({},n),{configuration:{type:"CONFIG_MISSING",localPort:n.configuration.localPort,isLocalhost:x(n.configuration),isVnc:_(n.configuration)}}));var o=n.configuration;o=null!=r.externalPort&&0!==r.externalPort?{type:S(u).has(r.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:n.configuration.localPort,externalPort:r.externalPort,isLocalhost:x(n.configuration),isVnc:_(n.configuration)}:{type:"INTERNAL_ONLY",localPort:n.configuration.localPort,isLocalhost:x(n.configuration),isVnc:_(n.configuration)},u.push((0,l._)((0,a._)({},n),{configuration:o}))}()}catch(e){h=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(h)throw p}}var y=!0,b=!1,Z=void 0;try{for(var k,E=o[Symbol.iterator]();!(y=(k=E.next()).done);y=!0)!function(){var e,t=k.value,n=i.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));var r=null!=n.externalPort&&0!==n.externalPort?n.externalPort:void 0;if(void 0!==r){var o,a=S(u).has(r);u.push({isOpen:!1,isTemporary:!1,configuration:{type:a?"FORWARDED":"MISCONFIGURED",localPort:t,externalPort:r,isLocalhost:null!==(o=n.exposeLocalhost)&&void 0!==o&&o,isVnc:C(t)}})}else u.push({isOpen:!1,isTemporary:!1,configuration:{type:"INTERNAL_ONLY",localPort:t,isLocalhost:null!==(e=n.exposeLocalhost)&&void 0!==e&&e,isVnc:C(t)}})}()}catch(e){b=!0,Z=e}finally{try{y||null==E.return||E.return()}finally{if(b)throw Z}}return f(u)}),h.length>0&&(h.forEach(function(e){var t=e.type,n=e.portInfo;"portOpen"===t?p(n):"portClose"===t&&m(n)}),h=[])})}({container:t,dotReplit:n,portsState:r,writeDotReplitPortsConfig:g,isThisServiceUpdatingDotReplit:i,forwardPortsAutomatically:f}),{tryExposingPortAutomatically:function(e){var t=k({localPort:e,portsState:r});void 0!==t&&(r.update((0,d.Uy)(function(n){if(n){var r=n.find(function(t){return t.configuration.localPort===e});r&&(r.isTemporary=!1,r.configuration={type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:r.configuration.isLocalhost,isVnc:C(e)})}})),g())},updateDotReplitPortsMapping:function(e,t,n){r.update((0,d.Uy)(function(r){var i,o=null==r?void 0:r.find(function(t){return t.configuration.localPort===e}),a=n;void 0===a&&(a=null!==(i=null==o?void 0:o.configuration.isLocalhost)&&void 0!==i&&i);var l=void 0!==t?{type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:a,isVnc:C(e)}:{type:"INTERNAL_ONLY",localPort:e,isLocalhost:a,isVnc:C(e)};o?(o.isTemporary=!1,o.configuration=l):(r||(r=[]),r.push({isOpen:!1,isTemporary:!1,configuration:l}))})),g()},removeDotReplitPortsMapping:function(e,t){r.update((0,d.Uy)(function(n){var r;void 0!==(r=void 0!==t?null==n?void 0:n.findIndex(function(n){return n.configuration.localPort===e&&("FORWARDED"===n.configuration.type||"MISCONFIGURED"===n.configuration.type)&&n.configuration.externalPort===t}):null==n?void 0:n.findIndex(function(t){return t.configuration.localPort===e}))&&(null==n||n.splice(r,1))})),g()},portsState:r,setForwardPortsAutomatically:function(e){f.set(e)}}}(r=i||(i={})).FORWARDED="FORWARDED",r.INTERNAL_ONLY="INTERNAL_ONLY",r.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",r.MISCONFIGURED="MISCONFIGURED",r.CONFIG_MISSING="CONFIG_MISSING"},48058:function(e,t,n){n.d(t,{bg:function(){return l},dF:function(){return s},r4:function(){return u},vU:function(){return c}});var r=n(46298),i=n(81199),o=n(50959),a=n(70316);function l(){var e=(0,i.Z)().ports,t=(0,r.Z)(e.portsState);return(0,o.useMemo)(function(){return t?t.filter(function(e){return e.isOpen&&e.configuration.type===a.DL.FORWARDED}):[]},[t])}function c(e){var t=(0,i.Z)().ports,n=(0,r.Z)(t.portsState);return(0,o.useMemo)(function(){if(n)return n.find(function(t){return t.configuration.type===a.DL.FORWARDED&&t.configuration.externalPort===e})},[n,e])}function s(e){return u((0,i.Z)().ports,e)}function u(e,t){var n=(0,r.Z)(e.portsState);return(0,o.useMemo)(function(){return t&&n?n.filter(function(e){var n;return null!==(n=e.isOpen&&(null==t?void 0:t.endsWith(e.processInfo.cgroup)))&&void 0!==n&&n}):[]},[n,t])}},46051:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(66626),i=n(81199),o=n(50959);function a(){var e=(0,i.Z)().presence,t=(0,r._)((0,o.useState)(e.getFollowedUser()),2),n=t[0],a=t[1];return(0,o.useEffect)(function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)},[e]),n}},54960:function(e,t,n){n.d(t,{F:function(){return o}});var r=n(53557),i=n(78986);function o(e,t){var n=(0,r.rF)(t.fileTypeAttrs);return!n&&(null==t?void 0:t.language)&&(n=r.$R.from(t.language)),!!(n&&(0,i.JW)(e,n))}},83238:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(38931),o=n(50959),a=n(81199);function l(){var e=(0,a.Z)().toolchain,t=(0,r._)((0,o.useState)(null),2),n=t[0],l=t[1];return(0,o.useEffect)(function(){var t=!1;return e.getRegistry().then(function(e){t||l(e)}).catch(function(e){i.kg.error("Toolchain: failed to get module registry: ".concat(e.message))}),function(){t=!0}},[e]),n}},36136:function(e,t,n){n.d(t,{K:function(){return l}});var r=n(41733),i=n(59786),o=n(50959),a=n(81199);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.Z)().userEvents,n=(0,i.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1});return(0,o.useCallback)(function(i,o){n&&t.emit(i,(0,r._)({},e,o))},[t,e,n])}},55260:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(76913),c=n(50959),s=n(81199),u=n(59786),d=n(92443);function f(){var e,t=(0,s.Z)().container,n=(0,u.P5)({controlName:"flag-work-flows"}),f=(0,c.useRef)(new l.vU(void 0)),h=(0,c.useRef)(new l.vU(void 0)),p=(0,c.useRef)();return(0,d.L)(function(e,l){if(n){var c,s,u=t.getContext();if(u){var d="/home/runner/".concat(u.repl.slug,"/.replit"),m=[];return e.workflows.init.rpc({dotReplitPath:d}),(c=(0,i._)(function(){var t,n,i,l,c,s,u,d,h,p;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,e.workflows.config.subscribe({})];case 1:n=(t=o._.apply(void 0,[a.sent(),2]))[0],i=t[1],m.push(i),l=!1,c=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),u=(0,r._)(n),a.label=3;case 3:return[4,u.next()];case 4:if(!(l=!(d=a.sent()).done))return[3,6];if(!(h=d.value).ok)return[3,5];f.current.set(h.payload.config),a.label=5;case 5:return l=!1,[3,3];case 6:return[3,13];case 7:return p=a.sent(),c=!0,s=p,[3,13];case 8:if(a.trys.push([8,,11,12]),!(l&&null!=u.return))return[3,10];return[4,u.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(c)throw s;return[7];case 12:return[7];case 13:return[2]}})}),function(){return c.apply(this,arguments)})(),(s=(0,i._)(function(){var t,n,i,l,c,s,u,d,f,p;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,e.workflows.runState.subscribe({})];case 1:n=(t=o._.apply(void 0,[a.sent(),2]))[0],i=t[1],m.push(i),l=!1,c=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),u=(0,r._)(n),a.label=3;case 3:return[4,u.next()];case 4:if(!(l=!(d=a.sent()).done))return[3,6];if(!(f=d.value).ok)return[3,5];h.current.set(f.payload.state),a.label=5;case 5:return l=!1,[3,3];case 6:return[3,13];case 7:return p=a.sent(),c=!0,s=p,[3,13];case 8:if(a.trys.push([8,,11,12]),!(l&&null!=u.return))return[3,10];return[4,u.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(c)throw s;return[7];case 12:return[7];case 13:return[2]}})}),function(){return s.apply(this,arguments)})(),p.current={runWorkflow:function(e){return v.apply(this,arguments)},connectToTask:function(e){return g.apply(this,arguments)},clearHistory:function(){return y.apply(this,arguments)}},function(){var e=!0,t=!1,n=void 0;try{for(var r,i=m[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}}function v(){return(v=(0,i._)(function(t){var n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return n=t.workflowId,[4,e.workflows.runWorkflow.rpc({workflowId:n})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}function g(){return(g=(0,i._)(function(t){var n,r,i,l,c;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=t.runId,r=t.taskIdx,[4,e.workflows.connectToTask.stream({runId:n,taskIdx:r})];case 1:return i=a.sent(),(l=(0,o._)(i,3))[0],l[1],c=l[2],m.push(c),[2,i]}})})).apply(this,arguments)}function y(){return(y=(0,i._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,e.workflows.clearHistory.rpc({})];case 1:return[2,t.sent()]}})})).apply(this,arguments)}},[t,h,f,n]),{configObservable:f.current,runStateObservable:h.current,runWorkflow:(e=(0,i._)(function(e){var t,n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:if(!(n=null===(t=p.current)||void 0===t?void 0:t.runWorkflow))throw Error("Tried to run workflow without runWorkflow defined!");return[4,n(e)];case 1:return r.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),connectToTask:function(e){var t,n=null===(t=p.current)||void 0===t?void 0:t.connectToTask;if(!n)throw Error("Tried to connect to task without connectToTask defined!");return n(e)},clearHistory:function(){var e,t=null===(e=p.current)||void 0===e?void 0:e.clearHistory;if(!t)throw Error("Tried clear history without clearHistory defined!");return t()}}}},25165:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(74985),i=n(73789),o=n(59947),a=n(99236),l=n(64479),c=n(82230),s=n(94778),u=n(15235),d=n(25360),f=n(49224),h=n(72093),p=n(77847),m=(0,f.X)({connectHeader:[h.l0.colWithGap(4)],connectButtonRow:[h.l0.flex.rowReverse],sshConfigDialog:[h.l0.colWithGap(12)]});function v(e){var t=e.onConfirm,n=(0,p.Z)(),f="Host *.replit.dev\n  Port 22\n  IdentityFile ".concat(n,"/.ssh/replit");return(0,r.BX)(l.Tg,{css:m.sshConfigDialog,children:[(0,r.BX)(s.G,{css:m.connectHeader,children:[(0,r.tZ)(c.h4,{level:1,variant:"subheadBig",children:"Update your SSH configuration"}),(0,r.BX)(c.xv,{color:"dimmer",children:["Before connecting over SSH, you need to update your local SSH configuration file, which is usually located at ",n,"/.ssh/config"]})]}),(0,r.tZ)(d.Z,{code:f,header:".ssh/config",multiline:!0}),(0,r.tZ)(a.E,{text:"You can find this information later in the SSH docs",icon:(0,r.tZ)(i.Z,{})}),(0,r.tZ)(s.G,{css:m.connectButtonRow,children:(0,r.tZ)(u.zx,{text:"I updated my config",iconLeft:(0,r.tZ)(o.Z,{}),onClick:t,colorway:"primary",stretch:!1})})]})}},79125:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(98250),o=n(50959),a=n(81199),l=n(84522);function c(){var e=(0,r._)((0,o.useState)(!1),2),t=e[0],n=e[1],c=function(){var e,t,n,i,c=(0,l.Z)(),s=(e=(0,a.Z)().container,n=(t=(0,r._)((0,o.useState)("/home/runner"),2))[0],i=t[1],(0,o.useEffect)(function(){e.exec("pwd").then(function(e){var t;e.output&&i((null===(t=e.output)||void 0===t?void 0:t.replace("\n",""))||"")})},[e]),n);if(!c)return"vscode://vscode-remote/ssh-remote";var u=c.sshUser,d=c.sshHostname,f=c.sshPort,h="vscode://vscode-remote/ssh-remote+".concat(u,"@").concat(d,":").concat(f).concat(s);try{return window.encodeURI(h)}catch(e){return h}}(),s=(0,i.Z)("ssh","workspace-ssh-connect-to-vscode-config-tour"),u=s.register;return(0,o.useEffect)(function(){u()},[u]),{openInVSCode:(0,o.useCallback)(function(){if(s.shouldDisplay){n(!0);return}window.location.href=c},[s.shouldDisplay,c]),onConfirmConfig:(0,o.useCallback)(function(){n(!1),s.dismiss(),window.location.href=c},[s,c]),isConfigModalOpen:t,closeConfigModal:(0,o.useCallback)(function(){n(!1)},[])}}},84522:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(39271),i=n(21625),o=n(81199);function a(){var e=(0,o.Z)().container,t=(0,r.Z)(),n=(0,i.Z)(e,{fallbackToReplCo:!1});if(!n)return null;var a=new URL(n).host,l=a.indexOf(":"),c="22";return -1!==l&&(a=a.substring(0,l),c="2022"),{sshUser:t,sshHostname:a,sshPort:c}}},65243:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(74985),i=n(43312);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},96225:function(e,t,n){n.d(t,{w:function(){return h}});var r=n(41733),i=n(66626),o=n(74985),a=n(43312),l=n(55927),c=n(72093),s=n(30826),u=n.n(s),d=n(50959),f=n(10422);function h(e){var t=e.targetElement,n=(0,i._)((0,d.useState)(null),2),s=n[0],h=n[1],m=(0,l.Z)(function(){t&&h({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},{type:"throttle",wait:100});if((0,d.useEffect)(function(){t&&m(t)},[t,m]),(0,d.useEffect)(function(){if(t){var e=u()(function(){h({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}},[t]),!s||!t)return null;var v=(0,a.iv)({backgroundColor:c.TV.backgroundOverlay,zIndex:c.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,f.createPortal)((0,o.BX)(o.HY,{children:[(0,o.tZ)("div",{id:"wat",css:[p((0,r._)({side:"left-top"},s)),v]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"top-right"},s)),v]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"right-bottom"},s)),v]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"bottom-left"},s)),v]})]}),document.body)}function p(e){var t=e.side,n=e.rect,r=e.docWidth,i=e.docHeight;switch(t){case"left-top":return(0,a.iv)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)});case"top-right":return(0,a.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)});case"right-bottom":return(0,a.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.top),"px)")});case"bottom-left":return(0,a.iv)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.bottom),"px)")})}}},2401:function(e,t,n){n.d(t,{k:function(){return v}});var r=n(41733),i=n(30509),o=n(66626),a=n(74985),l=n(19653),c=n(55927),s=n(80012),u=n(64432),d=n(23987),f=n(72093),h=n(50959),p=n(10422),m=n(34335);function v(e){var t=e.targetElement,n=e.activeStep,v=e.goto,g=e.currentStepIndex,y=e.totalSteps,b=e.done,w=e.disableAnimation,Z=e.placement,x=e.cypressCloseData,C=e.onClickOutside,_=e.innerRef,S=e.width,k=(0,o._)((0,h.useState)(null),2),E=k[0],T=k[1],R=(0,o._)((0,h.useState)(null),2),I=R[0],D=R[1],B=(0,m.D)(t,E,{placement:void 0===Z?"right":Z,modifiers:[{name:"arrow",options:{element:I,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),G=(0,c.Z)(function(){var e;null===(e=B.update)||void 0===e||e.call(B)},{type:"throttle",wait:100});(0,h.useEffect)(function(){G(t)},[t,G]),(0,h.useImperativeHandle)(_,function(){return{updateTooltip:function(){var e;null===(e=B.update)||void 0===e||e.call(B)}}});var A=(0,l.Z)(function(){C&&C()},[C]);return(0,p.createPortal)((0,a.BX)("div",(0,i._)((0,r._)({ref:function(e){A.current=e,T(e)},style:B.styles.popper,css:{transition:w?"all":"all 0.5s ease-out",zIndex:f.n0+2,width:null!=S?S:320}},B.attributes.popper),{children:[(0,a.tZ)(d.O,{title:n.title,content:n.content,onDismiss:function(){b()},currentStepIndex:g,onCurrentStepChange:v,totalSteps:y,cypressCloseData:void 0===x?"tour-tooltip-close-button":x}),(0,a.tZ)("span",{style:B.styles.arrow,css:[u.wk,{"&::after":{backgroundColor:s.Br.primary.dimmest,border:"1px solid "+s.Br.primary.dimmer}}],ref:D})]})),document.body)}},85777:function(e,t,n){n.d(t,{Do:function(){return N},Sr:function(){return L},e$:function(){return P},rk:function(){return O}});var r=n(66626),i=n(74985),o=n(50959),a=n(42650),l=n(39460),c=n(48553),s=n(85733),u=n(96225),d=n(2401),f=n(45271),h=n(23987),p=n(49500),m=(0,o.createContext)(void 0),v=m.Provider,g=(0,a.cn)(null),y=(0,a.cn)(new Map),b=(0,a.cn)(function(e){return!e(I)&&!e(T)}),w=(0,a.cn)(function(e){var t,n,r=e(R);return r&&null!==(n=null===(t=e(g))||void 0===t?void 0:t.steps.find(function(e){return e.id===r}))&&void 0!==n?n:null}),Z=(0,a.cn)(function(e){var t=e(w);return(null==t?void 0:t.isModal)?t:null}),x=(0,a.cn)(function(e){var t,n=e(R);if(!n)return -1;var r=e(g);return null!==(t=null==r?void 0:r.steps.findIndex(function(e){return n===e.id}))&&void 0!==t?t:-1}),C=(0,a.cn)(function(e){var t=e(R);return t?e(y).get(t):null}),_=(0,a.cn)(function(e){var t=e(g),n=e(y);return null==t?void 0:t.steps.filter(function(e){return!e.autoSkipIfNoTarget||!!n.get(e.id)})}),S=(0,a.cn)(function(e){var t,n=e(R);if(!n)return -1;var r=e(_);return null!==(t=null==r?void 0:r.findIndex(function(e){return n===e.id}))&&void 0!==t?t:-1}),k=(0,a.cn)(function(e){var t,n;return null!==(n=null===(t=e(_))||void 0===t?void 0:t.length)&&void 0!==n?n:0}),E=(0,a.cn)(null,function(e,t,n,r){t(y,function(e){var t=new Map(e);return r?t.set(n,r):t.delete(n),t})}),T=(0,a.cn)(!1),R=(0,a.cn)(null),I=(0,a.cn)(!1),D=(0,a.cn)(function(e){return e(g)&&!e(T)&&!e(I)}),B=(0,a.cn)(null,function(e,t,n){var r,i=e(g);if(!(!i||(r="number"==typeof n?n:i.steps.findIndex(function(e){return n===e.id}))<0||r>=i.steps.length)){for(var o=e(x),a=e(y),l=i.steps[r],c=r<o;!a.get(l.id)&&l.autoSkipIfNoTarget;){if((r=c?r-1:r+1)<0||r>=i.steps.length)return;l=i.steps[r]}t(R,l.id)}}),G=(0,a.cn)(null,function(e,t){var n=e(g);if(n){var r=e(x),i=e(y),o=n.steps[r+1];if(o&&o.autoSkipIfNoTarget)for(var a=r+1;o&&o.autoSkipIfNoTarget&&!i.get(o.id);)a++,o=n.steps[a];if(!o){t(I,!0);return}t(R,o.id)}}),A=(0,a.cn)(null,function(e,t){t(B,0),t(I,!1)});function P(e){var t=(0,o.useContext)(m),n=(0,o.useMemo)(function(){return(0,a.cn)(function(t){return!(t(T)||t(I))&&e===t(R)})},[e]),r=(0,l.b9)(G,{store:t}),i=(0,l.b9)(B,{store:t}),c=N(e),s=(0,l.Dv)(n,{store:t});return t&&c?{isActive:s,delegateTooltip:c,next:r,goto:i}:null}function N(e){var t=(0,o.useContext)(m),n=(0,l.b9)(E,{store:t}),r=(0,o.useCallback)(function(t){n(e,t)},[n,e]);return t?r:void 0}function L(){var e=(0,o.useContext)(m),t=(0,l.Dv)(D,{store:e});return e&&t}function O(e){var t,n=e.children,f=e.tour,h=e.onStep,m=e.onDone,y=(0,r._)((0,o.useState)(function(){var e;return(e=(0,a.MT)()).set(g,f),e.set(R,f.steps[0].id),e}),1)[0],Z=(0,l.Dv)(w,{store:y}),_=(0,l.Dv)(x,{store:y});if(-1===_)throw Error("Current tour step is not in tour steps");var E=(0,r._)((0,c.oe)({variables:{name:f.id},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:f.id,seen:!0}}}),1)[0],D=(0,l.b9)(I,{store:y}),G=(0,o.useRef)();(0,o.useEffect)(function(){G.current=Z},[Z]);var P=(0,l.b9)(B,{store:y}),N=(0,l.Dv)(C,{store:y}),L=(0,l.Dv)(b,{store:y}),O=(0,l.b9)(A,{store:y});window.startTour=function(){p.log("starting tour:",f.id,"from",f.steps[0].id),O()};var M=(0,l.Dv)(S,{store:y}),X=(0,l.Dv)(k,{store:y}),F=(0,s.Z)(h),W=(0,s.Z)(m);(0,o.useEffect)(function(){return y.sub(R,function(){var e,t,n=y.get(R),r=y.get(I);n&&(r?null===(e=W.current)||void 0===e||e.call(W,n):null===(t=F.current)||void 0===t||t.call(F,n))})},[y,F,W]),(0,o.useEffect)(function(){return y.sub(I,function(){y.get(I)&&E()})},[y,E]);var H=(0,c.Pp)({variables:{tours:f.id},onCompleted:function(e){var t;y.set(I,!!(null==e?void 0:null===(t=e.currentUser)||void 0===t?void 0:t.toursSeen[0].seen))}}).loading,V=(0,l.b9)(T,{store:y});return(0,o.useEffect)(function(){V(H)},[V,H]),(0,i.BX)(v,{value:y,children:[L&&(null==Z?void 0:Z.isModal)?(0,i.tZ)(U,{}):null,L&&N&&Z?(0,i.BX)(i.HY,{children:[(0,i.tZ)(u.w,{targetElement:N}),(0,i.tZ)(d.k,{targetElement:N,activeStep:Z,currentStepIndex:M,done:function(){return D(!0)},goto:function(e){P(e+_-M)},totalSteps:X,disableAnimation:0===_||!!(null===(t=G.current)||void 0===t?void 0:t.isModal)})]}):null,n]})}function U(){var e,t,n,r,a,c,s,u=(e=(0,o.useContext)(m),t=(0,l.Dv)(Z,{store:e}),n=(0,l.b9)(B,{store:e}),r=(0,l.Dv)(x,{store:e}),a=(0,l.Dv)(k,{store:e}),c=(0,l.b9)(I,{store:e}),s=(0,o.useCallback)(function(){return c(!0)},[c]),e&&t?{activeStep:t,totalSteps:a,goto:n,currentStepIndex:r,done:s}:null);if(!u)return null;var d=u.activeStep,p=u.goto,v=u.totalSteps,g=u.currentStepIndex,y=u.done;return(0,i.tZ)(f.u,{preventClose:!0,isOpen:!0,onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,i.tZ)(h.O,{title:d.title,content:d.content,onDismiss:function(){y()},currentStepIndex:g,onCurrentStepChange:p,totalSteps:v,cypressCloseData:"tour-tooltip-close-button"})})}},19805:function(e,t,n){var r,i;n.d(t,{z:function(){return r}}),(i=r||(r={})).FileNode="FILE_NODE",i.FileHeaderTab="FILE_HEADER_TAB",i.Code="CODE",i.Pane="PANE",i.NewPane="NEW_PANE"},48311:function(e,t,n){n.d(t,{P3:function(){return x},QE:function(){return _}});var r=n(41733),i=n(30509),o=n(98924),a=n(66626),l=n(74985),c=n(28266),s=n.n(c),u=n(97754),d=n.n(u),f=n(59947),h=n(73789),p=n(29318),m=n(57693),v=n(87128),g=n(56731),y=n(50959),b=n(96372),w=n(24857),Z=n(72121),x={default:"default",loading:"default",error:"negative",success:"positive",warning:"default"},C=y.forwardRef(function(e,t){var n,c,u,m=e.label,C=e.description,S=e.icon,k=e.id,E=e.onChange,T=e.large,R=e.placeholder,I=e.validationResults,D=e.onValidationError,B=e.dataCy,G=(0,o._)(e,["label","description","icon","id","onChange","large","placeholder","validationResults","onValidationError","dataCy"]),A=(0,g.U)(),P=k||A("input"),N=C?A("input-description"):void 0,L=(0,a._)((0,y.useState)(!1),2),O=L[0],U=L[1];(null==I?void 0:I.some(function(e){return"loading"===e.state}))?(n="loading",c=(0,l.tZ)(p.Z,{size:16})):(null==I?void 0:I.some(function(e){return"error"===e.state}))?(n="error",u="var(--accent-negative-default)",c=(0,l.tZ)(v.Z,{}),O&&(null==D||D())):(null==I?void 0:I.some(function(e){return"warning"===e.state}))?(n="warning",u="var(--foreground-dimmest)",c=(0,l.tZ)(h.Z,{})):(null==I?void 0:I.every(function(e){return"success"===e.state}))?(n="success",u="var(--accent-positive-default)",c=(0,l.tZ)(f.Z,{})):n="default";var M=x[n],X=T?"var(--font-size-subhead-default)":"var(--font-size-default)";return(0,l.BX)("div",{className:s().dynamic([["6c90d77b6a07b4c2",[u,X,G.monospace?"var(--font-family-code)":"var(--font-family-default)",X,S?"var(--space-24)":"auto"]]])+" container",children:[m?(0,l.BX)(l.HY,{children:[G.required?(0,l.BX)(w.Ug,{spacing:"2px",children:[(0,l.tZ)(Z.Z,{tag:"label",foreground:O?1:2,size:T?"small":"xsmall",htmlFor:P,children:m}),(0,l.tZ)("span",{className:s().dynamic([["6c90d77b6a07b4c2",[u,X,G.monospace?"var(--font-family-code)":"var(--font-family-default)",X,S?"var(--space-24)":"auto"]]])+" required",children:"*"})]}):(0,l.tZ)(Z.Z,{tag:"label",foreground:O?1:2,size:T?"small":"xsmall",htmlFor:P,children:m}),(0,l.tZ)(b.Z,{height:"4px"})]}):null,(0,l.BX)("div",{className:s().dynamic([["6c90d77b6a07b4c2",[u,X,G.monospace?"var(--font-family-code)":"var(--font-family-default)",X,S?"var(--space-24)":"auto"]]])+" input-container",children:[S?(0,l.tZ)("div",{className:s().dynamic([["6c90d77b6a07b4c2",[u,X,G.monospace?"var(--font-family-code)":"var(--font-family-default)",X,S?"var(--space-24)":"auto"]]])+" icon-container left",children:S}):null,(0,l.tZ)("input",(0,i._)((0,r._)({id:P,ref:t,required:G.required||!1,onChange:E,placeholder:void 0===R?"":R,"aria-busy":"loading"===n,"aria-invalid":"error"===n,"aria-describedby":N,"data-cy":B},G),{onFocus:function(e){U(!0),G.onFocus&&G.onFocus(e)},onBlur:function(e){U(!1),G.onBlur&&G.onBlur(e)},className:s().dynamic([["6c90d77b6a07b4c2",[u,X,G.monospace?"var(--font-family-code)":"var(--font-family-default)",X,S?"var(--space-24)":"auto"]]])+" "+(d()(M,G.className)||"")})),c?(0,l.tZ)("div",{onMouseEnter:function(){return U(!0)},onMouseLeave:function(){return U(!1)},className:s().dynamic([["6c90d77b6a07b4c2",[u,X,G.monospace?"var(--font-family-code)":"var(--font-family-default)",X,S?"var(--space-24)":"auto"]]])+" icon-container right",children:c}):null]}),C?(0,l.BX)(l.HY,{children:[(0,l.tZ)(b.Z,{height:"4px"}),(0,l.tZ)(Z.Z,{id:N,tag:"span",foreground:3,size:T?"medium":"small",children:C})]}):null,(null==I?void 0:I.some(function(e){return!!e.message}))&&O?(0,l.tZ)(_,{validationResults:I}):null,(0,l.tZ)(s(),{id:"6c90d77b6a07b4c2",dynamic:[u,X,G.monospace?"var(--font-family-code)":"var(--font-family-default)",X,S?"var(--space-24)":"auto"],children:".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}.required.__jsx-style-dynamic-selector{color:var(--accent-negative-default);font-size:var(--font-size-small)}.spacer.row.__jsx-style-dynamic-selector{width:var(--space-4)}.spacer.col.__jsx-style-dynamic-selector{height:var(--space-4)}.input-container.__jsx-style-dynamic-selector{position:relative}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:50%;-webkit-transform:translatey(-50%);-moz-transform:translatey(-50%);-ms-transform:translatey(-50%);-o-transform:translatey(-50%);transform:translatey(-50%);background-color:var(--background-default);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;padding:var(--space-4)}.icon-container.right.__jsx-style-dynamic-selector{right:var(--space-8);color:".concat(u,"}.icon-container.left.__jsx-style-dynamic-selector{left:var(--space-4);background-color:transparent;color:var(--foreground-dimmest)}input.__jsx-style-dynamic-selector{font-size:").concat(X,";font-family:").concat(G.monospace?"var(--font-family-code)":"var(--font-family-default)",";line-height:").concat(X,";background-color:var(--background-default);color:var(--foreground-default);padding:var(--space-8);padding-left:").concat(S?"var(--space-24)":"auto",";border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);outline:none;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:color.1s,background-color.1s;-moz-transition:color.1s,background-color.1s;-o-transition:color.1s,background-color.1s;transition:color.1s,background-color.1s}input.__jsx-style-dynamic-selector:disabled{opacity:.5}input.default.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}input.success.__jsx-style-dynamic-selector{border-color:var(--accent-positive-stronger)}input.success.__jsx-style-dynamic-selector:hover{border-color:var(--accent-positive-dimmer)}input.negative.__jsx-style-dynamic-selector{border-color:var(--accent-negative-default)}input.negative.__jsx-style-dynamic-selector:hover{border-color:var(--accent-negative-dimmer)}input.__jsx-style-dynamic-selector:active,input.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}")})]})}),_=function(e){var t=e.validationResults;return(0,l.BX)("div",{"aria-live":"polite",className:"jsx-717f837fe0108fc4 container",children:[t.map(function(e,t){var n;switch(e.state){case"success":n=(0,l.tZ)(f.Z,{color:"var(--accent-positive-default)"});break;case"error":n=(0,l.tZ)(v.Z,{color:"var(--accent-negative-default)"});break;case"warning":n=(0,l.tZ)(h.Z,{color:"var(--foreground-dimmest)"});break;default:n=(0,l.tZ)(m.Z,{color:"var(--foreground-dimmest)"})}return(0,l.BX)("div",{className:"jsx-717f837fe0108fc4 validation-row",children:[(0,l.tZ)("div",{className:"jsx-717f837fe0108fc4 validation-icon-container",children:n}),(0,l.tZ)(b.Z,{width:"4px"}),(0,l.tZ)(Z.Z,{foreground:2,size:"small",children:e.message})]},e.state+t.toString())}),(0,l.tZ)(s(),{id:"717f837fe0108fc4",children:".container.jsx-717f837fe0108fc4{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:absolute;top:-webkit-calc(100% + var(--space-4));top:-moz-calc(100% + var(--space-4));top:calc(100% + var(--space-4));background-color:var(--background-default);padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);z-index:9999;-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}.validation-row.jsx-717f837fe0108fc4{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;width:100%;padding-bottom:var(--space-4)}.validation-icon-container.jsx-717f837fe0108fc4{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;padding-right:var(--space-4)}"})]})};t.ZP=C},40332:function(e,t,n){var r=n(74985),i=n(28266),o=n.n(i),a=n(97754),l=n.n(a),c=n(56731);n(50959),t.Z=function(e){var t=e.name,n=void 0===t?"toggle":t,i=e.id,a=e.elevation,s=void 0===a?"higher":a,u=e.isOn,d=e.onIcon,f=e.offIcon,h=e.onChange,p=e.dataCy,m=(0,c.U)(),v=null!=i?i:m(n);return(0,r.BX)("label",{"data-cy":p,htmlFor:v,className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" "+(l()("toggle-label",{isOn:u})||""),children:[(0,r.tZ)("input",{name:n,checked:u,onChange:h,id:v,type:"checkbox",className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" toggle-checkbox"}),(0,r.tZ)("span",{className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" toggle-button",children:u&&d?d:f||null}),(0,r.tZ)(o(),{id:"8d56ad7b5afff72c",dynamic:[s],children:".toggle-checkbox.__jsx-style-dynamic-selector{height:0;width:0;visibility:hidden}.toggle-label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;width:38px;height:24px;background:var(--background-".concat(s,');border:.5px solid var(--outline-dimmest);-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;position:relative;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.toggle-button.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;content:"";position:absolute;left:1px;width:20px;height:20px;-webkit-border-radius:45px;-moz-border-radius:45px;border-radius:45px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s;background:var(--white);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);color:var(--foreground-dimmer)}.toggle-label.isOn.__jsx-style-dynamic-selector{background-color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.toggle-checkbox.__jsx-style-dynamic-selector:checked+.toggle-button.__jsx-style-dynamic-selector{-webkit-transform:translatex(-webkit-calc(100% - 6px));-moz-transform:translatex(-moz-calc(100% - 6px));-ms-transform:translatex(calc(100% - 6px));-o-transform:translatex(calc(100% - 6px));transform:translatex(-webkit-calc(100% - 6px));transform:translatex(-moz-calc(100% - 6px));transform:translatex(calc(100% - 6px));color:var(--accent-primary-default)}.toggle-label.__jsx-style-dynamic-selector:active .toggle-button.__jsx-style-dynamic-selector{-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}')})]})}},53077:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(41733),i=n(30509),o=n(98924),a=n(74985),l=n(45271),c=n(8137),s=n(21262),u=n(71440),d=n(58995);function f(){var e=(0,s._)(["\n  query UpgradeModal {\n    currentUser {\n      id\n      cycles {\n        transactions(count: 1) {\n          items {\n            id\n            time_created\n          }\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,s._)(["\n  query CurrentUserSubscriptionIdentify {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return h=function(){return e},e}var p={},m=(0,u.Ps)(f()),v=(0,u.Ps)(h());function g(e){var t,n,s=e.isOpen,u=e.onRequestClose,f=(0,o._)(e,["isOpen","onRequestClose"]);return t=(0,r._)({},p,{ssr:!1,context:{noBatch:!0}}),d.a(m,t),n=(0,r._)({},p,void 0),d.a(v,n),(0,a.tZ)(l.u,(0,i._)((0,r._)({noPadding:!0,maxWidth:c.W,fitContent:!0,isOpen:s,onRequestClose:u},f),{children:(0,a.tZ)(c.Z,(0,i._)((0,r._)({},f),{onCyclesCheckoutComplete:u}))}))}},44355:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(38753),i=n(99189),o=n(18317),a=n(85421),l=n(50959),c=n(96955);function s(e){var t=e.sendInput,n=e.paste,s=(0,a.useRouter)(),u=(0,r.Gv)(s);(0,l.useEffect)(function(){if(u){var e=function(e,n){t(n)?(0,i.gU)(e):(0,i.pl)(e)},r=function(e){"unknown"===e||(0,c.Z)(e)},a=function(t){(0,i.gN)(t,function(t){var a=t.type;switch(a){case o.cF.SHELL_INSERT_INPUT:e(t.id,t.input);break;case o.cF.SHELL_COMMAND:r(t.command);break;case o.cF.SHELL_PASTE_TEXT:n(t.text)?(0,i.gU)(t.id):(0,i.pl)(t.id);break;default:(0,c.Z)(a)}})};return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}},[u,t,n])}},70379:function(e,t,n){n.d(t,{H$:function(){return c},Q1:function(){return l}});var r=n(99189),i=n(18317),o=n(85234),a=n.n(o);function l(e){var t=e.isDrawerOpen,n=e.isShowingAllPanes,r=e.isSaving,o=e.isOffline,a=e.runState,l=e.activePaneType,c=e.activePaneFilePath;return{messageType:i.cF.WORKSPACE_STATE,isDrawerOpen:t,isShowingAllPanes:n,isSaving:r,isOffline:o,runState:a,activePaneType:l,activePaneFilePath:c}}function c(e){var t=e.payload,n=a()();(0,r.bG)(t,n)}},7198:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(12285),i=n(4955),o=n(41733),a=n(30509),l=n(9670),c=n(74985),s=n(43182),u=n(94778),d=n(72093),f=n(50959),h=n(1813),p=n(49500),m=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),e.state={hasErrored:!1,error:null,errorInfo:null},e}var o=n.prototype;return o.componentDidCatch=function(e,t){this.setState({hasErrored:!0,error:e,errorInfo:t}),this.props.handleError(e,t),p.error(e)},o.render=function(){if(this.state.hasErrored){var e,t,n;return(0,c.tZ)(u.G,{css:[d.l0.font.code,d.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},d.l0.backgroundColor.blurpleDefault,d.l0.height("100%")],children:(0,c.tZ)(u.G,{children:null!==(n=null===(t=this.state)||void 0===t?void 0:null===(e=t.error)||void 0===e?void 0:e.stack)&&void 0!==n?n:"An unknown error occurred."})})}return this.props.children},n}(f.Component);function v(e){var t=e.bsod,n=void 0!==t&&t,r=e.sentry,i=void 0===r||r,l=e.handleError,u=e.children,d=e.origin,f=void 0===d?"ErrorBoundary: (no origin provided)":d,p=e.tags,v=void 0===p?{}:p,g=e.extras,y=void 0===g?{}:g,b=(0,h.uV)();return(0,c.tZ)(m,{handleError:function(e,t){n?b({error:e,extras:(0,a._)((0,o._)({},y),{errorInfo:t}),tags:(0,a._)((0,o._)({},v),{errorBoundary:!0}),origin:f}):i&&s.$e(function(n){n.setTag("errorBoundary",!0),n.setTags(v),n.setExtra("errorInfo",t),n.setExtras(y),s.Tb(e)}),l&&l(e,t)},children:u})}},90079:function(e,t,n){n.d(t,{YX:function(){return w},ho:function(){return Z}});var r=n(12285),i=n(41733),o=n(30509),a=n(66626),l=n(74985),c=n(46298),s=n(82230),u=n(94778),d=n(59947),f=n(80186),h=n(29318),p=n(72093),m=n(57117),v=n(54443),g=n(50959),y=n(48376),b=n(59452),w=new(function(){"use strict";function e(){var t=this;(0,r._)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,y.u)([]),this.clear=function(){t.logs.current=[]}}var t=e.prototype;return t.toggle=function(e){this.enabled=e},t.add=function(e){var t=this,n=this.counter++;if(!this.enabled)return{id:n};var r={id:n,request:e,requestTime:Date.now()};return this.logs.update(function(e){return[r].concat(e).slice(0,t.maxEntries)}),{id:n}},t.update=function(e,t){this.enabled&&this.logs.update(function(n){var r=n.findIndex(function(t){return t.id===e.id});if(-1===r)return n;var i=n.slice();return i[r]=t(i[r]),i})},t.complete=function(e,t){this.update(e,function(e){return(0,o._)((0,i._)({},e),{response:t,responseTime:Date.now()})})},t.abort=function(e){this.logs.update(function(t){return t.filter(function(t){return t.id!==e.id||null!=t.responseTime})})},e}()),Z=function(e){var t=e.isHidden,n=(0,c.Z)(w.logs);return t?null:(0,l.BX)(u.G,{css:[p.l0.flex.column],children:[(0,l.BX)(u.G,{css:[p.l0.flex.row,p.l0.align.center,p.l0.m(4),p.l0.position.sticky,p.l0.top(0),p.l0.backgroundColor.backgroundDefault,p.l0.zIndex(1)],children:[(0,l.tZ)(s.xv,{css:p.l0.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.tZ)(v.Z,{onClick:w.clear})]}),(0,l.BX)(u.G,{css:[p.l0.flex.grow(1),p.l0.flex.column,p.l0.overflow("auto")],children:[n.map(function(e){var t;return(0,l.tZ)(x,{log:e},null!==(t=e.id)&&void 0!==t?t:e.requestTime.valueOf())}),!n.length&&(0,l.tZ)(u.G,{css:p.l0.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},x=(0,g.memo)(function(e){var t,n=e.log,r=n.requestTime,i=n.responseTime,o=n.request,c=n.response,v=(0,a._)((0,m.Z)(!0),2),g=v[0],y=v[1],w=o.prefix.length>20?"...".concat(o.prefix.slice(-20)):o.prefix;return(0,l.BX)(u.G,{css:[p.l0.my(4),p.l0.mx(4)],children:[(0,l.BX)(u.G,{role:"button",onClick:y,onKeyDown:y,tabIndex:0,css:[p.l0.flex.row,p.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(u.G,{css:[p.l0.flex.grow(1),p.l0.rowWithGap(2)],children:[(0,l.tZ)(s.xv,{multiline:!1,children:(t=n.response)?"CompleteCodeResult"===t.__typename?(0,l.tZ)(d.Z,{}):(0,l.tZ)(f.Z,{}):(0,l.tZ)(h.Z,{})}),(0,l.tZ)(s.xv,{multiline:!1,children:(0,l.tZ)("code",{children:w})})]}),(0,l.tZ)(u.G,{css:{opacity:.5},children:null!=i&&(0,l.BX)(s.xv,{css:p.l0.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf(),"ms"]})})]}),!g&&(0,l.BX)(l.HY,{children:[void 0!==o&&(0,l.tZ)(b.g,{name:"request",src:o}),void 0!==c&&("CompleteCodeResult"===c.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[p.l0.overflow("scroll"),p.l0.borderRadius(4),p.l0.p(4),{border:"1px solid ".concat(p.TV.outlineDimmest)}],children:c.code})]}):(0,l.tZ)(b.g,{name:"response",src:c}))]})]})})},20025:function(e,t,n){n.d(t,{$G:function(){return Z},Ay:function(){return g},Ys:function(){return w},_k:function(){return d},_t:function(){return h},cF:function(){return a},gd:function(){return s},mN:function(){return m},qc:function(){return b}});var r=n(42650),i=n(39460),o=n(50959),a=function(e,t){var n=e.dir,r=e.channel,i=e.stringifiedCmd,o=e.cmd;return(!t.direction||n===t.direction)&&(!t.channels.length||!!t.channels.includes(o.channel))&&(!!(!t.regexp||!t.regexp.test||r.name&&t.regexp.test(r.name)||r.service&&t.regexp.test(r.service))||t.regexp.test(i))},l=(0,r.cn)([]),c=(0,r.cn)([]);function s(){return(0,o.useDeferredValue)((0,i.Dv)(c))}var u=(0,r.cn)(null,function(e,t,n){a(n,e(p))&&t(c,function(e){return e.concat(n)}),t(l,function(e){return e.concat(n)})});function d(){return(0,i.b9)(u)}var f=(0,r.cn)(null,function(e,t){t(l,[]),t(c,[])});function h(){return(0,i.b9)(f)}var p=(0,r.cn)({regexp:null,direction:"",highlightOnly:!1,channels:[]});function m(){return(0,i.Dv)(p)}var v=(0,r.cn)(null,function(e,t,n){var r;t(p,n),t(c,(r=e(l),(n.regexp||n.direction||n.channels.length)&&!n.highlightOnly?r.filter(function(e){return a(e,n)}):r))});function g(){return(0,i.b9)(v)}var y=(0,r.cn)(!1);function b(){return(0,i.Dv)(y)}function w(){return(0,i.b9)((0,o.useMemo)(function(){return(0,r.cn)(null,function(e,t,n){return t(y,n)})},[]))}function Z(){return(0,i.b9)((0,o.useMemo)(function(){return(0,r.cn)(null,function(e,t){return t(y,function(e){return!e})})},[]))}},17031:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(81199),i=n(20025),o=n(85421),a=n(50959),l=n(92674),c=n.n(l);function s(){var e=(0,o.useRouter)(),t=(0,r.Z)().container,n=(0,i.qc)(),l=(0,i.Ys)(),s=(0,i._k)();(0,a.useEffect)(function(){e.query.debug&&"undefined"!==e.query.debug&&l(!0)},[l,e.query.debug]),(0,a.useEffect)(function(){if(n)return t.client().onDebugLog(function(e){if("log"===e.type){var n={name:e.log.channel.name,service:null};if("string"==typeof e.log.channel.service)n.service=e.log.channel.service;else if(e.log.channel.service){var r=t.getContext();r&&(n.service=e.log.channel.service(r))}s({id:c()(),channel:n,dir:e.log.direction,cmd:e.log.cmd,stringifiedCmd:JSON.stringify(e.log.cmd),timestamp:window.performance.now()})}})},[n,t,s])}},59452:function(e,t,n){n.d(t,{L:function(){return A},g:function(){return N}});var r=n(42516),i=n(41733),o=n(30509),a=n(66626),l=n(63257),c=n(74985),s=n(56731),u=n(50959),d=n(71462),f=n(71089),h=n(85763),p=n(18060),m=n(82230),v=n(94778),g=n(54501),y=n(59947),b=n(64318),w=n(11716),Z=n(72452),x=n(55964),C=n(57120),_=n(73789),S=n(29318),k=n(72093),E=n(33530),T=n(40332),R=n(57117),I=n(54443),D=n(52425),B=n(8252),G=n(54590),A=function(e){var t,n,d,g,y,b,w=e.isHidden,C=(n=(t=(0,a._)((0,u.useState)(null),2))[0],d=t[1],g=(0,D.R3)(),(0,u.useEffect)(function(){g!==n&&null!=g&&d(g)},[g,n]),n),_=(0,E.Z)(C||""),S=(0,a._)((0,u.useState)(null===(y=_[0])||void 0===y?void 0:y.clientId),2),A=S[0],N=S[1];A&&!_.find(function(e){return A===e.clientId})&&N(null===(b=_[0])||void 0===b?void 0:b.clientId),!A&&_.length&&N(_[0].clientId);var O=(0,s.U)(),U=(0,a._)((0,R.Z)(!0),2),M=U[0],X=U[1],F=(0,a._)((0,u.useState)(""),2),W=F[0],H=F[1],V=(0,a._)((0,u.useState)(function(){return{}}),2),z=V[0],j=V[1],q=(0,a._)((0,R.Z)(!0),2),J=q[0],Y=q[1],K=(0,a._)((0,R.Z)(!0),2),$=K[0],Q=K[1],ee=(0,u.useCallback)(function(e,t){j(function(n){var a;return(0,o._)((0,i._)({},n),(0,r._)({},e,[t].concat((0,l._)(null!==(a=n[e])&&void 0!==a?a:[])).slice(0,100)))})},[]),et=(0,u.useCallback)(function(e,t,n){j(function(r){if(r[e]){for(var o=0;o<r[e].length;o++)if(r[e][o].id===t){r[e][o]=n(r[e][o]);break}r[e]=r[e].slice(0,100)}return(0,i._)({},r)})},[]),en=(0,u.useCallback)(function(){A&&j(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},A,[]))})},[A]),er=(0,u.useMemo)(function(){return _.find(function(e){return e.clientId===A})},[_,A]),ei=null==er?void 0:er.isOpen(C||""),eo=(0,u.useCallback)(function(){var e=null==er?void 0:er.clientId;e&&ee(e,{canceled:!1,notification:{method:"probe",params:{filePath:C,state:null==er?void 0:er.getServerState(),capabilities:null==er?void 0:er.getServerCapabilities(),diagnostics:ei?null==er?void 0:er.getDiagnostics(C||""):[],isOpen:ei,isSupportedFile:null==er?void 0:er.isSupportedFile(C||"")}},requestTime:new Date,type:"probe"})},[ee,C,er,ei]),ea=(0,u.useMemo)(function(){if(!A)return[];var e,t,n=W.split(",").map(function(e){return e.trim()}).filter(Boolean);if(!n.length)return null!==(e=z[A])&&void 0!==e?e:[];var r=null!==(t=z[A])&&void 0!==t?t:[];return J||(r=r.filter(function(e){return null==e.notification})),$||(r=r.filter(function(e){return null==e.request})),W&&(r=r.filter(function(e){return n.some(function(t){var n;return null===(n=e.request||e.notification)||void 0===n?void 0:n.method.toLowerCase().includes(t.toLowerCase())})})),r},[W,z,A,J,$]);return((0,u.useEffect)(function(){return(0,B.uf)(_.flatMap(function(e){return[e.onRequest(function(t){M&&ee(e.clientId,{id:t.id,canceled:!1,request:t.data,requestTime:new Date})}),e.onResponse(function(t){M&&et(e.clientId,t.id,function(e){return(0,i._)((0,o._)((0,i._)({},e),{responseTime:new Date}),void 0!==t.result?{response:t.result}:{error:t.error})})}),e.onCancelRequest(function(t){M&&et(e.clientId,t,function(e){return(0,o._)((0,i._)({},e),{canceled:!0})})}),e.onDiagnostics(function(t){var n=t.path,r=t.diagnostics;M&&ee(e.clientId,{canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+n,params:r},requestTime:new Date,type:"diagnostics"})}),e.onServerStateChange(function(t){M&&ee(e.clientId,{canceled:!1,notification:{method:"state",params:{serverState:t}},requestTime:new Date,type:"state"})}),e.onServerCapabilitiesChange(function(t){M&&ee(e.clientId,{canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:t}},requestTime:new Date,type:"capabilities"})}),e.onSendNotification(function(t){M&&ee(e.clientId,{canceled:!1,notification:t,requestTime:new Date})}),e.onReceiveNotification(function(t){M&&ee(e.clientId,{canceled:!1,notification:t,requestTime:new Date})})]}))},[ee,et,M,_]),w)?null:(0,c.BX)(v.G,{css:[k.l0.flex.column],children:[(0,c.BX)(v.G,{css:[k.l0.flex.row,k.l0.align.center,k.l0.m(4),k.l0.position.sticky,k.l0.top(0),k.l0.backgroundColor.backgroundDefault,k.l0.zIndex(1)],children:[(0,c.tZ)(m.xv,{multiline:!1,children:A?(0,c.BX)(c.HY,{children:[(0,c.tZ)(L,{})," logs for ",(0,c.tZ)("code",{children:C})]}):"No LSP client available"}),(0,c.tZ)(h.hU,{alt:"Probe LSP",onClick:eo,children:(0,c.tZ)(Z.Z,{})}),(0,c.tZ)(v.G,{css:k.l0.flex.grow(1)}),(0,c.tZ)(T.Z,{id:"toggleIsLogging",isOn:M,onChange:X})]}),(0,c.tZ)(v.G,{children:(0,c.tZ)(G.hE,{name:"Visible LSP Client",value:A,onChange:N,row:!0,children:_.map(function(e){return(0,c.tZ)(G.rK,{id:e.clientId,text:e.clientName,value:e.clientId},e.clientId)})})}),(0,c.BX)(v.G,{css:[k.l0.rowWithGap(8),k.l0.m(4),k.l0.mb(8)],children:[(0,c.BX)(v.G,{css:k.l0.rowWithGap(4),children:[(0,c.tZ)(x.Z,{}),(0,c.tZ)(m.xv,{multiline:!1,children:"Show"})]}),(0,c.BX)(v.G,{css:k.l0.rowWithGap(4),children:[(0,c.tZ)(f.X,{id:O("showNotifications"),checked:J,onChange:Y}),(0,c.tZ)("label",{htmlFor:O("showNotifications"),children:" Notifications"})]}),(0,c.BX)(v.G,{css:k.l0.rowWithGap(4),children:[(0,c.tZ)(f.X,{id:O("showRequests"),checked:$,onChange:Q}),(0,c.tZ)("label",{htmlFor:O("showRequests"),children:" Requests"})]}),(0,c.tZ)(v.G,{css:k.l0.flex.growAndShrink(1)}),(0,c.tZ)(v.G,{css:k.l0.rowWithGap(4),children:(0,c.tZ)(I.Z,{onClick:en})})]}),(0,c.tZ)(v.G,{css:k.l0.rowWithGap(4),children:(0,c.tZ)(p.II,{id:O("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return H(e.target.value)},value:W})}),(0,c.BX)(v.G,{css:[k.l0.flex.grow(1),k.l0.flex.column,k.l0.overflow("auto")],children:[ea.map(function(e,t){var n;return(0,c.tZ)(P,{log:e},null!==(n=e.id)&&void 0!==n?n:e.requestTime.valueOf()+""+t)}),!ea.length&&(0,c.tZ)(v.G,{css:k.l0.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},P=u.memo(function(e){var t,n,r,i,o,l=e.log,s=l.requestTime,u=l.responseTime,d=l.request,f=l.response,h=l.notification,p=l.id,x=(0,a._)((0,R.Z)(!0),2),E=x[0],T=x[1];return(0,c.BX)(v.G,{css:[k.l0.my(4),k.l0.mx(4)],children:[(0,c.BX)(v.G,{role:"button",onClick:T,onKeyDown:T,tabIndex:0,css:[k.l0.flex.row,k.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,c.BX)(v.G,{css:[k.l0.flex.grow(1),k.l0.rowWithGap(2)],children:[(0,c.tZ)(m.xv,{className:"lspLog-emoji",multiline:!1,children:(t=l.type,n=l.canceled,r=l.response,i=l.notification,"state"===t?(0,c.tZ)(w.Z,{}):"diagnostics"===t?(0,c.tZ)(g.Z,{}):"capabilities"===t?(0,c.tZ)(C.Z,{}):"probe"===t?(0,c.tZ)(Z.Z,{}):n?(0,c.tZ)(b.Z,{}):i?(0,c.tZ)(_.Z,{}):void 0!==r?(0,c.tZ)(y.Z,{}):(0,c.tZ)(S.Z,{}))}),(0,c.BX)(m.xv,{className:"lspLog-requestMethod",multiline:!1,children:[(0,c.tZ)("code",{children:null===(o=d||h)||void 0===o?void 0:o.method}),null!=p&&(0,c.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",p]})]})]}),(0,c.tZ)(v.G,{css:{opacity:.5},children:null!=u&&(0,c.BX)(m.xv,{css:k.l0.fontSize(13),multiline:!1,children:[u.valueOf()-s.valueOf(),"ms"]})})]}),!E&&(0,c.BX)(c.HY,{children:[void 0!==d&&(0,c.tZ)(N,{name:"request.params",src:d.params}),void 0!==h&&(0,c.tZ)(N,{name:"notification.params",src:h.params}),void 0!==f&&(0,c.tZ)(N,{name:"response",src:f})]})]})}),N=(0,u.memo)(function(e){var t=e.name,n=e.src;return(0,c.tZ)(v.G,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,c.tZ)(d.Z,{json:(0,r._)({},t,n)})})}),L=function(){return(0,c.tZ)(m.xv,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(k.TV.redDimmer," 2px 2px")},children:"LSP"})}},57117:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(66626),i=n(50959);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r._)((0,i.useState)(e),2),n=t[0],o=t[1];return[n,(0,i.useCallback)(function(){return o(function(e){return!e})},[])]}},69249:function(e,t,n){n.d(t,{R:function(){return u}});var r=n(74985),i=n(94311),o=n(82230),a=n(94778),l=n(49224),c=n(72093),s=(0,l.X)({root:[c.l0.rowWithGap(8),c.l0.align.center],advanced:[{backgroundColor:"transparent","& div":{borderRadius:0,backgroundColor:"transparent",border:"0 none"},"&:after":{display:"none !important"},'& img:not([aria-hidden="true"])':{objectFit:"fill !important"}}]});function u(e){var t=e.advanced,n=e.size,l=e.showUsername;return(0,r.BX)(a.G,{css:s.root,children:[(0,r.tZ)(i.q,{size:void 0===n?32:n,src:t?"/public/images/ghostwriter/gw-advanced-avatar-2.svg":"/public/images/ghostwriter/blurple-circle.svg",username:"AI",css:t&&s.advanced}),void 0===l||l?(0,r.tZ)(o.xv,{variant:"small",color:"dimmer",children:"AI"}):null]})}},25270:function(e,t,n){n.d(t,{Dz:function(){return C},HC:function(){return Z},M8:function(){return b},NK:function(){return v},Pr:function(){return _},gg:function(){return g}});var r=n(41733),i=n(30509),o=n(74985),a=n(16764),l=n(82314),c=n(46973),s=n(17841),u=n(57159),d=n(94778),f=n(49224),h=n(72093),p=n(82230),m=new Map([[u.BY.BASIC,s.Z],[u.BY.ADVANCED,c.Z]]),v=new Map([[u.BY.BASIC,"Basic"],[u.BY.ADVANCED,"Advanced"]]);function g(e){var t=e.model,n=e.icon,a=e.text,l=m.get("string"==typeof t?u.BY.ADVANCED:t),c="string"==typeof t?t:v.get(t);return l&&c?(0,o.BX)(d.G,{css:x.iconLabel,children:[(0,o.tZ)(l,(0,r._)({},n)),(0,o.tZ)(p.xv,(0,i._)((0,r._)({},a),{children:c}))]}):null}var y=new Map([[u.$h.GENERATE,l.Z],[u.$h.TRANSFORM,l.Z],[u.$h.EXPLAIN,a.Z],[u.$h.REPLIT_DOCS,a.Z]]),b=new Map([[u.$h.GENERATE,"Generate"],[u.$h.TRANSFORM,"Modify"],[u.$h.EXPLAIN,"Explain"],[u.$h.REPLIT_DOCS,"Ask replit.com"]]),w=new Map([[u.G_.GENERATE_CODE,l.Z],[u.G_.TRANSFORM_CODE,l.Z],[u.G_.EXPLAIN_CODE,a.Z],[u.G_.DEBUGGER,a.Z]]),Z=new Map([[u.G_.GENERATE_CODE,"Generate"],[u.G_.TRANSFORM_CODE,"Modify"],[u.G_.EXPLAIN_CODE,"Explain"],[u.G_.DEBUGGER,"Debug"]]),x=(0,f.X)({iconLabel:[h.l0.rowWithGap(4),h.l0.align.center]});function C(e){var t=e.intent,n=e.icon,a=e.text,l=y.get(t),c=b.get(t);return l&&c?(0,o.BX)(d.G,{css:x.iconLabel,children:[(0,o.tZ)(l,(0,r._)({},n)),(0,o.tZ)(p.xv,(0,i._)((0,r._)({},a),{children:c}))]}):null}function _(e){var t=e.type,n=e.icon,a=e.text,l=w.get(t),c=Z.get(t);return l&&c?(0,o.BX)(d.G,{css:x.iconLabel,children:[(0,o.tZ)(l,(0,r._)({},n)),(0,o.tZ)(p.xv,(0,i._)((0,r._)({},a),{children:c}))]}):null}},5744:function(e,t,n){n.d(t,{sQ:function(){return K},_l:function(){return J},JG:function(){return V}});var r=n(27387),i=n(41733),o=n(66626),a=n(96583),l=n(74985),c=n(77865),s=n(50959),u=n(71253),d=n(66164),f=n(25462),h=n(53557),p=n(41753),m=n(16923),v=n(64479),g=n(82230),y=n(94778),b=n(49224),w=n(72093),Z=n(43312),x=n(60305),C=n(15235),_=n(12202),S=n(64432),k=n(39864),E=n(29212),T=n(28675),R=(0,Z.F4)({"0%":{opacity:0,transform:"translateX(8px)"},"10%":{opacity:1,transform:"translateX(0)"},"95%":{opacity:1},"100%":{opacity:0}}),I=(0,b.X)({buttonContainer:[w.l0.position.relative,{transition:"opacity 75ms linear",opacity:1}],buttonWrapper:[w.l0.flex.row],button:[w.l0.backgroundColor.backgroundDefault],buttonToast:{position:"absolute",display:"block",bottom:"100%",paddingBottom:w.TV.space4,paddingRight:w.TV.space8,animation:"".concat(R," 3s"),fontFamily:w.TV.fontFamilyDefault,fontSize:w.TV.fontSizeDefault,whiteSpace:"nowrap",userSelect:"none"}}),D=function(e){var t=e.code,n=e.language;return(0,l.tZ)("div",{css:I.buttonContainer,children:(0,l.tZ)(_.q,{text:"Copy",css:I.button,size:"small",textToCopy:t,tooltipPlacement:"bottom",onCopy:function(){(0,x.j)(x.U3.AI_CHAT_EVENT,{action:"code_copied",intent_type:null,model:null,user_model_selection:null,message_content:t,message_source:"chat_pane"}),(0,x.j)(x.U3.GHOSTWRITER_CHAT_CODE_COPIED,{language:n})}})})},B=function(e){var t=e.code,n=e.disabled,r=e.insertCode,i=(0,o._)((0,s.useState)(!1),2),a=i[0],c=i[1],u=(0,l.tZ)(C.zx,{css:I.button,text:"Insert",disabled:n,size:"small",iconLeft:(0,l.tZ)(T.Z,{}),onClick:function(){r&&((0,x.j)(x.U3.AI_CHAT_EVENT,{action:"code_inserted",intent_type:null,model:null,user_model_selection:null,message_content:t,message_source:"chat_pane"}),r(t),c(!0))}});return(0,l.BX)("div",{css:I.buttonContainer,children:[a?(0,l.tZ)("span",{css:I.buttonToast,onAnimationEnd:function(){requestAnimationFrame(function(){c(!1)})},"aria-hidden":!0,children:"Inserted!"}):null,(0,l.tZ)(S.u,{placement:"bottom",tooltip:n?"Place cursor in a file to insert code":"Insert code at cursor position",children:u})]})},G=function(e){var t=e.code,n=e.revertCodeInsert,r=(0,o._)((0,s.useState)(!1),2),i=r[0],a=r[1],c=(0,l.tZ)(C.zx,{css:I.button,text:"Revert",size:"small",iconLeft:(0,l.tZ)(E.Z,{}),onClick:function(){(0,x.j)(x.U3.AI_CHAT_EVENT,{action:"code_reverted",intent_type:null,model:null,user_model_selection:null,message_content:t,message_source:"chat_pane"}),n(),a(!0)}});return(0,l.BX)("div",{css:I.buttonContainer,children:[i?(0,l.tZ)("span",{css:I.buttonToast,onAnimationEnd:function(){requestAnimationFrame(function(){a(!1)})},"aria-hidden":!0,children:"Reverting..."}):null,(0,l.tZ)(S.u,{placement:"bottom",tooltip:"Revert code insertion",children:c})]})},A=function(e){var t=e.onRunClicked;return(0,l.tZ)("div",{css:I.buttonContainer,children:(0,l.tZ)(C.zx,{css:I.button,text:"Run",size:"small",disabled:!t,iconLeft:(0,l.tZ)(k.Z,{}),onClick:null!=t?t:function(){}})})},P=n(48376),N=n(46298),L=n(98001),O=n(59786),U=n(31562),M=n(37715),X=[f.Z,d.Z,u.Z],F=[],W=function(e){return(0,l.tZ)(y.G,{children:(0,l.tZ)(g.xv,{children:e.children})})},H={h1:W,h2:W,h3:W,h4:W,h5:W,h6:W},V=(0,s.memo)(function(e){var t=e.text,n=e.codeComponent;return(0,l.tZ)(c.ZP,{remarkPlugins:X,rehypePlugins:F,components:(0,i._)({},H,n?{code:n}:void 0),lineBreaks:!0,themed:!0,children:t})}),z=(0,b.X)({styles0:[w.l0.pl(4),w.l0.fontSize(12),w.l0.color.foregroundDimmer]}),j=(0,b.X)({root:[w.l0.borderRadius(4),w.l0.border({color:w.TV.outlineDimmest})],header:[w.l0.rowWithGap(8),w.l0.border({color:w.TV.outlineDimmest,direction:"bottom"}),{fontFamily:w.TV.fontFamilyDefault}],headerLeft:[w.l0.rowWithGap(0),w.l0.pl(4),w.l0.flex.growAndShrink(1),w.l0.align.center],headerRight:[w.l0.rowWithGap(0),{"& button":{borderRadius:0},"& > div:last-of-type button":{borderTopRightRadius:4}}],code:[w.l0.p(4)]}),q=new Set(["bash","sh","shell"]),J=function(e){var t=(0,p.F)(e.className),n=t&&function(e){switch(e){case"crystal":return"main.cr";case"python":case"py":return"main.py";case"sh":case"fish":case"zsh":case"bash":return"main.sh";case"javascript":case"js":return"index.js";case"typescript":case"ts":return"index.ts";case"csharp":case"cs":return"main.cs";case"java":return"Main.java";case"go":return"main.go";case"ruby":case"rb":return"main.rb";case"php":return"main.php";case"rust":return"main.rs";case"swift":return"main.swift";case"kotlin":return"main.kt";case"scala":return"main.scala";case"c":return"main.c";case"cpp":case"c++":return"main.cpp";case"dart":return"main.dart";case"elixir":return"main.ex";case"haskell":return"Main.hs";case"lua":return"main.lua";case"perl":return"main.pl";case"r":return"main.r";case"sql":return"main.sql";case"ocaml":return"main.ml";case"html":return"index.html";case"json":return"main.json";case"css":return"main.css";default:return}}(t),o=n?h.$R.from(n):void 0,c=null==o?void 0:o.name,s=String(e.children).trimEnd(),u=(0,O.P5)({controlName:"flag-pid2-shell-in-ai-chat",logFlagToAnalytics:!1}),d=(0,U.I)(),f=u&&t&&e.replSlug&&d&&q.has(t)&&void 0!==e.eventId&&void 0!==e.onStartLocalShellExecution,b=(0,M.U)(function(t){return function(){function n(){return(n=(0,r._)(function(){var n,r;return(0,a.Jh)(this,function(i){switch(i.label){case 0:if(!d||!e.replSlug||!e.onStartLocalShellExecution||!e.eventId)return[2];return n=s,[4,t.shellExec.spawn.rpc({cmd:"bash",args:["-ci",n],env:d,cwd:"/home/runner/".concat(e.replSlug)})];case 1:return(r=i.sent()).ok&&e.onStartLocalShellExecution({command:n,parentEventId:e.eventId,channelName:r.payload.id}),[2]}})})).apply(this,arguments)}!function(){n.apply(this,arguments)}()}},[s,e,d]);return e.inline?(0,l.tZ)(p.Z,(0,i._)({},e)):(0,l.BX)(v.Tg,{css:j.root,children:[(0,l.BX)(y.G,{css:j.header,children:[(0,l.BX)(y.G,{css:j.headerLeft,children:[n?(0,l.tZ)(m.Z,{size:12,path:n}):null,c?(0,l.tZ)(g.xv,{multiline:!1,css:z.styles0,children:c}):null]}),(0,l.BX)(y.G,{css:j.headerRight,children:[(0,l.tZ)(D,{code:s,language:t}),(0,l.tZ)($,{code:s}),f?(0,l.tZ)(A,{onRunClicked:b}):null]})]}),(0,l.tZ)(y.G,{css:j.code,children:(0,l.tZ)(L.Z,{code:s,language:t})})]})},Y=(0,s.createContext)((0,P.u)(null)),K=Y.Provider,$=function(e){var t=e.code,n=(0,o._)((0,s.useState)(!1),2),r=n[0],i=n[1],a=(0,N.Z)((0,s.useContext)(Y));if(!a)return null;var c=a.insert,u=a.revert;return r?r&&u?(0,l.tZ)(G,{code:t,revertCodeInsert:function(){i(!1),u()}}):null:(0,l.tZ)(B,{disabled:!1,code:t,insertCode:function(){i(!0),null==c||c(t)}})}},14542:function(e,t,n){n.d(t,{LX:function(){return B},UN:function(){return A},cF:function(){return _},cv:function(){return D},q2:function(){return N}});var r=n(66626),i=n(74985),o=n(50959),a=n(36759),l=n(19068),c=n(15235),s=n(15605),u=n(8261),d=n(82230),f=n(94778),h=n(49224),p=n(17841),m=n(59947),v=n(27022),g=n(46973),y=n(72093),b=n(14375),w=n(64479),Z=n(80012),x=n(59786),C=(0,h.X)({root:[y.l0.rowWithGap(8),y.l0.align.center],left:[y.l0.rowWithGap(2),y.l0.flex.grow(1)],right:[y.l0.width("50%")],rightInline:[y.l0.minWidth(24)],bar:[y.l0.height(6)]});function _(e){var t=e.total-e.used,n=Math.max(0,Math.min(100,Math.round(t/e.total*100)));return(0,i.BX)(f.G,{css:C.root,children:[(0,i.tZ)(f.G,{css:C.left,children:e.used===e.total?(0,i.tZ)(d.xv,{variant:"small",color:"dimmest",children:"No quota left"}):(0,i.BX)(i.HY,{children:[(0,i.BX)(d.xv,{variant:"small",children:[n,"%"]}),(0,i.tZ)(d.xv,{variant:"small",color:"dimmest",children:"left"})]})}),(0,i.tZ)(f.G,{css:e.inline?C.rightInline:C.right,children:(0,i.tZ)(s.J,{css:C.bar,tooltipHidden:!0,current:t,total:e.total,color:y.TV.blurpleDefault})})]})}var S=(0,h.X)({root:[y.l0.rowWithGap(4),y.l0.align.center],title:[{fontFamily:y.TV.fontWeightMedium},y.l0.color.foregroundDefault]});function k(e){return(0,i.BX)(f.G,{css:S.root,children:[e.icon,(0,i.tZ)(d.xv,{css:S.title,variant:"small",children:e.title})]})}var E=(0,h.X)({root:[y.l0.px(8),y.l0.py(6),y.l0.colWithGap(4),y.l0.height(26),y.l0.justify.center],content:[y.l0.colWithGap(0)],header:[y.l0.align.center,y.l0.rowWithGap(4),y.l0.color.foregroundDimmer],headerLeft:[y.l0.rowWithGap(4),y.l0.align.center,y.l0.flex.growAndShrink(1)],proPill:[y.l0.borderRadius(4),y.l0.height(16)]}),T=(0,h.X)({root:[y.l0.px(8),y.l0.py(12),y.l0.colWithGap(4)]});function R(e){var t=e.selected;return(0,i.tZ)(f.G,{css:E.root,children:(0,i.tZ)(f.G,{css:E.content,children:(0,i.BX)(f.G,{css:E.header,children:[(0,i.tZ)(f.G,{css:E.headerLeft,children:(0,i.tZ)(k,{icon:(0,i.tZ)(p.Z,{size:12}),title:"Basic"})}),t?(0,i.tZ)(m.Z,{}):null]})})})}function I(e){var t=e.hasAccessToAdvancedModel,n=e.selected,r=(0,i.tZ)(i.HY,{children:(0,i.tZ)(f.G,{css:E.content,children:(0,i.BX)(f.G,{css:E.header,children:[(0,i.BX)(f.G,{css:E.headerLeft,children:[(0,i.tZ)(k,{icon:(0,i.tZ)(g.Z,{size:12}),title:"Advanced"}),t?null:(0,i.tZ)(u.D,{css:E.proPill,text:b.we,color:y.TV.foregroundDimmer})]}),n?(0,i.tZ)(m.Z,{}):null]})})});return(0,i.tZ)(f.G,{css:E.root,children:r})}function D(e){var t=e.selected,n=e.quota,r=e.hasAccessToAdvancedModel;return(0,i.BX)(f.G,{css:T.root,children:[(0,i.BX)(f.G,{css:E.content,children:[(0,i.BX)(f.G,{css:E.header,children:[(0,i.tZ)(f.G,{css:E.headerLeft,children:(0,i.tZ)(k,{icon:(0,i.tZ)(p.Z,{size:12}),title:"Basic"})}),t?(0,i.tZ)(m.Z,{}):null]}),(0,i.tZ)(d.xv,{variant:"small",color:"dimmer",children:"Faster. For common tasks like writing boilerplate code or reformatting data."})]}),r?(0,i.BX)(d.xv,{variant:"small",color:"dimmer",children:["Unlimited for ",b.we]}):(0,i.tZ)(_,{used:n.used,total:n.total})]})}function B(e){var t=e.hasAccessToAdvancedModel,n=e.selected,r=e.quota,o=e.onUpgrade,a=(0,i.BX)(i.HY,{children:[(0,i.tZ)(f.G,{css:E.content,children:(0,i.BX)(f.G,{css:E.header,children:[(0,i.BX)(f.G,{css:E.headerLeft,children:[(0,i.tZ)(k,{icon:(0,i.tZ)(g.Z,{size:12}),title:"Advanced"}),t?null:(0,i.tZ)(u.D,{css:E.proPill,text:b.we,color:y.TV.foregroundDimmer})]}),n?(0,i.tZ)(m.Z,{}):null]})}),(0,i.tZ)(d.xv,{variant:"small",color:"dimmer",children:"For complex code generation, editing, and explanation. Limited amount per week."})]});return t?(0,i.BX)(f.G,{css:T.root,children:[a,(0,i.tZ)(_,{used:r.used,total:r.total})]}):(0,i.BX)(f.G,{css:T.root,children:[a,o?(0,i.tZ)(c.zx,{size:"small",text:"Upgrade to Replit ".concat(b.we),colorway:"blurple",onClick:function(){return o()}}):(0,i.tZ)(f.G,{css:G.fakeUpgradeButton,children:(0,i.BX)(d.xv,{variant:"small",children:["Upgrade to Replit ",b.we]})})]})}var G=(0,h.X)({label:y.l0.visuallyHidden,button:[y.l0.reset.button,y.l0.rowWithGap(4),y.l0.cursor.pointer,y.l0.align.center,y.l0.px(4),y.l0.py(2),l.gU.nofill,y.l0.color.foregroundDimmest,{'&[aria-expanded="true"] .chevron':{transform:"rotate(180deg)"},"&:hover":y.l0.color.foregroundDefault}],fakeUpgradeButton:[(0,Z.ec)("blurple"),y.l0.p(4),y.l0.borderRadius(4),y.l0.center],heading:[y.l0.px(8),y.l0.py(4)],header:[y.l0.py(4),y.l0.px(8)],surface:[y.l0.borderRadius(4),y.l0.border({color:y.TV.outlineDefault}),y.l0.overflow("hidden"),y.l0.maxWidth(260),y.l0.minWidth(260)],item:[y.l0.cursor.pointer,l.gU.listItem]});function A(e){var t=(0,r._)(e.children,2),n=t[0],l=t[1];return(0,i.BX)(a.zx,{css:G.button,children:[n?(0,o.cloneElement)(n,{size:12}):null,(0,i.tZ)(d.xv,{variant:"small",children:l}),(0,i.tZ)(v.Z,{className:"cevron",size:12})]})}var P=["basic","advanced"];function N(e){var t=(0,x.P5)({controlName:"flag-richard-whittington",logFlagToAnalytics:!1});return(0,i.BX)(a.Ph,{selectedKey:e.selectedItem,onSelectionChange:function(t){switch(t){case"basic":case"advanced":e.onChange(t)}},children:[(0,i.tZ)(a.__,{css:G.label,children:"Model type"}),"basic"===e.selectedItem?(0,i.BX)(A,{children:[(0,i.tZ)(p.Z,{}),"Basic"]}):(0,i.BX)(A,{children:[(0,i.tZ)(g.Z,{}),t?"Advanced":e.advancedChatEngineOverride||"Advanced"]}),(0,i.tZ)(a.J2,{children:(0,i.BX)(w.Tg,{css:G.surface,elevated:!0,children:[(0,i.tZ)(f.G,{css:G.heading,children:(0,i.tZ)(d.xv,{variant:"small",color:"dimmest",children:"Select a model"})}),(0,i.tZ)(a.wb,{"aria-label":"Model type",items:P.map(function(e){return{id:e}}),selectionMode:"single",children:function(t){return(0,i.tZ)(a.m9,{css:G.item,textValue:t.id,children:"basic"===t.id?(0,i.tZ)(R,{selected:"basic"===e.selectedItem}):(0,i.tZ)(I,{selected:"advanced"===e.selectedItem,hasAccessToAdvancedModel:e.hasAccessToAdvancedModel})})}})]})})]})}},38101:function(e,t,n){n.d(t,{r:function(){return c}});var r=n(74985),i=n(12933),o=n(82230),a=n(94778),l=n(72093);function c(e){var t=e.textVariant;return(0,r.BX)(o.xv,{variant:t,children:["AI Chat is currently unavailable. For more information, visit"," ",(0,r.tZ)("a",{href:"https://status.replit.com",target:"_blank",children:"our status page."})]})}t.Z=function(e){var t=e.textVariant,n=e.showImage;return(0,r.BX)(a.G,{css:[l.l0.center,l.l0.textAlign.center,l.l0.px(16),l.l0.colWithGap(8),l.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(c,{textVariant:t}),n?(0,r.tZ)(i.Z,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(l.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1}):null]})}},93880:function(e,t,n){n.d(t,{Cn:function(){return w},Dq:function(){return b},J:function(){return g},UB:function(){return C},VU:function(){return x},fB:function(){return _}});var r=n(41733),i=n(30509),o=n(98924),a=n(66626),l=n(74985),c=n(85733),s=n(55927),u=n(33298),d=n(94778),f=n(49224),h=n(72093),p=n(50959),m=n(25114);function v(e){for(var t=1,n=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var i=n[r];if(i){for(var o=!1,a=0;a<e.cols;a++)if(0!==i.hasContent(a)){o=!0;break}if(o){t=r+1;break}}}return t}var g=8,y=(0,u.$)(["topOffset"]),b=y.cssVars,w=y.styleTokens,Z=(0,f.X)({wrapper:{display:"grid"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:w.topOffset,"& .xterm":[h.l0.py(g),h.l0.pl(g),h.l0.height("100%"),h.l0.overflow("hidden")],"& .xterm-viewport":[h.l0.overflow("hidden")]}});function x(e){var t=e.autoFocus,n=e.wrapperResizeRef,a=e.xterm,c=e.bufferHeight,s=e.onInput,u=e.onMessage,f=e.onResizeTerminal,h=e.children,m=(0,o._)(e,["autoFocus","wrapperResizeRef","xterm","bufferHeight","onInput","onMessage","onResizeTerminal","children"]);return(0,p.useEffect)(function(){t&&a&&a.focus()},[a,t]),(0,p.useEffect)(function(){if(a){var e=a.onData(function(e){s(e)}),t=a.onResize(function(){f(a.getSize())});return function(){e.dispose(),t.dispose()}}},[a,s,f]),(0,p.useEffect)(function(){if(a)return u(function(e){return a.write(e)})},[u,a]),(0,l.tZ)(d.G,{innerRef:n,children:(0,l.tZ)(d.G,(0,i._)((0,r._)({},m),{css:Z.wrapper,style:(0,r._)({height:c},m.style),children:h}))})}function C(e){var t=e.xtermRef,n=e.visibleHeight,a=e.maxHeight,c=(0,o._)(e,["xtermRef","visibleHeight","maxHeight"]);return(0,l.tZ)(d.G,(0,i._)((0,r._)({innerRef:t,css:Z.terminal},c),{style:(0,i._)((0,r._)({},c.style),{height:n,maxHeight:a})}))}function _(e){var t=e.maxHeight,n=e.openFile,r=e.listFiles,i=e.openWebview,o=(0,a._)((0,m.Z)({autoFit:!1,size:{rows:10},openFile:n,listFiles:r,openWebview:i}),2),l=o[0],u=o[1],d=(0,p.useMemo)(function(){return null==l?void 0:l._term},[l]),f=(0,p.useMemo)(function(){var e,t=null==d?void 0:d._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[d]),h=(0,p.useMemo)(function(){return Math.floor((t-2*g)/f.height)},[t,f.height]),y=(0,a._)((0,p.useState)("normal"),2),b=y[0],w=y[1],Z=(0,a._)((0,p.useState)(1),2),x=Z[0],C=Z[1],_=(0,a._)((0,p.useState)(1),2),S=_[0],k=_[1],E=(0,a._)((0,p.useState)(!1),2),T=E[0],R=E[1],I=(0,c.Z)(x),D=(0,c.Z)(S),B=(0,c.Z)(b);(0,p.useEffect)(function(){if(d){var e=d.buffer.onBufferChange(function(e){w(e.type),"alternate"===e.type&&(C(h),k(h),R(!1))});return function(){e.dispose()}}},[d,h]);var G=(0,p.useCallback)(function(){if(d){if("alternate"===B.current)C(h);else{var e=v(d),t=e>h;k(e),C(Math.min(e,h)),R(t)}}},[d,h,B]),A=(0,s.Z)(function(e){var t=e.widthChanged;d&&l&&t&&(l.fit(),G())},{type:"debounce",wait:200});(0,p.useEffect)(function(){var e=function(){if(d&&"alternate"!==B.current){var e=v(d),t=Math.min(e,h);e>D.current&&k(e),t>I.current&&C(t),e>h&&R(!0)}};if(d){var t=[d.onLineFeed(e),d.onCursorMove(e)];return function(){t.forEach(function(e){return e.dispose()})}}},[d,I,B,D,h]),(0,p.useEffect)(function(){if(d&&l){var e=l.getSize();e.rows!==h&&d.resize(e.cols,h),G()}},[d,l,h,G]);var P=(0,p.useMemo)(function(){return(Math.min(x,S)+1)*f.height+2*g},[x,S,f]),N=(0,p.useMemo)(function(){return T?(S+1)*f.height+2*g:P},[f,T,P,S]);return(0,p.useEffect)(function(){l&&l.fit()},[l,x,S]),{visibleHeight:P,visibleLines:x,bufferHeight:N,bufferLines:S,bufferMode:b,hasScrollback:T,wrapperResizeRef:A,xterm:l,xtermRef:u}}},74004:function(e,t,n){n.d(t,{AA:function(){return _},CH:function(){return y},Gg:function(){return v},Ne:function(){return k},pV:function(){return x},vk:function(){return w}});var r=n(41733),i=n(21262),o=n(71440),a=n(72604),l=n(58995),c=n(99165);function s(){var e=(0,i._)(["\n  fragment AutograderTest on ReplTemplateTest {\n    id\n    name\n    input\n    output\n    name\n    type\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  query Autograder($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        currentUserPermissions {\n          writeTests\n        }\n        template {\n          id\n        }\n        ioTests {\n          id\n          ...AutograderTest\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        isProject\n        isProjectFork\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation SaveIOTestResults(\n    $teamId: Int!\n    $replId: String!\n    $results: [IOTestResultInput!]!\n  ) {\n    saveIOTestResults(teamId: $teamId, replId: $replId, results: $results) {\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation CreateAutograderTest($input: CreateTemplateTestInput!) {\n    createTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation UpdateAutograderTest($input: UpdateTemplateTestInput!) {\n    updateTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation DeleteAutograderTest($testId: Int!) {\n    deleteTemplateTest(testId: $testId) {\n      ... on ReplTemplate {\n        id\n        tests {\n          id\n          ...AutograderTest\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(s()),g=(0,o.Ps)(u(),v,a.aA,a.Rb);function y(e){var t=(0,r._)({},m,e);return l.a(g,t)}var b=(0,o.Ps)(d());function w(e){var t=(0,r._)({},m,e);return c.D(b,t)}var Z=(0,o.Ps)(f(),v);function x(e){var t=(0,r._)({},m,e);return c.D(Z,t)}var C=(0,o.Ps)(h(),v);function _(e){var t=(0,r._)({},m,e);return c.D(C,t)}var S=(0,o.Ps)(p(),v);function k(e){var t=(0,r._)({},m,e);return c.D(S,t)}},30364:function(e,t,n){n.d(t,{$:function(){return ew},u:function(){return ek}});var r=n(41733),i=n(30509),o=n(98924),a=n(74985),l=n(40121),c=n(80403),s=n(19127),u=n(6922),d=n(118),f=n(72912),h=n(66626),p=n(75528),m=n(89284),v=n(41198),g=n(26576),y=n(75334),b=n(24250),w=n(99609),Z=n(1187),x=n(27901),C=n(86596),_=n(72883),S=n(82347),k=n(7466),E=n(72093),T=n(84570),R=n(7225),I=function(e){var t=new Set(T.Z),n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,h._)(a.value,3),s=c[0],u=c[1],d=c[2];if(!t.has(s))throw Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");if("string"==typeof u){var f=p.s.get(u);if(!f)throw Error("Couldn't find matching icon for ".concat(u));u=f}n.set(s,[u,null!=d?d:E.TV.foregroundDefault])}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}([[R.SymbolKind.Array,x.Z],[R.SymbolKind.Boolean,k.Z],[R.SymbolKind.Class,"class",E.TV.yellowDefault],[R.SymbolKind.Constant,"constant",E.TV.blueStronger],[R.SymbolKind.Constructor,"method",E.TV.blurpleDefault],[R.SymbolKind.Enum,g.Z,E.TV.orangeDefault],[R.SymbolKind.EnumMember,S.Z,E.TV.blueStronger],[R.SymbolKind.Event,m.Z],[R.SymbolKind.Field,_.Z],[R.SymbolKind.File,y.Z],[R.SymbolKind.Function,"function",E.TV.blurpleStronger],[R.SymbolKind.Interface,b.Z,E.TV.blueStronger],[R.SymbolKind.Key,w.Z],[R.SymbolKind.Method,"method",E.TV.blurpleDefault],[R.SymbolKind.Module,C.Z,E.TV.purpleDefault],[R.SymbolKind.Namespace,v.Z],[R.SymbolKind.Object,k.Z,E.TV.blueDimmer],[R.SymbolKind.Operator,k.Z],[R.SymbolKind.Package,C.Z,E.TV.purpleDefault],[R.SymbolKind.Property,_.Z],[R.SymbolKind.String,Z.Z],[R.SymbolKind.Struct,v.Z],[R.SymbolKind.TypeParameter,S.Z],[R.SymbolKind.Variable,S.Z,E.TV.blueStronger]]);function D(e){var t,n=e.kind,r=(0,h._)(null!==(t=I.get(n))&&void 0!==t?t:[k.Z,E.TV.foregroundDefault],2),i=r[0],o=r[1];return(0,a.tZ)(i,{color:o,size:16})}var B=n(60305),G=n(13033),A=n(70501),P=n(43312),N=n(19068),L=n(94778),O=n(50959),U=n(98574),M=n(59359),X=n(59520),F=(0,P.iv)([N.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),W={button:(0,P.iv)([E.l0.reset.button,E.l0.p(2),E.l0.rowWithGap(4),E.l0.align.center,F]),text:(0,P.iv)({fontSize:E.TV.fontSizeSmall})},H={opacity:1};function V(e){var t=e.icon,n=e.text,o=e.innerRef,l=e.ariaProps,c=e.active,s=(0,U.U)(l,o).buttonProps,u=(0,M.XI)({}),d=u.hoverProps,f=u.isHovered;return(0,a.BX)(L.G,(0,i._)((0,r._)({tag:"button",css:W.button,style:f||c?H:void 0,innerRef:o},(0,X.dG)(s,d)),{children:[t?(0,O.cloneElement)(t,{size:16}):null,(0,a.tZ)(L.G,{css:W.text,children:n})]}))}var z={root:(0,P.iv)([E.l0.p(4),E.l0.rowWithGap(4),E.l0.align.center]),text:(0,P.iv)([E.l0.truncate,E.l0.flex.growAndShrink(1),{fontSize:E.TV.fontSizeDefault}])};function j(e){return(0,a.BX)(L.G,{css:[z.root],children:[e.icon?(0,O.cloneElement)(e.icon,{size:16}):null,(0,a.tZ)(L.G,{css:z.text,children:e.text})]})}var q=n(63257),J=n(88325),Y=n(86936),K=(0,P.iv)([E.l0.p(4)]);function $(e){var t=e.items,n=e.children,o=e.menuProps,l=e.selectedKeys,c=e.onAction,s=(0,J.D)({items:t,children:n,selectedKeys:l,selectionMode:"single"}),u=(0,O.useRef)(null),d=(0,Y.H9)((0,r._)({items:t,onAction:c},o),s,u);return(0,a.tZ)(L.G,(0,i._)((0,r._)({},d.menuProps),{innerRef:u,css:K,children:(0,q._)(s.collection).map(function(e){return(0,a.tZ)(et,{item:e,state:s},e.key)})}))}var Q={root:(0,P.iv)([E.l0.flex.row,E.l0.align.center,E.l0.position.relative,F]),selected:(0,P.iv)([{opacity:1,backgroundColor:N.vb.interactiveBackground}])},ee={opacity:1};function et(e){var t=e.item,n=e.state,o=(0,O.useRef)(null),l=(0,Y.iX)({key:t.key},n,o),c=l.menuItemProps,s=l.isSelected,u=(0,M.XI)({}),d=u.hoverProps,f=u.isHovered;return(0,a.tZ)(L.G,(0,i._)((0,r._)({innerRef:o,css:[Q.root,s&&Q.selected],style:f||s?ee:void 0},(0,X.dG)(c,d)),{children:t.rendered}))}var en=n(97133),er=n(64479),ei=n(32883),eo={underlay:(0,P.iv)([E.l0.coverContainer,E.l0.position.fixed]),surface:(0,P.iv)([E.l0.borderRadius(8),{boxShadow:E.TV.shadow2,border:"1px solid",borderColor:E.TV.backgroundHighest}])};function ea(e){var t=e.state,n=e.triggerRef,o=e.placement,l=e.children,c=(0,h._)((0,en.Z)(),2),s=c[0],u=c[1],d=(0,ei.Sv)({placement:o,triggerRef:n,popoverRef:s,offset:8},t),f=d.popoverProps,p=d.underlayProps;return(0,a.BX)(ei.aV,{children:[(0,a.tZ)(L.G,(0,i._)((0,r._)({},p),{css:eo.underlay})),(0,a.BX)(er.Tg,(0,i._)((0,r._)({elevated:!0,css:eo.surface,innerRef:u},f),{children:[(0,a.tZ)(ei.U4,{onDismiss:t.close}),l,(0,a.tZ)(ei.U4,{onDismiss:t.close})]}))]})}function el(e){return CSS.escape(e.name)}function ec(e){var t=e.selectedSymbol,n=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,l=(0,f.W)({onOpenChange:function(e){e&&(0,B.j)(B.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),c=(0,O.useRef)(null),s=(0,Y.u4)({},l,c),u=s.menuTriggerProps,d=s.menuProps,h=t?new Set([t.name]):void 0;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(V,{text:o,icon:i,innerRef:c,ariaProps:u,active:l.isOpen}),l.isOpen?(0,a.tZ)(ea,{triggerRef:c,state:l,placement:"bottom left",children:(0,a.tZ)($,{menuProps:d,items:n,selectedKeys:h,onAction:function(e){var t=n.find(function(t){return el(t)===e});t&&(r(t.selectionRange.start),(0,B.j)(B.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,a.tZ)(G.ck,{children:(0,a.tZ)(j,{icon:(0,a.tZ)(D,{kind:e.kind}),text:e.name})},el(e))}})}):null]})}var es=O.memo(function(e){var t=e.symbols,n=e.symbolsPath,r=e.moveCursor,i=n.length?n[n.length-1]:null,o=i?i.children:t;return(0,a.BX)(a.HY,{children:[n.map(function(e,i){var o=0===i?t:n[i-1].children;return o?(0,a.BX)(O.Fragment,{children:[(0,a.tZ)(A.Z,{size:12}),(0,a.tZ)(ec,{symbols:o,icon:(0,a.tZ)(D,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},el(e)):null}),(null==o?void 0:o.length)?(0,a.BX)(a.HY,{children:[(0,a.tZ)(A.Z,{size:12}),(0,a.tZ)(ec,{symbols:o,text:"...",moveCursor:r})]}):null]})}),eu=(0,O.memo)(function(e){var t,n=e.view,r=(0,O.useCallback)(function(e){null==n||n.dispatch({scrollIntoView:!0,selection:c.jT.cursor((0,d.RL)(n.state.doc,e))}),null==n||n.focus()},[n]),i=(0,O.useDeferredValue)({symbols:(0,u.IK)(n,s.AU),symbolsPath:(0,u.IK)(n,s.qU)});return(null===(t=i.symbols)||void 0===t?void 0:t.length)?(0,a.tZ)(es,{symbols:i.symbols,symbolsPath:i.symbolsPath||[],moveCursor:r}):null}),ed=n(49224),ef=n(72452),eh=n(65059),ep=n(66548),em=n(29318),ev=n(63416),eg=n(36559),ey=n(33675),eb=n(37833),ew=(0,O.memo)(function(e){var t=e.path,n=e.performPaneOperation,r=(0,ey.uN)(),i=(0,O.useCallback)(function(e){n({operation:"open",pane:(0,ev.$E)(e)})},[n]);return(0,a.BX)(ev.h4,{children:[(0,a.tZ)(ev.Qc,{children:(0,a.tZ)(eb.tr,{path:t,onFileClick:i,children:(0,a.tZ)(eu,{view:r})})}),(0,a.tZ)(ev.LI,{children:(0,a.tZ)(ex,{path:t,performPaneOperation:n})})]})}),eZ=(0,ed.X)({button:[E.l0.reset.button,E.l0.p(2),E.l0.height(22),E.l0.rowWithGap(4),E.l0.align.center,N.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}],text:[{fontSize:E.TV.fontSizeSmall}]});function ex(e){return(0,a.BX)(a.HY,{children:[(0,a.tZ)(eC,(0,r._)({},e)),(0,a.tZ)(e_,(0,r._)({},e)),(0,a.tZ)(eS,(0,r._)({},e))]})}function eC(e){var t=e.path,n=(0,ey.uN)(),r=(0,u.IK)(n,l.Gz);return(0,u.IK)(n,l.SD)&&n?(0,a.tZ)(ek,{dataCy:"ws-format-btn",altText:"Format "+(0,eg.UO)(t),buttonText:"Format",disabled:null!=r?r:void 0,"aria-disabled":!!r||void 0,icon:r?(0,a.tZ)(em.Z,{}):(0,a.tZ)(eh.Z,{}),onClick:function(){r||(0,l.z1)(n)}}):null}function e_(e){var t=e.path,n=e.performPaneOperation;return(0,eg.gK)(t)?(0,a.tZ)(ek,{altText:"Preview "+(0,eg.UO)(t),buttonText:"Preview",icon:(0,a.tZ)(ef.Z,{}),onClick:function(){n({operation:"replace",pane:{type:"markdown",data:{path:t}}})}}):null}function eS(e){var t=e.path,n=e.performPaneOperation;return(0,eg.B4)(t)?(0,a.tZ)(ek,{altText:"Preview "+(0,eg.UO)(t),buttonText:"Preview",icon:(0,a.tZ)(ef.Z,{}),onClick:function(){n({operation:"replace",pane:{type:"media",data:{path:t}}})}}):null}function ek(e){var t=e.altText,n=e.buttonText,l=e.icon,c=(0,o._)(e,["altText","buttonText","icon"]);return(0,a.BX)(L.G,(0,i._)((0,r._)({},c),{alt:t,tag:"button",css:eZ.button,children:[(0,a.tZ)(ep.Pd.Provider,{value:{size:12},children:l}),(0,a.tZ)(L.G,{css:eZ.text,children:n})]}))}},40042:function(e,t,n){n.d(t,{pZ:function(){return eD},aT:function(){return eI},jg:function(){return eS},fD:function(){return ek},Ls:function(){return e_}});var r=n(27387),i=n(63257),o=n(96583),a=n(74985),l=n(80403),c=n(16826),s=n(7849),u=n(40121),d=n(32471),f=n(5283),h=n(33566);function p(e){var t=e.selection,n=e.doc,r=t.ranges.map(function(e){return e.extend(n.lineAt(e.from).from,n.lineAt(e.to).to)});return l.jT.create(r)}var m=n(92370),v=n(32661),g=n(23508),y=n(10874),b=n(42433),w=n(86486),Z=n(48126),x=n(60941),C=n(118),_=n(59786),S=n(85733),k=n(75993),E=n(36556),T=n(60305),R=n(49224),I=n(80274),D=n(16165),B=n(54501),G=n(55524),A=n(59947),P=n(20795),N=n(16469),L=n(84126),O=n(29911),U=n(76575),M=n(59249),X=n(75334),F=n(65059),W=n(72164),H=n(16764),V=n(56679),z=n(82314),j=n(17867),q=n(66958),J=n(6981),Y=n(90493),K=n(9975),$=n(4461),Q=n(72093),ee=n(48594),et=n(33530),en=n(29121),er=n(81199),ei=n(4590),eo=n(71358),ea=n(12904),el=n(47664),ec=n(37058),es=n(11407),eu=n(50745),ed=n(50959),ef=n(36559),eh=n(89748),ep=n(73590),em=n(34635),ev=n(7225),eg=n(36101),ey=n(57159),eb=n(27894);function ew(e,t,n){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,ef.r6)(t);return{code:i,filePath:t,fileVersion:n,fileContent:e.doc.toString(),range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o,referenceType:ey.MD.INLINE}}var eZ=(0,R.X)({ghostwriterIcon:[Q.l0.color.blurpleStronger]});function ex(e){var t=e.label,n=e.icon,r=e.run,i=e.keyboardShortcut,o=e.dataCy;return{match:eh.pl,data:{type:"action",label:t,icon:n,run:r,keyboardShortcut:i,dataCy:o}}}function eC(e){var t=e.view,n=e.mainSelection,r=e.codeReference;t.dispatch({selection:{anchor:n.to},effects:[f.Q.of({codeReference:r,type:"ghostwriterKillswitch"}),c.tk.scrollIntoView(n.to,{y:"center"})]})}function e_(e){var t=e.path,n=(0,er.Z)().fs,r=(0,_.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){var o=e.state,a=o.doc,s=o.selection,u=o.lineBreak,d=a.lineAt(s.main.head);d.length&&e.dispatch({changes:{from:d.to,insert:u},selection:l.jT.cursor(d.to+1)});var h=n.getOTVersion(t),p=ew(e.state,t,h);if((0,T.j)(T.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:i}),r){eC({view:e,mainSelection:e.state.selection.main,codeReference:p});return}var m=e.state.selection.main.to;e.dispatch({selection:{anchor:m},effects:[f.Q.of({codeReference:p,type:"generateCode",source:i}),c.tk.scrollIntoView(m,{y:"center"})]})},[t,n,r])}function eS(e){var t=e.path,n=(0,er.Z)().fs,r=(0,_.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){e.dispatch({selection:p(e.state)});var o=n.getOTVersion(t),a=ew(e.state,t,o);if(r){eC({view:e,mainSelection:e.state.selection.main,codeReference:a});return}(0,T.j)(T.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"modify",source:i});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[f.Q.of({type:"transformCode",codeReference:a,source:i}),c.tk.scrollIntoView(l,{y:"center"})]})},[t,n,r])}function ek(e){var t=e.path,n=(0,er.Z)().fs,r=(0,_.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){e.dispatch({selection:p(e.state)});var o=n.getOTVersion(t),a=ew(e.state,t,o);if((0,T.j)(T.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"explain",source:i}),r){eC({view:e,mainSelection:e.state.selection.main,codeReference:a});return}var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[f.Q.of({codeReference:a,type:"explainCode",source:i}),c.tk.scrollIntoView(l,{y:"center"})]})},[n,t,r])}var eE=new x.j(function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)!function(){var e=a.value,r=e.data;if(("context"===r.type||"action"===r.type)&&r.keyboardShortcut){var i=Array.isArray(r.keyboardShortcut)?r.keyboardShortcut.join(" "):r.keyboardShortcut;n.push({run:function(n){if("action"===r.type)return r.run(null),!0;var i=n.state.selection.main.head;return"context"!==r.type||r.label!==eT||n.state.wordAt(i)?t(e):(0,w.J)(n,{message:"You cannot rename this element",offset:i}),!0},key:i,preventDefault:!0})}}()}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return c.$f.of(n)}),eT="Rename all occurrences",eR=function(){var e=(0,ec.gf)("editor.action.saveFile");return(0,ed.useCallback)(function(t){var n=[];return n.push(ex({label:"Save file",icon:(0,a.tZ)($.Z,{}),keyboardShortcut:e,run:function(){(0,eb.Qf)(t)}})),n},[e])};function eI(e){var t,n,l,c,f,p,w,x,T,R,$,Q,ef,eg,ey,eb,ew,eC,eI,eD,eB,eG,eA=e.path,eP=e.openFile,eN=e.openSearchAndReplace,eL=e.view,eO=e.onCommand,eU=(t=e_({path:eA}),n=eS({path:eA}),l=ek({path:eA}),c=(0,ec.gf)(ep.x.id),(0,ed.useCallback)(function(e){var r=[],i=!e.state.selection.main.empty;return t&&!i&&r.push(ex({label:"Generate",icon:(0,a.tZ)(V.Z,{css:eZ.ghostwriterIcon}),keyboardShortcut:c,run:function(){t(e,"action_menu")},dataCy:"context-menu-GenerateCode"})),i&&(r.push(ex({label:"Explain",icon:(0,a.tZ)(H.Z,{css:eZ.ghostwriterIcon}),dataCy:"context-menu-ExplainCode",run:function(){l(e,"action_menu")}})),r.push(ex({label:"Modify",icon:(0,a.tZ)(z.Z,{css:eZ.ghostwriterIcon}),keyboardShortcut:c,dataCy:"context-menu-TransformCode",run:function(){n(e,"action_menu")}}))),r},[t,n,l,c])),eM=(f=(0,ec.gf)("editor.action.startThread"),(0,ed.useCallback)(function(e){var t=[];return t.push(ex({label:"Start thread",icon:(0,a.tZ)(G.Z,{}),keyboardShortcut:f,run:function(){(0,ei.h$)(e)}})),t},[f])),eX=(0,ed.useCallback)(function(e){var t=[ex({label:"Copy link to position",icon:(0,a.tZ)(q.Z,{}),run:function(){var t=(0,C.sg)(e.state.doc,e.state.selection.main.head),n=t.line,r=t.character,i=(0,eu.dr)({path:eA,line:n+1,col:r});(0,k.Z)(i)}}),ex({label:"Copy",icon:(0,a.tZ)(L.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"c"}),run:function(){var t=(0,h.I)(e.state).text;(0,k.Z)(t)}}),ex({label:"Cut",icon:(0,a.tZ)(O.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"x"}),run:function(){var t=(0,h.I)(e.state),n=t.text,r=t.ranges;(0,k.Z)(n),e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&t.push(ex({label:"Paste",icon:(0,a.tZ)(P.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,r._)(function(){var t,n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:t="",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),E.kg.error("CodeMirror context menu paste failed",{message:n.message}),[2];case 4:return(0,Z.l)({filePath:eA,view:e,clipboardText:t}),[2]}})})()}})),t},[eA]),eF=(w=(p={path:eA,openFile:eP,openSearchAndReplace:eN}).path,x=p.openFile,T=p.openSearchAndReplace,R=(0,et.Z)(w),$=(0,en.Z)(R),Q=(0,ed.useRef)(null),ef=(0,er.Z)().fs,eg=(0,_.P5)({controlName:"flag-clui-ctx-menu-rename-all",logFlagToAnalytics:!1}),ey=(0,ec.gf)("editor.action.goToDefinition"),eb=(0,ec.gf)("editor.action.goToTypeDefinition"),ew=(0,ec.gf)("editor.action.goToImplementation"),eC=(0,ec.gf)("editor.action.goToReferences"),eI=(0,ec.gf)("editor.selection.allOccurrences"),eD=(0,ec.gf)("editor.action.formatDocument"),eB=(0,ec.gf)("editor.action.codeActions"),(0,ed.useCallback)(function(e){var t=[],n=$&&R.length;n&&$.isFindDefinitionSupported&&x&&t.push(ex({label:"Go to definition",icon:(0,a.tZ)(M.Z,{}),dataCy:"context-menu-JumpToDefinition",run:function(t){(0,g.wK)(e,t)},keyboardShortcut:ey})),n&&$.isFindTypeDefinitionSupported&&x&&t.push(ex({label:"Go to type definition",icon:(0,a.tZ)(I.Z,{}),run:function(){(0,g.OM)(e)},keyboardShortcut:eb})),n&&$.isFindImplementationSupported&&x&&t.push(ex({label:"Go to implementation",icon:(0,a.tZ)(K.Z,{}),run:function(){(0,g.Zc)(e)},keyboardShortcut:ew})),n&&($.isFindDefinitionSupported||$.isFindReferencesSupported)&&t.push(ex({label:"Show references",icon:(0,a.tZ)(D.Z,{}),keyboardShortcut:eC,run:function(){(0,y.Z)(e)}})),T&&t.push(ex({label:"Find in Repl",icon:(0,a.tZ)(Y.Z,{}),run:function(){T((0,h.I)(e.state).text)}})),n&&$.isRenameSupported&&(eg?t.push(ex({label:eT,icon:(0,a.tZ)(U.Z,{}),keyboardShortcut:"F2",run:function(){(0,b.Z)(e)}})):t.push({match:eh.pl,data:{type:"context",label:eT,icon:(0,a.tZ)(U.Z,{}),keyboardShortcut:"F2"},commands:function(t){var n=t.active,i=t.search;return n&&i?[{match:function(){return{score:1}},data:{type:"action",label:"Rename",icon:(0,a.tZ)(A.Z,{}),keyboardShortcut:"Enter",run:function(){return(0,r._)(function(){var t,n,r,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!(t=R.find(function(e){return(0,em.Z)(e).isRenameSupported})))return[2,{type:"error",message:"Rename is not supported"}];if(n=e.state.selection.main.head,!e.state.wordAt(n))return[2,{type:"error",message:"You cannot rename this element"}];return Q.current&&t.notify.cancelRequest(Q.current),Q.current=t.generateId(),[4,t.request.rename(w,(0,C.sg)(e.state.doc,n),i,{id:Q.current,tap:function(t){return(0,m.SC)(e,t)}})];case 1:if((r=o.sent()).cancelled)return[2];if("error"in r)return[2,{type:"error",message:"Something went wrong renaming ".concat(r.error.message)}];if(!(a=r.result))return[2];return(0,ee.w)({edit:a,fs:ef,client:t}),[2]}})})()}}}]:[]}})),e.state.facet(u.SD)&&t.push(ex({label:"Format document",icon:(0,a.tZ)(F.Z,{}),keyboardShortcut:eD,run:function(){(0,u.z1)(e)}})),!e.state.selection.main.empty&&e.state.facet(d.R2)&&t.push(ex({label:"Format selection",icon:(0,a.tZ)(F.Z,{}),run:function(){(0,u.uy)(e)}})),t.push(ex({label:"Select all occurrences",icon:(0,a.tZ)(N.Z,{}),keyboardShortcut:eI,run:function(){(0,ei.SK)(e)}}));var i=void 0!==e.state.field(s.K0,!1);return n&&i&&t.push(ex({label:"Toggle breakpoint",icon:(0,a.tZ)(B.Z,{}),run:function(){(0,ei.QF)(e)}})),n&&$.isCodeActionsSupported&&($.isSourceActionsSupported&&t.push(ex({label:"Source actions",icon:(0,a.tZ)(X.Z,{}),run:function(){(0,v.b7)(e,{force:!0,only:[ev.CodeActionKind.Source]})}})),t.push(ex({label:"More actions",icon:(0,a.tZ)(j.Z,{}),keyboardShortcut:eB,run:function(){(0,v.b7)(e,{force:!0})}}))),t},[$,R,x,T,eI,ey,eb,ew,eC,eg,w,ef,eD,eB])),eW=(eG=(0,ea.s6)(el.Y.EditorContextMenu),(0,ed.useCallback)(function(e){var t=[];return t.push({data:{type:"group",key:"extensions"},commands:(0,r._)(function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:var i;return t=[{data:{filePath:e.filePath,selection:e.view.state.selection.toJSON()}}],[4,Promise.all(eG.map((i=(0,r._)(function(e){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.create({path:t})];case 1:if(!(n=r.sent()))return[2,null];return[2,(0,eo.C)(n,{path:t})]}})}),function(e){return i.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),t},[eG])),eH=eR(),eV=(0,_.P5)({controlName:"flag-draft-buffers"}),ez=(0,ed.useMemo)(function(){return eL?eF(eL):[]},[eL,eF]),ej=(0,S.Z)(eO),eq=(0,ed.useCallback)(function(e){ej.current(e)},[ej]),eJ=eE.use(ez,eq);return[(0,ed.useCallback)(function(){var e=eL?[{data:{type:"context",label:"AI",icon:(0,a.tZ)(W.Z,{})},commands:function(){return eU(eL)}},{data:{type:"context",label:"Code actions",icon:(0,a.tZ)(j.Z,{})},commands:function(){return eF(eL)}}].concat((0,i._)(eV?[{data:{type:"context",label:"File actions",icon:(0,a.tZ)(X.Z,{})},commands:function(){return eH(eL)}}]:[]),[{data:{type:"context",label:"Social",icon:(0,a.tZ)(G.Z,{})},commands:function(){return eM(eL)}},{data:{type:"context",label:"Clipboard",icon:(0,a.tZ)(P.Z,{})},commands:function(){return eX(eL)}},{data:{type:"context",label:"Extensions",icon:(0,a.tZ)(J.Z,{})},commands:function(){return eW({view:eL,filePath:eA})}}]):[];return{data:{type:"context",label:"Search actions",icon:(0,a.tZ)(Y.Z,{})},commands:function(){return e}}},[eL,eU,eF,eM,eX,eH,eA,eW,eV]),eJ]}var eD=new x.j(function(e,t,n){return e?null:[(0,eg.a)(t),c.tk.domEventHandlers({contextmenu:function(e,t){var r=e.clientX,i=e.clientY,o=t.state.selection.main,a=t.posAtCoords({x:r,y:i}),c=t.state.doc.length,s=null===a?c:a;if(s<o.from||s>o.to){var u=l.jT.cursor(s);t.dispatch({selection:u})}return n(e),!0}})]})},70995:function(e,t,n){n.d(t,{u:function(){return eZ}});var r,i=n(66626),o=n(74985),a=n(80403),l=n(12285),c=n(42516),s=n(16826),u=n(32682),d=n(60941),f=n(49224),h=n(82230),p=n(72093),m=n(94778),v=n(37058),g=n(81202),y=n.n(g),b=n(49532),w=n(12674),Z=n(20870),x=n(92834),C=(0,f.X)({root:[p.l0.p(16),p.l0.align.center,p.l0.colWithGap(8),{marginTop:"10%",pointerEvents:"none","*":{pointerEvents:"all"}}],button:[p.l0.reset.button,p.l0.rowWithGap(6),p.l0.align.center,p.l0.color.foregroundDimmest,p.l0.cursor.pointer,{fontFamily:p.TV.fontFamilyDefault,"*":{borderColor:p.TV.foregroundDimmest,color:p.TV.foregroundDimmest},":hover *":{borderColor:p.TV.foregroundDefault,color:p.TV.foregroundDefault}}],iconText:[p.l0.rowWithGap(4)]}),_={layer:"cm-empty-state-layer",dom:"cm-empty-state-dom"},S=s.tk.theme((r={},(0,c._)(r,".".concat(_.layer),{width:"100%",height:"100%",pointerEvents:"none",zIndex:"201 !important"}),(0,c._)(r,".".concat(_.dom),{position:"absolute",width:"100%",pointerEvents:"none",display:"flex",justifyContent:"center"}),r)),k=function(){"use strict";function e(t){(0,l._)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.ctas,n=e.view,r=e.width,i=(0,w.V)((0,o.tZ)(m.G,{css:C.root,children:t.map(function(e){return(0,o.BX)(m.G,{css:C.button,onClick:function(){return e.onClick(n)},children:[(0,o.BX)(m.G,{css:C.iconText,children:[e.icon,(0,o.tZ)(h.xv,{variant:"small",children:e.text})]}),e.shortcut?(0,o.tZ)(v.bM,{keyCombo:e.shortcut,fontSize:12}):null]},e.text)})}));return i.className=_.dom,i.style.width=r+"px",i.style.visibility=r>240?"visibile":"hidden",i.style.left="0px",i},t.eq=function(e){return y()(e.options,this.options)},e}(),E=new d.j(function(e){var t=function(e){var t;return!(e.doc.length>0||e.field(b.$)||(null===(t=e.field(u.xg,!1))||void 0===t?void 0:t.size)||e.field(x.PQ,!1))},n=a.QQ.define({create:t,update:function(e,n){return t(n.state)}}),r=(0,s.EY)({above:!0,class:_.layer,update:function(e){return(0,Z.aU)(e,n)},markers:function(t){if(!t.state.field(n,!1))return[];var r=t.dom.getBoundingClientRect();return[new k({ctas:e,width:Math.round(t.contentDOM.getBoundingClientRect().right-r.left),view:t})]}});return[S,n,r]}),T=n(60994),R=n(32472),I=n(53557),D=n(38753),B=n(60305),G=n(45271),A=n(56679),P=n(86596),N=n(9975),L=n(43312),O=n(98001),U=n(19068),M=n(60772),X=n(29318),F=n(50959),W=n(41733),H=n(21262),V=n(71440),z=n(58995);function j(){var e=(0,H._)(["\n  query ReplCodeExamples($language: String!) {\n    languageExamples(language: $language) {\n      ... on LanguageExamples {\n        examples {\n          ... on LanguageExample {\n            mainFile\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return j=function(){return e},e}var q={},J=(0,V.Ps)(j());function Y(e){var t=(0,W._)({},q,e);return z.a(J,t)}var K=m.K.button;function $(e){var t=e.name,n=e.children,r=e.onClick;return(0,o.BX)(K,{onClick:function(){return r()},css:[U.gU.nofill,p.l0.p(8),p.l0.focusRing,p.l0.textAlign.left],children:[(0,o.tZ)(h.xv,{variant:"subheadDefault",css:p.l0.pb(16),multiline:!1,children:t}),(0,o.tZ)(m.G,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.p(8),p.l0.borderRadius(8)],children:n})]})}var Q="@media (min-width: ".concat(M.j.tabletMax,"px)"),ee=(0,L.iv)([p.l0.colWithGap(16),(0,c._)({},Q,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function et(e){var t=e.children;return(0,o.tZ)(m.G,{css:[(0,c._)({},Q,[p.l0.rowWithGap(16)])],children:t})}function en(e){var t=e.mainFile,n=e.examples,r=e.onSelect;return(0,o.BX)(m.G,{css:[p.l0.colWithGap(24)],children:[(0,o.tZ)(h.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,o.tZ)(h.xv,{children:"Get started with some program examples."}),(0,o.BX)(et,{css:[p.l0.colWithGap(16)],children:[(0,o.tZ)(m.G,{css:ee,children:n.slice(0,(n.length+1)/2).map(function(e){return(0,o.tZ)($,{name:e.name,onClick:function(){return r(e)},children:(0,o.tZ)(O.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})}),(0,o.tZ)(m.G,{css:ee,children:n.slice((n.length+1)/2).map(function(e){return(0,o.tZ)($,{name:e.name,onClick:function(){return r(e)},children:(0,o.tZ)(O.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})})]})]})}function er(e){var t=e.filePath,n=e.language,r=e.onSelect,i=Y({variables:{language:n}}),a=i.data,l=i.loading,c=i.error;if(l)return(0,o.tZ)(m.G,{css:[p.l0.colWithGap(0),p.l0.justify.center,p.l0.align.center,p.l0.pt(32),p.l0.pb(32)],children:(0,o.tZ)(X.Z,{})});if(c)return(0,o.tZ)(m.G,{css:[p.l0.colWithGap(0),p.l0.justify.center,p.l0.align.center,p.l0.pt(32),p.l0.pb(32)],children:c.message});var s=(null==a?void 0:a.languageExamples.__typename)==="LanguageExamples"?a.languageExamples.examples:null;return(null==s?void 0:s.length)?(null==s?void 0:s.length)?(0,o.tZ)(en,{mainFile:t,examples:s,onSelect:r}):(0,o.tZ)(m.G,{css:[p.l0.colWithGap(0),p.l0.justify.center,p.l0.align.center,p.l0.pt(32),p.l0.pb(32)],children:(0,o.BX)(h.xv,{children:["Sorry, this language doesn’t have any examples. Want to add some? Contact us at ",(0,o.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})}):null}var ei=n(73590),eo=n(64546),ea={python:'from replit.ai.modelfarm import ChatExample, ChatMessage, ChatModel, ChatSession\n\nmodel = ChatModel("chat-bison")\nresponse = model.chat([\n  ChatSession(\n    context="You are philosophy bot.",\n    examples=[\n      ChatExample(\n        input=ChatMessage(content="1 + 1"),\n        output=ChatMessage(content="2")\n      )\n    ],\n    messages=[\n      ChatMessage(author="USER", content="How much wood can a woodchuck chuck?"),\n    ],\n  )\n], temperature=0.2)\n\nprint(response.responses[0].candidates[0].message.content)',typescript:"import * as replitai from '@replit/ai-modelfarm';\n\nconst result = await replitai.chat({\n  model: 'chat-bison',\n  temperature: 0.5,\n  messages: [{ author: 'user', content: 'how are you?' }],\n});\n\nconsole.log(result);"},el=n(85438),ec=n(18158);function es(){var e=(0,H._)(["\n  query EditorEmptyStateCurrentUser {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return es=function(){return e},e}var eu={},ed=(0,V.Ps)(es()),ef=n(27025),eh=n(13621),ep=n(85777),em=n(36559),ev=n(9413),eg=a.Py.define(),ey=a.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,R.j)(t,eg,function(e){n=e.value}),n}}),eb=T.t.from(ey,function(e){if(!e)return null;var t=e.language,n=e.filePath;return{key:"examplesModal",node:function(e){var r=function(){e.dispatch({effects:eg.of(null)})};return(0,o.tZ)(G.u,{maxWidth:872,isOpen:!0,onRequestClose:r,children:(0,o.tZ)(ex,{onRequestClose:r,language:t,filePath:n})})}}}),ew=[ey,eb];function eZ(e){var t,n,r,i,a,l,c,s,u,d,f,h,p,m,g,y,b,w=e.isMobile,Z=e.filePath,x=e.generateCode,C=e.openPane,_=(0,v.gf)(ei.x.id),S=null!==(y=null===(p=I.$R.from(Z))||void 0===p?void 0:p.id)&&void 0!==y?y:null,k=(0,ev.v)().isTeamWithAiDisabled,T=Y({variables:{language:S},skip:!S}).data,R=(a=(t={openPane:C,filePath:Z,language:S}).filePath,l=t.language,c=t.openPane,s=(0,D.T3)(),d=((null==(u=(n=(0,W._)({},eu,void 0),z.a(ed,n)).data)?void 0:null===(r=u.currentUser)||void 0===r?void 0:r.userSubscriptionType)===el.HP.Hacker||(null==u?void 0:null===(i=u.currentUser)||void 0===i?void 0:i.userSubscriptionType)===el.HP.HackerPro)&&l&&["python","javascript","typescript","javascriptreact","typescriptreact"].includes(l),f=(0,eo.Z)(a),h=(0,F.useCallback)(function(){if(l){var e="python"===l?"python":"typescript";(0,B.j)(B.U3.GHOSTWRITER_CHAT_MODELFARM_PLACEHOLDER_CLICKED,{language:e}),c({type:"docs",data:{url:ec.TT.MODEL_FARM+"/".concat(e,"#installation")}}),f&&f({code:ea[e],insertAt:0})}},[f,l,c]),s?null:d?h:null),G=(null!==(b=null==T?void 0:null===(g=T.languageExamples)||void 0===g?void 0:null===(m=g.examples)||void 0===m?void 0:m.length)&&void 0!==b?b:0)>=1,L=(0,F.useMemo)(function(){var e=[];return(0,em.gK)(Z)||k||e.push({icon:(0,o.tZ)(A.Z,{}),text:"Generate Code with AI",shortcut:w?void 0:_,onClick:function(e){(0,ef.S)({cta:"generate",version:"new"}),x(e,"shortcut")}}),R&&e.push({icon:(0,o.tZ)(P.Z,{}),text:"Build an AI app for free with ModelFarm",onClick:function(){(0,ef.S)({cta:"modelFarm",version:"new"}),R()}}),S&&G&&e.push({icon:(0,o.tZ)(N.Z,{}),text:"Start with a code example",onClick:function(e){(0,ef.S)({cta:"examples",version:"new"}),e.dispatch({effects:eg.of({language:S,filePath:Z})})}}),e},[w,_,R,S,G,x,Z,k]);return[E.use(L),ew]}function ex(e){var t=e.onRequestClose,n=e.language,r=e.filePath,a=(0,ep.e$)(eh.y.Examples),l=(0,ep.e$)(eh.y.Editor),c=(0,i._)((0,F.useState)(!1),2),s=c[0],u=c[1],d=(0,eo.Z)(r),f=(0,F.useRef)(null==a?void 0:a.isActive),h=(0,F.useRef)();h.current=null==a?void 0:a.isActive;var p=(0,F.useRef)(null==a?void 0:a.goto);return(p.current=null==a?void 0:a.goto,(0,F.useEffect)(function(){return function(){var e;h.current&&(null===(e=p.current)||void 0===e||e.call(p,eh.y.Editor))}},[]),(0,F.useEffect)(function(){if((null==l?void 0:l.isActive)&&!f.current){if(!s){u(!0);return}l.goto(eh.y.Examples)}},[l,t,s]),(0,F.useEffect)(function(){if(null==a?void 0:a.isActive){f.current=!0;return}f.current&&t(null)},[t,null==a?void 0:a.isActive]),d)?(0,o.tZ)("div",{ref:null==a?void 0:a.delegateTooltip,children:(0,o.tZ)(er,{filePath:r,language:n,onSelect:function(e){d({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,o.tZ)("div",{children:"Please make sure you have a file open"})}},73590:function(e,t,n){n.d(t,{x:function(){return $},W:function(){return Q}});var r,i=n(74985),o=n(16826),a=n(12285),l=n(42516),c=n(41733),s=n(30509),u=n(80403),d=n(60941),f=n(33298),h=n(77862),p=n(19068),m=n(64479),v=n(82230),g=n(64432),y=n(94778),b=n(49224),w=n(49580),Z=n(72093),x=n(37058),C=n(67883),_=n(81202),S=n.n(_),k=n(50959),E=n(49532),T=n(12674),R=n(32472),I=n(20870),D=n(95571),B=(0,f.$)(["opacity","transform"]),G=B.cssVars,A=B.styleTokens,P=[Z.l0.display.flex,Z.l0.reset.button,Z.l0.cursor.pointer,Z.l0.center,p.gU.nofill,Z.l0.height("100%"),Z.l0.borderRadius(0)],N=[P,Z.l0.width(28),{"& svg":Z.l0.display.block}],L=(0,b.X)({root:[Z.l0.align.stretch,Z.l0.flex.row,Z.l0.borderRadius(6),Z.l0.border({color:Z.TV.outlineDefault}),Z.l0.position.relative,Z.l0.height(30),{opacity:A.opacity,transform:A.transform,transition:"opacity 120ms, transform 120ms","button:first-of-type":{borderTopLeftRadius:6,borderBottomLeftRadius:6},"button:last-of-type":{borderTopRightRadius:6,borderBottomRightRadius:6}}],moreButton:N,button:[P,Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.pl(4),Z.l0.pr(6),Z.l0.flex.growAndShrink(1),Z.l0.border({direction:"right",color:Z.TV.outlineDefault}),{fontFamily:Z.TV.fontFamilyDefault,"*":{color:Z.TV.foregroundDimmer},":hover *":{color:Z.TV.foregroundDefault},".shortcut":{color:Z.TV.foregroundDimmest},":hover .shortcut":{color:Z.TV.foregroundDimmer}}],iconButton:[N,Z.l0.border({direction:"right",color:Z.TV.outlineDefault})],tooltip:[Z.l0.rowWithGap(2),Z.l0.align.center]}),O=new T.J(function(e){var t,n=e.controls,r=e.verticalPlacement,o=e.onMoreClick,a=(0,k.useRef)(null),u=(0,D.NJ)(),d=(0,C.xx)();(0,k.useEffect)(function(){var e;d(),(0,h.A)(a,(e={},(0,l._)(e,G.opacity,"1"),(0,l._)(e,G.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(Z.TV.space4,"))")),e))},[r,d]);var f=(0,k.useRef)((0,C.qm)());return(0,i.BX)(m.Tg,{innerRef:a,elevated:!0,css:L.root,style:(t={},(0,l._)(t,G.opacity,"0"),(0,l._)(t,G.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(Z.TV.space16,"))")),t),children:[n.map(function(e){if(f.current){var t=(0,i.BX)(y.G,{css:L.tooltip,children:[(0,i.tZ)(v.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.tZ)(v.xv,{variant:"small",className:"shortcut",color:"dimmest",children:(0,x.Ih)(e.shortcut,u)}):null]});return(0,i.tZ)(g.u,{tooltip:t,children:function(t,n){return(0,i.tZ)(y.G,(0,s._)((0,c._)({},t),{innerRef:n,css:L.iconButton,onClick:e.onClick,tag:"button",children:e.icon}))}},e.text)}return(0,i.BX)(y.G,{css:L.button,onClick:e.onClick,tag:"button",children:[e.icon,(0,i.tZ)(v.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.BX)(v.xv,{variant:"small",className:"shortcut",children:["(",(0,x.Ih)(e.shortcut,u),")"]}):null]},e.text)}),o?(0,i.tZ)(y.G,{"aria-label":"More",css:L.moreButton,onClick:function(e){var t=(a.current||e.currentTarget).getBoundingClientRect();o({top:t.top,right:t.right})},tag:"button",children:(0,i.tZ)(w.Z,{size:16})}):null]})}),U={layer:"cm-selection-controls-layer",dom:"cm-selection-controls-dom"},M=o.tk.theme((r={},(0,l._)(r,".".concat(U.layer),{width:"100%"}),(0,l._)(r,".".concat(U.dom),{position:"absolute"}),r)),X=function(){"use strict";function e(t){(0,a._)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.controls,n=e.onMoreClick,r=e.top,i=e.align,o=e.verticalPlacement,a=O.create({controls:t,onMoreClick:n,verticalPlacement:o});return a.className=U.dom,a.style.top=r+"px","left"===i.side?(a.style.left=i.value+"px",a.style.right=""):(a.style.right=i.value+"px",a.style.left=""),a.style.pointerEvents="none",setTimeout(function(){a.style.pointerEvents="auto"},200),a},t.eq=function(e){return S()(e.options,this.options)},e}(),F=u.Py.define(),W=u.QQ.define({create:function(){return null},update:function(e,t){var n;return!t.state.selection||(null===(n=t.state.selection)||void 0===n?void 0:n.main.empty)?null:((0,R.j)(t,F,function(t){e=t.value}),e)}}),H=u.QQ.define({create:function(e){return!e.selection.main.empty},update:function(e,t){return!t.state.selection.main.empty}}),V=o.lg.define(function(e){var t=function(){var t=e.state.selection.main;e.dispatch({effects:F.of(t.empty?null:Date.now())})},n=function(e){"Shift"===e.key&&t()},r=function(){document.addEventListener("mouseup",t),document.addEventListener("keyup",n)},i=function(){document.removeEventListener("mouseup",t),document.removeEventListener("keyup",n)};return{update:function(e){(0,I.aU)(e,H)&&(e.state.field(H)?r():i())},destroy:i}}),z=new d.j(function(e){return[M,(0,o.EY)({above:!0,class:U.layer,update:function(e){return(0,I.aU)(e,E.$,W)},markers:function(t){if(!t.hasFocus)return[];var n=t.state.field(W)?t.state.selection.main:null;if(!n||t.state.field(E.$,!1))return[];var r=function(e,t){for(var n=Math.min(t.from,t.to),r=Math.max(t.from,t.to),i=null;n<=r;){var o=e.lineAt(n);n=o.to+1,null!==i&&o.length<i.length||(i=o)}return i}(t.state.doc,n);if(!r)return[];var i=t.coordsAtPos(r.to);if(!i)return[];var o=t.lineBlockAt(Math.min(n.anchor,n.head)),a=t.dom.getBoundingClientRect(),l=t.contentDOM.getBoundingClientRect(),c=o.top+t.documentPadding.top-30,s=l.right-i.left<200?{side:"right",value:a.right-l.right+16}:{side:"left",value:i.left-a.left},u="top";if(c<t.scrollDOM.scrollTop){var d=t.lineBlockAt(n.to);c=d.top+d.height,u="bottom"}return[new X({top:c,align:s,controls:e.controls(t),onMoreClick:e.onMoreClick,verticalPlacement:u})]}}),H,W,V]}),j=n(9413),q=n(16764),J=n(82314),Y=n(11407),K=n(65377),$={id:"editor.generateOrModifyWithAI",name:"AI",description:"Generate or modify selection with AI",default:(0,Y.l2)({cmdOrCtrl:!0,key:"i"})};function Q(e){var t=e.editCode,n=e.explainCode,r=e.generateCode,a=e.onMoreClick,l=(0,j.v)().isTeamWithAiDisabled,c=(0,x.gf)($.id),s=(0,k.useMemo)(function(){if(!c)return[];var e=Array.isArray(c)?c.join(" "):c;return o.$f.of([{key:e,scope:"editor",run:function(e){return e.state.selection.main.empty?r(e,"shortcut"):t(e,"shortcut"),!0}}])},[c,r,t]),u=(0,k.useMemo)(function(){return{controls:function(e){return l?[]:[{text:"Modify",icon:(0,i.tZ)(J.Z,{size:16,color:K.TV.blurpleStronger}),onClick:function(){return t(e,"highlight")},shortcut:c},{text:"Explain",icon:(0,i.tZ)(q.Z,{size:16,color:K.TV.blurpleStronger}),onClick:function(){return n(e,"highlight")}}]},onMoreClick:a}},[t,n,a,c,l]),d=z.use(u);return(0,k.useMemo)(function(){return[d,s]},[d,s])}},27025:function(e,t,n){n.d(t,{S:function(){return p},r:function(){return h}});var r,i=n(27387),o=n(96583),a=n(91664),l=n(60305),c=n(36559),s=n(73372),u=RegExp("_(?<num>\\d+)$");function d(){return(d=(0,i._)(function(e,t){var n,r,i,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return n=(0,c.Il)(t),[4,e.readDir(n||s.Ql)];case 1:if((r=o.sent()).error)return[2,t];return a=(i=function(e){if(r.children.find(function(t){return"FILE"===t.type&&t.filename===e})){var t,n=(0,c.eb)(e),o=(0,c.r6)(e),a=n.match(u);if(null==a?void 0:null===(t=a.groups)||void 0===t?void 0:t.num){var l=Number(a.groups.num);return i("".concat(n.replace(u,""),"_").concat(l+1,".").concat(o))}return i("".concat(n,"_2.").concat(o))}return e})((0,c.UO)(t)),[2,n?n+"/"+a:a]}})})).apply(this,arguments)}var f=n(52399),h=(r=(0,i._)(function(e,t,n){var r,i,l,s,u,h;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return r=encodeURI(e.name),[4,function(e,t){return d.apply(this,arguments)}(t,(i=(0,c.Il)(n))?i+"/"+r:r)];case 1:return l=o.sent(),[4,(0,a.pV)(e)];case 2:return s=o.sent(),[4,t.writeFile(l,f.Z.from(s))];case 3:return o.sent(),u=(0,c.eb)(e.name),h=(0,c.UO)(l),[2,"![".concat(u,"](").concat(h,")")]}})}),function(e,t,n){return r.apply(this,arguments)});function p(e){var t=e.cta,n=e.version;(0,l.j)(l.U3.EDITOR_EMPTY_STATE_CLICKED,{cta:t,version:n})}},44707:function(e,t,n){n.d(t,{Mp:function(){return l},ac:function(){return a},ev:function(){return o}});var r=n(43312),i=n(72093),o=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.TV.backgroundDefault}),l=(0,r.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},5357:function(e,t,n){n.d(t,{Q1:function(){return b},Rz:function(){return g},xy:function(){return w}});var r=n(27387),i=n(63257),o=n(96583),a=n(74985),l=n(93801),c=n(16923),s=n(94778),u=n(49224),d=n(72093),f=n(85045),h=n(36559),p=(0,u.X)({root:[d.l0.rowWithGap(8),d.l0.align.center,d.l0.flex.growAndShrink(1),d.l0.px(8),{userSelect:"none"}],header:[{fontSize:d.TV.fontSizeSmall,opacity:.6},d.l0.color.foregroundDimmest,d.l0.truncate],result:[d.l0.colWithGap(0)],fileName:[d.l0.truncate,d.l0.flex.row]});function m(e){var t=e.height,n=e.active,r=e.match,i=r.directory,o=r.filename;return(0,a.BX)(s.G,{css:p.root,style:{height:t},children:[(0,a.tZ)(c.Z,{path:o.text,size:16}),(0,a.BX)(s.G,{css:p.result,children:[i?(0,a.tZ)(s.G,{css:p.header,children:(0,a.tZ)(l.x,{text:i.text+"/",highlight:i.ranges,dimmed:!n})}):null,(0,a.tZ)(s.G,{css:p.fileName,children:(0,a.tZ)(l.x,{text:o.text,highlight:o.ranges,dimmed:!n})})]})]})}var v={match:f.kN,forward:!1,tiebreakers:[function(e,t,n){return n(e.item).trim().length-n(t.item).trim().length}]};function g(e,t){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e,t){return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,new f.Zn(t,v).find(e)];case 1:return[2,n.sent().map(function(e){return{path:e.item,score:e.score,ranges:function(e){for(var t=(0,i._)(e.values()).sort(function(e,t){return e-t}),n=[],r=t[0],o=t[0],a=1;a<t.length;a++)t[a]===o+1?o++:(n.push({from:r,to:o+1}),r=t[a],o=t[a]);return n.push({from:r,to:o+1}),n}(e.positions)}})]}})})).apply(this,arguments)}function b(e){var t=e.ranges,n=e.path,r=(0,h.UO)(n),i=(0,h.Il)(n);if(!i)return{filename:{text:r,ranges:t.length?t:void 0}};var o=i.length,a=o+1,l=[],c=[],s=!0,u=!1,d=void 0;try{for(var f,p=t[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var m=f.value;if(m.from<o){l.push({from:m.from,to:Math.min(m.to,o)});var v=m.to-a;if(v<=0)continue;c.push({from:0,to:v});continue}m.from<a||c.push({from:m.from-a,to:m.to-a})}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:l.length?l:void 0}}}function w(e){var t=e.path,n=e.ranges,r=b({path:t,ranges:null!=n?n:[]}),i=r.directory?44:32;return{height:i,content:(0,a.tZ)(m,{match:r,height:i})}}},7360:function(e,t,n){n.d(t,{i:function(){return Z},w:function(){return y}});var r=n(27387),i=n(66626),o=n(96583),a=n(74985),l=n(43182),c=n(16923),s=n(82230),u=n(94778),d=n(82400),f=n(75334),h=n(87128),p=n(72093),m=n(89748),v=n(52399),g=n(5357);function y(e){return b.apply(this,arguments)}function b(){return(b=(0,r._)(function(e){var t,n,r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(t=e.search,n=e.paths,r=e.run,!t)return[2,n.map(function(e){return{data:{type:"action",label:e,icon:(0,a.tZ)(c.Z,{path:e}),run:function(){return r(e)}},match:function(){return{score:1,render:(0,g.xy)({path:e})}}}})];return[4,(0,g.Rz)(t,n)];case 1:return[2,i.sent().map(function(e){var t=e.path,n=e.score,i=e.ranges;return{data:{type:"action",label:t,icon:(0,a.tZ)(c.Z,{path:t}),run:function(){return r(t)}},match:function(){return{score:n,render:(0,g.xy)({path:t,ranges:i})}}}})]}})})).apply(this,arguments)}function w(){return(0,a.BX)(u.G,{css:[p.l0.rowWithGap(8)],children:[(0,a.tZ)(h.Z,{}),(0,a.tZ)(s.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's files. Please try again."})]})}function Z(e){var t;return(0,m.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,a.tZ)(f.Z,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,m.zf)({defaultScore:3}),commands:(t=(0,r._)(function(t){var n,s,u,f,p,m,g,b,Z,x,C,_,S,k,E,T;return(0,o.Jh)(this,function(R){switch(R.label){case 0:if(n=e.fs,s=e.shouldHideFile,!t.search&&(!t.active||e.lazyLoad))return[2,[]];return[4,Promise.resolve(e.getRecentFiles())];case 1:if(u=R.sent(),f=[],!(t.search||t.active))return[3,3];return[4,n.listFiles()];case 2:if((p=R.sent()).error)return l.Tb(Error("Find or create file returned an error"),{extra:{message:p.error}}),[2,[{data:{type:"error",label:p.error,icon:(0,a.tZ)(h.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(w,{})}}}}]];if(!p.files)throw Error("Expected files");m=!0,g=!1,b=void 0;try{for(Z=p.files[Symbol.iterator]();!(m=(x=Z.next()).done);m=!0)C=x.value,s(C)||u.includes(C)||f.push(C)}catch(e){g=!0,b=e}finally{try{m||null==Z.return||Z.return()}finally{if(g)throw b}}R.label=3;case 3:return _=[],[4,Promise.all([y({search:t.search,paths:u,run:function(t){e.openFile({path:t})}}),y({search:t.search,paths:f,run:function(t){e.openFile({path:t})}})])];case 4:return k=(S=i._.apply(void 0,[R.sent(),2]))[0],E=S[1],k.length&&_.push({data:{type:"context",label:"Recent",icon:(0,a.tZ)(d.Z,{})},commands:function(){return k}}),E.length&&_.push({data:{type:"group",key:"files"},commands:function(){return E}}),0===E.length&&0===k.length&&t.active&&(T=t.search,_.push({data:{label:T,description:"Create a new file",icon:(0,a.tZ)(c.Z,{path:T}),type:"action",run:(0,r._)(function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,n.writeFile(T,v.Z.from(""))];case 1:if(t.sent().error)return[2,{type:"error",message:'Could not create "'+T+'"'}];return e.openFile({path:T}),[2]}})})},match:function(){return{score:1}}})),[2,_]}})}),function(e){return t.apply(this,arguments)})})}},23197:function(e,t,n){n.d(t,{F:function(){return k},q:function(){return S}});var r=n(27387),i=n(66626),o=n(96583),a=n(74985),l=n(43182),c=n(3440),s=n(60626),u=n(16923),d=n(82230),f=n(94778),h=n(49224),p=n(90493),m=n(87128),v=n(72093),g=n(89748),y=n(11407),b=n(68302),w=(0,h.X)({root:[v.l0.colWithGap(4),v.l0.align.start,v.l0.flex.growAndShrink(1),v.l0.p(8)],header:[v.l0.rowWithGap(4),v.l0.align.center],singleLine:[{whiteSpace:"nowrap",fontFamily:v.TV.fontFamilyCode},v.l0.truncate,v.l0.color.foregroundDimmest]});function Z(e){var t=e.path,n=e.line;return(0,a.BX)(f.G,{css:w.root,children:[(0,a.BX)(f.G,{css:w.header,children:[(0,a.tZ)(u.Z,{path:t,size:12}),(0,a.BX)(d.xv,{variant:"small",color:"dimmest",multiline:!1,children:[t.replace(/^\.\//,""),":",n.lineNumber]})]}),(0,a.tZ)(f.G,{css:w.singleLine,children:(0,a.tZ)(c.xK,{source:n.content,matches:n.matches})})]})}function x(){return(0,a.BX)(f.G,{css:[v.l0.px(8),v.l0.rowWithGap(8),v.l0.align.center],children:[(0,a.tZ)(m.Z,{}),(0,a.tZ)(d.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's contents. Please try again."})]})}function C(){return(0,a.BX)(f.G,{css:[v.l0.rowWithGap(8),v.l0.p(8),v.l0.align.center],children:[(0,a.tZ)(m.Z,{}),(0,a.tZ)(d.xv,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function _(){return(0,a.tZ)(f.G,{css:[v.l0.rowWithGap(8),v.l0.p(8),v.l0.align.center],children:(0,a.tZ)(d.xv,{color:"dimmest",multiline:!1,children:"Nothing came up searching your Repl's content."})})}var S=(0,y.l2)({cmdOrCtrl:!0,shift:!0,key:"f"});function k(e){var t,n,c=(0,b.e)({container:e.container});return(0,g.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(p.Z,{}),keyboardShortcut:e.keyboardShortcut?S:void 0},{match:(0,g.zf)({defaultScore:2}),commands:(t=(0,r._)(function(t){var r,d,h,p,v,g,y,b,w,S,k,E;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!t.search||!t.active&&e.activeOnly)return[2,[]];return n=r=Math.random(),[4,c({query:t.search})];case 1:if(h=(d=o.sent()).results,p=d.error,v=d.isPartialResult,r!==n)return[2,[]];if(null!==p){if(!t.active)return[2,[]];return l.Tb(Error("Search file contents returned an error"),{extra:{message:p}}),[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(m.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(x,{})}}}}]]}g=[],y=!0,b=!1,w=void 0;try{for(S=function(){var n=(0,i._)(E.value,2),r=n[0];n[1].forEach(function(n){var i=n.matches[0].column;g.push({match:function(){var e=s.Z.match(t.search,n.content);return{score:(null==e?void 0:e.score)||1,render:{height:60,content:(0,a.tZ)(Z,{path:r,line:n})}}},data:{type:"action",label:r,icon:(0,a.tZ)(u.Z,{path:r}),key:[r,n.lineNumber,i].join(":"),run:function(){e.openFile({path:r,line:n.lineNumber,col:i})}}})})},k=Object.entries(h)[Symbol.iterator]();!(y=(E=k.next()).done);y=!0)S()}catch(e){b=!0,w=e}finally{try{y||null==k.return||k.return()}finally{if(b)throw w}}if(0===g.length&&t.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(f.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(_,{})}}}}]];if(t.active){if(0===g.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(f.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(_,{})}}}}]];v&&g.push({data:{type:"error",label:"error",icon:(0,a.tZ)(m.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(C,{})}}}})}return[2,g]}})}),function(e){return t.apply(this,arguments)})})}},56315:function(e,t,n){n.d(t,{Z:function(){return ed}});var r,i,o=n(27387),a=n(41733),l=n(30509),c=n(66626),s=n(96583),u=n(74985),d=n(50959),f=n(23647),h=n(39713),p=n(59735),m=n(43312),v=n(49224),g=(0,m.F4)({"0%":{opacity:.1},"50%":{opacity:1},"100%":{opacity:.1}}),y=(0,v.X)({one:{opacity:.1,animation:"".concat(g," 1.5s ease-in-out infinite"),animationDelay:"0s"},two:{opacity:.1,animation:"".concat(g," 1.5s ease-in-out infinite"),animationDelay:"0.1s"},three:{opacity:"0.1",animation:"".concat(g," 1.5s ease-in-out infinite"),animationDelay:"0.2s"}}),b=function(e){var t=(0,h._)({},(0,p._)(e));return(0,u.BX)(u.HY,{children:[(0,u.tZ)("span",(0,l._)((0,a._)({},t),{css:y.one,children:"."})),(0,u.tZ)("span",(0,l._)((0,a._)({},t),{css:y.two,children:"."})),(0,u.tZ)("span",(0,l._)((0,a._)({},t),{css:y.three,children:"."}))]})},w=n(43985),Z=n(8260),x=n(29609),C=n(39271),_=n(60305),S=n(15235),k=n(54590),E=n(18060),T=n(19068),R=n(45271),I=n(64479),D=n(82230),B=n(94778),G=n(29318),A=n(87128),P=n(72093),N=n(81199),L=n(24857),O=n(57604),U=n(36632),M=n(57253),X=n(95938),F=function(e){var t=e.split("/");if(1===t.length)return t;for(var n=[],r=0;r<t.length;r++)n.push(t.slice(0,r+1).join("/"));return n},W=function(){var e=(0,N.Z)(),t=e.fs,n=e.dotReplit,r=(0,O.P)(n),i=(0,c._)((0,d.useState)(null),2),a=i[0],l=i[1];return(0,d.useEffect)(function(){var e;(e=(0,o._)(function(){var e,n,i,o;return(0,s.Jh)(this,function(a){switch(a.label){case 0:if(!r)return[2];return[4,t.listFiles()];case 1:if((e=a.sent()).error||!e.files)return l([]),[2];return[4,t.readFile(U.l)];case 2:return n=a.sent(),i=e.files,o=X.uP.concat(X.nh),l(i.filter(function(e){return(n.error===M.Df.NotFound||!r.some(function(t){return F(e).some(function(e){return null!=e.match(t)})}))&&!o.includes(e)})),[2]}})}),function(){return e.apply(this,arguments)})()},[r,t]),a},H=n(61832),V=n(91945),z=n(17642),j=n(85733),q=n(16691),J=n(27022),Y=n(90493),K=n(60626),$=n(21371),Q=(0,m.iv)([P.l0.py(8),P.l0.pl(8),P.l0.pr(32),{color:"inherit",outline:"0 none",border:"1px solid",fontSize:"inherit",lineHeight:P.TV.space16,display:"block",width:"100%","::placeholder, :disabled":{color:P.TV.foregroundDimmer,borderColor:"transparent"},cursor:"text"}]),ee=(0,m.iv)([P.l0.reset.button,T.gU.listItem,P.l0.borderRadius(8),P.l0.center,{width:24,height:24}]),et=B.K.button;function en(e){var t,n,r,i,o,s,f,h,p,m,v,g=e.id,y=e.onSelect,b=e.onInit,w=e.options,Z=e.initialSelectedOption,x=e.placeholderText,C=e.autoFocus,_=e.disabled,S=(0,d.useRef)(null),k=(0,c._)((0,d.useState)(null!=Z?Z:""),2),T=k[0],R=k[1],I=(n=(t={options:w,initialSelectedOption:Z,inputRef:S,setInputValue:R}).options,r=t.initialSelectedOption,i=t.inputRef,o=t.setInputValue,f=(s=(0,c._)((0,d.useState)(""),2))[0],h=s[1],p={options:n,filter:f},m=(0,d.useMemo)(function(){return p.filter?K.Z.filter(p.filter.toLowerCase(),p.options).map(function(e){return e.original}):p.options},[p.options,p.filter]),v=(0,$.Kb)({items:m,initialHighlightedIndex:0,initialSelectedItem:r,stateReducer:function(e,t){var n,r,c=t.type,s=t.changes;return((c===$.Kb.stateChangeTypes.ItemClick||c===$.Kb.stateChangeTypes.InputKeyDownEnter&&s.selectedItem)&&(null===(n=i.current)||void 0===n||n.blur()),c!==$.Kb.stateChangeTypes.InputBlur||s.selectedItem)?(c===$.Kb.stateChangeTypes.InputBlur&&s.selectedItem&&o(null!==(r=s.selectedItem)&&void 0!==r?r:""),s):(0,l._)((0,a._)({},s),{isOpen:!0})}}),{filteredOptions:m,combobox:v,setFilter:h,filter:f}),G=I.filteredOptions,A=I.filter,N=I.combobox,L=I.setFilter,O=(0,j.Z)(y),U=(0,j.Z)(b);return(0,d.useEffect)(function(){Z&&(U.current(Z),R(Z),L(""))},[Z]),(0,q.Z)(function(){var e;N.selectedItem&&(null===(e=S.current)||void 0===e||e.blur(),O.current(N.selectedItem),R(N.selectedItem),L(""))},[N.selectedItem,O]),(0,d.useEffect)(function(){Z&&(N.selectItem(Z),R(Z),L(""))},[Z]),(0,u.BX)(B.G,{children:[(0,u.tZ)("div",(0,l._)((0,a._)({},N.getComboboxProps()),{children:(0,u.BX)(B.G,{css:[P.l0.flex.row,{position:"relative"}],children:[(0,u.tZ)(B.G,{css:[P.l0.flex.growAndShrink(1)],children:(0,u.tZ)(E.II,(0,l._)((0,a._)({},N.getInputProps({id:g,spellCheck:!1,autoFocus:C,onChange:function(e){L(e.currentTarget.value.toLowerCase()),R(e.currentTarget.value)},ref:S,onFocus:function(e){N.openMenu(),e.currentTarget.select()}})),{value:T,placeholder:null!=Z?Z:x,css:[Q],disabled:_}))}),_?null:(0,u.tZ)(B.G,{css:[{position:"absolute",top:0,right:0,height:"100%"},P.l0.center],children:(0,u.tZ)(et,(0,l._)((0,a._)({},N.getToggleButtonProps()),{css:ee,type:"button",children:N.inputValue&&!N.isOpen?(0,u.tZ)(J.Z,{}):(0,u.tZ)(Y.Z,{})}))})]})})),(0,u.BX)("div",(0,l._)((0,a._)({},N.getMenuProps()),{css:{position:"relative"},children:[N.isOpen&&G.length?(0,u.tZ)(V.Z,{children:(0,u.tZ)("ul",{css:[P.l0.pt(4),P.l0.pb(8)],children:G.map(function(e,t){return(0,u.tZ)("li",(0,l._)((0,a._)({},N.getItemProps({item:e,index:t})),{children:(0,u.tZ)(z.Z,(0,l._)((0,a._)({},{title:e,key:e.toLowerCase()}),{filter:A,selected:N.selectedItem===e,highlighted:N.highlightedIndex===t}))}),e.toLowerCase())})})}):null,A&&!G.length&&N.isOpen?(0,u.tZ)(V.Z,{children:(0,u.tZ)(B.G,{css:[P.l0.p(16),P.l0.colWithGap(4)],children:(0,u.BX)(D.xv,{color:"dimmer",multiline:!1,children:['No results for "',A,'"']})})}):null]}))]})}var er=n(53157),ei=n(36559);(r=i||(i={})).Unknown="UNKNOWN",r.Npm="NPM",r.Django="DJANGO",r.Rails="RAILS",r.DotNet="DOTNET",r.Cargo="CARGO",r.Make="MAKE",r.RegularRun="REGULAR_RUN";var eo=RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),ea=RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function el(e){var t=e.children;return(0,u.BX)(I.Tg,{background:"default",css:[P.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:[(0,u.tZ)(B.G,{children:(0,u.tZ)(D.xv,{multiline:!1,variant:"subheadDefault",css:[P.l0.color.foregroundDimmest,P.l0.pl(16),P.l0.pt(16)],children:".replit"})}),(0,u.tZ)(B.G,{css:[P.l0.p(16),P.l0.justify.center,P.l0.align.center,{flex:"1 1 auto"}],children:t})]})}function ec(e){var t,n=!!e.hasInterpreter,r=e.initialRun,o=null!==(t=e.initialCompile)&&void 0!==t?t:"",s=e.isFrameworkRecommended,h=!!e.projType&&e.projType===i.Rails,p=e.isApplyingConfig,m=(0,c._)((0,d.useState)("Unknown"===f.ZP.get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),v=m[0];m[1];var g=(0,x.Y)(e.initialRun,function(e){if(!e)return{message:"Add a run command"}}),y=(0,c._)((0,d.useState)(e.initialCompile),2),b=y[0],w=y[1];(0,d.useEffect)(function(){g.setValue(r)},[r]),(0,d.useEffect)(function(){w(null!=o?o:"")},[o]);var Z=(0,x.Y)("",function(e){if(!e)return{message:"Choose an entry point file"}}),C=(0,c._)((0,d.useState)(!!(n&&!s)),2),_=C[0],I=C[1];(0,d.useEffect)(function(){I(!!(n&&!s))},[n,s]);var N=B.K.a,O=(0,c._)((0,d.useState)([]),2),U=O[0],M=O[1],X=W();return(0,d.useEffect)(function(){X&&M(X)},[X]),(0,u.BX)("form",{onSubmit:function(t){if(t.preventDefault(),e.setIsApplyingConfig(!0),!g.value&&!_){g.validate();return}e.onSubmit({run:g.value,compile:null!=b?b:"",entry:Z.value,deleteInterp:!_,onDone:e.closeConfigPane,runChanged:g.value!==r,compileChanged:b!==o,projType:e.projType})},css:[P.l0.maxWidth(400),{width:"100%"}],children:[(0,u.BX)(B.G,{css:[P.l0.colWithGap(8)],children:[e.hasProcfile?(0,u.tZ)(B.G,{css:[P.l0.colWithGap(8)],children:(0,u.BX)(D.xv,{variant:"small",css:[P.l0.mb(24)],children:["Looks like you came from Heroku!",(0,u.tZ)(N,{target:"_blank",href:"https://docs.replit.com/tutorials/import-heroku",rel:"noopener noreferrer",children:"Read more about Replit and Heroku here."})]})}):null,n?(0,u.tZ)(B.G,{css:[P.l0.pb(16)],children:(0,u.BX)(k.hE,{disabled:p,name:"interpreterView",value:_.toString(),row:!0,onChange:function(){return I(function(e){return!e})},stretch:!0,primary:!0,children:[(0,u.tZ)(k.rK,{id:"interpreterFalse",value:"false",text:"Use run command"}),(0,u.tZ)(k.rK,{id:"interpreterTrue",value:"true",text:"Use default interpreter"})]})}):null,(0,u.BX)(B.G,{css:[P.l0.height(e.initialCompile?210:170),P.l0.colWithGap(8)],children:[_?null:(0,u.BX)(B.G,{css:[P.l0.maxWidth(400),P.l0.colWithGap(8)],children:[e.initialCompile?(0,u.BX)(B.G,{css:[P.l0.colWithGap(4)],children:[(0,u.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,u.tZ)(D.xv,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,u.tZ)(E.II,{disabled:p,id:"compile-sel",type:"text",value:b,placeholder:"Enter a command to compile the program",onChange:function(e){w(e.currentTarget.value)},css:{"&:disabled":{color:P.TV.foregroundDimmer}}})]}):null,(0,u.tZ)("label",{htmlFor:"run-sel",css:[P.l0.mt(4)],"data-cy":"import-config-run-command",children:"Configure the Run Command"}),(0,u.tZ)(E.II,{disabled:p,id:"run-sel",dataCy:"import-config-run-command-input",type:"text",value:g.value,placeholder:"Enter a command to run the program",onChange:function(e){g.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:P.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),h?(0,u.BX)(D.xv,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,u.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/misc/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit’s features."]}):null,g.error||!g.value?(0,u.BX)(B.G,{css:[P.l0.color.accentNegativeDefault,P.l0.rowWithGap(4),P.l0.align.center],children:[(0,u.tZ)(A.Z,{size:12}),(0,u.tZ)(B.G,{children:g.error?g.error.message:"Add a run command"})]}):null]}),_?(0,u.BX)(B.G,{css:[{maxWidth:400},P.l0.colWithGap(8)],children:[(0,u.tZ)("label",{htmlFor:"entry-sel",children:"Configure entry point"}),(0,u.tZ)(D.xv,{variant:"small",css:[P.l0.color.foregroundDimmest],children:"The entry point is the file that’s run by default and shown first."}),0!==U.length?(0,u.tZ)(en,(0,l._)((0,a._)({id:"config-selector",onSelect:Z.setValue,onInit:Z.setValue,options:U},U.length&&!!X&&{initialSelectedOption:U[0]}),{disabled:p})):(0,u.tZ)(E.II,{disabled:p,id:"entry-sel",type:"text",value:Z.value,placeholder:"Choose entry point file",onChange:function(e){Z.setValue(e.currentTarget.value)},css:[T.gU.filled,{cursor:"text"}]}),Z.error?(0,u.BX)(B.G,{css:[{color:"var(--accent-negative-default)"},P.l0.rowWithGap(4),P.l0.align.center],children:[(0,u.tZ)(A.Z,{size:12}),(0,u.tZ)(B.G,{children:Z.error.message})]}):null]}):null,(0,u.tZ)(N,{css:[P.l0.color.accentPrimaryStronger,{fontWeight:P.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/programming-ide/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,u.tZ)(B.G,{css:[P.l0.flex.row,P.l0.pt(16)],children:(0,u.tZ)(S.zx,{colorway:"primary",variant:"outlined",type:"submit",text:p?"Saving...":"Done",disabled:p||!_&&(!!g.error||!g.value),css:[T.gU.filledAndOutlined,{fontWeight:P.TV.fontWeightMedium,color:P.TV.accentPrimaryStronger}],dataCy:"import-config-done"})})]})]}),(0,u.tZ)(R.u,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,u.tZ)(B.G,{css:[P.l0.borderRadius(16),P.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,u.BX)(L.gC,{align:"center",spacing:1,children:[(0,u.tZ)(G.Z,{size:32}),(0,u.BX)(D.xv,{multiline:!1,children:["Upgrading to ",f.ZP.get(v).displayName]})]})})})]})}function es(){return(0,u.BX)(B.G,{children:[(0,u.tZ)(B.G,{children:".replit looks a lil messed up :/"}),(0,u.tZ)("a",{css:[P.l0.pt(8),{fontSize:P.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/programming-ide/configuring-repl",children:"View docs"})]})}function eu(){return(0,u.tZ)(B.G,{children:(0,u.BX)("p",{children:["Initializing run configuration",(0,u.tZ)(b,{style:{color:"var(--foreground-default)"}})]})})}var ed=function(e){var t,n=(0,C.Z)(),r=(0,N.Z)(),a=r.fs,l=r.dotReplit,f=e.useReadFile(a,U.l),h=(0,c._)((0,d.useState)(!1),2),p=h[0],m=h[1],v=(0,c._)((0,d.useState)(!1),2),g=v[0],y=v[1],b=f&&!f.error?f.content.toString("utf8"):"",x=(0,c._)((0,d.useState)(""),2),S=x[0],k=x[1],E=(0,c._)((0,d.useState)(""),2),T=E[0],R=E[1],I=(0,c._)((0,d.useState)(!1),2),D=I[0],B=I[1],G=(0,c._)((0,d.useState)(i.Unknown),2),A=G[0],P=G[1],L=(0,c._)((0,d.useState)(!1),2),O=L[0],M=L[1];(0,d.useEffect)(function(){function e(){return(e=(0,o._)(function(){var e,t,n,r,o,c,u,d,f,h,p,v,g,y,b,w,x;return(0,s.Jh)(this,function(s){switch(s.label){case 0:return[4,l.getConfig()];case 1:if(t=(e=s.sent()).config,e.error)return[2];return r=(0,H.Cq)(null!==(n=t.run)&&void 0!==n?n:void 0),c=(0,H.Cq)(null!==(o=t.compile)&&void 0!==o?o:void 0),u=!!t.compile,d=!!t.interpreter,[4,a.listFiles()];case 2:if(null!=(f=s.sent()).error||null==f.files||0===f.files.length)return[2];return h=f.files,v=(p=function(e,t,n){if(0===n.length)return{projType:"UNKNOWN",runCommand:null,compileCommand:null};var r,i,o,a,l,c={initRunCommand:e,isCompiled:t,allFiles:n},s=(i=(r=c).initRunCommand,o=r.isCompiled,a=r.allFiles,(l=new Set(a)).has("Makefile")||l.has("makefile")?"MAKE":l.has("package.json")?"NPM":l.has("Cargo.toml")?"CARGO":o?"UNKNOWN":l.has("config/application.rb")?"RAILS":a.some(function(e){return"csproj"===(0,ei.r6)(e)})?"DOTNET":l.has("manage.py")?"DJANGO":eo.test(i)?"REGULAR_RUN":"UNKNOWN");return{projType:s,runCommand:function(e,t){var n=t.initRunCommand,r=t.allFiles;switch(e){case"NPM":return"npm run start";case"REGULAR_RUN":var i,o=null!==(i=r.filter(function(e){return!ea.test(e)}).find(function(e){return eo.test(e)}))&&void 0!==i?i:null;if(null==o)return null;return n.replace(eo,o);case"DJANGO":return"python3 manage.py runserver 0.0.0.0:3000";case"RAILS":return"bundle exec rails server --binding=0.0.0.0";case"DOTNET":return"dotnet run";case"CARGO":return"cargo run";default:return null}}(s,c),compileCommand:function(e){switch(e){case"MAKE":return"make";case"CARGO":case"DOTNET":case"NPM":return"";default:return null}}(s)}}(r,u,h)).projType,g=p.runCommand,y=p.compileCommand,w=(b=h.includes(Z.E))?null!=r?r:g:null!=g?g:r,x=null!=y?y:c,m(b),k(w),R(x),B(v!==i.Unknown&&v!==i.RegularRun),P(v),M(d),[2]}})})).apply(this,arguments)}b&&function(){e.apply(this,arguments)}()},[b,l,a]);var X=(t=(0,o._)(function(e){var t,r,i,o,c,u,d,f,h;return(0,s.Jh)(this,function(s){switch(s.label){case 0:var p;return t=e.run,r=e.compile,i=e.entry,o=e.deleteInterp,c=e.onDone,u=e.runChanged,d=e.compileChanged,f=e.projType,(0,_.j)(_.U3.NIX_GH_IMPORT_USED,{action:w.D.ConfigDone,interpUsed:!o,isCompiled:""!==r,runChanged:u,compileChanged:d,projType:f,replId:n}),p=[],o?(p.push((0,er.xz)("interpreter")),p.push((0,er.xz)("entrypoint")),p.push((0,er.KQ)(t)),p.push((0,er.X6)(t)),r?(p.push((0,er.D3)(r)),p.push((0,er.pi)(r))):(p.push((0,er.xz)("compile")),p.push((0,er.xz)("deployment/build")))):(p.push((0,er.xz)("run")),p.push((0,er.If)(i))),h=p,[4,l.updateDotReplit(h)];case 1:return s.sent(),a.flush().then(function(){a.persist({skipDebounce:!0})}),c(),[2]}})}),function(e){return t.apply(this,arguments)});return f?(null==f?void 0:f.error)?(0,u.tZ)(el,{children:(0,u.tZ)(es,{})}):(0,u.tZ)(el,{children:(0,u.tZ)(ec,{initialLanguage:"",initialRun:S,initialCompile:T,hasInterpreter:O,fs:a,hasProcfile:p,isApplyingConfig:g,setIsApplyingConfig:y,onSubmit:X,isFrameworkRecommended:D,projType:A,closeConfigPane:e.closeConfigPane})}):(0,u.tZ)(el,{children:(0,u.tZ)(eu,{})})}},59500:function(e,t,n){n.d(t,{xV:function(){return K},du:function(){return k},av:function(){return q}});var r=n(42516),i=n(41733),o=n(74985),a=n(82031),l=n(63066),c=n(24268),s=n(17971),u=n(64479),d=n(49224),f=n(72093),h=n(50959),p=n(88032),m=n(41974),v=n(42650),g=n(88205),y=n(66626),b=n(30660),w=n(39460),Z=(0,h.createContext)(null);function x(){var e=(0,h.useContext)(Z);if(!e)throw Error("Expected store in context");return e}function C(e){return(0,w.Dv)(e,{store:x()})}function _(e){return(0,b.b)(e,x())}var S=function(e){return(0,w.b9)(e,{store:x()})};function k(e){var t=(0,y._)((0,h.useState)(function(){return(0,v.MT)()}),1)[0];return(0,o.tZ)(Z.Provider,{value:t,children:e.children})}var E=(0,n(33298).$)(["display","visibility","transform","maxHeight","width"]),T=E.cssVars,R=E.styleTokens,I=(0,v.cn)(null),D=(0,v.cn)("default"),B=(0,v.cn)({command:null,offset:{x:0,y:0},visible:!1}),G=(0,g.kv)(B,function(e){return e.offset}),A=(0,g.kv)(B,function(e){return e.command}),P=(0,g.kv)(B,function(e){return e.visible}),N=(0,g.kv)(B,function(e){return e.onKeyDownHandler}),L=(0,g.kv)(I,function(e){var t;return null!==(t=null==e?void 0:e.initial)&&void 0!==t?t:null}),O=(0,v.cn)(function(e){var t=e(G);if(!t)return null;var n=t.y,r=window.innerHeight-n,i=e(L),o=null!==i?i-r:0;return o>0&&(n=Math.max(16,n-Math.min(200,o))),n}),U=(0,v.cn)(function(e){var t=e(G);if(!t)return null;var n=t.x,r=window.innerWidth,i=e(X),o=n+(null!=i?i:F)-r+16;return o>0&&(n=Math.max(16,n-o)),n}),M=(0,v.cn)(function(e){var t=e(U),n=e(O);return null==t||null===n?null:(0,r._)({},T.transform,"translate(".concat(t,"px, ").concat(n,"px)"))}),X=(0,v.cn)(null),F=180,W=(0,v.cn)(function(e){var t=e(X);return(0,r._)({},T.width,(null===t?F:t)+"px")}),H=(0,v.cn)(function(e){var t=e(O);return null===t?null:(0,r._)({},T.maxHeight,"calc(100vh - ".concat(f.TV.space16," - ").concat(t,"px)"))}),V=(0,v.cn)(null,function(e,t){t(I,null),t(X,null),t(z,null),t(B,function(e){return(0,m.Uy)(e,function(e){e.visible=!1,e.command=null})})}),z=(0,v.cn)(null),j=(0,v.cn)(null,function(e,t,n){if(t(D,n.background),n.width&&t(X,n.width),n.target){var r=n.target.getBoundingClientRect(),i={x:r.x,y:r.y+r.height+8};t(z,r),t(B,function(e){return(0,m.Uy)(e,function(e){e.command=n.command,e.offset=i,e.visible=!0,e.onKeyDownHandler=n.onKeyDownHandler})});return}t(B,function(e){return(0,m.Uy)(e,function(e){e.command=n.command,e.offset=n.offset,e.visible=!0,e.onKeyDownHandler=n.onKeyDownHandler})})});function q(){var e=S(j),t=S(V),n=_(P),r=(0,u.nZ)({elevated:!0});return{openContextMenu:(0,h.useCallback)(function(t){e(t.target instanceof HTMLElement?{command:t.command,target:t.target,width:t.width,background:r,onKeyDownHandler:t.onKeyDownHandler}:{command:t.command,offset:t.target,target:null,width:t.width,background:r,onKeyDownHandler:t.onKeyDownHandler})},[e,r]),closeContextMenu:t,isVisible:n,onContextMenu:(0,h.useCallback)(function(t,n){var i=n.command,o=n.width,a=n.onKeyDownHandler;t.preventDefault(),e({command:i,offset:{x:t.clientX,y:Math.min(window.innerHeight-64,t.clientY)},target:null,width:o,background:r,onKeyDownHandler:a})},[e,r])}}var J=(0,d.X)({surface:[f.l0.shadow(3),f.l0.borderRadius(8),f.l0.position.absolute,{top:0,left:0,border:"1px solid",borderColor:f.TV.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(f.TV.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(f.TV.space16,"))"),maxHeight:R.maxHeight,width:R.width,transform:R.transform,visibility:R.visibility,display:R.display}]});function Y(){var e=C(z);return e?(0,o.tZ)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var K=(0,h.memo)(function(e){var t=e.fontSize,n=S(V),d=C(A),f=C(N),m=_(P),v=(0,h.useRef)(function(){});(0,h.useEffect)(function(){var e=function(e){if(e){var t;null===(t=v.current)||void 0===t||t.call(v);return}};return e(m.current),m.subscribe(e)},[m]);var g=S(I),y=(0,h.useRef)(null);(0,h.useEffect)(function(){var e=function(e){var t;e.target instanceof HTMLElement&&(null===(t=y.current)||void 0===t?void 0:t.contains(e.target))||n()},t=function(){n()},r=function(n){n?(window.addEventListener("blur",t),document.addEventListener("pointerdown",e)):(window.removeEventListener("blur",t),document.removeEventListener("pointerdown",e))},i=m.subscribe(r);return function(){i(),r(!1)}},[m,n]);var b=_(M);(0,c.j)(y,b),(0,c.j)(y,_(H)),(0,c.j)(y,m,function(e){var t;return t={},(0,r._)(t,T.visibility,e?"visible":"hidden"),(0,r._)(t,T.display,e?"flex":"none"),t});var w=_(W);(0,c.j)(y,w);var Z=(0,l.Z)(),x=C(P)&&!Z,k=C(D),E=(0,i._)({},b.current,w.current);return d?(0,o.BX)(s.h,{children:[(0,o.tZ)(Y,{}),(0,o.tZ)(p.MT,{autoFocus:x,restoreFocus:!0,contain:!0,children:(0,o.tZ)(u.Tg,{onKeyDown:function(e){"Escape"===e.key&&n()},innerRef:y,css:J.surface,style:E,background:k,children:(0,o.tZ)(a.X,{iconBreadcrumbs:!0,command:d,onAction:n,onSelect:n,onTotalHeightChange:g,onKeyDown:f,focusRef:v,fontSize:void 0===t?14:t,compact:!0})})})]}):null})},95132:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(66626),i=n(74985),o=n(15235),a=n(45271),l=n(82230),c=n(94778),s=n(59947),u=n(72093),d=n(2993),f=n(33980),h=n(50959),p=n(12285),m=function e(){"use strict";var t=this;(0,p._)(this,e),this.audioStart=0,this.feed=function(e){var n=t.getFormatedValue(e),r=new Float32Array(t.samples.length+n.length);r.set(t.samples,0),r.set(n,t.samples.length),t.samples=r},this.getFormatedValue=function(e){for(var t=new Float32Array(e.length),n=0;n<e.length;n++)t[n]=e[n]/2147483648;return t},this.stop=function(){if(t.bufferSource)try{t.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(t.audioCtx&&t.samples.length){var n,r,i,o=0,a=t.audioCtx.currentTime;if(0===e)t.startTime=a,t.audioStart=a;else{for(var l=Math.floor((a-t.audioStart)*44100);l>e-32896;)t.audioStart+=.7459410430839002,l-=32896;l>e&&(o=l-e,t.startTime=a),t.startTime=a}t.samples=t.samples.slice(o,t.samples.length);for(var c=t.audioCtx.createBufferSource(),s=t.samples.length/1,u=t.audioCtx.createBuffer(1,s,44100),d=0;d<1;d++)for(i=0,n=u.getChannelData(d),r=d;i<s;i++)n[i]=t.samples[r],r+=1;t.startTime<t.audioCtx.currentTime&&(t.startTime=t.audioCtx.currentTime),c.buffer=u,c.connect(t.gainNode),c.start(t.startTime),t.stop(),t.bufferSource=c,t.startTime+=u.duration,t.samples=new Float32Array}},this.samples=new Float32Array;var n=window.AudioContext||window.webkitAudioContext;this.audioCtx=new n,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime},v=n(81199);function g(){var e=(0,v.Z)().container,t=(0,r._)((0,h.useState)(!1),2),n=t[0],p=t[1],g=(0,r._)((0,h.useState)(!1),2),y=g[0],b=g[1],w=(0,f.Z)(e);(0,h.useEffect)(function(){if(w===d.em.CONNECTED&&!0!==y){var e=setTimeout(function(){b(!0)},1e3);return function(){clearTimeout(e)}}},[w,y]);var Z=(0,h.useRef)(null);(0,h.useEffect)(function(){if(y&&e.getConnectionState()!==d.em.DISCONNECTED)return e.openChannel({name:"audio",service:"audio"},function(e){var t=e.channel,n=null,r=!1;return t.onCommand(function(e){var t;r||(r=!0,Z.current=function(){n=new m,Z.current=null},p(!0)),n&&(null==e?void 0:null===(t=e.audio2)||void 0===t?void 0:t.data)&&(e.audio2.samples||(e.audio2.samples=0),n.feed(Int32Array.from(e.audio2.data)),n.flush(e.audio2.samples))}),function(){p(!1),n&&(n.stop(),n=null),Z.current=null}})},[e,y]);var x=function(){p(!1)};return(0,i.tZ)(a.u,{isOpen:n,onRequestClose:x,children:(0,i.BX)(c.G,{css:[u.l0.colWithGap(24)],children:[(0,i.tZ)(l.h4,{variant:"headerDefault",level:1,children:"We hear audio!"}),(0,i.BX)(c.G,{css:[u.l0.colWithGap(8)],children:[(0,i.tZ)(l.xv,{children:"Hey! It appears that this Repl is playing audio."}),(0,i.tZ)(l.xv,{children:"In order for us to hear the audio you’re receiving, please click confirm."})]}),(0,i.BX)(c.G,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[(0,i.tZ)(o.zx,{onClick:x,text:"Cancel"}),(0,i.tZ)(o.zx,{colorway:"positive",onClick:function(){p(!1),Z.current&&Z.current()},text:"Confirm",iconLeft:(0,i.tZ)(s.Z,{})})]})]})})}},85021:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(74985),i=n(99450),o=n(45271),a=n(82230),l=n(94778),c=n(72093),s=n(47336),u=n.n(s),d=n(85421);function f(){var e=(0,d.useRouter)(),t=(0,i.Wd)("didMigrateToNix","boolean");return(0,r.tZ)(o.u,{isOpen:t,onRequestClose:function(){(0,i.pg)({router:e,params:[{mode:"delete",key:"didMigrateToNix"}]})},centered:!0,children:(0,r.BX)(l.G,{css:[c.l0.colWithGap(16)],children:[(0,r.tZ)(a.h4,{level:1,variant:"headerDefault",children:"We've upgraded your project!"}),(0,r.BX)(a.xv,{children:["Your project is now using"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://blog.replit.com/nix",children:"the latest infrastructure"})," ","which unlocks powerful new features."]}),(0,r.BX)(l.K.ul,{css:c.l0.colWithGap(4),children:[(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:["•"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://docs.replit.com/programming-ide/nix-on-replit",children:"Use 80,000+ system dependencies"})," ","(linux packages) out of the box."]})}),(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:["•"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://docs.replit.com/programming-ide/configuring-repl",children:"Configure your Repl"})," ","with more capabilities."]})}),(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:["•"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://docs.replit.com/tutorials/python/build-with-nix",children:"Check out this tutorial"})," ","for a deep dive."]})})]}),(0,r.BX)(a.xv,{variant:"small",css:{fontStyle:"italic"},children:["Any overwritten files have been backed up to the same file name with a .backup suffix. If you have any questions, please use"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://ask.replit.com",children:"ask.replit.com"})," ","to get help."]}),(0,r.tZ)(a.xv,{multiline:!1,children:"Thank you for your patience"})]})})}},27526:function(e,t,n){n.d(t,{v:function(){return y}});var r=n(66626),i=n(74985),o=n(50959),a=n(15235),l=n(49224),c=n(45271),s=n(82230),u=n(72093),d=n(94778),f=n(33980),h=n(25172),p=n(39102),m=n(81199),v=(0,l.X)({container:[u.l0.colWithGap(8)],splitContainer:[u.l0.rowWithGap(8),u.l0.justify.spaceBetween,u.l0.mt(8)],group:[u.l0.rowWithGap(8)],text:[u.l0.mt(8)]}),g=function(){var e=(0,r._)((0,o.useState)(navigator.onLine),2),t=e[0],n=e[1];return(0,o.useEffect)(function(){var e=function(){n(navigator.onLine)};return window.addEventListener("online",e),window.addEventListener("offline",e),function(){window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),t},y=function(){var e=(0,m.Z)().container,t=(0,r._)((0,o.useState)(!1),2),n=t[0],l=t[1],u=(0,o.useRef)(!1),y=(0,f.Z)(e),b=(0,o.useMemo)(function(){return y===p.em.CONNECTED},[y]),w=(0,h.d)(),Z=g(),x=(0,o.useCallback)(function(){l(!1)},[]),C=(0,o.useCallback)(function(){location.reload()},[]);return(0,o.useEffect)(function(){if(!u.current&&!b&&w&&Z){var e=setTimeout(function(){l(!0),u.current=!0},6e4);return function(){return clearTimeout(e)}}},[b,w,Z]),(0,i.tZ)(c.u,{isOpen:n,onRequestClose:x,maxWidth:360,centered:!0,children:(0,i.BX)(d.G,{css:v.container,children:[(0,i.tZ)(s.h4,{level:2,variant:"subheadBig",children:"You are disconnected"}),(0,i.tZ)(s.xv,{css:v.text,children:"Your connection to the server has been lost and reconnection attempts have failed. Please refresh the page to continue."}),(0,i.BX)(d.G,{css:v.splitContainer,children:[(0,i.tZ)(a.zx,{text:"Cancel",onClick:x}),(0,i.tZ)(d.G,{css:v.group,children:(0,i.tZ)(a.zx,{text:"Refresh",onClick:C,colorway:"blue"})})]})]})})}},82891:function(e,t,n){n.d(t,{Z:function(){return v},e:function(){return y}});var r=n(41733),i=n(98924),o=n(74985),a=n(15235),l=n(64479),c=n(82230),s=n(94778),u=n(49224),d=n(70501),f=n(72093),h=n(36559),p=n(12202),m=(0,u.X)({code:[f.l0.font.code,f.l0.flex.grow(1)],surface:[f.l0.borderRadius(8),f.l0.p(8),f.l0.flex.row,f.l0.rowWithGap(8),f.l0.align.center]});function v(e){var t=y(e.filePath,e.keyName);if(!t)return null;var n=t.import,i=t.access;return(0,o.BX)(s.G,{css:f.l0.colWithGap(8),children:[n?(0,o.tZ)(g,(0,r._)({code:n},e)):null,(0,o.tZ)(g,(0,r._)({code:i},e))]})}function g(e){var t=e.code,n=e.onInsert,r=(0,i._)(e,["code","onInsert"]);return(0,o.BX)(l.Tg,{elevated:r.elevated,css:m.surface,children:[(0,o.tZ)(p.m,{textToCopy:t}),(0,o.tZ)(c.xv,{variant:"small",css:m.code,multiline:!1,children:t}),n?(0,o.tZ)(a.zx,{variant:"outlined",size:"small",onClick:function(){return n(t)},text:"Insert",iconRight:(0,o.tZ)(d.Z,{})}):null]})}function y(e,t){if(!e)return null;switch((0,h.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}},85287:function(e,t,n){n.d(t,{$M:function(){return ec},u_:function(){return ef},BH:function(){return eh},ZP:function(){return ey}});var r=n(27387),i=n(41733),o=n(30509),a=n(66626),l=n(96583),c=n(74985),s=n(38953),u=n(69170),d=n(36647),f=n(75958),h=n(60305),p=n(15235),m=n(85638),v=n(67242),g=n(85763),y=n(18060),b=n(45271),w=n(11894),Z=n(64479),x=n(82230),C=n(64432),_=n(94778),S=n(49224),k=n(80274),E=n(76575),T=n(72452),R=n(44049),I=n(29318),D=n(29252),B=n(55821),G=n(72093),A=n(84806),P=n(45929),N=n(82891),L=n(64546),O=n(52425),U=n(50959),M=n(32822),X=n(57253),F=n(9756),W=n(16826),H=n(43182),V=n(51148),z=n(87502),j=n(99236),q=n(59947),J=n(41198),Y=n(15561),K=n(11407),$=h.U3.ENV_EDITOR_USED;function Q(e){var t,n=e.secrets,i=e.update,o=(0,a._)((0,U.useState)(!1),2),s=o[0],u=o[1],d=(0,a._)((0,U.useState)(!1),2),f=d[0],m=d[1],v=(0,a._)((0,U.useState)(!1),2),g=v[0],y=v[1],w=(0,a._)((0,U.useState)(0),2),C=w[0],S=w[1],k=0===C,E=(0,U.useRef)();E.current||(E.current=(0,F.ir)(function(e){var t=ee(e.state.doc.toString());return S(t),0!==t?(0,h.j)($,{action:"rawEditorUpdatedError"}):(0,h.j)($,{action:"rawEditorUpdated"}),[]}));var T=(0,z.Z)(),R=T.ref,I=T.view,D=function(){f||u(!1)},B=function(){y(!1),u(!0),(0,h.j)($,{action:"rawEditorOpened"})},A=function(){if(!I)return!1;var e=ee(I.state.doc.toString());return S(e),0===e},P=(t=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:if(!I||!A())return[2];m(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i(JSON.parse(I.state.doc.toString()))];case 2:return t.sent(),m(!1),y(!0),setTimeout(function(){D(),setTimeout(function(){y(!1)},500)},500),[3,4];case 3:return e=t.sent(),H.Tb(e),(0,h.j)($,{action:"rawEditorUpdatedError"}),S(3),m(!1),[3,4];case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,U.useEffect)(function(){if(I){var e=JSON.stringify(n,null,2);"{}"===e&&(e="{\n  \n}"),I.dispatch({changes:{from:0,to:I.state.doc.length,insert:e}}),I.dispatch({selection:{anchor:I.state.doc.length-2}}),I.focus()}},[I,n]),(0,c.BX)(c.HY,{children:[(0,c.tZ)(p.zx,{onClick:function(){return B()},text:"Edit as JSON",iconLeft:(0,c.tZ)(J.Z,{}),size:"small"}),(0,c.tZ)(b.u,{isOpen:s,onRequestClose:function(){return D()},children:(0,c.BX)(_.G,{css:[G.l0.colWithGap(24)],children:[(0,c.tZ)(x.h4,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,c.tZ)(x.xv,{children:"Secrets are specified in JSON. Values must be strings."}),(0,c.tZ)(Z.Tg,{css:[G.l0.borderRadius(8),G.l0.transition.snappy,G.l0.p(4),{border:"1px solid var(--outline-dimmer)",":hover":{borderColor:"var(--outline-stronger)"}}],elevated:!0,children:(0,c.tZ)(V.ZP,{ref:R,readOnly:f||g,extensions:[E.current,W.$f.of([{key:(0,K.l2)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return P(),!0},preventDefault:!0,stopPropagation:!0}])],language:"json",hideGutter:!0})}),(0,c.BX)(_.G,{css:[G.l0.rowWithGap(4),G.l0.justify.end],children:[!k&&(0,c.tZ)(j.E,{icon:(0,c.tZ)(Y.Z,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}(C)}),(0,c.BX)(_.G,{css:[G.l0.rowWithGap(12)],children:[(0,c.tZ)(p.zx,{onClick:D,text:"Cancel"}),(0,c.tZ)(p.zx,{iconLeft:(0,c.tZ)(q.Z,{}),stretch:!0,colorway:g?"positive":"primary",text:g?"Saved!":"Save",disabled:!k||f||g,onClick:function(){return P()}})]})]})]})})]})}function ee(e){try{var t=JSON.parse(e);for(var n in t)if("string"!=typeof n||"string"!=typeof t[n])return 2;return 0}catch(e){return 1}}var et=n(12202),en=n(28508),er=(0,S.X)({addSecretContainer:[G.l0.flex.column,G.l0.colWithGap(8),G.l0.py(8)],secretItemEdit:[G.l0.colWithGap(8)],secretItemEditInputs:[G.l0.rowWithGap(8)],secretItem:[G.l0.flex.row,G.l0.rowWithGap(8),G.l0.align.center],headerStyle:[G.l0.flex.row,G.l0.rowWithGap(8),G.l0.align.center,G.l0.p(8)],accessSecrect:[G.l0.px(8),G.l0.py(16),G.l0.colWithGap(8)],accessSecrectHeader:[G.l0.rowWithGap(8),G.l0.align.center],imageHolder:[G.l0.py(16)]}),ei={fontFamily:"text-security-disc"};function eo(e){var t=e.onClose,n=e.onAdd,r=e.otherKeys,l=(0,a._)((0,U.useState)(!0),2),s=l[0],u=l[1],d=(0,a._)((0,U.useState)({key:"",value:""}),2),f=d[0],h=d[1],m=f.key.length>0&&!r.includes(f.key);return(0,c.tZ)(c.HY,{children:(0,c.BX)(_.G,{css:er.addSecretContainer,children:[(0,c.BX)(_.G,{css:G.l0.rowWithGap(8),children:[(0,c.BX)(_.G,{css:[G.l0.colWithGap(4),G.l0.width("40%")],children:[(0,c.tZ)(x.xv,{css:[G.l0.pt(2),G.l0.pb(4)],variant:"small",color:"dimmer",multiline:!1,children:"Key"}),(0,c.tZ)(y.II,{value:f.key,onChange:function(e){return h((0,o._)((0,i._)({},f),{key:e.target.value}))},autoFocus:!0,placeholder:"SECRET_KEY",autoComplete:"off"}),r.includes(f.key)?(0,c.BX)(x.xv,{multiline:!1,variant:"small",css:{color:G.TV.accentNegativeDefault},children:['Secret "',f.key,'" already exists']}):null]}),(0,c.BX)(_.G,{css:[G.l0.colWithGap(4),G.l0.flex.growAndShrink(1)],children:[(0,c.BX)(_.G,{css:[G.l0.flex.row,G.l0.rowWithGap(4),G.l0.align.center],children:[(0,c.tZ)(x.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Value"}),(0,c.tZ)(g.hU,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return u(!s)},children:s?(0,c.tZ)(T.Z,{}):(0,c.tZ)(R.Z,{})})]}),(0,c.tZ)(y.II,{value:f.value,onChange:function(e){return h((0,o._)((0,i._)({},f),{value:e.target.value}))},style:s?ei:void 0,autoComplete:"off",placeholder:"Value"})]})]}),(0,c.BX)(_.G,{css:[G.l0.rowWithGap(8),G.l0.justify.end],children:[(0,c.tZ)(p.zx,{size:"small",text:"Cancel",onClick:function(){return t()}}),(0,c.tZ)(p.zx,{size:"small",text:"Add Secret",colorway:"primary",disabled:!m,onClick:function(){n({key:f.key.trim(),value:f.value}),h({key:"",value:""})}})]})]})})}var ea=[G.l0.flex.row,G.l0.rowWithGap(8),G.l0.align.center],el=(0,S.X)({root:[G.l0.height("100%"),G.l0.borderRadius(8),{'& [aria-haspopup="listbox"]':[G.l0.height(32)]}],item:ea,itemDanger:[ea,{color:G.TV.accentNegativeStronger}]});function ec(e){var t=e.onEdit,n=e.onDelete;return(0,c.tZ)(Z.Tg,{elevated:!0,css:el.root,children:(0,c.tZ)(s.Z,{label:"Options",items:[{label:(0,c.BX)(_.G,{css:el.item,children:[(0,c.tZ)(E.Z,{}),(0,c.tZ)(x.xv,{multiline:!1,children:"Edit"})]}),onClick:t},{label:(0,c.BX)(_.G,{css:el.itemDanger,children:[(0,c.tZ)(B.Z,{}),(0,c.tZ)(x.xv,{multiline:!1,children:"Delete"})]}),isDescructive:!0,onClick:n}],onItemClick:function(e){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)}})})}var es=[G.l0.p(4),G.l0.rowWithGap(4),G.l0.borderRadius(8)],eu=(0,S.X)({root:[es,G.l0.width("40%"),G.l0.display.flex,G.l0.overflowX("hidden")],text:[G.l0.flex.growAndShrink(1)]}),ed=(0,S.X)({root:[es,G.l0.flex.growAndShrink(1)],text:[G.l0.flex.growAndShrink(1),G.l0.truncate,{fontFamily:G.TV.fontFamilyCode}]});function ef(e){var t=e.value;return(0,c.BX)(Z.Tg,{elevated:!0,css:eu.root,children:[(0,c.tZ)(et.m,{tooltipText:"Copy secret",textToCopy:t}),(0,c.tZ)(C.u,{tooltip:(0,c.tZ)(x.xv,{children:t}),children:function(e,n){return(0,c.tZ)(x.xv,(0,o._)((0,i._)({ref:n},e),{multiline:!1,css:eu.text,children:t}))}})]})}function eh(e){var t=e.value,n=(0,a._)((0,U.useState)(!1),2),r=n[0],i=n[1];return(0,c.BX)(Z.Tg,{elevated:!0,css:ed.root,children:[(0,c.tZ)(et.m,{tooltipText:"Copy secret",textToCopy:t}),(0,c.tZ)(x.xv,{multiline:!1,css:ed.text,children:r?t:"•".repeat(t.length)}),(0,c.tZ)(g.hU,{alt:"Toggle Secret",tooltipBehavior:"hidden",onClick:function(){return i(!r)},children:r?(0,c.tZ)(R.Z,{}):(0,c.tZ)(T.Z,{})})]})}function ep(e){var t=(0,a._)((0,U.useState)(""===e.secret.value?{key:e.secret.key,value:""}:null),2),n=t[0],r=t[1],l=(0,a._)((0,U.useState)(!1),2),s=l[0],u=l[1],d=(0,a._)((0,U.useState)(!0),2),f=d[0],h=d[1],m=e.secret;if(n&&!e.readOnly){var v,w=e.onDeleteSecret,Z=e.onUpdateSecret;return(0,c.BX)(c.HY,{children:[(0,c.BX)(_.G,{css:er.secretItemEdit,children:[(0,c.BX)(_.G,{css:er.secretItemEditInputs,children:[(0,c.BX)(_.G,{css:[G.l0.colWithGap(2),G.l0.width("40%")],children:[(0,c.tZ)(x.xv,{multiline:!1,css:[G.l0.pt(2),G.l0.pb(4)],variant:"small",color:"dimmer",children:"Key"}),(0,c.tZ)(_.G,{children:(0,c.tZ)(y.II,{value:null!==(v=null==n?void 0:n.key)&&void 0!==v?v:"",onChange:function(e){return r(function(t){return t?(0,o._)((0,i._)({},t),{key:e.target.value}):t})},placeholder:"SECRET_KEY",autoComplete:"off"})})]}),(0,c.BX)(_.G,{css:[G.l0.flex.growAndShrink(1),G.l0.colWithGap(2)],children:[(0,c.BX)(_.G,{css:[G.l0.flex.row,G.l0.rowWithGap(4),G.l0.align.center],children:[(0,c.tZ)(x.xv,{multiline:!1,css:[G.l0.pt(2),G.l0.pb(4)],variant:"small",color:"dimmer",children:"Value"}),(0,c.tZ)(g.hU,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return h(!f)},children:f?(0,c.tZ)(T.Z,{}):(0,c.tZ)(R.Z,{})})]}),(0,c.tZ)(_.G,{children:(0,c.tZ)(y.II,{value:n.value,style:f?ei:void 0,onChange:function(e){return r(function(t){return t?(0,o._)((0,i._)({},t),{value:e.target.value}):t})}})})]})]}),(0,c.BX)(_.G,{css:[G.l0.flex.row,G.l0.rowWithGap(8)],children:[(0,c.tZ)(p.zx,{size:"small",text:"Delete",colorway:"negative",onClick:function(){return u(!0)}}),(0,c.tZ)(_.G,{css:G.l0.flex.grow(1)}),(0,c.tZ)(p.zx,{size:"small",text:"Cancel",onClick:function(){return r(null)}}),(0,c.tZ)(p.zx,{size:"small",colorway:"primary",text:""===e.secret.value?"Add Secret":"Update Secret",disabled:!(null==n?void 0:n.key.length),onClick:function(){n&&(Z(m.key,{key:n.key.trim(),value:n.value}),r(null))}})]})]}),(0,c.tZ)(b.u,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,c.BX)(_.G,{children:[(0,c.BX)(x.xv,{variant:"subheadDefault",multiline:!1,children:["Delete ",m.key,"?"]}),(0,c.tZ)(x.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,c.BX)(_.G,{css:[G.l0.justify.end,G.l0.flex.row,G.l0.rowWithGap(8)],children:[(0,c.tZ)(p.zx,{text:"Cancel",onClick:function(){return u(!1)}}),(0,c.tZ)(p.zx,{text:"Delete",colorway:"negative",onClick:function(){return w(m.key)}})]})]})})]})}return(0,c.BX)(_.G,{css:er.secretItem,children:[(0,c.tZ)(ef,{value:m.key}),(0,c.tZ)(eh,{value:m.value}),e.readOnly?null:(0,c.BX)(c.HY,{children:[(0,c.tZ)(_.G,{children:(0,c.tZ)(ec,{onEdit:function(){return r(m)},onDelete:function(){return u(!0)}})}),(0,c.tZ)(b.u,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,c.BX)(_.G,{css:[G.l0.colWithGap(24)],children:[(0,c.BX)(x.xv,{multiline:!1,variant:"headerDefault",children:["Delete ",m.key,"?"]}),(0,c.tZ)(x.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,c.BX)(_.G,{css:[G.l0.justify.end,G.l0.flex.row,G.l0.rowWithGap(12)],children:[(0,c.tZ)(p.zx,{text:"Cancel",onClick:function(){return u(!1)}}),(0,c.tZ)(p.zx,{iconLeft:(0,c.tZ)(B.Z,{}),text:"Yes, delete secret",colorway:"negative",onClick:function(){return e.onDeleteSecret(m.key)}})]})]})})]})]})}function em(e){var t=e.secrets,n=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onAddSecret,o=e.showAddSecret,l=e.onClose,s=Object.entries(t).filter(function(e){var t=(0,a._)(e,2);return""===(t[0],t[1])}),u=Object.entries(t).filter(function(e){var t=(0,a._)(e,2);return""!==(t[0],t[1])});return(0,c.BX)(_.G,{css:[G.l0.colWithGap(8),G.l0.px(8),G.l0.py(8)],children:[0!==s.length&&(0,c.BX)(c.HY,{children:[(0,c.BX)(_.G,{css:[G.l0.colWithGap(8)],children:[(0,c.tZ)(x.xv,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,c.tZ)(x.xv,{variant:"small",children:"This Repl contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,c.tZ)(_.G,{css:[G.l0.colWithGap(8)],children:s.map(function(e){var t=(0,a._)(e,2),i=t[0],o=t[1];return(0,c.tZ)(ep,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r},i)})})]}),(0,c.tZ)(v.R,{})]}),(0,c.BX)(_.G,{css:[G.l0.colWithGap(8)],children:[o?(0,c.tZ)(eo,{onClose:l,onAdd:i,otherKeys:Object.keys(t)}):null,u.map(function(e){var t=(0,a._)(e,2),i=t[0],o=t[1];return(0,c.tZ)(ep,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r},i)})]})]})}function ev(e){var t=e.secrets,n=e.activeFile,r=(0,a._)((0,U.useState)(Object.keys(t)[0]),2),i=r[0],o=r[1];return(0,L.Z)(n)&&(0,N.e)(n,i)&&0!==Object.keys(t).length?(0,c.BX)(_.G,{css:er.accessSecrect,children:[(0,c.BX)(_.G,{css:er.accessSecrectHeader,children:[(0,c.tZ)(x.xv,{multiline:!1,children:"Access secret"}),(0,c.tZ)(w.P,{css:G.l0.minWidth(48),items:Object.keys(t).map(function(e){return{title:e}}),selectedItem:{title:i},onChange:function(e){return o(e.title)}})]}),(0,c.tZ)(N.Z,{elevated:!0,keyName:i,filePath:n})]}):null}function eg(e,t){var n=(0,i._)({},e);return"add"===t.type?n[t.key]=t.value:"update"===t.type?(delete n[t.oldKey],n[t.key]=t.value):delete n[t.key],n}function ey(e){var t,n,o,s,g,y=e.readRawEnv,b=e.writeRawEnv,w=e.getRunState,Z=(0,O.R3)(),C=(0,a._)((0,U.useState)(null),2),S=C[0],E=C[1],T=(0,a._)((0,U.useState)(!1),2),R=T[0],B=T[1],N=function(){B(!1)},L=(0,A.Z)();(0,U.useEffect)(function(){(0,h.Cn)(h.U3.ENV_EDITOR_USED,{action:"opened"}),f.Z.set("enveditortour",!0)},[]),(0,U.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[4,y()];case 1:if((e=t.sent()).error===X.Df.NotFound)return E({}),[2];if(e.error)throw Error("Error getting .env");return E(M.Z.parse(e.content.toString())),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[y,E]);var F=(0,U.useRef)(null),W=(0,U.useRef)([]),H=(t=(0,r._)(function(e){var t,n,r,i;return(0,l.Jh)(this,function(o){switch(o.label){case 0:if(!S)throw Error("trying to write secrets before loading");return E(t=eg(S,e)),W.current.push(e),n=Math.random(),F.current=n,[4,y()];case 1:if(i=o.sent(),F.current!==n)return[2];return i.error?r=t:(r=M.Z.parse(i.content.toString()),W.current.forEach(function(e){r=eg(r,e)}),E(r)),W.current=[],[4,b(M.Z.serialize(r))];case 2:return o.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),V=(0,u.Z)().showConfirm,z=(n=(0,r._)(function(e){return(0,l.Jh)(this,function(t){return(0,h.j)(h.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),H((0,i._)({type:"add"},e)),w()===P.Ah.RUNNING&&V("Re-run your Repl to use this secret"),N(),[2]})}),function(e){return n.apply(this,arguments)}),j=(o=(0,r._)(function(e,t){return(0,l.Jh)(this,function(n){return(0,h.j)(h.U3.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),H((0,i._)({type:"update",oldKey:e},t)),[2]})}),function(e,t){return o.apply(this,arguments)}),q=(s=(0,r._)(function(e){return(0,l.Jh)(this,function(t){return(0,h.j)(h.U3.ENV_EDITOR_USED,{action:"deleted"}),H({type:"delete",key:e}),[2]})}),function(e){return s.apply(this,arguments)}),J=(0,d.Z)(function(){return S&&Object.keys(S).length>0},[S]);return S&&L?(0,c.BX)(_.G,{css:[G.l0.flex.column],children:[(0,c.BX)(_.G,{css:er.headerStyle,children:[(0,c.tZ)(x.xv,{css:G.l0.flex.growAndShrink(1),variant:"subheadDefault",multiline:!1,children:"Secrets"}),(0,c.tZ)(Q,{secrets:S,update:(g=(0,r._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return E(e),[4,b(M.Z.serialize(e))];case 1:return t.sent(),[2]}})}),function(e){return g.apply(this,arguments)})}),(0,c.tZ)(m.Z,{iconLeft:(0,c.tZ)(k.Z,{}),href:"https://docs.replit.com/programming-ide/workspace-features/secrets",size:"small",text:"Docs",target:"_blank"}),(0,c.tZ)(p.zx,{iconLeft:(0,c.tZ)(D.Z,{}),text:"New Secret",colorway:"primary",size:"small",onClick:function(){return B(!0)}})]}),(0,c.tZ)(_.G,{css:[G.l0.px(8)],children:(0,c.tZ)(v.R,{})}),0===Object.keys(S).length&&!1===R?(0,c.BX)(_.G,{css:[G.l0.center,G.l0.flex.shrink(1)],children:[(0,c.tZ)(_.G,{css:er.imageHolder,children:(0,c.tZ)(en.Z,{art:"Lock"})}),(0,c.tZ)(x.xv,{variant:"subheadDefault",children:"Store sensitive information securely using Secrets."}),(0,c.tZ)(x.xv,{css:[G.l0.textAlign.center,G.l0.mt(8),G.l0.color],multiline:!1,children:(0,c.tZ)("a",{href:"https://docs.replit.com/programming-ide/workspace-features/secrets#how-replit-keeps-your-secrets-safe",target:"_blank",rel:"noopener",children:"How does Replit keep my Secrets safe?"})})]}):null,(0,c.tZ)(em,{secrets:S,onUpdateSecret:j,onDeleteSecret:q,onAddSecret:z,showAddSecret:R,onClose:N}),Z&&J?(0,c.tZ)(ev,{secrets:S,activeFile:Z}):null]}):(0,c.tZ)(_.G,{css:[G.l0.center,G.l0.coverContainer],children:(0,c.tZ)(I.Z,{size:24})})}},63416:function(e,t,n){n.d(t,{VY:function(){return O},HK:function(){return M},h4:function(){return D},Qc:function(){return G},LI:function(){return N},H4:function(){return X},$E:function(){return U},Mp:function(){return F}});var r=n(27387),i=n(96583),o=n(74985),a=n(43312),l=n(36647),c=n(75993),s=n(36559);function u(){return(u=(0,r._)(function(e,t){var n,r,o,a,l;return(0,i.Jh)(this,function(i){return n=(0,s.yC)(e),r=(0,s.UO)(e),o=new Blob([t.toBuffer()],{type:n}),(a=document.createElement("a")).download=r,l=window.URL.createObjectURL(o),a.href=l,a.style.display="none",document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),URL.revokeObjectURL(l)},1e4),[2]})})).apply(this,arguments)}var d=n(31764),f=n(94778),h=n(4461),p=n(20795),m=n(84126),v=n(38057),g=n(66958),y=n(55821),b=n(72093),w=n(81199),Z=n(85421),x=n.n(Z),C=n(50959),_=n(50745),S=n(58045),k=n(52425),E=n(89748),T=n(37833),R=n(59786),I=(0,a.iv)([b.l0.height(28),b.l0.flex.row,b.l0.align.center,{borderBottom:"1px solid ".concat(b.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function D(e){return"/replEnvironmentDesktop"!==x().pathname?null:(0,o.tZ)(f.G,{css:I,children:e.children})}var B=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.flex.growAndShrink(1),b.l0.overflowX("auto"),b.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function G(e){return(0,o.tZ)(f.G,{css:B,children:e.children})}var A=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.height("100%")]),P=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.height("100%"),b.l0.px(2)]);function N(e){return(0,o.tZ)(f.G,{css:A,children:(0,o.tZ)(f.G,{css:P,children:e.children})})}var L=(0,a.iv)([b.l0.flex.growAndShrink(1),b.l0.position.relative,b.l0.overflow("hidden"),b.l0.borderRadius(0,0,8,8)]);function O(e){return(0,o.tZ)(f.G,{css:[L,e.children&&b.l0.center],children:e.children})}function U(e){return{type:(0,S.Dp)({path:e}),data:{path:e}}}function M(e){var t=e.path,n=e.performPaneOperation,r=e.children,i=(0,C.useCallback)(function(e){n({operation:"replace",pane:U(e)})},[n]);return(0,o.BX)(D,{children:[(0,o.tZ)(G,{children:(0,o.tZ)(T.tr,{path:t,onFileClick:i})}),r?(0,o.tZ)(N,{children:r}):null]})}function X(e,t){return{match:E.pl,data:{label:"Download",icon:(0,o.tZ)(v.Z,{}),type:"action",run:function(){return(0,r._)(function(){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,t.readFile(e)];case 1:if((n=r.sent()).error)return[2,{type:"error",message:"Error downloading file"}];return[4,function(e,t){return u.apply(this,arguments)}(e,n.content)];case 2:return r.sent(),[2]}})})()}}}}function F(e){var t=e.path,n=e.performPaneOperation,a=(0,w.Z)(),s=(0,k._o)(),u=(0,R.P5)({controlName:"flag-draft-buffers"});return(0,l.Z)(function(){if(!t)return null;var e,l,f,v=[{match:E.pl,data:{label:"Copy file path",icon:(0,o.tZ)(p.Z,{}),type:"action",run:function(){(0,c.Z)(t)}}},{match:E.pl,data:{label:"Copy link",icon:(0,o.tZ)(g.Z,{}),type:"action",run:function(){var e=(0,_.dr)({path:t});(0,c.Z)(e)}}},(e=a.fs,l=function(e){n({operation:"replace",pane:{type:(0,S.Dp)({path:e}),data:{path:e}}})},{match:E.pl,data:{label:"Duplicate file",icon:(0,o.tZ)(m.Z,{}),type:"action",run:function(){return(0,r._)(function(){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,d.Z)(t,e)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return l(n),[2]}})})()}}}),X(t,a.fs),{match:E.pl,data:{label:"Delete",icon:(0,o.tZ)(y.Z,{color:b.TV.redDefault}),type:"action",run:function(){s(t)}}}];return u&&v.unshift((f=a.fs,{match:E.pl,data:{label:"Save file",icon:(0,o.tZ)(h.Z,{}),type:"action",run:function(){return(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,f.flush(new Set([t]))];case 1:return e.sent(),[2]}})})()}}})),v},[t,a.fs,n,s,u])}},55236:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(74985),i=n(43312),o=n(11715),a=n(36556),l=n(94778),c=n(72093),s=n(50959),u=n(73372),d=n(65377),f=(0,i.iv)([c.l0.justify.center,c.l0.pl(8),{overflow:"hidden",height:"100%",width:"100%","> svg":{opacity:.5,width:250,display:"flex"}}]);function h(e){var t=e.index,n=32*t+8;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("rect",{x:0,y:n,rx:"3",ry:"3",width:16,height:16}),(0,r.tZ)("rect",{x:28,y:n,rx:"3",ry:"3",width:"".concat(100+(t%2!=0?-10*t:10*t)),height:16})]})}function p(e){var t=e.path,n=t===u.Ql,i=n?5:1;(0,s.useEffect)(function(){var e=a.kg.timeStart({isRootPath:n});return function(){e("time to load filetree folder")}},[n,t]);var c="fileTreeLoader-"+Math.random().toString();return(0,r.tZ)(l.G,{css:f,children:(0,r.tZ)(o.Z,{speed:2,backgroundColor:d.TV.backgroundHighest,foregroundColor:d.TV.backgroundHigher,height:32*i,width:250,viewBox:"0 0 250 ".concat(32*i),uniqueKey:c,children:Array(i).fill(null).map(function(e,t){return(0,r.tZ)(h,{index:t},t)})})})}},10378:function(e,t,n){n.d(t,{st:function(){return y}});var r,i,o=n(41733),a=n(30509),l=n(74985);n(43312),n(12933);var c=n(64586),s=n(59786),u=n(19068),d=n(64479),f=n(82230),h=n(94778),p=n(49580),m=n(72093),v=n(21371),g=n(50959);n(41909),(r=i||(i={})).AddFile="AddFile",r.AddFolder="AddFolder",r.UploadFile="UploadFile",r.UploadFolder="UploadFolder",r.DownloadZip="DownloadZip",r.Duplicate="Duplicate",r.ShowHiddenFiles="ShowHiddenFiles",r.HideHiddenFiles="HideHiddenFiles",r.OpenTab="OpenTab",r.OpenPane="OpenPane",r.CopyLink="CopyLink",r.CopyFilePath="CopyFilePath",r.CopyFolderPath="CopyFolderPath",r.OpenShellHere="OpenShellHere",r.Rename="Rename",r.Download="Download",r.Delete="Delete",r.OpenWith="OpenWith";var y={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload file"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},Delete:{type:"Delete",text:"Delete"}};m.l0.position.relative,m.l0.width(16),m.l0.height(16);var b={self:[m.l0.position.relative,m.l0.width(20),m.l0.height("100%"),m.l0.justify.center,{"& span":{height:"100%"}}],self2:[m.l0.position.relative,m.l0.width(16),m.l0.height("100%"),m.l0.justify.center,m.l0.pr(1)],button:[m.l0.display.flex,m.l0.align.center,m.l0.justify.center,m.l0.py(2),m.l0.top(0),m.l0.width("100%"),m.l0.border({width:0,color:"none"}),m.l0.cursor.pointer,m.l0.color.foregroundDimmest,m.l0.borderRadius(4),u.gU.filled,m.l0.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[m.l0.display.flex,m.l0.align.center,m.l0.py(2),m.l0.width("100%"),m.l0.height("100%"),m.l0.cursor.pointer,m.l0.color.foregroundDimmest,m.l0.focusRing,m.l0.borderRadius(4),{backgroundColor:"transparent",":hover":{color:m.TV.foregroundDefault}}],list:[m.l0.flex.column,m.l0.justify.center,m.l0.borderRadius(8),m.l0.zIndex(1),m.l0.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,t){return[m.l0.color.foregroundDefault,m.l0.p(8),m.l0.fontWeight.normal,m.l0.cursor.pointer,{whiteSpace:"nowrap"},t&&[m.l0.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:m.TV.accentNegativeDefault},":hover .option-label":{color:m.TV.white}}]]},optionLabel:function(e){return e?[m.l0.color.accentNegativeStronger]:[]}};function w(e){var t=e.isNegative,n=e.isHighlighted,r=e.children;return(0,l.tZ)(h.G,{css:b.option(t,n),children:(0,l.tZ)(f.xv,{className:"option-label",css:b.optionLabel(t),multiline:!1,children:r})})}var Z=h.K.ul,x=h.K.li,C=h.K.button,_=h.K.div;g.forwardRef(function(e,t){var n=e.isActive,r=e.actions,i=e.onAction,u=e.onOpenChange,S=(0,g.useRef)(!1),k=(0,v.L7)({items:r,onSelectedItemChange:function(e){var t=e.selectedItem;t&&(S.current||i(t),G())}}),E=k.isOpen,T=k.getToggleButtonProps,R=k.getMenuProps,I=k.highlightedIndex,D=k.getItemProps,B=k.openMenu,G=k.reset;(0,g.useImperativeHandle)(t,function(){return{open:B}}),(0,g.useEffect)(function(){u&&u(E)},[E,u]);var A=T(),P=(0,s.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,l.tZ)(h.G,{css:P?b.self2:b.self,children:(0,l.BX)(c.Z,{elevated:!0,showArrow:!0,isOpen:E,placement:"right-start",padding:0,onClickOutside:G,children:[(0,l.tZ)(d.Tg,{background:n?"default":"root",css:[m.l0.height("100%"),{background:n?m.TV.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,l.tZ)(C,(0,a._)((0,o._)({},A),{css:P?b.button2:b.button,size:20,onClick:function(e){e.stopPropagation(),A.onClick(e)},children:(0,l.tZ)(p.Z,{})}))}),(0,l.tZ)(_,(0,a._)((0,o._)({},R({},{suppressRefError:!0})),{children:E?(0,l.tZ)(Z,{css:b.list,children:r.map(function(e,t){return(0,l.tZ)(x,(0,a._)((0,o._)({"data-cy":"filetree-node-action-".concat(e.type)},D({item:e,index:t,onClick:function(t){S.current=!0,setTimeout(function(){S.current=!1}),i(e),t.stopPropagation()}})),{children:(0,l.tZ)(w,{isHighlighted:I===t,isNegative:e.type===y.Delete.type,children:(0,l.BX)(h.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,l.tZ)(f.xv,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)})}):null}))]})})}).displayName="NodeActionsMenu"},4502:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(74985),i=n(15235),o=n(82230),a=n(94778),l=n(77794),c=n(72093),s=n(36559);function u(e){var t,n=e.paths,u=e.onCancel,d=e.onConfirm;return(0,r.BX)(a.G,{css:[c.l0.colWithGap(24)],children:[(0,r.tZ)(o.h4,{level:1,variant:"headerDefault",children:n.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.BX)(o.xv,{children:[(t=(t=n).map(s.UO)).length<2?t[0]:"".concat(t.slice(0,-1).join(", ")," and ").concat(t.slice(-1))," already"," ",n.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",n.length>1?"them":"it","? This cannot be undone."]}),(0,r.BX)(a.G,{css:[c.l0.rowWithGap(12),c.l0.justify.end],children:[(0,r.tZ)(i.zx,{onClick:function(){return u()},text:"Cancel"}),(0,r.tZ)(i.zx,{colorway:"negative",onClick:function(){return d()},text:"Yes, overwrite ".concat(n.length>1?"these files":"this file"),iconLeft:(0,r.tZ)(l.Z,{})})]})]})}},43208:function(e,t,n){n.d(t,{CN:function(){return o},CT:function(){return i},bO:function(){return a}});var r=n(11407),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.l2)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},33651:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(41733),i=n(60305),o=n(25150);function a(e,t){(0,i.j)(o.U3.GIT_FEATURE_USED,(0,r._)({action:e,source:"git-pane"},t))}},31534:function(e,t,n){n.d(t,{$8:function(){return m},Lr:function(){return w},ST:function(){return p},Zr:function(){return g},kb:function(){return v},po:function(){return h},uJ:function(){return y},yx:function(){return Z}});var r=n(74985),i=n(77865),o=n(82230),a=n(64432),l=n(94778),c=n(49224),s=n(46577),u=n(72093),d=n(36559),f=(0,c.X)({revertText:[u.l0.color.orangeStronger,u.l0.fontWeight.medium],mergeText:[u.l0.color.purpleStronger,u.l0.fontWeight.medium],pullRequestId:[u.l0.fontWeight.medium],hash:[u.l0.fontWeight.medium],filePathPrefix:[u.l0.color.foregroundDimmest],commitBody:[u.l0.font.code,{whiteSpace:"pre-wrap"},{fontSize:u.TV.fontSizeSmall}],clickableName:[u.l0.cursor.pointer,{"&:hover":{textDecoration:"underline"}}],tooltip:[u.l0.display.inlineFlex,u.l0.rowWithGap(4),u.l0.align.center],path:[{fontSize:u.TV.fontSizeSmall},u.l0.font.code],currentBranchIndicator:[u.l0.height(16),u.l0.width(16),u.l0.align.center],currentBranchDot:[u.l0.height(6),u.l0.width(6),u.l0.backgroundColor.accentPrimaryStronger,u.l0.borderRadius("full")],branchNameWrapper:[u.l0.flex.row,u.l0.align.center],fixTooltipDisplay:{"& > span":{display:"inline-block"}},headingWrapper:[u.l0.display.inlineFlex,u.l0.rowWithGap(4),u.l0.align.center,u.l0.flex.shrink(1),u.l0.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},u.l0.mr(4)],headingCurrent:[u.l0.px(4)],current:[u.l0.position.relative,u.l0.top("-1px"),u.l0.display.inlineFlex,u.l0.pl(2),u.l0.pr(8)],icon:[{verticalAlign:"baseline !important"},u.l0.mr(4)],bodyContainer:[u.l0.border({color:u.TV.outlineDimmest,direction:"full"}),u.l0.borderRadius(8),u.l0.p(16)]});function h(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:f.revertText,children:t})}function p(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:f.mergeText,children:t})}function m(e){var t,n=e.id,i=e.hash,o=e.className;return t=void 0===i||i?"string"==typeof n&&n.startsWith("#")?n:"#".concat(n):"string"==typeof n&&n.startsWith("#")?n.slice(1):"".concat(n),(0,r.tZ)("span",{className:o,css:f.pullRequestId,children:t})}function v(e){var t=e.hash,n=e.length,i=e.className;return(0,r.tZ)("span",{className:i,css:f.hash,children:t.slice(0,(void 0===n?8:n)+1)})}function g(e){var t=e.subject,n=e.remoteName,o=e.quoted,a=void 0!==o&&o,l=e.className;return n?(0,r.tZ)(i.ZP,{className:l,background:!1,lineBreaks:!0,themed:!0,useRemarkGfm:!0,remarkGitHubOptions:{repository:n},children:a?'"'.concat(t,'"'):t}):(0,r.tZ)("span",{className:l,children:a?'"'.concat(t,'"'):t})}function y(e){var t=e.body,n=e.view,o=e.className;return"Source"===(void 0===n?"Source":n)?(0,r.tZ)(l.G,{css:f.bodyContainer,children:(0,r.tZ)("pre",{className:o,css:f.commitBody,children:t})}):(0,r.tZ)(l.G,{css:f.bodyContainer,children:(0,r.tZ)(i.ZP,{className:o,background:!1,mentionsLink:!0,lineBreaks:!0,themed:!0,useRemarkGfm:!0,children:t})})}function b(){return(0,r.tZ)("span",{css:f.fixTooltipDisplay,children:(0,r.tZ)(a.u,{tooltip:"This is your current branch",children:(0,r.tZ)(l.G,{css:f.currentBranchIndicator,children:(0,r.tZ)(l.G,{css:f.currentBranchDot})})})})}function w(e){var t=e.name,n=e.remote,i=e.current,a=void 0!==i&&i,l=e.heading,c=void 0!==l&&l,u=e.icon,d=void 0!==u&&u,h=e.onClick,p=e.className,m=null;return(!0===d?m=c?(0,r.tZ)(s.Z,{size:16}):(0,r.tZ)(s.Z,{css:f.icon,size:12}):d&&(m=d),c)?(0,r.BX)("div",{css:f.headingWrapper,children:[m,(0,r.BX)(o.xv,{variant:"subheadDefault",multiline:!1,children:[n?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:f.headingRemote,children:n}),(0,r.tZ)("span",{css:f.headingRemote,children:"/"})]}):null,h?(0,r.tZ)(C,{label:"View branch",onClick:h,children:t}):(0,r.tZ)("span",{children:t})]}),a?(0,r.tZ)("span",{css:c?f.headingCurrent:f.current,children:(0,r.tZ)(b,{})}):null]}):(0,r.BX)("span",{className:p,css:f.branchNameWrapper,children:[m,n?(0,r.BX)("span",{children:[n,"/"]}):null,h?(0,r.tZ)(C,{label:"View branch",onClick:h,children:t}):(0,r.tZ)("span",{children:t}),a?(0,r.tZ)(b,{}):null]})}function Z(e){var t=e.path,n=e.prefix,i=e.onClick,o=e.className,l=(0,d.UO)(t),c=!i&&(l===t||null!==n&&n+l===t);return(0,r.tZ)("span",{css:f.fixTooltipDisplay,children:(0,r.tZ)(a.u,{maxWidth:"auto",tooltip:(0,r.tZ)(x,{path:t,openable:!!i}),isDisabled:c,children:i?(0,r.BX)(C,{label:"Open ".concat(l),onClick:i,className:o,children:[n?(0,r.tZ)("span",{css:f.filePathPrefix,children:n}):null,(0,r.tZ)("span",{children:l})]}):(0,r.BX)("span",{className:o,children:[n?(0,r.tZ)("span",{css:f.filePathPrefix,children:n}):null,(0,r.tZ)("span",{children:l})]})})})}function x(e){var t=e.path,n=e.openable;return(0,r.BX)("span",{css:f.tooltip,children:[void 0===n||n?(0,r.tZ)("span",{children:"Open"}):null,(0,r.tZ)("span",{css:f.path,children:t})]})}function C(e){var t=e.label,n=e.onClick,i=e.className,o=e.children;return(0,r.tZ)("span",{className:i,css:f.clickableName,role:"button",tabIndex:-1,"aria-label":t,onClick:n,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==n||n())},children:o})}},69958:function(e,t,n){n.d(t,{FH:function(){return s},fF:function(){return c}});var r=n(21262),i=n(71440);function o(){var e=(0,r._)(["\n  fragment HandleReplRedirectionReplRedirect on ReplRedirect {\n    replUrl\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment HandleReplRedirectionSubscriptionExpired on SubscriptionExpiredError {\n    isOwner\n    replId\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment HandleReplRedirectionRepl on Repl {\n    id\n    language\n  }\n"]);return l=function(){return e},e}var c=(0,i.Ps)(o()),s=(0,i.Ps)(a());l()},29437:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(74985),i=n(41876),o=n(99450),a=n(85421),l=n(50959),c=n(93680);function s(e,t){return!!e&&("ReplRedirect"===e.__typename||"SubscriptionExpiredError"===e.__typename||!(0,o.FJ)(t.query.skipNixMigration,"boolean")&&(0,c.O)(e))}function u(e){var t,n=e.replResponse,o=e.replUrl,c=e.children,u=(0,a.useRouter)();return((0,l.useEffect)(function(){if(s(n,u)){if("SubscriptionExpiredError"===n.__typename){var e=n.replId,t=n.isOwner,r=o.split("/")[1].slice(1);u.replace({pathname:"/expiredPrivateRepl",query:{isOwner:t,ownerUsername:r,replId:e}},u.asPath);return}if("ReplRedirect"===n.__typename){window.location.href=n.replUrl;return}window.location.reload()}},[n,u,o]),s(n,u))?(t="ReplRedirect"===n.__typename?"Repl moved, redirecting":"SubscriptionExpiredError"===n.__typename?"Subscription expired, redirecting":"Your Repl requires an upgrade, please wait",(0,r.tZ)(i.Z,{reason:t})):(0,r.tZ)(r.HY,{children:c})}},35068:function(e,t,n){n.d(t,{s:function(){return p}});var r=n(42516),i=n(74985),o=n(49224),a=n(72093),l=n(80003),c=n(33298),s=n(94778),u=(0,c.$)(["fontSize"]),d=u.cssVars,f=u.styleTokens,h=(0,o.X)({button:[a.l0.reset.button,a.l0.flex.row,a.l0.align.center,a.l0.cursor.pointer,a.l0.hover({opacity:1}),{opacity:.6,fontFamily:a.TV.fontFamilyDefault,"*":{fontSize:f.fontSize,borderColor:a.TV.foregroundDimmest,color:a.TV.foregroundDimmest},":hover *":{borderColor:a.TV.foregroundDefault,color:a.TV.foregroundDefault}}],keyCombo:[a.l0.justify.center,{marginLeft:"calc(".concat(f.fontSize," * 0.3)")}]});function p(e){return(0,i.BX)(s.G,{className:e.className,tag:"button",css:h.button,style:(0,r._)({},d.fontSize,e.fontSize+"px"),onClick:e.onClick,children:[(0,i.tZ)(s.G,{children:e.text}),e.keyCombo?(0,i.tZ)(s.G,{css:h.keyCombo,children:(0,i.tZ)(l.bM,{fontSize:.8*e.fontSize,keyCombo:e.keyCombo})}):null]})}},96264:function(e,t,n){n.d(t,{Ai:function(){return g},BI:function(){return u},Jp:function(){return d},_H:function(){return f},_Z:function(){return v},bA:function(){return m},ox:function(){return y}});var r=n(41733),i=n(30509),o=n(36647),a=n(39460),l=n(42650),c=n(50959),s=n(48376),u=(0,s.u)(function(){return null}),d=(0,s.u)(function(){return null});function f(e){var t=d.current();(0,c.useEffect)(function(){e!==t&&d.set(function(){return e})},[e,t])}var h=(0,l.cn)(null),p=(0,l.cn)(null,function(e,t,n){var o,a,l=e(h),c=l?(0,r._)({},l,n):(0,r._)({},n),s=null==c?void 0:c.changes,d=null==c?void 0:c.filePath;if(!d||!s)throw Error('"filePath", "changes", "users" required when initializing history state');var f=(a=(o=(0,i._)((0,r._)({},c),{changes:s,filePath:d})).changes.length,(0,r._)({users:{},count:a,version:Math.max(0,a-1),playing:!1,comparing:!1},o));u.set(function(){return f});var p=f.changes.length;if(0===p){t(h,f);return}(null==l?void 0:l.changes)&&f.changes!==l.changes&&(f.count=p,f.version=Math.min(f.version,p-1),f.playing=!1,f.comparing=!1),f.version===p-1&&(f.playing=!1),t(h,f)});function m(){return(0,a.Dv)(h,{store:b()})}function v(){return(0,a.b9)(p,{store:b()})}function g(){return(0,a.b9)((0,o.Z)(function(){return(0,l.cn)(null,function(e,t){t(h,null)})},[]),{store:b()})}var y=(0,c.createContext)(null);function b(){var e=(0,c.useContext)(y);if(!e)throw Error("Expected store in context");return e}},76820:function(e,t,n){var r=n(74985),i=n(15235),o=n(45271),a=n(82230),l=n(94778),c=n(49224),s=n(90733),u=n(72093),d=n(85421),f=(0,c.X)({root:[u.l0.colWithGap(32)],header:[u.l0.rowWithGap(16),u.l0.align.center],icon:[u.l0.color.orangeStrongest],body:[u.l0.pr(32),u.l0.colWithGap(16)],list:[u.l0.colWithGap(16),u.l0.pl(16)],buttons:[u.l0.rowWithGap(16),u.l0.justify.end]});t.Z=function(e){var t=e.isOpen,n=(0,d.useRouter)();return(0,r.tZ)(o.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:f.root,children:[(0,r.BX)(l.G,{css:f.header,children:[(0,r.tZ)(s.Z,{size:24,css:f.icon}),(0,r.tZ)(a.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You can’t join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:f.body,children:[(0,r.tZ)(a.xv,{children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:f.list,children:[(0,r.tZ)(a.xv,{multiline:!1,children:"• Exit Firewall Mode."}),(0,r.tZ)(a.xv,{multiline:!1,children:"• Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:f.buttons,children:[(0,r.tZ)(i.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(n.asPath)}}),(0,r.tZ)(i.zx,{text:"Leave",onClick:function(){n.push("/home","~/")}})]})]})})}},5010:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(74985),i=n(39271),o=n(15235),a=n(45271),l=n(82230),c=n(64432),s=n(94778),u=n(49224),d=n(11721),f=n(72093),h=n(47336),p=n.n(h),m=n(85421),v=n(41733),g=n(21262),y=n(71440),b=n(58995);function w(){var e=(0,g._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return w=function(){return e},e}var Z={},x=(0,y.Ps)(w()),C=(0,u.X)({root:[f.l0.colWithGap(32)],header:[f.l0.rowWithGap(16),f.l0.align.center],body:[f.l0.colWithGap(16)],staffHelpers:[f.l0.colWithGap(8),f.l0.border({color:"var(--accent-negative-default)",width:1,style:"solid"}),f.l0.overflow("hidden")],buttons:[f.l0.rowWithGap(16),f.l0.justify.end]}),_=function(e){var t,n,u=e.isOpen,h=(0,m.useRouter)(),g=(t=(0,v._)({},Z,{skip:!u}),b.a(x,t)).data,y=(0,i.Z)(),w=null==g?void 0:null===(n=g.currentUser)||void 0===n?void 0:n.isStaff;return(0,r.tZ)(a.u,{preventClose:!0,isOpen:u,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(s.G,{css:C.root,children:[(0,r.tZ)(s.G,{css:C.header,children:(0,r.tZ)(l.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You can’t run this Repl right now."})}),(0,r.BX)(s.G,{css:C.body,children:[(0,r.BX)(l.xv,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.tZ)(p(),{legacyBehavior:!0,href:"/site/terms",children:"Terms of Service"}),"."]}),(0,r.tZ)(l.xv,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),w?(0,r.BX)(s.G,{css:C.staffHelpers,children:[(0,r.BX)(s.G,{css:f.l0.rowWithGap(8),children:[(0,r.tZ)(c.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)(l.h4,{level:3,children:"Debug Info"})]}),(0,r.tZ)(s.G,{children:(0,r.BX)(l.xv,{children:["Repl ID ",y," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.tZ)(s.G,{children:(0,r.BX)(l.xv,{multiline:!1,children:[(0,r.tZ)(p(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(y),children:"All datadog logs"})," ","•"," ",(0,r.tZ)(p(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(y,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.BX)(s.G,{css:C.buttons,children:[(0,r.tZ)(o.zx,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.tZ)(o.zx,{text:"Leave",onClick:function(){h.push("/home","~/")}})]})]})})}},52623:function(e,t,n){var r=n(74985),i=n(57967),o=n(38753),a=n(15235),l=n(45271),c=n(82230),s=n(94778),u=n(49224),d=n(40509),f=n(72093),h=n(85421),p=(0,u.X)({root:[f.l0.colWithGap(16)],header:[f.l0.rowWithGap(16),f.l0.align.center],body:[f.l0.pr(32),f.l0.colWithGap(16)],buttonRow:[f.l0.rowWithGap(16)],button:[f.l0.flex.growAndShrink(1)]});t.Z=function(e){var t=e.isOpen,n=(0,h.useRouter)(),u=(0,o.Gv)(n),f=(0,i.Z)();return(0,r.tZ)(l.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(s.G,{css:p.root,children:[(0,r.BX)(s.G,{css:p.header,children:[(0,r.tZ)(d.Z,{size:24}),(0,r.tZ)(c.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"Please Refresh"})]}),(0,r.BX)(s.G,{css:p.body,children:[(0,r.tZ)(c.xv,{children:"Your connection to this Repl has been temporarily interrupted. Usually this is because of a network issue. Please refresh."}),u?(0,r.tZ)(c.xv,{children:"If the issue continues please logout and re-login."}):null]}),(0,r.BX)(s.G,{css:p.buttonRow,children:[u||f?null:(0,r.tZ)(a.zx,{css:p.button,text:"Leave",onClick:function(){n.push("/home","~/")}}),(0,r.tZ)(a.zx,{text:"Refresh",colorway:"primary",css:p.button,onClick:function(){window.location.reload()}})]})]})})}},79556:function(e,t,n){n.d(t,{h:function(){return k},w:function(){return _}});var r=n(41733),i=n(30509),o=n(74985),a=n(36647),l=n(46026),c=n(18060),s=n(50959),u=n(41974),d=n(42650),f=n(66626),h=n(39460);function p(){return(0,f._)((0,s.useState)(function(){return(0,d.MT)()}),1)[0]}var m=(0,s.createContext)(null),v=function(e){return(0,h.b9)(e,{store:function(){var e=(0,s.useContext)(m);if(!e)throw Error("Expected store in context");return e}()})},g=(0,d.cn)(-1),y=(0,d.cn)([]),b=(0,d.cn)(void 0),w=(0,d.cn)(null,function(e,t,n){var r=e(b);switch(r&&(clearTimeout(r.id),r.cb()),n){case"forward":t(g,function(t){return Math.min(e(y).length,t+1)});break;case"backward":t(g,function(e){return Math.max(0,e-1)})}var i=e(y),o=e(g);return o>=i.length?"":i[o]}),Z=(0,d.cn)(null,function(e,t,n){clearTimeout(null===(r=e(b))||void 0===r?void 0:r.id);var r,i=function(){if(n.length>0){var r=!1;t(y,function(t){return(0,u.Uy)(t,function(t){if(n!==t[e(g)])for(r=!0,t.push(n);t.length>20;)t.shift()})}),r&&t(g,e(y).length-1)}t(b,void 0)};t(b,{id:setTimeout(i,2e3),cb:i})});function x(e){var t,n=v(Z),o=(t=v(w),{forward:(0,a.Z)(function(){return function(){return t("forward")}},[t]),backward:(0,a.Z)(function(){return function(){return t("backward")}},[t])}),c=o.forward,u=o.backward,d=(0,s.useRef)(e.value);return(0,s.useEffect)(function(){e.value!==(null==d?void 0:d.current)&&(e.value&&n(e.value),d.current=e.value)},[n,e.value]),(0,i._)((0,r._)({},e),{onKeyDown:(0,a.Z)(function(){return function(t){if(t.shiftKey||(0,l.jh)(t)){null===(r=e.onKeyDown)||void 0===r||r.call(e,t);return}var n,r,i=t.currentTarget,o=!!i.value.match(/\n/);if("ArrowUp"===t.key){if(o&&i.selectionStart&&i.selectionStart>0)return;e.onChange(u()),t.preventDefault(),t.stopPropagation();return}if("ArrowDown"===t.key){if(o&&i.selectionEnd&&i.selectionEnd<i.value.length)return;e.onChange(c()),t.preventDefault(),t.stopPropagation();return}null===(n=e.onKeyDown)||void 0===n||n.call(e,t)}},[u,c,e]),onChange:(0,a.Z)(function(){return function(t){e.onChange(t.target.value)}},[e])})}var C=s.forwardRef(function(e,t){var n=x(e);return(0,o.tZ)(c.B,(0,r._)({ref:t},n))}),_=s.forwardRef(function(e,t){var n=p();return(0,o.tZ)(m.Provider,{value:n,children:(0,o.tZ)(C,(0,r._)({ref:t},e))})}),S=s.forwardRef(function(e,t){var n=x(e);return(0,o.tZ)(c.II,(0,r._)({ref:t},e,n))}),k=s.forwardRef(function(e,t){var n=p();return(0,o.tZ)(m.Provider,{value:n,children:(0,o.tZ)(S,(0,r._)({ref:t},e))})})},60433:function(e,t,n){n.d(t,{m:function(){return v}});var r=n(74985),i=n(43312),o=n(64432),a=n(94778),l=n(49224),c=n(81727),s=n(81836),u=n(1947),d=n(72093),f=n(63466),h=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),p=(0,l.X)({root:[d.l0.height(20),d.l0.width(20),d.l0.center]}),m=(0,l.X)({root:[p.root],pulseRoot:[p.root,{animation:"".concat(h," 2s infinite")}]});function v(){var e=(0,f.Z)(),t=e.isSaving;return e.isOffline?(0,r.tZ)(o.u,{tooltip:"Reconnecting, changes will be synced when you’re online",placement:"right",children:(0,r.tZ)(a.G,{css:m.root,children:(0,r.tZ)(c.Z,{size:16,color:d.TV.redDefault})})}):t?(0,r.tZ)(o.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(a.G,{css:m.pulseRoot,children:(0,r.tZ)(s.Z,{size:16,color:d.TV.foregroundDimmest})})}):(0,r.tZ)(o.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(a.G,{css:m.root,children:(0,r.tZ)(u.Z,{size:16,color:d.TV.foregroundDimmest})})})}},93213:function(e,t,n){n.d(t,{X2:function(){return d},iA:function(){return h},sg:function(){return f}});var r=n(41733),i=n(30509),o=n(98924),a=n(74985),l=n(94778),c=n(49224),s=n(72093);n(50959);var u=(0,c.X)({table:{},tableRow:[s.l0.rowWithGap(12),s.l0.align.center,s.l0.border({direction:"bottom"}),{"box-sizing":"border-box"}],wrapper:[s.l0.rowWithGap(0)],column:[s.l0.display.flex,s.l0.colWithGap(0),s.l0.justify.center,s.l0.border({direction:"right"}),{":last-child":{borderRight:0}}],header:[s.l0.colWithGap(0),s.l0.justify.center],cell:[s.l0.rowWithGap(0),s.l0.align.center,s.l0.color.foregroundDimmest,s.l0.justify.spaceBetween,s.l0.fontSize("small"),s.l0.px(4),s.l0.py(2)],responsiveWrapper:[],responsiveColumn:[]}),d=function(e){var t=e.children,n=(0,o._)(e,["children"]);return(0,a.tZ)("tr",(0,i._)((0,r._)({css:u.tableRow},n),{children:(0,a.tZ)(l.G,{css:u.wrapper,children:t})}))},f=function(e){var t=e.header,n=e.width,r=e.last,i=e.children,o={};return n&&(o.width=n),r&&(o.marginLeft="auto"),(0,a.tZ)("td",{css:void 0!==t&&t?u.header:u.column,style:o,children:(0,a.tZ)(l.G,{css:u.cell,children:i})})},h=function(e){var t=e.children;return(0,a.tZ)("table",{css:u.table,children:t})}},90188:function(e,t,n){n.d(t,{I:function(){return u}});var r=n(41733),i=n(30509),o=n(59786),a=n(91175),l=n(42385),c=n(50959),s={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function u(){var e=(0,l.T)(),t=(0,a.T)(),n=(0,o.P5)({controlName:"flag-system-dependencies-search"});return{configs:(0,c.useMemo)(function(){var o=(null==e?void 0:e.packagers)||[],a=(null==o?void 0:o.map(function(e){var t,n;return(0,i._)((0,r._)({},e),{title:e.language,packagerFiles:(null===(t=e.packagerFiles)||void 0===t?void 0:t.length)?e.packagerFiles:null!==(n=s[e.language])&&void 0!==n?n:[]})}))||[];return t&&a.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),a.push({id:"nix",title:"system",name:"System Dependencies",language:"nix",packageSearch:n,guessImports:!1,packagerFiles:["replit.nix"]}),a},[e,t,n]),loading:!e}}},82877:function(e,t,n){n.d(t,{C:function(){return p}});var r,i,o,a=n(27387),l=n(42516),c=n(96583),s="index.html",u=/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/([^/]+)\/([^/]+)\/.+.js"><\/script>$/,d=(r={name:"html",getInstalledPackages:function(e){var t=e.services.fs;return(0,a._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,t.stat(s)];case 1:var n;if(!e.sent().exists)return[2,[]];return[2,new Promise((n=(0,a._)(function(e){var n;return(0,c.Jh)(this,function(r){return n=t.watchTextFile(s,{onReady:function(t){var r=t.initialContent,i=[],o=!0,a=!1,l=void 0;try{for(var c,s=r.split("\n")[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value.match(u);d&&i.push({name:d[1],version:d[2]})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}n(),e(i)},onError:function(){n(),e([])}}),[2]})}),function(e){return n.apply(this,arguments)}))]}})})()},getPackageInfo:function(e){var t=e.name;return(0,a._)(function(){var e,n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=r.sent()).ok)return[2,void 0];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.json()];case 3:if(n=r.sent())return[2,{name:n.name,version:n.version,description:n.description,homepageURL:n.link,sourceCodeURL:n.include}];return[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}})})()},search:function(e){var t=e.query;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=n.sent()).ok)return[2,[]];return[4,e.json()];case 2:return[2,n.sent().map(function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}})]}})})()}},(0,l._)(r,"install",function(e){var t=e.pkgs,n=e.services.fs;return(0,a._)(function(){var e,r,i,o,l,u,d;return(0,c.Jh)(this,function(f){switch(f.label){case 0:return[4,n.stat(s)];case 1:if(!f.sent().exists)return[2];e=!0,r=!1,i=void 0,f.label=2;case 2:f.trys.push([2,7,8,9]),o=function(){var e;return(0,c.Jh)(this,function(t){switch(t.label){case 0:var r;return e=u.value,[4,new Promise((r=(0,a._)(function(t){var r;return(0,c.Jh)(this,function(i){return r=n.watchTextFile(s,{onReady:function(i){var o=i.initialContent,l=i.writeChange;return(0,a._)(function(){var i,a;return(0,c.Jh)(this,function(c){switch(c.label){case 0:i='<script src="'.concat(e.sourceCodeURL,'"></script>\n'),-1===(a=o.indexOf("<script"))&&(a=o.indexOf("</body>")),-1===a&&(a=o.length),l({from:a,insert:i}),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,n.flush()];case 2:case 3:return c.sent(),[3,5];case 4:return r(),t(),[7];case 5:return[2]}})})()},onError:function(){r(),t()}}),[2]})}),function(e){return r.apply(this,arguments)}))];case 1:return t.sent(),[2]}})},l=t[Symbol.iterator](),f.label=3;case 3:if(e=(u=l.next()).done)return[3,6];return[5,(0,c.XA)(o())];case 4:f.sent(),f.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return d=f.sent(),r=!0,i=d,[3,9];case 8:try{e||null==l.return||l.return()}finally{if(r)throw i}return[7];case 9:return[2]}})})()}),(0,l._)(r,"uninstall",function(e){var t=e.pkgs,n=e.services.fs;return(0,a._)(function(){var e,r,i,o,l,d,f;return(0,c.Jh)(this,function(h){switch(h.label){case 0:return[4,n.stat(s)];case 1:if(!h.sent().exists)return[2];e=!0,r=!1,i=void 0,h.label=2;case 2:h.trys.push([2,7,8,9]),o=function(){var e;return(0,c.Jh)(this,function(t){switch(t.label){case 0:var r;return e=d.value,[4,new Promise((r=(0,a._)(function(t){var r;return(0,c.Jh)(this,function(i){return r=n.watchTextFile(s,{onReady:function(i){var o=i.initialContent,l=i.writeChange;return(0,a._)(function(){var i,a,s,d,f,h,p,m,v;return(0,c.Jh)(this,function(c){switch(c.label){case 0:i=0,a=!0,s=!1,d=void 0;try{for(f=o.split("\n")[Symbol.iterator]();!(a=(h=f.next()).done);a=!0)(m=(p=h.value).match(u))&&(v=m[1],e.name===v&&l({from:i,to:i+p.length+1})),i+=p.length+1}catch(e){s=!0,d=e}finally{try{a||null==f.return||f.return()}finally{if(s)throw d}}c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,n.flush()];case 2:case 3:return c.sent(),[3,5];case 4:return r(),t(),[7];case 5:return[2]}})})()},onError:function(){r(),t()}}),[2]})}),function(e){return r.apply(this,arguments)}))];case 1:return t.sent(),[2]}})},l=t[Symbol.iterator](),h.label=3;case 3:if(e=(d=l.next()).done)return[3,6];return[5,(0,c.XA)(o())];case 4:h.sent(),h.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return f=h.sent(),r=!0,i=f,[3,9];case 8:try{e||null==l.return||l.return()}finally{if(r)throw i}return[7];case 9:return[2]}})})()}),r),f=(i={name:"upm",getInstalledPackages:function(e){var t=e.id,n=e.services.packager;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return[4,n.listSpecfile(t)];case 1:if((e=r.sent()).error||null===e.packages)return[2,[]];return[2,e.packages]}})})()}},(0,l._)(i,"getPackageInfo",function(e){var t=e.id,n=e.name,r=e.services.packager;return(0,a._)(function(){return(0,c.Jh)(this,function(e){return[2,r.fetchPackageInfo(n,t)]})})()}),(0,l._)(i,"search",function(e){var t=e.id,n=e.query,r=e.services.packager;return(0,a._)(function(){return(0,c.Jh)(this,function(e){return[2,r.searchPackages(n,t)]})})()}),(0,l._)(i,"install",function(e){var t=e.id,n=e.pkgs,r=e.services.packager;return(0,a._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,r.addPackages(n,t)];case 1:if(!e.sent())throw Error("Package install failed");return[2]}})})()}),(0,l._)(i,"uninstall",function(e){var t=e.id,n=e.pkgs,r=e.services.packager;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return e=n.filter(function(e){return e.name}).map(function(e){return e.name}),[4,r.removePackages(e,t)];case 1:if(!i.sent())throw Error("Package uninstall failed");return[2]}})})()}),i),h=(o={name:"nix",getInstalledPackages:function(e){var t=e.services.nixService;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,t.listPackages()];case 1:if(null!==(e=n.sent()).error)return[2,[]];return[2,e.packages.filter(function(e){return!!e.name}).map(function(e){return{name:e.name,version:e.version}})]}})})()}},(0,l._)(o,"getPackageInfo",function(e){var t=e.name,n=e.services.nixService;return(0,a._)(function(){var e,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return e=t.replace(/^pkgs\./,""),[4,n.packageInfo(e)];case 1:if(null!==(r=i.sent()).error)return[2,{}];return[2,r.package]}})})()}),(0,l._)(o,"search",function(e){var t=e.query,n=e.services.nixService,r=e.nixOpts;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return[4,n.searchPackages(t,r)];case 1:if(null!==(e=i.sent()).error)throw Error("Could not search Nix packages");return[2,e.packages.map(function(e){var t,n;return{name:e.name,version:e.version,description:e.description,homepageURL:null!==(t=e.homepageURL[0])&&void 0!==t?t:null,license:null!==(n=e.licenses[0])&&void 0!==n?n:null}})]}})})()}),(0,l._)(o,"install",function(e){var t=e.pkgs,n=e.services.nixService;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return e=t.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,n.addPackages(e)];case 1:return r.sent(),[2]}})})()}),(0,l._)(o,"uninstall",function(e){var t=e.pkgs,n=e.services.nixService;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return e=t.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,n.removePackages(e)];case 1:return r.sent(),[2]}})})()}),o);function p(e){switch(e){case"html":return d;case"nix":return h;default:return f}}},70884:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(27387),i=n(96583),o=n(74985),a=n(69170),l=n(60305),c=n(81199),s=n(86763),u=n.n(s),d=n(50959),f=n(90188),h=n(82877),p=n(27482);function m(){var e=(0,c.Z)(),t=(0,p.Hg)(p.NC),n=(0,p.Hg)(p.w$),o=(0,p.XD)(p.w$),s=(0,p.$X)(p.w$),m=(0,p.Hg)(p.vO),v=(0,p.Mi)(),g=(0,p.Zq)(),y=(0,p.OO)(),b=(0,p.np)(),w=(0,a.Z)(),Z=(0,f.I)().configs,x=(0,p.T9)();return(0,d.useEffect)(function(){if(0!==Z.length){var t=[],n=!1,r=!0,i=!1,a=void 0;try{for(var l,c=Z[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)!function(){var r=l.value,i=Promise.resolve(),a=g(r.id),c=u()(function(){var t=g(r.id),a=o();if(t===p.C0.Idle||(null==a?void 0:a.id)!==r.id){var l=(0,h.C)(r.id);i=i.then(function(){if(!n)return l.getInstalledPackages({id:r.id,services:e}).then(function(e){n||(y(r.id,e),v(r.id,p.C0.Idle))})})}},500);if(r.packagerFiles.length>0){var s=!0,d=!1,f=void 0;try{for(var m,b=r.packagerFiles[Symbol.iterator]();!(s=(m=b.next()).done);s=!0)!function(){var n=m.value;if(!n.endsWith("/")){var r=null!==a&&a!==p.C0.Initializing&&a!==p.C0.Uninitialized,i=e.fs.watchFilePath(n,{onChange:function(){if(!r){r=!0;return}c()}});t.push(i)}}()}catch(e){d=!0,f=e}finally{try{s||null==b.return||b.return()}finally{if(d)throw f}}}}()}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return function(){n=!0;var e=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0)(0,o.value)()}catch(e){r=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}}}},[Z,e.fs]),(0,d.useEffect)(function(){var t,n=!1;return(t=(0,r._)(function(){var t,r,o,a,l,c;return(0,i.Jh)(this,function(i){t=!0,r=!1,o=void 0;try{for(a=function(){var t=c.value,r=g(t.id);if(r&&r!==p.C0.Uninitialized&&r!==p.C0.Initializing)return"continue";v(t.id,p.C0.Initializing),(0,h.C)(t.id).getInstalledPackages({id:t.id,services:e}).then(function(e){n||(y(t.id,e),v(t.id,p.C0.Idle))})},l=Z[Symbol.iterator]();!(t=(c=l.next()).done);t=!0)a()}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return[2]})}),function(){return t.apply(this,arguments)})(),function(){n=!0}},[Z]),(0,d.useEffect)(function(){if(null===n&&0!==t.length){var e=t[0];g(e.id)===p.C0.Idle&&b(e)}},[m,n,t]),(0,d.useEffect)(function(){if(null!==n){var t,o=!1;return(t=(0,r._)(function(){var t,r,a,c,u,d,f,m,g,b,Z,C,_,S,k,E,T,R;return(0,i.Jh)(this,function(i){switch(i.label){case 0:switch(t=(0,h.C)(n.id),n.kind){case p.TH.Install:return[3,1];case p.TH.Uninstall:return[3,6]}return[3,11];case 1:v(n.id,p.C0.Installing),r=!0,a=!1,c=void 0;try{for(u=n.pkgs[Symbol.iterator]();!(r=(d=u.next()).done);r=!0)f=d.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:f.name})}catch(e){a=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw c}}i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.install({id:n.id,pkgs:n.pkgs,services:e})];case 3:return i.sent(),1===n.pkgs.length?w.showNotice("Installed ".concat(null!==(m=n.pkgs[0].name)&&void 0!==m?m:"package")):w.showNotice("Installed ".concat(n.pkgs.length," packages")),[3,5];case 4:return i.sent(),1===n.pkgs.length?w.showError("Failed to install ".concat(null!==(g=n.pkgs[0].name)&&void 0!==g?g:"package")):w.showError("Failed to install ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,5];case 5:return[3,11];case 6:v(n.id,p.C0.Uninstalling),b=!0,Z=!1,C=void 0;try{for(_=n.pkgs[Symbol.iterator]();!(b=(S=_.next()).done);b=!0)k=S.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:k.name})}catch(e){Z=!0,C=e}finally{try{b||null==_.return||_.return()}finally{if(Z)throw C}}i.label=7;case 7:return i.trys.push([7,9,,10]),[4,t.uninstall({id:n.id,pkgs:n.pkgs,services:e})];case 8:return i.sent(),1===n.pkgs.length?w.showNotice("Removed ".concat(null!==(E=n.pkgs[0].name)&&void 0!==E?E:"package")):w.showNotice("Removed ".concat(n.pkgs.length," packages")),[3,10];case 9:return i.sent(),1===n.pkgs.length?w.showError("Failed to remove ".concat(null!==(T=n.pkgs[0].name)&&void 0!==T?T:"package")):w.showError("Failed to remove ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,10];case 10:return[3,11];case 11:if(o)return[2];return[4,t.getInstalledPackages({id:n.id,services:e})];case 12:if(R=i.sent(),o)return[2];return y(n.id,R),v(n.id,p.C0.Idle),s(null),[2]}})}),function(){return t.apply(this,arguments)})(),function(){o=!0}}},[n]),null}function v(e){var t=e.children,n=(0,p.ns)();return(0,o.BX)(p.vN.Provider,{value:n,children:[(0,o.tZ)(m,{}),t]})}},27482:function(e,t,n){n.d(t,{$X:function(){return w},$z:function(){return T},B2:function(){return B},C0:function(){return o},Hg:function(){return x},Mi:function(){return I},NC:function(){return G},OO:function(){return O},T9:function(){return S},TH:function(){return a},Wx:function(){return F},XD:function(){return Z},Zq:function(){return R},cW:function(){return A},jh:function(){return M},np:function(){return H},ns:function(){return g},pN:function(){return _},te:function(){return N},vN:function(){return y},vO:function(){return E},w$:function(){return D},wY:function(){return k},z9:function(){return L},zi:function(){return z}});var r,i,o,a,l=n(42516),c=n(41733),s=n(30509),u=n(66626),d=n(78950),f=n(41974),h=n(42650),p=n(39460),m=n(37697),v=n(50959);function g(){return(0,u._)((0,v.useState)(function(){return(0,h.MT)()}),1)[0]}(0,h.cn)({replId:"",packageManagers:{}}),(r=o||(o={})).Uninitialized="Uninitialized",r.Initializing="Initializing",r.Installing="Installing",r.Uninstalling="Uninstalling",r.Idle="Idle",(i=a||(a={})).Install="Install",i.Uninstall="Uninstall";var y=(0,v.createContext)(null);function b(){var e=(0,v.useContext)(y);if(!e)throw Error("Expected store in context");return e}var w=function(e){return(0,p.b9)(e,{store:b()})};function Z(e){return(0,m.lV)((0,v.useCallback)(function(t){return t(e)},[e]),{store:b()})}function x(e){return(0,p.Dv)(e,{store:b()})}(0,h.cn)(null),(0,h.cn)(null);var C=(0,h.cn)({});function _(e){var t,n=x(C);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function S(){var e=w(C);return function(t,n){e(function(e){return(0,f.Uy)(e,function(e){var r=e[t];if(!r||0===r.length){e[t]=n;return}var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var e=l.value;r.find(function(t){return t.name===e.name})||r.push(e)}()}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})})}}function k(){var e=w(C);return function(t,n){e(function(e){return(0,f.Uy)(e,function(e){var r=e[t];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var e=l.value,t=r.findIndex(function(t){return t.name===e.name});-1!==t&&r.splice(t,1)}()}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}})})}}var E=(0,h.cn)({});function T(e){var t,n=x(E);return e&&null!==(t=n[e])&&void 0!==t?t:null}function R(){var e=Z(E);return function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null}}function I(){var e=w(E);return function(t,n){e(function(e){return(0,s._)((0,c._)({},e),(0,l._)({},t,n))})}}var D=(0,h.cn)(null);function B(){return x(D)}var G=(0,h.cn)([]);function A(){return x(G)}var P=(0,h.cn)({});function N(e){var t,n=x(P);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function L(){var e=Z(P);return function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:[]}}function O(){var e=w(P);return function(t,n){e(function(e){return(0,s._)((0,c._)({},e),(0,l._)({},t,n))})}}var U=(0,h.cn)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(G,function(e){return(0,f.Uy)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Install"===e.kind});t?t.pkgs.push(i):e.push({kind:"Install",id:r,pkgs:[i]})}})})});function M(){return w(U)}var X=(0,h.cn)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(G,function(e){return(0,f.Uy)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Uninstall"===e.kind});t?t.pkgs.push(i):e.push({kind:"Uninstall",id:r,pkgs:[i]})}})})});function F(){return w(X)}(0,h.cn)(null);var W=(0,h.cn)(null,function(e,t,n){var r=(0,d._)(e(G)),i=r[0],o=r.slice(1);n===i&&(t(G,o),t(D,n))});function H(){return w(W)}var V=(0,h.cn)(null,function(e,t,n){t(G,function(e){return(0,f.Uy)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.pkgs.findIndex(function(e){return e.name===n});-1!==c&&l.pkgs.splice(c,1)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})});function z(){return w(V)}},54635:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(63257),i=n(74985),o=n(26087),a=n.n(o),l=n(39743);function c(e){var t=e.replTitle,n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r._)(t.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.ex)(),t);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:n},"title")})}},4723:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(74985),i=n(94778),o=n(49224),a=n(29318),l=n(72093),c=(0,o.X)({root:[l.l0.coverContainer,l.l0.center]});function s(){return(0,r.tZ)(i.G,{css:c.root,children:(0,r.tZ)(a.Z,{size:32})})}},73210:function(e,t,n){n.d(t,{ms:function(){return I}});var r=n(66626),i=n(74985),o=n(32622),a=n(15235),l=n(85763),c=n(82230),s=n(94778),u=n(49224),d=n(64318),f=n(15434),h=n(72093),p=n(70316),m=n(39475),v=n(50959),g=n(96955),y=n(10118),b=n(80487),w=n(17519),Z=(0,u.X)({wrapper:[h.l0.py(6),h.l0.flex.row,h.l0.align.center,h.l0.backgroundColor.backgroundHigher],wrapperWarning:[h.l0.py(6),h.l0.flex.row,h.l0.align.center,h.l0.backgroundColor.orangeDimmest],body:[h.l0.flex.growAndShrink(1)],firstLine:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden")],secondLine:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden"),h.l0.color.foregroundDimmest],secondLineWarning:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden"),h.l0.color.orangeStrongest],buttons:[h.l0.flex.row,h.l0.pr(6)],verticalDivider:[h.l0.ml(6),h.l0.mr(6),h.l0.height("1em"),h.l0.width(1),h.l0.backgroundColor.foregroundDefault]});function x(e){var t=e.openNetworkingTool,n=e.onClose,r=e.onDontExposePort,o=e.onDoExposePort,a=e.firstLine,c=e.secondLine,u=e.renderSecondLine,h=e.renderDontExposeButton,p=e.renderDoExposeButton,m=e.isWarning,v=void 0!==m&&m;return(0,i.BX)(s.G,{css:v?Z.wrapperWarning:Z.wrapper,children:[(0,i.BX)(s.G,{css:Z.body,children:[(0,i.tZ)(s.G,{css:Z.firstLine,children:a}),u?(0,i.tZ)(s.G,{css:v?Z.secondLineWarning:Z.secondLine,children:c}):null]}),(0,i.BX)(s.G,{css:Z.buttons,children:[(0,i.tZ)(l.hU,{alt:"Networking tool",onClick:t,children:(0,i.tZ)(f.Z,{})}),void 0!==h&&h?(0,i.tZ)(l.hU,{alt:"Don't expose this port to the web",onClick:r,children:(0,i.tZ)(b.Z,{})}):null,void 0!==p&&p?(0,i.tZ)(l.hU,{alt:"Expose this port to the web",onClick:o,children:(0,i.tZ)(w.Z,{})}):null,(0,i.tZ)(l.hU,{alt:"Close",onClick:n,children:(0,i.tZ)(d.Z,{})})]})]})}function C(e){var t=e.configuration,n=e.openWebview,r=e.openNetworkingTool,o=e.onClose,l=e.onDontExposePort,s=e.renderSecondLine,u=(0,y.O2)(t.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(t.externalPort);return(0,i.tZ)(x,{openNetworkingTool:r,onClose:o,firstLine:(0,i.BX)(i.HY,{children:[(0,i.BX)(c.xv,{children:["Port :",t.localPort," opened on"]}),(0,i.tZ)(a.zx,{variant:"underlined",text:u,onClick:n})]}),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can manage this config in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:s,renderDontExposeButton:!0,onDontExposePort:l})}function _(e){var t=e.configuration,n=e.openNetworkingTool,r=e.onClose,o=e.renderSecondLine,l=e.onDoExposePort;return(0,i.tZ)(x,{openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but not exposed to the web."),secondLine:(0,i.tZ)(a.zx,{variant:"underlined",text:"Expose this port?",onClick:n}),renderSecondLine:o,renderDoExposeButton:!0,onDoExposePort:l})}function S(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but all available external ports are reserved."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"Remove an external port in"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"port configuration",onClick:t}),(0,i.tZ)(c.xv,{children:"to open a new port."})]}),renderSecondLine:o})}function k(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but is not configured properly."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can fix this in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:t})]}),renderSecondLine:o})}function E(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but has missing configuration."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can fix this in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:t})]}),renderSecondLine:o})}function T(e){var t=e.configuration,n=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.onDontExposePort,l=e.onDoExposePort,c=e.renderSecondLine,s=t.type;switch(s){case p.DL.FORWARDED:return(0,i.tZ)(C,{configuration:t,openWebview:n,openNetworkingTool:r,onClose:o,renderSecondLine:c,onDontExposePort:a});case p.DL.INTERNAL_ONLY:return(0,i.tZ)(_,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c,onDoExposePort:l});case p.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,i.tZ)(S,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});case p.DL.MISCONFIGURED:return(0,i.tZ)(k,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});case p.DL.CONFIG_MISSING:return(0,i.tZ)(E,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});default:(0,g.Z)(s)}}function R(e){var t=e.configurations,n=e.openWebview,r=e.openNetworkingTool,l=e.onClose,u=e.renderSecondLine,d=t.filter(function(e){return e.type===p.DL.FORWARDED}),f=t.filter(function(e){return e.type!==p.DL.FORWARDED});return(0,i.tZ)(x,{isWarning:!1,openNetworkingTool:r,onClose:l,firstLine:(0,i.BX)(i.HY,{children:[d.length>0?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.xv,{children:[d.length," ",(0,o.Z)("port",d.length)," ","opened on"]}),(0,i.tZ)(a.zx,{variant:"underlined",text:"{...}.replit.dev",onClick:n})]}):null,d.length>0&&f.length>0?(0,i.tZ)(s.G,{css:Z.verticalDivider}):null,f.length>0?(0,i.BX)(c.xv,{children:[f.length," ",(0,o.Z)("port",f.length)," ","did not open"]}):null]}),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can manage this config in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:u})}function I(e){var t=e.configurations,n=e.openWebview,o=e.openNetworkingTool,a=e.onClose,l=e.onDontExposePort,c=e.onDoExposePort,s=(0,m.e)("port-nudges"),u=(0,r._)((0,v.useState)(!1),2),d=u[0],f=u[1],h=!s.isDone,p=(0,r._)((0,v.useState)(!0),2),g=p[0],y=p[1];function b(){y(!1),null==a||a()}return((0,v.useEffect)(function(){0===t.length&&y(!0)},[t]),(0,v.useEffect)(function(){if(!s.isDone){if(t.length>0&&!d){f(!0);return}0===t.length&&d&&s.setAsDone()}},[t,s,d]),g&&0!==t.length)?1===t.length?(0,i.tZ)(T,{configuration:t[0],openNetworkingTool:o,openWebview:n,renderSecondLine:h,onClose:b,onDontExposePort:l,onDoExposePort:c}):(0,i.tZ)(R,{configurations:t,openNetworkingTool:o,openWebview:n,renderSecondLine:h,onClose:b}):null}},252:function(e,t,n){n.d(t,{L:function(){return p}});var r=n(42516),i=n(74985),o=n(99007),a=n(78803),l=n(82230),c=n(46845),s=n(35970),u=n(49224),d=n(72093),f=n(94778),h=(0,u.X)({select:d.l0.minWidth(200),wrapper:[d.l0.rowWithGap(8),d.l0.align.center,{"@container (max-width: 400px)":[d.l0.flex.rowReverse]}],rightComponentWrapper:{"@container (max-width: 400px)":[d.l0.ml(8)]}});function p(e){var t,n=e.setting,u=e.currentValue,d=e.update,p=e.rightComponent,m=e.title,v=m;if(m||(v=n.description?(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.xv,{multiline:!1,children:n.name}),(0,i.tZ)(l.xv,{variant:"small",color:"dimmest",children:n.description})]}):(0,i.tZ)(l.xv,{multiline:!1,children:n.name})),"select"===n.type)return(0,i.tZ)(c.$,{id:n.id,title:v,children:(0,i.BX)(f.G,{css:h.wrapper,children:[p?(0,i.tZ)(f.G,{css:h.rightComponentWrapper,children:p}):null,(0,i.tZ)(o.P,{"aria-label":n.name,style:{marginRight:0},items:n.options,defaultSelectedKey:null===(t=n.options.find(function(e){return u===e.editorPreferencesValue}))||void 0===t?void 0:t.id,onSelectionChange:function(e){var t;if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");d((0,r._)({},n.editorPreferencesKey,null===(t=n.options.find(function(t){return t.id===e}))||void 0===t?void 0:t.editorPreferencesValue))},css:h.select,dataCy:n.id,children:function(e){return(0,i.tZ)(s.m9,{id:e.id,label:e.title,dataCy:e.id},e.id)}})]})});if("boolean"===n.type)return(0,i.tZ)(c.$,{id:n.id,title:v,children:(0,i.BX)(i.HY,{children:[p,(0,i.tZ)(a.r,{"aria-label":n.name,isSelected:u,onChange:function(e){if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");d((0,r._)({},n.editorPreferencesKey,e))},dataCy:n.id})]})});throw Error("Unsupported setting type")}},74035:function(e,t,n){n.d(t,{Ly:function(){return m},ZP:function(){return g},qm:function(){return b}});var r=n(66626),i=n(74985),o=n(59695),a=n(2049),l=n(67242),c=n(18060),s=n(82230),u=n(49224),d=n(72093),f=n(252),h=n(46845),p=n(50959),m=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],v=(0,u.X)({sizeInput:[d.l0.py(6),d.l0.flex.growAndShrink(0),{border:"none"}]});function g(){var e=(0,o.Gn)("indentDetection","indentFormatPastes","indentIsSpaces","indentSize"),t=e.preferences,n=e.update;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(f.L,{setting:a.z2.indentationDetection,currentValue:t.indentDetection,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(f.L,{setting:a.z2.indentFormatPastes,currentValue:t.indentFormatPastes,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(f.L,{setting:a.z2.indentIsSpaces,currentValue:t.indentIsSpaces,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(h.$,{id:"indentSize",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(s.xv,{multiline:!1,children:"Indentation Size"}),(0,i.tZ)(s.xv,{variant:"small",color:"dimmest",children:"The number of columns taken up by an indentation level."})]}),children:(0,i.tZ)(b,{css:v.sizeInput,size:t.indentSize,onChange:function(e){n({indentSize:e})}})})]})}function y(e){return null==e?2:("string"==typeof e&&(e=parseInt(e,10)),isNaN(e))?2:(Number.isInteger(e)||(e=Math.round(e)),e<1)?1:e>16?16:e}function b(e){var t=e.size,n=e.onChange,o=e.className,a=(0,r._)((0,p.useState)(null),2),l=a[0],s=a[1],u=null!==l?l:t.toString(),d=""===u?"6ch":u.length+5.5+"ch";return(0,i.tZ)(c.II,{type:"number",style:{width:d},className:o,min:1,max:16,value:u,onBlur:function(){return s(null)},onChange:function(e){var t=e.target.value.trim(),r=e.target.valueAsNumber;if(""===t||isNaN(r)){s(t);return}e.target.validity.valid?(s(null),n(y(r))):(s(t),""===t||isNaN(parseInt(t,10))||n(y(t)))}})}},46845:function(e,t,n){n.d(t,{$:function(){return d}});var r=n(74985),i=n(82230),o=n(94778),a=n(49224),l=n(72093),c=n(56731),s=n(50959),u=(0,a.X)({wrapper:[l.l0.rowWithGap(8),l.l0.justify.spaceBetween,l.l0.align.center,{"@container (max-width: 400px)":[l.l0.colWithGap(8),l.l0.align.start]}],inner:[l.l0.flex.growAndShrink(1)]});function d(e){var t=e.id,n=e.title,a=e.children,l=(0,c.U)()(t);return(0,r.BX)(o.G,{css:u.wrapper,children:[(0,r.tZ)(o.G,{css:u.inner,tag:"label",htmlFor:l,children:"string"==typeof n?(0,r.tZ)(i.xv,{multiline:!1,children:n}):n}),s.cloneElement(a,{id:l})]})}},61486:function(e,t,n){n.d(t,{Z:function(){return tZ}});var r=n(74985),i=n(38753),o=n(37841),a=n(82230),l=n(94778),c=n(72093),s=n(49224),u=n(41733),d=n(30509),f=n(59695),h=n(59786),p=n(46026),m=n(60305),v=n(95571),g=n(67242),y=n(85763),b=n(99236),w=n(64479),Z=n(78803),x=n(29318),C=n(40509),_=n(98924),S=n(66626),k=n(69170),E=n(99266),T=n(78571),R=n(21262),I=n(71440),D=n(58995),B=n(78711);function G(){var e=(0,R._)(["\n  fragment ThemesSwitcherCustomTheme on CustomTheme {\n    id\n    title\n    isCurrentUserThemeAuthor\n    colorScheme\n  }\n"]);return G=function(){return e},e}function A(){var e=(0,R._)(["\n  query ThemesSwitcherCurrentUserAuthoredThemes(\n    $input: CurrentUserAuthoredThemesInput!\n  ) {\n    currentUser {\n      id\n      authoredThemes(input: $input) {\n        ... on CustomThemeConnection {\n          items {\n            id\n            ...ThemesSwitcherCustomTheme\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}function P(){var e=(0,R._)(["\n  query ThemesSwitcherCurrentUserInstalledThemes(\n    $input: CurrentUserInstalledThemesInput!\n  ) {\n    currentUser {\n      id\n      installedThemes(input: $input) {\n        ... on InstalledThemeConnection {\n          items {\n            id\n            themeVersion {\n              id\n            }\n            customTheme {\n              id\n              ...ThemesSwitcherCustomTheme\n            }\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}var N={},L=(0,I.Ps)(G()),O=(0,I.Ps)(A(),L),U=(0,I.Ps)(P(),L),M=n(17642),X=n(50959),F=n(63368),W=function(e){var t=(0,S._)((0,X.useState)(0),2),n=t[0],r=t[1];return(0,F.Z)(function(){null!==e.current&&r(e.current.getBoundingClientRect().height)},[e]),n},H=n(85733),V=n(71166),z=n(19068),j=n(27022),q=n(79050),J=n(21371),Y=n(72143),K=n(29252),$=n(44693),Q=n(47336),ee=n.n(Q),et=(0,s.X)({self:[{border:"1px solid",borderColor:c.TV.outlineDimmest},c.l0.zIndex(5),c.l0.maxHeight(300),c.l0.position.absolute,c.l0.overflowY("auto"),c.l0.width("100%"),c.l0.left(0),c.l0.borderRadius(8),c.l0.flex.column],apron:[c.l0.flex.grow(1),{borderTop:"1px solid",borderTopColor:c.TV.outlineDimmest}],menuItems:[c.l0.flex.growAndShrink(1),c.l0.overflowY("auto"),{listStyle:"none"}],menuApronItem:[c.l0.p(8),c.l0.rowWithGap(12),c.l0.justify.start,c.l0.align.center,z.gU.listItem],menuApronWrapper:[c.l0.flex.column]}),en=(0,$.oM)(),er=function(e){var t=e.children,n=e.className,i=e.bottomOffset;return(0,r.BX)(w.Tg,{className:n,tag:"ul",elevated:!0,css:et.self,style:{bottom:"calc(".concat(i,"px + ").concat(c.TV.space8,")")},children:[(0,r.tZ)(l.G,{css:et.menuItems,children:t}),(0,r.tZ)(w.Tg,{css:et.apron,children:(0,r.BX)(l.G,{css:et.menuApronWrapper,children:[(0,r.tZ)(ee(),{legacyBehavior:!0,href:en.href,as:en.as,children:(0,r.BX)(l.G,{css:et.menuApronItem,children:[(0,r.tZ)(q.Z,{}),(0,r.tZ)(a.xv,{multiline:!1,children:"Explore Themes"})]})}),(0,r.tZ)(ee(),{legacyBehavior:!0,href:$.ZS.href,as:$.ZS.as,children:(0,r.BX)(l.G,{css:et.menuApronItem,children:[(0,r.tZ)(K.Z,{}),(0,r.tZ)(a.xv,{multiline:!1,children:"Create a Theme"})]})})]})})]})},ei=(0,s.X)({trigger:[z.gU.filled,c.l0.p(8),c.l0.color.foregroundDefault,c.l0.border({width:0})],triggerContent:[c.l0.align.center,c.l0.rowWithGap(8)],chevron:[c.l0.transition.snappy],selectLabel:[c.l0.flex.growAndShrink(1),{textAlign:"left",lineHeight:c.TV.lineHeightHeaderBig}],menuWrapper:[c.l0.position.relative],sectionHeadings:[c.l0.p(8),c.l0.fontWeight.bold,c.l0.fontSize(12),{borderTop:"1px solid ".concat(c.TV.outlineDimmer),textTransform:"uppercase"}],officialHeading:[c.l0.p(8),c.l0.fontWeight.bold,c.l0.fontSize(12),{textTransform:"uppercase"}],showMoreWrapper:[c.l0.align.center],spinnerWrapper:[c.l0.p(8),c.l0.align.center]}),eo=l.K.li;function ea(e){var t=e.id,n=e.sections,i=e.initialSelectedItem,o=e.selectedItem,c=e.onChange,s=e.placeholder,f=e.dataCy,h=e.paginationOptions,p=(0,_._)(e,["id","sections","initialSelectedItem","selectedItem","onChange","placeholder","dataCy","paginationOptions"]),m=(0,X.useId)(),v=(0,H.Z)(c),g=(0,X.useRef)(null),b=W(g),w=Object.values(n).flat(),Z=(0,J.L7)((0,d._)((0,u._)({items:w,initialSelectedItem:i,onSelectedItemChange:function(e){var t=e.selectedItem;t&&v.current(t)},stateReducer:function(e,t){var n=t.type,r=t.changes;switch(n){case J.L7.stateChangeTypes.MenuKeyDownEnter:case J.L7.stateChangeTypes.MenuKeyDownSpaceButton:case J.L7.stateChangeTypes.ItemClick:return(0,d._)((0,u._)({},r),{isOpen:!0});default:return r}}},void 0!==o&&{selectedItem:o}),{id:m})),C=(0,V.Z)({onLoadMore:h.loadMore,rootMargin:"0px 0px 300px 0px"}).targetRef,S=function(e){var t,n=e.item,i=e.index;return(0,r.tZ)(eo,(0,d._)((0,u._)({},Z.getItemProps({item:n,index:i})),{"data-cy":n.dataCy,children:(0,r.tZ)(M.Z,{highlighted:i===Z.highlightedIndex,selected:n.id===(null===(t=Z.selectedItem)||void 0===t?void 0:t.id),title:n.title})}))};return(0,r.BX)(l.G,{id:t,dataCy:f,children:[(0,r.tZ)(Y.T,{children:(0,r.tZ)("label",(0,d._)((0,u._)({},Z.getLabelProps()),{children:"select a theme"}))}),(0,r.tZ)("button",(0,d._)((0,u._)({type:"button",css:ei.trigger},p,Z.getToggleButtonProps({ref:g})),{children:(0,r.BX)(l.G,{css:ei.triggerContent,children:[(0,r.tZ)(q.Z,{size:16}),Z.selectedItem?(0,r.tZ)(a.xv,{css:ei.selectLabel,multiline:!1,children:Z.selectedItem.title}):(0,r.tZ)(a.xv,{color:"dimmer",css:ei.selectLabel,multiline:!1,children:s}),(0,r.tZ)(j.Z,{rotate:Z.isOpen?180:0,css:ei.chevron})]})})),(0,r.tZ)("div",(0,d._)((0,u._)({},Z.getMenuProps()),{css:ei.menuWrapper,children:Z.isOpen&&w.length>0?(0,r.BX)(er,{bottomOffset:b,children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.officialHeading,multiline:!1,children:"Official Themes"}),n.official.map(function(e,t){return(0,r.tZ)(S,{item:e,index:t},"".concat(e.id))}),n.authored.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.sectionHeadings,multiline:!1,children:"Your Themes"}),n.authored.map(function(e,t){var i=n.official.length;return(0,r.tZ)(S,{item:e,index:i+t},"".concat(e.id))})]}):null,n.installed.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.sectionHeadings,multiline:!1,children:"Community Themes"}),n.installed.map(function(e,t){var i=n.official.length+n.authored.length;return(0,r.tZ)(S,{item:e,index:i+t},"".concat(e.id))})]}):null,h.authoredHasNextPage||h.installedHasNextPage?(0,r.tZ)(l.G,{css:ei.showMoreWrapper,children:h.loading?(0,r.tZ)(l.G,{css:ei.spinnerWrapper,children:(0,r.tZ)(x.Z,{size:12})}):(0,r.tZ)(y.hU,{tooltipBehavior:"hidden",alt:"Show more",onClick:h.loadMore,ref:C,children:(0,r.tZ)(j.Z,{})})}):null]}):null}))]})}var el=n(55460),ec=n(65377),es=n(90155),eu=n(32032),ed=n(63257),ef=function(e,t){var n,r,i=t.fetchMoreResult;if((null===(n=e.currentUser)||void 0===n?void 0:n.authoredThemes.__typename)==="CustomThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.authoredThemes.__typename)==="CustomThemeConnection"){var o=e.currentUser.authoredThemes.items,a=i.currentUser.authoredThemes.items;return(0,d._)((0,u._)({},i),{currentUser:(0,d._)((0,u._)({},i.currentUser),{authoredThemes:(0,d._)((0,u._)({},i.currentUser.authoredThemes),{items:(0,ed._)(o).concat((0,ed._)(a))})})})}return i},eh=function(e,t){var n,r,i=t.fetchMoreResult;if((null===(n=e.currentUser)||void 0===n?void 0:n.installedThemes.__typename)==="InstalledThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.installedThemes.__typename)==="InstalledThemeConnection"){var o=e.currentUser.installedThemes.items,a=i.currentUser.installedThemes.items;return(0,d._)((0,u._)({},i),{currentUser:(0,d._)((0,u._)({},i.currentUser),{installedThemes:(0,d._)((0,u._)({},i.currentUser.installedThemes),{items:(0,ed._)(o).concat((0,ed._)(a))})})})}return i},ep=function(e){var t=e.authoredThemesData,n=e.installedThemesData,r=e.fetchMoreAuthored,i=e.fetchMoreInstalled;return(0,X.useCallback)(function(){var e,o;(null==t?void 0:null===(e=t.currentUser)||void 0===e?void 0:e.authoredThemes.__typename)==="CustomThemeConnection"&&t.currentUser.authoredThemes.pageInfo.hasNextPage?r({variables:{input:{after:t.currentUser.authoredThemes.pageInfo.nextCursor,count:100}},updateQuery:ef}):(null==n?void 0:null===(o=n.currentUser)||void 0===o?void 0:o.installedThemes.__typename)==="InstalledThemeConnection"&&n.currentUser.installedThemes.pageInfo.hasNextPage&&i({variables:{input:{after:n.currentUser.installedThemes.pageInfo.nextCursor,count:100}},updateQuery:eh})},[t,n,r,i])},em=function(e){var t,n,i,o,a,s,d,f,h=e.context,p=(0,_._)(e,["context"]),m=(0,X.useId)(),v=(0,k.Z)().showError,g=(t=(0,u._)({},N,{variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return v(e.message)},onCompleted:function(e){var t,n=null===(t=e.currentUser)||void 0===t?void 0:t.authoredThemes;((null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&v(n.message)}}),D.a(O,t)),y=g.data,w=g.loading,Z=g.error,x=g.fetchMore,C=(0,S._)((n=(0,u._)({},N,{variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return v(e.message)},onCompleted:function(e){var t,n=null===(t=e.currentUser)||void 0===t?void 0:t.installedThemes;((null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&v(n.message)}}),B.t(U,n)),2),R=C[0],I=C[1],G=I.data,A=I.loading,P=I.error,L=I.fetchMore,M=(0,el.F)(),F=M.setActiveTheme,W=M.isSaving,H=M.error,V=M.theme;(0,X.useEffect)(function(){var e,t=null==y?void 0:null===(e=y.currentUser)||void 0===e?void 0:e.authoredThemes;(null==t?void 0:t.__typename)!=="CustomThemeConnection"||t.pageInfo.hasNextPage||R()},[y,R]);var z=((null==G?void 0:null===(o=G.currentUser)||void 0===o?void 0:null===(i=o.installedThemes)||void 0===i?void 0:i.__typename)==="InstalledThemeConnection"?G.currentUser.installedThemes.items:[]).map(function(e){return e.customTheme}),j=(null==y?void 0:null===(s=y.currentUser)||void 0===s?void 0:null===(a=s.authoredThemes)||void 0===a?void 0:a.__typename)==="CustomThemeConnection"?y.currentUser.authoredThemes.items:[];(0,X.useEffect)(function(){H&&v(H.message)},[H,v]);var q=ep({authoredThemesData:y,installedThemesData:G,fetchMoreAuthored:x,fetchMoreInstalled:L}),J=(null==y?void 0:null===(d=y.currentUser)||void 0===d?void 0:d.authoredThemes.__typename)==="CustomThemeConnection"&&y.currentUser.authoredThemes.pageInfo.hasNextPage,Y=(null==G?void 0:null===(f=G.currentUser)||void 0===f?void 0:f.installedThemes.__typename)==="InstalledThemeConnection"&&G.currentUser.installedThemes.pageInfo.hasNextPage;if(Z||P)return(0,r.tZ)(l.G,{children:(0,r.tZ)(b.E,{colorway:"negative",text:"Something went wrong loading your themes"})});var K={official:es.T,authored:j,installed:z};return(0,r.tZ)(l.G,{children:(0,r.tZ)(ea,(0,u._)({css:[[W?E.p.backgroundPulse(ec.TV.accentPrimaryDefault,ec.TV.accentPrimaryDimmest):{}],c.l0.backgroundColor.backgroundDefault,{":not([disabled]):hover":{background:ec.TV.backgroundHigher}}],id:m,dataCy:"preferences-theme-dropdown",sections:K,disabled:W,paginationOptions:{loadMore:q,authoredHasNextPage:J,installedHasNextPage:Y,loading:w||A},selectedItem:(0,T.iG)(V)?V.customTheme:es.T.find(function(e){return e.id===V.id}),onChange:function(e){F(e.id),"number"==typeof e.id&&(0,eu.B4)({themeId:e.id,colorScheme:e.colorScheme,isAlreadyInstalled:!0,isAuthor:e.isCurrentUserThemeAuthor,context:h})}},p))})},ev=n(74035),eg=n(15235),ey=n(18060),eb=n(59947),ew=n(79310),eZ=n(46845);function ex(e){return e.slice().sort(function(e,t){return e-t})}var eC=(0,s.X)({ruler:[c.l0.py(4),c.l0.px(8),c.l0.rowWithGap(4),c.l0.align.center,c.l0.borderRadius(8)],remove:[c.l0.borderRadius(4)],title:[c.l0.pr(8),c.l0.overflow("visible"),c.l0.flex.shrink(0)],body:[c.l0.flex.row,c.l0.flex.wrapReverse,c.l0.align.start,c.l0.justify.end,c.l0.flex.growAndShrink(1),{gap:c.TV.space4}],list:[c.l0.flex.row,c.l0.flex.wrap,c.l0.flex.growAndShrink(1),c.l0.align.end,c.l0.justify.end,{gap:c.TV.space4}],add:[c.l0.rowWithGap(4),c.l0.align.center]});function e_(e){var t=e.pos,n=e.onRemove;return(0,r.BX)(w.Tg,{css:eC.ruler,elevated:!0,children:[(0,r.tZ)(a.xv,{multiline:!1,children:t}),(0,r.tZ)(y.hU,{css:eC.remove,alt:"Remove ruler",onClick:n,children:(0,r.tZ)(ew.Z,{})})]})}function eS(){var e=(0,S._)((0,X.useState)(!1),2),t=e[0],n=e[1],i=(0,S._)((0,X.useState)(80),2),o=i[0],c=i[1],s=(0,X.useRef)(null),u=(0,X.useRef)(null),d=-1===o,h=o>=0&&o<=1e3,p=(0,f.Gn)("rulers"),m=p.preferences,v=p.update,g=ex(m.rulers);return(0,r.tZ)(eZ.$,{id:"rulers",title:(0,r.tZ)(a.xv,{css:eC.title,multiline:!1,children:"Rulers"}),children:(0,r.BX)(l.G,{css:eC.body,children:[(0,r.tZ)(l.G,{css:eC.list,children:g.map(function(e,t){return(0,r.tZ)(e_,{pos:e,onRemove:function(){v({rulers:g.filter(function(e,n){return n!==t})})}},t)})}),t?(0,r.BX)(l.G,{css:eC.add,children:[(0,r.tZ)(ey.II,{ref:s,type:"number",style:{width:d?"6ch":o.toString().length+5.5+"ch"},value:o>=0?o.toString():"",onChange:function(e){if(""===e.target.value)c(-1);else{var t=parseInt(e.target.value,10);isNaN(t)||c(t)}},onKeyDown:function(e){"Escape"===e.key?(c(80),n(!1)):"Enter"===e.key&&h&&(v({rulers:ex((0,ed._)(g).concat([o]))}),n(!1),c(80))},onBlur:function(e){e.relatedTarget!==u.current&&(n(!1),c(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,r.tZ)(eg.zx,{ref:u,text:"Accept",colorway:"primary",iconLeft:(0,r.tZ)(eb.Z,{}),disabled:!h,onClick:function(){h&&(v({rulers:ex((0,ed._)(g).concat([o]))}),n(!1),c(80))},onBlur:function(e){e.relatedTarget!==s.current&&(n(!1),c(80))}})]}):(0,r.tZ)(r.HY,{children:g.length>=10?null:(0,r.tZ)(eg.zx,{text:"Add Ruler",iconLeft:(0,r.tZ)(K.Z,{}),onClick:function(){return n(!0)}})})]})})}var ek=(0,s.X)({container:[c.l0.flex.row,c.l0.justify.spaceBetween,c.l0.align.start,{"@container (max-width: 400px)":[c.l0.colWithGap(8)]}],title:[c.l0.flex.growAndShrink(1)],body:[c.l0.colWithGap(12)],switchWrapper:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.justify.end,{"@container (max-width: 400px)":[c.l0.flex.rowReverse]}],switchLabel:[{"@container (max-width: 400px)":[c.l0.ml(8)]}]});function eE(){var e=(0,f.Gn)("showLeadingWhitespace","showTrailingWhitespace","showEnclosedWhitespace","showSelectedWhitespace"),t=e.preferences,n=e.update;return(0,r.BX)(l.G,{css:ek.container,children:[(0,r.BX)(l.G,{css:ek.title,children:[(0,r.tZ)(a.xv,{children:"Show Whitespace"}),(0,r.tZ)(a.xv,{multiline:!0,variant:"small",color:"dimmest",children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,r.BX)(l.G,{css:ek.body,children:[(0,r.BX)(l.G,{css:ek.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:ek.switchLabel,children:"Leading"}),(0,r.tZ)(Z.r,{"aria-label":"Show leading whitespace",isSelected:t.showLeadingWhitespace,onChange:function(e){n({showLeadingWhitespace:e})}})]}),(0,r.BX)(l.G,{css:ek.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:ek.switchLabel,children:"Enclosed"}),(0,r.tZ)(Z.r,{"aria-label":"Show enclosed whitespace",isSelected:t.showEnclosedWhitespace,onChange:function(e){n({showEnclosedWhitespace:e})}})]}),(0,r.BX)(l.G,{css:ek.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:ek.switchLabel,children:"Trailing"}),(0,r.tZ)(Z.r,{"aria-label":"Show trailing whitespace",isSelected:t.showTrailingWhitespace,onChange:function(e){n({showTrailingWhitespace:e})}})]}),(0,r.BX)(l.G,{css:ek.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:ek.switchLabel,children:"Selected"}),(0,r.tZ)(Z.r,{"aria-label":"Show selected whitespace",isSelected:t.showSelectedWhitespace,onChange:function(e){n({showSelectedWhitespace:e})}})]})]})]})}var eT=n(93264),eR=n(85421),eI=n(72343),eD=n(11894),eB=n(64432),eG=n(11721);function eA(){var e=(0,R._)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isVerified\n      userSubscriptionType\n      userPowerUpsByType {\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return eA=function(){return e},e}var eP={},eN=(0,I.Ps)(eA()),eL=n(80454),eO=n(252),eU=n(2049),eM=Array.from((0,ed._)(Object.entries(eL.f)).concat([["custom",""]]),function(e){return{title:e[0],value:e[1]}});function eX(){var e,t,n,i=(0,h.P5)({controlName:"flag-ghostwriter-chat-engine-override",logFlagToAnalytics:!1}),o=(e=(0,u._)({},eP,void 0),D.a(eN,e)).data,s=(null==o?void 0:null===(t=o.currentUser)||void 0===t?void 0:t.isStaff)||!1,d=(0,f.Gn)("chatEngine","ghostwriterChatServiceEnvironment","ghostwriterUseAdvancedModel"),p=d.preferences,v=d.update,b=(0,eI.v)(),w=(0,f.Gn)("ghostwriterChatServiceEnvironment").preferences.ghostwriterChatServiceEnvironment||eL.f.production,Z=(0,S._)((0,X.useState)(!Object.values(eL.f).includes(w)),2),x=Z[0],_=Z[1],k=(0,S._)((0,X.useState)(""),2),E=k[0],T=k[1],R=function(e){var t=v(e),n=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,S._)(o.value,2),c=l[0],s=l[1];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:c,updatedValue:s})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t};return(0,r.BX)(r.HY,{children:[i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.chatEngine,currentValue:p.chatEngine,update:R,title:(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:[(0,r.tZ)(a.xv,{multiline:!1,children:"AI Chat Engine"}),(0,r.tZ)(eB.u,{tooltip:'You are seeing this functionality because you have special permissions. If set, this preference overrides "Use Advanced model" preference.',children:(0,r.tZ)(eG.Z,{})})]}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current applied engine: ",b]})]})})]}):null,(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.ghostwriterUseAdvancedModel,currentValue:p.ghostwriterUseAdvancedModel,update:R})]}),s?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"ghostwriterChatService",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:(0,r.tZ)(a.xv,{multiline:!1,children:"Ghostwriter Chat Service V2 "})}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current endpoint: ",w]})]}),children:(0,r.BX)(l.G,{css:c.l0.colWithGap(12),children:[(0,r.tZ)(eD.P,{css:[c.l0.minWidth(184)],initialSelectedItem:null!==(n=eM.find(function(e){return e.value===p.ghostwriterChatServiceEnvironment}))&&void 0!==n?n:p.ghostwriterChatServiceEnvironment?eM[eM.length-1]:eM[0],onChange:function(e){(null==e?void 0:e.title)!=="custom"?(R({ghostwriterChatServiceEnvironment:null==e?void 0:e.value}),_(!1)):_(!0)},items:eM}),x?(0,r.BX)(l.G,{css:c.l0.rowWithGap(4),children:[(0,r.tZ)(ey.II,{value:E,onChange:function(e){T(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&R({ghostwriterChatServiceEnvironment:E})}}),(0,r.tZ)(y.hU,{alt:"Update custom url",onClick:function(){return R({ghostwriterChatServiceEnvironment:E})},children:p.ghostwriterChatServiceEnvironment!==E?(0,r.tZ)(C.Z,{}):(0,r.tZ)(eb.Z,{})})]}):null]})})]}):null]})}function eF(e){var t=e.preferences,n=e.update;return(0,r.tZ)(eZ.$,{id:"formatOnSave",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{multiline:!1,children:"Format on Save"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Controls whether files are automatically formatted when saved"})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Format on Save",isSelected:t.formatOnSave,onChange:function(e){n({formatOnSave:e})}})})}var eW=n(19934),eH=n(89421);function eV(e){var t=e.context,n=e.text,i=(0,S._)((0,X.useState)(!1),2),o=i[0],a=i[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(eg.zx,{text:void 0===n?"Activate":n,colorway:"primary",onClick:function(){return a(!0)}}),(0,r.tZ)(eH.Z,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",analyticsContext:{upgrade:{context:t}}})]})}var ez=n(9413),ej=n(85438),eq=n(14375);function eJ(){var e=(0,R._)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userSubscriptionType\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return eJ=function(){return e},e}var eY={},eK=(0,I.Ps)(eJ()),e$={titleContainer:[c.l0.rowWithGap(8),c.l0.align.center],upgradeRow:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.justify.spaceBetween]};function eQ(){var e,t,n=(0,h.P5)({controlName:"flag-code-suggestion-engine",logFlagToAnalytics:!1}),o=(e=(0,u._)({},eY,void 0),D.a(eK,e)).data,s=(null==o?void 0:null===(t=o.currentUser)||void 0===t?void 0:t.userSubscriptionType)===ej.HP.HackerPro,d=(0,i.Gv)((0,eR.useRouter)()),p=(0,ez.v)().isTeamWithAiDisabled,v=(0,f.Gn)("codeSuggestion","completeCodeEngine"),y=v.preferences,b=v.update,w=(0,eW.Z)().engine,Z=function(e){var t=b(e),n=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,S._)(o.value,2),c=l[0],s=l[1];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:c,updatedValue:s})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t};return p?null:(0,r.BX)(l.G,{css:c.l0.colWithGap(12),children:[(0,r.tZ)(eO.L,{currentValue:y.codeSuggestion,update:Z,setting:eU.z2.codeSuggestion,title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.G,{css:e$.titleContainer,children:(0,r.tZ)(a.xv,{multiline:!1,children:"AI Code Completion"})}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Code completion provides inline “ghost text” suggestions while you code.",(0,r.tZ)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]})}),s||d?null:(0,r.BX)(l.G,{css:e$.upgradeRow,children:[(0,r.tZ)(a.xv,{children:"Upgrade for full access to Replit AI"}),(0,r.tZ)(eV,{text:"Upgrade to Replit ".concat(eq.we),context:"workspace_settings_pane"})]}),n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{title:(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:[(0,r.tZ)(a.xv,{multiline:!1,children:"AI Code Completion Engine"}),(0,r.tZ)(eB.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(eG.Z,{})})]}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current applied engine: ",w]})]}),currentValue:y.completeCodeEngine,update:Z,setting:eU.z2.completeCodeEngine})]}):null]})}function e0(e){var t=e.hideLayoutControl,n=e.className,o=e.resetLayout,s=(0,f.Gn)("isLayoutStacked","fontSize","minimapDisplay","wrapping","keyboardHandler","multiselectModifierKey","showFileTreeGitStatus","codeIntelligence","semanticTokens","accessibleTerminal","shellBellAudio","webviewAutoOpenOnPortOpened","chatAudioNotification","forwardPortsAutomatically","acceptSuggestionOnCommitCharacter"),_=s.preferences,S=s.update,k=(0,i.Gv)((0,eR.useRouter)()),E=(0,i.T3)(),T=(0,eT.cR)(),R=(0,v.NJ)(),I=(0,h.P5)({controlName:"flag-draft-buffers",logFlagToAnalytics:!1}),D=(0,h.P5)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),B=function(e){Object.keys(e).forEach(function(t){var n=e[t];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})}),S(e)};if(!_)return null;var G=(0,d._)((0,u._)({},eU.z2.multiselectModifierKey),{options:eU.z2.multiselectModifierKey.options.map(function(e){return(0,d._)((0,u._)({},e),{title:(0,p.hp)("cmdOrCtrlKey"===e.id?p.LH.CMD_OR_CTRL_KEY:p.LH.ALT_KEY,R)})})});return(0,r.BX)(w.Tg,{className:n,background:"default",css:[c.l0.p(16),c.l0.colWithGap(12)],children:[t?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(eO.L,{setting:eU.z2.layout,update:B,currentValue:_.isLayoutStacked,rightComponent:o?(0,r.tZ)(y.hU,{alt:"Reset layout",onClick:function(){o.reset()},children:o.reseting?(0,r.tZ)(x.Z,{}):(0,r.tZ)(C.Z,{})}):null}),(0,r.tZ)(g.R,{})]}),(0,r.tZ)(eO.L,{setting:eU.z2.fontSize,update:B,currentValue:_.fontSize}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"acceptSuggestionOnCommitCharacter",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{children:"Accept Suggestion on Commit Character"}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (",(0,r.tZ)("code",{children:";"}),") can be a commit character that accepts the suggestion and types the character."]})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Accept suggestion on commit character",isSelected:_.acceptSuggestionOnCommitCharacter,onChange:function(e){B({acceptSuggestionOnCommitCharacter:e})}})}),(0,r.tZ)(g.R,{}),(0,r.tZ)(ev.ZP,{}),(0,r.tZ)(g.R,{}),I?(0,r.BX)(r.HY,{children:[(0,r.tZ)(eF,{preferences:_,update:B}),(0,r.tZ)(g.R,{})]}):null,(0,r.tZ)(eO.L,{setting:eU.z2.wrapping,update:B,currentValue:_.wrapping}),(0,r.tZ)(g.R,{}),E?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(eO.L,{setting:eU.z2.minimap,update:B,currentValue:_.minimapDisplay}),(0,r.tZ)(g.R,{})]}),(0,r.tZ)(eS,{}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.keyboardHandler,update:B,currentValue:_.keyboardHandler}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:G,update:B,currentValue:_.multiselectModifierKey}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.showFileTreeGitStatus,update:B,currentValue:_.showFileTreeGitStatus}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eQ,{}),(0,r.tZ)(eX,{}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.codeIntelligence,update:B,currentValue:_.codeIntelligence}),(0,r.tZ)(g.R,{}),D&&_.codeIntelligence?(0,r.BX)(r.HY,{children:[(0,r.tZ)(eO.L,{setting:eU.z2.semanticTokens,update:B,currentValue:_.semanticTokens}),(0,r.tZ)(g.R,{})]}):null,(0,r.tZ)(eE,{}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.accessibleTerminal,update:B,currentValue:_.accessibleTerminal}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.shellBellAudio,update:B,currentValue:_.shellBellAudio}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"webviewAutoOpenOnPortOpened",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{children:T?"Automatic Webview (unavailable in this Repl)":"Automatic Webview"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Open a webview automatically when a port is open"}),T?(0,r.tZ)(l.G,{css:[c.l0.pt(8),c.l0.maxWidth("calc(100% - 12px)")],children:(0,r.tZ)(b.E,{colorway:"orange",text:'This preference is unavailable in Extension Repls. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,r.tZ)(Z.r,{"aria-label":"Automatic Webview",isSelected:_.webviewAutoOpenOnPortOpened,isDisabled:T,onChange:function(e){B({webviewAutoOpenOnPortOpened:e})}})}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.forwardPortsAutomatically,update:B,currentValue:_.forwardPortsAutomatically}),k?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"theme",title:"Theme",children:(0,r.tZ)(em,{css:[c.l0.minWidth(184),c.l0.backgroundColor.backgroundHigher],context:eu.HY.WorkspacePreferencesPane})})]}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.chatAudioNotification,update:B,currentValue:_.chatAudioNotification})]})}var e1=n(56731),e2=n(43312),e3=n(93801),e4=n(19653),e8=n(36647),e6=n(60626),e5=n(98640),e9=n(55821),e7=n(76575),te=n(39712),tt=n(87128),tn=n(88032),tr=n(80003),ti=n(11407),to=n(50798);function ta(e){var t=(0,X.useRef)(null),n=(0,X.useRef)([]);function r(){t.current&&clearTimeout(t.current),n.current=[]}function i(t){e({type:"success",shortcut:t.length>1?[t[0],t[1]]:t[0]}),r()}return{onKeyDown:function(r){var o=t.current,a=n.current;r.preventDefault(),r.stopPropagation(),o&&clearTimeout(o);var l=(0,ti.lc)(r);if(l){if((0,ti.ZG)(l)){e({type:"update",recorded:a.length?[a[0],l]:[l]});return}if(a.length>0&&"Enter"===l){i(a);return}a.push(l),e({type:"update",recorded:a});var c=2===a.length?0:600;t.current=setTimeout(function(){return i(a)},c)}},startRecording:function(){r(),e({type:"start"})},stopRecording:function(){r(),e({type:"stop"})}}}var tl=(0,s.X)({root:[c.l0.colWithGap(8)],row:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.minHeight(28)],left:[c.l0.colWithGap(2),c.l0.flex.grow(0),c.l0.flex.shrink(1)],right:[c.l0.rowWithGap(16),c.l0.align.center,c.l0.justify.end,c.l0.position.relative,c.l0.flex.grow(1),c.l0.flex.shrink(0)],recordingRow:[c.l0.flex.column,c.l0.align.center,c.l0.justify.end],recordingRowInner:[c.l0.rowWithGap(8),c.l0.align.center],recordingRowKeys:[c.l0.position.relative],recordingRowHint:[c.l0.position.absolute,c.l0.top(20),c.l0.right(0),{fontStyle:"italic"}],recordingRowPlaceholder:[c.l0.display.flex,c.l0.align.baseline,c.l0.rowWithGap(4),{fontStyle:"italic"}],keys:[c.l0.display.inlineFlex,c.l0.rowWithGap(12)],secondaryText:[c.l0.display.flex,c.l0.flex.row,c.l0.align.center,c.l0.rowWithGap(4)],secondaryTextId:[c.l0.flex.grow(1),c.l0.flex.shrink(0)],secondaryTextDescription:[c.l0.flex.grow(0),c.l0.flex.shrink(1),c.l0.color.foregroundDimmest],buttons:[c.l0.rowWithGap(4)]}),tc=(0,s.X)({root:[c.l0.rowWithGap(8),c.l0.align.center],recordingRow:[c.l0.rowWithGap(4),c.l0.align.center],input:[{opacity:0,width:1}],searchingText:[{fontStyle:"italic"}]});function ts(e){var t,n,i,o,s=e.command,u=e.filter,d=e.shortcutsToCommands,f=e.onViewShortcutConflicts,h=(0,to.r3)(),p=(0,to.wU)(),m=(0,to.V_)(s.id),v=(0,S._)((0,X.useState)(null),2),g=v[0],w=v[1],Z=ta(function(e){switch(e.type){case"start":w({recorded:[]});return;case"stop":w(null);return;case"update":w({recorded:e.recorded});return;case"success":var t=(0,ti.SG)(e.shortcut);if(!t||h(s.id,t)){w(null);return}w(null);return;case"error":w(function(t){var n;return{error:e.message,recorded:null!==(n=null==t?void 0:t.recorded)&&void 0!==n?n:[]}});return}}),x=Z.stopRecording,_=Z.startRecording,k=Z.onKeyDown,E=(0,e4.Z)(function(){return x()},[]),T=!!g;tm(T);var R=null!==(o=null==g?void 0:g.recorded)&&void 0!==o?o:[],I=null==g?void 0:g.error,D=u.length>0,B=null===(t=e6.Z.match(u,s.name))||void 0===t?void 0:t.ranges,G=null===(n=e6.Z.match(u,s.id))||void 0===n?void 0:n.ranges,A=(null==s?void 0:s.description)?null===(i=e6.Z.match(u,s.description))||void 0===i?void 0:i.ranges:void 0,P=(0,e8.Z)(function(){return u.replaceAll('"',"").split("-").map(function(e){return e.toLowerCase()})},[u]);return(0,r.BX)(l.G,{css:tl.root,"data-testid":s.id,children:[(0,r.BX)(l.G,{css:tl.row,children:[(0,r.BX)(l.G,{css:tl.left,children:[(0,r.tZ)(e3.x,{text:s.name,highlight:B,dimmed:D}),(0,r.BX)(a.xv,{variant:"small",css:tl.secondaryText,multiline:!1,children:[D?(0,r.tZ)(e3.x,{css:tl.secondaryTextId,text:s.id,highlight:G,dimmed:D}):null,s.description?(0,r.BX)(r.HY,{children:[D?(0,r.tZ)(a.xv,{color:"dimmest",multiline:!1,children:"•"}):null,(0,r.tZ)(e3.x,{css:tl.secondaryTextDescription,text:s.description,highlight:A,dimmed:D})]}):null]})]}),(0,r.BX)(l.G,{innerRef:T?E:void 0,css:tl.right,children:[T?(0,r.tZ)(tn.MT,{autoFocus:!0,restoreFocus:!0,children:(0,r.tZ)("input",{onKeyDown:k,css:tc.input})}):null,s.shortcut&&!T&&d.length>1?(0,r.tZ)(y.hU,{"data-testid":"View conflicts",alt:"View conflicts",onClick:function(){X.startTransition(function(){s.shortcut&&f(tu([s.shortcut]))})},children:(0,r.tZ)(tt.Z,{color:c.TV.foregroundDimmer})}):null,s.shortcut&&!T?(0,r.tZ)(tr.bM,{small:!0,keyCombo:s.shortcut,match:P}):null,s.shortcut||T?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(eg.zx,{size:"small",variant:"outlined",iconLeft:(0,r.tZ)(K.Z,{}),text:"Add shortcut",onClick:function(){return _()}}),m?(0,r.tZ)(y.hU,{alt:"Reset",onClick:function(){return h(s.id,m)},children:(0,r.tZ)(C.Z,{})}):null]}),T?(0,r.tZ)(l.G,{css:tl.recordingRow,children:(0,r.BX)(l.G,{css:tl.recordingRowInner,children:[(0,r.tZ)(l.G,{css:tl.recordingRowKeys,children:R.length>0?(0,r.tZ)(l.G,{css:tl.keys,children:R.map(function(e,t){return(0,r.tZ)(tr.bM,{small:!0,keyCombo:e},"".concat(e,"-").concat(t))})}):(0,r.tZ)(a.xv,{multiline:!1,color:"dimmest",css:tl.recordingRowPlaceholder,children:"Recording…"})}),(0,r.tZ)(y.hU,{alt:"Stop",onClick:function(){return x()},children:(0,r.tZ)(ty,{})})]})}):null,s.shortcut&&!T?(0,r.BX)(l.G,{css:tl.buttons,children:[m&&m!==s.shortcut?(0,r.tZ)(y.hU,{alt:"Reset",onClick:function(){return h(s.id,m)},children:(0,r.tZ)(C.Z,{})}):null,(0,r.tZ)(y.hU,{alt:"Change",onClick:function(){return _()},children:(0,r.tZ)(e7.Z,{})}),(0,r.tZ)(y.hU,{alt:"Remove",onClick:function(){return p(s.id)},children:(0,r.tZ)(e9.Z,{})})]}):null]})]}),I?(0,r.tZ)(b.E,{icon:(0,r.tZ)(tt.Z,{}),colorway:"warning",text:I,closable:!0,closeAction:function(){return w(function(e){var t;return{recorded:null!==(t=null==e?void 0:e.recorded)&&void 0!==t?t:[]}})}}):null]})}function tu(e){var t=e.flat();return t.length>1?t.map(function(e){return tu([e])}).join(" "):(0,ti.QR)(t[0]).map(function(e){return'"'.concat(e,'"')}).join("-").replaceAll(" ","space")}var td=(0,s.X)({root:[c.l0.colWithGap(8),c.l0.p(0)],surface:[c.l0.pt(8),c.l0.borderRadius(8),c.l0.colWithGap(12)]});function tf(e){var t=e.search,n=e.setSearch,i=(0,X.useRef)(null),o=(0,S._)((0,X.useState)(!1),2),c=o[0],s=o[1];tm(c);var u=ta(function(e){var t,r,o;switch(e.type){case"start":s(!0),n(""),null==i||null===(t=i.current)||void 0===t||t.focus();return;case"stop":case"error":s(!1),null==i||null===(r=i.current)||void 0===r||r.focus(),null==i||null===(o=i.current)||void 0===o||o.select();return;case"success":n(tu([e.shortcut]));return;case"update":n(tu(e.recorded));return}}),d=u.stopRecording,f=u.startRecording,h=u.onKeyDown;return(0,r.BX)(l.G,{css:tc.root,children:[(0,r.tZ)(tn.MT,{children:(0,r.tZ)(ey.II,{ref:i,placeholder:c?"Searching with pressed keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:c?d:void 0,onChange:function(e){n(e.currentTarget.value)},onKeyDown:c?function(e){"Escape"===e.key?d():h(e)}:void 0,value:t})}),(0,r.tZ)(l.G,{css:tc.recordingRow,children:c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmest",css:tc.searchingText,multiline:!1,children:"Searching…"}),(0,r.tZ)(y.hU,{alt:"Stop Recording",onClick:d,children:(0,r.tZ)(ty,{})})]}):(0,r.tZ)(y.hU,{alt:"Record Keys",onClick:f,children:(0,r.tZ)(te.Z,{})})}),(0,r.tZ)(y.hU,{alt:"Clear Input",disabled:0===t.length,onClick:function(){var e;n(""),null==i||null===(e=i.current)||void 0===e||e.focus()},children:(0,r.tZ)(ew.Z,{})})]})}function th(){var e=(0,S._)((0,X.useState)(""),2),t=e[0],n=e[1],i=(0,X.useDeferredValue)(t);return(0,r.BX)(l.G,{css:td.root,children:[(0,r.tZ)(tf,{search:t,setSearch:n}),(0,r.tZ)(tp,{search:i,setSearch:n})]})}var tp=X.memo(function(e){var t=e.search,n=e.setSearch,i=(0,to.xF)(),o=(0,e8.Z)(function(){return(0,ed._)(i.values())},[i]),a=(0,X.useMemo)(function(){return e6.Z.filter(t,o,{extract:function(e){var t="".concat(e.name," ").concat(e.id);return e.description&&(t+=" ".concat(e.description)),e.shortcut&&(t+=" ".concat(tu([e.shortcut]))),t}})},[t,o]),l=(0,X.useMemo)(function(){return a.reduce(function(e,t){var n=t.original,r=n.shortcut;if(!r)return e;var i=e.get(r);return i?i.push(n):i=[n],e.set(r,i),e},new Map)},[a]);return a.length>0?(0,r.tZ)(w.Tg,{css:td.surface,children:a.map(function(e,i){var o;return(0,r.BX)(X.Fragment,{children:[i>0?(0,r.tZ)(w.Tg,{elevated:!0,style:{height:1}}):null,(0,r.tZ)(ts,{command:e.original,filter:t,shortcutsToCommands:null!==(o=l.get(e.original.shortcut))&&void 0!==o?o:[],onViewShortcutConflicts:n})]},e.original.id)})}):null});function tm(e){var t="You have unsaved changes";(0,X.useEffect)(function(){var n=function(e){return e.preventDefault(),e.returnValue=t,t};if(e)return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}},[e])}var tv=(0,e2.F4)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),tg=(0,s.X)({background:[{animationName:tv,animation:"".concat(tv," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(c.TV.redStronger)},c.l0.height(11),c.l0.width(11),c.l0.borderRadius("full"),c.l0.position.absolute],container:[c.l0.position.relative,c.l0.align.center,c.l0.justify.center],icon:[{zIndex:1}]});function ty(){return(0,r.BX)(l.G,{css:tg.container,children:[(0,r.tZ)(e5.Z,{css:tg.icon,color:c.TV.redStronger}),(0,r.tZ)(l.G,{css:tg.background})]})}function tb(){var e=(0,e1.U)()("keyboard_shortcuts");return(0,r.BX)(w.Tg,{background:"default",css:[c.l0.px(16),c.l0.pb(16),c.l0.colWithGap(12)],children:[(0,r.tZ)(l.G,{tag:"label",htmlFor:e}),(0,r.tZ)(th,{})]})}var tw=(0,s.X)({headerContainer:[c.l0.flex.column,c.l0.justify.center,c.l0.px(16),c.l0.py(8)],subheading:[{fontStyle:"italic"},c.l0.color.foregroundDimmer,c.l0.mt(8),c.l0.mb(8)],tabs:[{width:"100%"}],tabList:[{"[aria-selected=true]":[c.l0.fontWeight.medium]}],tab:[c.l0.py(8),c.l0.px(16)]});function tZ(e){var t=e.hideLayoutControl,n=e.resetLayout,c=(0,i.T3)();return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:tw.headerContainer,children:[(0,r.tZ)(a.h4,{variant:"subheadBig",level:3,children:"User Settings"}),(0,r.tZ)(a.xv,{variant:"small",css:tw.subheading,children:"The following settings apply to your account and will be used across all your Repls."})]}),c?(0,r.tZ)(e0,{hideLayoutControl:t,resetLayout:n}):(0,r.tZ)(l.G,{children:(0,r.BX)(o.mQ,{css:tw.tabs,children:[(0,r.BX)(o.td,{withDividers:!1,css:tw.tabList,children:[(0,r.tZ)(o.OK,{css:tw.tab,children:"Editor preferences"}),(0,r.tZ)(o.OK,{css:tw.tab,children:"Keyboard shortcuts"})]}),(0,r.BX)(o.nP,{children:[(0,r.tZ)(o.x4,{children:(0,r.tZ)(e0,{resetLayout:n})}),(0,r.tZ)(o.x4,{children:(0,r.tZ)(tb,{})})]})]})})]})}},35986:function(e,t,n){n.d(t,{H:function(){return u},s:function(){return s}});var r=n(27387),i=n(63257),o=n(96583),a=n(36647),l=n(19871),c=n(69880),s=["-z","--find-copies","--find-copies-harder","--find-renames"];function u(e){var t,n=e.head,u=e.base,d=e.flags,f=void 0===d?s:d,h=(0,c.Z)((t=(0,r._)(function(e){var t,r;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.fetch()];case 1:return o.sent(),t=["git","diff"].concat((0,i._)(f),["".concat(u,"...").concat(n)]),[4,e.escapeHatchGitExecRead(t.join(" "),{serviceMethod:"useGitDiff"})];case 2:if((r=o.sent()).error||null===r.output)return[2,{error:l.aq.UNKNOWN}];return[2,{diff:r.output,error:null}]}})}),function(e){return t.apply(this,arguments)}));return(0,a.Z)(function(){return null==h?{loading:!0,error:null,data:null}:h.error?{loading:!1,error:h.error,data:null}:{loading:!1,error:null,data:h.diff}},[h])}},32501:function(e,t,n){n.d(t,{J:function(){return p}});var r=n(41733),i=n(30509),o=n(59786),a=n(39271),l=n(21262),c=n(71440),s=n(58995);function u(){var e=(0,l._)(["\n  query CheckForProjectByRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        org {\n          id\n          type\n          name\n          permissions {\n            createRepl\n            createProject\n          }\n        }\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u()),h=n(85438);function p(){var e,t,n,l,c=(0,o.P5)({controlName:"flag-first-class-git"}),u=(e={variables:{id:(0,a.Z)()},skip:!c},t=(0,r._)({},d,e),s.a(f,t));return(0,i._)((0,r._)({},u),{hasProject:(null===(n=u.data)||void 0===n?void 0:n.repl.__typename)==="Repl"&&!!(null===(l=u.data.repl.project)||void 0===l?void 0:l.id),isEligibleForProject:u.data&&"Repl"===u.data.repl.__typename&&u.data.repl.org&&u.data.repl.org.type===h.a4.Team&&!0===u.data.repl.org.permissions.createRepl&&!0===u.data.repl.org.permissions.createProject})}},21075:function(e,t,n){n.d(t,{BZ:function(){return _},HX:function(){return x},WM:function(){return E},ap:function(){return A},gF:function(){return I},l9:function(){return T},vi:function(){return B},zu:function(){return k}});var r=n(41733),i=n(21262),o=n(71440),a=n(18442),l=n(41507),c=n(94563),s=n(71481),u=n(57100),d=n(60100),f=n(58995),h=n(99165);function p(){var e=(0,i._)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    lastPublishedAt\n    publishedAs\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    currentUserPermissions {\n      containerAttach\n      changeIconUrl\n      changeTemplateLabel\n      changeTitle\n      changeDescription\n      changePrivacy\n      delete\n      changeAlwaysOn\n      publish\n      fork\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...BulkDeleteConfirmationModalRepl\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function m(){var e=(0,i._)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  query CurrentUserStates {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n      }\n    }\n  }\n"]);return v=function(){return e},e}function g(){var e=(0,i._)(["\n  query ReplPowerUpStatus {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userPowerUpsByType {\n          ... on UserPowerUpsTypes {\n            privateRepls {\n              active\n              cost {\n                cycles\n                explanation\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function w(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return w=function(){return e},e}var Z={},x=(0,o.Ps)(p(),a._,l.s,c.sY,s.wd,u.d),C=(0,o.Ps)(m(),x);function _(e){var t=(0,r._)({},Z,e);return f.a(C,t)}var S=(0,o.Ps)(v());function k(e){var t=(0,r._)({},Z,e);return f.a(S,t)}var E=(0,o.Ps)(g());function T(e){var t=(0,r._)({},Z,e);return f.a(E,t)}var R=(0,o.Ps)(y(),d.FW);function I(e){var t=(0,r._)({},Z,e);return h.D(R,t)}var D=(0,o.Ps)(b(),x);function B(e){var t=(0,r._)({},Z,e);return h.D(D,t)}var G=(0,o.Ps)(w());function A(e){var t=(0,r._)({},Z,e);return h.D(G,t)}},17272:function(e,t,n){n.d(t,{Z:function(){return tb}});var r=n(41733),i=n(30509),o=n(66626),a=n(74985),l=n(28266),c=n.n(l),s=n(43182),u=n(50959),d=n(83003),f=n(64393),h=n(18394),p=n(57967),m=n(57795),v=n(85733),g=n(69170),y=n(39271),b=n(53399),w=n(61839),Z=n(60305),x=n(95702),C=n(11618),_=n(27387),S=n(42516),k=n(96583),E=n(29609),T=n(21262),R=n(71440),I=n(58995);function D(){var e=(0,T._)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return D=function(){return e},e}var B={},G=(0,R.Ps)(D()),A=n(15235),P=n(71089),N=n(18060),L=n(16923),O=n(99236),U=n(82230),M=n(64432),X=n(94778),F=n(29318),W=n(8147),H=n(87128),V=n(72093),z=n(56731),j=n(56412),q=n(85438),J=n(18158),Y=n(36559),K=n(71481),$=n(28800),Q=n(47048),ee=n(99165);function et(){var e=(0,T._)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return et=function(){return e},e}var en={},er=(0,R.Ps)(et()),ei=X.K.form;function eo(e){if(0===e.length)return{message:"You cannot leave this empty."}}function ea(e){var t,n,r=e.changeType;return r===q.J5.NewFile?(t=V.TV.accentPositiveStronger,n="Added"):r===q.J5.DeletedFile?(t=V.TV.accentNegativeStronger,n="Deleted"):(t=V.TV.foregroundDefault,n="Changed"),(0,a.tZ)(U.xv,{variant:"small",css:[{color:t}],multiline:!1,children:n})}function el(e){var t=e.pendingChangesState,n=e.isReplitTemplate;if(t.loading)return(0,a.tZ)(X.G,{css:[V.l0.center],children:(0,a.tZ)(F.Z,{})});if(t.error)return(0,a.tZ)(O.E,{icon:(0,a.tZ)(H.Z,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return n?null:(0,a.tZ)(U.xv,{children:"No changes to publish. Come back when you have made changes to your Repl."});var r=t.pendingChanges,i=r.slice(0,15);return(0,a.BX)(X.G,{css:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:V.TV.space8}],children:[i.map(function(e){return(0,a.BX)(u.Fragment,{children:[(0,a.BX)(X.G,{css:[V.l0.rowWithGap(4),V.l0.align.center],children:[(0,a.tZ)(L.Z,{size:12,path:e.fileName}),(0,a.tZ)(U.xv,{multiline:!1,children:e.fileName})]},e.fileName),(0,a.tZ)(ea,{changeType:e.changeType})]},e.fileName)}),r.length>i.length&&(0,a.BX)(U.xv,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}function ec(e){var t,n=e.repl,i=function(){var e,t=(0,o._)((e=(0,r._)({},en,{refetchQueries:["ReplEnvironmentHeader"]}),ee.D(er,e)),2),n=t[0];function i(){return(i=(0,_._)(function(e){var t;return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,n({variables:{input:e.input}})];case 1:return[2,{data:(t=r.sent()).data,error:function(e){if(!e.data)return null;var t=e.data;if("revertReplRelease"in t){if("NotFoundError"===t.revertReplRelease.__typename||"UnauthorizedError"===t.revertReplRelease.__typename||"UserError"===t.revertReplRelease.__typename)return t.revertReplRelease.message;if("Repl"!==t.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}(t)}]}})})).apply(this,arguments)}return{revertTemplateRelease:function(e){return i.apply(this,arguments)},state:t[1]}}(),l=(t=(0,_._)(function(e){return(0,k.Jh)(this,function(t){switch(t.label){case 0:return[4,i.revertTemplateRelease({input:{replId:n.id,releaseId:e}})];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)});return(0,a.BX)(X.G,{children:[(0,a.tZ)(U.h4,{level:1,variant:"subheadBig",css:[V.l0.mb(16)],children:"Existing Releases"}),(0,a.tZ)(X.G,{css:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:V.TV.space8}],children:n.releases.items.map(function(e){var t,r;return(0,a.BX)(u.Fragment,{children:[(0,a.tZ)("span",{children:(0,j.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,a.tZ)("span",{children:e.description}),(0,a.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(r=n.deployment)||void 0===r?void 0:null===(t=r.activeRelease)||void 0===t?void 0:t.id)?(0,a.tZ)("span",{css:[V.l0.p(4),{display:"flex"}],children:"(active)"}):(0,a.tZ)(A.zx,{text:"revert",colorway:"primary",size:"small",onClick:function(){l(e.id)}})})]},e.id)})})]})}function es(e){var t=e.children;return(0,a.tZ)(X.G,{css:[V.l0.rowWithGap(8),V.l0.py(2)],children:t})}function eu(e){var t,n,l,c,s,d,f,h,p,m=e.repl,v=(0,z.U)(),g=(0,o._)((0,u.useState)(!1),2),y=g[0],b=g[1],w=(0,o._)((0,u.useState)(!1),2),Z=w[0],x=w[1],C=(t=function(e){var t,n,i,o,a=(i={variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1},o=(0,r._)({},B,i),I.a(G,o)),l=a.data,c=a.loading,s=a.error;if(c)return{loading:c,pendingChanges:null,error:null};if(s)return{loading:!1,pendingChanges:null,error:s};var u=(null==l?void 0:l.repl.__typename)==="Repl"?l.repl:null;return u?{loading:!1,pendingChanges:(null===(n=u.deployment)||void 0===n?void 0:null===(t=n.activeRelease)||void 0===t?void 0:t.pendingChanges)||[],error:s}:{loading:!1,pendingChanges:null,error:Error("Repl not found")}}({replId:{replId:m.id}.replId}),n=(0,u.useMemo)(function(){return t.pendingChanges?t.pendingChanges.slice().sort(function(e,t){return e.fileName.localeCompare(t.fileName)}).map(function(e){return{file:e,pathDepth:(0,Y.U$)(e.fileName)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file}):[]},[t.pendingChanges]),(0,i._)((0,r._)({},t),{pendingChanges:n})),T=(0,Q.r)(),R=(0,E.Y)("",eo),D=(null===(c=C.pendingChanges)||void 0===c?void 0:c.length)!==0,P=(null===(s=m.user)||void 0===s?void 0:s.username)===J.IU||(null===(d=m.user)||void 0===d?void 0:d.username)==="templates",L=(0,o._)((0,u.useState)({ran:!1,tested:!1}),2),F=L[0],j=L[1];(0,u.useEffect)(function(){j({ran:!1,tested:!1})},[j]);var q=!!(R.error||!P&&!D||T.loading||P&&(!F.ran||!F.tested)),K=P&&(null===(h=m.releases)||void 0===h?void 0:null===(f=h.items)||void 0===f?void 0:f.length)>1,ee="";return(R.error?ee="Please fill out the form":P||D||(ee="No changes to publish in this release"),y)?(0,a.tZ)($.q,{repl:m,isUpdate:!0}):Z?(0,a.tZ)(X.G,{css:[V.l0.p(16),V.l0.colWithGap(16)],children:(0,a.tZ)(ec,{repl:m})}):(0,a.BX)(ei,{onSubmit:(l=(0,_._)(function(e){return(0,k.Jh)(this,function(t){switch(t.label){case 0:if(e.preventDefault(),q||R.validate())return[2];return[4,T.createRelease({input:{replId:m.id,description:R.value}})];case 1:if(t.sent().error)return[2];return b(!0),[2]}})}),function(e){return l.apply(this,arguments)}),css:[V.l0.colWithGap(24),V.l0.p(16)],children:[(0,a.tZ)(U.h4,{level:1,variant:"headerDefault",children:"Publish a new release"}),(0,a.BX)(X.G,{css:[V.l0.colWithGap(8)],children:[(0,a.tZ)(U.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,a.tZ)(el,{pendingChangesState:C,isReplitTemplate:P})]}),P||D?(0,a.BX)(X.G,{css:[V.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:v("description"),css:[V.l0.color.foregroundDimmer,{fontSize:V.TV.fontSizeSmall,lineHeight:V.TV.lineHeightSmall}],children:"Description"}),(0,a.tZ)(N.B,{id:v("description"),"aria-label":"Description",onChange:function(e){return R.setValue(e.target.value)},css:[V.l0.width("100%"),V.l0.minHeight(64),V.l0.maxHeight(128),{resize:"vertical"}],placeholder:"Explain what has changed about your template"}),R.error?(0,a.tZ)(O.E,{icon:(0,a.tZ)(H.Z,{}),text:null===(p=R.error)||void 0===p?void 0:p.message,colorway:"negative"}):null]}):null,P?(0,a.tZ)(ed,{repl:m,state:F,onChange:function(e,t){return j(function(n){return(0,i._)((0,r._)({},n),(0,S._)({},e,t))})}}):null,(0,a.tZ)(X.G,{children:T.error?(0,a.tZ)(O.E,{icon:(0,a.tZ)(H.Z,{}),text:T.error,colorway:"negative"}):null}),(0,a.BX)(X.G,{css:[V.l0.rowWithGap(12),V.l0.justify.end],children:[K?(0,a.tZ)(A.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return x(!0)}}):null,(0,a.tZ)(M.u,{tooltip:ee,placement:"bottom",isDisabled:!ee,children:(0,a.tZ)(A.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,a.tZ)(W.Z,{}),disabled:q})})]})]})}function ed(e){var t,n,r,i=e.repl,o=e.state,l=e.onChange,c=(0,z.U)(),s=(0,K.e9)(),u=s.data,d=s.loading,f=null==u?void 0:null===(t=u.currentUser)||void 0===t?void 0:t.username;return(0,a.BX)(X.G,{css:[V.l0.colWithGap(12)],children:[(0,a.tZ)(U.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,a.BX)(X.G,{children:[(0,a.BX)(es,{children:[(0,a.tZ)(P.X,{id:c("ran"),checked:o.ran,onChange:function(e){return l("ran",e)}}),(0,a.tZ)("label",{htmlFor:c("ran"),children:"Ran Repl:"}),(0,a.BX)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,a.tZ)("code",{children:".upm"}),"."]})]}),(0,a.BX)(es,{children:[(0,a.tZ)(P.X,{id:c("tested"),checked:o.tested,onChange:function(e){return l("tested",e)}}),(0,a.tZ)("label",{htmlFor:c("tested"),children:"Ran tests:"}),(0,a.BX)("span",{children:['I ran "Test working copy" for @',null===(n=i.user)||void 0===n?void 0:n.username,"/",i.slug," in"," ",(0,a.tZ)("a",{href:"https://template-tester.replit.app/",target:"_blank",children:"template tester"}),". ",(0,a.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),d||(null===(r=i.user)||void 0===r?void 0:r.username)!==f?null:(0,a.tZ)(O.E,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}var ef=n(97046),eh=n(84573),ep=n(91925),em=n(33146),ev=n(54590),eg=n(45271),ey=n(64479),eb=n(77361),ew=n(17519),eZ=n(18123),ex=n(89421),eC=n(85421),e_=n(96955),eS=n(21075),ek=n(43312),eE=n(4565),eT=n(71730),eR=n(73064),eI=n(49224),eD=n(76575),eB=n(76171),eG=n(24857),eA=n(98308),eP=(0,ek.F4)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),eN=(0,ek.iv)([V.l0.position.relative,V.l0.cursor.pointer,V.l0.backgroundColor.backgroundHigher,V.l0.borderRadius(4),V.l0.p(2),{input:[V.l0.position.absolute,V.l0.top(0),V.l0.left(0),V.l0.width("100%"),V.l0.height("100%"),V.l0.zIndex(-1),{opacity:0}]}]),eL=(0,ek.iv)([V.l0.color.accentPrimaryDefault,V.l0.position.absolute,V.l0.top(0),V.l0.left(0),V.l0.width("100%"),V.l0.height("100%"),V.l0.borderRadius(4),V.l0.backgroundColor.backgroundRoot,V.l0.overflow("hidden"),V.l0.display.flex,V.l0.align.center,V.l0.justify.center]),eO=(0,eI.X)({addIcon:[eN,V.l0.display.flex,V.l0.align.center,V.l0.justify.center,V.l0.border({width:1,color:V.TV.foregroundDimmest}),V.l0.backgroundColor.backgroundRoot,{"&:hover":[V.l0.color.accentPrimaryDefault,{borderColor:V.TV.accentPrimaryDefault}]}],updateIcon:[eN,{"&:hover .hover-state":{opacity:.8}}],hoverState:[eL,{opacity:0}],loadingState:[eL,{opacity:.8}],loadingIcon:[V.l0.display.flex,V.l0.align.center,V.l0.justify.center,{animation:"".concat(eP," 1s linear infinite")}],error:[{fontSize:V.TV.fontSizeDefault,color:V.TV.accentNegativeDefault}]});function eU(e){var t=(0,u.useRef)(null),n=(0,o._)((0,u.useState)(e.value),2),r=n[0],i=n[1],l=(0,o._)((0,u.useState)(null),2),c=l[0],s=l[1],d=(0,eT.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){i(e.dataUrl)},onError:function(e){s(e.message)}});(0,u.useEffect)(function(){i(e.value)},[e.value]);var f=null==r?void 0:r.startsWith("data:");return(0,a.BX)(eG.gC,{spacing:4,children:[(0,a.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},css:r?eO.updateIcon:eO.addIcon,"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[r?(0,a.BX)(a.HY,{children:[(0,a.tZ)(eE.Z,{iconUrl:r,size:32,alt:"icon"}),f?(0,a.tZ)("div",{css:eO.loadingState,children:(0,a.tZ)("div",{css:eO.loadingIcon,children:(0,a.tZ)(F.Z,{})})}):(0,a.tZ)("div",{css:eO.hoverState,className:"hover-state",children:(0,a.tZ)(eD.Z,{})})]}):(0,a.tZ)(eB.Z,{size:32}),(0,a.tZ)("input",{ref:t,accept:eR.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&(null==r?void 0:r.length)&&(s(null),d.uploadImage(r[0],eA.N.TemplateIcon))}})]}),c?(0,a.tZ)("div",{css:eO.error,children:c}):null]})}var eM=n(61967),eX=n(94311),eF=n(85638),eW=n(85763),eH=n(641),eV=n(55524),ez=n(64318),ej=n(72452),eq=n(44049),eJ=n(31892),eY=n(55821),eK=n(63685),e$=n(13033),eQ=n(66958),e0=n(49580),e1=n(12605),e2=n(53021),e3=n(12202),e4=n(59786),e8=(0,eI.X)({prose:[{"& ul, & ol":{marginLeft:16,paddingBlock:4},"& ul":{listStyle:"initial"},"& a":V.l0.linkStyle,"& h1, & h2, & h3":{display:"block",marginBottom:8},"& * + h1, & * + h2, & * + h3":{marginTop:8}}]}),e6=function(e){var t=e.children,n=e.variant;return(0,a.tZ)(U.xv,{multiline:!0,css:e8.prose,variant:n,children:u.Children.map(t,function(e){return"string"==typeof e?(0,a.tZ)("span",{children:e}):e})})},e5=n(59947),e9=n(57693),e7=n(81199),te=n(65377),tt=n(91893),tn=n(69880),tr=n(72658);function ti(){var e=(0,T._)(["\n  mutation CreateProjectBeforeFork($input: CreateProjectInput!) {\n    createProject(input: $input) {\n      __typename\n      ... on Error {\n        message\n      }\n      ... on Project {\n        id\n        mainRepl {\n          id\n          project {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return ti=function(){return e},e}var to={},ta=(0,R.Ps)(ti()),tl=n(32501),tc=(0,eI.X)({dialog:[V.l0.py(2),V.l0.colWithGap(8)],actions:[V.l0.display.grid,{gridTemplateColumns:"1fr min-content min-content",alignItems:"center",justifyContent:"center",gap:8,"& > :first-child":{marginRight:"auto"}}],setupItem:[V.l0.rowWithGap(8),V.l0.align.center]}),ts=function(e){var t=e.text,n=e.icon;return(0,a.BX)(X.G,{css:tc.setupItem,tag:"li",children:[n,(0,a.tZ)(U.xv,{children:t})]})},tu=function(e){switch(e.state){case"complete":return(0,a.tZ)(ts,{text:"Git Repository initialized!",icon:(0,a.tZ)(e5.Z,{color:te.TV.accentPositiveStronger})});case"loading":return(0,a.tZ)(ts,{text:"Loading...",icon:(0,a.tZ)(F.Z,{})});case"creating":return(0,a.tZ)(ts,{icon:(0,a.tZ)(F.Z,{}),text:"Creating your git repository..."});case"needs-setup":return(0,a.tZ)(ts,{text:"We will create a Git Repository automatically for you.",icon:(0,a.tZ)(e9.Z,{})})}},td=function(e){switch(e.state){case"complete":return(0,a.tZ)(ts,{text:"Project created!",icon:(0,a.tZ)(e5.Z,{color:te.TV.accentPositiveStronger})});case"loading":return(0,a.tZ)(ts,{text:"Loading...",icon:(0,a.tZ)(F.Z,{})});case"creating":return(0,a.tZ)(ts,{icon:(0,a.tZ)(F.Z,{}),text:"Creating your project..."});case"needs-setup":return(0,a.tZ)(ts,{text:"A Replit Project will be created for you.",icon:(0,a.tZ)(e9.Z,{})})}};function tf(){var e;return(0,tn.Z)((e=(0,_._)(function(e){var t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=n.sent()).error)return[2,{error:t.error,needsToInitGitRepo:!1}];if(t.type===tr.y5.INITIALIZING)return[2,{error:null,needsToInitGitRepo:!0}];return[2,{error:null,needsToInitGitRepo:!1}]}})}),function(t){return e.apply(this,arguments)}))}var th=function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},tp=function(e){var t,n,i,l,c,s,d,h,p,m,v=e.onRequestClose,g=tf(),b=(0,tl.J)(),w=(0,o._)((t=(0,e7.Z)().git,i=(n=(0,o._)((0,u.useState)(!1),2))[0],l=n[1],[i,(0,u.useCallback)((0,_._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:l(!0),e.label=1;case 1:return e.trys.push([1,,4,5]),[4,t.init({includeAllInitialFiles:!0,initialCommit:!0})];case 2:return e.sent(),t.forceRefresh(),[4,th(500)];case 3:return e.sent(),[3,5];case 4:return l(!1),[7];case 5:return[2]}})}),[t])]),2),Z=w[0],x=w[1],C=(0,o._)((c=(0,y.Z)(),h=(d=(0,o._)((s=(0,r._)({},to,{}),ee.D(ta,s)),2))[0],p=d[1],[(0,u.useCallback)(function(e){return h({variables:{input:{mainReplId:c,orgId:e}}})},[c,h]),p]),2),S=C[0],E=C[1].loading,T=(0,f.g)().fork,R=null===g?"loading":Z?"creating":g.needsToInitGitRepo?"needs-setup":"complete",I=b.loading?"loading":E?"creating":b.hasProject?"complete":"needs-setup",D=(m=(0,_._)(function(){var e,t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:var r,i;if(Z||"loading"===R||"loading"===I||E||null===(e=(null===(r=b.data)||void 0===r?void 0:r.repl.__typename)==="Repl"&&(null===(i=b.data.repl.org)||void 0===i?void 0:i.id)||null))return[2];return[4,Promise.all([x(),S(e)])];case 1:return(t=o._.apply(void 0,[n.sent(),2]))[0],t[1],[4,th(5e3)];case 2:return n.sent(),v(),T(),[2]}})}),function(){return m.apply(this,arguments)}),B=Z||E||"loading"===R||"loading"===I;return(0,a.BX)(tt.l0,{css:tc.dialog,onSubmit:function(e){e.preventDefault(),D()},children:[(0,a.BX)(e6,{children:[(0,a.tZ)(U.h4,{level:1,variant:"subheadDefault",children:"Planning to merge your changes back into this Repl?"}),"Consider starting a Project. This allows you to:",(0,a.BX)("ul",{children:[(0,a.tZ)("li",{children:"Create forks of this Repl to make changes in separate environments, and easily merge your changes back in"}),(0,a.tZ)("li",{children:"Inherit secrets and environment configuration when you fork"}),(0,a.tZ)("li",{children:"View all ongoing development in one place"})]})]}),(0,a.BX)("ul",{children:[(0,a.tZ)(tu,{state:R}),(0,a.tZ)(td,{state:I})]}),(0,a.BX)(X.G,{css:tc.actions,children:[(0,a.tZ)(eF.Z,{disabled:B,target:"_blank",href:"docs.replit.com",text:"Learn more",variant:"underlinedOnHover",colorway:"primary"}),(0,a.tZ)(A.zx,{loading:B,text:"Fork separately",onClick:function(){v(),T()}}),(0,a.tZ)(A.zx,{loading:B,text:"Create project",colorway:"primary",type:"submit"})]})]})},tm=(0,eI.X)({destructiveMenuItem:[V.l0.color.accentNegativeStronger]});function tv(e){var t=e.repl,n=(0,p.Z)(),o=(0,u.useMemo)(function(){return t.user?{text:t.user.username,css:[{"&, & span":V.l0.flex.shrink(1)}],iconLeft:(0,a.tZ)(eX.q,{src:t.user.image,username:t.user.username,size:24})}:{text:""}},[t]);if(!t.user)return null;var l=(0,eH.Ru)(t.user);return n?(0,a.tZ)(A.zx,(0,i._)((0,r._)({},o),{onClick:function(){eK.X.openExternalUrl(l.as)}})):(0,a.tZ)(eF.Z,(0,i._)((0,r._)({},o,l),{prefetch:!1}))}function tg(e){var t=e.setActiveDialog,n=e.repl,l=e.isTemplate,c=e.updateIconUrl,s=e.showCloseButton,d=e.setIsEditing,h=e.updateReplInfo,m=(0,e1.Z)(),v=!!n.publishedAs,g=(0,o._)((0,u.useState)(!1),2),y=g[0],b=g[1],w=n.currentUserPermissions.publish,Z=(0,p.Z)(),x=!(null==n?void 0:n.publishedAs)&&!Z,C=(null==n?void 0:n.publishedAs)===q.O2.RegularRepl,_=(0,e4.P5)({controlName:"flag-first-class-git"}),k=(0,f.g)().fork,E=tf(),T=(0,tl.J)(),R=(0,u.useCallback)(function(){if(!_)return k();var e=E&&!E.error&&E.needsToInitGitRepo,t=!T.loading&&!T.hasProject;return!T.loading&&T.isEligibleForProject&&(e||t)?b(!0):k()},[k,_,E,T]),I=[];n.currentUserPermissions.fork&&I.push({value:e2.$.Fork,label:"Fork",icon:(0,a.tZ)(eJ.Z,{})}),n.publishedAs===q.O2.RegularRepl&&w&&!Z&&I.push({value:e2.$.Unpublish,label:"Unpublish",icon:(0,a.tZ)(eq.Z,{})}),l&&w&&!Z&&I.push({value:e2.$.UnpublishTemplate,label:"Unpublish template",icon:(0,a.tZ)(eq.Z,{})}),v&&w&&!Z&&I.push({value:e2.$.EditPublishSettings,label:"Edit Publish Settings",icon:(0,a.tZ)(eD.Z,{})}),n.currentUserPermissions.delete&&I.push({isDestructive:!0,value:e2.$.Delete,label:"Delete",icon:(0,a.tZ)(eY.Z,{})});var D=(null==n?void 0:n.isPrivate)||!(null==n?void 0:n.isRenamed),B="";return(null==n?void 0:n.isPrivate)?B="This Repl is private. You need to make it public in order to publish it!":(null==n?void 0:n.isRenamed)||(B="You need to give this Repl a name before publishing it."),(0,a.BX)(X.G,{css:[V.l0.colWithGap(8),V.l0.p(8)],children:[(0,a.BX)(X.G,{css:[V.l0.rowWithGap(8),V.l0.align.center,V.l0.justify.spaceBetween,(0,S._)({},V.BC.max("mobileMax"),[V.l0.flex.columnReverse,V.l0.align.start,{gap:V.TV.space8}])],children:[(0,a.BX)(X.G,{css:[V.l0.rowWithGap(8),V.l0.center,V.l0.flex.shrink(1)],children:[(0,a.tZ)(tv,{repl:n}),n.currentUserPermissions.changeIconUrl&&l?(0,a.tZ)(eU,{value:n.iconUrl,onChange:c}):null]}),(0,a.BX)(X.G,{css:[V.l0.align.center,V.l0.rowWithGap(8),(0,S._)({},V.BC.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],children:[Z?null:(0,a.tZ)(eF.Z,(0,i._)((0,r._)({prefetch:!1},(0,eM.j3)(n)),{iconLeft:(0,a.tZ)(ej.Z,{}),colorway:"primary",text:"Cover page",target:"_blank"})),w&&x&&!m?(0,a.tZ)(M.u,{tooltip:B,isDisabled:!D,children:(0,a.tZ)(A.zx,{type:"button",iconLeft:(0,a.tZ)(eB.Z,{}),onClick:function(){t(e2.x.Publish)},dataCy:"ws-publish-button",text:"Publish",disabled:D})}):null,l&&!Z?(0,a.tZ)(A.zx,{type:"button",iconLeft:(0,a.tZ)(eB.Z,{}),onClick:function(){return t(e2.x.UpdatePublishedTemplate)},text:"Update"}):null,C&&!Z?(0,a.tZ)(A.zx,{type:"button",iconLeft:(0,a.tZ)(eV.Z,{}),onClick:function(){return t(e2.x.UpdatePublishedRepl)},text:"Update"}):null,Z?(0,a.tZ)(e3.q,{textToCopy:window.location.href,tooltipText:"Copy Repl URL",tooltipSuccessText:"Copied!",iconLeft:(0,a.tZ)(eQ.Z,{}),text:""}):null,I.length>0&&(0,a.tZ)(e$.ZE,{icon:(0,a.tZ)(e0.Z,{size:16}),"aria-label":l?"Template Actions":"Repl Actions",cssProps:[V.l0.backgroundColor.backgroundDefault],placement:"bottom-end",onAction:function(e){switch(e){case e2.$.Fork:R();return;case e2.$.Unpublish:t(e2.x.Unpublish);return;case e2.$.UnpublishTemplate:t(e2.x.UnpublishTemplate);return;case e2.$.Delete:t(e2.x.DeleteRepl);return;case e2.$.EditPublishSettings:t(e2.x.EditPublishSettings)}},children:I.map(function(e){return(0,a.tZ)(e$.ck,{children:(0,a.BX)(X.G,{css:[V.l0.rowWithGap(8),e.isDestructive&&tm.destructiveMenuItem],children:[e.icon,(0,a.tZ)(X.G,{children:e.label})]})},e.value)})}),s?(0,a.tZ)(eW.hU,{alt:"Close",tooltipBehavior:"hidden",onClick:function(){h(),d(!1)},children:(0,a.tZ)(ez.Z,{})}):null]})]}),n.lastPublishedAt&&w?(0,a.BX)(U.xv,{variant:"small",color:"dimmest",multiline:!1,children:["Last published on"," ",new Date(n.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null,y?(0,a.tZ)(eg.u,{isOpen:!0,onRequestClose:function(){return b(!1)},children:(0,a.tZ)(tp,{onRequestClose:function(){return b(!1)}})}):null]})}var ty={query:m.s8};function tb(e){var t=e.setIsEditing,n=e.showCloseButton,r=e.onDeployClick,i=(0,y.Z)(),o=(0,eS.BZ)({variables:{replId:i}}),l=o.data,c=o.refetch,s=(null==l?void 0:l.repl.__typename)==="Repl"?l.repl:null;return s?(0,a.tZ)(tw,{setIsEditing:t,showCloseButton:n,repl:s,refetch:c,onDeployClick:r}):(0,a.tZ)(X.G,{css:[V.l0.center,V.l0.p(16)],children:(0,a.tZ)(F.Z,{})})}function tw(e){var t,n,l,m=e.repl,y=e.showCloseButton,_=e.setIsEditing,S=e.onDeployClick,k=(0,eC.useRouter)(),E=(0,p.Z)(),T=(0,o._)((0,u.useState)(null),2),R=T[0],I=T[1],D=(0,o._)((0,u.useState)(m.isRenamed?m.title:""),2),B=D[0],G=D[1],P=(0,o._)((0,u.useState)(m.description||""),2),L=P[0],O=P[1],M=(0,o._)((0,u.useState)(m.rawTemplateLabel),2),F=M[0],W=M[1],H=(0,eS.zu)().data,j=(0,g.Z)().showError,J=m.publishedAs===q.O2.Template;(0,u.useEffect)(function(){O(m.description||"")},[m.description]);var Y=(0,x.Z)(),K=(0,u.useRef)(m),$=(0,o._)((0,eS.ap)({variables:{id:m.id},onCompleted:function(){if(E){k.push("/desktopApp/home");return}k.push("/home","/~")},update:function(e,t){var n;(null===(n=t.data)||void 0===n?void 0:n.deleteRepl)&&(e.evict({id:e.identify(t.data.deleteRepl)}),e.gc())},onError:function(e){return j((0,b.Z)(e.message))}}),2),Q=$[0],ee=$[1].loading,et=(0,o._)((0,eS.vi)({onError:function(e){return j((0,b.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=K.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url,k.push({pathname:Y,query:{replUrl:t.url}},t.url+window.location.search+window.location.hash)),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),K.current=m,Object.keys(r).length>0&&_(!1)}}),2),en=et[0],er=et[1].loading,ei=(0,o._)((0,eS.gF)({variables:{input:{replId:m.id}},onError:function(e){s.Tb(e),j((0,b.Z)(e.message))}}),2),eo=ei[0],ea=ei[1],el=(0,eS.l9)({fetchPolicy:"cache-and-network",ssr:!1}),ec=el.data,es=el.loading,ed=el.error,ek=(0,u.useMemo)(function(){return!!B&&B!==m.title||F!==m.rawTemplateLabel||(""!==L||!!m.description)&&L!==m.description},[m,B,L,F]),eE=(0,v.Z)(ek),eT=(0,u.useCallback)(function(){ek&&en({variables:{input:{id:m.id,title:B.trim()||m.title,description:L,templateLabel:m.currentUserPermissions.changeTemplateLabel?F:void 0}}})},[ek,en,m,B,L,F]),eR=(0,v.Z)(eT);(0,u.useLayoutEffect)(function(){return function(){eE.current&&eR.current()}},[eR,eE]);var eI=(0,u.useCallback)(function(e){switch(e){case"private":var t,n,r;return(null==ec?void 0:null===(t=ec.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)==="UserPowerUpsTypes"?null===(r=ec.currentUser.userPowerUpsByType)||void 0===r?void 0:null===(n=r.privateRepls.cost)||void 0===n?void 0:n.explanation:null;case"always-on":case"gpu":return null;default:(0,e_.Z)(e)}},[ec]),eD=function(){en({variables:{input:{id:m.id,isPrivate:!m.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i._)((0,r._)({},m),{isPrivate:!m.isPrivate})}},refetchQueries:[{query:eS.WM,variables:{replId:m.id}},ty]}),(0,Z.j)(Z.U3.PRIVATE_TOGGLED,{enabled:!m.isPrivate,source:"workspace_info_modal"})},eB=m.isRenamed?"Name your Repl":"Default name: ".concat(m.title),eG=[q.Sy.Submit,q.Sy.PublishTemplate,q.Sy.EditTemplate].includes(m.workspaceCta),eA=(0,z.U)(),eP=(null===(t=m.owner)||void 0===t?void 0:t.__typename)==="Team",eN=m.hostingDeploymentPermissions.canDeploy&&"function"==typeof S,eL="/replEnvironmentDesktop"===Y&&eN,eO=(null===(n=m.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"&&m.hostingDeployment.currentBuild;return(0,a.BX)("div",{css:{overflow:"auto",maxHeight:"80vh"},className:c().dynamic([["2a8dddb54f0c0922",[m.currentUserPermissions.changeDescription?"auto":"not-allowed"]]]),children:[(0,a.tZ)(f.b,{forkParams:{trackingData:{forkSource:"editReplPopoverMenuItem"}},repl:m,teamContext:null===(l=m.user)||void 0===l?void 0:l.username,children:(0,a.tZ)(tg,{repl:m,isTemplate:J,showCloseButton:y,setActiveDialog:I,setIsEditing:_,updateIconUrl:function(e){return en({variables:{input:{id:m.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i._)((0,r._)({},m),{iconUrl:e})}}})},updateReplInfo:eT})}),(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),eT()},className:c().dynamic([["2a8dddb54f0c0922",[m.currentUserPermissions.changeDescription?"auto":"not-allowed"]]]),children:(0,a.BX)(X.G,{css:[V.l0.align.stretch,V.l0.colWithGap(16)],children:[(0,a.BX)(ey.Tg,{background:"default",css:[V.l0.colWithGap(16)],children:[(0,a.tZ)(X.G,{css:[V.l0.flex.column],children:(0,a.BX)(X.G,{css:[V.l0.colWithGap(4)],children:[(0,a.BX)(X.G,{css:[V.l0.flex.row,V.l0.justify.spaceBetween,V.l0.align.end],children:[(0,a.tZ)("label",{htmlFor:eA("name"),className:c().dynamic([["2a8dddb54f0c0922",[m.currentUserPermissions.changeDescription?"auto":"not-allowed"]]]),children:(0,a.tZ)(U.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,a.tZ)(h.Z,{maxLength:60,value:B,hideLabel:!0})]}),(0,a.tZ)(N.II,{style:{cursor:m.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!m.currentUserPermissions.changeTitle,maxLength:60,placeholder:eB,value:B,onChange:function(e){return G(e.target.value)},spellCheck:!1,id:eA("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,a.tZ)(X.G,{css:[V.l0.flex.column],children:(0,a.BX)(X.G,{css:[V.l0.colWithGap(4)],children:[(0,a.BX)(X.G,{css:[V.l0.flex.row,V.l0.justify.spaceBetween,V.l0.align.end],children:[(0,a.tZ)("label",{htmlFor:eA("description"),className:c().dynamic([["2a8dddb54f0c0922",[m.currentUserPermissions.changeDescription?"auto":"not-allowed"]]]),children:(0,a.tZ)(U.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,a.tZ)(h.Z,{maxLength:ep.p,value:L,hideLabel:!0})]}),(0,a.tZ)(N.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!m.currentUserPermissions.changeDescription,maxLength:ep.p,value:L,onChange:function(e){return O(e.target.value)},placeholder:"What does this Repl do?",css:[V.l0.minHeight(96),V.l0.maxHeight(256),{resize:"vertical"}],id:eA("description")})]})})]}),J&&m.currentUserPermissions.changeTemplateLabel?(0,a.tZ)(ey.Tg,{background:"default",css:[V.l0.colWithGap(4)],children:(0,a.BX)(X.G,{css:[V.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:eA("template"),className:c().dynamic([["2a8dddb54f0c0922",[m.currentUserPermissions.changeDescription?"auto":"not-allowed"]]]),children:(0,a.tZ)(U.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,a.tZ)(N.II,{value:F,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return W(e.target.value)},id:eA("template")})]})}):null]})}),eG?null:(0,a.BX)(X.G,{css:[V.l0.colWithGap(24),V.l0.p(8),V.l0.pt(0)],children:[m.currentUserPermissions.changePrivacy===q.HA.Allowed&&(0,a.BX)(X.G,{css:[V.l0.colWithGap(8)],children:[(0,a.BX)(ev.hE,{tag:"fieldset",name:eA("privacy"),value:m.isPrivate.toString(),onChange:function(){if(!er){if(m.isPrivate||m.currentUserPermissions.changePrivacy===q.HA.Allowed&&(null===(e=m.user)||void 0===e?void 0:e.id)!=null&&(null==H?void 0:null===(t=H.currentUser)||void 0===t?void 0:t.id)!=null&&m.user.id!==H.currentUser.id){eD();return}var e,t,n,r,i=(null==ec?void 0:null===(n=ec.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)==="UserPowerUpsTypes"&&(null===(r=ec.currentUser.userPowerUpsByType)||void 0===r?void 0:r.privateRepls.active),o=eI("private");if(null==o||es){j("You're too fast for us! Please try again in a moment.");return}if(ed){j("This action is currently unavailable. Please refresh and try again.");return}if((0,Z.j)(Z.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!m.isPrivate,source:"workspace_info_modal",costExplanation:o}),i){eD();return}I(e2.x.PowerUp)}},row:!0,primary:!0,stretch:!0,children:[(0,a.tZ)(ev.rK,{id:eA("false"),value:"false",text:"Public",icon:(0,a.tZ)(ew.Z,{})}),(0,a.tZ)(ev.rK,{id:eA("true"),value:"true",text:"Private",icon:(0,a.tZ)(eZ.Z,{})})]}),(0,a.tZ)(U.xv,{variant:"small",color:"dimmest",children:(0,w.Z)(m.isPrivate,eP)})]}),eL?(0,a.tZ)(X.G,{css:V.l0.colWithGap(8),children:(0,a.tZ)(A.zx,{text:eO?"Redeploy your project":"Deploy your project",iconLeft:(0,a.tZ)(eb.Z,{}),colorway:eO?void 0:"primary",onClick:function(){S(),eO||(0,Z.j)(Z.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_info_modal"})}})}):null]}),(0,a.tZ)(em.Z,{isOpen:R===e2.x.DeleteRepl,onClose:function(){return I(null)},selectedRepls:[m],onDelete:function(){Q()},deleting:ee}),(0,a.tZ)(ex.Z,{isOpen:R===e2.x.PowerUp,onClose:function(){return I(null)},type:"purchase",analyticsContext:{upgrade:{context:"workspace_info_modal"}}}),(0,a.tZ)(eg.u,{isOpen:R===e2.x.Unpublish,onRequestClose:function(){return I(null)},children:(0,a.tZ)(eh.Z,{repl:m,source:"replEnvironment",onDone:function(){I(null)}})}),(0,a.tZ)(eg.u,{isOpen:R===e2.x.UnpublishTemplate,onRequestClose:function(){return I(null)},children:(0,a.tZ)(d.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return I(null)},onConfirm:function(){ea.loading||(eo(),I(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,a.tZ)(eg.u,{isOpen:R===e2.x.EditPublishSettings,onRequestClose:function(){return I(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.tZ)(C.Z,{source:"replEnvironment",replId:m.id})}),(0,a.tZ)(eg.u,{isOpen:R===e2.x.Publish,onRequestClose:function(){return I(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.tZ)(C.Z,{source:"replEnvironment",replId:m.id})}),(0,a.tZ)(eg.u,{isOpen:R===e2.x.UpdatePublishedTemplate,onRequestClose:function(){return I(null)},noPadding:!0,children:(0,a.tZ)(eu,{repl:m})}),(0,a.tZ)(eg.u,{isOpen:R===e2.x.UpdatePublishedRepl,onRequestClose:function(){return I(null)},children:(0,a.tZ)(ef.Z,{repl:m,onDone:function(){return I(null)},source:"replEnvironment"})}),(0,a.tZ)(c(),{id:"2a8dddb54f0c0922",dynamic:[m.currentUserPermissions.changeDescription?"auto":"not-allowed"],children:"form.__jsx-style-dynamic-selector{padding:var(--space-8)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(m.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}@media screen and (max-width:480px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})}},41507:function(e,t,n){n.d(t,{s:function(){return l}});var r=n(21262),i=n(71440),o=n(18442);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    user {\n      id\n      ...UserLinkUser\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o._)},69940:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(42516),i=n(74985),o=n(72333),a=n(82230),l=n(94778),c=n(49224),s=n(72093),u=n(8775),d=n(20856),f=n(64432),h=(0,c.X)({metadata:[s.l0.rowWithGap(6),s.l0.align.center,s.l0.flex.growAndShrink(1)],iconWrapper:[s.l0.position.relative,s.l0.display.none,(0,r._)({},s.BC.min("tabletMax"),[s.l0.display.flex])],dimIcon:[{opacity:.2}],diconnectedIcon:[s.l0.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[s.l0.flex.shrink(1),s.l0.truncate]});function p(e){var t=e.repl,n=(0,u.Z)().didDisconnect;return(0,i.BX)(l.G,{css:h.metadata,children:[(0,i.BX)(l.G,{css:h.iconWrapper,children:[(0,i.tZ)(l.G,{css:n&&h.dimIcon,children:(0,i.tZ)(o.ZP,{iconUrl:t.iconUrl,size:20,alt:""})}),n?(0,i.tZ)(f.u,{tooltip:"Reconnecting",children:(0,i.tZ)(d.Z,{size:16,css:h.diconnectedIcon})}):null]}),(0,i.tZ)(a.xv,{multiline:!1,css:h.title,"data-cy":"header-repl-title",color:n?"dimmer":"default",children:t.title})]})}},53021:function(e,t,n){var r,i,o,a;n.d(t,{$:function(){return i},x:function(){return r}}),(o=r||(r={})).DeleteRepl="DeleteRepl",o.PowerUp="PowerUp",o.BuyCycles="BuyCycles",o.Unpublish="Unpublish",o.UnpublishTemplate="UnpublishTemplate",o.EditPublishSettings="EditPublishSettings",o.Publish="Publish",o.UpdatePublishedTemplate="UpdatePublishedTemplate",o.UpdatePublishedRepl="UpdatePublishedRepl",(a=i||(i={})).Fork="Fork",a.Delete="Delete",a.Unpublish="Unpublish",a.UnpublishTemplate="UnpublishTemplate",a.EditPublishSettings="EditPublishSettings"},8362:function(e,t,n){n.d(t,{ZP:function(){return Q},L7:function(){return $}});var r,i,o,a=n(27387),l=n(42516),c=n(41733),s=n(30509),u=n(66626),d=n(96583),f=n(74985),h=n(43312),p=n(43182),m=n(59695),v=n(83805),g=n(39460),y=n(88205),b=n(21262),w=n(71440),Z=n(58995);function x(){var e=(0,b._)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return x=function(){return e},e}var C={},_=(0,w.Ps)(x()),S=new Date("2022-07-08"),k=(0,y.O4)("useCelebrateFirstReplPlay",!1),E=n(69170),T=n(39271),R=n(36556),I=n(38172),D=n(60305),B=n(82230),G=n(64432),A=n(94778),P=n(60772),N=n(29318),L=n(80888),O=n(61114),U=n(72093),M=n(45929),X=n(98674),F=n(37058),W=n(50959);function H(){var e=(0,b._)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return H=function(){return e},e}var V={},z=(0,w.Ps)(H());function j(e){var t=e.runState,n=e.size,r=void 0===n?16:n;switch(t){case M.Ah.IDLE:return(0,f.tZ)(L.Z,{size:r});case M.Ah.RUNNING:return(0,f.tZ)(O.Z,{size:r});default:return(0,f.tZ)(N.Z,{size:r})}}var q=(r={},(0,l._)(r,M.Ah.IDLE,"Run"),(0,l._)(r,M.Ah.RUNNING,"Stop"),(0,l._)(r,M.Ah.STOPPING,"Stopping"),(0,l._)(r,M.Ah.OFFLINE,"Working"),(0,l._)(r,M.Ah.BEFORE_RUN,"Working"),r),J=(i={small:48,large:100},(0,l._)(i,M.Ah.IDLE,68),(0,l._)(i,M.Ah.RUNNING,72),(0,l._)(i,M.Ah.STOPPING,92),(0,l._)(i,M.Ah.OFFLINE,86),(0,l._)(i,M.Ah.BEFORE_RUN,86),i),Y=(0,h.iv)([U.l0.py(12),U.l0.width(J.small),U.l0.flex.row,U.l0.center,U.l0.borderRadius(),U.l0.backgroundColor.accentPositiveDimmest,U.l0.color.accentPositiveStrongest,U.l0.cursor.pointer,U.l0.focusRing,(o={transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:"transparent",lineHeight:1,outline:"0 none","&:hover":[{color:"white"},U.l0.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:U.TV.accentPositiveStrongest}]},(0,l._)(o,(0,X.et)("tabletMax"),[U.l0.width(J.large)]),(0,l._)(o,":focus-visible",{outlineColor:"".concat(U.TV.accentPositiveStrongest)}),o)]),K=(0,h.iv)([U.l0.color.foregroundDimmer,U.l0.backgroundColor.backgroundHigher,{borderColor:"transparent","&:hover":[{color:"white"},U.l0.backgroundColor.backgroundHighest],"&:active":[{borderColor:U.TV.accentPrimaryDefault}]}]);function $(e){var t=(0,u._)((0,W.useState)(e.getRunState()),2),n=t[0],r=t[1];return(0,W.useEffect)(function(){return r(e.getRunState()),e.onStateChanged(function(e){r(e)})},[e]),n}var Q=W.forwardRef(function(e,t){var n,r,i,o,h,y,b,w,x,N,L,O,H,Q=e.runner,ee=e.runConfig,et=e.onRunInitiated,en=e.style,er=void 0===en?"default":en,ei=e.disableTooltip,eo=e.shortcut,ea=(0,T.Z)(),el=$(Q),ec=(n=(0,c._)({},V,{variables:{id:ea}}),Z.a(z,n)).data,es=(null==ec?void 0:ec.repl.__typename)==="Repl"?ec.repl:null,eu=(r=(0,c._)({},C,void 0),h=Z.a(_,r),y=(0,m.Gn)("extraDelight").preferences.extraDelight,b=(0,v.$0)().fireCircularBurstFrom,x=(w=(0,u._)((0,g.KO)(k),2))[0],N=w[1],L=null!==(o=null===(i=h.data)||void 0===i?void 0:i.currentUser)&&void 0!==o?o:null,O=!x&&L&&new Date(L.timeCreated)>=S,{hasCelebrated:x,celebrate:function(e){if(!e){p.Tb(Error("Cannot find element for celebrate Repl run confetti"));return}(y||O)&&b({element:e}),O&&N(!0)}}).celebrate,ed=el!==M.Ah.IDLE&&el!==M.Ah.RUNNING,ef=(0,E.Z)().showError,eh=(0,W.useRef)(null),ep=(H=(0,a._)(function(){var e,t,n,r,i,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(c.trys.push([0,3,,4]),el!==M.Ah.IDLE)return[3,2];return et&&et(),eh.current&&eu(eh.current),[4,Q.run(ee)];case 1:return c.sent(),es&&(0,D.j)(D.U3.PROJECT_RAN,{placement:"primary_btn",replId:es.id,replTitle:es.title,rootOriginReplUrl:es.rootOriginReplUrl,templateTitle:null===(n=es.source)||void 0===n?void 0:null===(t=n.release)||void 0===t?void 0:null===(e=t.repl)||void 0===e?void 0:e.title,templateOwner:null===(a=es.source)||void 0===a?void 0:null===(o=a.release)||void 0===o?void 0:null===(i=o.repl)||void 0===i?void 0:null===(r=i.owner)||void 0===r?void 0:r.username}),[2];case 2:if(el===M.Ah.RUNNING)return[2,Q.stopRun()];return[3,4];case 3:if(ef((l=c.sent()).toString()),R.kg.error("run button error",{errorMessage:l.message}),el===M.Ah.RUNNING)return[2,Q.stopRun()];return[3,4];case 4:return[2]}})}),function(){return H.apply(this,arguments)});if("floating"===er)return(0,f.tZ)(A.G,{tag:"button",disabled:ed,css:[{position:"fixed",right:24,bottom:72,zIndex:1},U.l0.center,{height:"50px",width:"50px",opacity:"0.5",cursor:"pointer",borderRadius:"100%",border:"solid 2px var(--accent-positive-dimmer)",backgroundColor:U.TV.accentPositiveDimmest}],onClick:ep,innerRef:eh,children:(0,f.tZ)(j,{runState:el})});var em=el===M.Ah.IDLE;return"inline-small"===er?(0,f.BX)("button",{"data-cy":"ws-run-btn",onClick:ep,ref:eh,disabled:ed,css:[U.l0.p(12),U.l0.flex.row,U.l0.center,U.l0.borderRadius(8),em?U.l0.backgroundColor.accentPositiveDimmest:U.l0.backgroundColor.backgroundHigher,em?U.l0.color.accentPositiveStronger:U.l0.color.foregroundDimmer,{border:"1px solid",borderColor:em?U.TV.accentPositiveDimmest:U.TV.backgroundHigher},U.l0.width("100%"),U.l0.height("100%")],children:[(0,f.tZ)(j,{runState:el}),(0,f.tZ)(B.xv,{variant:"subheadDefault",css:[U.l0.pl(8)],multiline:!1,children:q[el]})]}):(0,f.tZ)(G.u,{placement:"bottom",isDisabled:ei||!eo,tooltip:eo?(0,f.tZ)(F.bM,{keyCombo:eo,fontSize:12}):null,children:function(e,n){return(0,f.BX)("button",(0,s._)((0,c._)({},e),{onClick:ep,ref:(0,I.l)(eh,n,t),css:[Y,!em&&K,U.l0.height(32),(0,l._)({transition:"width 80ms ease-out"},(0,X.et)("tabletMax"),U.l0.width(J[el]))],children:[(0,f.tZ)(j,{runState:el,size:12}),(0,f.tZ)(B.xv,{multiline:!1,css:[U.l0.pl(6),U.l0.display.none,U.l0.fontWeight.medium,(0,l._)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(P.j.tabletMax,"px)"),[U.l0.display.block])],children:q[el]})]}))}})})},82496:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(41733),i=n(30509),o=n(98924),a=n(74985),l=n(85763),c=n(49224),s=n(72093),u=(0,c.X)({checked:[s.l0.backgroundColor.backgroundHigher],unchecked:[s.l0.color.foregroundDimmest]});function d(e){var t=e.alt,n=e.icon,c=e.checked,s=e.onClick,d=(0,o._)(e,["alt","icon","checked","onClick"]);return(0,a.tZ)(l.hU,(0,i._)((0,r._)({},d),{css:c?u.checked:u.unchecked,alt:"".concat(c?"Disable":"Enable"," ").concat(t),onClick:s,children:n}))}},54443:function(e,t,n){n.d(t,{Z:function(){return d}});var r,i=n(42516),o=n(74985),a=n(43312),l=n(64432),c=n(55821),s=n(72093),u=(0,a.iv)([s.l0.focusRing,s.l0.display.flex,s.l0.center,s.l0.borderRadius(4),s.l0.backgroundColor.backgroundRoot,s.l0.color.foregroundDefault,s.l0.cursor.pointer,s.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i._)(r,s.wl.hover,[s.l0.backgroundColor.backgroundHigher]),(0,i._)(r,":focus",{outline:"none"}),r)]),d=function(e){var t=e.onClick;return(0,o.tZ)(l.u,{tooltip:"Clear",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Clear",onClick:t,css:u,children:(0,o.tZ)(c.Z,{size:16})})})}},35909:function(e,t,n){n.d(t,{j:function(){return C}});var r=n(27387),i=n(96583),o=n(74985),a=n(38931),l=n(59786),c=n(75993),s=n(20795),u=n(84126),d=n(72164),f=n(16764),h=n(56679),p=n(90493),m=n(1592),v=n(23936),g=n(72093),y=n(37058),b=n(11407),w=n(50959),Z=n(89748),x=n(45795);function C(e){var t,n,C,_,S,k,E,T,R,I,D,B,G,A=e.xterm,P=e.openAIWithMessage,N=e.openShellSearch,L=e.openSearchAndReplace,O=e.openGeneratePrompt,U=e.isOutputsTerminal,M=(n=(t={xterm:A,openAIWithMessage:P,openGeneratePrompt:O}).xterm,C=t.openAIWithMessage,_=t.openGeneratePrompt,S=(0,l.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),k=(0,l.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),E=(0,y.gf)(x.CH.id),(0,w.useMemo)(function(){if(!S){var e=[];if(k&&_&&e.push({match:Z.pl,data:{type:"action",label:"Generate",icon:(0,o.tZ)(h.Z,{color:g.TV.blurpleStronger}),keyboardShortcut:E,run:function(){_()}}}),C&&e.push({match:Z.pl,data:{type:"action",label:"Explain",icon:(0,o.tZ)(f.Z,{color:g.TV.blurpleStronger}),run:function(){var e,t;C((t=null!==(e=null==n?void 0:n._term.getSelection())&&void 0!==e?e:"","\nCan you explain this shell output?\n\n```\n".concat(t,"\n```\n")))}}}),0!==e.length)return{data:{type:"context",label:"AI",icon:(0,o.tZ)(d.Z,{})},commands:function(){return e}}}},[k,S,C,E,_,null==n?void 0:n._term])),X=(R=(T={xterm:A,openShellSearch:N,openSearchAndReplace:L,isOutputsTerminal:void 0!==U&&U}).xterm,I=T.openShellSearch,D=T.openSearchAndReplace,B=T.isOutputsTerminal,(0,w.useMemo)(function(){var e=[];if(I){var t=B?(0,o.tZ)(v.Z,{}):(0,o.tZ)(m.Z,{});e.push({match:Z.pl,data:{type:"action",label:B?"Find in Console":"Find in Shell",icon:t,run:function(){var e;I(null!==(e=null==R?void 0:R._term.getSelection())&&void 0!==e?e:"")}}})}if(D&&e.push({match:Z.pl,data:{type:"action",label:"Find in Repl",icon:(0,o.tZ)(p.Z,{}),run:function(){var e;D(null!==(e=null==R?void 0:R._term.getSelection())&&void 0!==e?e:"")}}}),0!==e.length)return{data:{type:"context",label:"Search",icon:(0,o.tZ)(p.Z,{})},commands:function(){return e}}},[R,I,D,B])),F=(G=function(){return window.navigator.userAgent.includes("Linux")},(0,w.useMemo)(function(){return{data:{type:"context",label:"Clipboard",icon:(0,o.tZ)(s.Z,{})},commands:function(){return[{match:Z.pl,data:{type:"action",label:"Copy",icon:(0,o.tZ)(u.Z,{}),keyboardShortcut:(0,b.l2)({cmdOrCtrl:!0,shift:G(),key:"c"}),run:function(){var e,t=null!==(e=null==A?void 0:A._term.getSelection())&&void 0!==e?e:"";(0,c.Z)(t)}}},{match:Z.pl,data:{type:"action",label:"Paste",icon:(0,o.tZ)(s.Z,{}),keyboardShortcut:(0,b.l2)({cmdOrCtrl:!0,shift:G(),key:"v"}),run:function(){return(0,r._)(function(){var e,t;return(0,i.Jh)(this,function(n){switch(n.label){case 0:e="",n.label=1;case 1:return n.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=n.sent(),[3,4];case 3:return t=n.sent(),a.kg.error("Shell context menu paste failed",{message:t.message}),[2];case 4:return null==A||A._term.paste(e),[2]}})})()}}}]}}},[A]));return(0,w.useMemo)(function(){var e=[];return M&&e.push(M),X&&e.push(X),F&&e.push(F),{data:{type:"context",label:"Search actions",icon:(0,o.tZ)(p.Z,{})},commands:function(){return e}}},[M,X,F])}},85033:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(74985),i=n(28266),o=n.n(i),a=n(72093),l=n(30124),c=n(50959);function s(e){var t=e.searchValue,n=e.setSearchValue,i=e.findNext,s=e.findPrevious,u=e.exit,d=(0,c.useRef)(null);(0,c.useEffect)(function(){d.current&&d.current.focus()},[]);var f=function(e){if("Escape"===e.key){u();return}"Enter"===e.key&&(e.shiftKey?s(t):i(t))};return(0,r.BX)("div",{className:"jsx-cae03adee2975d4 search",children:[(0,r.tZ)("input",{ref:d,placeholder:"Find",value:t,onChange:function(e){return n(e.target.value)},onKeyDown:function(e){return f(e)},css:[a.l0.focusRing],className:"jsx-cae03adee2975d4"}),(0,r.tZ)(l.Z,{size:"small",onClick:function(){return i(t)},children:"Next"}),(0,r.tZ)(l.Z,{size:"small",onClick:function(){return s(t)},children:"Previous"}),(0,r.tZ)(l.Z,{size:"small",onClick:u,children:"Exit"}),(0,r.tZ)(o(),{id:"cae03adee2975d4",children:".search.jsx-cae03adee2975d4{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:30px}input.jsx-cae03adee2975d4{padding:4px var(--space-8)var(--space-4);background-color:var(--background-default);color:var(--foreground-default);height:24px;width:85px;border:none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}input.jsx-cae03adee2975d4::-webkit-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:focus{outline:none;border:var(--accent-primary-default)}input.jsx-cae03adee2975d4,.search button{margin:0 var(--space-4)}"})]})}},31562:function(e,t,n){n.d(t,{x:function(){return $},I:function(){return K}});var r=n(31417),i=n(27387),o=n(41733),a=n(30509),l=n(66626),c=n(96583),s=n(74985),u=n(15235),d=n(94778),f=n(72093),h=n(50959),p=n(42516),m=n(92443),v=n(19004),g=n(81199),y=n(25114),b=n(4354),w=n(59786),Z=n(58045),x=n(95369),C=n(57159),_=n(65914),S=n(45795),k=n(37058),E=n(50798),T=n(70016),R=n(43312),I=n(60305),D=n(44355),B=n(90869),G=n(36136),A=n(85733),P=n(84806),N=n(91620).lW,L=(0,R.iv)([f.l0.position.relative,f.l0.height("100%")]);function O(e){var t,n,o=e.shellId,a=e.paneId,u=e.performPaneOperation,f=e.isActive;!function(){if(!(0,w.P5)({controlName:"flag-pid2",logFlagToAnalytics:!1}))throw Error("`flag-pid2` flag is necessary for `flag-pid2-shell`");if(!(0,w.P5)({controlName:"use-eval-server",logFlagToAnalytics:!1}))throw Error("`use-eval-server` flag is necessary for `flag-pid2-shell`")}();var R=(0,w.P5)({controlName:"flag-pid2-shell-muxed",logFlagToAnalytics:!1}),O=(0,P.Z)(),U=(0,g.Z)().fs,M=(0,A.Z)(o),X=(0,h.useRef)(!1),F=(0,h.useRef)(null),W=(0,l._)((0,h.useState)("loading"),2),H=W[0],V=W[1],z=(0,l._)((0,h.useState)(void 0),2),j=z[0],q=z[1],J=(0,l._)((0,h.useState)(0),2),Y=J[0],K=J[1],$=(0,l._)((0,h.useState)(!1),2),Q=$[0],ee=$[1],et=(0,h.useRef)(!1),en=(0,A.Z)(H),er=(0,h.useCallback)(function(){u({operation:"remove",pane:{id:a}})},[u,a]),ei=(0,h.useCallback)(function(e){u({operation:"open",secondary:!0,pane:{type:(0,Z.Dp)(e),data:e}})},[u]),eo=(0,h.useCallback)(function(e,t){u({operation:"open",secondary:!0,pane:{type:"webview",data:{portType:"local",path:e,port:t}}})},[u]),ea=(0,h.useCallback)(function(e){u({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[u]),el=(0,x.bD)({onSession:function(e){u({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,ec=(0,l._)((0,_.N)(),1)[0],es=(0,h.useCallback)((t=(0,i._)(function(e){return(0,c.Jh)(this,function(t){return(0,I.j)(I.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:ec,user_model_selection:ec,message_content:e,message_source:"shell"}),el({kind:"message",message:e,intent:C.$h.EXPLAIN,model:"advanced"===ec?C.BY.ADVANCED:C.BY.BASIC}),[2]})}),function(e){return t.apply(this,arguments)}),[ec,el]),eu=(0,G.K)(),ed=(0,h.useRef)(null),ef=(0,h.useRef)(new Uint8Array([])),eh=(0,h.useRef)(""),ep=(0,S.bW)({onFTCSState:function(e){var t=e.state,n=e.data;if(t===S.qj.CommandExecuted&&(et.current=!0),t===S.qj.CommandFinished){et.current=!1;var r=parseInt(n,10),i=(0,B.Z)(ef.current.toString());(i=i.substring(0,i.lastIndexOf("\n"))).length>0&&eu("user:shell:output",{output:i,exitCode:r}),ef.current=new Uint8Array([])}ed.current=t},onOpenGeneratePrompt:function(){et.current||ee(!0)},onUpdateCurrentPromptLineNumber:K}),em=(0,h.useCallback)(function(e,t){if(t.startsWith("A")){var n=t.replace(/^A;/,"");eu("user:shell:exec",{command:n}),(0,I.j)(I.U3.SHELL_COMMAND_EVALED,{context:n,replId:null==O?void 0:O.id,api:"pid2",pwd:eh.current})}if(t.startsWith("B")){var r=t.replace(/^B;/,"");eh.current=r}},[eu,O,eh]),ev=(0,l._)((0,y.Z)({openFile:ei,listFiles:U.listFiles,openWebview:eo,onInBandOSCMessages:(n={},(0,p._)(n,S.Xd,ep),(0,p._)(n,82,em),n)}),2),eg=ev[0],ey=ev[1],eb=(0,h.useId)(),ew="scope-shell-".concat(eb);(0,E.ow)(ew,f),(0,k.Il)(function(){return[S.CH.id,{run:function(){et.current||ee(!0)},scope:ew,bubble:!1}]},[ee]),(0,T.Wk)(function(){return eg},[eg]),(0,m.L)(function(e){function t(){return(t=(0,i._)(function(){var t,n,i,o,a,s,u,d,f,h,p,m,v;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(!eg)return[2];return[4,e.shellExec.connect.stream({id:M.current})];case 1:n=(t=l._.apply(void 0,[c.sent(),2]))[0],i=t[1],a=(o=eg.getSize()).cols,s=o.rows,n.push({$kind:"resize",cols:a,rows:s}),F.current=n,u=!1,d=!1,c.label=2;case 2:c.trys.push([2,7,8,13]),h=(0,r._)(i),c.label=3;case 3:return[4,h.next()];case 4:if(!(u=!(p=c.sent()).done))return[3,6];if(!(m=p.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code)return[3,6];throw Error("pid2 non-ok msg: ".concat(m.payload.message))}"output"===m.payload.$kind&&(ed.current===S.qj.CommandExecuted&&(ef.current=N.concat([ef.current,m.payload.output])),eg.write(m.payload.output)),c.label=5;case 5:return u=!1,[3,3];case 6:return[3,13];case 7:return v=c.sent(),d=!0,f=v,[3,13];case 8:if(c.trys.push([8,,11,12]),!(u&&null!=h.return))return[3,10];return[4,h.return()];case 9:c.sent(),c.label=10;case 10:return[3,12];case 11:if(d)throw f;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[eg,M]),(0,m.L)(function(e){function t(){return(t=(0,i._)(function(){var t,n,i,o,a,s,u,d,f,h,p;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return[4,e.shellExec.monitor.subscribe({id:M.current})];case 1:n=(t=l._.apply(void 0,[c.sent(),2]))[0],i=t[1],o=!1,a=!1,c.label=2;case 2:c.trys.push([2,10,11,16]),u=(0,r._)(n),c.label=3;case 3:return[4,u.next()];case 4:if(!(o=!(d=c.sent()).done))return[3,9];if(!(f=d.value).ok){if("NO_PROCESS_MATCHING_ID"===f.payload.code)return[3,8];throw Error("pid2 non-ok msg: ".concat(f.payload.message))}if(V("Loading"!==(h=f.payload).state?"ready":"loading"),h.cgroupPath&&q({cgroup:h.cgroupPath}),!("Finished"===h.state&&!1===X.current))return[3,8];if(X.current=!0,i(),!R)return[3,6];return[4,e.shellExec.cleanStoredState.rpc({id:M.current})];case 5:return c.sent(),[3,8];case 6:return er(),[4,e.shellExec.cleanStoredState.rpc({id:M.current})];case 7:c.sent(),c.label=8;case 8:return o=!1,[3,3];case 9:return[3,16];case 10:return p=c.sent(),a=!0,s=p,[3,16];case 11:if(c.trys.push([11,,14,15]),!(o&&null!=u.return))return[3,13];return[4,u.return()];case 12:c.sent(),c.label=13;case 13:return[3,15];case 14:if(a)throw s;return[7];case 15:return[7];case 16:return[2]}})})).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[M,er,R]),(0,m.L)(function(e){return function(){R||"ready"!==en.current||(X.current=!0,e.shellExec.kill.rpc({id:M.current,cleanStoredState:!0}))}},[R,en,M]),(0,h.useEffect)(function(){if(eg){var e=eg.onData(function(e){var t,n=new Uint8Array(N.from(e));null===(t=F.current)||void 0===t||t.push({$kind:"stdin",stdin:n})}),t=eg.onResize(function(e){var t,n=e.cols,r=e.rows;null===(t=F.current)||void 0===t||t.push({$kind:"resize",cols:n,rows:r})});return function(){e.dispose(),t.dispose()}}},[eg]),(0,h.useEffect)(function(){return function(){F.current=null}},[]);var eZ=(0,h.useCallback)(function(e){if(!F.current)return!1;var t=new Uint8Array(N.from(e));return F.current.push({$kind:"stdin",stdin:t}),!0},[]);(0,D.Z)({sendInput:eZ,paste:function(e){return!!eg&&(eg.paste(e),!0)}});var ex="loading"===H;return(0,s.BX)(d.G,{css:L,children:[ex?(0,s.tZ)(b.Z,{}):null,(0,s.tZ)(v.N2,{shell:eg,shellMetadata:j,shellRef:ey,performPaneOperation:u,currentPromptLineNumber:Y,isGeneratePromptVisible:Q,sendToShellChannel:eZ,openSearchAndReplace:ea,openAIWithMessage:es,onOpenGeneratePrompt:function(){et.current||((0,I.j)(I.U3.AI_SHELL_CONTEXT_MENU_GENERATE_CLICKED),ee(!0))},onCloseGeneratePrompt:function(){return ee(!1)}})]})}var U=n(49224),M=n(29252),X=n(35970),F=n(99007),W=n(19068),H=n(21262),V=n(71440),z=n(58995);function j(){var e=(0,H._)(["\n  query CurrentUserEnv {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return j=function(){return e},e}var q={},J=(0,V.Ps)(j()),Y=(0,U.X)({wrapper:[f.l0.height("100%"),f.l0.flex.column],headerWrapper:[f.l0.flex.growAndShrink(0),f.l0.rowWithGap(4),f.l0.p(4),f.l0.border({direction:"bottom",color:f.TV.outlineDimmest}),f.l0.height(28),{"> button":[f.l0.py(0),f.l0.px(2),f.l0.height(20)]}],shellSelect:[{"> button":[f.l0.py(0),f.l0.px(2),f.l0.height(20),f.l0.fontSize("small"),W.gU.nofill,f.l0.align.center],"> button > span > div > span > span":[f.l0.fontSize("small")]}],shellListItem:[{cursor:"pointer"}],terminalWrapper:[f.l0.height("100%"),f.l0.flex.growAndShrink(1)]});function K(){var e,t=(0,P.Z)(),n=(e=(0,o._)({},q,void 0),z.a(J,e)).data,r=(null==n?void 0:n.currentUser)||void 0,i=(0,l._)((0,h.useState)(null),2),a=i[0],c=i[1];return(0,m.L)(function(e,n){r&&t&&c({REPLIT_USERID:String(r.id),REPLIT_USER:r.username,REPLIT_SESSION:n.from,TERM:"xterm-256color",PS1:"\\[\\033[01;34m\\]\\w\\[\\033[00m\\]\\$ "})},[r,t]),a}function $(e){var t=(0,w.P5)({controlName:"flag-pid2-shell-muxed",logFlagToAnalytics:!1}),n=(0,P.Z)(),f=K(),p=(0,h.useRef)(!1),v=(0,l._)((0,h.useState)(t?{state:"loading"}:{state:"spawning"}),2),g=v[0],y=v[1],b=(0,l._)((0,h.useState)(null),2),Z=b[0],x=b[1],C=(0,A.Z)(Z),_=(0,h.useRef)(null);return(0,m.L)(function(e){if(t)return function(){n.apply(this,arguments)}(),function(){var e;null===(e=_.current)||void 0===e||e.close(),_.current=null};function n(){return(n=(0,i._)(function(){var t,n,i,o,a,s,u,d,f,h,p;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(null!==_.current)return[2];return[4,e.shellExec.list.subscribe({})];case 1:n=(t=l._.apply(void 0,[c.sent(),2]))[0],i=t[1],_.current={close:i},o=!1,a=!1,c.label=2;case 2:c.trys.push([2,7,8,13]),u=(0,r._)(n),c.label=3;case 3:return[4,u.next()];case 4:if(!(o=!(d=c.sent()).done))return[3,6];(f=d.value).ok&&(h=f.payload.processes.filter(function(e){return"Running"===e.state}),null===C.current&&(0===h.length?y({state:"spawning"}):y({state:"connected",id:h[0].id})),x(h)),c.label=5;case 5:return o=!1,[3,3];case 6:return[3,13];case 7:return p=c.sent(),a=!0,s=p,[3,13];case 8:if(c.trys.push([8,,11,12]),!(o&&null!=u.return))return[3,10];return[4,u.return()];case 9:c.sent(),c.label=10;case 10:return[3,12];case 11:if(a)throw s;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}},[C,t]),(0,m.L)(function(t){function r(){return(r=(0,i._)(function(){var r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:if(!n||!f||p.current)return[2];return p.current=!0,[4,t.shellExec.spawn.rpc({cmd:"bash",env:f,cwd:null!==(r=e.initialPwd)&&void 0!==r?r:"/home/runner/".concat(n.slug)})];case 1:return(i=o.sent()).ok&&(y({state:"connected",id:i.payload.id}),p.current=!1),[2]}})})).apply(this,arguments)}"spawning"===g.state&&function(){r.apply(this,arguments)}()},[e.initialPwd,n,g,f]),(0,s.BX)(d.G,{css:Y.wrapper,children:[t?(0,s.BX)(d.G,{css:Y.headerWrapper,children:[(0,s.tZ)(u.zx,{text:"New Shell",size:"small",variant:"nofill",iconRight:(0,s.tZ)(M.Z,{}),onClick:function(){y({state:"spawning"})}}),Z&&"connected"===g.state?(0,s.tZ)(F.P,{css:Y.shellSelect,"aria-label":"Shell",onSelectionChange:function(e){y({state:"connected",id:e})},selectedKey:g.id,items:Z,children:function(e){return(0,s.tZ)(X.m9,{css:Y.shellListItem,id:e.id,label:e.id})}}):null]}):null,(0,s.tZ)(d.G,{css:Y.terminalWrapper,children:"connected"===g.state?(0,s.tZ)(s.HY,{children:(0,s.tZ)(O,(0,a._)((0,o._)({},e),{shellId:g.id}),g.id)}):null})]})}},19004:function(e,t,n){n.d(t,{N2:function(){return $},St:function(){return q}});var r,i=n(66626),o=n(74985),a=n(43312),l=n(46026),c=n(50959),s=n(54443),u=n(42516),d=n(64432),f=n(90493),h=n(72093),p=(0,a.iv)([h.l0.focusRing,h.l0.display.flex,h.l0.center,h.l0.borderRadius(4),h.l0.backgroundColor.backgroundRoot,h.l0.color.foregroundDefault,h.l0.cursor.pointer,h.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,u._)(r,h.wl.hover,[h.l0.backgroundColor.backgroundHigher]),(0,u._)(r,":focus",{outline:"none"}),r)]),m=function(e){var t=e.onClick;return(0,o.tZ)(d.u,{tooltip:"Search",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Search",onClick:t,css:p,children:(0,o.tZ)(f.Z,{size:16})})})},v=n(85033),g=n(59695),y=n(59786),b=n(55927),w=n(38753),Z=n(94778),x=n(49224),C=n(48058),_=n(72143),S=n(59500),k=n(35909),E=n(27318),T=n(60305),R=n(15235),I=n(85763),D=n(40509),B=n(33817),G=n(95369),A={CURSOR_SAVE:"\x1b[s",CURSOR_RESTORE:"\x1b[u",ERASE_TO_END_OF_SCREEN:"\x1b[0J",COLOR_RESET:"\x1b[0m",COLOR_BRIGHT_BLACK:"\x1b[0;90m"},P=(0,a.iv)([h.l0.position.absolute,h.l0.left(8),h.l0.right(0),h.l0.zIndex(5)]);function N(e){var t=e.lineNumber,n=e.paneHeight,r=e.shell,a=e.sendToShellChannel,l=e.onClose,s=(0,c.useMemo)(function(){return null==r?void 0:r._term},[r]),u=(0,c.useMemo)(function(){var e,t=null==s?void 0:s._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[s]),d=(0,c.useRef)(""),f=(0,c.useRef)(!1),h=(0,c.useRef)(null),p=(0,i._)((0,c.useState)(64),2),m=p[0],v=p[1],g=(0,c.useCallback)(function(e){return v(e.height)},[v]),y=(0,G.WR)({onCode:function(e){if(null===e){d.current="";return}d.current!==e&&(f.current&&(r.write(A.CURSOR_RESTORE),r.write(A.ERASE_TO_END_OF_SCREEN)),r.write(A.CURSOR_SAVE),r.write(A.COLOR_BRIGHT_BLACK),r.write(e.replaceAll("\n","\r\n")),r.write(A.COLOR_RESET),f.current=!0,d.current=e)}}),b=y.sendMessage,w=y.stopMessage,x=y.getCode,C=y.loading,_=y.completed,S=y.error,k=y.clearError,N=(0,c.useCallback)(function(){(0,T.j)(T.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell"}),w(),f.current&&(r.write(A.CURSOR_RESTORE),r.write(A.ERASE_TO_END_OF_SCREEN),r.write(A.COLOR_RESET)),l()},[r,w,l]);(0,c.useEffect)(function(){return r.onData(function(){w(),l()}).dispose},[r,w,l]);var L=(0,E.U1)({loading:C,onSubmit:function(){W?F():((0,T.j)(T.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:O}),H())},onClose:N}),O=L.value,U=L.setValue,M=L.onKeyDown,X=L.escPressed,F=(0,c.useCallback)(function(){var e,t=null===(e=x())||void 0===e?void 0:e.code;if(!f.current||!t){N();return}r.write(A.CURSOR_RESTORE),r.write(A.ERASE_TO_END_OF_SCREEN),r.write(A.COLOR_RESET),a(t),(0,T.j)(T.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",source:"shell"}),l()},[r,x,l,N,a]),W=_&&h.current===O,H=(0,c.useCallback)(function(){h.current=O,(0,T.j)(T.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:O}),b({message:O})},[b,O]),V=u.height*(t+1)+8,z="top";V+m>n&&(z="bottom",V=n-u.height*(t+1)+4);var j=(0,B.Un)();return(0,o.tZ)(Z.G,{css:P,style:{top:"top"===z?V:void 0,bottom:"bottom"===z?V:void 0},children:(0,o.BX)(E.If,{requestMeasure:g,type:"generateCode",isCodeMirrorPocket:!1,error:S,clearError:k,children:[(0,o.tZ)(E.II,{value:O,onChange:function(e){return U(e.currentTarget.value)},placeholder:"Enter a prompt to generate a shell command",onKeyDown:M,autoFocus:!0}),(0,o.BX)(E.$_,{children:[(0,o.BX)(o.HY,{children:[(0,o.tZ)(E.Xs,{type:"generateCode"}),_?(0,o.tZ)(I.hU,{alt:"Rerun the same prompt",onClick:function(){return H()},size:12,colorway:"grey",children:(0,o.tZ)(D.Z,{})}):null]}),W?(0,o.BX)(o.HY,{children:[(0,o.tZ)(R.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){(0,T.j)(T.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",source:"shell"}),N()}}),(0,o.tZ)(R.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:F,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,o.tZ)(E.k4,{escPressed:X,connecting:!j,loading:C,disabled:!O||!O.trim(),onClick:function(){C?((0,T.j)(T.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell",message_content:O}),w()):((0,T.j)(T.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:O}),H())}})]})]})})}var L=n(73210),O=n(81199);function U(e){var t=e.portsOpenedByThisShell,n=e.performPaneOperation,r=e.onClose,i=(0,O.Z)().ports,a=(0,c.useCallback)(function(e){i.updateDotReplitPortsMapping(e,void 0)},[i]),l=(0,c.useCallback)(function(e){i.tryExposingPortAutomatically(e)},[i]);return(0,o.tZ)(L.ms,{configurations:t.map(function(e){return e.configuration}),openWebview:function(){n({operation:"open",secondary:!0,pane:{type:"webview",data:t.length>0?{portType:"local",port:t[0].configuration.localPort}:void 0}})},openNetworkingTool:function(){n({operation:"open",secondary:!0,pane:{type:"networking"}})},onClose:function(){null==r||r()},onDontExposePort:function(){1===t.length&&a(t[0].configuration.localPort)},onDoExposePort:function(){1===t.length&&l(t[0].configuration.localPort)}})}var M=n(39102),X=n(85733),F=n(44355),W=n(36136),H=n(25114),V="\x1b[200~",z="\x1b[201~",j=n(45795);function q(e){var t=e.onShellKey,n=e.onOutput,r=e.onShellMetadata,o=e.container,a=e.initialPwd,l=e.openFile,s=e.listFiles,d=e.openWebview,f=e.onOpenGeneratePrompt,h=e.onUpdateCurrentPromptLineNumber,p=(0,j.bW)({onOpenGeneratePrompt:f,onUpdateCurrentPromptLineNumber:h}),m=(0,i._)((0,H.Z)({openFile:l,listFiles:s,openWebview:d,onInBandOSCMessages:(0,u._)({},j.Xd,p)}),2),v=m[0],g=m[1],y=(0,i._)((0,c.useState)(null),2),b=y[0],w=y[1],Z=(0,X.Z)(r);(0,c.useEffect)(function(){return o.openChannel({service:"shell"},function(e){var t=e.channel;return w(t),t.onCommand(function(e){if(e.shellMetadata){var t;null===(t=Z.current)||void 0===t||t.call(Z,e.shellMetadata)}}),function(){w(null)}})},[o,Z]);var x=(0,W.K)({channelId:null==b?void 0:b.id}),C=(0,c.useRef)(!1),_="",S="",k="",E=(0,c.useCallback)(function(e){if(!b||!v)return!1;var t=o.client();if(!b||"open"!==b.status||t.getConnectionState()!==M.em.CONNECTED)return!1;var n=e.startsWith(V)&&e.endsWith(z)?e.slice(V.length,e.length-z.length):e;return b.send({input:n}),!0},[v,b,o]);return(0,F.Z)({sendInput:E,paste:function(e){return!!v&&(v.paste(e),!0)}}),(0,c.useEffect)(function(){if(b&&v){var e=v.onKey(function(e){var n=e.key,r=e.domEvent;if("\r"===n){var i=S;S.endsWith(_)&&_.length>0&&(i=S.slice(0,-_.length)),x("user:shell:output:clean",{output:i,command:k}),x("user:shell:exec",{command:_}),x("user:shell:output",{output:S}),k=_,_="",S=""}else _+=n;t&&t(r)}),r=o.client(),i=v.onData(function(e){E(e)});b.onCommand(function(e){e.hint?v.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&(v.write(e.output),null==n||n(e.output),S+=e.output)});var l=function(){b&&"open"===b.status&&r.getConnectionState()===M.em.CONNECTED&&b.send({resizeTerm:v.getSize()})};if(a&&!C.current){var c=a.replace(/"/g,'\\"');b.send({input:'cd "'.concat(c,'"\n')}),C.current=!0}var s=v.onResize(l);return l(),function(){e.dispose(),i.dispose(),s.dispose()}}},[b,v,t,n,r,o,E,a]),[v,g,E]}var J=(0,a.iv)([h.l0.height("100%"),h.l0.overflow("hidden"),{"& .xterm":[h.l0.pl(8),h.l0.pt(8),h.l0.pb(4),h.l0.height("100%")]}]),Y=(0,x.X)({container:[h.l0.height("100%"),{"&:focus-within .controls":{opacity:1}}],xterm:J,xtermWithBorderRadius:[J,{"& .xterm-viewport":[h.l0.borderRadius(0,0,8,8)]}]}),K=(0,a.iv)([h.l0.position.absolute,h.l0.flex.row,h.l0.top(8),h.l0.right(8),h.l0.height(30),h.l0.align.center,h.l0.zIndex(8),{opacity:0}]);function $(e){var t,n,r=e.shell,a=e.shellMetadata,u=e.sendToShellChannel,d=e.shellRef,f=e.className,p=e.openSearchAndReplace,x=e.openAIWithMessage,E=e.performPaneOperation,T=e.isGeneratePromptVisible,R=e.currentPromptLineNumber,I=e.onOpenGeneratePrompt,D=e.onCloseGeneratePrompt,B=(0,g.Gn)("accessibleTerminal").preferences.accessibleTerminal,G=(0,y.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),A=(0,y.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),P=!G&&A,L=(0,i._)((0,c.useState)(!1),2),O=L[0],M=L[1],X=(0,i._)((0,c.useState)(""),2),F=X[0],W=X[1],H=(0,C.dF)(null!==(t=null==a?void 0:a.cgroup)&&void 0!==t?t:void 0);r&&O&&(n=(0,o.tZ)(v.R,{searchValue:F,setSearchValue:W,findPrevious:r.findPrevious,findNext:r.findNext,exit:function(){return M(!1)}})),!r||O||P||(n=(0,o.tZ)(m,{onClick:function(){return M(!0)}}));var V=(0,w.T3)(),z=(0,S.av)().onContextMenu,j=(0,k.j)({xterm:r,isOutputsTerminal:!1,openAIWithMessage:x,openShellSearch:function(e){M(!0),W(e)},openSearchAndReplace:p,openGeneratePrompt:I});(0,c.useEffect)(function(){null==r||r.fit()},[r,H]);var q=(0,i._)((0,c.useState)(0),2),J=q[0],$=q[1],Q=(0,b.Z)(function(e){$(e.height)},{type:"throttle",wait:200});return(0,o.BX)(Z.G,{className:f,innerRef:Q,css:Y.container,onKeyDown:function(e){"f"===e.key&&(0,l.jh)(e)&&(M(!0),e.preventDefault())},children:[!B&&(0,o.tZ)(_.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,o.BX)(Z.G,{css:[h.l0.coverContainer,h.l0.flex.column],onClick:function(){T&&(D(),null==r||r.focus())},children:[(0,o.tZ)(Z.G,{css:[V?Y.xterm:Y.xtermWithBorderRadius,h.l0.flex.growAndShrink(1),P&&T?{pointerEvents:"none",filter:"opacity(0.75)"}:null],innerRef:d,onContextMenu:function(e){return z(e,{command:j})}}),(0,o.tZ)(U,{portsOpenedByThisShell:H,performPaneOperation:E,onClose:function(){null==r||r.focus(),null==r||r.fit()}})]}),P&&r&&T?(0,o.tZ)(N,{lineNumber:R,paneHeight:J,shell:r,sendToShellChannel:u,onClose:function(){D(),r.focus()}}):null,r?(0,o.BX)(Z.G,{className:"controls",css:K,children:[n,P?null:(0,o.tZ)(s.Z,{onClick:r.clear})]}):null,r?null:(0,o.tZ)("code",{css:[h.l0.color.foregroundDimmest,h.l0.coverContainer,h.l0.p(8),h.l0.font.code],children:"Loading..."})]})}},45795:function(e,t,n){n.d(t,{CH:function(){return v},Xd:function(){return y},bW:function(){return b},qj:function(){return i}});var r,i,o=n(74985),a=n(59786),l=n(38753),c=n(37058),s=n(44478),u=n(50959),d=n(11407),f=n(49224),h=n(35068),p=n(59695);(r=i||(i={})).Prompt="Prompt",r.CommandStart="CommandStart",r.CommandExecuted="CommandExecuted",r.CommandFinished="CommandFinished";var m={A:"Prompt",B:"CommandStart",C:"CommandExecuted",D:"CommandFinished"},v={id:"shell.generateWithAI",name:"Generate with AI in the shell",default:(0,d.l2)({cmdOrCtrl:!0,key:"i"})},g=(0,f.X)({root:{marginLeft:"auto"}}),y=133;function b(e){var t=e.onFTCSState,n=e.onOpenGeneratePrompt,r=e.onUpdateCurrentPromptLineNumber,i=(0,a.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),d=(0,a.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),f=!i&&d,y=(0,p.Gn)("fontSize").preferences.fontSize,b=(0,u.useRef)(null),w=(0,u.useRef)(null),Z=(0,l.T3)(),x=(0,c.gf)(v.id),C=(0,u.useRef)(null);return(0,u.useCallback)(function(e,i){var a=m[i.split(";")[0]];if(a&&t&&t({state:a,data:i.split(";")[1]}),"B"===i){if(!f)return;var l,c,u=e.buffer.active,d=u.cursorX,p=u.cursorY;r(p),b.current&&b.current.dispose(),w.current&&w.current.dispose(),C.current&&(C.current.unmount(),C.current=null);var v=Math.round(12.6);b.current=e.registerMarker(0),w.current=null!==(c=e.registerDecoration({marker:b.current,x:Math.max(0,e.cols-v),width:v,layer:"top"}))&&void 0!==c?c:null,null===(l=w.current)||void 0===l||l.onRender(function(t){for(var r=!1,i=e.buffer.active._buffer.lines._array[p],a=d;a<e.cols;a++)if((null==i?void 0:i.hasContent(a))!==0){r=!0;break}var l=!r;C.current||(C.current=(0,s.createRoot)(t)),C.current.render(l?(0,o.tZ)(h.s,{css:g.root,onClick:function(e){e.stopPropagation(),n()},keyCombo:Z?void 0:x,text:"Generate",fontSize:Math.round(.9*y)}):null)})}},[f,n,r,Z,x,y,t])}},85943:function(e,t,n){n.d(t,{f:function(){return P}});var r,i=n(74985),o=n(59786),a=n(27387),l=n(42516),c=n(66626),s=n(96583),u=n(43182),d=n(14872),f=n(39271),h=n(72658),p=n(19871),m=n(69880),v=n(50959),g=n(41733),y=n(21262),b=n(71440),w=n(99165);function Z(){var e=(0,y._)(["\n  mutation SyncReplGitState($input: UpdateReplGitStateInput!) {\n    updateReplGitState(input: $input) {\n      ... on Repl {\n        id\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var x={},C=(0,b.Ps)(Z()),_=n(36647),S=n(57159),k=n(95369),E=n(33817),T=n(65914),R=n(35986),I=function(){var e=function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stream:!1}).stream,n=(0,c._)((0,T.N)(),1)[0],r=(0,k.bD)(),i=r.sendMessage,o=r.loading,l=r.sessionId,u=r.parentToActiveChild,d=(0,v.useCallback)((e=(0,a._)(function(e){return(0,s.Jh)(this,function(t){return i({message:e.message,kind:"message",model:"advanced"===n?S.BY.ADVANCED:S.BY.BASIC,intent:S.$h.EXPLAIN},{sessionType:S.FF.SINGLE_USE_SESSION}),[2]})}),function(t){return e.apply(this,arguments)}),[n,i]),f=(0,E.gn)(l,u),h=(0,v.useMemo)(function(){if((null==f?void 0:f.sender.type)!==S.FW.AI||!t&&f.state!==S.he.COMPLETE)return null;var e="messageEventContents"===f.contents.contents.$kind?f.contents.contents.messageEventContents.content:null;return null!=e?e:null},[f,t]);return{sendMessage:d,error:(0,v.useMemo)(function(){return(null==f?void 0:f.error)?f.error.message:null},[f]),loading:o,result:h}}({stream:!1}),t=e.error,n=e.loading,r=e.result,i=e.sendMessage,o=(0,R.H)({base:"origin/main",head:"HEAD"});return(0,v.useEffect)(function(){o.data&&i({message:D(o.data).slice(0,8e3)})},[o.data,i]),{error:t,loading:n,result:r?r.slice(0,300):null}},D=function(e){return"Act as a professional software engineer. You will be given a git diff describing changes which will delimited by triple backticks. Summarize what has changed in ".concat(300," characters or less so that another engineer understands what has changed.\n\n```\n").concat(e,"\n```\n")},B=(r={},(0,l._)(r,h.yG.CLEAN,"CLEAN"),(0,l._)(r,h.yG.DIRTY_INDEX,"DIRTY_INDEX"),(0,l._)(r,h.yG.DIRTY_WORKTREE,"DIRTY_WORKTREE"),r),G=function(e){var t;return null!==(t=B[e])&&void 0!==t?t:null};function A(){var e,t,n,r,i,o,l,y,b,Z,S,k,E,T;return e=(0,f.Z)(),n=(0,m.Z)((t=(0,a._)(function(e){var t,n,r,i;return(0,s.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=o.sent()).error)return[2,t];if(n=t.type,r=null,n!==h.y5.NORMAL)return[2,{error:null,notNormal:!0}];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];return[2,{branchName:null==(r=i)?void 0:r.branch,state:G(t.state),type:"NORMAL",error:null}]}})}),function(e){return t.apply(this,arguments)})),r=(0,_.Z)(function(){return n&&!n.error&&!n.notNormal&&n.branchName&&n.state?{lastBranch:n.branchName,state:n.state,type:n.type}:null},[n]),o=(null==(i=(0,d.Z)(r,1e3))?void 0:i.type)==="NORMAL",Z=null!==(y=null==(b=(0,m.Z)((l=(0,a._)(function(e){var t;return(0,s.Jh)(this,function(n){switch(n.label){case 0:if(!o)return[2,{error:null,firstSha:null}];return[4,e.escapeHatchGitExecRead("git rev-list --max-parents=0 HEAD")];case 1:if((t=n.sent()).error)return[2,{error:t.error}];if(!t.output)return[2,{error:null,firstSha:null}];if(!/^[0-9a-f]{40}$/.test(t.output.trim()))return u.Tb(Error("useFirstCommitSha expected a 40 character sha, got: ".concat(t.output.trim()))),[2,{error:p.aq.UNKNOWN}];return[2,{error:null,firstSha:t.output.trim()}]}})}),function(e){return l.apply(this,arguments)}),[o]))?void 0:b.firstSha)&&void 0!==y?y:null,S=I(),E=(0,c._)((k=(0,g._)({},x,void 0),w.D(C,k)),1)[0],T=(0,v.useCallback)(function(t){return E({variables:{input:{replId:e,gitInfo:t}}})},[E,e]),(0,v.useEffect)(function(){(null==i?void 0:i.state)&&Z&&T({version:1,lastBranch:i.lastBranch,state:i.state,type:i.type,firstCommitSha:Z,aiSummary:S.result})},[null==i?void 0:i.lastBranch,null==i?void 0:i.state,null==i?void 0:i.type,Z,S.result,T]),null}function P(){return(0,o.P5)({controlName:"flag-first-class-git"})?(0,i.tZ)(A,{}):null}},89578:function(e,t,n){n.d(t,{Z:function(){return W}});var r=n(66626),i=n(74985),o=n(8261),a=n(99236),l=n(82230),c=n(64432),s=n(4276),u=n(94778),d=n(72093),f=n(50959),h=n(38953),p=n(66403),m=n(59786),v=n(69170),g=n(80274),y=n(59947),b=n(55821),w=n(47336),Z=n.n(w),x=n(41733),C=n(21262),_=n(71440),S=n(62496),k=n(99165);function E(){var e=(0,C._)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return E=function(){return e},e}var T={},R=(0,_.Ps)(E(),S.j7),I=n(77865),D=n(59695),B=n(41753),G=n(886),A=n(9100),P=n(42173),N=n(71253),L=n(66164),O=n(25462),U=n(43312),M=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"],X=(0,f.memo)(function(e){var t=e.content,n=(0,D.Gn)("fontSize").preferences.fontSize,r=(0,f.useCallback)(function(e){return(0,i.tZ)(B.Z,(0,x._)({},e))},[]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(A.D,{css:(0,U.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:d.TV.foregroundDefault,fontFamily:"".concat(d.TV.fontFamilyDefault," !important"),fontSize:n,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:d.TV.foregroundDefault,fontWeight:d.TV.fontWeightMedium,marginBottom:d.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:d.TV.space8,borderBottom:"1px solid ".concat(d.TV.backgroundHigher),marginTop:d.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:d.TV.space24},h4:{fontSize:"1em",marginTop:d.TV.space16},h5:{fontSize:"0.875em"},h6:{color:d.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(d.TV.space16,")"),paddingRight:d.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:d.TV.space16,fontSize:n,fontFamily:"".concat(d.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:d.TV.space16,wordBreak:"normal",th:{fontWeight:d.TV.fontWeightMedium},"td, th":{padding:"".concat(d.TV.space8," ").concat(d.TV.space12),border:"1px solid ".concat(d.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:d.TV.backgroundDefault,borderTop:"1px solid ".concat(d.TV.backgroundHighest)},"tr:nth-of-type(2n)":{backgroundColor:d.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:d.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:d.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:d.TV.space16},ol:{listStyle:"decimal",marginBottom:d.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:d.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(d.TV.fontFamilyCode," !important"),margin:"".concat(d.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:d.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:d.TV.space16,borderLeft:"".concat(d.TV.space2," solid ").concat(d.TV.backgroundHighest),paddingLeft:d.TV.space16},"blockquote > *":{color:"".concat(d.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(d.TV.fontFamilyCode),color:d.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:d.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(d.TV.backgroundHighest)},a:{color:d.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:d.TV.space8,padding:0},details:{marginBottom:d.TV.space16,display:"block",background:d.TV.backgroundHigher,borderRadius:d.TV.borderRadius4,padding:d.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:d.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(d.TV.backgroundHighest),marginBottom:d.TV.space16,paddingBottom:d.TV.space16},hr:{height:1,backgroundColor:d.TV.backgroundHigher,margin:"".concat(d.TV.space24," 0"),border:0}}),allowedElements:M,remarkPlugins:[I.Ic,L.Z,O.Z,N.Z],linkTarget:"_blank",rehypePlugins:[P.Z],components:{code:r,img:G.Z},children:t})})}),F=n(65268),W=(0,f.memo)(function(e){var t,n=e.thread,w=e.message,C=(0,p.d)(),_=(0,v.Z)().showError,S=(0,r._)((t=(0,x._)({},T,{onError:function(e){_(e.message)},onCompleted:function(e){var t;(null===(t=e.deleteThreadMessage)||void 0===t?void 0:t.__typename)==="UserError"&&_(e.deleteThreadMessage.message)}}),k.D(R,t)),2),E=S[0],I=S[1].loading,D=(0,m.P5)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean",logFlagToAnalytics:!1}),B=!!(n&&n.indexStart===n.indexEnd),G={statusBanner:{resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},outdated:"Outdated",outdatedTooltip:"The code has changed since the comment was left"},A=(0,f.useMemo)(function(){return{diff:(0,F.Y)(w.timeCreated),full:(0,F.u)(w.timeCreated)}},[w]);if(!w.user)return null;var P=C===w.user.id?[{label:"Delete",icon:(0,i.tZ)(b.Z,{}),isDestructive:!0}]:[];return(0,i.BX)(u.G,{children:[(0,i.BX)(u.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.pb(4)],children:[(0,i.BX)(u.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.rowWithGap(8)],children:[(0,i.tZ)(Z(),{legacyBehavior:!0,passHref:!0,href:"/@".concat(w.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(s.n,{small:!0,src:w.user.image,username:w.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(c.u,{tooltip:A.full,placement:"top",children:(0,i.tZ)(l.xv,{variant:"small",color:"dimmer",multiline:!1,children:A.diff})})}),P.length>0&&D?(0,i.tZ)(h.Z,{items:P,onItemClick:function(e){"Delete"!==e.label||I||E({variables:{id:w.id}})},label:"More"}):null]}),B?(0,i.tZ)(c.u,{tooltip:G.outdatedTooltip,children:(0,i.tZ)(o.D,{colorway:"negative",text:G.outdated})}):null]}),"StatusMessageContentType"===w.content.__typename&&"resolved"===w.content.status?(0,i.tZ)(a.E,{colorway:"positive",icon:(0,i.tZ)(y.Z,{}),text:G.statusBanner.resolved}):null,"StatusMessageContentType"===w.content.__typename&&"unresolved"===w.content.status?(0,i.tZ)(a.E,{colorway:"primary",icon:(0,i.tZ)(g.Z,{}),text:G.statusBanner.unresolved}):null,"TextMessageContentType"===w.content.__typename&&(0,i.tZ)(X,{content:w.content.text})]})})},65268:function(e,t,n){n.d(t,{Y:function(){return o},u:function(){return a}});var r=n(10495),i=n(52224),o=function(e){var t=new Date(e),n=new Date;return 60>(0,i.Z)(n,t)?"just now":(0,r.F)(t,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},86858:function(e,t,n){n.d(t,{Z:function(){return eT}});var r=n(66626),i=n(74985),o=n(39271),a=n(85763),l=n(82230),c=n(94778),s=n(29318),u=n(29252),d=n(72093),f=n(85447),h=n(50959),p=n(74004),m=n(41733),v=n(30509),g=n(28266),y=n.n(g),b=n(40509),w=n(30124),Z=function(e){var t=e.onClick,n=e.hasTests,r=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,i.BX)("div",(0,v._)((0,m._)({},r),{className:"jsx-44786ca38dd3aa42 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,i.tZ)(w.Z,{filled:!1,border:!1,size:"small",Icon:b.Z,onClick:t,disabled:n,children:"Switch test type"}),(0,i.tZ)(y(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},x=n(69170),C=n(60305),_=n(15235),S=n(85638),k=n(45271),E=n(80274),T=n(59947),R=n(27022),I=n(15434),D=n(80403),B=n(16826),G=n(51148),A=n(87502),P=D.q6.define();function N(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,o=e.skeleton,a=e.language,l=e.skeletonClosingBracket,c=e.indentSize,s=(0,A.Z)(),u=s.ref,d=s.view,f=(0,h.useRef)(o?"".concat(o,"\n"):""),p=l?"\n".concat(l):"",m=" ".repeat(void 0===c?2:c);return(0,h.useEffect)(function(){if(d&&d.state.doc.length){var e=f.current;f.current=o?"".concat(o,"\n"):"",d.dispatch({changes:{from:0,to:e.length-1,insert:o},annotations:[D.YW.addToHistory.of(!1),P.of(!0)]})}},[d,o]),(0,h.useEffect)(function(){if(d){var e=D.yy.changeFilter.of(function(e){return!!e.annotation(P)||[-1,f.current.length,e.startState.doc.length-p.length,e.startState.doc.length+1]}),i=B.tk.updateListener.of(function(e){var t=e.state.doc.slice(f.current.length,e.state.doc.toString().length-p.length).toString();if(t!=="".concat(m).concat(r,"\n").concat(m)?n(t):n(""),e.docChanged&&e.state.doc.length===f.current.length+p.length){var i="\n"+m;d.dispatch({changes:{from:f.current.length-1,insert:"\n"+m},selection:{anchor:f.current.length+i.length-1},annotations:[P.of(!0)]})}}),o="".concat(f.current).concat(m).concat(r,"\n").concat(p);d.dispatch({changes:{from:0,to:d.state.doc.length,insert:o},effects:D.Py.appendConfig.of([e,i]),selection:{anchor:o.length},annotations:D.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=d.state.doc.toString().length;d.dispatch({changes:{from:f.current.length,to:t-p.length,insert:e},annotations:D.YW.addToHistory.of(!1)})}},focus:function(){return d.focus()}})}},[n,a,d,p,t,r,m]),(0,i.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,i.tZ)(G.ZP,{ref:u,language:a,indentSize:2,fontSize:14,indentIsSpaces:!0}),(0,i.tZ)(y(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}var L=n(22529),O=n(72604);function U(e){var t,n,a,s,u=e.isOpen,f=e.meta,p=e.language,g=e.hasMetadata,y=e.onClose,b=(0,o.Z)(),w=(0,x.Z)().showConfirm,Z=(0,r._)((0,h.useState)(null),2),S=Z[0],E=Z[1],I=(0,r._)((0,h.useState)(!0),2),D=I[0],B=I[1],G=(0,r._)((0,h.useState)((null==f?void 0:f.initialization)||""),2),A=G[0],P=G[1],N=(0,r._)((0,h.useState)((null==f?void 0:f.imports)||""),2),U=N[0],H=N[1],V=(0,r._)((0,h.useState)((null==f?void 0:f.setup)||""),2),z=V[0],j=V[1],q=(0,r._)((0,h.useState)((null==f?void 0:f.tearDown)||""),2),J=q[0],Y=q[1],K=(0,r._)((0,O.rU)({onError:function(e){return E(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?E(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:b}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:O.aA});return t?(0,v._)((0,m._)({},t),{meta:(0,m._)({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),w("Setup saved!"),y()))}}),2),$=K[0],Q=K[1],ee=(0,r._)((0,O.AF)({onError:function(e){return E(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?E(t.message):"ReplUnitTestMeta"===t.__typename&&(w("Imports updated!"),y()))}}),2),et=ee[0],en=ee[1],er=(0,L.x)(p),ei=U!==(null==f?void 0:f.imports)||A!==(null==f?void 0:f.initialization)||z!==(null==f?void 0:f.setup)||J!==(null==f?void 0:f.tearDown),eo=Q.loading||en.loading;return(0,i.tZ)(k.u,{isOpen:u,onRequestClose:y,maxWidth:872,children:(0,i.BX)(c.G,{css:[d.l0.colWithGap(24)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,i.tZ)(M,{unitTestsLib:er,onChange:H,language:p,initialValue:null!==(t=null==f?void 0:f.imports)&&void 0!==t?t:""}),(0,i.tZ)(c.G,{onClick:function(){return B(!D)},css:{cursor:"pointer"},children:(0,i.BX)(c.G,{css:[d.l0.rowWithGap(8),d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,i.tZ)(R.Z,{color:"var(--foreground-default)",size:20,rotate:D?270:0})]})}),D?null:(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.tZ)(X,{unitTestsLib:er,onChange:P,language:p,initialValue:null!==(n=null==f?void 0:f.initialization)&&void 0!==n?n:""}),(0,i.tZ)(F,{unitTestsLib:er,onChange:j,language:p,initialValue:null!==(a=null==f?void 0:f.setup)&&void 0!==a?a:""}),(0,i.tZ)(W,{unitTestsLib:er,onChange:Y,language:p,initialValue:null!==(s=null==f?void 0:f.tearDown)&&void 0!==s?s:""})]}),(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween],children:[(0,i.tZ)(l.xv,{css:[d.l0.color.accentNegativeStronger],children:S}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(12)],children:[(0,i.tZ)(_.zx,{disabled:eo,onClick:y,text:"Cancel"}),(0,i.tZ)(_.zx,{colorway:"primary",disabled:!ei||eo,onClick:function(){(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),g?et({variables:{input:{initialization:A,imports:U,setup:z,tearDown:J,replId:b}}}):$({variables:{input:{initialization:A,imports:U,setup:z,tearDown:J,replId:b}}})},iconLeft:(0,i.tZ)(T.Z,{}),text:"".concat(eo?"Saving...":"Save")})]})]})]})})}function M(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&(u.setValue(a),u.focus())},[u,a]);var p=t.defaultImports().trim();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here"),editorRef:f,language:o,skeleton:p,skeletonClosingBracket:"",indentSize:0})})})]})}function X(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&u.setValue(a)},[u,a]);var p=t.classConstructorName();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),p?(0,i.BX)(l.xv,{children:["Hint: constructor name is ",(0,i.tZ)("code",{children:p}),"."]}):null,(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here"),editorRef:f,language:o,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function F(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&u.setValue(a)},[u,a]);var p=t.setupIntro().trim();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here"),editorRef:f,language:o,skeleton:p,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}function W(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&u.setValue(a)},[u,a]);var p=t.tearDownIntro().trim();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here"),editorRef:f,language:o,skeleton:p,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}var H=function(e){var t=e.language,n=e.meta,o=(0,r._)((0,h.useState)(!1),2),a=o[0],l=o[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(_.zx,{iconLeft:(0,i.tZ)(I.Z,{}),onClick:function(){return l(!0)},text:"Setup"}),(0,i.tZ)(U,{language:t,isOpen:a,onClose:function(){return l(!1)},hasMetadata:!!(null==n?void 0:n.id),meta:n})]})},V=n(63257),z=n(64586),j=n(29609),q=n(18060),J=n(7924),Y=n(64318),K=n(99321),$=n(76575),Q=n(55821),ee=n(98924),et=n(43312),en=n(15561),er=n(87128),ei=n(56731),eo={success:(0,et.iv)({":not([disabled])":{borderColor:d.TV.accentPositiveStrongest}}),error:(0,et.iv)({":not([disabled])":{borderColor:d.TV.accentNegativeStrongest}}),warning:(0,et.iv)({":not([disabled])":{borderColor:d.TV.yellowStrongest}}),default:void 0,loading:void 0},ea={success:(0,et.iv)([{color:d.TV.accentPositiveStrongest}]),error:(0,et.iv)([{color:d.TV.accentNegativeStrongest}]),warning:(0,et.iv)([{color:d.TV.yellowStrongest}]),default:void 0,loading:void 0},el={success:(0,i.tZ)(T.Z,{}),error:(0,i.tZ)(en.Z,{}),warning:(0,i.tZ)(er.Z,{}),default:void 0,loading:(0,i.tZ)(s.Z,{})},ec=function(e){var t=el[e.state];return(0,i.BX)(c.G,{css:[ea[e.state],d.l0.rowWithGap(4)],children:[h.isValidElement(t)?h.cloneElement(t,{size:12}):null,(0,i.tZ)(l.xv,{variant:"small",multiline:!1,children:e.message})]})},es=(0,et.iv)("display:grid;grid-gap:",d.TV.space8,";grid-template-areas:'label . status'\n    'input input input'\n    'validation validation validation'\n    'details details details';> .label{grid-area:label;}> .status{grid-area:status;}> .input{grid-area:input;}> .details{grid-area:details;}> .validation{grid-area:validation;}"),eu=function(e){var t,n=e.id,r=e.label,o=e.status,a=e.description,c=e["aria-describedby"],s=e.error,u=e.isValid,f=e.touched,h=e.value,p=e.warning,g=e.successText,y=(0,ee._)(e,["id","label","status","description","aria-describedby","error","isValid","touched","value","warning","successText"]),b=(0,ei.U)(),w=n||b("input"),Z=o&&b("status"),x=a?b("description"):void 0,C=[Z,x,c].filter(Boolean).join(" "),_=!(t={description:a,error:s,isValid:u,touched:f,value:h,warning:p,successText:g}).touched&&t.description?{state:"default",message:t.description}:t.error?{message:t.error.message,state:"error"}:t.warning?{message:t.warning.message,state:"warning"}:t.isValid?{message:t.successText||"",state:"success"}:t.touched?{message:"",state:"loading"}:void 0;return(0,i.BX)("div",{css:es,children:[(0,i.tZ)("label",{htmlFor:w,className:"label",children:(0,i.tZ)(l.xv,{variant:"small",color:"dimmer",multiline:!1,children:r})}),o?(0,i.tZ)(l.xv,{multiline:!1,variant:"small",color:"dimmer",css:[d.l0.textAlign.right],className:"status",children:o}):null,(0,i.tZ)(q.II,(0,v._)((0,m._)({id:w,className:"input",value:h,css:[eo[(null==_?void 0:_.state)||"default"]]},y),{"aria-describedby":C,"aria-invalid":(null==_?void 0:_.state)==="error"})),(0,i.tZ)("div",{id:x,className:"validation",css:[ea[(null==_?void 0:_.state)||"default"]],"aria-live":(null==_?void 0:_.state)!=="default"?"polite":void 0,children:_?(0,i.tZ)(ec,(0,m._)({},_)):null})]})},ed=n(85438),ef=n(27387),eh=n(96583),ep=n(43182),em=n(39864),ev=n(45929),eg=n(81199),ey=n(15073),eb="\x1b[0;31m",ew="\x1b[0m",eZ=["⣾","⣽","⣻","⢿","⡿","⣟","⣯","⣷","⠁","⠂","⠄","⡀","⢀","⠠","⠐","⠈"];function ex(e){var t=e.name,n=e.failureMessage,r=e.stack;return"❌	".concat(eb).concat(t).concat(ew,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var eC=function(e){var t,n,o=e.language,a=e.unitTests,l=e.onResult,s=e.trackingContext,u=e.getRunnerOutput,d=(0,r._)((0,h.useState)(!1),2),f=d[0],p=d[1],v=(0,eg.Z)(),g=v.container,y=v.packager,b=v.fs,w=null,Z=u(),x=Z&&void 0!==Z.startBlock&&void 0!==Z.endBlock&&void 0!==Z.writeOutputToBlock&&void 0!==Z.writeErrorToBlock,S=function(){p(!1),(0,ey.WT)(b),w&&(w.stopLogSpinner(),w.finish(),w=null)},k=(t=(0,ef._)(function(){var e,t,n,r,i,c,u,d,h,v,_,k,E,T,R,I,D,B,G,A,P,N,O,U;return(0,eh.Jh)(this,function(M){switch(M.label){case 0:if(f)return[2];if(t=null,w={startLogSpinner:function(e){if(t)throw Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var n=e,r=0;return t=setInterval(function(){var e=eZ[++r%eZ.length];if(!w)throw Error("Expected logger");w.clearLine(),w.logMessage(e+" "+n)},100),function(e){n=e}},stopLogSpinner:function(){t&&clearInterval(t),t=null},finish:function(){if(x&&e){var t;null==Z||null===(t=Z.endBlock)||void 0===t||t.call(Z,e)}},logMessage:function(t){var n,r;if(x&&e){null==Z||null===(r=Z.writeOutputToBlock)||void 0===r||r.call(Z,e,t);return}null==Z||null===(n=Z.write)||void 0===n||n.call(Z,t)},logError:function(t){if(x&&e){var n;null==Z||null===(n=Z.writeErrorToBlock)||void 0===n||n.call(Z,e,t)}},clearLogs:function(){var e;x||(null==Z||null===(e=Z.clear)||void 0===e||e.call(Z),null==w||w.logMessage("\r\n"))},clearLine:function(){if(!w)throw Error("Expected logger");w.logMessage("\x1b[1K\r")}},!a)throw Error("Run button should not be active if there are no tests");return p(!0),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"ranTests"}),w.clearLogs(),x&&(e=null==Z?void 0:null===(n=Z.startBlock)||void 0===n?void 0:n.call(Z,ev.kH.UNIT_TEST).id),[4,(r=(0,L.x)(o)).buildAndRunTests((0,m._)({container:g,fs:b,packager:y,logger:w},a))];case 1:if(i=M.sent(),w.stopLogSpinner(),w.clearLine(),w.clearLogs(),null!==i.error)return w.logMessage("".concat(eb).concat(i.error).concat(ew,"\r\n")),S(),a.tests.map(function(e){return{testId:e.id,didPass:!1}}),[2];if(c=i.result.passed?[]:i.result.failures.map(function(e){return r.parseTestResultName(e.name)}),u=[],d=a.tests.map(function(e){return r.getProperTestName(e.name)}),(h=c.filter(function(e){return!d.includes(e)})).length)_=h[0],k=i.result.failures[0].stack,w.logMessage(ex({name:_,failureMessage:"The following error occurred but was not related to a single unit test",stack:k})),w.logError("Testing failed"),(v=u).push.apply(v,(0,V._)(a.tests.map(function(e){return{testId:e.id,didPass:!1}})));else{E=!0,T=!1,R=void 0;try{for(I=a.tests[Symbol.iterator]();!(E=(D=I.next()).done);E=!0){if(B=D.value,G=r.getProperTestName(B.name),A=c.indexOf(G),P=-1===A,u.push({testId:B.id,didPass:P}),P){w.logMessage("✅	".concat("\x1b[0;32m").concat(G).concat(ew,"\r\n\r\n"));continue}N=i.result.failures[A].stack,w.logMessage(ex({name:G,failureMessage:B.failureMessage,stack:N})),w.logError('Test "'.concat(G,'" failed'))}}catch(e){T=!0,R=e}finally{try{E||null==I.return||I.return()}finally{if(T)throw R}}}if(l(u),O=a.tests.length,i.result.passed)return w.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(O,"/").concat(O,"  ").concat(ew,"\r\n")),S(),[2];return U=O-i.result.failures.length,w.logMessage("".concat("\x1b[48;5;88m","  ").concat(U,"/").concat(O," passed, see errors above  ").concat(ew)),S(),[2]}})}),function(){return t.apply(this,arguments)}),E=(n=(0,ef._)(function(){return(0,eh.Jh)(this,function(e){try{k()}catch(e){ep.$e(function(t){t.setTag("unittestsrun","true"),ep.Tb(e)}),w&&(w.logMessage("\r\n".concat(eb," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(ew,"\r\n")),w.logError("Running tests failed")),S()}return[2]})}),function(){return n.apply(this,arguments)});return a&&a.tests.length>0?(0,i.tZ)(c.G,{children:(0,i.tZ)(_.zx,{disabled:f,colorway:"primary",iconLeft:(0,i.tZ)(em.Z,{}),onClick:E,text:f?"Running tests...":"Run tests"})}):null};function e_(e){var t=e.isOpen,n=e.test,a=e.language,s=e.onClose,f=e.trackingContext,p=(0,o.Z)(),g=(0,x.Z)().showConfirm,y=(0,r._)((0,h.useState)(null),2),b=y[0],w=y[1],Z=(0,r._)((0,h.useState)(""),2),E=Z[0],R=Z[1],I=(0,r._)((0,h.useState)(""),2),D=I[0],B=I[1],G=(0,r._)((0,h.useState)(""),2),A=G[0],P=G[1],U=(0,r._)((0,O.Hd)({onError:function(e){return P(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?P(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:p}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:O.Rb});return t?(0,v._)((0,m._)({},t),{tests:(0,V._)(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),g("Test created!"),s()))}}),2),M=U[0],X=U[1],F=(0,r._)((0,O.kO)({onError:function(e){return P(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?P(t.message):"ReplUnitTest"===t.__typename&&(g("Test updated!"),s()))}}),2),W=F[0],H=F[1],$=(0,j.Y)("",function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0});(0,h.useEffect)(function(){$.setValue((null==n?void 0:n.name)||"",{preventTouch:!0}),B((null==n?void 0:n.failureMessage)||""),R((null==n?void 0:n.code)||""),b&&b.setValue((null==n?void 0:n.code)||"")},[n,b]),(0,h.useEffect)(function(){P("")},[E,P]);var Q=(0,L.x)(a),ee="".concat(Q.getCommentChar()," Enter code here"),et=!n||n.name!==$.value||n.code!==E||n.failureMessage!==D,en=X.loading||H.loading,er=Q.testIntro($.value||""),ei=Q.hasClosingBrackets()?Q.getClosingBrackets():"",eo=(0,r._)((0,h.useState)(!1),2),ea=eo[0],el=eo[1],ec=function(){b&&(b.setValue("  "+Q.exampleTest.code),b.focus()),R(Q.exampleTest.code)};return(0,i.tZ)(k.u,{isOpen:t,onRequestClose:s,maxWidth:872,children:(0,i.BX)(c.G,{css:[d.l0.colWithGap(24)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.tZ)("label",{htmlFor:"name",children:(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,i.tZ)(eu,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:$.value,isValid:$.isValid,error:$.error,warning:$.warning,touched:$.touched,onChange:function(e){$.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.justify.spaceBetween],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(4)],children:[(0,i.BX)(z.Z,{isOpen:ea,onClickOutside:function(){return el(!1)},placement:"bottom-end",children:[(0,i.tZ)(_.zx,{iconLeft:(0,i.tZ)(K.Z,{}),size:"small",variant:"outlined",text:"View an example",onClick:function(){if([ee,Q.exampleTest.code].includes(E.trim())){ec();return}el(!0)}}),(0,i.BX)(c.G,{children:["This will overwrite your current test. Are you sure?",(0,i.BX)(c.G,{css:[d.l0.rowWithGap(4),d.l0.pt(8)],children:[" ",(0,i.tZ)(_.zx,{text:"No, go back",size:"small",iconLeft:(0,i.tZ)(Y.Z,{}),onClick:function(){el(!1)}}),(0,i.tZ)(_.zx,{text:"Yes, delete test",colorway:"negative",size:"small",iconLeft:(0,i.tZ)(T.Z,{}),onClick:function(){ec(),el(!1)}})]})]})]}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(J.Z,{}),size:"small",variant:"outlined",text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{skeleton:er,skeletonClosingBracket:ei,language:a,editorRef:w,onChange:R,placeholder:ee})})})]}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,i.tZ)(q.II,{value:D,onChange:function(e){return B(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.justify.spaceBetween],children:[(0,i.tZ)(l.xv,{css:[d.l0.color.accentNegativeStronger],multiline:!1,children:A}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(12)],children:[(0,i.tZ)(_.zx,{text:"Cancel",onClick:s}),(0,i.tZ)(_.zx,{text:"".concat(en?"Creating test...":"Create test"),iconLeft:(0,i.tZ)(u.Z,{}),colorway:"primary",disabled:!et||en,onClick:function(){if(!$.validate()){if(E.length<=0){P("Test cannot be empty");return}n?(W({variables:{input:{name:$.value,code:E,failureMessage:D,testId:n.id}}}),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{trackingData:{context:f},action:"modifiedTest"})):(M({variables:{input:{name:$.value,code:E,failureMessage:D,replId:p}}}),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{trackingData:{context:f},action:"addedTest"}))}}})]})]})]})})}function eS(e){var t=e.testId,n=e.onClose,a=(0,x.Z)().showConfirm,s=(0,o.Z)(),u=(0,r._)((0,O.IV)({onError:function(e){return b(e.message)},update:function(e,r){var i,o=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;o&&("UserError"===o.__typename?b(o.message):"ReplUnitTest"===o.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:s}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter(function(e){return r("id",e)!==t});return(0,v._)((0,m._)({},e),{tests:(0,V._)(i)})}}}),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),a("Test deleted!"),n()))}}),2),f=u[0],p=u[1],g=(0,r._)((0,h.useState)(""),2),y=g[0],b=g[1];return(0,i.tZ)(k.u,{isOpen:!!t,onRequestClose:n,children:(0,i.BX)(c.G,{css:[d.l0.colWithGap(24)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,i.tZ)(l.xv,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.xv,{css:[d.l0.color.accentNegativeStronger],children:y}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(12),d.l0.justify.end],children:[(0,i.tZ)(_.zx,{text:"Cancel",disabled:p.loading,onClick:n}),(0,i.tZ)(_.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,i.tZ)(Q.Z,{}),disabled:p.loading,onClick:function(){if(!t)throw Error("Expected a testId");f({variables:{testId:t}})}})]})]})]})})}var ek=function(e){var t=e.unitTests,n=e.isAddingTest,s=e.onClose,f=e.language,p=e.canWrite,m=e.trackingContext,v=void 0===m?"default":m,g=e.getRunnerOutput,b=(0,r._)((0,h.useState)(n),2),w=b[0],Z=b[1],x=(0,r._)((0,h.useState)(null),2),C=x[0],S=x[1],k=(0,r._)((0,h.useState)(null),2),E=k[0],T=k[1],R=(0,o.Z)(),I=(0,r._)((0,O.lQ)(),1)[0],D=(null==t?void 0:t.tests)||[];return(0,i.BX)(c.G,{css:[d.l0.colWithGap(16)],children:[(0,i.tZ)(eC,{language:f,unitTests:t,onResult:function(e){I({variables:{input:{replId:R,results:e},replId:R}})},getRunnerOutput:g,trackingContext:v}),D.length>0?(0,i.tZ)(c.G,{css:[d.l0.colWithGap(8),d.l0.align.center],children:D.map(function(e){var t,n;return(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)==="ReplUnitTestLastRun"&&(e.lastRun.status===ed.$I.Passed?n="passed-test":e.lastRun.status===ed.$I.Failed&&(n="failed-test")),(0,i.tZ)(c.G,{className:"test ".concat(n),css:{width:"100%"},children:(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center,d.l0.p(8),d.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,i.tZ)(l.xv,{multiline:!1,children:e.name}),p?(0,i.BX)(c.G,{css:[d.l0.rowWithGap(8)],children:[(0,i.tZ)(a.hU,{onClick:function(){S(e)},alt:"Edit",children:(0,i.tZ)($.Z,{})}),(0,i.tZ)(a.hU,{onClick:function(){T(e.id)},alt:"Delete",children:(0,i.tZ)(Q.Z,{})})]}):null]})},e.id)})}):(0,i.BX)(c.G,{css:[d.l0.colWithGap(8),d.l0.align.center],children:[(0,i.tZ)(l.xv,{css:[d.l0.textAlign.center],children:"Looks like you don’t have any tests yet!"}),p?(0,i.tZ)(_.zx,{text:"Add test",onClick:function(){return Z(!0)},iconLeft:(0,i.tZ)(u.Z,{})}):null]}),(0,i.tZ)(e_,{isOpen:w||!!C||n,test:C,language:f,onClose:function(){S(null),Z(!1),s&&s()},trackingContext:v}),(0,i.tZ)(eS,{testId:E,onClose:function(){return T(null)}}),(0,i.tZ)(y(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},eE=n(49345),eT=function(e){var t,n,m,v,g=e.onBack,y=e.getRunnerOutput,b=(0,o.Z)(),w=(0,r._)((0,h.useState)(!1),2),x=w[0],C=w[1],_=(0,eE.Z)(),S=_.language,k=_.isLoading,E=(0,p.CH)({variables:{replId:b}}),T=null===(t=E.data)||void 0===t?void 0:t.repl;if(E.loading||k)return(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.flex.row,d.l0.align.center,d.l0.justify.center,d.l0.p(16)],children:(0,i.tZ)(s.Z,{})});if(!T||"Repl"!==T.__typename)return(0,i.tZ)(c.G,{css:[d.l0.p(16)],children:(0,i.tZ)(l.xv,{css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!S)return(0,i.tZ)(c.G,{css:[d.l0.p(16)],children:(0,i.tZ)(l.xv,{css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var R="default";(null==T?void 0:T.isProject)?R="project_repl":(null==T?void 0:T.isProjectFork)&&(R="submission_repl");var I=!!((null===(n=T.unitTests)||void 0===n?void 0:n.tests)&&T.unitTests.tests.length>0);return(null==T?void 0:null===(m=T.currentUserPermissions)||void 0===m?void 0:m.writeTests)?(0,i.BX)(c.G,{css:[d.l0.colWithGap(16),d.l0.align.center],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center,{width:"100%"}],children:[(0,i.tZ)(f.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,i.tZ)(a.hU,{alt:"Add test",size:32,onClick:function(){return C(!0)},children:(0,i.tZ)(u.Z,{})})]}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8),d.l0.maxWidth(256),{width:"80%"}],children:[(0,i.tZ)(H,{language:S,meta:(null===(v=T.unitTests)||void 0===v?void 0:v.meta)||null}),(0,i.tZ)(ek,{isAddingTest:x,unitTests:(null==T?void 0:T.unitTests)||null,onClose:function(){return C(!1)},language:S,canWrite:!0,trackingContext:R,getRunnerOutput:y}),g?(0,i.tZ)(Z,{hasTests:I,onClick:g}):null]})]}):(0,i.BX)(c.G,{css:[d.l0.colWithGap(16)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,i.tZ)(c.G,{css:{width:"100%",overflowY:"auto"},children:(0,i.tZ)(ek,{unitTests:(null==T?void 0:T.unitTests)||null,language:S,isAddingTest:!1,canWrite:!1,trackingContext:R,getRunnerOutput:y})})]})}},22529:function(e,t,n){n.d(t,{x:function(){return T},y:function(){return E}});var r=n(27387),i=n(63257),o=n(96583),a=n(51305),l=n(43182),c=n(60305),s=n(12285),u=function(){"use strict";function e(t){(0,s._)(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}(),d=n(15073),f={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,d.Og)(f.testSuiteName())," {")},classConstructorName:function(){return(0,d.Og)(f.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(f.testIntroPreName()).concat(e).concat(f.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,d.Og)(f.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(f);r.push(f.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(f.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(f.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(f.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(f.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return v.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=f.buildSuite({tests:o,meta:a});return f.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},h="__UNIT_TEST_RESULT_START__",p="__UNIT_TEST_RESULT_END__",m="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,d.Og)(f.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,d.Og)(f.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(h,'");\n        System.out.println(out);\n        System.out.println("').concat(p,'");\n    }\n}');function v(){return(v=(0,r._)(function(e){var t,n,r,l,s,u,v,g,y,b,w,Z,x,C,_,S,k,E,T,R,I;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,l=e.logger,s=e.suiteCode,v=l.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),v("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:s,filename:"".concat(f.testSuiteName(),".java")})];case 2:if(g=o.sent().error)return f.captureSetupError({tag:"Failed to create suite code file",raw:g}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return v("Creating your test files 2/2"),[4,(0,d.e3)({fs:n,code:m,filename:"".concat(f.testRunnerName(),".java")})];case 3:if(y=o.sent().error)return f.captureSetupError({tag:"Failed to create test runner file",raw:y}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return l.stopLogSpinner(),l.clearLine(),l.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])];case 4:return o.sent(),[4,r.installPackages(a.D.active())];case 5:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return l.clearLogs(),v=l.startLogSpinner("Compiling your files"),[4,t.exec("find",".","-type","f","-name","*.java","-print0")];case 6:if(w=(b=o.sent()).output,Z=b.error)return x="Failed to fetch working directory java files",f.captureSetupError({tag:x,raw:Z}),[2,{error:"".concat(x,"\r\n\r\n")+(null==w?void 0:w.replace(/\n/g,"\n\r"))+"\r\n\r\n"+Z}];if("string"!=typeof w)throw Error("expected working directory files to be a string");return C=w.slice(0,-1).split("\x00"),_=".:./target/dependency/*",[4,(u=t).exec.apply(u,["javac","-classpath",_,"-d","."].concat((0,i._)(C)))];case 7:if(k=(S=o.sent()).output,E=S.error)return[2,{error:"".concat("Failed to compile test runner file","\r\n\r\n")+(null==k?void 0:k.replace(/\n/g,"\n\r"))+"\r\n\r\n"+E}];return v("Running your tests"),[4,t.exec("java","-classpath",_,(0,d.Og)(f.testRunnerName()))];case 8:if(R=(T=o.sent()).output,I=T.error)return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==R?void 0:R.replace(/\n/g,"\n\r"))+"\r\n\r\n"+I}];if("string"!=typeof R)throw Error("expected runOutput to be a string");return[2,{result:JSON.parse(R.slice(R.indexOf(h)+h.length,R.lastIndexOf(p))),error:null}]}})})).apply(this,arguments)}var g=function(e){return!!e&&e.trim().length>0&&e.split("\n").some(function(e){return!(e.trim().startsWith("#")||""===e.trim())})},y={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return y.testIntroPreName()+e+y.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(y);r.push(y.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(y.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),g(n.setup)&&(r.push(y.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),g(n.tearDown)&&(r.push(y.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r.push(y.testIntro(s.name)),r.indent(),r.push(s.code||"pass"),r.dedent(),r.newLine()}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return x.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=y.buildSuite({tests:o,meta:a});return y.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},b="__UNIT_TEST_RESULT_START__",w="__UNIT_TEST_RESULT_END__",Z="import unittest\nimport ".concat((0,d.Og)(y.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,d.Og)(y.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(b,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(w,"');");function x(){return(x=(0,r._)(function(e){var t,n,r,i,l,s,u,f,h,p,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,s=i.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),s("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:l,filename:"".concat(y.testSuiteName(),".py")})];case 2:if(u=o.sent().error)return y.captureSetupError({tag:"Failed to create suite code file",raw:u}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return s("Creating your test files 2/2"),[4,(0,d.e3)({fs:n,code:Z,filename:"".concat(y.testRunnerName(),".py")})];case 3:if(f=o.sent().error)return y.captureSetupError({tag:"Failed to create test runner file",raw:f}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages(a.D.active())];case 4:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return i.clearLogs(),i.startLogSpinner("Running your tests"),[4,t.exec("python","-B",(0,d.Og)("".concat(y.testRunnerName(),".py")))];case 5:if(p=(h=o.sent()).output,m=h.error)return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==p?void 0:p.replace(/\n/g,"\n\r"))+"\r\n"+m}];if("string"!=typeof p)throw Error("expected runoutput to be a string");return[2,{result:JSON.parse(p.slice(p.indexOf(b)+b.length,p.lastIndexOf(w))),error:null}]}})})).apply(this,arguments)}var C={testRunnerName:function(){throw Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return C.testIntroPreName()+e+C.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(C);r.push(C.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(C.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(C.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(C.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(C.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return S.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=C.buildSuite({tests:o,meta:a});return C.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function _(){return(_=(0,r._)(function(e){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,e.exec("sh","-c","which jest &> /dev/null && echo 1 || echo 0")];case 1:if("1"===((t=n.sent()).output?t.output.trim():null))return[2];return[4,e.exec("npm","install","-g","jest@24.x.x")];case 2:return n.sent(),[2]}})})).apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var t,n,r,i,l,s,u,f,h,p,m,v,g,y,b,w,Z,x,S;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,s=i.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),s("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:l,filename:"".concat(C.testSuiteName(),".js")})];case 2:if(u=o.sent().error)return C.captureSetupError({tag:"Failed to create suite code file",raw:u}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return s("Creating your test files 2/2"),f=69,h="jest.config.json",p={testRegex:(0,d.Og)("".concat(C.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,d.e3)({fs:n,code:JSON.stringify(p),filename:h})];case 3:if(m=o.sent().error)return C.captureSetupError({tag:"Failed to create config file",raw:m}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,function(e){return _.apply(this,arguments)}(t)];case 4:return o.sent(),[4,r.installPackages(a.D.active())];case 5:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return i.clearLogs(),s=i.startLogSpinner("Running your tests"),v=(0,d.Og)("output.json"),[4,t.exec("jest","--json","--outputFile",v,"--config",(0,d.Og)(h),"--forceExit","--passWithNoTests")];case 6:if(y=(g=o.sent()).output,(b=g.error)&&!b.endsWith(f.toString()))return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==y?void 0:y.replace(/\n/g,"\n\r"))+"\r\n"+b}];return s("Parsing your test results"),[4,n.readFile(v)];case 7:if((w=o.sent()).error)return C.captureSetupError({tag:"Error reading test results",raw:w.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}];if((Z=JSON.parse(w.content.toString())).success)return[2,{error:null,result:{passed:!0,failures:[]}}];if(!(S=(x=Z.testResults[0]).assertionResults.filter(function(e){return"passed"!==e.status}).map(function(e){return{name:e.title,stack:e.failureMessages[0]}})).length)return[2,{error:x.message.replace(/\n/g,"\r\n")}];return[2,{error:null,result:{passed:!1,failures:S}}]}})})).apply(this,arguments)}var k={java10:f,java10_beta:f,java:f,python3:y,python3_beta:y,python:y,nodejs:C,javascript:C,nodejs_beta:C};function E(e){return e in k}function T(e){if(!E(e))throw Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(k)));return k[e]}},15073:function(e,t,n){n.d(t,{Og:function(){return u},WT:function(){return h},e3:function(){return d}});var r=n(27387),i=n(96583),o=n(43182),a=n(52399),l=n(73372),c=n(57253),s="_test_runner";function u(e){return s+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,o;return(0,i.Jh)(this,function(i){return t=e.fs,n=e.code,r=s+e.filename,o=a.Z.from(n,"utf8"),[2,t.writeFile(r,o)]})})).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(l.Ql)];case 1:if((t=r.sent()).error)return[2];return[4,Promise.all(t.children.map(function(t){return t.filename.startsWith(s)?t.type===c.Tv.File?e.deleteFile(t.filename):e.deleteDir(t.filename):Promise.resolve(null)}))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.$e(function(e){e.setTag("unitTestLib","true"),o.Tb(n)}),[3,4];case 4:return[2]}})})).apply(this,arguments)}},72604:function(e,t,n){n.d(t,{AF:function(){return Z},Hd:function(){return C},IV:function(){return E},Rb:function(){return g},aA:function(){return v},kO:function(){return S},lQ:function(){return R},rU:function(){return b}});var r=n(41733),i=n(21262),o=n(71440),a=n(99165);function l(){var e=(0,i._)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(l()),g=(0,o.Ps)(c()),y=(0,o.Ps)(s(),v);function b(e){var t=(0,r._)({},m,e);return a.D(y,t)}var w=(0,o.Ps)(u(),v);function Z(e){var t=(0,r._)({},m,e);return a.D(w,t)}var x=(0,o.Ps)(d(),g);function C(e){var t=(0,r._)({},m,e);return a.D(x,t)}var _=(0,o.Ps)(f(),g);function S(e){var t=(0,r._)({},m,e);return a.D(_,t)}var k=(0,o.Ps)(h());function E(e){var t=(0,r._)({},m,e);return a.D(k,t)}var T=(0,o.Ps)(p());function R(e){var t=(0,r._)({},m,e);return a.D(T,t)}},49345:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(66626),i=n(84806),o=n(81199),a=n(50959),l=n(87137),c=n(22529);function s(){var e=(0,i.Z)(),t=(0,o.Z)().dotReplit,n=null==e?void 0:e.language,s=(0,r._)((0,a.useState)(null),2),u=s[0],d=s[1],f=(0,r._)((0,a.useState)(!0),2),h=f[0],p=f[1];return(0,a.useEffect)(function(){if(n){if((0,c.y)(n)){d(n),p(!1);return}var e=!1,r=t.watch(function(t){if(e||(e=!0,p(!1)),t.error){t.error===l.Yt.NotFound&&d(null);return}var n,r,i=null===(r=t.config.unitTest)||void 0===r?void 0:null===(n=r.language)||void 0===n?void 0:n.toLowerCase();i&&(0,c.y)(i)?d(i):d(null)});return function(){r()}}},[n,t]),{language:u,isLoading:h}}},75588:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(74985),i=n(50959);function o(e){var t=e.uploadFiles,n=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:n,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},94563:function(e,t,n){n.d(t,{I5:function(){return p},sY:function(){return f}});var r=n(41733),i=n(21262),o=n(71440),a=n(58995);function l(){var e=(0,i._)(["\n  fragment ReplEnvironmentWebviewDeployBanner on Repl {\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    config {\n      isVnc\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    currentUserPermissions {\n      linkDomain\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n        ...ReplEnvironmentWebviewDeployBanner\n      }\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(l()),f=(0,o.Ps)(c()),h=(0,o.Ps)(s(),f,d);function p(e){var t=(0,r._)({},u,e);return a.a(h,t)}},50529:function(e,t,n){n.d(t,{e:function(){return e6},C:function(){return e4}});var r,i,o=n(41733),a=n(66626),l=n(74985),c=n(60305),s=n(49224),u=n(72093),d=n(85447),f=n(24857),h=n(72121),p=n(50959),m=(0,s.X)({root:[u.l0.p(32),{ul:{listStylePosition:"inside"},li:[u.l0.pb(16)]}]});function v(){return(0,p.useEffect)(function(){(0,c.j)(c.U3.WS_REPLCO_UNREACHABLE)},[]),(0,l.tZ)("div",{css:m.root,children:(0,l.BX)(f.gC,{align:"center",spacing:4,children:[(0,l.BX)(f.gC,{align:"center",children:[(0,l.tZ)(d.Z,{level:1,children:"\uD83D\uDE48"}),(0,l.tZ)(d.Z,{level:4,children:"This Repl link isn’t broken!"}),(0,l.tZ)(d.Z,{level:4,foreground:2,children:"It’s just blocked."})]}),(0,l.BX)(f.gC,{spacing:2,className:"why",children:[(0,l.tZ)(h.Z,{foreground:2,children:"Why this might be happening:"}),(0,l.tZ)(h.Z,{foreground:2,children:(0,l.BX)("ul",{children:[(0,l.BX)("li",{children:["Repl URLs could be"," ",(0,l.tZ)(h.Z,{fontWeight:"medium",foreground:1,children:"blocked by a firewall,"})," ","so contact your IT administrator"]}),(0,l.BX)("li",{children:["Repl URLs could be"," ",(0,l.tZ)(h.Z,{fontWeight:"medium",foreground:1,children:"blocked by your ISP,"})," ","so try getting in touch with them"]})]})})]}),(0,l.BX)(h.Z,{foreground:2,align:"center",children:["If you have any other questions, please check out"," ",(0,l.tZ)("a",{href:"https://docs.replit.com/teams-edu/it-administrators-toolkit",target:"_blank",rel:"noopener noreferrer",children:"our IT docs"})," ","or"," ",(0,l.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",children:"contact support"}),"."]})]})})}var g=(0,p.createContext)(!1),y=n(82230),b=n(94778),w=(0,s.X)({styles0:[u.l0.align.center,u.l0.p(64)],styles1:[u.l0.align.center],styles2:[u.l0.textAlign.center,u.l0.pb(8)],styles3:[u.l0.textAlign.center],styles4:[u.l0.p(16)],styles5:[u.l0.color.foregroundDimmer,u.l0.textAlign.center,u.l0.pb(16)]});function Z(){return(0,l.BX)(b.G,{css:w.styles0,children:[(0,l.BX)(b.G,{css:w.styles1,children:[(0,l.tZ)(d.Z,{level:1,children:"\uD83D\uDE48"}),(0,l.tZ)(y.xv,{css:w.styles2,variant:"headerDefault",children:"We've detected a crash loop"}),(0,l.tZ)(y.xv,{css:w.styles3,variant:"subheadDefault",color:"dimmer",children:"Preview is disabled until you click the run button again."})]}),(0,l.tZ)(b.G,{css:w.styles4,children:(0,l.tZ)(y.xv,{css:w.styles5,children:"There may be errors in the code that are causing your application to repeatedly crash."})})]})}var x=n(57967),C=n(39271),_=n(73117),S=n(48058),k=n(20112),E=n(98250);function T(e){var t,n=e.repl,r=e.onClick,i=(0,E.Z)("workspace","workspace-deployments-webview-banner"),o=i.shouldDisplay,a=i.register,s=i.dismiss;(0,p.useEffect)(function(){a()},[a]);var u=n.hostingDeploymentPermissions.canDeploy,d=(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&n.hostingDeployment.currentBuild;return u&&!d&&o?(0,l.tZ)(b.G,{children:(0,l.tZ)(k.U,{onClick:function(){(0,c.j)(c.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner"}),s(),r()},onDismiss:s,rounded:!1})}):null}var R=n(43312),I=n(28508),D=n(15235),B={container:(0,R.iv)(u.l0.p(16),u.l0.height("100%"),u.l0.align.center),imageContainer:(0,R.iv)(u.l0.height("100%"),u.l0.colWithGap(16),u.l0.align.center,u.l0.justify.center,u.l0.width(300))};function G(e){var t=e.hasForwardedPorts,n=e.showWebview;return(0,l.tZ)(b.G,{css:B.container,children:(0,l.BX)(b.G,{css:B.imageContainer,children:[(0,l.tZ)("div",{children:(0,l.tZ)(I.Z,{art:"Computer"})}),t?(0,l.BX)(l.HY,{children:[(0,l.tZ)(y.h4,{level:3,variant:"subheadDefault",children:"Looks like you have a server running."}),(0,l.tZ)(D.zx,{text:"Show web content",colorway:"primary",onClick:n})]}):(0,l.tZ)(y.h4,{level:3,variant:"subheadDefault",children:"Start a server to see the hosted output."})]})})}var A=n(98924);function P(e){var t=e.actionType,n=(0,A._)(e,["actionType"]);(0,c.j)(c.U3.WS_WEBVIEW_USED,(0,o._)({type:t},n))}var N=n(42516),L=n(32622),O=n(85638),U=n(85763),M=n(18060),X=n(45271),F=n(54579),W=n(64479),H=n(64432),V=n(2511),z=n(1383),j=n(76575),q=n(59249),J=n(29318),Y=n(37546),K=n(15434),$=n(72883),Q=n(87128),ee=n(56731),et=n(37058),en=n(47336),er=n.n(en),ei=n(28266),eo=n.n(ei),ea=n(21262),el=n(71440),ec=n(58995),es=n(99165);function eu(){var e=(0,ea._)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return eu=function(){return e},e}function ed(){var e=(0,ea._)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return ed=function(){return e},e}function ef(){var e=(0,ea._)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return ef=function(){return e},e}function eh(){var e=(0,ea._)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return eh=function(){return e},e}function ep(){var e=(0,ea._)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return ep=function(){return e},e}var em={},ev=(0,el.Ps)(eu()),eg=(0,el.Ps)(ed(),ev),ey=(0,el.Ps)(ef()),eb=(0,el.Ps)(eh(),ev),ew=(0,el.Ps)(ep(),ev),eZ=n(43182),ex=n(75993),eC=n(59947),e_=n(64318),eS=n(66958),ek=n(29252),eE=n(55821),eT=n(32508),eR=n.n(eT);function eI(e){switch(e.status){case"verified":return(0,l.tZ)(eC.Z,{color:u.TV.accentPositiveDefault});case"failed":return(0,l.tZ)(e_.Z,{color:u.TV.accentNegativeDefault});case"verifying":return(0,l.tZ)(J.Z,{color:u.TV.accentPrimaryDefault});default:return null}}function eD(e){var t,n=e.replId,r=e.hostedUrl,i=e.desiredARecord,c=e.existingDomain,s=e.onLink,d=e.onGoBack,f=e.onLinkStarted,h=e.onStateChanged,m=(0,a._)((0,p.useState)(c?"loading":null),2),v=m[0],g=m[1],w=(0,a._)((0,p.useState)(!1),2),Z=w[0],x=w[1],C=(0,a._)((0,p.useState)(null),2),_=C[0],S=C[1],k=(0,a._)((0,p.useState)(!1),2),E=k[0],T=k[1],R=(0,a._)((t=(0,o._)({},em,void 0),es.D(eb,t)),2),I=R[0],B=R[1],G=(0,p.useRef)(null),A=(0,p.useRef)(null),P=(0,p.useRef)(null),N=function(e){(null==e?void 0:e.current)&&e.current.select()},L=function(e){var t;(null==e?void 0:null===(t=e.current)||void 0===t?void 0:t.value)&&(0,ex.Z)(e.current.value).catch(function(e){eZ.$e(function(t){t.setTag("domain-link",!0),t.setExtra("type","copy"),eZ.Tb(e)})})},O=(0,a._)((0,p.useState)(c||""),2),U=O[0],X=O[1];(0,p.useEffect)(function(){B.data&&"Repl"===B.data.linkReplDomain2.__typename&&s()},[B.data,s]);var F=function(){try{var e=new URL("/",U);X(e.hostname)}catch(e){}},W=function(e){g(e),h()},H=eR()(U,{require_valid_protocol:!1})&&U.split(".").length>=2,V=H&&2===U.split(".").length,z=r.replace(/^https:\/\//,""),j="replit-verify=".concat(n),q=(0,ee.U)();return(0,l.BX)(b.G,{css:[u.l0.colWithGap(16)],children:[(0,l.BX)(b.G,{css:[u.l0.colWithGap(8)],children:[(0,l.tZ)(y.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,l.BX)(y.xv,{children:["Learn more"," ",(0,l.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",children:"here"}),"."]})]}),(0,l.BX)(b.G,{css:[u.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:q("domain"),children:(0,l.tZ)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Step 1: Enter your domain"})}),(0,l.tZ)(M.II,{className:"cname-url",readOnly:"loading"===v,value:U,onChange:function(e){X(e.target.value)},onBlur:function(){F()},placeholder:"example.com",id:q("domain")})]}),V&&!E?(0,l.BX)(b.G,{css:[u.l0.colWithGap(8)],children:[(0,l.BX)(b.G,{css:[u.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:q("record"),children:(0,l.BX)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add an ",(0,l.tZ)("code",{children:"A"})," Record"]})}),(0,l.BX)(b.G,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[(0,l.tZ)(y.xv,{multiline:!1,css:{fontFamily:u.TV.fontFamilyCode,maxWidth:"40%"},children:U}),(0,l.tZ)(y.xv,{multiline:!1,css:{fontFamily:u.TV.fontFamilyCode},children:"A"}),(0,l.tZ)(M.II,{readOnly:!0,ref:G,onChange:function(){return null},value:i,onFocus:function(){return N(G)},id:q("record")}),(0,l.tZ)(D.zx,{onClick:function(){return L(G)},text:"Copy"})]})]}),(0,l.tZ)(b.G,{css:[u.l0.flex.row,u.l0.align.stretch],children:(0,l.tZ)(D.zx,{variant:"outlined",onClick:function(){return T(!0)},text:"Use CNAME record instead."})})]}):null,H&&(E||!V)?(0,l.BX)(b.G,{css:[u.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:q("CNAMERecord"),children:(0,l.BX)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add a ",(0,l.tZ)("code",{children:"CNAME"})," Record"]})}),(0,l.BX)(b.G,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[(0,l.tZ)(y.xv,{multiline:!1,css:{fontFamily:u.TV.fontFamilyCode,maxWidth:"40%"},children:U}),(0,l.tZ)(y.xv,{multiline:!1,css:{fontFamily:u.TV.fontFamilyCode},children:"CNAME"}),(0,l.tZ)(M.II,{readOnly:!0,ref:P,onChange:function(){return null},value:z,onFocus:function(){return N(P)},id:q("CNAMERecord")}),(0,l.tZ)(D.zx,{onClick:function(){return L(P)},text:"Copy"})]}),V?(0,l.BX)(b.G,{css:[u.l0.colWithGap(8)],children:[(0,l.tZ)(y.xv,{variant:"small",children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,l.tZ)(b.G,{css:[u.l0.flex.row,u.l0.align.stretch],children:(0,l.tZ)(D.zx,{onClick:function(){return T(!1)},text:"Use A record instead",variant:"outlined"})})]}):null]}):null,H?(0,l.BX)(b.G,{css:[u.l0.colWithGap(4)],children:[V?(0,l.tZ)("label",{htmlFor:q("txtRecord"),children:(0,l.BX)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:["This domain also requires a ",(0,l.tZ)("code",{children:"TXT"})," Record"]})}):(0,l.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,l.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,l.BX)(b.G,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[(0,l.tZ)(y.xv,{multiline:!1,css:{fontFamily:u.TV.fontFamilyCode,maxWidth:"40%"},children:U}),(0,l.tZ)(y.xv,{multiline:!1,css:{fontFamily:u.TV.fontFamilyCode},children:"TXT"}),(0,l.tZ)(M.II,{readOnly:!0,ref:A,onChange:function(){return null},value:j,onClick:function(){return N(A)},id:q("txtRecord")}),(0,l.tZ)(D.zx,{onClick:function(){return L(A)},text:"Copy"})]})]}):null,"loading"===v?(0,l.tZ)(b.G,{css:[u.l0.colWithGap(12),u.l0.pt(16)],children:(0,l.tZ)(eB,{replId:n,domain:U,onVerified:function(){return W("verified")},onError:function(){return W("error")}})}):null,"verified"===v?(0,l.tZ)(b.G,{css:[u.l0.colWithGap(12),u.l0.pt(16)],children:(0,l.tZ)(y.xv,{multiline:!1,children:"Your domain has been verified."})}):null,"error"===v||_?(0,l.tZ)(b.G,{css:[u.l0.colWithGap(12),u.l0.pt(16)],children:(0,l.BX)(y.xv,{multiline:!1,children:["Creating the domain link failed",_?": "+_:"","."]})}):null,(0,l.BX)(b.G,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[(0,l.tZ)(D.zx,{onClick:d,text:"Close"}),H&&null===v?(0,l.tZ)(D.zx,{disabled:Z,onClick:function(){x(!0),S(null),I({variables:{replId:n,domain:U}}).then(function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.linkReplDomain2)||null;(null==n?void 0:n.__typename)==="Repl"?(S(null),W("loading")):(((null==n?void 0:n.__typename)==="ServiceUnavailable"||(null==n?void 0:n.__typename)==="NotFoundError"||(null==n?void 0:n.__typename)==="UnauthorizedError")&&S(null==n?void 0:n.message),W("error")),x(!1),f()}).catch(function(e){x(!1),S(e.message)})},text:"".concat(Z?"Linking domain...":"Link domain"),iconLeft:(0,l.tZ)(eS.Z,{}),colorway:"primary"}):null]})]})}function eB(e){var t=e.domain,n=e.replId,r=e.onVerified,i=e.onError,c=(f=(0,o._)({},em,{variables:{replId:n,domain:t},pollInterval:1e3}),ec.a(ey,f)),s=c.data,d=c.stopPolling;if((0,p.useEffect)(function(){if(s&&"Repl"===s.repl.__typename){var e,t,n=s.repl;if((null===(e=n.checkDomain2)||void 0===e?void 0:e.__typename)==="NotFoundError"){i();return}if((null===(t=n.checkDomain2)||void 0===t?void 0:t.__typename)==="DomainStatus2"){var o=n.checkDomain2,a=o.retry,l=o.verified;if(!l&&!a){i();return}(l||!a)&&d(),l&&r()}}},[s,d,r,i]),(null==s?void 0:s.repl.__typename)==="Repl"&&s.repl.checkDomain2){var f,h,m,v,g,w,Z="DomainStatus2"===s.repl.checkDomain2.__typename?s.repl.checkDomain2:null,x=null;if(null==Z?void 0:Z.records){var C=Z.records;C.__typename,x=(0,A._)(C,["__typename"])}var _=null;return(null==Z?void 0:Z.status)||((null===(w=s.repl.checkDomain2)||void 0===w?void 0:w.__typename)==="ServiceUnavailable"&&(_=s.repl.checkDomain2.message),_||(_="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.")),(0,l.BX)(b.G,{css:[u.l0.colWithGap(16),u.l0.justify.spaceBetween],children:[(0,l.BX)(b.G,{css:[u.l0.rowWithGap(16),u.l0.align.center],children:[(0,l.tZ)("div",{css:[u.l0.width("20px"),u.l0.height("20px"),{aspectRatio:"1 / 1"},{borderRadius:"100%"},{borderRadius:"100%"},{borderStyle:"solid"},{borderWidth:"3px"},{borderColor:u.TV.accentPrimaryDimmer},{borderTopColor:u.TV.accentPrimaryDefault},{transform:"rotate(0deg)"},{animation:"linear domain-loading 1s infinite"}],className:"jsx-4e6cc6caecb799c9"}),(0,l.tZ)("div",{className:"jsx-4e6cc6caecb799c9",children:_})]}),x||(null===(m=s.repl.checkDomain2)||void 0===m?void 0:m.__typename)==="DomainStatus2"&&(null===(v=s.repl.checkDomain2)||void 0===v?void 0:v.retry)||(null===(g=s.repl.checkDomain2)||void 0===g?void 0:g.__typename)==="ServiceUnavailable"?(0,l.BX)(b.G,{children:[(0,l.tZ)("br",{className:"jsx-4e6cc6caecb799c9"}),x?(0,l.BX)(b.G,{children:["Currently, your domain’s records show:",(0,l.tZ)("pre",{css:[u.l0.overflow("scroll")],className:"jsx-4e6cc6caecb799c9",children:Object.entries(x).map(function(e){var n=(0,a._)(e,2),r=n[0],i=n[1];return null==i?void 0:i.map(function(e){return(0,l.BX)("div",{className:"jsx-4e6cc6caecb799c9",children:[t," ",r," ",e]},"{domain}-{dnsType}")})})})]}):(0,l.tZ)(y.xv,{children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null,(0,l.tZ)(eo(),{id:"4e6cc6caecb799c9",children:"@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}return(null==s?void 0:s.repl.__typename)==="Repl"&&(null===(h=s.repl.checkDomain2)||void 0===h?void 0:h.__typename)==="NotFoundError"?(0,l.tZ)(l.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function eG(e){var t,n=e.replId,r=e.domain,i=e.onUnlink,c=e.onGoBack,s=(0,a._)((t=(0,o._)({},em,{variables:{input:{id:n,removeDomain:r}}}),es.D(ew,t)),2),d=s[0],f=s[1];return(0,p.useEffect)(function(){f.data&&f.data.updateRepl.repl&&i()},[f.data,i]),(0,l.BX)(b.G,{css:[u.l0.colWithGap(16)],children:[(0,l.BX)(b.G,{css:[u.l0.colWithGap(8)],children:[(0,l.tZ)(y.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,l.BX)(y.xv,{children:["Are you sure you want to unlink"," ",(0,l.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+r,children:r}),"?"]})]}),(0,l.BX)(b.G,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[(0,l.tZ)(D.zx,{onClick:c,text:"Cancel"}),(0,l.tZ)(D.zx,{onClick:function(){f.loading||d()},text:f.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,l.tZ)(eE.Z,{}),disabled:f.loading})]})]})}function eA(e){var t=e.replId,n=e.hostedUrl,r=e.apexProxy,i=e.onUnlink,o=e.onLink,c=e.domains,s=e.refetch,d=(0,a._)((0,p.useState)("listing"),2),f=d[0],h=d[1],m=(0,a._)((0,p.useState)(null),2),v=m[0],g=m[1],w=null;return"listing"===f?w=(0,l.BX)(b.G,{css:[u.l0.colWithGap(16)],children:[(0,l.BX)(b.G,{children:[(0,l.tZ)(y.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,l.tZ)(b.G,{css:[u.l0.colWithGap(16)],children:c.map(function(e){return e?(0,l.tZ)(b.G,{children:(0,l.BX)(b.G,{css:[u.l0.colWithGap(4),u.l0.justify.spaceBetween,u.l0.align.center],children:[(0,l.BX)(b.G,{css:[u.l0.rowWithGap(8),u.l0.align.center,u.l0.justify.spaceBetween,u.l0.width("100%")],children:[(0,l.tZ)(b.G,{css:[u.l0.flex.shrink(1)],children:(0,l.tZ)(H.u,{tooltip:e.domain,children:(0,l.tZ)(y.xv,{multiline:!1,children:e.domain})})}),(0,l.tZ)(b.G,{children:(0,l.tZ)(H.u,{tooltip:(0,l.tZ)(y.xv,{css:{textTransform:"capitalize"},multiline:!1,children:e.state}),children:(0,l.tZ)(eI,{status:e.state})})})]}),(0,l.BX)(b.G,{css:[u.l0.rowWithGap(12),u.l0.justify.end,u.l0.align.center,u.l0.width("100%"),"verified"!==e.state&&u.l0.pl(12)],children:[(0,l.tZ)(D.zx,{text:"Unlink",css:u.l0.width("verified"!==e.state?"50%":"100%"),onClick:function(){g(e.domain),h("unlinking")}}),"verified"!==e.state?(0,l.tZ)(D.zx,{text:"Check status",css:u.l0.width("50%"),onClick:function(){g(e.domain),h("linking")}}):null]})]})},e.domain):null})})]}),(0,l.tZ)(D.zx,{text:"Create domain link",onClick:function(){return h("linking")},iconLeft:(0,l.tZ)(ek.Z,{})})]}):"linking"===f?w=(0,l.tZ)(eD,{replId:t,desiredARecord:r,hostedUrl:n,existingDomain:v,onLink:o,onGoBack:function(){h("listing"),g(null)},onLinkStarted:s,onStateChanged:s}):"unlinking"===f&&null!==v&&(w=(0,l.tZ)(eG,{replId:t,domain:v,onUnlink:function(){s(),h("listing"),i()},onGoBack:function(){h("listing"),g(null)}})),(0,l.BX)(b.G,{css:[u.l0.colWithGap(16)],children:[(0,l.tZ)(y.h4,{level:1,variant:"subheadDefault",children:"Domain Linking"}),(0,l.BX)(y.xv,{css:{fontStyle:"italic"},children:["Domain linking to the development preview is deprecated, please consider switching to"," ",(0,l.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/about-deployments",target:"_blank",children:"deployments"})," ","as a more scalable solution."]}),w]})}(r=i||(i={})).Verified="verified",r.Verifying="verifying",r.Failed="failed";var eP=n(95571),eN=n(10118),eL=n(12202),eO=n(53928),eU=(0,R.iv)([u.l0.borderRadius(6),u.l0.color.foregroundDimmer,u.l0.height(24),u.l0.m(4)]),eM=[u.l0.reset.button,M.u3,u.l0.rowWithGap(0),u.l0.flex.grow(0),u.l0.color.accentPositiveStronger,u.l0.fontSize("small"),u.l0.focusRing,{"&:hover":[u.l0.cursor.pointer,u.l0.color.accentPositiveStrongest]},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},u.l0.align.center,u.l0.py(0),u.l0.px(4)],eX=(0,s.X)({root:[u.l0.flex.row,u.l0.align.center,u.l0.justify.spaceBetween,u.l0.border({color:u.TV.outlineDimmest,direction:"bottom"}),u.l0.p(2),u.l0.container("root"),u.l0.zIndex(1)],navControls:[u.l0.align.center,u.l0.rowWithGap(4),u.l0.flex.grow(1)],urlWrapper:[u.l0.position.relative,u.l0.flex.row,u.l0.flex.grow(1)],urlOptionsRoot:[u.l0.rowWithGap(0),u.l0.flex.growAndShrink(1)],urlOptions:[u.l0.p(8),u.l0.colWithGap(6),u.l0.borderRadius(4)],urlOptionsSection:[u.l0.colWithGap(4),u.l0.pb(8),u.l0.border({direction:"bottom"}),{":last-child":{borderBottom:0}}],urlOptionsTitle:[u.l0.rowWithGap(0),u.l0.justify.spaceBetween,u.l0.flex.grow(1)],portRadioGroup:[u.l0.colWithGap(8)],portOption:[u.l0.rowWithGap(8),u.l0.color.foregroundDimmer],portOptionSelected:[u.l0.rowWithGap(8),u.l0.color.foregroundDefault],portOptionLabel:[{"&:hover":[u.l0.cursor.pointer,u.l0.color.foregroundDefault]}],temporaryDevLinkWrapper:[u.l0.rowWithGap(4)],temporaryDevLinkText:{flex:"0 1 auto"},temporaryDevLink:[u.l0.display.block,u.l0.color.accentPositiveStronger,u.l0.fontSize("small"),u.l0.focusRing,{wordBreak:"break-all","&:hover":[u.l0.cursor.pointer,u.l0.color.accentPositiveStrongest]}],url:eM,urlSelected:[eM,u.l0.backgroundColor.backgroundHighest,{borderBottomLeftRadius:0}],urlPath:[u.l0.py(0),u.l0.fontSize(12),u.l0.flex.grow(1)],urlPath2:[u.l0.py(0),u.l0.fontSize(12),u.l0.flex.grow(1),{borderTopLeftRadius:0,borderBottomLeftRadius:0}],urlDots:[u.l0.backgroundColor.greenDimmer,u.l0.borderRadius(4),u.l0.p(2),{lineHeight:1,"&:hover":[u.l0.cursor.pointer,u.l0.backgroundColor.greenDefault]}],goButton:[u.l0.position.absolute,u.l0.right(4),u.l0.top("50%"),{transform:"translateY(-50%)"}],text:[u.l0.ml(8),u.l0.mr(4),u.l0.color.foregroundDimmest],buttons:[u.l0.flex.row,u.l0.align.center,(0,N._)({},u.nC.max(500,"root"),{span:{fontSize:0},svg:{marginRight:0}})],navButton:[u.l0.p(6),u.l0.borderRadius(4),u.l0.flex.shrink(0),{border:"none"}],fakeUrl:[u.l0.fontSize(12),u.l0.border(),{boxSizing:"content-box"},u.l0.borderRadius(6),u.l0.px(8),u.l0.py(2),u.l0.flex.grow(1),u.l0.rowWithGap(4),u.l0.align.center],devtoolsErrorsBadge:[u.l0.position.absolute,u.l0.center,u.l0.textAlign.center,u.l0.backgroundColor.accentNegativeStronger,u.l0.color.accentNegativeDimmest,u.l0.right(0),u.l0.top(-2),u.l0.p(2),u.l0.minWidth(14),u.l0.height(14),u.l0.borderRadius(16),u.l0.fontSize(10)]});function eF(e){var t=e.children;return(0,l.tZ)(H.u,{tooltip:"Dev URLs are only active when someone is in the workspace. The dev URL is also subject to change. For production hosting, use Deployments.",children:t})}function eW(e){var t=e.replId,n=e.url,r=e.webviewEventMonitorState,i=e.navigationState,c=e.forwardedPorts,s=e.canEditDomain,d=e.devtoolsErrorCount,f=e.iframeLoading,h=e.onToggleDevtools,m=e.onOpenPortSettings,v=(0,x.Z)(),g=function(e){var t,n,r,i=(t=(0,o._)({},em,{variables:{replId:e}}),ec.a(eg,t)),l=i.data,c=i.refetch,s=(0,a._)((0,p.useState)(!1),2),u=s[0],d=s[1],f=(0,p.useRef)(!1);if(!l||"Repl"!==l.repl.__typename)return{showEditReplcoDomainButton:!1};var h=null!==(r=null===(n=l.repl.domains)||void 0===n?void 0:n.filter(Boolean).filter(function(e){return!(null==e?void 0:e.hosting_deployment_id)}).map(function(e){return{domain:e.domain,state:e.state}}))&&void 0!==r?r:[];return h.length||f.current?(f.current=!0,{showEditReplcoDomainButton:!0,setIsEditingDomain:d,isEditingDomain:u,editDomainProps:{domains:h,refetch:c,replId:e,apexProxy:l.repl.apexProxy,hostedUrl:l.repl.hostedUrl,onUnlink:function(){c(),d(!1)},onLink:function(){c(),d(!1)}}}):{showEditReplcoDomainButton:!1}}(t),w=(0,l.tZ)(ej,{});return"external-page"===r.state?w=(0,l.tZ)(ez,{backToLocal:function(){return i.refresh()}}):"active"===r.state&&(w=(0,l.tZ)(eV,{url:n,navigationState:i,forwardedPorts:c,iframeLoading:f,onOpenPortSettings:m})),(0,l.BX)(W.Tg,{css:eX.root,children:[w,(0,l.tZ)(b.G,{css:u.l0.flex.row,children:(0,l.BX)(b.G,{css:eX.buttons,children:[s&&g.showEditReplcoDomainButton?(0,l.BX)(l.HY,{children:[(0,l.tZ)(D.zx,{variant:"outlined",size:"small",text:"Edit custom domain",onClick:function(){return g.setIsEditingDomain(!g.isEditingDomain)},iconLeft:(0,l.tZ)(j.Z,{size:16})}),(0,l.tZ)(X.u,{isOpen:g.isEditingDomain,onRequestClose:function(){return g.setIsEditingDomain(!1)},children:(0,l.tZ)(eA,(0,o._)({},g.editDomainProps))})]}):null,"active"===r.state?(0,l.BX)(b.G,{css:u.l0.position.relative,children:[(0,l.tZ)(D.zx,{size:"small",variant:"outlined",onClick:h,css:eU,text:"Devtools",iconLeft:(0,l.tZ)($.Z,{})}),d>0?(0,l.tZ)(b.G,{css:eX.devtoolsErrorsBadge,children:(0,l.tZ)(y.xv,{variant:"small",multiline:!1,children:d>99?"99+":d.toString()})}):null]}):null,(0,l.tZ)(eF,{children:(0,l.tZ)(O.Z,{size:"small",variant:"outlined",css:eU,href:i.getExternalUrl(),target:"_blank",iconLeft:(0,l.tZ)(q.Z,{}),text:v?"Open in the browser":"New tab",onClick:function(){P({actionType:"open_new_window"})}})})]})})]})}function eH(e){var t=e.url,n=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=n.canNavigateToInputRelativeUrl,c=n.navigateToInputRelativeUrl,s=n.inputRelativeUrl,u=n.setInputRelativeUrl,d=n.selectedPort,f=n.setPort,h=(0,a._)((0,p.useState)(!1),2),m=h[0],v=h[1],g=(0,ee.U)(),w=g("radioGroup");return(0,l.BX)(b.G,{css:eX.urlOptionsRoot,children:[(0,l.BX)(eO.xo,{isOpen:m,onOpenChange:v,label:"Show URL Options",background:"higher",children:[(0,l.BX)("button",{css:m?eX.urlSelected:eX.url,children:[(0,l.tZ)(eF,{children:(0,l.tZ)(b.G,{css:eX.urlDots,children:"{...}"})}),".".concat(t.includes("replit.dev")?"replit.dev":"repl.co").concat((0,eN.O2)(d)?"":":"+d)]}),(0,l.BX)(W.Tg,{css:eX.urlOptions,children:[(0,l.BX)(b.G,{css:eX.urlOptionsSection,children:[(0,l.BX)(b.G,{css:eX.urlOptionsTitle,children:[(0,l.BX)(y.xv,{children:["Listening on ",(0,L.Z)("port",r.length),":"]}),(0,l.tZ)(U.hU,{alt:"Networking tool",onClick:i,children:(0,l.tZ)(K.Z,{})})]}),(0,l.tZ)(F.E,{tag:"fieldset",css:eX.portRadioGroup,name:w,value:d.toString(),onChange:function(e){f(parseInt(e.target.value,10)),v(!1)},children:r.map(function(e,t){return(0,l.BX)(b.G,{css:d===e.configuration.externalPort?eX.portOptionSelected:eX.portOption,children:[(0,l.tZ)(F.Y,{id:g(e.configuration.externalPort),value:e.configuration.externalPort.toString()}),(0,l.tZ)("label",{htmlFor:g(e.configuration.externalPort),css:eX.portOptionLabel,children:":".concat(e.configuration.localPort," → :").concat(e.configuration.externalPort)})]},"".concat(t,"-").concat(e.configuration.externalPort,":").concat(e.configuration.localPort))})})]}),(0,l.BX)(b.G,{css:eX.urlOptionsSection,children:[(0,l.tZ)(y.xv,{children:"Dev URL:"}),(0,l.BX)(b.G,{css:eX.temporaryDevLinkWrapper,children:[(0,l.tZ)(y.xv,{css:eX.temporaryDevLinkText,maxLines:1,children:(0,l.tZ)(er(),{legacyBehavior:!0,href:t,passHref:!0,children:(0,l.tZ)("a",{css:eX.temporaryDevLink,target:"_blank",children:t})})}),(0,l.tZ)(eL.m,{textToCopy:t,tooltipText:"Copy link",tooltipDelay:"none",size:18})]}),(0,l.tZ)(y.xv,{color:"dimmer",variant:"small",children:"Dev URLs are temporary and will sleep after you leave the workspace."})]})]})]}),(0,l.tZ)(M.II,{css:eX.urlPath2,style:m?{borderBottomRightRadius:0}:{},value:s,onKeyDown:function(e){"Enter"===e.key&&o&&c()},onChange:function(e){if(""===e.currentTarget.value){u("/");return}u(e.target.value)}})]})}function eV(e){var t=e.url,n=e.navigationState,r=e.forwardedPorts,i=e.iframeLoading,o=e.onOpenPortSettings,a=n.canNavigateBack,c=n.navigateBack,s=n.canNavigateForward,u=n.navigateForward,d=n.canNavigateToInputRelativeUrl,f=n.navigateToInputRelativeUrl,h=n.refresh,p=(0,eP.NJ)(),m=(0,et.gf)("webviewpane.reload");return(0,l.BX)(b.G,{css:eX.navControls,children:[(0,l.tZ)(U.hU,{alt:"Back",tooltipDelay:"long",onClick:c,disabled:!a,css:eX.navButton,children:(0,l.tZ)(V.Z,{})}),(0,l.tZ)(U.hU,{alt:"Forward",tooltipDelay:"long",onClick:u,disabled:!s,css:eX.navButton,children:(0,l.tZ)(z.Z,{})}),(0,l.tZ)(U.hU,{alt:"Refresh".concat(m?" (".concat((0,et.Ih)(m,p),")"):""),tooltipDelay:"long",onClick:h,css:eX.navButton,children:i?(0,l.tZ)(J.Z,{}):(0,l.tZ)(Y.Z,{})}),(0,l.BX)(b.G,{css:eX.urlWrapper,children:[(0,l.tZ)(eH,{url:t,navigationState:n,forwardedPorts:r,onOpenPortSettings:o}),(0,l.tZ)(W.Tg,{elevated:!0,css:eX.goButton,children:(0,l.tZ)(U.hU,{alt:"Go to URL",disabled:!d,onClick:f,size:18,tooltipContents:(0,l.tZ)(et.bM,{keyCombo:"Enter"}),children:(0,l.tZ)(z.Z,{})})})]})]})}function ez(e){var t=e.backToLocal,n=(0,a._)((0,p.useState)(!1),2),r=n[0],i=n[1];return(0,l.BX)(b.G,{css:eX.navControls,children:[(0,l.tZ)(D.zx,{size:"small",variant:"outlined",onClick:function(){t(),i(!0)},loading:r,css:eU,text:"Back to my page",iconLeft:r?(0,l.tZ)(J.Z,{}):(0,l.tZ)(V.Z,{})}),(0,l.BX)(W.Tg,{elevated:!0,css:eX.fakeUrl,children:[(0,l.tZ)(H.u,{tooltip:"The URL bar is not supported when navigating to external pages. You can open in a new tab to use your browser instead.",delay:"none",placement:"auto",children:(0,l.tZ)(Q.Z,{})}),(0,l.tZ)(y.xv,{variant:"small",color:"dimmer",children:"External page"})]})]})}function ej(){return(0,l.tZ)(b.G,{css:eX.navControls,children:(0,l.BX)(W.Tg,{elevated:!0,css:eX.fakeUrl,children:[(0,l.tZ)(H.u,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,l.tZ)(J.Z,{})}),(0,l.tZ)(y.xv,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}var eq=n(94563),eJ=n(29370),eY=n(30509),eK=n(45929),e$=n(81199),eQ=n(12285),e0=n(85733),e1=n(36647),e2=function e(t){"use strict";var n=t.initialRelativeUrl,r=t.initialPort,i=t.onChange,o=t.navigateTo,a=this;(0,eQ._)(this,e),this.history=[],this.historyIndex=-1,this.init=function(e,t){a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1,a.notifyChanges()},this.notifyChanges=function(){a.onChange(a.canGoBack(),a.canGoForward(),a.getCurrentRelativeUrl(),a.getCurrentPort())},this.canGoBack=function(){return a.historyIndex>0},this.canGoForward=function(){return a.historyIndex<a.history.length-1},this.getCurrentRelativeUrl=function(){return a.history[a.historyIndex].relativeUrl},this.getCurrentPort=function(){return a.history[a.historyIndex].port},this.push=function(e,t){(e!==a.getCurrentRelativeUrl()||t!==a.getCurrentPort())&&(a.history=a.history.slice(0,a.historyIndex+1),a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1),a.notifyChanges()},this.relativeUrlUpdate=function(e){if(a.pendingNavigations>0){a.pendingNavigations-=1;return}a.push(e,a.getCurrentPort())},this.back=function(){P({actionType:"history_back"}),a.canGoBack()&&(a.historyIndex-=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.forward=function(){P({actionType:"history_forward"}),a.canGoForward()&&(a.historyIndex+=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.navigate=function(e,t){var n=null!=t?t:a.getCurrentPort();a.navigateTo.current(e,n),a.push(e,n),a.pendingNavigations+=1},this.refresh=function(){var e,t;P({actionType:"refresh"}),a.navigateTo.current(null!==(e=a.getCurrentRelativeUrl())&&void 0!==e?e:"/",null!==(t=a.getCurrentPort())&&void 0!==t?t:80)},this.setPort=function(e){var t=a.getCurrentRelativeUrl();a.navigate(t,e)},this.onChange=i,this.pendingNavigations=0,this.navigateTo=o,this.init(n,r)},e3=n(91175);function e4(e,t){var n=function(e,t){var n=void 0;if((null==e?void 0:e.portType)==="external")n=null==e?void 0:e.port;else if((null==e?void 0:e.portType)==="local"){var r=t.find(function(t){return t.configuration.localPort===e.port});n=null==r?void 0:r.configuration.externalPort}return n}(e,t);return n||(t.length>0?t.find(function(e){return 80===e.configuration.externalPort})?80:t[0].configuration.externalPort:80)}var e8=(0,s.X)({desktopAppWebview:[u.l0.flex.growAndShrink(1),{border:"none",backgroundColor:u.TV.white}],iframe:[u.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:u.TV.white}],self:[u.l0.backgroundColor.backgroundDefault,u.l0.height("100%"),u.l0.borderRadius(4),{overflow:"hidden"}]});function e6(e){var t,n,r,i,s,u,d,f,h,m,y,w,k,E,R,I,D,B,A,N,L,O,U,M,X,F,W,H,V,z,j,q,J,Y,K,$,Q,ee,et,en,er,ei,eo,ea,el,ec,es,eu,ed,ef,eh,ep,em,ev,eg,ey,eb,ew,ex=e.initialPort,eC=e.initialPath,e_=void 0===eC?"/":eC,eS=e.openPane,ek=e.containerRef,eE=e.openNetworkingTool,eT=e.setRefreshCb,eR=(0,p.useId)(),eI=(0,C.Z)(),eD=(0,eq.I5)({variables:{id:eI}}).data,eB=(null==eD?void 0:eD.repl.__typename)==="Repl"?eD.repl:null,eG=(0,p.useContext)(g),eA=(0,eJ.S)().isCircuitBroken,eP=(0,p.useRef)(null),eL=(0,a._)((0,p.useState)(!0),2),eO=eL[0],eU=eL[1],eM=(R=(0,e$.Z)().runner,D=(I=(0,a._)((0,p.useState)(R.getRunState()),2))[0],B=I[1],N=(A=(0,a._)((0,p.useState)(!1),2))[0],L=A[1],(0,p.useEffect)(function(){return R.onStateChanged(B)},[R]),{shouldHide:(D===eK.Ah.OFFLINE||D===eK.Ah.STOPPING||D===eK.Ah.IDLE&&"html"!==R.mode)&&!N,forceShow:function(){return L(!0)}}),eX=eM.shouldHide,eF=eM.forceShow,eH=(0,a._)((0,p.useState)(0),2),eV=eH[0],ez=eH[1],ej=(0,eN.J_)(eI),eQ=(0,S.bg)(),e4=(0,e3.T)(),e6=(0,x.Z)(),e9=(n=(t={urls:ej,unreachable:eG,isCircuitBroken:eA,shouldHide:eX,forceShow:eF,forwardedPorts:eQ,isInDesktopApp:e6,iframe:eP,initialPort:ex,initialPath:e_,id:eR}).urls,r=t.unreachable,i=t.isCircuitBroken,s=t.shouldHide,u=t.forceShow,d=t.forwardedPorts,f=t.isInDesktopApp,h=t.iframe,m=t.initialPort,y=t.initialPath,w=t.id,k=!1,E=null,n?r?E=(0,l.tZ)(v,{}):i?E=(0,l.tZ)(Z,{}):s?E=(0,l.tZ)(G,{hasForwardedPorts:d.length>0,showWebview:u}):f?(k=!0,E=(0,l.tZ)("webview",(0,o._)({"data-cy":"ws-webview",ref:h,src:e5({url:n.iframeSrc,port:m,path:y,id:w}).toString(),css:e8.desktopAppWebview},_.Z))):(k=!0,E=(0,l.tZ)("iframe",(0,o._)({title:"webview","data-cy":"ws-webview",ref:h,src:e5({url:n.iframeSrc,port:m,path:y,id:w}).toString(),css:e8.iframe},_.Z))):E=null,{isWebviewVisible:k,webviewElement:E}),e7=e9.isWebviewVisible,te=e9.webviewElement,tt=(U=(O={replId:eI,webviewId:eR,isHTML:e4,isWebviewVisible:e7,iframeOrWebviewRef:eP,iframeSrc:null==ej?void 0:ej.iframeSrc,onLoaded:function(){return eU(!1)},onDevtoolsErrorCountChange:ez}).replId,M=O.webviewId,X=O.isHTML,F=O.isWebviewVisible,W=O.iframeOrWebviewRef,H=O.iframeSrc,V=O.onLoaded,z=O.onDevtoolsErrorCountChange,q=(j=(0,a._)((0,p.useState)({state:"loading",relativeUrl:null}),2))[0],J=j[1],Y=(0,x.Z)(),(0,p.useEffect)(function(){if(Y&&F&&H){if(!W.current)throw Error("Expected iframe to be defined when isWebviewRendered");var e=W.current,t=new URL(H);return e.addEventListener("did-navigate",n),e.addEventListener("did-navigate-in-page",n),function(){e.removeEventListener("did-navigate",n),e.removeEventListener("did-navigate-in-page",n)}}function n(e){var n=new URL(e.url),r=n.pathname+n.search+n.hash;if("did-navigate-in-page"===e.type&&V(),n.hostname!==t.hostname){J(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}J(function(e){return"active"===e.state&&e.relativeUrl===r?e:{state:"active",relativeUrl:r}})}},[F,Y,H,W,V]),(0,p.useEffect)(function(){if(!Y&&H){var e=new URL(H);return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}function t(t){if(t.origin&&"null"!==t.origin&&new URL(t.origin).hostname===e.hostname&&"object"==typeof t.data&&(null===(n=t.data)||void 0===n?void 0:n.type)){var n,r,i=W.current,a=t.data;if(null==a||!a.id||a.id===M)switch(a.type){case"ready":V(),t.data.wasShown&&(null==i||null===(r=i.contentWindow)||void 0===r||r.postMessage({type:"toggleDevtools",source:"automatic"},"*"));break;case"event":var l=t.data,s=l.event,u=l.payload;"error"===s?eZ.Tb(u):(0,c.j)(s,(0,eY._)((0,o._)({},u),{replId:U,isHTML:X}));break;case"show-badge":z(t.data.count);break;case"page-navigation":if(a.payload.isExternal){J(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}var d=a.payload.path;J(function(e){return"active"===e.state&&e.relativeUrl===d?e:{state:"active",relativeUrl:d}})}}}},[U,M,Y,X,H,W,V,z]),{webviewEventMonitorState:q}).webviewEventMonitorState,tn=(0,p.useCallback)(function(e,t){if(ez(0),ej&&eP.current&&(null==ej?void 0:ej.iframeSrc)){if(e6){var n,r=eP.current,i=new URL(e,ej.iframeSrc);t&&(i=(0,eN.hw)(i.toString(),t)),r.loadURL(i.toString()),eU(!0);return}if(null===(n=eP.current)||void 0===n?void 0:n.contentWindow){var o=(0,eN.hw)(null==ej?void 0:ej.iframeSrc,t);o.searchParams.set("initialPath",e),o.searchParams.set("id",eR),eP.current.src=o.href,eU(!0)}}},[ej,eR,e6]),tr=($=(K={initialPort:ex,initialPath:e_,presentationalUrl:null==ej?void 0:ej.presentationUrl,webviewEventMonitorState:tt,navigateTo:function(e,t){return tn(e,t)}}).initialPort,Q=K.initialPath,ee=K.presentationalUrl,et=K.webviewEventMonitorState,en=K.navigateTo,ei=(er=(0,a._)((0,p.useState)(!1),2))[0],eo=er[1],el=(ea=(0,a._)((0,p.useState)(!1),2))[0],ec=ea[1],eu=(es=(0,a._)((0,p.useState)("Loading..."),2))[0],ed=es[1],eh=(ef=(0,a._)((0,p.useState)(80),2))[0],ep=ef[1],em=(0,p.useCallback)(function(e,t,n,r){eo(e),ec(t),ed(n),ep(r)},[]),ev=(0,e0.Z)(en),eg=(0,e0.Z)($),ey=(0,e0.Z)(Q),eb=(0,e1.Z)(function(){return new e2({initialRelativeUrl:ey.current,initialPort:eg.current,onChange:em,navigateTo:ev})},[ey,eg,em,ev]),(0,p.useEffect)(function(){"loading"===et.state&&eg.current!==eh&&eb.setPort(eg.current)},[$,eg,eb,eh,et]),(0,p.useEffect)(function(){"active"===et.state&&eb.relativeUrlUpdate(et.relativeUrl)},[et.state,et.relativeUrl,eb]),{canNavigateBack:ei,canNavigateForward:el,navigateBack:eb.back,navigateForward:eb.forward,canNavigateToInputRelativeUrl:eu!==et.relativeUrl,navigateToInputRelativeUrl:function(){P({actionType:"navigated_to",path:eu}),eb.navigate(eu)},inputRelativeUrl:eu,setInputRelativeUrl:ed,refresh:eb.refresh,setPort:eb.setPort,selectedPort:eh,getExternalUrl:function(){return(0,eN.hw)(ee||"",eh)+eu}}),ti=(0,S.vU)(tr.selectedPort);return((0,p.useEffect)(function(){ti&&ti.configuration.isLocalhost&&"loading"===tt.state&&tr.refresh()},[tr,ti,tt.state]),(0,p.useEffect)(function(){eT(function(){return tr.refresh})},[tr.refresh,eT]),eB&&ej)?(ew=e7?(0,l.tZ)(eW,{replId:eI,url:ej.presentationUrl,webviewEventMonitorState:tt,navigationState:tr,forwardedPorts:eQ,canEditDomain:eB.currentUserPermissions.linkDomain,devtoolsErrorCount:eV,iframeLoading:eO,onToggleDevtools:function(){if(P({actionType:"devtools_opened"}),ez(0),!e6){var e,t;null===(t=eP.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.postMessage({type:"toggleDevtools",source:"manual"},"*");return}var n=eP.current;n&&(n.isDevToolsOpened()?n.closeDevTools():n.openDevTools())},onOpenPortSettings:eE}):null,(0,l.BX)(b.G,{css:e8.self,innerRef:ek,children:[ew,eO?null:(0,l.tZ)(T,{repl:eB,onClick:function(){return eS({type:"deployments"})}}),te]})):null}function e5(e){var t=e.url,n=e.port,r=e.path,i=e.id,o=new URL(t);return(0,eN.O2)(n)?o.port="":o.port=n.toString(),o.searchParams.set("initialPath",r),o.searchParams.set("id",i),o}},51500:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(45929),i=n(50959);function o(e){var t=e.container,n=e.runner,o=e.refreshWebView;(0,i.useEffect)(function(){var e,i=[];return"outputs"===n.mode&&i.push(n.onBlockChanged(function(t){t.type===r.kH.EXECUTION&&1===t.data.exitCode&&(e=Date.now())})),i.push(t.onPortOpened(function(t){var n=t.isVnc;if(t.isForwarded&&!n){var r=Date.now();void 0!==e&&r-e<1e3||o()}})),function(){return i.forEach(function(e){return e()})}},[t,o,n])}},95751:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(45929),i=n(50959);function o(e){var t=e.runner,n=e.refreshWebView;(0,i.useEffect)(function(){if("html"===t.mode)return t.onStateChanged(function(e){e===r.Ah.RUNNING&&n()})},[t,n])}},29370:function(e,t,n){n.d(t,{S:function(){return f},e:function(){return d}});var r=n(66626),i=n(36556),o=n(45929),a=n(81199),l=n(42650),c=n(39460),s=n(50959),u=(0,l.cn)(!1),d=function(){return(0,c.KO)(u)};function f(){var e=(0,a.Z)().runner,t=(0,r._)(d(),2),n=t[0],l=t[1];return(0,s.useEffect)(function(){if("outputs"===e.mode){var t,n=[],r=Date.now(),a=Array(6),c=0;return n.push(e.onLocalRun(function(){r=Date.now(),l(!1)})),n.push(e.onStateChanged(function(e){if(!(t===o.Ah.RUNNING&&e===o.Ah.IDLE)){t=e;return}var n=c%6,s=Date.now();a[n]=s;var u=a[n>0?n-1:5];void 0!==u&&s-u<6e4&&null!=r&&r<u&&(l(!0),i.kg.info("webview circuit broken",{lastRunnerStops:JSON.stringify(a),runnerStopCount:c,lastLocalRunTimestamp:r})),c++,t=e})),function(){l(!1),n.forEach(function(e){return e()})}}},[e,l]),{isCircuitBroken:n}}},71358:function(e,t,n){n.d(t,{C:function(){return function e(t,n){if(!["context","action"].includes(t.data.type))throw Error("Command type not supported: "+t.data.type);if("action"===t.data.type)return{match:u.pl,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.tZ)(s.Z,{src:(0,f.Vh)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{children:" "}),type:"action",run:(0,r._)(function(){var e;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(!(e=t.run))throw Error("Action command must have run");return[4,e()];case 1:return[2,n.sent()]}})})}};var l,c=t.commands;if(!c)throw Error("Context command must have commands");return{match:u.pl,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.tZ)(s.Z,{src:(0,f.Vh)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{}),type:t.data.type},commands:(l=(0,r._)(function(r){var a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,c({active:r.active,search:r.search,path:a=(0,i._)(n.path).concat([{data:t.data}])})];case 1:return[2,o.sent().map(function(t){return e(t,{path:a})})]}})}),function(e){return l.apply(this,arguments)})}}},V:function(){return p}});var r=n(27387),i=n(63257),o=n(96583),a=n(74985),l=n(74044),c=n(99149),s=n(12933),u=n(89748),d=n(47664),f=n(41909),h=l.Dy.Object({id:l.Dy.Optional(l.Dy.String()),icon:l.Dy.Optional(l.Dy.String()),type:l.Dy.Union([l.Dy.Literal("action"),l.Dy.Literal("context")]),label:l.Dy.String(),description:l.Dy.String(),contributions:l.Dy.Optional(l.Dy.Array(l.Dy.Enum(d.Y)))});function p(e,t){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e,t){var n,i,a;return(0,o.Jh)(this,function(l){switch(l.label){case 0:return[4,e.data];case 1:if(n=l.sent(),!c.B4.Check(h,n))throw Error("Invalid command");if(i=null,"string"==typeof n.icon){if(""===n.icon)throw Error("Command icon cannot be empty. Omit it if you do not want an icon.");i=n.icon}if(a={data:{label:n.label,description:n.description,type:n.type,iconPath:i,id:n.id?n.id:void 0},extension:t.extension},n.contributions&&(a.data.contributions=n.contributions,t.logger.warn("Command ".concat(n.label," uses deprecated contributions field"))),"context"===n.type){var s;a.commands=(s=(0,r._)(function(n){var r,i,a,l,c,s,u,d,f;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=n.active,i=n.search,a=n.path,l=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.commands({active:r,search:i,path:a})];case 2:return l=o.sent(),[3,4];case 3:return c=o.sent(),t.logger.error(c.message,{commandError:c,api:"command"}),[2,[]];case 4:return[4,l.length];case 5:s=o.sent(),u=[],d=0,o.label=6;case 6:if(!(d<s))return[3,9];return f=u.push,[4,p(l[d],t)];case 7:f.apply(u,[o.sent()]),o.label=8;case 8:return d++,[3,6];case 9:return[2,u]}})}),function(e){return s.apply(this,arguments)})}else a.run=(0,r._)(function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.run()];case 1:return r.sent(),[2,void 0];case 2:return n=r.sent(),t.logger.error(n.message,{runError:n,api:"command"}),[2,{type:"error",message:n.message}];case 3:return[2]}})});return[2,a]}})})).apply(this,arguments)}},93264:function(e,t,n){n.d(t,{cR:function(){return b},nP:function(){return w},gI:function(){return Z},Sp:function(){return x}});var r=n(66626),i=n(39271),o=n(81199),a=n(69407),l=n(41733),c=n(21262),s=n(71440),u=n(58995),d=n(99165);function f(){var e=(0,c._)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,c._)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return h=function(){return e},e}var p={},m=(0,s.Ps)(f()),v=(0,s.Ps)(h()),g=n(50959),y=n(31748);function b(){var e,t=(0,g.useContext)(a.Z),n=(0,r._)((0,g.useState)(null!==(e=null==t?void 0:t.replConfigIsExtension)&&void 0!==e&&e),2),i=n[0],l=n[1],c=(0,o.Z)().dotReplit;return(0,g.useEffect)(function(){return c.watch(function(e){var t,n,r;l(null!==(r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)})},[c]),i}function w(){var e=(0,r._)((0,g.useState)(null),2),t=e[0],n=e[1],i=(0,o.Z)().dotReplit;return(0,g.useEffect)(function(){return i.watch(function(e){var t,r,i=null===(r=e.config)||void 0===r?void 0:null===(t=r.extension)||void 0===t?void 0:t.extensionID;i?n((0,y.T8)(i)):n(null)})},[i]),t}var Z=function(){var e=(0,o.Z)().dotReplit,t=(0,r._)((0,g.useState)(null),2),n=t[0],i=t[1];return(0,g.useEffect)(function(){return e.watch(function(e){var t,n,r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.staticDirectory;r?i({path:r,relativePath:r.replace(/^\.\//,"")}):i(null)})},[e]),n};function x(){var e,t,n,a,c=(0,i.Z)(),s=(e=(0,l._)({},p,{variables:{replId:c}}),u.a(m,e)),f=s.data,h=s.loading,y=s.error,b=(0,r._)((t=(0,l._)({},p,void 0),d.D(v,t)),1)[0],w=!h&&!y&&!!(null==f?void 0:f.repl)&&"Repl"===f.repl.__typename&&null!==(a=null===(n=f.repl.config)||void 0===n?void 0:n.isExtension)&&void 0!==a&&a,Z=(0,r._)((0,g.useState)(!1),2),x=Z[0],C=Z[1],_=(0,o.Z)().dotReplit;(0,g.useEffect)(function(){return _.watch(function(e){var t,n,r;C(null!==(r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)})},[_]),(0,g.useEffect)(function(){h||y||x===w||b({variables:{replId:c,isExtension:x},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:c,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:x}}}}})},[h,y,c,w,x,b])}},44079:function(e,t,n){n.d(t,{LM:function(){return r.LM},Mu:function(){return i.Mu},WF:function(){return r.WF},WG:function(){return i.WG},jx:function(){return i.jx},ot:function(){return r.ot},r9:function(){return i.r9}});var r=n(52240),i=n(12904)},52240:function(e,t,n){n.d(t,{EO:function(){return R},I1:function(){return B},Kf:function(){return D},LM:function(){return T},WF:function(){return E},bN:function(){return S},dI:function(){return I},ot:function(){return k},zm:function(){return G}});var r=n(27387),i=n(41733),o=n(30509),a=n(66626),l=n(96583),c=n(60305),s=n(21625),u=n(81199),d=n(81839),f=n(42650),h=n(19334),p=n.n(h),m=n(50959),v=n(41909),g=n(62784),y=n(31748),b=n(18770),w=n(85234),Z=n.n(w),x=n(6098),C=n(12904),_=n(67385);function S(){var e,t=(0,_.E4)(C.We);return(0,m.useCallback)((e=(0,r._)(function(e){return(0,l.Jh)(this,function(n){return t({installationId:e}),[2]})}),function(t){return e.apply(this,arguments)}),[t])}function k(){var e,t=N(),n=t.throwSystemError,a=t.throwExtensionError,c=(0,_.E4)(C.nk),s=(0,_.ZC)(C.Ol),u=(0,_.Ld)();return(0,m.useCallback)((e=(0,r._)(function(e){var t,r,d,f,h,m,w,Z,_,S,k,E,T,R,I,D,B,G,A,P;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=e.installationId,d=void 0===(r=e.forceRefetch)||r,[4,(0,x.Al)()];case 1:if(!(f=l.sent())||f.error)return n({friendlyMessage:"Failed to load user context",error:f.error}),[2];if(h=f.result.userHasInternalApiEnabled,!(m=u.get(C.Lq).find(function(e){return e.installationId===t})))return[3,3];return[4,(0,x.V9)(m.baseUrl)];case 2:if(w=l.sent(),Z=s.createLogger({extensionId:m.extensionId,installationId:m.installationId,local:!0}),w.error)return _=(0,o._)((0,i._)({},m),{manifest:(0,v.fF)(),enableExperimentalApi:!1,enableInternalApi:!1,logger:Z.createLogger({extensionName:"Unnamed Extension"}),isLocal:!0}),s.info("Adding extension: ".concat(_.manifest.name),{extensionArgs:p()(_,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:_.isLocal,error:!0}),c(_),S="Failed to load extension manifest",w.error instanceof b.Jg&&(S=w.error.message),a({extensionId:m.extensionId,installationId:m.installationId,extensionError:{error:w.error,friendlyMessage:S}}),[2];return k=(0,g.MU)(w.result,"experimental-api"),E=(0,o._)((0,i._)({},m),{manifest:w.result,enableExperimentalApi:k,enableInternalApi:h,logger:Z.createLogger({extensionName:w.result.name}),isLocal:!0}),s.info("Adding extension: ".concat(E.manifest.name),{extensionArgs:p()(E,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!0}),c(E),[3,5];case 3:return[4,(0,x.mr)(t,d)];case 4:if((T=l.sent()).error)return n({friendlyMessage:"Something went wrong while downloading an extension",error:T.error}),[2];if(!(R=T.result))return n({friendlyMessage:"Extension failed to install",error:Error("Expected installation to be defined")}),[2];if(!(I=R.extension))return n({friendlyMessage:"Extension failed to install",error:Error("Expected extension to be defined")}),[2];if(!I.manifest)return a({extensionId:(0,y.T8)(I.id),installationId:(0,y.Ad)(R.id),extensionError:{friendlyMessage:"Extension failed to install",error:Error("Expected extension manifest to be defined")}}),[2];if("ExtensionManifestError"===I.manifest.__typename)return a({extensionId:(0,y.T8)(I.id),installationId:(0,y.Ad)(R.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest: ".concat(I.manifest.message),error:Error(I.manifest.message)}}),[2];if(!I.manifest||"ExtensionManifest"!==I.manifest.__typename)return a({extensionId:(0,y.T8)(I.id),installationId:(0,y.Ad)(R.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest",error:Error("Expected extension manifest to be defined")}}),[2];return D=(0,v.tr)(I.manifest),B=(0,g.MU)(D,"experimental-api"),G=(0,y.T8)(I.id),A=I.enableInternalApi,P={extensionId:G,installationId:t,manifest:D,baseUrl:(0,v.BY)(I.url),enableExperimentalApi:B,enableInternalApi:h||A,logger:s.createLogger({extensionId:G,installationId:t,extensionName:D.name,local:!1}),isLocal:!1},s.info("Adding extension: ".concat(P.manifest.name),{extensionArgs:p()(P,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!1}),c(P),[2,R];case 5:return[2]}})}),function(t){return e.apply(this,arguments)}),[c,a,n,u,s])}function E(){var e,t=k(),n=N().throwSystemError;return(0,m.useCallback)((e=(0,r._)(function(e){var r,i,o,a,s;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return r=e.extensionId,i=e.replId,[4,(0,x.Wc)({extensionId:r,replId:i})];case 1:if((s=l.sent()).error)return n({error:s.error,friendlyMessage:"Something went wrong while installing an extension"}),[2];return(0,c.j)(c.U3.EXTENSION_INSTALLED,{name:null===(a=s.result)||void 0===a?void 0:null===(o=a.extension)||void 0===o?void 0:o.name,extensionId:r}),[4,t({installationId:(0,y.Ad)(s.result.id)})];case 2:return l.sent(),[2,s.result]}})}),function(t){return e.apply(this,arguments)}),[t,n])}function T(){var e,t=S(),n=(0,_.Ld)(),i=N().throwSystemError;return(0,m.useCallback)((e=(0,r._)(function(e){var r,o,a;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(r=e.installationId,o=e.replId,!(a=n.get(C._t).find(function(e){return e.installationId===r})))return i({friendlyMessage:"Extension appears to be already uninstalled",error:Error("Expected extension to be defined")}),[2];if(!a.installationId||!a.extensionId)return i({friendlyMessage:"Failed to uninstall extension",error:Error("Expected installationId to be defined")}),[2];return(0,c.j)(c.U3.EXTENSION_UNINSTALLED,{name:a.manifest.name,extensionId:a.extensionId}),[4,(0,x.Y4)({installationId:a.installationId,replId:o})];case 1:return l.sent(),[4,t(a.installationId)];case 2:return l.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),[t,n,i])}function R(){var e,t=S(),n=k();return(0,m.useCallback)((e=(0,r._)(function(e){return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,t(e)];case 1:return r.sent(),[4,n({installationId:e,forceRefetch:!0})];case 2:return r.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),[t,n])}function I(){var e,t,n,i,o=(e=k(),t=(0,_.ZC)(C.Ol),n=N().throwSystemError,(0,m.useCallback)((i=(0,r._)(function(r){var i,o,a,c,s,u,d,f,h,p;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return[4,(0,x.Zw)(r)];case 1:if((i=l.sent()).error)return n({friendlyMessage:"Failed to load installed extensions",error:i.error}),[2];o=!0,a=!1,c=void 0,l.label=2;case 2:l.trys.push([2,9,10,11]),s=i.result[Symbol.iterator](),l.label=3;case 3:if(o=(u=s.next()).done)return[3,8];if(null===(f=(d=u.value).extension)||void 0===f?void 0:f.isDisabled)return t.info("Skipping disabled extension: ".concat(d.extension.name),{extension:!0,extensionId:d.extension.id,installationId:d.id}),[3,7];l.label=4;case 4:return l.trys.push([4,6,,7]),[4,e({installationId:(0,y.Ad)(d.id),forceRefetch:!0})];case 5:return l.sent(),[3,7];case 6:return h=l.sent(),t.error("Extension Loading error: ".concat(h.message),{extension:!0,errors:h.message}),[3,7];case 7:return o=!0,[3,3];case 8:return[3,11];case 9:return p=l.sent(),a=!0,c=p,[3,11];case 10:try{o||null==s.return||s.return()}finally{if(a)throw c}return[7];case 11:return[2]}})}),function(e){return i.apply(this,arguments)}),[e,n,t])),c=(0,_.E4)(C.Ol),s=(0,_.E4)(C.zk),u=(0,a._)((0,m.useState)(!1),2),f=u[0],h=u[1],p=(0,a._)((0,m.useState)(null),2),v=p[0],g=p[1],b=(0,a._)((0,m.useState)(null),2),w=b[0],Z=b[1];return(0,m.useEffect)(function(){if(v&&w&&!f){var e=v.replId;h(!0),o(e)}},[v,w,o,f]),(0,m.useCallback)(function(e){var t=e.replId,n=e.userId;if(!f){g({replId:t,userId:n});var r=(0,d.Z)({extension:!0,isInitialized:!0,replId:t,userId:n},{onLog:function(e){s(e)}});Z(r),c(r)}},[c,f,s])}function D(){var e,t=k(),n=(0,C.qr)(),i=(0,C.Mu)(),o=(0,_.E4)(C.ot);return(0,m.useCallback)((e=(0,r._)(function(e){var r,a;return(0,l.Jh)(this,function(l){return r=(0,v.BY)(e),(a=n.find(function(e){return e.baseUrl===r}))||o(a={extensionId:(0,y.T8)(Z()()),installationId:(0,y.Ad)(Z()()),baseUrl:r}),i.find(function(e){return e.extensionId===(null==a?void 0:a.extensionId)})||t({installationId:a.installationId}),[2]})}),function(t){return e.apply(this,arguments)}),[n,i,o,t])}function B(){var e=(0,u.Z)().container,t=(0,s.Z)(e),n=(0,_.E4)(C.M1),i=(0,_.Ld)(),o=k();return(0,m.useCallback)((0,r._)(function(){var e;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(!t)return[2];return[4,o({installationId:(e=n(t)).installationId,forceRefetch:!0})];case 1:return r.sent(),[2,i.get(C._t).find(function(t){return t.installationId===e.installationId})]}})}),[t,n,o,i])}function G(){var e=(0,u.Z)().container,t=(0,s.Z)(e),n=(0,_.E4)(C.M1),r=(0,C.Mu)();return(0,m.useMemo)(function(){if(t){var e=n(t);return r.find(function(t){return e.installationId===t.installationId})}},[t,r,n])}var A=(0,f.cn)(null,function(e,t,n){var r=e(C.Ol);t(C.wQ,n),r.error("Extension System Error: ".concat(n.error.message),{extensionSystem:!0,originalError:n.error.message,friendlyMessage:n.friendlyMessage})}),P=(0,f.cn)(null,function(e,t,n){var r=e(C._t),i=e(C.Ol),o=r.find(function(e){return e.extensionId===n.extensionId});if(i.error("Extension Error: ".concat(n.extensionError.friendlyMessage),{extension:!0,extensionId:n.extensionId,originalError:n.extensionError.error.message,friendlyMessage:n.extensionError.friendlyMessage}),!o){t(C.nk,{extensionId:n.extensionId,installationId:n.installationId,manifest:(0,v.fF)({name:n.extensionId}),baseUrl:"",enableExperimentalApi:!1,enableInternalApi:!1,logger:i.createLogger({extensionId:n.extensionId,extensionName:n.extensionId,installationId:n.installationId,local:void 0}),isLocal:null}),t(C.f4,{extensionId:n.extensionId,extensionError:n.extensionError});return}t(C.f4,{extensionId:n.extensionId,extensionError:n.extensionError})});function N(){return{throwSystemError:(0,_.E4)(A),throwExtensionError:(0,_.E4)(P)}}},12904:function(e,t,n){n.d(t,{Lq:function(){return C},M1:function(){return G},Mu:function(){return M},Ol:function(){return S},UB:function(){return T},UT:function(){return R},WG:function(){return H},We:function(){return A},_K:function(){return N},_t:function(){return x},c_:function(){return W},ep:function(){return I},f4:function(){return P},jx:function(){return X},nk:function(){return D},ot:function(){return B},qr:function(){return z},r9:function(){return F},s6:function(){return V},wQ:function(){return _},zk:function(){return E}});var r,i,o,a=n(27387),l=n(41733),c=n(30509),s=n(66626),u=n(63257),d=n(96583),f=n(36647),h=n(81839),p=n(41974),m=n(42650),v=n(35554),g=n.n(v),y=n(31748),b=n(85234),w=n.n(b),Z=n(67385),x=(0,m.cn)([]),C=(0,m.cn)([]),_=(0,m.cn)(null),S=(0,m.cn)((0,h.Z)({extension:!0,isInitialized:!1},{onLog:function(){throw Error("Logged before extension system was initialized.")}})),k=(0,m.cn)([]),E=(0,m.cn)(null,function(e,t,n){var r=e(k);t(k,(0,p.Uy)(r,function(e){e.push((0,p.Uy)(n,function(t){t.index=e.length})),e.length>1e3&&e.splice(0,e.length-1e3)}))}),T=(0,m.cn)(null,function(e,t){t(k,[])}),R=(0,m.cn)("local:true"),I=(0,m.cn)(function(e){var t=e(k),n=e(R);if(!n)return t;var r=n.split(" ").map(function(e){var t=(0,s._)(e.split(":"),2),n=t[0],r=t[1];return n&&void 0===r?function(e){return e.message.toLowerCase().includes(n.toLowerCase())}:n&&""===r?function(e){return void 0!==g()(e,n)}:n&&r?function(e){try{return String(g()(e,n))===r}catch(e){return!1}}:null}).filter(function(e){return null!==e});return t.filter(function(e){return r.every(function(t){return t(e)})})}),D=(0,m.cn)(null,(r=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(r){if(e(x).find(function(e){return e.extensionId===n.extensionId}))throw Error("Extension already loaded");return t(x,function(e){return(0,p.Uy)(e,function(e){var t,r,i,o,a,l,c,s,u=(r=n.baseUrl,i=n.extensionId,o=n.installationId,a=n.manifest,l=n.enableExperimentalApi,c=n.enableInternalApi,s=n.logger,{baseUrl:r,extensionId:i,installationId:o,manifest:a,isLocal:n.isLocal,stateAtom:(0,m.cn)({error:null,panes:[],scopes:new Set(null===(t=a.scopes)||void 0===t?void 0:t.map(function(e){return e.name})),enableExperimentalApi:l,enableInternalApi:c,commands:new Map}),logger:s});e.push(u)})}),[2]})}),function(e,t,n){return r.apply(this,arguments)})),B=(0,m.cn)(null,(i=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(r){if(e(C).find(function(e){return e.extensionId===n.extensionId||e.installationId===n.installationId||e.baseUrl===n.baseUrl}))throw Error("Extension already loaded");return t(C,function(e){return(0,p.Uy)(e,function(e){e.push(n)})}),[2]})}),function(e,t,n){return i.apply(this,arguments)})),G=(0,m.cn)(null,function(e,t,n){var r=e(C).find(function(e){return e.baseUrl===n});if(r)return r;var i={baseUrl:n,extensionId:(0,y.T8)(w()()),installationId:(0,y.Ad)(w()())};return t(C,function(e){return(0,p.Uy)(e,function(e){e.push(i)})}),i}),A=(0,m.cn)(null,(o=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(e){return t(x,function(e){return(0,p.Uy)(e,function(e){var t=e.findIndex(function(e){return"extensionId"in n?e.extensionId===n.extensionId:e.installationId===n.installationId});-1!==t&&e.splice(t,1)})}),[2]})}),function(e,t,n){return o.apply(this,arguments)})),P=(0,m.cn)(null,function(e,t,n){var r=e(x).find(function(e){return e.extensionId===n.extensionId});if(!r)throw Error("Extension not found");t(r.stateAtom,function(e){return(0,p.Uy)(e,function(e){e.error=n.extensionError})})}),N=(0,m.cn)(null,function(e,t,n){var r=n.createCommand.id;if(!n.createCommand.id)throw Error("Expected createCommand to have id");if(!n.createCommand.contributions)throw Error("Expected createCommand to have contributions");t(n.extensionStateAtom,function(e){return(0,p.Uy)(e,function(e){e.commands.set(r,n.createCommand)})})}),L=(0,m.cn)(function(e){return e(x).flatMap(function(t){return(0,u._)(e(t.stateAtom).commands.values())})}),O=(0,m.cn)(function(e){return e(x).map(function(e){var t;return null===(t=e.manifest.fileHandlers)||void 0===t?void 0:t.map(function(t){return(0,c._)((0,l._)({},t),{extension:e})})}).flat().filter(function(e){return!!e})}),U=(0,m.cn)(function(e){return e(x).map(function(e){var t;return null===(t=e.manifest.tools)||void 0===t?void 0:t.map(function(t){return(0,c._)((0,l._)({},t),{extension:e})})}).flat().filter(function(e){return!!e})});function M(){return(0,Z.ZC)(x)}function X(e){return M().find(function(t){return t.installationId===e})}function F(e){var t=X(e);return t&&e?t.stateAtom:null}function W(){return(0,Z.ZC)(O)}function H(){return(0,Z.ZC)(U)}function V(e){var t=(0,Z.ZC)(L);return(0,f.Z)(function(){return t.filter(function(t){return t.contributions.includes(e)})},[t,e])}function z(){return(0,Z.ZC)(C)}},67385:function(e,t,n){n.d(t,{E4:function(){return f},Ld:function(){return s},OA:function(){return u},Wv:function(){return h},ZC:function(){return d}});var r=n(66626),i=n(74985),o=n(42650),a=n(39460),l=n(50959),c=(0,l.createContext)(null);function s(){return function(){var e=(0,l.useContext)(c);if(!e)throw Error("Expected extensions context");return e}().store}var u=function(e){var t=s();return(0,a.KO)(e,{store:t})};function d(e){var t=s();return(0,a.Dv)(e,{store:t})}var f=function(e){var t=s();return(0,a.b9)(e,{store:t})};function h(e){var t=e.children,n=(0,r._)((0,l.useState)(function(){return(0,o.MT)()}),1)[0];return(0,i.tZ)(c.Provider,{value:{store:n},children:t})}},47664:function(e,t,n){var r,i;n.d(t,{Y:function(){return r}}),(i=r||(r={})).CommandBar="commandbar",i.FiletreeContextMenu="filetree-context-menu",i.SidebarSearch="sidebar-search",i.EditorContextMenu="editor-context-menu"},81839:function(e,t,n){n.d(t,{Z:function(){return function e(t,n){var r=function(e){var r,i,l,s,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{logLevel:"debug"},h=null!==(r=(i={},(0,o._)(i,"debug",c.kg.debug),(0,o._)(i,"warn",c.kg.warn),(0,o._)(i,"info",c.kg.info),(0,o._)(i,"error",c.kg.error),i)[f.logLevel])&&void 0!==r?r:c.kg.debug;(null!==(l=(s={},(0,o._)(s,"debug",d.debug),(0,o._)(s,"warn",d.warn),(0,o._)(s,"info",d.info),(0,o._)(s,"error",d.error),s)[f.logLevel])&&void 0!==l?l:d.debug)(e,f),h(e,u()((0,a._)({},f,t),["replId","logLevel"])),n.onLog((0,a._)({message:e},f,t))};return{context:t,info:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"info"}))},warn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"warn"}))},error:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"error"}))},createLogger:function(r){return e((0,a._)({},t,r),n)}}}},i:function(){return i}});var r,i,o=n(42516),a=n(41733),l=n(30509),c=n(36556),s=n(59245),u=n.n(s),d=n(49500);(r=i||(i={})).debug="debug",r.info="info",r.warn="warn",r.error="error"},33675:function(e,t,n){n.d(t,{Cl:function(){return a},VD:function(){return d},uN:function(){return u}});var r=n(42650),i=n(39460),o=n(50959),a=(0,o.createContext)(null),l=(0,r.cn)(null),c=(0,r.cn)(null,function(e,t,n){t(l,n)});function s(){var e=(0,o.useContext)(a);if(!e)throw Error("Expected store in context");return e}function u(){return(0,i.Dv)(l,{store:s()})}function d(e){var t=(0,i.Dv)(l,{store:s()}),n=(0,i.b9)(c,{store:s()});(0,o.useEffect)(function(){t!==e&&n(e)},[e,t,n])}},64546:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(81199),i=n(50959),o=n(36559),a=n(59786),l=n(89587);function c(e){var t=(0,r.Z)().fs,n=(0,a.P5)({controlName:"flag-draft-buffers"}),c=(0,l.Qk)(),s=(0,i.useCallback)(function(r,i){var a=r.code,l=r.insertAt,s=r.newLine,u=void 0===s||s;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e)||(0,o.hj)(e))throw Error("Invalid file, this should never happen");if(0!==a.length)var d=t.watchTextFile(e,{onReady:function(r){var o=r.initialContent,s=r.writeChange,f=o.toString(),h="end"===l?f.length:l,p=a;u&&(0!==h&&h!==f.length&&-1===(h=f.indexOf("\n",h))&&(h=f.length),0!==h&&"\n"!==f[h-1]&&(p="\n"+p),"\n"!==f[h]&&(p+="\n")),s({from:h,insert:p},i),!n||c?t.flush(new Set([e])).finally(function(){d()}):d()}})},[e,t,n,c]);return!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e)||(0,o.hj)(e)?null:s}},65108:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(69755),c=n(60305),s=n(73372),u=n(81199),d=n(36136),f=n(39743),h=n(50959),p=n(36559),m=n(57253),v=n(1813),g=n(40750),y=n(59786),b=n(89587);function w(e){var t,n,w,Z=e.moveOrDeleteFile,x=(0,u.Z)().fs,C=(0,d.K)(),_=(0,h.useRef)(new Map),S=(0,f.ex)(),k=(0,i._)((0,h.useState)(!1),2),E=k[0],T=k[1],R=(0,i._)((0,h.useState)(!1),2),I=R[0],D=R[1],B=(0,i._)((0,h.useState)([]),2),G=B[0],A=B[1],P=(0,g.k)(),N=(0,v.uV)(),L=(0,y.P5)({controlName:"flag-draft-buffers"}),O=(0,b.Qk)(),U=G.map(function(e){return e.path}).map(function(e){return{title:e,path:e}}),M=(0,i._)((0,h.useState)(),2),X=M[0],F=M[1],W=(0,f.ZB)();(0,h.useEffect)(function(){if(!(!S||_.current.has(S))&&S!==s.wL){var e=function(e){var t=e.node.path;W(e.eventType===m.kS.Move?{path:t,type:"move",to:e.to}:{path:t,type:"delete"}),Z&&Z(e),_.current.delete(S),A(function(e){return e.filter(function(e){return e.path!==S})})};(0,p.Mb)(S)?x.watchTextFile(S,{onMoveOrDelete:e,onError:function(e,t){e.code||((!L||O)&&x.flush(),x.persist({skipDebounce:!0}),N({error:e,extras:t,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,t){A(function(n){return(0,o._)(n.filter(function(e){return e.path!==S})||[]).concat([{path:S,prompt:t,cb:e}])}),C("user:ot:diverged",{path:S,divergence:t}),T(!0),X||F(S)}}):x.watchFile(S,{onChange:function(){},onMoveOrDelete:e}),_.current.set(S,!0)}},[S,x,N,Z,X,C,W,O,L]);var H=(t=(0,r._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return(0,c.j)(c.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,c.j)(c.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),D(!0),[4,Promise.all(G.map(function(t){return A(function(e){var n=e.filter(function(e){return e.path!==t.path});return 0===n.length?T(!1):F(n[0].path),n}),t.cb(e)}))];case 1:return t.sent(),D(!1),[2]}})}),function(e){return t.apply(this,arguments)}),V=X?G.find(function(e){return e.path===X}):null,z=null==V?void 0:V.prompt,j=(0,l.J)({left:{code:null!==(n=null==z?void 0:z.localContent)&&void 0!==n?n:"",filePath:X},right:{code:null!==(w=null==z?void 0:z.remoteContent)&&void 0!==w?w:"",filePath:X}});return{isConverging:I,didContentsDiverge:E,showMoreDetail:P,failedFiles:G,failedFilesOptions:U,selectedFile:X,setSelectedFile:F,reviewingPrompt:z,onChoice:H,local:j.left,remote:j.right}}},8775:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(2993),o=n(33980),a=n(81199),l=n(50959);function c(){var e=(0,a.Z)().container,t=(0,o.Z)(e),n=(0,r._)((0,l.useState)(!1),2),c=n[0],s=n[1];return((0,l.useEffect)(function(){t===i.em.CONNECTED&&s(!0)},[t]),c)?{didConnectOnce:c,didDisconnect:t!==i.em.CONNECTED}:{didConnectOnce:!1,didDisconnect:!1}}},86898:function(e,t,n){n.d(t,{F:function(){return $}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(43182),c=n(8260),s=n(69170),u=n(39271),d=n(36556),f=n(52296),h=n.n(f),p=function(e){var t=h()(e,{baseUrl:!1}).pathname.replace(/\.git$/,"");if(t){var n=(0,i._)(t.split("/").reverse(),2),r=n[0],o=n[1];if(o&&r)return{username:o,repository:r}}},m=n(47149),v=n(81199),g=n(32108),y=n(41733),b=n(33859),w=n.n(b),Z=n(50959),x=n(21262),C=n(71440),_=n(78711);function S(){var e=(0,x._)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return S=function(){return e},e}var k={},E=(0,C.Ps)(S()),T=function(e,t){return{op:"add",path:e,value:JSON.stringify(t)}},R=new Map([["hintsList","hints"]]);function I(){return(I=(0,r._)(function(e){var t,n,o,l,c,s,u,d,f,h,p,m,v,g,b;function w(){return Z.apply(this,arguments)}function Z(){return(Z=(0,r._)(function(){var e,n,r;return(0,a.Jh)(this,function(i){switch(i.label){case 0:if(!(e="object"==typeof o.env?o.env:null)||0===Object.keys(e).length)return[2];return r=(n="object"==typeof l.env?l.env:null)?(0,y._)({},e,n):e,[4,t.updateDotReplit([T("env",r)])];case 1:return i.sent(),[2]}})})).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,r._)(function(){var e,r,i,c;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(null===(e=l.nix)||void 0===e?void 0:e.channel)return[2];if(null==o?void 0:null===(r=o.nix)||void 0===r?void 0:r.channel)return[3,2];return[4,n.getLatestStableChannel()];case 1:if(!(c=a.sent()).channel)return[2];return i=c.channel,[3,3];case 2:i=o.nix.channel,a.label=3;case 3:return[4,t.updateDotReplit([T("nix/channel",i)])];case 4:return a.sent(),[2]}})})).apply(this,arguments)}function _(){return(_=(0,r._)(function(e){var n,r,i,c,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(r=!!(n=l[e]),Array.isArray(n)?r=n.length>0:n&&"object"==typeof n&&(r=Object.keys(n).length>0),c=null!==(i=R.get(e))&&void 0!==i?i:e,r||!o[c])return[2];return s=T(c,o[c]),[4,t.updateDotReplit([s])];case 1:return a.sent(),[2]}})})).apply(this,arguments)}return(0,a.Jh)(this,function(r){switch(r.label){case 0:t=e.dotReplit,n=e.nixService,o=e.templateConfig,l=e.config,c=[],s={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:x,env:w,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config",rules:"rules config",suggestions:"suggestions config",objectStorage:"object storage config",autoSave:"autosave config"},u=[],d=!0,f=!1,h=void 0;try{for(p=Object.entries(s)[Symbol.iterator]();!(d=(m=p.next()).done);d=!0)g=(v=(0,i._)(m.value,2))[0],b=v[1],null!==b&&("function"==typeof b?u.push(b()):u.push(function(e){return _.apply(this,arguments)}(g)))}catch(e){f=!0,h=e}finally{try{d||null==p.return||p.return()}finally{if(f)throw h}}return[4,Promise.all(u)];case 1:return r.sent(),[2,c]}})})).apply(this,arguments)}var D=n(15529),B=n(80131),G=n(36632),A=n(53157),P=n(73372),N=n(57253),L=n(99165);function O(){var e=(0,x._)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return O=function(){return e},e}function U(){var e=(0,x._)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return U=function(){return e},e}function M(){var e=(0,x._)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return M=function(){return e},e}var X={},F=(0,C.Ps)(O()),W=(0,C.Ps)(U());M();var H=n(85421),V=n(99450),z=n(36559),j=n(60305),q=n(43985),J=n(91620).lW;function Y(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return["bash","-c",t.join("&&")]}function K(e){return e.replace(/'/g,"'\"'\"'")}function $(e){var t,n,f,h,b,x,C,S,T,R,O,U,M,$,Q,ee,et,en,er,ei,eo,ea,el,ec,es,eu,ed,ef=e.insertConfigPlugin,eh=e.setConfigScreenLockIsOpen,ep=e.openFile,em=(0,H.useRouter)(),ev=(0,u.Z)(),eg=(0,i._)((t=(0,y._)({},X,void 0),L.D(W,t)),2),ey=eg[0],eb=eg[1],ew=(0,i._)((0,Z.useState)(null),2),eZ=ew[0],ex=ew[1],eC=(0,v.Z)(),e_=eC.container,eS=eC.fs,ek=eC.runner,eE=eC.dotReplit,eT=eC.git,eR=(0,m.Z)(e_),eI=(0,s.Z)(),eD=eI.showError,eB=eI.showConfirm,eG=(f=(n=(0,v.Z)()).dotReplit,h=n.nixService,b=(0,u.Z)(),C=(0,i._)((x=(0,y._)({},k,void 0),_.t(E,x)),1)[0],T=(S=(0,s.Z)()).showWarning,R=S.showError,(0,Z.useCallback)((O=(0,r._)(function(e){var t,n,r,i,o,l,c,s,u,p,m,v;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,f.getConfig()];case 1:if(!(n=a.sent().config)||(null===(t=n.modules)||void 0===t?void 0:t.length))return[2];return[4,C({variables:{replId:b}})];case 2:if(!(null==(i=(null==(r=a.sent().data)?void 0:r.repl.__typename)==="Repl"?r.repl:null)?void 0:i.rootOriginReplUrl))return[2];try{o=w().parse(e.toString())}catch(e){return R("Failed to parse template .replit file"),d.kg.error("GitHub Import: Failed to parse template .replit file"),[2]}if(!o)return[2];return[4,function(e){return I.apply(this,arguments)}({nixService:h,dotReplit:f,config:n,templateConfig:o})];case 3:l=a.sent(),c=!0,s=!1,u=void 0;try{for(p=l[Symbol.iterator]();!(c=(m=p.next()).done);c=!0)v=m.value,T(v,1e3)}catch(e){s=!0,u=e}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}return[2]}})}),function(e){return O.apply(this,arguments)}),[b,T,R,f,h,C])),eA=(U=(0,V.Wd)("importBranch","string"))?decodeURIComponent(U):null;(0,Z.useEffect)(function(){eb.error&&eD("Failed to finish cloning Repl - "+eb.error)},[eb.error,eD]),(0,Z.useEffect)(function(){eZ&&eD("Failed to finish cloning Repl - "+eZ)},[eZ,eD]),(0,Z.useEffect)(function(){eb.data&&eB("Finished cloning Repl")},[eb.data,eB]),(0,Z.useEffect)(function(){eP()},[]);var eP=(0,i._)(($={variables:{replId:ev},fetchPolicy:"no-cache",onCompleted:(M=(0,r._)(function(e){var t,n,r,i,o,c,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(t=e.repl,n=e.currentUser,"Repl"!==t.__typename||!n||"CurrentUser"!==n.__typename||(o=null!==(i=null===(r=n.gitHubInfo)||void 0===r?void 0:r.accessToken)&&void 0!==i?i:null,!(c=t.config.gitRemoteUrl)||!t.config.doClone))return[2];a.label=1;case 1:return a.trys.push([1,3,4,5]),eh(!0),[4,eJ({remote:c,accessToken:o})];case 2:return a.sent(),(0,j.j)(j.U3.NIX_GH_IMPORT_USED,{action:q.D.ImportEnded,replId:t.id}),[3,5];case 3:return s=a.sent(),d.kg.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(s),query:JSON.stringify(em.query),githubRepo:c,hasAccessToken:!!o}),l.Tb(s,{extra:{query:JSON.stringify(em.query),githubRepo:c,hasAccessToken:!!o}}),ex(String(s)),[3,5];case 4:return eh(!1),[7];case 5:return[2]}})}),function(e){return M.apply(this,arguments)})},Q=(0,y._)({},X,$),_.t(F,Q)),1)[0],eN=(ee=(0,r._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,eT.init({initialCommit:!1,includeAllInitialFiles:!1})];case 1:return e.sent(),[2]}})}),function(){return ee.apply(this,arguments)}),eL=(et=(0,r._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,eT.addRemote({name:"origin",url:e})];case 1:return t.sent(),[2]}})}),function(e){return et.apply(this,arguments)}),eO=(en=(0,r._)(function(){var e,t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,eR({args:Y("git remote show origin | grep 'HEAD branch'")})];case 1:if(!(e=n.sent()).output)return[2,"main"];return(t=(0,i._)(e.output.split(": "),2))[0],[2,t[1].trim()]}})}),function(){return en.apply(this,arguments)}),eU=(er=(0,r._)(function(e){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,eR({args:Y("git checkout -f -b '".concat(K(e),"' 'origin/").concat(K(e),"'"))})];case 1:if((t=n.sent()).error)throw Error("Failed to checkout branch: ".concat(t.error));return[2]}})}),function(e){return er.apply(this,arguments)}),eM=(ei=(0,r._)(function(e){var t,n,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:if(n=void 0!==(t=e.deepen)&&t,r=e.remote,i=e.branch,!r.startsWith("https://api.glitch.com"))return[3,2];return[4,eR({args:Y("git fetch '".concat(K(r),"' +refs/heads/*:refs/remotes/origin/*"))})];case 1:return o.sent(),[2];case 2:if(!(i&&n))return[3,4];return[4,eR({args:Y("git fetch origin '".concat(K(i),"' --progress --deepen=10"))})];case 3:case 5:case 7:return[2,o.sent()];case 4:if(!i)return[3,6];return[4,eR({args:Y("git fetch origin '".concat(K(i),"' --progress --depth=10"))})];case 6:return[4,eR({args:Y("git fetch origin +refs/heads/*:refs/remotes/origin/* --progress --depth=10")})]}})}),function(e){return ei.apply(this,arguments)}),eX=(eo=(0,r._)(function(){var e,t,n,r,i,o;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,eS.readDir(P.Ql)];case 1:if((r=a.sent()).error)return[2];return[4,eE.getConfig()];case 2:if(!(null===(t=(i=a.sent()).config)||void 0===t?void 0:null===(e=t.gitHubImport)||void 0===e?void 0:e.requiredFiles))return[3,4];return o=i.config.gitHubImport.requiredFiles.concat(".cache").map(function(e){return new RegExp(e)}),[4,Promise.all(r.children.filter(function(e){var t;return t=e.filename,!o.some(function(e){return null!=t.match(e)})}).map(function(e){return e.type===N.Tv.Directory?eS.deleteDir(e.filename):eS.deleteFile(e.filename)}))];case 3:return a.sent(),[3,6];case 4:if(!(null===(n=i.config)||void 0===n?void 0:n.entrypoint))return[3,6];return[4,eS.deleteFile(i.config.entrypoint)];case 5:a.sent(),a.label=6;case 6:return[2]}})}),function(){return eo.apply(this,arguments)}),eF={"requirements.txt":["pyproject.toml","poetry.lock"],"pnpm-lock.yaml":["package-lock.json"],"yarn.lock":["package-lock.json"],"bun.lockb":["package-lock.json"]},eW=(ea=(0,r._)(function(){var e,t,n,r;return(0,a.Jh)(this,function(i){switch(i.label){case 0:for(t in e=[],eF)e.push(t);n=0,i.label=1;case 1:if(!(n<e.length))return[3,5];return r=e[n],[4,eS.stat(r)];case 2:if(!i.sent().exists)return[3,4];return[4,eR({args:["git","clean","-fdx"].concat((0,o._)(eF[r]))})];case 3:i.sent(),i.label=4;case 4:return n++,[3,1];case 5:return[2]}})}),function(){return ea.apply(this,arguments)}),eH=(el=(0,r._)(function(e,t){var n,i,o;return(0,a.Jh)(this,function(l){switch(l.label){case 0:return[4,eN()];case 1:return l.sent(),[4,eL(e)];case 2:return l.sent(),[4,eO()];case 3:return[4,Promise.all([eM({deepen:!1,remote:e,remoteToken:t,branch:n=l.sent()}),eA?eM({deepen:!1,remote:e,remoteToken:t,branch:eA}):null])];case 4:var c;if(l.sent(),c=(0,r._)(function(){var t;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,eU(n)];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),d.kg.error("GitHub Import: checkout default branch failed",{originalError:String(t),query:JSON.stringify(em.query),checkoutBranch:eA,githubRepo:e}),[3,3];case 3:return[2]}})}),i=function(){return c.apply(this,arguments)},!eA)return[3,10];l.label=5;case 5:return l.trys.push([5,7,,9]),[4,eU(eA)];case 6:case 8:return l.sent(),[3,9];case 7:return o=l.sent(),d.kg.error("GitHub Import: checkout branch from query parameter failed",{originalError:String(o),query:JSON.stringify(em.query),checkoutBranch:eA,githubRepo:e}),[4,i()];case 9:return[3,12];case 10:return[4,i()];case 11:l.sent(),l.label=12;case 12:if("html"!==ek.mode)return[3,15];return[4,(0,D.r)(e_,P.Ql)];case 13:return l.sent(),[4,ek.run()];case 14:l.sent(),l.label=15;case 15:return[2]}})}),function(e,t){return el.apply(this,arguments)}),eV=(ec=(0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,g.W)({dotReplit:eE,fs:eS})];case 1:return(e=t.sent().entrypoint)&&ep({path:e,opener:(0,z.gK)(e.toLowerCase())?{paneType:"markdown"}:void 0}),[2]}})}),function(){return ec.apply(this,arguments)}),ez=(es=(0,r._)(function(e,t){var n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,B.J9)({repoNameWithOwner:e,accessToken:t})];case 1:if("error"in(n=r.sent()))return[2,{hasDotReplit:!1,hasProcfile:!1}];return[2,{hasDotReplit:n.some(function(e){return e.path===G.l}),hasProcfile:n.some(function(e){return e.path===c.E})}]}})}),function(e,t){return es.apply(this,arguments)}),ej=(eu=(0,r._)(function(e,t){var n,r,i,o,l,s,u,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,(0,B.LK)({repoNameWithOwner:e,filePath:c.E,accessToken:t})];case 1:if("error"in(n=a.sent())||(r=J.from(n.content,"base64").toString(),!(i=(0,c.c)(r))||!(l=null!==(o=i.web)&&void 0!==o?o:i.worker)))return[2,{showConfigPanel:!0}];return s=l.command+" "+l.options.join(" "),[4,eE.updateDotReplit([(0,A.KQ)(s),(0,A.xz)("interpreter")])];case 2:if(u=a.sent(),d=i.web&&!i.worker||!i.web&&i.worker,u.error||!d)return[2,{showConfigPanel:!0}];return[2,{showConfigPanel:!1}]}})}),function(e,t){return eu.apply(this,arguments)});function eq(){return eS.readFile(G.l)}var eJ=(ed=(0,r._)(function(e){var t,n,r,i,o,l,c,s,u,f;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return t=e.remote,n=e.accessToken,d.kg.info("GitHub Import: Starting client-side GitHub import flow"),[4,eq()];case 1:return r=a.sent(),[4,eX()];case 2:return a.sent(),d.kg.info("GitHub Import: Removed template boilerplate"),[4,eH(t,n)];case 3:return a.sent(),d.kg.info("GitHub Import: Cloned repo into Repl"),[4,eW()];case 4:if(a.sent(),d.kg.info("GitHub Import: Tidied up required files"),"content"in r)return[3,5];return d.kg.error("GitHub Import: Skipping patching dotReplit because templateDotReplit was an error",{readError:String(r.error)}),[3,8];case 5:return[4,eq()];case 6:return"content"in(i=a.sent())&&i.content.toString()!==r.content.toString()&&d.kg.info("GitHub Import: Repo has .replit",{githubURL:t}),[4,eG(r.content)];case 7:a.sent(),d.kg.info("GitHub Import: Patched dotreplit"),a.label=8;case 8:return[4,ey({variables:{input:{id:ev,doClone:!1}}})];case 9:if(a.sent(),!eA)return[3,11];return[4,eS.persist()];case 10:a.sent(),(0,V.pg)({router:em,params:[{mode:"delete",key:"importBranch"}]}),a.label=11;case 11:return d.kg.info("GitHub Import: Disabled doClone on Repl. Done."),[4,eV()];case 12:if(a.sent(),o=p(t),l=!1,!o)return[3,16];return c=o.username,s=o.repository,[4,ez("".concat(c,"/").concat(s),n)];case 13:if(f=(u=a.sent()).hasDotReplit,!(u.hasProcfile&&!f))return[3,15];return[4,ej("".concat(c,"/").concat(s),n)];case 14:return l=!a.sent().showConfigPanel,[3,16];case 15:l=f,a.label=16;case 16:if("html"===ek.mode||l)return[2];return ef(),[2]}})}),function(e){return ed.apply(this,arguments)})}},5017:function(e,t,n){n.d(t,{T:function(){return d}});var r=n(39271),i=n(41733),o=n(21262),a=n(71440),l=n(58995);function c(){var e=(0,o._)(["\n  query WorkspaceEduPaneEnabled($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isModelSolution\n        isProject\n        isProjectFork\n        owner {\n          __typename\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e,t,n,o=(t={variables:{replId:(0,r.Z)()}},n=(0,i._)({},s,t),l.a(u,n)).data,a=(null==o?void 0:null===(e=o.repl)||void 0===e?void 0:e.__typename)==="Repl"?null==o?void 0:o.repl:null;if(!a)return!1;var c=a.owner;return!!c&&a.isProjectFork&&!a.isModelSolution&&"Team"===c.__typename&&c.isAdmin}},63466:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(81199),o=n(50959),a=n(57253),l=n(8775);function c(){var e=(0,i.Z)().fs,t=(0,r._)((0,o.useState)(!1),2),n=t[0],c=t[1],s=(0,l.Z)(),u=s.didConnectOnce,d=s.didDisconnect;return((0,o.useEffect)(function(){return c(e.getStatus()===a.kO.Syncing),e.onStatusChange(function(e,t){var n=t.hasUserChanged;c(e===a.kO.Syncing&&n)})},[e]),u)?{isSaving:n,isOffline:d}:{isSaving:!1,isOffline:!1}}},50783:function(e,t,n){n.d(t,{O:function(){return c}});var r=n(27387),i=n(96583),o=n(59695),a=n(72658),l=n(69880);function c(){var e,t,n,c=(0,o.Gn)("showFileTreeGitStatus").preferences.showFileTreeGitStatus,s=(0,l.Z)((n=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(!c)return[2,{status:null,error:null}];return[4,e.getRepositoryState()];case 1:if((t=r.sent()).error)return[2,t];if(t.type!==a.y5.NORMAL)return[2,{status:null,error:null}];return[4,e.status()];case 2:if((n=r.sent()).error)return[2,n];return[2,{status:n,error:null}]}})}),function(e){return n.apply(this,arguments)}),[c]);return s&&!s.error&&(null===(e=s.status)||void 0===e?void 0:e.changes)?function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}(null===(t=s.status)||void 0===t?void 0:t.changes):null}},10901:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(59786),i=n(39271),o=n(91175),a=n(75958),l=n(81199),c=n(50959),s=n(73372),u="persistmirrored";function d(){var e=(0,o.T)(),t=(0,i.Z)(),n=(0,r.P5)({controlName:"flag-persist-mirror-html",default:!0,logFlagToAnalytics:!1}),d=(0,l.Z)().container;(0,c.useEffect)(function(){if(!(!e||!n||(null!==(r=a.Z.get(u,"array"))&&void 0!==r?r:[]).includes(t))){var r,i=d.openChannel({service:"gcsfiles",skip:function(e){return!e.repl.currentUserPermissions.containerWrite}},function(e){return e.channel.request({persistMirror:{path:s.Ql}}).then(function(e){if(e.ok){var n,r;r=null!==(n=a.Z.get(u,"array"))&&void 0!==n?n:[],a.Z.set(u,r.concat(t)),i()}}),function(){}});return i}},[d,e,n,t])}},57964:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(2993),i=n(81199),o=n(50959);function a(){var e=(0,i.Z)().container;(0,o.useEffect)(function(){var t=function(){e.getConnectionState()===r.em.CONNECTED&&e.focus()};return window.addEventListener("focus",t),function(){window.removeEventListener("focus",t)}},[e])}},288:function(e,t,n){n.d(t,{V:function(){return c},Z:function(){return s}});var r=n(66626),i=n(50959),o=n(81199),a=n(73372),l=n(57253),c=".tutorial";function s(){var e=(0,o.Z)().fs,t=(0,r._)((0,i.useState)({isLoading:!0,isTutorial:!1}),2),n=t[0],s=t[1];return(0,i.useEffect)(function(){e.watchDir(a.Ql,{onChange:function(e){s({isLoading:!1,isTutorial:e.some(function(e){return e.type===l.Tv.Directory&&e.filename===c})})},onMoveOrDelete:function(){s({isLoading:!1,isTutorial:!1})},onError:function(){s({isLoading:!1,isTutorial:!1})}})},[e]),n}},46584:function(e,t,n){n.d(t,{ZP:function(){return R},Ln:function(){return T}});var r=n(27387),i=n(96583),o=n(43182),a=n(39271),l=n(2993),c=n(45098),s=n(19393),u=n(39126),d=n(81199),f=n(42650),h=n(39460),p=n(50959),m=n(74725),v=n(17165),g=n(57253),y=n(41733),b=n(21262),w=n(71440),Z=n(95420),x=n(58995);function C(){var e=(0,b._)(["\n  query ReplEnvironmentDesktopLoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}var _={},S=(0,w.Ps)(C(),Z.D,Z.C),k=n(49500),E=(0,f.cn)(!1);function T(){return(0,h.Dv)(E)}function R(){var e,t,n,f=(0,a.Z)(),b=(0,d.Z)().fs,w=(e=(0,y._)({},_,{variables:{id:f}}),x.a(S,e)).data,Z=(0,h.b9)(E);(0,p.useEffect)(function(){return function(){Z(!1)}},[Z]);var C=(null==w?void 0:w.repl.__typename)==="Repl"?w.repl:null,T=(null==w?void 0:null===(t=w.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?w.currentUser:null,R=(null==w?void 0:w.repl.__typename)==="Repl"&&w.repl.isModelSolutionFork,I=R?C&&(null===(n=C.origin)||void 0===n?void 0:n.origin):C&&C.origin||null,D=(0,c.b)((null==I?void 0:I.__typename)==="Repl"?{repl:I,currentUser:T||void 0}:null),B=(0,s.S)();(0,p.useEffect)(function(){C&&T&&C.isProject&&b.stat(".lesson").then(function(e){e.exists||b.createDir(".lesson")})},[b,T,C]),(0,p.useEffect)(function(){if(C&&(C.isProjectFork||R)&&I&&D){var e,t=(0,l.ZP)({onUnrecoverableError:function(e){k.error(e),o.$e(function(t){t.setTag("curriculum-authoring",!0),t.setExtra("originId",I.id),o.Tb(e)})}}),n=(0,u.Z)({container:t});t.connect({context:D,getMinimumRetryDelayMs:B,fetchConnectionMetadata:function(){return(0,m.Z)({url:"/data/repls/".concat(C.id,"/get_repl_origin_guest_connection_metadata")})}});var a=t.onConnectionStateChanged((e=(0,r._)(function(e){var r,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(e!==v.e.CONNECTED)return[3,8];a(),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,b.copyDirFromRemote(".lesson",".lesson",n)];case 2:if(!((r=i.sent()).error&&r.error!==g.Df.NotFound))return[3,3];return o.$e(function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",I.id),o.Tb(Error("Error copying lesson: ".concat(r.error)))}),[3,5];case 3:return[4,b.stat(".lesson/instructions.md")];case 4:i.sent().exists&&Z(!0),i.label=5;case 5:return[3,8];case 6:return l=i.sent(),o.$e(function(e){e.setTag("curriculum-authoring",!0),o.Tb(l)}),[3,8];case 7:return t.destroy(),[7];case 8:return[2]}})}),function(t){return e.apply(this,arguments)}));return function(){return t.destroy()}}},[b,D,C,I,R,Z])}},41344:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(79834),i=n(50959);function o(){var e=(0,r.r9)();(0,i.useEffect)(function(){},[e])}},82289:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(92443),c=n(50959),s=n(85733);function u(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function d(e){var t,n=e.fs,d=e.openMultipleFiles,f=e.openMultipleURLs,h=e.waitForFileClose,p=e.isMobileWorkspace,m=void 0!==p&&p,v=(0,c.useRef)(),g=(0,s.Z)(h),y=(0,c.useCallback)((t=(0,i._)(function(e){var t,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:if(t=e.filename,r=e.waitForClose,!m)return[3,2];if(!t.endsWith(".git/COMMIT_EDITMSG"))return d({paths:[t]}),[2];return i=window.prompt("Enter a commit message"),[4,n.writeFile(t,null!=i?i:"")];case 1:case 4:return o.sent(),[2];case 2:if(u(),d({paths:[t]}),!r||!g.current)return[2];return[4,g.current(t)];case 3:return o.sent(),[4,n.flush()]}})}),function(e){return t.apply(this,arguments)}),[n,m,d,g]);(0,l.L)(function(e,t){function n(){return(n=(0,i._)(function(){var n,i,l,c,s,h,p,m,g,b,w;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,e.replspaceApi.init.stream({session:t.from})];case 1:i=(n=o._.apply(void 0,[a.sent(),3]))[0],l=n[1],c=n[2],v.current=c,s=!1,h=!1,a.label=2;case 2:a.trys.push([2,11,12,17]),m=(0,r._)(l),a.label=3;case 3:return[4,m.next()];case 4:if(!(s=!(g=a.sent()).done))return[3,10];if(!(b=g.value).ok)return[3,9];switch(b.payload.$kind){case"openFile":return[3,5];case"openMultipleFiles":return[3,7];case"openMultipleURLs":return[3,8]}return[3,9];case 5:return[4,y(b.payload)];case 6:return a.sent(),b.payload.waitForClose&&i.push({$kind:"closeFile",filename:b.payload.filename,nonce:b.payload.nonce}),[3,9];case 7:return b.payload.files.length>0&&(u(),d({paths:b.payload.files})),[3,9];case 8:return b.payload.urls.length>0&&(u(),f({urls:b.payload.urls})),[3,9];case 9:return s=!1,[3,3];case 10:return[3,17];case 11:return w=a.sent(),h=!0,p=w,[3,17];case 12:if(a.trys.push([12,,15,16]),!(s&&null!=m.return))return[3,14];return[4,m.return()];case 13:a.sent(),a.label=14;case 14:return[3,16];case 15:if(h)throw p;return[7];case 16:return[7];case 17:return[2]}})})).apply(this,arguments)}return!function(){n.apply(this,arguments)}(),function(){var e;null===(e=v.current)||void 0===e||e.call(v)}},[f,d,y])}},40750:function(e,t,n){n.d(t,{k:function(){return d}});var r=n(85421),i=n(41733),o=n(21262),a=n(71440),l=n(58995);function c(){var e=(0,o._)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e,t,n=(e=(0,i._)({},s,void 0),l.a(u,e)).data,o=(0,r.useRouter)();return(null==n?void 0:null===(t=n.currentUser)||void 0===t?void 0:t.isAdmin)||!!o.query.debug}},27775:function(e,t,n){n.d(t,{B:function(){return D}});var r=n(66626),i=n(59786),o=n(39271),a=n(36647),l=n(38753),c=n(90188),s=n(49345),u=n(93264),d=n(5017),f=n(288),h=n(46584),p=n(58045),m=n(85438),v=n(85421),g=n(44079),y=n(41733),b=n(21262),w=n(71440),Z=n(58995);function x(){var e=(0,b._)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    isModelSolution\n    isProject\n    isProjectFork\n    workspaceCta\n    currentUserPermissions {\n      containerWrite\n      editMultiplayers\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return x=function(){return e},e}function C(){var e=(0,b._)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n  ","\n"]);return C=function(){return e},e}var _={},S=(0,w.Ps)(x()),k=(0,w.Ps)(C(),S),E=n(91175),T=n(32501),R=["shell","git","diff","packager","envEditor","deployments","database","neon","ghostwriterChat","unitTests","submitEduRepl","preferences","docs","multiplayer","objectStorage","adminPanel","ssh","webview","problems","systemDependencies","dependencies"],I=["ghostwriterChat","deployments"];function D(){var e,t,n,b,w,x=(w=(null==(b=(t={variables:{replId:(0,o.Z)()}},n=(0,y._)({},_,t),Z.a(k,n)).data)?void 0:null===(e=b.repl)||void 0===e?void 0:e.__typename)==="Repl"?null==b?void 0:b.repl:null)?{repl:w,currentUser:(null==b?void 0:b.currentUser)||null}:{repl:null,currentUser:null},C=x.repl,S=x.currentUser,D=(0,v.useRouter)(),B=(0,l.T3)(),G=(0,i.P5)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),A=(0,i.P5)({controlName:"flag-postgres-db-god-mode",logFlagToAnalytics:!1}),P=!!((0,i.P5)({controlName:"flag-deployments",logFlagToAnalytics:!1})&&(null==C?void 0:C.hostingDeploymentPermissions.canDeploy)),N=(0,i.P5)({controlName:"flag-repl-auth-sidebar",logFlagToAnalytics:!1}),L=(0,i.P5)({controlName:"flag-nix-modules-tool",logFlagToAnalytics:!1}),O=(0,i.P5)({controlName:"flag-problems-pane",logFlagToAnalytics:!1}),U=(0,i.P5)({controlName:"flag-object-storage-pane"}),M=(0,i.P5)({controlName:"flag-new-dependencies-pane"}),X=(0,i.P5)({controlName:"flag-work-flows",logFlagToAnalytics:!0}),F=(0,T.J)().hasProject,W=(0,u.cR)(),H=(0,s.Z)().language,V=(0,d.T)(),z=(0,h.Ln)(),j=(0,f.Z)().isTutorial,q=(0,c.I)().configs.some(function(e){return"nix"!==e.id}),J=(0,g.WG)(),Y=(null==S?void 0:S.isAdmin)||!!D.query.debug,K=(0,p.Se)(),$=(0,E.T)();return(0,a.Z)(function(){var e=B&&(null==C?void 0:C.currentUserPermissions.editMultiplayers)?[{type:"multiplayer"}]:[];if(!C||!S)return e;var t=!!C.config.isVnc,n=!$,i=C.isProject||C.isProjectFork,o=!$,a=!i&&null!==H,l=A||!$&&G,c=[[{type:"shell"},!0],[{type:"instructions"},z],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},!0],[{type:"vnc"},t],[{type:"runnerOutput"},!$],[{type:"git"},!0],[{type:"packager"},!0],[{type:"systemDependencies"},!0],[{type:"dependencies"},M],[{type:"envEditor"},n],[{type:"debugger"},!0],[{type:"tutorial"},j],[{type:"database"},o],[{type:"neon"},l],[{type:"replAuth"},!!(N&&q)],[{type:"autograder"},i],[{type:"unitTests"},a],[{type:"education"},!!V],[{type:"preferences"},!0],[{type:"adminPanel"},Y],[{type:"deployments"},P],[{type:"ssh"},!0],[{type:"ghostwriterChat"},!0],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"modules"},L],[{type:"extensionDevtools"},W],[{type:"problems"},O],[{type:"networking"},!0],[{type:"objectStorage"},U],[{type:"workflows"},X],[{type:"project"},F]];if(B){var s=C.workspaceCta===m.Sy.Submit||C.workspaceCta===m.Sy.Resubmit;c.push([{type:"submitEduRepl"},s])}var u=!0,d=!1,f=void 0;try{for(var h,p=J[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var v=h.value;c.push([{type:"extension",data:{extensionId:v.extension.extensionId,installationId:v.extension.installationId,name:v.name||v.extension.manifest.name,icon:v.icon||v.extension.manifest.icon,baseUrl:v.extension.baseUrl,path:v.handler}},!0])}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}var g=!0,y=!1,b=void 0;try{for(var w,Z=c[Symbol.iterator]();!(g=(w=Z.next()).done);g=!0){var x=(0,r._)(w.value,2),_=x[0];x[1]&&(!B||R.includes(_.type))&&e.push(_)}}catch(e){y=!0,b=e}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw b}}return e.map(function(e){return{title:K.getTitle(e),pane:e}}).sort(function(e,t){return I.includes(e.pane.type)?-1:I.includes(t.pane.type)?1:e.title.localeCompare(t.title)}).map(function(e){return e.pane})},[B,C,S,N,q,H,A,M,G,z,j,V,Y,P,L,W,O,J,K,U,X,$,F])}},27494:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(36556),i=n(50959);function o(){(0,i.useEffect)(function(){var e=null;return!function t(){if(window.performance.memory){var n=window.performance.memory,i=n.jsHeapSizeLimit,o=n.totalJSHeapSize,a=n.usedJSHeapSize,l=window.performance.now();r.kg.info("perf:browser_memory",{jsHeapSizeLimit:i,totalJSHeapSize:o,usedJSHeapSize:a,timeElapsed:l}),e=setTimeout(t,-(3e5*Math.log(Math.random())))}}(),function(){e&&clearTimeout(e)}},[])}},17141:function(e,t,n){n.d(t,{L:function(){return c}});var r=n(41733),i=n(39271),o=n(35020),a=n(69368),l=n(50959);function c(){var e=(0,i.Z)(),t=(0,o.Z)("fileTree").trackTimeToLoadFileStart;return(0,l.useCallback)(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(n);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,a.Z)((0,r._)({replId:e},o))},[e,t])}},14489:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(59695),i=n(39271),o=n(60305),a=n(81199),l=n(50959),c=new Set([3e3,3001,3002,3003,3306,4e3,4200,5e3,5432,5173,6e3,6800,7e3,7001,8e3,8008,8080,8081,8888,9e3,9001,1e4,25565,25577,8887,27017,27018]);function s(){var e=(0,a.Z)().container,t=(0,r.Gn)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,n=(0,i.Z)();(0,l.useEffect)(function(){return e.onPortOpened(function(e){var r=e.port,i=e.address,a=e.isForwarded,l=e.isVnc,s=e.externalPort;if(a){(0,o.j)(o.U3.WS_PORT_OPENED,{type:l?"vnc":"webview",replId:n,port:r,externalPort:s,address:i,webviewAutoOpenOnPortOpened:t});return}(0,o.j)(o.U3.WS_UNFORWARDED_PORT_OPENED,{port:r,isCommon:c.has(r),address:i,type:l?"vnc":"webview",replId:n,externalPort:s})})},[e,n,t])}},10948:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(47726),i=n(59786),o=n(39271),a=n(36556),l=n(69977),c=n(81199),s=n(50959),u=n(9797),d=n(87137),f=new Set;function h(e){var t=e.workspaceType,n=(0,o.Z)(),h=(0,c.Z)(),p=h.dotReplit,m=h.container,v=(0,i.P5)({controlName:"flag-channel-request-priority",logFlagToAnalytics:!1});(0,s.useEffect)(function(){if(!f.has(n)){f.add(n);var e=p.watch(function(n){if(!n.error||n.error!==d.Yt.Disconnected){try{var i=m.getConnectionMetadata();if(!i||!i.token)throw Error("Expected token in measure call.");!function(e){var t=e.workspaceType,n=e.parsedToken,i=e.flagChannelRequestPriority,o=!!window.performance.getEntriesByName(u.Iy.pageNavStart,"mark").length,l={ssr:!o,workspaceType:t,tokenCluster:n.cluster,flagChannelRequestPriority:i},c="time to code";window.performance.measure(c,o?u.Iy.pageNavStart:void 0);var s=window.performance.getEntriesByName(c,"measure")[0];if(!s){a.kg.info("Could not obtain measure for time to code",l);return}var d="page invisible fetch connection metadata",f=s.duration;window.performance.getEntriesByName(u.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length&&(window.performance.measure(d,u.Iy.fetchConnectionMetadataPageInvisibleStart,u.Iy.fetchConnectionMetadataPageInvisibleEnd),f-=window.performance.getEntriesByName(d,"measure")[0].duration,window.performance.clearMeasures(d),window.performance.clearMarks(u.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(u.Iy.fetchConnectionMetadataPageInvisibleEnd)),a.kg.time("time to code minus page invisible",f,l),a.kg.time("time to code with page invisible",s.duration,l),window.performance.clearMeasures(c),r.v.addTiming("time_to_code_minus_page_invisible",f),r.v.addTiming("time_to_code_with_page_invisible",s.duration)}({workspaceType:t,parsedToken:(0,l.he)(i.token),flagChannelRequestPriority:v})}catch(e){a.kg.info("Could not measure time to code",{workspaceType:t,e:e,dotReplitResult:n.error?n.error:"success"})}e()}});return e}},[n,t,p,m,v])}},35020:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(36556),i=n(36384),o=n(36559),a=new Map,l=function(e,t){if((0,o.Mb)(e)){var n=window.performance.now();a.set(e,{start:n,source:t})}},c=function(e){var t=a.get(e);if(void 0!==t){var n=t.start,o=t.source,l=window.performance.now(),c=(0,i.V)(e);r.kg.time("time to load file",l-n,{from:o,fileViewerType:c}),a.delete(e)}};function s(e){return{trackTimeToLoadFileStart:function(t){return l(t,e)},trackTimeToLoadFileEnd:c}}},73536:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(23009),i=n(39271),o=n(81199),a=n(41733),l=n(21262),c=n(71440),s=n(293);function u(){var e=(0,l._)(["\n  subscription WorkspaceUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u()),h=n(50959),p=n(57253);function m(){var e,t,n=(0,o.Z)().fs,l=(e={variables:{replId:(0,i.Z)()}},t=(0,a._)({},d,e),s.m(f,t)).data,c=(null==l?void 0:l.currentUserCanWrite)===!1;(0,h.useEffect)(function(){c&&window.location.reload()},[c]);var u=(0,h.useCallback)(function(){return c||n.getStatus()===p.kO.Clean?r.Tk.NavigateAnyway:r.Tk.PromptUser},[n,c]);(0,r.ZP)({shouldPreventNavCb:u})}},80003:function(e,t,n){n.d(t,{Ih:function(){return y},bM:function(){return b},ir:function(){return x}});var r=n(42516),i=n(41733),o=n(30509),a=n(98924),l=n(74985),c=n(33298),s=n(94778),u=n(49224),d=n(72093);n(50959);var f=n(11407),h=n(95571),p=(0,c.$)(["fontSize","gap","xPadding"]),m=p.cssVars,v=p.styleTokens,g=(0,u.X)({chord:[d.l0.display.inlineFlex,d.l0.rowWithGap(12)],shortcut:[d.l0.display.inlineFlex,d.l0.flex.row,{fontSize:v.fontSize,"& > div":{marginRight:v.gap},"& > div:last-child":{marginRight:0}}]});function y(e,t){return((0,f.bU)(e)?e:[e]).map(function(e){return(0,f.QR)(e).map(function(e){var n;return null!==(n=Z(t)[e])&&void 0!==n?n:e.toUpperCase()}).join("")}).join(" ")}function b(e){if((0,f.bU)(e.keyCombo))return(0,l.tZ)(s.G,{"data-testid":"Keybinding:".concat(e.keyCombo.join(" ")),css:g.chord,children:e.keyCombo.map(function(t,n){return(0,l.tZ)(b,(0,o._)((0,i._)({},e),{keyCombo:t}),n)})});var t,n=(0,f.QR)(e.keyCombo),a=null!==(t=e.fontSize)&&void 0!==t?t:e.small?12:14,c=e.hideBorder?0:Math.round(.2*a);return(0,l.tZ)(s.G,{"data-testid":"Keybinding:".concat(e.keyCombo),css:g.shortcut,style:(0,r._)({},m.gap,c+"px"),title:e.keyCombo,children:n.map(function(t){var n;return(0,l.tZ)(x,{text:t,hideBorder:e.hideBorder,fontSize:e.fontSize,isActive:null==e?void 0:null===(n=e.match)||void 0===n?void 0:n.includes(t.toLowerCase())},t)})})}var w=(0,u.X)({root:[d.l0.color.foregroundDimmest,d.l0.position.relative,d.l0.justify.center,{fontSize:"inherit",textAlign:"center",textTransform:"capitalize",paddingLeft:v.xPadding,paddingRight:v.xPadding},d.l0.font.default],border:[d.l0.coverContainer,d.l0.borderRadius(4),{opacity:.5,border:"1px solid",borderColor:d.TV.outlineStrongest}],text:[{fontSize:v.fontSize}]}),Z=function(e){return{Ctrl:e?"⌃":"Ctrl",Cmd:e?"⌘":"Cmd",Alt:e?"⌥":"Alt",Shift:e?"⇧":"Shift",Enter:e?"Return":"Enter",ArrowLeft:"←",ArrowRight:"→",ArrowUp:"↑",ArrowDown:"↓"," ":"Space"}};function x(e){var t,n,i,o=e.text,c=e.small,u=e.isActive,f=void 0!==u&&u,p=e.hideBorder,v=void 0!==p&&p,g=(0,a._)(e,["text","small","isActive","hideBorder"]),y=(0,h.NJ)(),b=null!==(t=g.fontSize)&&void 0!==t?t:void 0!==c&&c?12:14,x=Math.round(1.4*b),C=(n={},(0,r._)(n,m.fontSize,b+"px"),(0,r._)(n,m.xPadding,Math.round(b*(v?.1:.2))+"px"),(0,r._)(n,"height",x),(0,r._)(n,"minWidth",v?void 0:x),n);f&&(C.fontWeight=d.TV.fontWeightMedium,C.color=d.TV.foregroundDefault);var _={borderColor:d.TV.foregroundDefault,opacity:1};return(0,l.BX)(s.G,{css:w.root,style:C,children:["string"==typeof o?(0,l.tZ)(s.G,{css:w.text,children:null!==(i=Z(y)[o])&&void 0!==i?i:o}):o,v?null:(0,l.tZ)(s.G,{css:w.border,style:f?_:void 0})]})}},37058:function(e,t,n){n.d(t,{GO:function(){return c},Ih:function(){return l.Ih},Il:function(){return o.Il},bM:function(){return l.bM},gf:function(){return o.gf}});var r=n(74985),i=n(50959),o=n(50798),a=n(11407),l=n(80003);function c(e){var t=(0,o.ns)(e);return(0,r.BX)(o.Ge.Provider,{value:t,children:[e.children,(0,r.tZ)(s,{})]})}function s(){var e=(0,o.Sy)(),t=(0,i.useRef)(null);return(0,i.useEffect)(function(){var n=function(n){var r=(0,a.IX)(n);if(r){var i=r;t.current&&(i=(0,a.cZ)(t.current,r));var l=e(i);switch(l.kind){case o.Xp.NoMatch:t.current=null;break;case o.Xp.WaitingForChord:t.current=l.key,n.preventDefault();break;case o.Xp.MatchFound:t.current=null;var c=!0,s=!1,u=void 0;try{for(var d,f=l.matches[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value,p=h.run,m=h.bubble,v=void 0===m||m;if(!1!==p()&&(n.preventDefault(),!v))break}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}},[e]),null}},60397:function(e,t,n){n.d(t,{_:function(){return y},O:function(){return g}});var r=n(27387),i=n(66626),o=n(96583),a=n(36647),l=n(20367),c=n(11407),s=n(52259),u=n(41733),d=n(21262),f=n(71440),h=n(99165);function p(){var e=(0,d._)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return p=function(){return e},e}var m={},v=(0,f.Ps)(p());function g(){var e,t=(0,l.O)(),n=(0,i._)((e=(0,u._)({},m,void 0),h.D(v,e)),1)[0],c=(0,s.F)();return(0,a.Z)(function(){var e;return e=(0,r._)(function(e){var r,a,l,s,u,d,f,h,p;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=[],a=!0,l=!1,s=void 0;try{for(u=e[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)h=(f=(0,i._)(d.value,2))[0],p=f[1],r.push({commandId:h,keyCombo:p})}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return[4,n({variables:{input:{environment:t,platform:c,keybindings:r}}})];case 1:return o.sent(),[2]}})}),function(t){return e.apply(this,arguments)}},[t,n,c])}function y(e){var t=new Map;if(!Array.isArray(e))return t;var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,s=function(e){if(e&&"object"==typeof e&&"commandId"in e&&"string"==typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var t=(0,c.uv)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}if("string"==typeof e.keyCombo){var n=(0,c.gD)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}return{commandId:e.commandId,keyCombo:null}}}(l);s&&t.set(s.commandId,s.keyCombo)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}},52259:function(e,t,n){n.d(t,{F:function(){return o}});var r=n(95571),i=n(49494);function o(){var e=(0,r.NJ)(),t=(0,r.Vm)(),n=(0,r.Cl)();return e||t?i.K5.Mac:n?i.K5.Windows:i.K5.Linux}},8812:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(27387),i=n(96583),o=n(29139),a=n(21262);function l(){var e=(0,a._)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,n(71440).Ps)(l());function s(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var t,n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,null===o.l||void 0===o.l?void 0:o.l.query({query:c,variables:{replId:e}})];case 1:return r=(null==(n=i.sent())?void 0:null===(t=n.data)||void 0===t?void 0:t.repl.__typename)==="Repl"?n.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}})})).apply(this,arguments)}},96619:function(e,t,n){n.d(t,{mn:function(){return u}});var r=n(66626),i=n(63257),o=n(36559),a=n(57253),l=["json","md","draw","txt"],c=[".gitignore",".replit"];function s(e,t){var n=new Map,a=!0,l=!1,c=void 0;try{for(var s,u=e[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d,f=s.value,h=(0,o.r6)(f);if(h&&(!t||h.startsWith(t))){var p=null!==(d=n.get(h))&&void 0!==d?d:0;n.set(h,p+1)}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return(0,i._)(n.entries()).sort(function(e,t){var n=(0,r._)(e,2)[1];return(0,r._)(t,2)[1]-n}).map(function(e){return(0,r._)(e,1)[0]})}function u(e,t){if(e.fileType===a.Tv.Directory||!e.input)return[];if("."===e.input)return c.map(function(e){return{value:e,highlight:[{from:1,to:e.length}]}});if(e.input.startsWith("."))return c.filter(function(t){return t.startsWith(e.input)}).map(function(t){return{value:t,highlight:[{from:t.length-e.input.length,to:t.length}]}});var n=(0,o.r6)(e.input),r=s(e.siblings.map(function(e){return e.filename}),n);if(r.length<3&&r.push.apply(r,(0,i._)(s(t(),n))),r.length<3){var u=n?l.filter(function(e){return e.startsWith(n)}):l;r.push.apply(r,(0,i._)(u))}return(0,i._)(new Set(r)).slice(0,3).map(function(t){var r=e.input;r.endsWith(".")?r=r.slice(0,-1):n&&(r=r.slice(0,-(n.length+1)));var i=r+"."+t;return{value:i,highlight:[{from:e.input.length,to:i.length}]}})}},75039:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(57253),i=function(e){if(1===e.length)return e[0].type===r.Tv.File?"file":"folder";if(e.length>1){var t=e.filter(function(e){return e.type===r.Tv.File}).length,n=e.filter(function(e){return e.type===r.Tv.Directory}).length,i=t>1?"files":"file",o=n>1?"folders":"folder",a="file";return t>0&&n>0?a="".concat(i," and ").concat(o):t>0?a="".concat(i):n>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var t=i(e),n=1===e.length?t:"".concat(e.length," ").concat(t),r=e.slice(0,5).map(function(e){return e.path}).join(", ");return{name:n,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:n}}},15529:function(e,t,n){n.d(t,{r:function(){return r}});function r(e,t){return new Promise(function(n){var r=e.openChannel({service:"gcsfiles"},function(e){return e.channel.request({persistMirror:{path:t}}).then(function(e){e.ok,r(),n()}),function(e){e.willReconnect&&r()}})})}},68302:function(e,t,n){n.d(t,{e:function(){return _},Z:function(){return C}});var r=n(41733),i=n(66626),o=n(85234),a=n.n(o),l=n(36556),c=n(27387),s=n(98924),u=n(63257),d=n(96583),f=n(43182),h=n(66810),p=n(82614),m=n(26685),v="exit status 1";function g(){return(g=(0,c._)(function(e){var t,n,r,i,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(n=e.container,0===(r=(0,s._)(e,["container"])).query.trim().length)return[2,y(m.f.EMPTY_QUERY)];if(n.getConnectionState()===h.em.DISCONNECTED)return[2,y(m.f.CONTAINER_DISCONNECTED)];if(n.getConnectionState()===h.em.CONNECTING)return[2,y(m.f.CONTAINER_CONNECTING)];return[4,(t=n).exec.apply(t,(0,u._)((0,p.PR)(r)))];case 1:if(o=(i=c.sent()).output,a=i.error)switch(a){case v:return[2,y(m.f.EMPTY_RESULTS)];case"signal: broken pipe":return[2,y(m.f.PARTIAL_RESULTS)];case"Channel closed":return[2,y(m.f.CHANNEL_CLOSED)];default:return f.Tb(Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}if(!(null==o?void 0:o.trim())||!(l=(0,p.Tq)()(o))||0===l.filesMap.size)return[2,y(m.f.EMPTY_RESULTS)];return[2,y(l.error,l.filesMap)]}})})).apply(this,arguments)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:t}}var b=n(86763),w=n.n(b),Z=n(19327),x="File Search Used";function C(e){var t=e.container,n=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,c=e.isStreaming,u=e.trackLatency,d=void 0!==u&&u,h=(0,Z.Z)({container:t}),g=[],y=a()(),b=Date.now(),C=function(e){i(g=e)};return w()(function(e){var t=a()();y=t,b=Date.now(),n(null),o(!0);var i=!0;if(""===e.query){C([]),o(!1);return}!function(e){var t=e.execer,n=e.onComplete,r=e.onError,i=e.onParse,o=(0,s._)(e,["execer","onComplete","onError","onParse"]);if(0===o.query.length){n("abort");return}var a=new TextEncoder,l=(0,p.Tq)(),c=0,u=0,d=function(){},h=function(e){r(e),n("error")},g=function(e){if(0===c&&"finished"===e){h(m.f.EMPTY_RESULTS);return}"finished"===e?n(e,{bytes:u}):n(e),d()},y=t.onOutput(function(e){var t=a.encode(e).length;u+=t;var n=l(e);if(n){var r=n.error,o=n.filesMap,s=n.filesMapChanges;r&&h(r),c=o.size,s.forEach(function(e){var t=o.get(e);t&&o.set(e,(0,p.Vd)(t))}),i(o,s)}}),b=t.onStderr(function(e){if(e.trim()===v)return h(m.f.EMPTY_RESULTS);h(m.f.INVALID_COMMAND)});d=function(){y(),b()};var w=(0,p.PR)(o);t.request({args:w}).then(function(e){if(e.error)return e.error.trim()===v?h(m.f.EMPTY_RESULTS):h(m.f.INVALID_COMMAND);g("finished")}).catch(function(e){return f.Tb(Error("Ripgrep search command failed with error: ".concat(e))),h(m.f.INVALID_COMMAND)})}((0,r._)({execer:h,onComplete:function(r,i){if(y===t){o(!1);var a,c,s,u,f="finished"===r&&i&&i.bytes===p.Ak;f&&n(m.f.PARTIAL_RESULTS),d&&l.kg.time("".concat(x," - complete"),Date.now()-b,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(u=null==e?void 0:null===(c=e.excludeGlobs)||void 0===c?void 0:c.length)&&void 0!==u?u:0)>0,latency:Date.now()-b,isPartialResults:f})}},onError:function(e){y===t&&n(e)},onParse:function(n,r){if(y===t){if(i){if(d){var a,s,u,f;l.kg.time("".concat(x," - first_chunk"),Date.now()-b,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(u=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==u?u:0)>0,hasExcludes:(null!==(f=null==e?void 0:null===(s=e.excludeGlobs)||void 0===s?void 0:s.length)&&void 0!==f?f:0)>0})}C((0,p.Md)([],n,r)),i=!1}else C((0,p.Md)(g,n,r));c&&o(!1)}},mode:"json",context:0},e))},200)}function _(e){var t=e.container,n=w()(function(e,n,o){(function(e){return g.apply(this,arguments)})((0,r._)({container:t,mode:"json",context:1,isCaseSensitive:!1},e)).then(function(e){var t=e.data?function(e){var t={},n=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i._)(a.value,2),s=c[0],u=c[1];t[s]=u.lines.map(function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map(function(e){return{column:e.start,length:e.length}})}}).filter(function(e){return e.matches.length>0})}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}(e.data):{},r=e.error===m.f.PARTIAL_RESULTS;if(r);else if(e.error)return n({error:e.error,results:null,isPartialResult:r});return n({error:null,results:t,isPartialResult:r})}).catch(o)},200);return function(e){return new Promise(function(t,r){return n(e,t,r)})}}},56443:function(e,t,n){n.d(t,{Eu:function(){return d},m6:function(){return l}});var r,i,o,a=n(63257);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(e){return e.forEach(function(e){return e&&n.push("-g",e)})},i=[],o=[],l=!0,u=!1,f=void 0;try{for(var h,p=e[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var m=h.value,v=s(m);v.startsWith("**")?i.push(v):o.push(v)}}catch(e){u=!0,f=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw f}}return o.length>0&&(r(["!*"]),new Set(o).forEach(function(e){r((function(e){var t=function(e){Array.isArray(r[e])||(r[e]=[]);var t,i=n[e],o=i.startsWith("{")&&i.endsWith("}")?d(i.substring(1,i.length-1),","):[i];(t=r[e]).push.apply(t,(0,a._)(o.map(function(t){var n=r[e-1];return n&&n.length>0?n.map(function(e){return"".concat(e,"/").concat(t)}):t}).flat(2)))},n=d(e,"/").filter(function(e){return e.length>0});"**"!==n[n.length-1]&&n.push("**");for(var r={},i=0;i<n.length;i++)t(i);return Object.values(r).flat(2)})(e).map(c))})),r(i),r(t.map(function(e){return"!".concat(c(s(e)))})),n}function c(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function s(e){return e.replaceAll(/\*/g,function(e,t,n){return t>0&&("*"===n[t-1]||"\\"===n[t-1])||t<n.length-1&&"*"===n[t+1]?e:"**"})}var u=(r={},i={},(o=function(e,t){r[e]=t,i[t]=e})("{","}"),o("(",")"),o("[","]"),{hasKey:function(e){return e in r},getKey:function(e){return r[e]},hasValue:function(e){return e in i},getValue:function(e){return i[e]}});function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var n=[],r=[],i="",o=!0,a=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value;if(d===t){if(0===r.length){n.push(i),i="";continue}}else if(u.hasKey(d))r.push(d);else if(u.hasValue(d)&&r.pop()!==u.getValue(d))return[e];i+=d}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return 0!==r.length?[e]:(i.length>0&&n.push(i),n)}},82614:function(e,t,n){n.d(t,{Ak:function(){return f},Tq:function(){return h},PR:function(){return g},Vd:function(){return m},Md:function(){return v}});var r=n(41733),i=n(30509),o=n(63257),a=n(36556);function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")}).join(" ")}var c=n(56443),s=n(26685),u=n(90005),d=n(91620).lW,f=524288;function h(){var e="",t=new Map;return function(n){var o=new Set,l=!1;if(n.trim().startsWith("error"))return{error:s.f.INVALID_COMMAND,filesMap:t,filesMapChanges:o};var c=n.indexOf("\n"),u=0,d=e+n;if(c>=0)c+=e.length;else{e=d;return}for(;c>=0;){var f=d.substring(u,c).trim();if(0!==f.length){var h=function(e){try{return JSON.parse(e)}catch(e){return null}}(f);h&&!function(e,t,n){switch(e.type){case"begin":var o=p(e.data.path);if(!o)return!1;t.set(o,{path:o,lines:[],dedentBy:0}),n.add(o);break;case"end":break;case"match":case"context":var l=p(e.data.path);if(!l)return!1;n.add(l);var c=t.get(l);if(!c)return!1;var s=function(e,t){var n,o,a=p(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),c=[];(null===(n=l[0])||void 0===n?void 0:n.trim())===""&&l.shift(),(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())===""&&l.pop();var s=0,u=0,d=e.data.submatches;return l.forEach(function(t,n){var r=e.data.line_number+n,i=u;u+=t.length+1;for(var o=[];s<d.length;){var a=d[s];if(a.start>=u)break;var l=a.start-i,f=void 0;if(f=a.end<u?a.end-a.start:a.end===u?a.end-a.start-1:t.length-l,l<t.length&&o.push({start:l,length:f}),a.end>u){a.start=u;break}s++}c.push({lineNumber:r,content:t,matches:o})}),(0,i._)((0,r._)({},t),{lines:t.lines.concat(c)})}(e,c);s&&t.set(l,s);break;case"error":return a.kg.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}(h,t,o)&&(l=!0)}u=c+1,c=d.indexOf("\n",u)}return e=d.substring(u),{error:l?s.f.INVALID_LINE:null,filesMap:t,filesMapChanges:o}}}function p(e){return e?"bytes"in e?d.from(e.bytes,"base64").toString():e.text:null}function m(e){var t,n=e.lines.length>0?(t=Math).min.apply(t,(0,o._)(e.lines.map(function(e){return e.content.match(/^[\t ]+/)}).flat().map(function(e){return(null==e?void 0:e.length)||0}))):0;return(0,i._)((0,r._)({},e),{dedentBy:n})}function v(e,t,n){for(var r=(0,o._)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,c=t.get(l);n.has(l)&&c&&(r[a]=c,i.add(l))}var s=!0,u=!1,d=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,m=t.get(p);!i.has(p)&&m&&r.push(m)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return r}function g(e){var t=e.mode,n=e.query,r=e.context,i=e.isRegex,a=e.isCaseSensitive,s=e.isMatchingWholeWords,d=e.includeGlobs,h=e.excludeGlobs,p=void 0===h?(0,o._)(u.hD):h,m=["rg"];switch(t){case"json":m.push("--json");break;case"files":m.push("--files-with-matches")}return null!==r&&m.push("--context","".concat(r)),n.includes("\n")&&m.push("--multiline"),i||m.push("--fixed-strings"),m.push("--max-count","100"),m.push("--max-filesize","4M"),m.push("--max-depth","24"),m.push("--max-columns","512"),m.push("--max-columns-preview"),m.push(a?"--case-sensitive":"--ignore-case"),m.push("--hidden"),s&&m.push("--word-regexp"),m.push.apply(m,(0,o._)((0,c.m6)(d,p))),m.push("--",n),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return["sh","-c","".concat(l.apply(void 0,(0,o._)(e))," | head -c ").concat(t)]}(m)}},26685:function(e,t,n){var r,i;n.d(t,{f:function(){return r}}),(i=r||(r={})).PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",i.EMPTY_RESULTS="Nothing came up searching your Repl's content.",i.EMPTY_QUERY="No search query was provided.",i.INVALID_LINE="We encountered an invalid line while parsing your search results.",i.INVALID_COMMAND="Ripgrep returned an invalid response.",i.CONTAINER_DISCONNECTED="Disconnected from the container.",i.CONTAINER_CONNECTING="Connecting to the container.",i.CHANNEL_CLOSED="Channel was closed."},69368:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(60305);function i(e){(0,r.j)(r.U3.FILETREE_USED,e)}},24090:function(e,t,n){n.d(t,{YI:function(){return P},kW:function(){return A}});var r,i,o=n(41733),a=n(30509),l=n(74985),c=n(28266),s=n.n(c),u=n(72121);n(50959),(r=i||(i={})).TEXT="TEXT",r.MENTION="MENTION",r.LINK="LINK",r.REPL_LINK="REPL_LINK",r.DEEP_LINK="DEEP_LINK",r.CODE="CODE",r.BOLD="BOLD",r.ITALICS="ITALICS",r.STRIKETHROUGH="STRIKETHROUGH",r.QUOTE="QUOTE";var d=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)(u.Z,{size:"small",onClick:n,children:t.content})},f=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)(u.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},h=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},p=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},m=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,children:t.content})},v=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,l.tZ)("code",{onClick:n,style:r,children:t.content})},g=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("b",{onClick:n,children:t.content})},y=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("i",{onClick:n,children:t.content})},b=function(e){var t=e.fragment,n=e.onClick;return(0,l.BX)("span",{onClick:n,className:"jsx-e2f6e2707e7599fa",children:[t.content,(0,l.tZ)(s(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},w=function(e){var t=e.fragment,n=e.onClick;return(0,l.BX)("blockquote",{onClick:n,className:"jsx-8741a91fadaf26be",children:[t.content,(0,l.tZ)(s(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},Z=/(@[0-9a-zA-Z_]+)/,x=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,C=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,_=/(`.+?`)/,S=/(\*\*.+?\*\*)/,k=/(_.+?_)/,E=/(\*.+?\*)/,T=/(~~.+?~~)/,R=/(^>.+?$\n?)/m,I=/\/@([0-9a-zA-Z_]+)\/(.+)/;function D(e){var t=e.url;return{type:"LINK",url:t,content:t}}function B(e){var t=e.hash;return{type:"DEEP_LINK",url:t,content:t}}var G=RegExp([_.source,S.source,k.source,E.source,T.source,C.source,Z.source,x.source,R.source].join("|"),"m");function A(e,t){var n=e.split(G),r=[],i=[],o=!0,a=!1,l=void 0;try{for(var c,s=n[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if(u){var d=function(e,t){if(C.test(e)){var n={};try{n=new window.URL(e)}catch(t){return{content:e,type:"TEXT"}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?B({hash:n.hash}):I.test(n.pathname)?function(e){var t=e.url,n=I.exec(t.pathname);if(!n)throw Error("Not a Repl URL");return{type:"REPL_LINK",url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):D({url:e}):D({url:e})}if(x.test(e))return B({hash:e});if(R.test(e))return{type:"QUOTE",content:({text:e.slice(1).trim()}).text};if(_.test(e))return{type:"CODE",content:({code:e.slice(1,-1)}).code};if(S.test(e))return{type:"BOLD",content:({text:e.slice(2,-2)}).text};if(k.test(e)||E.test(e))return{type:"ITALICS",content:({text:e.slice(1,-1)}).text};if(T.test(e))return{type:"STRIKETHROUGH",content:({text:e.slice(2,-2)}).text};if(Z.test(e)){var r=e.slice(1);if(!t.users||t.users.includes(r))return{type:"MENTION",username:r,content:"@".concat(r)}}return{content:e,type:"TEXT"}}(u,t);if(d){if("MENTION"===d.type){if(!d.username)continue;r.push(d.username)}i.push(d)}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return{tokens:i,mentions:r}}function P(e){var t=e.message,n=e.onMentionClick,r=void 0===n?function(){}:n,i=e.codeStyles,c=void 0===i?{}:i;return(0,l.tZ)(l.HY,{children:t.tokens.map(function(e,t){var n={fragment:e,key:t};return"MENTION"===e.type?(0,l.tZ)(f,(0,a._)((0,o._)({},n),{onClick:function(){return r(e)}})):"LINK"===e.type?(0,l.tZ)(h,(0,o._)({},n)):"REPL_LINK"===e.type?(0,l.tZ)(p,(0,o._)({},n)):"DEEP_LINK"===e.type?(0,l.tZ)(m,(0,o._)({},n)):"CODE"===e.type?(0,l.tZ)(v,(0,a._)((0,o._)({},n),{style:c})):"BOLD"===e.type?(0,l.tZ)(g,(0,o._)({},n)):"ITALICS"===e.type?(0,l.tZ)(y,(0,o._)({},n)):"STRIKETHROUGH"===e.type?(0,l.tZ)(b,(0,o._)({},n)):"QUOTE"===e.type?(0,l.tZ)(w,(0,o._)({},n)):(0,l.tZ)(d,(0,o._)({},n))})})}},85242:function(e,t,n){n.d(t,{D:function(){return cj}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x=n(41733),C=n(30509),_=n(66626),S=n(63257),k=n(74985),E=n(33083),T=n(9756),R=n(74044),I=n(99149),D=n(63993),B=n(40121),G=n(28360),A=n(26101),P=n(6922),N=n(59695),L=n(36647),O=n(38753),U=n(16923),M=n(56993),X=n(70501),F=n(72452),W=n(44049),H=n(65059),V=n(34270),z=n(1187),j=n(7466),q=n(85421),J=n.n(q),Y=n(70016),K=n(42650),$=n(50959),Q=n(36559),ee=n(95683),et=n(54401),en=n(63891),er=n(94778),ei=n(27856),eo=n(84077),ea=n(72093),el=n(86763),ec=n.n(el),es=n(33675),eu=n(95571),ed=n(49224),ef=(0,ed.X)({root:[ea.l0.height(48),ea.l0.backgroundColor.backgroundRoot,ea.l0.display.flex,ea.l0.justify.spaceBetween,ea.l0.align.stretch,{fontFamily:"Monaco, Menlo, 'Ubuntu Mono', Consolas, source-code-pro, monospace",button:[ea.l0.color.foregroundDefault,ea.l0.fontSize(16),ea.l0.flex.growAndShrink(1),{padding:"10px",fontFamily:"inherit",backgroundColor:"transparent",border:"0 none",flexBasis:"auto"}]}],fixedContainer:[ea.l0.position.fixed,ea.l0.width("100%"),ea.l0.zIndex(100),ea.l0.left(0)]}),eh=function(e){var t=e.buttons,n=e.onClick,r=e.onUndo,i=e.onRedo;return(0,k.BX)("nav",{css:ef.root,children:[t.map(function(e){return(0,k.tZ)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},children:void 0!==e.label?e.label:e.value},e.value)}),(0,k.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},children:(0,k.tZ)(ei.Z,{})}),(0,k.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},children:(0,k.tZ)(eo.Z,{})})]})},ep=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],em=function(e){var t=e.path,n=(0,S._)(ep).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},ev="visualViewport"in window;function eg(e){var t=e.filePath,n=e.isLoading,r=(0,es.uN)(),i=(0,et.d)({tablet:!1}),o=(0,eu.Vm)(),a=(0,en.Z)();(0,$.useEffect)(function(){a&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var t=e.cursor,n=e.scroller;if(t){var i=(t.top+t.bottom)/2,a=(n.top+n.bottom)/2;Math.abs(i-a)>5&&(r.scrollDOM.scrollTop+=i-a+(o?50:0))}}})},[a,r,o]);var l=(0,_._)((0,$.useState)(0),2),c=l[0],s=l[1];if((0,$.useEffect)(function(){if(o){var e=window.visualViewport;if(ev&&e){var t=ec()(function(){s(window.innerHeight-e.height-e.offsetTop)},100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t)}}}},[o]),!a||n||!i)return null;var u=(0,k.tZ)(eh,{onUndo:function(){r&&((0,ee.Yw)(r),r.focus())},onRedo:function(){r&&((0,ee.KX)(r),r.focus())},onClick:function(e){if(r){var t,n=null!==(t=r.state.selection.ranges[0].from)&&void 0!==t?t:0;r.dispatch({changes:{from:n,insert:e.value},selection:{anchor:n+e.cursorOffset}}),r.focus()}},buttons:em({path:t})});return!o||ev?(0,k.tZ)(er.G,{css:ef.fixedContainer,style:{bottom:c},children:u}):u}var ey=n(23293),eb=n(13621),ew=n(85777),eZ=n(19805),ex=n(20314),eC=[{img:"/public/images/kaboomdraw/rect.png",code:"\ndrawRect({\n	pos: vec2(80, 80),\n	width: 120,\n	height: 80,\n	color: rgb(250, 242, 164),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/triangle.png",code:"\ndrawTriangle({\n	pos: vec2(100, 100),\n	p1: vec2(0, -48),\n	p2: vec2(-60, 48),\n	p3: vec2(60, 48),\n	color: rgb(164, 250, 204),\n})\n  ".trim()},{img:"/public/images/kaboomdraw/circle.png",code:"\ndrawCircle({\n	pos: vec2(100, 100),\n	radius: 48,\n	color: rgb(181, 164, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/ellipse.png",code:"\ndrawEllipse({\n	pos: vec2(120, 100),\n	radiusX: 64,\n	radiusY: 40,\n	color: rgb(164, 209, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/polygon.png",code:"\ndrawPolygon({\n	pos: vec2(100, 100),\n	pts: [\n		vec2(0, -48),\n		vec2(-64, 0),\n		vec2(-32, 64),\n		vec2(32, 64),\n		vec2(64, 0),\n	],\n	color: rgb(250, 164, 226),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/text.png",code:'\ndrawText({\n	text: "hi",\n	pos: vec2(60, 60),\n})\n    '.trim()}],e_=function(e){var t=e.img,n=e.code,r=(0,_._)((0,ex.c)({item:{type:eZ.z.Code,code:n},type:eZ.z.Code}),2)[1];return(0,k.tZ)("img",{alt:"kaboom shape",ref:r,src:t,css:[ea.l0.p(12),{userDrag:"none",height:"100%",cursor:"pointer",transition:"0.1s transform",":hover":{transform:"scale(1.2)"}}]})},eS=function(){return(0,k.tZ)(er.G,{css:[ea.l0.flex.row,ea.l0.justify.spaceEvenly,ea.l0.backgroundColor.backgroundHigher,ea.l0.borderRadius(8),ea.l0.width("calc(100% - 32px)"),ea.l0.height("64px"),ea.l0.position.absolute,ea.l0.overflowY("hidden"),{zIndex:5,left:16,bottom:16,border:"solid 1px var(--outline-dimmest)"}],children:eC.map(function(e){return(0,k.tZ)(e_,(0,x._)({},e),e.img)})})},ek=n(30364),eE=n(16826),eT=n(60941),eR=n(46298),eI=n(84806),eD=n(81199),eB=n(75706),eG=n(7849),eA=new eT.j(function(e,t,n,r){return(0,eG.Rr)(e,t?(0,eB.ZF)("/home/runner/".concat(t.slug,"/").concat(n)):null,r)}),eP=n(12285),eN=n(80403),eL=n(20870),eO=n(16783),eU=n.n(eO),eM="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),eX="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),eF=eE.tk.theme({".cm-vws-space":{backgroundColor:ea.TV.foregroundDimmest,maskImage:eM,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":eM,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:ea.TV.foregroundDimmest,maskImage:eX,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":eX,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),eW=eU()(function(e,t,n){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(t).concat(n?" cm-vws-selected":"");return eE.p.mark({class:r})},function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)});function eH(e,t,n){var r=e.facet(ej);if(!r.leading&&!r.enclosed&&!r.trailing&&!r.selected)return[];for(var i=[],o=e.doc.lineAt(t),a=e.doc.lineAt(n),l=o.number;l<=a.number;l++)!function(o){var a=e.doc.line(o),l=a.text.length;if(0!==l){var c=0===a.text.trim().length,s=!!r.selected&&e.selection.ranges.some(function(e){return!e.empty&&e.from<a.to&&e.to>=a.from});if(r.leading||r.enclosed||r.trailing||s){if(c){if(r.leading||r.trailing||s)for(var u=0;u<l;u++)!function(o){var l=a.text[o],c=a.from+o;if(!(c<t)&&!(c>=n)&&(" "===l||"	"===l)){var u=s&&e.selection.ranges.some(function(e){return e.from<=c&&e.to>c});(r.leading||r.trailing||u)&&i.push(eW(l,"trailing",u).range(c,c+1))}}(u);return}for(var d=l-a.text.trimStart().length,f=a.text.trim().length,h=0;h<l;h++)!function(o){var l=a.text[o],c=a.from+o;if(!(c<t)&&!(c>=n)&&(" "===l||"	"===l)){var u=void 0;u=o>=d+f?"trailing":o>d?"enclosed":"leading";var h=s&&e.selection.ranges.some(function(e){return e.from<=c&&e.to>c});(r[u]||h)&&i.push(eW(l,u,h).range(c,c+1))}}(h)}}}(l);return i}var eV=function(){"use strict";function e(t){(0,eP._)(this,e),this.decorations=eE.p.set(eH(t.state,0,t.state.doc.length))}return e.prototype.update=function(e){if((0,eL.aU)(e,ej)){this.decorations=eE.p.set(eH(e.state,0,e.state.doc.length));return}var t=e.state.facet(ej);if(e.docChanged||e.selectionSet&&t.selected){var n=this.decorations,r=null,i=null;if(e.selectionSet&&t.selected){var o=e.startState.selection.ranges.filter(function(e){return!e.empty}),a=(0,S._)(e.state.selection.ranges).concat((0,S._)(e.startState.selection.map(e.changes).ranges)).filter(function(e){return!e.empty});o.length&&(r=eN.jT.create(o)),a.length&&(i=eN.jT.create(a))}if(e.docChanged&&e.changes.iterChangedRanges(function(t,n,o,a){var l=eN.jT.range(e.startState.doc.lineAt(t).from,e.startState.doc.lineAt(n).to);r=r?r.addRange(l):eN.jT.create([l]);var c=eN.jT.range(e.state.doc.lineAt(o).from,e.state.doc.lineAt(a).to);i=i?i.addRange(c):eN.jT.create([c])}),r){var l=r.ranges;n=n.update({filter:function(e,t){return!l.some(function(n){return n.from<=e&&n.to>=t})},filterFrom:l[0].from,filterTo:l[l.length-1].to})}e.docChanged&&(n=n.map(e.changes)),i&&(n=n.update({add:i.ranges.map(function(t){return eH(e.state,t.from,t.to)}).flat()})),this.decorations=n}},e}(),ez=eE.lg.fromClass(eV,{decorations:function(e){return e.decorations}}),ej=eN.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:{}},enables:[eF,eN.Wl.highest(ez)]}),eq=new eT.j(function(e,t,n,r){return e||t||n||r?ej.of({leading:e,enclosed:t,trailing:n,selected:r}):null}),eJ=n(27387),eY=n(96583),eK=n(20075),e$=n(25596),eQ=n(118),e0=n(69170),e1=n(42385),e2=n(34635),e3=n(73058),e4=n(33530),e8=n(29121),e6=n(54960),e5=n(19327),e9=new eT.j(function(e,t,n,r,i,o,a,l){return e?e.formatters.map(function(e){var c;if(2===(c=e.id.split("/")).length&&c[1].includes("languageServer")){var s,u,d=n.find(function(t){return t.clientId===e.id});return d&&d&&d.isSupportedFile(o)&&r&&r.isFormatSupported&&(0,e2.Z)(d).isFormatSupported&&i?e$.Lf.of({format:(s=(0,eJ._)(function(e,t,n){return(0,eY.Jh)(this,function(r){return[2,(t?d.request.formatRange(o,(0,eQ.Ih)(e,t),n):d.request.format(o,n)).then(function(t){return"error"in t||t.cancelled?{error:!0}:t.result?{result:(0,e3.Z)(t.result,e.toString())}:{result:eN.as.empty(e.length)}})]})}),function(e,t,n){return s.apply(this,arguments)}),supportsRangeFormatting:(0,e2.Z)(d).isFormatRangeSupported,identifier:d.clientId,name:d.clientName,onError:function(){l("Sorry, formatting ".concat(o," failed"),1500)},onSuccess:function(){a("Formatted ".concat(o," successfully"),1500)}}):[]}return(0,e6.F)(o,e)?e$.Lf.of({format:(u=(0,eJ._)(function(n,r,i){var a,l,c,s,u;return(0,eY.Jh)(this,function(d){switch(d.label){case 0:if(!e.startCommand)throw Error("Expected formatter command");return a=(0,e5.Z)({container:t}),l=e.startCommand.args.map(function(e){return"$file"===e?o:e}),r&&e.id.includes("prettier")&&l.push("--range-start",String(r.main.from),"--range-end",String(r.main.to)),e.id.includes("prettier")&&l.push("--tab-width",String(i.tabSize),"--use-tabs",String(!i.insertSpaces)),c="",s="",u=[a.onOutput(function(e){return c+=e}),a.onStderr(function(e){return s+=e}),a.dispose],[4,a.request((0,C._)((0,x._)({},e.startCommand),{args:l,lifecycle:eK.api.Exec.Lifecycle.STDIN,stdin:n.toString()})).then(function(e){var t=e.error;return u.forEach(function(e){return e()}),t?{error:!0,message:s}:{result:c}})];case 1:return[2,d.sent()]}})}),function(e,t,n){return u.apply(this,arguments)}),supportsRangeFormatting:e.id.includes("prettier"),identifier:e.id,name:e.name,onSuccess:a,onError:l}):null}).filter(Boolean):null}),e7=n(61269),te=n(44322),tt=n(4955),tn=n(9670),tr=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e){var r;return(0,eP._)(this,n),(r=t.call(this)).type=e,r}return n.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},n.range=function(e,t,n){return this.from(e).range(t,n)},n}(eN.uU);function ti(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=n;o<=r;){var a=e.lineAt(o),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<t)return null;var n=e.text[0],r=function(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}(n);if(!r)return null;var i=n.repeat(t);return e.text.slice(0,t)!==i||e.text.length>t&&" "!==e.text[t]?null:r}(a,t);l&&i.push(tr.range(l,a.from,a.to)),o=a.to+1}return i}tr.yours=new tr("yours"),tr.base=new tr("base"),tr.middle=new tr("middle"),tr.theirs=new tr("theirs");var to=["yours","base","middle","theirs"];function ta(e){Array.isArray(e)&&(e=eN.Xs.of(e));var t=[],n=[];if(0===e.size)return{hunks:t,hanging:n};for(var r=e.iter();null!==r.value;){var i,o,a,l={},c={},s=[],u=!0,d=!1,f=void 0;try{for(var h,p=to[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value,v=r.value,g=r.from,y=r.to;if("base"!==m||v.type===m){if(v.type===m)l[m]={from:g,to:y},s.push({from:g,to:y,type:v.type});else if("yours"!==v.type)s.push({from:g,to:y,type:v.type});else break;if(r.next(),null===r.value)break}}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}if(!l.yours||!l.middle||!l.theirs){n.push.apply(n,(0,S._)(s));continue}null!==(i=l.base)&&void 0!==i||(l.base=null),null!==(o=c.base)&&void 0!==o||(c.base=null);var b=null!==(a=l.base)&&void 0!==a?a:l.middle,w=l.yours.to+1,Z=b.from-1;if(c.yours=w<Z?{from:w,to:Z}:null,l.base){var x=l.base.to+1,C=l.middle.from-1;c.base=x<C?{from:x,to:C}:null}var _=l.middle.to+1,k=l.theirs.from-1;c.theirs=_<k?{from:_,to:k}:null;var E={from:l.yours.from,to:l.theirs.to,markers:l,content:c};t.push(E)}return{hunks:t,hanging:n}}var tl=eN.r$.define({combine:function(e){return e.length?e[0]:7}}),tc=eN.QQ.define({create:function(e){var t=e.doc,n=e.facet(tl),r=eN.Xs.of(ti(t,n)),i=ta(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,t){var n=t.newDoc,r=t.startState.facet(tl),i=t.state.facet(tl);if(r!==i){var o=eN.Xs.of(ti(n,i)),a=ta(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!t.docChanged)return e;var l=null,c=null,s=null,u=null;t.changes.iterChangedRanges(function(e,t,n,r){l=null===l?e:Math.min(l,e),c=null===c?t:Math.max(c,t),s=null===s?n:Math.min(s,n),u=null===u?r:Math.max(u,r)});var d=e.markers;if(null!==l&&null!==c){var f=t.startState.doc.lineAt(l).from,h=t.startState.doc.lineAt(c).to;d=d.update({filter:function(){return!1},filterFrom:f,filterTo:h})}d=d.map(t.changes),null!==s&&null!==u&&(d=d.update({add:ti(n,i,s,u)}));var p=ta(d);return{markers:d,hunks:p.hunks,hanging:p.hanging}}}),ts=eE.tk.atomicRanges.from(tc,function(e){return function(){return e.markers}}),tu=eN.yy.changeFilter.of(function(e){var t=e.startState.field(tc);if(!e.docChanged||0===t.markers.size)return!0;var n=e.startState.doc,r=[];return e.changes.iterChanges(function(e,i,o,a,l){var c=l.length,s=Math.max(n.lineAt(e).from-1,0),u=Math.min(n.lineAt(i).to+1,n.length);t.markers.between(s,u,function(t,s){e<=t&&i>=s||0!==c&&(e===s&&"\n"===l.sliceString(0,1)||i===t&&"\n"===l.sliceString(c-1,c))||o===a&&(i===s+1&&0===n.lineAt(i).length||e===t-1&&0===n.lineAt(e).length)||r.push(t-1,s+1)})}),!(r.length>0)||r}),td=eN.yy.transactionFilter.of(function(e){var t=e.docChanged?e.state.field(tc):e.startState.field(tc);if(0===t.markers.size)return e;var n=e.newSelection,r=!1,i=!1;do{i=!1;for(var o=0;o<n.ranges.length&&"break"!==function(e){var o=n.ranges[e],a=o.from,l=o.to,c=a,s=l;if(t.markers.between(a,l,function(e,t){var n=(e+t)/2;a>e&&a<t&&(c=a<n?e:t),l>e&&l<t&&(s=l<n?e:t)}),c!==a||s!==l){var u,d=o.anchor<o.head?c:s,f=o.anchor<o.head?s:c,h=o.goalColumn,p=null!==(u=o.bidiLevel)&&void 0!==u?u:void 0,m=eN.jT.range(d,f,h,p);return n=n.replaceRange(m,e),i=!0,r=!0,"break"}}(o);o++);}while(i);return r?[e,{selection:n,sequential:!0}]:e}),tf=n(42516),th="cm-git-conflict-marker-yours",tp="cm-git-conflict-marker-base",tm="cm-git-conflict-marker-middle",tv="cm-git-conflict-marker-theirs",tg="cm-git-conflict-marker-hanging",ty="cm-git-conflict-content-yours",tb="cm-git-conflict-content-base",tw="cm-git-conflict-content-theirs";function tZ(e){var t=e.background,n=e.color,r=e.noBorder,i={color:n,backgroundColor:t,backgroundClip:"padding-box",paddingTop:ea.TV.space4,paddingBottom:ea.TV.space4,fontWeight:ea.TV.fontWeightBold};return void 0!==r&&r||(i.borderLeft="4px solid rgba(0, 150, 255, 0.1)",i.paddingLeft="2px"),i}function tx(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var tC=eE.tk.theme((d={},(0,tf._)(d,".".concat(th),tZ({background:"rgba(0, 150, 255, 0.1)",color:ea.TV.blueStrongest,noBorder:!0})),(0,tf._)(d,".".concat(tm),tZ({background:"rgba(255, 0, 0, 0.1)",color:ea.TV.redStrongest})),(0,tf._)(d,".".concat(tp),tZ({background:"rgba(255, 165, 0, 0.1)",color:ea.TV.orangeStrongest})),(0,tf._)(d,".".concat(tv),tZ({background:"rgba(0, 150, 255, 0.1)",color:ea.TV.blueStrongest,noBorder:!0})),(0,tf._)(d,".".concat(tg),tZ({background:"rgba(100, 150, 255, 0.1)",color:ea.TV.blueStrongest,noBorder:!0})),(0,tf._)(d,".".concat(ty),tx({background:"rgba(0, 255, 0, 0.1)"})),(0,tf._)(d,".".concat(tw),tx({background:"rgba(255, 0, 0, 0.1)"})),(0,tf._)(d,".".concat(tb),tx({background:"rgba(255, 165, 0, 0.1)"})),d)),t_={yours:{marker:eE.p.line({class:th}),content:eE.p.line({class:ty})},base:{marker:eE.p.line({class:tp}),content:eE.p.line({class:tb})},middle:{marker:eE.p.line({class:tm})},theirs:{marker:eE.p.line({class:tv}),content:eE.p.line({class:tw})},hanging:{marker:eE.p.line({class:tg})}},tS=function(){"use strict";function e(t){(0,eP._)(this,e),this.builder=new eN.f_,this.doc=t}var t=e.prototype;return t.add=function(e,t){var n=this.doc.lineAt(e.from);if(n.to>=e.to){this.builder.add(n.from,n.from,t);return}for(var r=n.from;r<=e.to;)this.builder.add(r,r,t),r=this.doc.lineAt(r).to+1},t.finish=function(){return this.builder.finish()},e}(),tk=eE.tk.decorations.from(tc,function(e){return function(t){var n=new tS(t.state.doc),r=!0,i=!1,o=void 0;try{for(var a,l=e.hunks[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;t.viewport.from>c.to||t.viewport.to<c.from||(n.add(c.markers.yours,t_.yours.marker),c.content.yours&&n.add(c.content.yours,t_.yours.content),c.markers.base&&n.add(c.markers.base,t_.base.marker),c.content.base&&n.add(c.content.base,t_.base.content),n.add(c.markers.middle,t_.middle.marker),c.content.theirs&&n.add(c.content.theirs,t_.theirs.content),n.add(c.markers.theirs,t_.theirs.marker))}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}}),tE=eE.tk.decorations.from(tc,function(e){return function(){var t=new eN.f_,n=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.add(l.from,l.from,t_.hanging.marker)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.finish()}}),tT=[tc,[ts,tu,td],[eN.Wl.lowest(tC),tk,tE]],tR=n(51743),tI=function(){"use strict";function e(t,n,r,i,o,a){(0,eP._)(this,e),this.original=t,this.current=n,this.chunks=r,this.desc=i,this.pending=o,this.ranges=a}var t=e.prototype;return t.hasChanges=function(){return this.ranges.length>0},t.update=function(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=this.original,l=this.chunks,c=this.desc,s=this.pending,u=this.ranges;if(Math.abs((this.pending?this.pending.length:this.current.length)-t.length)>=250||i){var d=(0,tR.Gj)(c,s,n).pending;l=(0,tR.U_)(a,t,{chunks:l,changesB:d},o),c=(0,tR.fu)(l,a.length),s=null,u=(0,tR.Hu)(c)}else s=(r=(0,tR.Gj)(c,s,n)).pending,c=r.desc,u=(0,tR.Hu)(c);return s&&t.eq(a)&&(l=[],c=eN.as.empty(a.length),s=null,u=[]),new e(a,t,l,c,s,u)},t.isAccurate=function(){return null===this.pending},t.getLineChangeType=function(e){var t=this.current.line(e);return 0===this.original.length&&this.current.length>0?tR.dQ.COVERED:(0,tR.dx)(t,tR.MF.B,this.ranges)},t.iterRanges=function(){return(0,eY.Jh)(this,function(e){switch(e.label){case 0:return[5,(0,eY.XA)(this.ranges)];case 1:return e.sent(),[2]}})},e.create=function(t,n,r){var i=(0,tR.U_)(t,n,void 0,r),o=(0,tR.fu)(i,t.length),a=(0,tR.Hu)(o);return new e(t,n,i,o,null,a)},e}(),tD=eN.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),tB=eN.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.facet(tD);return!n||Math.max(n.lines,t.newDoc.lines)>5e3||Math.max(n.length,t.newDoc.length)>4e5?null:(e&&e.original.eq(n)?t.docChanged&&(e=e.update(t.newDoc,t.changes,!(t.isUserEvent("input.type")||t.isUserEvent("delete.forward")||t.isUserEvent("delete.backward")))):e=tI.create(n,t.newDoc,{scanLimit:4e4}),e)}}),tG=n(66382),tA=(0,eE.v5)({class:tG.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(tB,!1);if(!n||!n.hasChanges())return null;if(0===n.original.length)return tG.Vt;var r=e.state.doc.lineAt(t.from);switch(n.getLineChangeType(r.number)){case tR.dQ.COVERED:return tG.vP;case tR.dQ.MODIFIED:return tG.wp;default:return null}},initialSpacer:function(e){return e.state.field(tB,!1)?tG.Vt:tG.Do},updateSpacer:function(e,t){var n=t.state.field(tB,!1)?tG.Vt:tG.Do;return e===n?e:n}}),tP=eN.r$.define({enables:function(e){return[tD.computeN([e],function(t){return t.facet(e)}),tG.Lw,tB,eN.Wl.highest(tA)]}}),tN=n(66873);(o=f||(f={})).GUTTER_DIFF="GUTTER_DIFF",o.INLINE_DIFF="INLINE_DIFF";var tL=eN.Py.define(),tO=eN.Py.define(),tU=eN.QQ.define({create:function(){return{head:null,mode:"GUTTER_DIFF"}},update:function(e,t){var n=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,c=t.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.is(tL)?n=s.value:s.is(tO)&&(r=s.value)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n!==e.head||r!==e.mode?{head:n,mode:r}:e},provide:function(e){return[tP.from(e,function(e){return"GUTTER_DIFF"===e.mode?e.head:null}),tN.p.from(e,function(e){return"INLINE_DIFF"===e.mode?e.head:null})]}}),tM=function(){"use strict";function e(t,n,r){var i=this;(0,eP._)(this,e),this.view=t,this.git=n,this.path=r,this.disposed=!1,this.dispose=n.onRefresh(function(){return i.fetchThenUpdateState()}),this.fetchThenUpdateState()}var t=e.prototype;return t.fetchThenUpdateState=function(){var e=this;return(0,eJ._)(function(){var t,n,r,i,o;return(0,eY.Jh)(this,function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD"})];case 1:if(t=a.sent(),e.disposed||!(n=e.view.state.field(tU,!1)))return[2];return(!(o=null===(i=t.error?null:null!==(r=t.content)&&void 0!==r?r:"")?null:e.view.state.toText(i))!=!n.head||o&&n.head&&!o.eq(n.head))&&e.view.dispatch({effects:tL.of(o)}),[2]}})})()},t.destroy=function(){this.dispose(),this.disposed=!0},e}(),tX=n(59786),tF=new eT.j(function(e,t,n,r){var i=[];return n||i.push(t?[tU,eE.lg.define(function(n){return new tM(n,e,t)})]:[]),(r||i.push(tT),0===i.length)?null:i}),tW=n(25497),tH=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e,r){var i;return(0,eP._)(this,n),(i=t.call(this)).src=e,i.pos=r,i}var r=n.prototype;return r.eq=function(e){return this.src===e.src&&this.pos===e.pos},r.toDOM=function(){var e=document.createElement("img");return e.src=this.src,e.dataset.pos=this.pos.toString(),e.style.maxHeight="64px",e.style.maxWidth="256px",e},r.ignoreEvent=function(){return!1},n}(eE.l9),tV=/"data:image\/\w+;base64,[^"\s]+"/g,tz=Number.MAX_VALUE,tj=new eT.j(function(e){return e?eE.lg.define(function(e){var t=new eE.Y1({regexp:tV,decoration:function(e,t,n){if(void 0===e[0])throw Error("Failed to match image");var r=e[0].substring(1,e[0].length-1);return eE.p.replace({widget:new tH(r,n)})},maxLength:tz});return{matcher:t,deco:t.createDeco(e),update:function(e){e.docChanged&&(this.deco=t.updateDeco(e,this.deco))}}},{decorations:function(e){return e.deco},provide:function(e){return eE.tk.atomicRanges.of(function(t){var n=t.plugin(e);return n?n.deco:eE.p.none})}}):null}),tq=n(15323),tJ=n(23821),tY=n(69574),tK=n(22648),t$=n(68574),tQ=n(52178),t0=n(48495),t1=n(12674),t2=n(24531),t3=n(82230),t4=n(72164),t8=n(2172),t6="cm-ghostwriter-hint-tooltip",t5=eE.tk.theme((0,tf._)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:ea.TV.backgroundHigher,borderTop:"solid 1px ".concat(ea.TV.outlineDefault)}},".cm-tooltip-autocomplete.".concat(t6," .cm-ghostwriter-hint"),{display:"block"})),t9=(0,ed.X)({hint:[ea.l0.p(4),ea.l0.rowWithGap(8),ea.l0.align.center,ea.l0.font.default,{opacity:.6}],prompt:[ea.l0.rowWithGap(4),ea.l0.align.center]});function t7(){return(0,k.BX)(er.G,{css:t9.hint,children:[(0,k.tZ)(t4.Z,{width:8,height:8}),(0,k.BX)(er.G,{css:t9.prompt,children:[(0,k.tZ)(t8.ZP,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,k.tZ)(t3.xv,{variant:"small",multiline:!1,children:"to use AI suggestion."})]})]})}var ne=eE.lg.define(function(e){var t=function(){var t,n,r;return(0,S._)(e.dom.children).concat((0,S._)(null!==(r=null===(n=t2.yb.get(e))||void 0===n?void 0:null===(t=n.children[0])||void 0===t?void 0:t.children)&&void 0!==r?r:[])).filter(function(e){return e.classList.contains("cm-tooltip-autocomplete")})},n=function(e){return Array.from(e.children).filter(function(e){return e.classList.contains("cm-ghostwriter-hint")})},r=!1;return{update:function(){null!==(0,t$.LR)(e.state)&&Promise.resolve().then(function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,s=n(c);if(0===s.length){var u=(0,t1.V)((0,k.tZ)(t7,{}));u.className="cm-ghostwriter-hint",c.appendChild(u)}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,s=!0,u=!1,d=void 0;try{for(var f,h=n(c)[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;c.removeChild(p)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}}),nt=eN.Py.define(),nn=eN.QQ.define({create:function(){return null},update:function(e,t){null!==(0,t$.LR)(t.state)?e&&(e=(0,C._)((0,x._)({},e),{missed:e.missed.compose(t.changes)})):e=null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)o.value.is(nt)&&(e={original:t.state.doc,missed:eN.as.empty(t.state.doc.length)})}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});function nr(e,t){var n=e.field(nn,!1);if(n){var r=(0,eQ.RL)(n.original,t);return n.missed.mapPos(r)}return(0,eQ.RL)(e.doc,t)}var ni=n(36556),no=n(60305),na=n(5172),nl=n(24598),nc=n(7225),ns=n(77865),nu=n(41753),nd=(0,ed.X)({styles0:[{p:{whiteSpace:"pre-wrap"}}]}),nf={p:{padding:"".concat(ea.TV.space2," ").concat(ea.TV.space8),lineHeight:1.4,marginBottom:"".concat(ea.TV.space8," !important")},"p:first-of-type":{marginTop:"".concat(ea.TV.space4," !important")},"p:last-of-type":{marginBottom:"".concat(ea.TV.space4," !important")},pre:{margin:"".concat(ea.TV.space2," ").concat(ea.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(ea.TV.outlineDimmest),paddingTop:ea.TV.space4},"h1, h2, h3":{margin:"".concat(ea.TV.space8," !important"),marginTop:"".concat(ea.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(ea.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(ea.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(ea.TV.space4," !important")},hr:{margin:"".concat(ea.TV.space8," !important"),borderTop:"2px solid ".concat(ea.TV.backgroundHighest," !important")},li:{margin:"".concat(ea.TV.space2," ").concat(ea.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(ea.TV.backgroundHighest),marginBottom:ea.TV.space4},".cm-line":{paddingLeft:ea.TV.space4,paddingRight:ea.TV.space4},".cm-content":{paddingLeft:ea.TV.space4,paddingRight:ea.TV.space4}},nh=(0,$.memo)(function(e){var t=e.content,n=e.className;return(0,k.tZ)(er.G,{css:nf,children:(0,k.tZ)(ns.ZP,{className:n,components:{code:function(e){return(0,k.tZ)(nu.Z,(0,x._)({minimal:!0,disableCopy:!0},e))}},children:t})})});function np(e){var t=e.content,n=e.className;return"string"==typeof t?(0,k.tZ)(nh,{css:nd.styles0,className:n,content:t}):t.kind===nc.MarkupKind.PlainText?(0,k.tZ)(er.G,{children:(0,k.tZ)(t3.xv,{className:n,children:t.value})}):(0,k.tZ)(nh,{className:n,content:t.value})}var nm=n(98924),nv=n(4384),ng=n(83176),ny=n(25490);(a=h||(h={}))[a.Dollar=0]="Dollar",a[a.Colon=1]="Colon",a[a.Comma=2]="Comma",a[a.CurlyOpen=3]="CurlyOpen",a[a.CurlyClose=4]="CurlyClose",a[a.Backslash=5]="Backslash",a[a.Forwardslash=6]="Forwardslash",a[a.Pipe=7]="Pipe",a[a.Int=8]="Int",a[a.VariableName=9]="VariableName",a[a.Format=10]="Format",a[a.Plus=11]="Plus",a[a.Dash=12]="Dash",a[a.QuestionMark=13]="QuestionMark",a[a.EOF=14]="EOF";var nb=function(){"use strict";function e(){(0,eP._)(this,e),this.value="",this.pos=0}var t=e.prototype;return t.text=function(e){this.value=e,this.pos=0},t.tokenText=function(e){return this.value.substr(e.pos,e.len)},t.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,i=this.value.charCodeAt(n);if("number"==typeof(t=e._table[i]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(i)){t=8;do r+=1,i=this.value.charCodeAt(n+r);while(e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(i)){t=9;do i=this.value.charCodeAt(n+ ++r);while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}t=10;do r+=1,i=this.value.charCodeAt(n+r);while(!isNaN(i)&&void 0===e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();nb._table=(p={},(0,tf._)(p,36,0),(0,tf._)(p,58,1),(0,tf._)(p,44,2),(0,tf._)(p,123,3),(0,tf._)(p,125,4),(0,tf._)(p,92,5),(0,tf._)(p,47,6),(0,tf._)(p,124,7),(0,tf._)(p,43,11),(0,tf._)(p,45,12),(0,tf._)(p,63,13),p);var nw=function(){"use strict";function e(){(0,eP._)(this,e),this._children=[],function(e,t){t.forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,writable:!0})})}(this,["parent"])}var t=e.prototype;return t.appendChild=function(e){return e instanceof nZ&&this._children[this._children.length-1]instanceof nZ?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},t.replace=function(e,t){var n=e.parent,r=n.children.indexOf(e),i=n.children.slice(0);i.splice.apply(i,[r,1].concat((0,S._)(t))),n._children=i,function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=n,e(c.children,c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(t,n)},t.toString=function(){return this.children.reduce(function(e,t){return e+t.toString()},"")},t.len=function(){return 0},t.match=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.entries(nD)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,_._)(i.value,2),l=a[0],c=a[1];if(this instanceof c&&l in e)return e[l](this)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},(0,nv._)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof nR)return e;e=e.parent}}}]),e}(),nZ=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e){var r;return(0,eP._)(this,n),(r=t.call(this)).value=e,r}var r=n.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return n.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(nw),nx=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(){return(0,eP._)(this,n),t.apply(this,arguments)}return n}(nw),nC=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e){var r;return(0,eP._)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform)?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0},(0,nv._)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof n_?this._children[0]:void 0}}]),n}(nx),n_=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(){var e;return(0,eP._)(this,n),e=t.apply(this,arguments),e.options=[],e}var r=n.prototype;return r.appendChild=function(e){return e instanceof nZ&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map(function(e){return e.value.replace(/\||,|\\/g,"\\$&")}).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(nw),nS=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(){var e;return(0,eP._)(this,n),e=t.apply(this,arguments),e.regexp=RegExp(""),e}var r=n.prototype;return r.resolve=function(e){var t=this,n=!1,r=e.replace(this.regexp,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=!0,t._replace(r.slice(0,-2))});return!n&&this._children.some(function(e){return e instanceof nk&&!!e.elseValue})&&(r=this._replace([])),r},r._replace=function(e){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l instanceof nk){var c=e[l.index]||"";c=l.resolve(c),t+=c}else t+=l.toString()}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map(function(e){return e.toTextmateString()}),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(function(e){return e.clone()}),e},n}(nw),nk=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e,r,i,o){var a;return(0,eP._)(this,n),(a=t.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=n.prototype;return r.resolve=function(e){if("upcase"===this.shorthandName)return e?e.toLocaleUpperCase():"";if("downcase"===this.shorthandName)return e?e.toLocaleLowerCase():"";if("capitalize"===this.shorthandName)return e?e[0].toLocaleUpperCase()+e.substr(1):"";if("pascalcase"===this.shorthandName)return e?this._toPascalCase(e):"";if("camelcase"===this.shorthandName)return e?this._toCamelCase(e):"";if(e&&"string"==typeof this.ifValue)return this.ifValue;if(!e&&"string"==typeof this.elseValue)return this.elseValue;else return e||""},r._toPascalCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},r._toCamelCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(nw),nE=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e){var r;return(0,eP._)(this,n),(r=t.call(this)).name=e,r}var r=n.prototype;return r.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new nZ(t)],!0)},r.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0===this.children.length)?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}")},r.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n}(nx);function nT(e,t){for(var n=(0,S._)(e);n.length>0;){var r=n.shift();if(!t(r))break;n.unshift.apply(n,(0,S._)(r.children))}}var nR=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(){return(0,eP._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.offset=function(e){var t=0,n=!1;return(this.walk(function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)}),n)?t:-1},r.fullLen=function(e){var t=0;return nT([e],function(e){return t+=e.len(),!0}),t},r.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)n instanceof nC&&t.push(n),n=n.parent;return t},r.resolveVariables=function(e){var t=this;return this.walk(function(n){return n instanceof nE&&n.resolve(e)&&delete t._placeholders,!0}),this},r.appendChild=function(e){return delete this._placeholders,(0,ng._)((0,ny._)(n.prototype),"appendChild",this).call(this,e)},r.replace=function(e,t){return delete this._placeholders,(0,ng._)((0,ny._)(n.prototype),"replace",this).call(this,e,t)},r.toTextmateString=function(){return this.children.reduce(function(e,t){return e+t.toTextmateString()},"")},r.clone=function(){var e=new n;return this._children=this.children.map(function(e){return e.clone()}),e},r.walk=function(e){nT(this.children,e)},(0,nv._)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk(function(n){return n instanceof nC&&(t.push(n),e=!e||e.index<n.index?n:e),!0}),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(nw),nI=function(){"use strict";function e(){(0,eP._)(this,e),this._scanner=new nb,this._token={type:14,pos:0,len:0}}var t=e.prototype;return t.text=function(e){return this.parse(e).toString()},t.parse=function(e,t,n){var r=new nR;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!=n&&n,null!=t&&t),r},t.parseFragment=function(e,t){var n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var r=new Map,i=[];t.walk(function(e){return e instanceof nC&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0});var o=function(e,n){var i=r.get(e.index);if(i){var a=new nC(e.index);a.transform=e.transform;var l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value.clone();a.appendChild(f),f instanceof nC&&r.has(f.index)&&!n.has(f.index)&&(n.add(f.index),o(f,n),n.delete(f.index))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}t.replace(e,[a])}},a=new Set,l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;o(f,a)}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return t.children.slice(n)},t.ensureFinalTabstop=function(e,t,n){(t||n&&e.placeholders.length>0)&&!e.placeholders.find(function(e){return 0===e.index})&&e.appendChild(new nC(0))},t._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},t._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},t._until=function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},t._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},t._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new nZ(t)),!0)},t._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new nC(Number(t)):new nE(t)),!0):this._backTo(n)},t._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new nC(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new nZ("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7))for(var i=new n_;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)},t._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new nZ(n.join(""))),!0)},t._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new nE(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new nZ("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)},t._parseTransform=function(e){for(var t=new nS,n="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0)){n+=i=this._accept(6,!0)||i;continue}if(14!==this._token.type){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new nZ(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(14!==this._token.type){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,r)}catch(e){return!1}return e.transform=t,!0},t._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n||this._accept(4))return e.appendChild(new nk(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new nk(Number(r),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new nk(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new nk(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new nk(Number(r),void 0,l,c)),!0}}else{var s=this._until(4);if(s)return e.appendChild(new nk(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1},t._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new nZ(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(t){return new e().parse(t).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),nD={Text:nZ,Placeholder:nC,Variable:nE,FormatString:nk,Choice:n_},nB=function(){"use strict";function e(t){(0,eP._)(this,e),this.lines=t.split(/\r\n?|\n/).map(function(e){return new nI().parse(e).children})}return e.prototype.apply=function(t){var n=t.view,r=t.from,i=t.to,o=e.instantiate(this.lines,t),a=o.text,l=o.ranges,c={from:r,to:i,insert:eN.xv.of(a)},s={changes:c,scrollIntoView:!0,annotations:t$.Jv.of(t.completion)};if(l.length&&(s.selection=nU(l,0)),l.length>1){var u=new nP(l,0),d=s.effects=[nN.of(u)];void 0===n.state.field(nO,!1)&&d.push(eN.Py.appendConfig.of([nO,nX,nF]))}if(r===i&&!l.length){var f=eN.as.of(c,n.state.doc.length),h=n.state.selection.ranges.map(function(e){return e.map(f,0)});s.selection=eN.jT.create(h,n.state.selection.mainIndex)}return s},e.resolveVariable=function(e,t){var n=t.view,r=t.from,i=t.path;switch(e){case"TM_FILENAME":return(0,na.basename)(i);case"TM_FILENAME_BASE":return(0,na.basename)(i,(0,na.extname)(i));case"TM_DIRECTORY":return(0,na.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(t,n){var r=n.view,i=n.from,o=r.state,a=[],l=[],c=o.doc.lineAt(i),s=/^\s*/.exec(c.text)[0],u=o.facet(E.c),d=!0,f=!1,h=void 0;try{for(var p,m,v=t[Symbol.iterator]();!(d=(m=v.next()).done);d=!0)!function(){var t=m.value,r=0,o="",c=function(e){var t=0,n=r;if(0===r&&(t=/^\t*/.exec(e)[0].length)){var i=s+u.repeat(t);e=i+e.slice(t),n+=i.length}return o+=e,r+=e.length,{line:a.length,from:n,to:r}},d=function(t){var o=!0,s=!1,u=void 0;try{for(var f,h=t[Symbol.iterator]();!(o=(f=h.next()).done);o=!0)f.value.match({Text:function(e){c(e.value)},Variable:function(t){var r=t.name,i=t.transform,o=e.resolveVariable(r,n);i&&(o=o.replace(i.regexp,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.children.map(function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})}).filter(Boolean).join("")})),c(o)},Choice:function(e){c(e.options[0].value)},Placeholder:function(e){var t,n=a.length?i+a.map(function(e){return e.length}).reduce(function(e,t){return e+t}):i;if(null===(t=e.children)||void 0===t?void 0:t.length){var o={field:e.index,from:n+r,to:null};l.push(o),d(e.children),o.to=n+r}else{c("");var s=n+r;l.push({field:e.index,from:s,to:s})}}})}catch(e){s=!0,u=e}finally{try{o||null==h.return||h.return()}finally{if(s)throw u}}};d(t),a.push(o)}()}catch(e){f=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}var g=(p=Math).max.apply(p,(0,S._)(l.map(function(e){return e.field})));return{text:a,ranges:l.map(function(e){var t=e.field,n=(0,nm._)(e,["field"]);return(0,C._)((0,x._)({},n),{field:0===t?g:t-1})})}},e}(),nG=eE.p.widget({widget:new(function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(){return(0,eP._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},n}(eE.l9))}),nA=eE.p.mark({class:"cm-snippetField"}),nP=function(){"use strict";function e(t,n){(0,eP._)(this,e),this.ranges=t,this.active=n,this.deco=eE.p.set(t.map(function(e){return(e.from===e.to?nG:nA).range(e.from,e.to)}))}var t=e.prototype;return t.map=function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,s=function(e,t){var n=t.mapPos(e.from,-1,eN.gc.TrackDel),r=t.mapPos(e.to,1,eN.gc.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}(c,t);if(!s)return null;n.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(n,this.active)},t.isSelectionInsideField=function(e){var t=this;return e.ranges.every(function(e){return t.ranges.some(function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to})})},e}(),nN=eN.Py.define({map:function(e,t){return null==e?void 0:e.map(t)}}),nL=eN.Py.define(),nO=eN.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(nN))return l.value;if(l.is(nL)&&e)return new nP(e.ranges,l.value)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return eE.tk.decorations.from(e,function(e){return e?e.deco:eE.p.none})}});function nU(e,t){var n=e.filter(function(e){return e.field===t}).map(function(e){return eN.jT.range(e.from,e.to)});if(0!==n.length)return eN.jT.create(n)}function nM(e){return function(t){var n,r=t.state,i=t.dispatch,o=r.field(nO,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(n=Math).max.apply(n,(0,S._)(o.ranges.map(function(e){return e.field}))),c=e>0&&o.active>=l;return i(r.update({selection:nU(o.ranges,a),effects:nN.of(c?null:new nP(o.ranges,a))})),!0}}var nX=eN.Wl.highest(eE.$f.of([{key:"Tab",run:nM(1),shift:nM(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(nO,!1)&&(n(t.update({effects:nN.of(null)})),!0)}}])),nF=eE.tk.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(nO,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find(function(e){return e.from<=n&&e.to>=n});return!!i&&i.field!==r.active&&(t.dispatch({selection:nU(r.ranges,i.field),effects:nN.of(r.ranges.some(function(e){return e.field>i.field})?new nP(r.ranges,i.field):null)}),!0)}}),nW=n(65377);function nH(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}var nV=eN.r$.define({combine:function(e){return e.some(Boolean)}}),nz=Object.entries(nc.CompletionItemKind).reduce(function(e,t){var n=(0,_._)(t,2),r=n[0],i=n[1];return(0,x._)((0,tf._)({},i,r.toLowerCase()),e)},{});function nj(e,t){return{from:nr(e,t.start),to:nr(e,t.end)}}function nq(e,t){var n=nj(e.state,t.range),r=n.from,i=n.to;if(null!==r&&null!==i)return{from:r,to:i,insert:t.newText}}var nJ=eE.tk.baseTheme({".lsp-completion-keyboard-shortcuts":{display:"none"},'[aria-selected="true"] .lsp-completion-keyboard-shortcuts':{float:"right",display:"inline-block"}}),nY=eE.tk.theme({"& .cm-tooltip-autocomplete":{"& > *":{marginRight:4},"& > *:last-child":{marginRight:0},"& .cm-completionLabel":{flexGrow:1,flexShrink:1,overflowX:"auto",textOverflow:"ellipsis"},"& .cm-completionDetail":{color:nW.TV.foregroundDimmer,fontSize:"85%",marginLeft:"unset"}}}),nK=n(47745);function n$(e){var t=e.content,n=e.className,r=e.showHoveredVariable,i=(0,N.Gn)("fontSize").preferences;if("string"!=typeof t&&"kind"in t)return(0,k.tZ)(np,{content:t});var o=(Array.isArray(t)?t:[t]).map(function(e){return"string"==typeof e?e:"```"+e.language+"\n"+e.value+"\n```"}).join("\n");return(0,k.tZ)(ns.ZP,{css:[{p:{fontSize:i.fontSize}},r?[ea.l0.maxHeight(nQ),ea.l0.overflowY("auto")]:void 0],className:n,components:{code:function(e){return(0,k.tZ)(nu.Z,(0,x._)({minimal:!0,disableCopy:!0},e))}},children:o})}var nQ=100;function n0(e){var t=e.className,n=e.content,r=e.textHovered,i=(0,tX.P5)({controlName:"flag-debugger-hover-variable",logFlagToAnalytics:!1}),o=(0,eD.Z)().debuggest,a=(0,eR.Z)(o.mainClient),l=a&&("running"===a.state.current||"paused"===a.state.current),c=(0,_._)((0,$.useState)(!1),2),s=c[0],u=c[1],d=(0,_._)((0,$.useState)(void 0),2),f=d[0],h=d[1],p=i&&l&&f;return(0,$.useEffect)(function(){function e(){return(e=(0,eJ._)(function(){var e,t;return(0,eY.Jh)(this,function(n){switch(n.label){case 0:if(!(i&&l))return[3,4];u(!0),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,a.evaluate({expression:r,context:"hover"})];case 2:return(null===(e=(t=n.sent()).body)||void 0===e?void 0:e.result)&&h((0,x._)({name:r,value:t.body.result},t.body)),[3,4];case 3:return u(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i,a,l,r]),(0,k.BX)(er.G,{css:[nf,p?ea.l0.maxHeight(nQ+190):ea.l0.maxHeight(190),ea.l0.minHeight(30),ea.l0.overflowY("auto"),ea.l0.borderRadius(4),ea.l0.backgroundColor.backgroundHigher],children:[s?void 0:(0,k.tZ)(n$,{content:n,className:t,showHoveredVariable:!!p}),p?(0,k.tZ)(er.G,{css:[ea.l0.maxHeight(190),ea.l0.overflowY("auto")],children:(0,k.tZ)(nK._,{depth:0,client:a,variable:f})}):void 0]})}var n1=n(36101),n2=n(23508),n3=n(92370),n4=n(10874),n8=n(86486),n6=n(82587),n5=n(38e3),n9=n(2498),n7=n(19653),re=n(64318),rt=n(29318),rn=n(30124),rr=(0,ed.X)({snippetGroupText:[ea.l0.pl(8),ea.l0.py(8)],snippetGroupContainer:[ea.l0.p(4)],loadingContainer:[ea.l0.width(128),ea.l0.height(128),ea.l0.display.flex,ea.l0.align.center,ea.l0.justify.center],lspTooltipContainer:[ea.l0.minWidth("375px"),ea.l0.maxWidth("500px"),ea.l0.pt(4),ea.l0.overflowY("scroll")],firstReferenceDivider:[ea.l0.border({direction:"bottom",color:ea.TV.backgroundHighest})],headerGroup:[ea.l0.p(4)],headerContainer:[ea.l0.flex.row,ea.l0.justify.spaceBetween,ea.l0.align.center,ea.l0.pr(4)],header:[ea.l0.p(4),ea.l0.pl(8)],referencesGroups:[ea.l0.p(4)],referencesHeader:[ea.l0.p(4),ea.l0.pl(8)]});function ri(e){var t=e.matchesMap,n=e.fileToContents,r=e.type,i=e.onClose,o=e.jumpToPosition,a=Object.keys(t);return 0===a.length?(0,k.tZ)(t3.xv,{color:"dimmer",css:rr.snippetGroupText,multiline:!1,children:"REFERENCES"===r?"No references found":"No definitions found"}):(0,k.tZ)(er.G,{children:a.map(function(e){var r=t[e],l=n[e],c=(0,n9.Z)(r,l);return(0,k.tZ)(er.G,{css:rr.snippetGroupContainer,children:(0,k.tZ)(n5.V,{path:e,extensions:[c],doc:l,numMatches:r.length,initiallyExpanded:1===a.length,onNavigateToCode:function(t){if(null!==t)o({path:e,line:t.line+1,col:t.character});else{var n=(0,_._)(r,1)[0],a=l.lineAt(n.from),c=n.from-a.from;o({path:e,line:a.number,col:c})}i()}})},e)})})}function ro(e){var t=e.files,n=e.onClose,r=e.references,i=e.definitions,o=e.currentFile,a=e.currentFileContents,l=e.jumpToPosition,c=(0,eD.Z)().fs,s=(0,e4.Z)(o)[0],u=(0,n7.Z)(n,[]),d=(0,_._)((0,$.useState)((0,tf._)({},o,eN.xv.of(a.split("\n")))),2),f=d[0],h=d[1];(0,$.useEffect)(function(){if(t.length){var e=!1;return!function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,eJ._)(function(){var n;return(0,eY.Jh)(this,function(r){switch(r.label){case 0:var i;return n={},[4,Promise.all(t.map((i=(0,eJ._)(function(e){var t;return(0,eY.Jh)(this,function(r){switch(r.label){case 0:return[4,c.readFile(e)];case 1:if((t=r.sent()).error)throw Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(t.error));return n[e]=eN.xv.of(t.content.toString().split("\n")),[2]}})}),function(e){return i.apply(this,arguments)})))];case 1:if(r.sent(),e)return[2];return h(function(e){return(0,x._)({},e,n)}),[2]}})})).apply(this,arguments)}},[c,t]);var p=(0,S._)(r).concat((0,S._)(i));if(!s||p.some(function(e){return!(s.documentUriToPath(e.uri) in f)}))return(0,k.tZ)(er.G,{css:rr.loadingContainer,children:(0,k.tZ)(rt.Z,{size:32})});var m={},v={};function g(e,t){if(!s)throw Error("Expected LSP Client");var n=s.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;n in t||(t[n]=[]);var a=f[n],l=a.line(i.line+1),c=a.line(o.line+1);t[n].push({from:l.from+i.character,to:c.from+o.character})}return r.forEach(function(e){g(e,m)}),i.forEach(function(e){g(e,v)}),(0,k.BX)(er.G,{innerRef:u,css:rr.lspTooltipContainer,children:[(0,k.tZ)(er.G,{css:rr.firstReferenceDivider,children:(0,k.BX)(er.G,{css:rr.headerGroup,children:[(0,k.BX)(er.G,{css:rr.headerContainer,children:[(0,k.tZ)(t3.h4,{level:2,variant:"subheadDefault",css:rr.header,children:"Definitions"}),(0,k.tZ)(rn.Z,{filled:!1,border:!1,onClick:n,children:(0,k.tZ)(re.Z,{})})]}),(0,k.tZ)(ri,{matchesMap:v,fileToContents:f,type:"DEFINITION",onClose:n,currentFile:o,jumpToPosition:l})]})}),(0,k.tZ)(er.G,{children:(0,k.BX)(er.G,{css:rr.referencesGroups,children:[(0,k.tZ)(t3.h4,{level:2,variant:"subheadDefault",css:rr.referencesHeader,children:"References"}),(0,k.tZ)(ri,{matchesMap:m,fileToContents:f,type:"REFERENCES",onClose:n,currentFile:o,jumpToPosition:l})]})})]})}(l=m||(m={})).DEFINITION="DEFINITION",l.REFERENCES="REFERENCES";var ra=n(42433),rl=n(32472),rc=(0,n(4495).B)(),rs=eN.Py.define(),ru=eN.QQ.define({create:function(){return null},update:function(e,t){if(t.isUserEvent("select")||t.isUserEvent("undo")||t.isUserEvent("redo"))return null;if(!t.isUserEvent("input.type")||t.changes.empty)return e;var n="";return t.changes.iterChanges(function(e,t,r,i,o){n=o.sliceString(0,1)}),n||null}}),rd=new t1.J(function(e){var t,n,r=e.help,i=e.index,o="1px solid ".concat(ea.TV.outlineDimmer),a="min(425px, 80vw)",l=r.signatures[i],c=r.signatures.length>1;if(!l)return null;var s=l.documentation,u=null!=r.activeParameter&&(null===(n=l.parameters)||void 0===n?void 0:null===(t=n[r.activeParameter])||void 0===t?void 0:t.documentation);return(0,k.BX)(er.G,{css:[ea.l0.flex.row,ea.l0.backgroundColor.backgroundHigher,{width:"max-content"}],children:[c?(0,k.tZ)(er.G,{css:[ea.l0.flex.row,ea.l0.pl(4),{borderRight:o,paddingBottom:5}],children:(0,k.BX)("span",{css:[{alignSelf:"flex-end"},ea.l0.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,k.BX)(er.G,{children:[(0,k.tZ)(er.G,{css:[ea.l0.py(4),ea.l0.pl(c?4:8),ea.l0.pr(8),ea.l0.maxHeight(100),ea.l0.overflowY("scroll"),ea.l0.font.code,{lineHeight:ea.TV.lineHeightSmall,maxWidth:a}],children:(0,k.tZ)(rf,{signature:l,activeParameter:r.activeParameter})}),!!(s||u)&&(0,k.BX)(er.G,{css:[ea.l0.px(c?4:8),ea.l0.py(2),ea.l0.maxHeight(200),ea.l0.overflow("scroll"),{borderTop:o,maxWidth:a}],children:[u?(0,k.tZ)(np,{content:u}):null,s?(0,k.tZ)(np,{content:s}):null]})]})]})});function rf(e){var t,n=e.signature,r=n.label,i=n.parameters,o=e.activeParameter;if(null==o||!i)return(0,k.tZ)("span",{children:r});var a=null===(t=i[o])||void 0===t?void 0:t.label;if(!a)return(0,k.tZ)("span",{children:r});var l=(0,_._)("string"==typeof a?[r.indexOf(a),r.indexOf(a)+a.length]:a,2),c=l[0],s=l[1];return(0,k.BX)("div",{children:[(0,k.tZ)("span",{children:r.slice(0,c)}),(0,k.tZ)("strong",{children:a}),(0,k.tZ)("span",{children:r.slice(s)})]})}function rh(){return(rh=(0,eJ._)(function(e,t,n,r,i){return(0,eY.Jh)(this,function(o){switch(o.label){case 0:var a;return[4,Promise.all(n.map((a=(0,eJ._)(function(n){var o,a;return(0,eY.Jh)(this,function(l){return(o=i.current.get(n.clientId))&&n.notify.cancelRequest(o),a=n.generateId(),i.current.set(n.clientId,a),[2,n.request.signatureHelp(r,(0,eQ.sg)(e.doc,t),{id:a}).then(function(e){return(i.current.get(n.clientId)===a&&i.current.set(n.clientId,null),"error"in e)?null:e.result})]})}),function(e){return a.apply(this,arguments)})))];case 1:return[2,o.sent().find(function(e){return null!==e&&e.signatures.length})]}})})).apply(this,arguments)}var rp=n(47703),rm=n(92674),rv=n.n(rm),rg=new Map,ry=n(32661),rb=n(22488),rw=n(19127),rZ=n(8252),rx=n(41691),rC=n(22712),r_={namespace:rx.pJ.namespace,type:rx.pJ.typeName,class:rx.pJ.className,enum:rx.pJ.typeName,interface:rx.pJ.typeName,struct:rx.pJ.typeName,typeParameter:rx.pJ.typeName,parameter:rx.pJ.variableName,variable:rx.pJ.variableName,property:rx.pJ.propertyName,enumMember:rx.pJ.propertyName,event:rx.pJ.typeName,function:rx.pJ.function(rx.pJ.variableName),method:rx.pJ.function(rx.pJ.propertyName),macro:rx.pJ.macroName,keyword:rx.pJ.keyword,modifier:rx.pJ.modifier,comment:rx.pJ.comment,string:rx.pJ.string,number:rx.pJ.number,regexp:rx.pJ.regexp,operator:rx.pJ.operator,decorator:rx.pJ.function(rx.pJ.annotation),angle:null,arithmetic:rx.pJ.arithmeticOperator,attribute:rx.pJ.attributeName,attributeBracket:rx.pJ.bracket,bitwise:rx.pJ.bitwiseOperator,boolean:rx.pJ.bool,brace:rx.pJ.brace,bracket:rx.pJ.bracket,builtinAttribute:rx.pJ.standard(rx.pJ.attributeName),builtinType:rx.pJ.standard(rx.pJ.typeName),character:rx.pJ.character,colon:rx.pJ.punctuation,comma:rx.pJ.separator,comparison:rx.pJ.compareOperator,constParameter:rx.pJ.constant(rx.pJ.variableName),derive:rx.pJ.function(rx.pJ.annotation),deriveHelper:rx.pJ.function(rx.pJ.annotation),dot:rx.pJ.derefOperator,escapeSequence:rx.pJ.escape,invalidEscapeSequence:rx.pJ.invalid,formatSpecifier:rx.pJ.processingInstruction,generic:rx.pJ.typeName,label:rx.pJ.labelName,lifetime:rx.pJ.special(rx.pJ.variableName),logical:rx.pJ.logicOperator,macroBang:rx.pJ.macroName,parenthesis:rx.pJ.paren,punctuation:rx.pJ.punctuation,selfKeyword:rx.pJ.self,selfTypeKeyword:rx.pJ.self,semicolon:rx.pJ.separator,typeAlias:rx.pJ.typeName,toolModule:rx.pJ.namespace,union:null,unresolvedReference:null,tomlArrayKey:rx.pJ.propertyName,tomlTableKey:rx.pJ.className},rS={declaration:rx.pJ.definition,definition:rx.pJ.definition,readonly:rx.pJ.constant,static:rx.pJ.constant,deprecated:null,abstract:null,async:rx.pJ.special,modification:function(e){return e===rx.pJ.keyword?rx.pJ.modifier:null},documentation:function(e){return e===rx.pJ.comment?rx.pJ.docComment:e===rx.pJ.string?rx.pJ.docString:null},defaultLibrary:rx.pJ.standard,attribute:null,callable:rx.pJ.function,constant:rx.pJ.constant,consuming:null,controlFlow:function(e){return e===rx.pJ.keyword?rx.pJ.controlKeyword:e===rx.pJ.operator?rx.pJ.controlOperator:null},crateRoot:null,injected:null,intraDocLink:function(){return rx.pJ.url},library:null,macro:null,mutable:null,public:null,reference:null,trait:null,unsafe:null},rk=new Set([rx.pJ.comment,rx.pJ.string,rx.pJ.number,rx.pJ.keyword,rx.pJ.operator]),rE=new Map;function rT(){return(rT=(0,eJ._)(function(e){var t,n,r,i,o,a,l,c,s,u,d;return(0,eY.Jh)(this,function(f){switch(f.label){case 0:if(t=e.client,n=e.path,r=e.previous,i=e.doc,o=e.signal,a=(0,e2.Z)(t),r&&a.isSemanticTokensDeltaSupported)l=t.semanticTokensDelta(n,r,{signal:o});else if(a.isSemanticTokensFullSupported)l=t.semanticTokensFull(n,{signal:o});else{if(!i||!a.isSemanticTokensRangeSupported)return[2,null];c=(0,eQ.sg)(i,0),s=(0,eQ.sg)(i,i.length),l=t.semanticTokensRange(n,{start:c,end:s},{signal:o})}return[4,l];case 1:if((u=f.sent())&&"error"in u&&-32802===u.error.code)return[2,!1];if(!u||u.cancelled||!(d="result"in u&&!u.cancelled?u.result:null))return[2,null];return[2,d]}})})).apply(this,arguments)}var rR=function(){"use strict";function e(t,n){(0,eP._)(this,e),this.data=t,this.id=n}var t=e.prototype;return t.reset=function(){this.data=[],this.id=null},t.update=function(e){if(!e){this.reset();return}if("edits"in e&&this.id){var t,n,r=e.edits.slice().sort(function(e,t){return t.start-e.start}),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s,u,d=l.value;(null===(s=d.data)||void 0===s?void 0:s.length)?(u=this.data).splice.apply(u,[d.start,d.deleteCount].concat((0,S._)(d.data))):this.data.splice(d.start,d.deleteCount)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this.id=null!==(n=e.resultId)&&void 0!==n?n:null}else if("data"in e)this.data=e.data,this.id=null!==(t=e.resultId)&&void 0!==t?t:null;else throw Error("Invalid semantic tokens response")},t.decorations=function(e,t){for(var n=t.doc,r=new eN.f_,i=0,o=0,a=0;a<this.data.length;a+=5){var l=this.data[a],c=this.data[a+1],s=this.data[a+2],u=this.data[a+3],d=this.data[a+4];i+=l,o=l>0?c:o+c;var f=function(e,t,n){var r=(0,rC.uH)(e,t);if(null===r)return null;var i=r_[r];if(!i)return null;var o=(0,rC.ib)(e,n),a="".concat(r,":").concat(o.join(",")),l=rE.get(a);if(void 0!==l)return l;var c=o.map(function(e){if(void 0===rS[e])return null;var t=rS[e];return null===t?null:t}).filter(Boolean),s=!0,u=!1,d=void 0;try{for(var f,h=c[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=(0,f.value)(i);p&&(i=p)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return i&&rk.has(i)&&(i=null),rE.set(a,i),i}(e,u,d);if(f){var h=(0,E.QN)(t,[f]);if(h){var p=(0,eQ.RL)(n,{line:i,character:o}),m=(0,eQ.RL)(n,{line:i,character:o+s}),v=eE.p.mark({class:h});r.add(p,m,v)}}}return r.finish()},e}(),rI=["typescript"],rD=function(){"use strict";function e(t,n){var r=this;(0,eP._)(this,e),this.view=t,this.client=n,this.data=new rR([],null),this.controller=null,this.disposables=[],this.pending=!1,this.running=!1,this.changes=null,this.decorations=eE.p.none,this.proneToDesync=rI.some(function(e){return n.clientId.includes(e)}),this.disposables.push(n.onSemanticTokensRefresh(function(){return r.refresh()}),n.onServerCapabilitiesChange(function(){return r.refresh()}));var i=t.state.facet(tq.Yp);if(i){if(n.isOpen(i))this.run();else{var o=setTimeout(function(){n.isOpen(i)&&r.run()},500);this.disposables.push(function(){return clearTimeout(o)})}}}var t=e.prototype;return t.abort=function(){var e;this.pending=!1,null===(e=this.controller)||void 0===e||e.abort()},t.refresh=function(){this.abort(),this.data.reset(),this.run()},t.run=function(){if(this.pending=!0,!this.running){this.running=!0;var e=this;(0,eJ._)(function(){var t;return(0,eY.Jh)(this,function(n){switch(n.label){case 0:t=function(){var t,n,r,i,o,a,l,c,s,u,d;return(0,eY.Jh)(this,function(f){switch(f.label){case 0:t=Date.now(),f.label=1;case 1:if(f.trys.push([1,3,,4]),e.pending=!1,e.changes=null,o=(i=e.view.state).facet(tq.Yp),a=null===(r=e.client.getServerCapabilities())||void 0===r?void 0:null===(n=r.semanticTokensProvider)||void 0===n?void 0:n.legend,c=(l=(0,e2.Z)(e.client)).isSemanticTokensFullSupported||l.isSemanticTokensRangeSupported,!o||!a||!c||!e.client.isOpen(o))return e.data.reset(),e.decorations.size>0&&(e.decorations=eE.p.none,e.view.dispatch()),[2,"continue"];return e.controller=new AbortController,[4,function(e){return rT.apply(this,arguments)}({client:e.client,path:o,previous:e.data.id,doc:i.doc,signal:e.controller.signal})];case 2:return!1===(s=f.sent())?e.pending=!0:e.controller.signal.aborted||(e.data.update(s),e.decorations=e.changes?e.data.decorations(a,i).map(e.changes):e.data.decorations(a,i),e.view.dispatch()),[3,4];case 3:return u=f.sent(),(0,eE.OO)(e.view.state,u),e.data.reset(),e.decorations=eE.p.none,e.changes=null,[3,4];case 4:if(e.controller=null,d=Date.now()-t,!(e.pending&&d<150))return[3,6];return[4,new Promise(function(e){return setTimeout(e,150-d)})];case 5:f.sent(),f.label=6;case 6:return[2]}})},n.label=1;case 1:if(!e.pending)return[3,3];return[5,(0,eY.XA)(t())];case 2:return n.sent(),[3,1];case 3:return e.running=!1,e.changes=null,[2]}})})()}},t.update=function(e){e.docChanged&&this.decorations.size&&(this.decorations=this.decorations.map(e.changes))},t.postUpdate=function(e){(0,eL.aU)(e,tq.Yp)?this.refresh():e.docChanged&&(this.running&&(this.changes=this.changes?this.changes.composeDesc(e.changes):e.changes),this.proneToDesync&&this.abort(),this.run())},t.destroy=function(){this.abort(),this.data.reset();var e=!0,t=!1,n=void 0;try{for(var r,i=this.disposables[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.disposables=[]},e}(),rB=new eT.j(function(e){if(!e||!e.length)return null;var t=e.map(function(e){return eE.lg.define(function(t){return new rD(t,e)},{decorations:function(e){return e.decorations},provide:function(e){return eE.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})}})});return eN.Wl.highest(t)}),rG=new eT.j(function(e){return nV.of(e)}),rA=n(6755),rP=eE.tk.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:nW.TV.backgroundDefault,borderLeft:"1px solid ".concat(nW.TV.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),rN=eN.QQ.define({create:function(e){return 0===e.doc.length||e.doc.lines>1e3},update:function(e,t){return t.docChanged?0===t.state.doc.length||t.state.doc.lines>1e3:e}}),rL=new eT.j(function(e,t,n){var r=function(){return{dom:document.createElement("div")}};return e?null:[rP,rN,rA.a.compute([tB,rN],function(e){if(e.field(rN,!1)||"blocks"!==t&&"characters"!==t)return null;var i=e.field(tB,!1),o={};if(i)for(var a=1;a<=e.doc.lines;a++)switch(i.getLineChangeType(a)){case tR.dQ.COVERED:o[a]=n.values.global.greenDefault;break;case tR.dQ.MODIFIED:o[a]=n.values.global.blueDefault}return{create:r,displayText:t,gutters:[o]}})]}),rO=n(74509),rU=n(85234),rM=n.n(rU),rX=n(51561),rF=eN.r$.define({combine:function(e){var t;return null!==(t=e.find(function(e){return null!==e}))&&void 0!==t?t:null}}),rW=eN.r$.define({combine:function(e){return rV(e)}}),rH=eN.r$.define({combine:function(e){return rV(e)}});function rV(e){var t=[];return e.forEach(function(e){return e?t.push(e):void 0}),t}var rz=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e){var r;return(0,eP._)(this,n),(r=t.call(this)).diagnostic=e,r}return n.prototype.eq=function(e){return e instanceof n&&this.severityValue===e.severityValue},(0,nv._)(n,[{key:"severityValue",get:function(){switch(this.diagnostic.severity){case"error":return 3;case"warning":return 2;case"info":return 1;default:return 0}}},{key:"severityColor",get:function(){switch(this.diagnostic.severity){case"error":return"#d11";case"warning":return"orange";case"info":return"#999";default:return"#66d"}}}]),n}(eN.uU);function rj(e){var t=new eN.f_;return(0,T.c1)(e,function(e,n,r){t.add(n,r,new rz(e))}),t.finish()}var rq=eN.QQ.define({create:function(e){return rj(e)},update:function(e,t){return(0,eL.aU)(t,T.lC)?rj(t.state):e.map(t.changes)},provide:function(e){return rW.compute([e],function(t){for(var n=new Map,r=t.field(e).iter();r.value;){for(var i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to),a=i.number;a<=o.number;){var l,c=null===(l=n.get(a))||void 0===l?void 0:l.severityValue;(!c||c<r.value.severityValue)&&n.set(a,r.value),a++}r.next()}return Array.from(n.entries()).map(function(e){var t=(0,_._)(e,2),n=t[0],r=t[1];return{color:r.severityColor,number:n,zIndex:r.severityValue}})})}}),rJ="cm-with-scrollbar",rY="cm-scrollbar-gutter",rK="cm-scrollbar-inner",r$="cm-scrollbar-overlay-container",rQ="cm-scrollbar-overlay",r0="cm-scrollbar-overlay-invisible",r1="cm-scrollbar-overlay-active",r2=eE.tk.theme((y={"&":{height:"100%",overflowY:"auto"}},(0,tf._)(y,"& .".concat(rY),{borderRight:0,boxSizing:"border-box",display:"flex",flexShrink:0,height:"100%",insetInlineStart:0,left:"unset",position:"sticky",right:0,top:0,width:"".concat(15,"px"),zIndex:200}),(0,tf._)(y,"& .".concat(rK),{height:"100%",position:"absolute",right:0,top:0,overflowY:"hidden",borderLeft:"1px solid",borderLeftColor:"inherit"}),(0,tf._)(y,"& .".concat(rK," > canvas"),{display:"block",height:"100%",width:"".concat(14,"px"),opacity:.6}),(0,tf._)(y,".".concat(r$),(g={position:"absolute",top:0,height:"100%",width:"100%"},(0,tf._)(g,"& .".concat(rQ),(v={background:"rgb(121, 121, 121)",opacity:"0.2",position:"absolute",right:0,top:0,width:"100%",transition:"top 0s ease-in 0ms"},(0,tf._)(v,"&:hover",{opacity:"0.3"}),(0,tf._)(v,"&.".concat(r0),{pointerEvents:"none",opacity:0}),v)),(0,tf._)(g,"& .".concat(r1),(0,tf._)({opacity:1,visibility:"visible",transition:"visibility 0s linear 0ms, opacity 300ms"},"& .".concat(rQ),{opacity:"0.4"})),g)),(0,tf._)(y,"&.".concat(rJ," .cm-scroller::-webkit-scrollbar"),{width:0}),(0,tf._)(y,"&.".concat(rJ," .cm-scroller"),{scrollbarWidth:"none"}),y)),r3=function(){"use strict";function e(t){(0,eP._)(this,e),this.dragInfo=null,this.view=t,this.container=document.createElement("div"),this.container.classList.add(r$),this.container.role="presentation",this.container.ariaHidden="true",this.handle=document.createElement("div"),this.handle.classList.add(rQ),this.container.appendChild(this.handle);var n=t.dom.querySelector(".".concat(rK));n&&n.appendChild(this.container),this.observer=new ResizeObserver(this.resizeHandle.bind(this)),this.observer.observe(t.dom),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this))}var t=e.prototype;return t.resizeHandle=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".resizeHandle"),read:function(){return{ratio:Math.min(1,e.view.scrollDOM.clientHeight/e.view.contentHeight)}},write:function(t){var n=t.ratio;e.handle.style.height="".concat(100*n,"%"),1===n?e.handle.classList.add(r0):e.handle.classList.remove(r0)}})},t.updateHandlePosition=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".onScroll"),read:function(){return{scrollTop:e.view.scrollDOM.scrollTop/e.view.contentHeight*e.view.scrollDOM.clientHeight}},write:function(t){var n=t.scrollTop;e.handle.style.top="".concat(n,"px")}})},t.onMouseDown=function(e){var t=this;if(2!==e.button){if(e.preventDefault(),e.target===this.handle){this.dragInfo={dragStartY:e.clientY},this.container.classList.add(r1);return}this.view.requestMeasure({key:"".concat(this,".onMouseDown"),read:function(){var n=t.view.scrollDOM.clientHeight,r=t.view.contentHeight;return{scrollTop:Math.max(0,e.clientY-e.target.getBoundingClientRect().top-n/r*n/2)/n*r}},write:function(e){var n=e.scrollTop;t.view.scrollDOM.scrollTop=n}})}},t.onMouseUp=function(){this.dragInfo&&(this.dragInfo=null,this.container.classList.remove(r1))},t.onMouseMove=function(e){if(this.dragInfo){e.preventDefault();var t=e.clientY-this.dragInfo.dragStartY;this.view.scrollDOM.scrollTop=this.view.scrollDOM.scrollTop+t/this.view.dom.clientHeight*this.view.contentHeight,this.view.scrollDOM.scrollTop>0&&Math.round(this.view.scrollDOM.scrollTop)<Math.round(this.view.contentHeight-this.view.dom.clientHeight)&&(this.dragInfo={dragStartY:e.clientY}),this.updateHandlePosition()}},t.update=function(e){(e.docChanged||e.geometryChanged)&&(this.resizeHandle(),this.updateHandlePosition())},t.destroy=function(){this.container.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),this.container.remove(),this.observer.disconnect()},e}(),r4=function(){"use strict";function e(t){(0,eP._)(this,e),this.view=t;var n=t.state.facet(rF);if(!n)throw Error("expected config");this.dom=n.create(t).dom,this.dom.classList.add(rY);var r=document.createElement("div");r.classList.add(rK);var i=document.createElement("canvas");i.ariaHidden="true",this.context=i.getContext("2d"),r.appendChild(i),this.dom.appendChild(r),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling),this.update()}var t=e.prototype;return t.shouldRedraw=function(e,t){return!!(!e||!t||(0,eL.aU)(e,"doc","selection","focus",rH,rW,E.SW,E.xP))||this.view.contentHeight!==this.previousContentHeight||2*t.scrollClientHeight!==this.previousCanvasHeight},t.update=function(e){var t=this;this.view.requestMeasure({key:this,read:function(){return{scrollClientHeight:t.view.scrollDOM.clientHeight}},write:function(n){var r=n.scrollClientHeight;if(t.context&&t.shouldRedraw(e,{scrollClientHeight:r})){t.previousContentHeight=t.view.contentHeight,t.context.canvas.width=28,t.context.canvas.height=2*r,t.previousCanvasHeight=t.context.canvas.height,t.context&&t.context.clearRect(0,0,t.context.canvas.width,t.context.canvas.height);var i=t.view.state.facet(rH),o=t.view.state.facet(rW),a=new Map,l=!0,c=!1,s=void 0;try{for(var u,d=o.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f,h=(0,_._)(u.value,2),p=h[0],m=h[1],v=p%3,g=void 0,y=void 0,b=!0,w=!1,Z=void 0;try{for(var x,C=m[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var S,k=x.value;if(void 0===g||void 0===y){g=k,y=k;continue}if(y.number+1===k.number&&y.color===k.color&&y.zIndex===k.zIndex){y=k;continue}a.set(v,(null!==(S=a.get(v))&&void 0!==S?S:[]).concat([[g,y]])),g=k,y=k}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}g&&y&&a.set(v,(null!==(f=a.get(v))&&void 0!==f?f:[]).concat([[g,y]]))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}var T=!0,R=!1,I=void 0;try{for(var D,B=a.entries()[Symbol.iterator]();!(T=(D=B.next()).done);T=!0)!function(){var e=(0,_._)(D.value,2),n=e[0],i=e[1].sort(function(e,t){var n,r,i=(0,_._)(e,1)[0],o=(0,_._)(t,1)[0];return(null!==(n=i.zIndex)&&void 0!==n?n:0)-(null!==(r=o.zIndex)&&void 0!==r?r:0)}),o=!0,a=!1,l=void 0;try{for(var c,s=i[Symbol.iterator]();!(o=(c=s.next()).done);o=!0)!function(){var e=(0,_._)(c.value,2),i=e[0],o=i.color,a=i.number,l=e[1].number,s=t.view.state.doc.line(a),u=t.view.state.doc.line(l),d=1/0,f=-1/0;if((0,E.q2)(t.view.state).between(s.from,u.to,function(e,t){d>e&&(d=e),f<t&&(f=t)}),d<f){var h=t.view.state.doc.lineAt(d);h.number<=s.number&&(s=h),t.view.state.doc.lineAt(f).number>=u.number&&(u=h)}var p=s.number,m=u.number,v=!0,g=!1,y=void 0;try{for(var b,w=t.view.state.field(r5)[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var Z=(0,_._)(b.value,2),x=Z[0],C=Z[1];x[0].number<s.number&&(p-=C),x[1].number<u.number&&(m-=C)}}catch(e){g=!0,y=e}finally{try{v||null==w.return||w.return()}finally{if(g)throw y}}t.drawRange({scrollClientHeight:r,color:o,from:p,to:m,lane:n})}()}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}()}catch(e){R=!0,I=e}finally{try{T||null==B.return||B.return()}finally{if(R)throw I}}var G=!0,A=!1,P=void 0;try{for(var N,L=i[Symbol.iterator]();!(G=(N=L.next()).done);G=!0){var O=N.value,U=!0,M=!1,X=void 0;try{for(var F,W=O[Symbol.iterator]();!(U=(F=W.next()).done);U=!0){var H=F.value,V=H.color,z=H.number,j=z,q=!0,J=!1,Y=void 0;try{for(var K,$=t.view.state.field(r5)[Symbol.iterator]();!(q=(K=$.next()).done);q=!0){var Q=(0,_._)(K.value,2),ee=(0,_._)(Q[0],1)[0],et=Q[1];ee.number<z&&(j-=et)}}catch(e){J=!0,Y=e}finally{try{q||null==$.return||$.return()}finally{if(J)throw Y}}t.drawRange({scrollClientHeight:r,color:V,from:j})}}catch(e){M=!0,X=e}finally{try{U||null==W.return||W.return()}finally{if(M)throw X}}}}catch(e){A=!0,P=e}finally{try{G||null==L.return||L.return()}finally{if(A)throw P}}}}})},t.destroy=function(){this.dom.remove()},t.drawRange=function(e){if(this.context){var t,n=(this.view.documentPadding.top+this.view.defaultLineHeight*(e.from-1))/this.view.contentHeight*e.scrollClientHeight,r=2;e.to&&(r=(this.view.documentPadding.top+this.view.defaultLineHeight*e.to)/this.view.contentHeight*e.scrollClientHeight-n)<4&&(n-=(4-r)/2,r=4),this.context.fillStyle=e.color,this.context.beginPath(),this.context.fillRect(9.333333333333334*(null!==(t=e.lane)&&void 0!==t?t:0),2*n,28/(void 0===e.lane?1:3),2*r)}},e}();function r8(e){for(var t=[],n=(0,E.q2)(e).iter();n.value;){var r=t[t.length-1];if(!r||r[0][1].to<n.to){var i=e.doc.lineAt(n.from),o=e.doc.lineAt(n.to);t.push([[i,o],o.number-i.number])}n.next()}return t}function r6(e){return null!==e.facet(rF)}var r5=eN.QQ.define({create:function(e){return r6(e)?r8(e):[]},update:function(e,t){return r6(t.state)&&(0,eL.aU)(t,"doc",E.iQ,r6)?r8(t.state):e}}),r9=eN.r$.define({combine:function(e){var t;return null!==(t=e.find(function(e){return null!==e}))&&void 0!==t?t:null},enables:function(e){return[rF.compute([e],function(t){return t.facet(e)}),r2,[r5,(0,eL.Zc)(function(e){return new r4(e)},{isEnabled:function(e){return null!==e.facet(rF)},provide:function(){return eE.tk.editorAttributes.of(function(e){return null!==e.state.facet(rF)?{class:rJ}:null})}})],(0,eL.Zc)(function(e){return new r3(e)},{isEnabled:function(e){return null!==e.facet(rF)},eventObservers:{scroll:function(){var e;null===(e=this.plugin())||void 0===e||e.updateHandlePosition()}}})]}}),r7="cm-multiplayer-selection-green",ie="cm-multiplayer-selection-red",it="cm-multiplayer-selection-blue",ir="cm-multiplayer-selection-gold",ii="cm-multiplayer-selection-purple",io="cm-multiplayer-selection-teal",ia="cm-multiplayer-selection-pink",il=eE.tk.theme((b={},(0,tf._)(b,".".concat(r7),{background:"rgba(27, 196, 125, 0.2)"}),(0,tf._)(b,".".concat(ie),{background:"rgba(239, 85, 51, 0.2)"}),(0,tf._)(b,".".concat(it),{background:"rgba(24, 160, 251, 0.2)"}),(0,tf._)(b,".".concat(ir),{background:"rgba(255, 199, 0, 1)"}),(0,tf._)(b,".".concat(ii),{background:"rgba(144, 124, 255, 0.2)"}),(0,tf._)(b,".".concat(io),{background:"rgba(0, 181, 206, 0.2)"}),(0,tf._)(b,".".concat(ia),{background:"rgba(238, 70, 211, 0.2)"}),b)),ic={"#1BC47D":r7,"#EF5533":ie,"#18A0FB":it,"#FFC700":ir,"#907CFF":ii,"#00B5CE":io,"#EE46D3":ia},is=eN.Py.define(),iu=eN.Py.define(),id=eN.Py.define(),ih=eN.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n=function(e){return t.changes.mapPos(Math.min(t.changes.length,e))},r={},i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(e)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r[s.id]=(0,C._)((0,x._)({},s),{position:n(s.position),selectionStart:n(s.selectionStart),selectionEnd:n(s.selectionEnd)})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}e=r}var u=!0,d=!1,f=void 0;try{for(var h,p=t.effects[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;if(m.is(rX.R)&&(e=(0,x._)({},e)),m.is(is)&&m.value.position<=t.newDoc.length&&((e=(0,x._)({},e))[m.value.id]=(0,x._)({},m.value)),m.is(iu)&&(e=(0,x._)({},e),m.is(iu)&&delete e[m.value]),m.is(id)){e=(0,x._)({},e);var v=!0,g=!1,y=void 0;try{for(var b,w=Object.entries(e)[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var Z=(0,_._)(b.value,2),S=Z[0];Z[1].username===m.value&&delete e[S]}}catch(e){g=!0,y=e}finally{try{v||null==w.return||w.return()}finally{if(g)throw y}}}}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}return e},provide:function(e){return[il,eN.Wl.high((0,eE.EY)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(t){return(0,eL.aU)(t,e)},markers:function(t){var n=t.state.field(e,!1);if(!n)return[];var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(n)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=s.selectionStart,d=s.selectionEnd,f=s.color.selection;if(u!==d){var h=eN.jT.range(u,d);r.push.apply(r,(0,S._)(eE.dc.forRange(t,f,h)))}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r}})),rH.compute([e],function(t){var n=t.field(e,!1);return n?Object.entries(n).map(function(e){var n=(0,_._)(e,2),r=(n[0],n[1]);return{color:r.color.cursor,number:t.doc.lineAt(r.selectionStart).number}}):[]})]}}),ip=eE.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:ea.TV.shadow1,borderRadius:ea.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function im(e){e.style.transform="translate(-10000px, -10000px)"}var iv=/iPhone|iPad|iPod/i;function ig(){return!!window.navigator.userAgent.match(iv)||"ontouchstart"in window&&window.navigator.userAgent.includes("Macintosh")}function iy(e){var t=document.createElement("div");t.textContent=e.username,t.style.backgroundColor=e.color.cursor,t.classList.add("multiplayer-label");var n=document.createElement("div");return n.classList.add("multiplayer-cursor"),n.style.backgroundColor=e.color.cursor,n.style.position=ig()?"absolute":"fixed",n.appendChild(t),{dom:n,label:t}}var ib=new Map,iw=[ip,eE.lg.define(function(e){var t=e.state.field(ih,!1),n=new Map((t?Object.values(t):[]).map(function(e){return[e.id,{view:iy(e),cursor:e}]})),r=!0,i=0,o="function"==typeof IntersectionObserver?new IntersectionObserver(function(e){Date.now()>i-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&s()},{threshold:[1]}):null;function a(){o&&(o.disconnect(),n.forEach(function(e){o.observe(e.view.dom)}))}function l(){t&&0!==Object.values(t).length&&(e.inView&&e.requestMeasure(u),r!==e.inView)&&!(r=e.inView)&&n.forEach(function(e){im(e.view.dom)})}a();var c=null;function s(){null===c&&(c=setTimeout(function(){c=null,l()},50))}window.addEventListener("resize",s);var u={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((t?Object.values(t):[]).map(function(t){var r=n.get(t.id),i=r?function(e,t){var n=ib.get(e);if(n)return n;var r=t.getBoundingClientRect().width;return ib.set(e,r),r}(t.username,r.view.label):null;return[t.id,{position:e.coordsAtPos(t.position),labelWidth:i}]}))}},write:function(e){n.forEach(function(t,n){var r=e.dimensions.get(n);!function(e){var t=e.cursorView,n=e.position,r=e.labelWidth,i=e.editorRect,o=t.dom,a=t.label;if(!n||!r){im(o);return}var l=n.bottom-n.top;if(n.bottom<=i.top+l||n.top+l>=i.bottom||n.right<i.left-.1||n.left>i.right+.1){im(o);return}var c=n.left+r-i.right,s="0px";c>0?(s="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(s,", -100%)");var u=ig()?{x:n.left-i.left+"px",y:n.top-i.top+"px"}:{x:"calc(".concat(n.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(n.top,"px + var(--fixed-position-offset-y))")},d=u.x,f=u.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}({cursorView:t.view,position:(null==r?void 0:r.position)||null,labelWidth:(null==r?void 0:r.labelWidth)||null,editorRect:e.editorRect})})},key:"multiplayer-cursors-plugin-".concat(rM()())};return{update:function(r){r.transactions.length&&(i=Date.now());var o=r.state.field(ih,!1);if(!(o!==r.startState.field(ih,!1))){r.geometryChanged&&l();return}var c=new Map,s=new Set;if(o){var u=new Map((0,S._)(n.values()).map(function(e){return[e.cursor.id,e.view]}));Object.values(o).forEach(function(t){var n=u.get(t.id);if(n)s.add(n),c.set(t.id,{view:n,cursor:t});else{var r=iy(t);c.set(t.id,{view:r,cursor:t}),e.dom.appendChild(r.dom)}})}n.forEach(function(e){s.has(e.view)||e.view.dom.remove()}),n=c,t=o,a(),l()},destroy:function(){window.removeEventListener("resize",s),n.forEach(function(e){e.view.dom.remove()}),t=void 0,n=new Map,null==o||o.disconnect(),c&&clearTimeout(c)},maybeMeasure:l}},{eventHandlers:{scroll:function(){this.maybeMeasure()}}})],iZ=function(){"use strict";function e(t,n,r,i){var o=this;(0,eP._)(this,e),this.view=t,this.destroyed=!1,this.colors=this.getColorMapFromUsers(i.getActiveUsers()),this.disposes=[],this.updateSelections=null,this.disposes.push(i.onUserLeave(function(e){o.destroyed||o.view.dispatch({effects:id.of(e.username)})}),i.onActiveUsersChange(function(e){o.destroyed||(o.colors=o.getColorMapFromUsers(e))}),r.watchTextFile(n,{onReady:function(e){var t=e.updateSelections;o.destroyed||(o.updateSelections=t)},onCursor:function(e){if(!o.destroyed){var t=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null===(t=n.user)||void 0===t?void 0:t.name;if(i){var o=n.id,a=n.position,l=n.selectionStart,c=n.selectionEnd,s=r[i];if(s&&o&&"number"==typeof a&&"number"==typeof l&&"number"==typeof c)return is.of({id:o,username:i,position:a,color:{cursor:s,selection:ic[s]||""},selectionStart:l,selectionEnd:c})}}({cursor:e,usernameColorsMap:o.colors});t&&o.view.dispatch({effects:t})}},onRemoveCursor:function(e){o.destroyed||o.view.dispatch({effects:iu.of(e)})},onError:function(){o.updateSelections=null},onMoveOrDelete:function(){o.updateSelections=null}}))}var t=e.prototype;return t.getColorMapFromUsers=function(e){return e.reduce(function(e,t){return t.username&&t.color?(0,C._)((0,x._)({},e),(0,tf._)({},t.username,t.color)):e},{})},t.postUpdate=function(e){if(!(!e.selectionSet||e.transactions.every(function(e){return e.annotation(eN.YW.remote)}))&&this.updateSelections){var t=e.state.selection.ranges.map(function(e){return{position:e.head,selectionStart:e.from,selectionEnd:e.to}});this.updateSelections(t)}},t.destroy=function(){this.destroyed=!0,this.disposes.forEach(function(e){return e()})},e}(),ix=new eT.j(function(e,t,n){return[iw,ih,eE.lg.define(function(r){return new iZ(r,e,t,n)},{provide:function(e){return eE.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})}})]}),iC=function(){"use strict";function e(t,n){var r=this;(0,eP._)(this,e),this.view=t,this.presence=n,this.destroyed=!1,this.followed=null,this.dispose=n.onFollowedUserChanged(function(e){return r.onFollowedUserChanged(e)}),Promise.resolve().then(function(){r.onFollowedUserChanged(n.getFollowedUser())})}var t=e.prototype;return t.onFollowedUserChanged=function(e){var t=this;if(!this.destroyed&&(this.followed=e,this.followed)){var n=this.view.state.field(ih,!1);if(n){var r=Object.values(n).find(function(e){var n;return e.username===(null===(n=t.followed)||void 0===n?void 0:n.username)});r&&this.jumpToPosition(r.position)}}},t.jumpToPosition=function(e){this.view.dispatch({effects:[eE.tk.scrollIntoView(eN.jT.cursor(e),{x:"center",y:"center"})]})},t.unfollow=function(){this.presence.getFollowedUser()&&this.presence.unfollowUser()},t.postUpdate=function(e){if(this.followed){var t=void 0,n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=!0,s=!1,u=void 0;try{for(var d,f=l.effects[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;h.is(is)&&h.value.username===this.followed.username&&(t=h)}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t&&this.jumpToPosition(t.value.position)}},t.destroy=function(){this.destroyed=!0,this.dispose()},e}(),i_=new eT.j(function(e){return eE.lg.define(function(t){return new iC(t,e)},{provide:function(e){return eE.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})},eventHandlers:{click:function(){this.unfollow()},wheel:function(){this.unfollow()},keydown:function(e){"Control"!==e.key&&"Meta"!==e.key&&this.unfollow()}}})}),iS=n(34328),ik=eE.lg.define(function(e){var t=e.state.facet(iE),n=[];return{update:function(e){t=e.state.facet(iE);var n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){n=[]},logs:function(){return n},pushEvent:function(t){var n={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:t.type};t instanceof KeyboardEvent&&(n.key=t.key,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey),t instanceof InputEvent&&(n.data=t.data,n.inputType=t.inputType,n.isComposing=t.isComposing),t instanceof CompositionEvent&&(n.data=t.data),this.pushLog(n)},pushTransaction:function(e){this.pushLog({userEvent:e.annotation(eN.YW.userEvent),changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){t&&(n.push(e),n=n.slice(Math.max(0,n.length-100)))}}},{provide:function(e){var t=function(t,n){var r;return null===(r=n.plugin(e))||void 0===r?void 0:r.pushEvent(t)};return eN.Wl.highest(eE.tk.domEventHandlers({keypress:t,keydown:t,keyup:t,beforeinput:t,input:t,compositionstart:t,compositionupdate:t,compositionend:t}))}}),iE=eN.r$.define({combine:function(e){return!!e.length&&e[0]}}),iT=new eT.j(function(e){return iE.of(e)}),iR=n(1813),iI=n(35020),iD=n(57253),iB=eN.q6.define(),iG=eN.Py.define(),iA=eN.QQ.define({create:function(){return!0},update:function(e,t){return!(0,eL.aU)(t,iG)&&e},provide:function(e){return rO.o.from(e)}}),iP=function(){"use strict";function e(t,n,r,i){var o=this;(0,eP._)(this,e),this.view=t,this.path=n,this.fs=r,this.writeChange=null,this.destroyed=!1,this.debug=(0,C._)((0,x._)({},i),{latestReceivedVersion:0,openVersion:0,initiatedChanges:0,previousInitiatedChanges:null}),this.dispose=r.watchTextFile(n,{onReady:function(e){var n=e.initialContent,r=e.writeChange,i=e.version;o.destroyed||(o.debug.latestReceivedVersion=i,o.debug.openVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i}),o.debug.trackTimeToLoadFileEnd(o.path),o.writeChange=r,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:iG.of(null),annotations:[eN.YW.addToHistory.of(!1),eN.YW.remote.of(!0),iB.of(!0)]}))},onChange:function(e){var n=e.changes,r=e.changeSource,i=e.version;if(!o.destroyed){o.debug.latestReceivedVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i});try{t.dispatch({changes:n,annotations:[eN.YW.remote.of(r===iD.Fl.Container),eN.YW.addToHistory.of(r===iD.Fl.Local),iB.of(!0)]})}catch(e){o.debugThrowSyncRemoteOpError(n,r,e)}}},onError:function(){o.destroyed||(o.dispose=null,o.writeChange=null)},onMoveOrDelete:function(){o.destroyed||(o.dispose=null,o.writeChange=null)}})}var t=e.prototype;return t.postUpdate=function(e){if(e.docChanged&&this.writeChange){var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(!(a.annotation(eN.YW.remote)||a.annotation(iB))){this.debug.initiatedChanges++;var l=a.annotation(iS.Z)?{author:"ghostwriter"}:{};try{this.writeChange(a.changes,l),this.debug.previousInitiatedChanges=a.changes}catch(t){this.debugThrowWriteChangeError(e,a,t);break}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},t.destroy=function(){var e;this.destroyed=!0,null===(e=this.dispose)||void 0===e||e.call(this),this.dispose=null,this.writeChange=null,this.debug.deleteBsodFilePathVersion({filePath:this.path})},t.debugThrowSyncRemoteOpError=function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=r.view.contentDOM.innerText;r.debug.throwBsod({origin:"Codemirror: ot/syncRemoteOp",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),changes:JSON.stringify(e),changeSource:t,otClientDoc:o,domText:a,cmDoc:r.view.state.doc.sliceString(0),openVersion:r.debug.openVersion,version:r.debug.latestReceivedVersion,initiatedChanges:r.debug.initiatedChanges}}),(0,eE.OO)(r.view.state,n)})},t.debugThrowWriteChangeError=function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=e.view.contentDOM.innerText,l=e.view.plugin(ik),c=null==l?void 0:l.logs();null==l||l.flush(),r.debug.throwBsod({origin:"Codemirror: ot/writeChange",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),transactionChanges:JSON.stringify(t.changes),otherTransactionChanges:JSON.stringify(e.transactions.filter(function(e){return e!==t}).map(function(e){return e.changes})),transactionDoc:t.newDoc.sliceString(0),updateDoc:e.state.doc.sliceString(0),otClientDoc:o,domText:a,openVersion:r.debug.openVersion,latestReceivedVersion:r.debug.latestReceivedVersion,keystrokes:JSON.stringify(c)}})}),(0,eE.OO)(e.state,n)},e}(),iN=new eT.j(function(e,t,n){return eE.lg.define(function(r){return new iP(r,e,t,n)},{provide:function(e){return[iA,eE.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})]}})}),iL=n(48126),iO=n(91175),iU=n(32682),iM=n(45077),iX=n(56683),iF=n(49995),iW=n(60994),iH=n(15235),iV=n(85763),iz=n(18060),ij=n(45271),iq=n(88032),iJ=(0,ed.X)({buttons:[ea.l0.display.flex,ea.l0.rowWithGap(4),ea.l0.justify.end],input:[ea.l0.colWithGap(4),ea.l0.flex.grow(1)],gap:[ea.l0.colWithGap(16)],label:[ea.l0.color.foregroundDimmer,ea.l0.fontSize(12),ea.l0.height(24),ea.l0.justify.center],flexRow:[ea.l0.display.flex,ea.l0.rowWithGap(8),ea.l0.align.center]}),iY={fontFamily:"text-security-disc"},iK=er.K.label;function i$(e){var t=(0,eD.Z)().secrets,n=(0,$.useId)(),r=(0,$.useId)(),i=(0,_._)((0,$.useState)(""),2),o=i[0],a=i[1],l=(0,_._)((0,$.useState)(e.initialValue),2),c=l[0],s=l[1],u=(0,_._)((0,$.useState)(!1),2),d=u[0],f=u[1],h=(0,$.useRef)(null);return(0,$.useEffect)(function(){if(e.isOpen){var t;null===(t=h.current)||void 0===t||t.focus(),(0,no.j)(no.U3.PASTE_SCANNER_USED,{action:"modal_opened",provider:null==e?void 0:e.provider})}},[e.isOpen,null==e?void 0:e.provider]),(0,k.tZ)(iq.MT,{contain:!0,children:(0,k.tZ)(ij.u,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,k.BX)(er.G,{css:iJ.gap,children:[(0,k.tZ)(t3.xv,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,k.BX)(er.G,{css:iJ.flexRow,children:[(0,k.BX)(er.G,{css:iJ.input,children:[(0,k.tZ)(iK,{css:iJ.label,htmlFor:n,children:"Key"}),(0,k.tZ)(iz.II,{id:n,ref:h,value:o,onChange:function(e){return a(e.target.value)}})]}),(0,k.BX)(er.G,{css:iJ.input,children:[(0,k.BX)(er.G,{css:iJ.flexRow,children:[(0,k.tZ)(iK,{css:iJ.label,htmlFor:r,children:"Value"}),(0,k.tZ)(iV.hU,{alt:"Toggle Secret",onClick:function(){return f(function(e){return!e})},tooltipPlacement:"top",children:d?(0,k.tZ)(W.Z,{}):(0,k.tZ)(F.Z,{})})]}),(0,k.tZ)(iz.II,{id:r,value:c,onChange:function(e){return s(e.target.value)},style:d?void 0:iY})]})]}),(0,k.BX)(er.G,{css:iJ.buttons,children:[(0,k.tZ)(iH.zx,{text:"Cancel",onClick:e.onCancel}),(0,k.tZ)(iH.zx,{colorway:"primary",text:"Save Secret",disabled:0===o.length||0===c.length,onClick:(0,eJ._)(function(){return(0,eY.Jh)(this,function(n){switch(n.label){case 0:return[4,t.writeSecret({key:o,value:c})];case 1:return n.sent(),e.onSaveSecret(o,c),(0,no.j)(no.U3.PASTE_SCANNER_USED,{action:"secret_created",provider:null==e?void 0:e.provider}),[2]}})})})]})]})})})}var iQ=n(18123),i0=n(87128),i1=n(37058),i2=(0,ed.X)({hint:[ea.l0.align.center,ea.l0.border({color:ea.TV.outlineDimmer,direction:"top"}),ea.l0.color.foregroundDimmest,ea.l0.display.flex,ea.l0.flex.row,ea.l0.px(8),ea.l0.py(4),ea.l0.rowWithGap(8)],info:[ea.l0.p(8)],key:[ea.l0.px(4)],wrapper:[ea.l0.backgroundColor.backgroundHigher,ea.l0.borderRadius(4),ea.l0.cursor.default,ea.l0.font.default],mobileButtons:[ea.l0.flex.grow(1)],mobileHint:[ea.l0.justify.center]}),i3={borderTop:"1px solid ".concat(ea.TV.outlineDimmer),borderBottom:"1px solid ".concat(ea.TV.outlineDimmer),borderRadius:0};function i4(e){return(0,k.BX)(er.G,{css:i2.wrapper,style:e.onMobile?i3:void 0,children:[(0,k.BX)(er.G,{css:i2.info,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,k.tZ)(er.G,{children:"The value you pasted looks like a secret."}),(0,k.tZ)(er.G,{children:e.supportsSecrets?"Store it securely using our Secrets feature.":"Anyone will be able to see this."})]}),e.onMobile?(0,k.tZ)(i6,(0,x._)({},e)):(0,k.tZ)(i8,(0,x._)({},e))]})}function i8(e){return(0,k.BX)(k.HY,{children:[e.supportsSecrets?(0,k.BX)(er.G,{css:i2.hint,onClick:e.onClickUseSecrets,children:[(0,k.tZ)(iQ.Z,{}),"Press",(0,k.tZ)(er.G,{css:i2.key,children:(0,k.tZ)(i1.bM,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}):null,(0,k.BX)(er.G,{css:i2.hint,onClick:e.onClickPasteAnyway,children:[(0,k.tZ)(i0.Z,{}),"Press",(0,k.tZ)(er.G,{css:i2.key,children:(0,k.tZ)(i1.bM,{keyCombo:"Enter",small:!0})}),"to paste anyway"]}),e.supportsSecrets?null:(0,k.BX)(er.G,{css:i2.hint,onClick:e.onClickUndo,children:[(0,k.tZ)(i0.Z,{}),"Press",(0,k.tZ)(er.G,{css:i2.key,children:(0,k.tZ)(i1.bM,{keyCombo:"Escape",small:!0})}),"to undo"]})]})}function i6(e){return(0,k.BX)(er.G,{css:[i2.hint,i2.mobileHint],children:[e.supportsSecrets?(0,k.tZ)(iH.zx,{css:i2.mobileButtons,iconLeft:(0,k.tZ)(iQ.Z,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}):null,(0,k.tZ)(iH.zx,{css:i2.mobileButtons,iconLeft:(0,k.tZ)(i0.Z,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway}),e.supportsSecrets?null:(0,k.tZ)(iH.zx,{css:i2.mobileButtons,iconLeft:(0,k.tZ)(iQ.Z,{}),text:"Undo",onClick:e.onClickUndo})]})}var i5=n(64479),i9=n(82891),i7=(0,ed.X)({border:[ea.l0.border({color:nW.TV.accentPrimaryDefault,direction:"y",width:1})],title:[ea.l0.display.flex,ea.l0.rowWithGap(8),ea.l0.align.center,ea.l0.justify.spaceBetween,ea.l0.px(8),ea.l0.pt(4),ea.l0.font.default],wrapper:[ea.l0.backgroundColor.backgroundRoot,ea.l0.py(0),ea.l0.position.relative,ea.l0.zIndex(200)]});function oe(e){var t;return t=e.onClose,(0,$.useEffect)(function(){var e=function(e){"Escape"===e.key&&t(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[t]),(0,k.tZ)(iq.MT,{autoFocus:!0,contain:!0,children:(0,k.tZ)(er.G,{css:i7.wrapper,children:(0,k.BX)(er.G,{css:i7.border,children:[(0,k.BX)(er.G,{css:i7.title,children:[(0,k.BX)(t3.xv,{multiline:!1,children:["Access the secret ",(0,k.tZ)("strong",{children:e.keyName}),":"]}),(0,k.tZ)(iV.hU,{alt:"Close",onClick:e.onClose,children:(0,k.tZ)(re.Z,{})})]}),(0,k.tZ)(i5.Tg,{background:"root",children:(0,k.tZ)(i9.Z,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var ot=iX.V.compute([iU.xg],function(e){var t=e.field(iU.xg).iter();if(null===t.value)return null;for(var n=[];null!==t.value;){var r=t.from,i=t.to,o=t.value;n.push({from:r,to:i,insert:o.result.secret}),t.next()}return n}),on=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e,r){var i;return(0,eP._)(this,n),(i=t.call(this)).secret=e,i.as=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,t1.V)((0,k.tZ)(i4,{supportsSecrets:e.state.facet(iU.$X),onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:iU.Lo.of(t.secret)})},onClickPasteAnyway:function(){(0,iU.Pz)(e),e.focus()},onClickUndo:function(){e.dispatch({effects:iU.uh.of(t.secret.id)}),e.focus()}}));return"pocket"===this.as&&(n.style.zIndex="200",n.style.position="relative",this.adjustForGutter(n,e)),n},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(eE.l9),or=iW.t.compute([iU.xv],function(e){var t=e.facet(tq.Yp),n=e.field(iU.xv);return n&&t?{key:"pasteScannerModal",node:function(e){var t;return(0,k.tZ)(i$,{isOpen:!0,initialValue:n.result.secret,provider:n.result.provider,onSaveSecret:(t=(0,eJ._)(function(t){var r,i,o,a,l;return(0,eY.Jh)(this,function(c){for(r=e.state.field(iU.xg).iter(),i=[];r.value;)o=r.from,a=r.to,(l=r.value).id===n.id&&(i.push(iU.uh.of(l.id)),i.push(iU.Yt.of({secret:t,from:o,to:a}))),r.next();return e.dispatch({effects:(0,S._)(i).concat([iU.ZB.of(null)])}),[2]})}),function(e){return t.apply(this,arguments)}),onCancel:function(){return e.dispatch({effects:iU.ZB.of(null)})}})}}:null}),oi=eE.tk.decorations.compute([iU.Do],function(e){var t=e.field(iU.Do).iter(),n=t.from,r=t.to,i=t.value,o=e.facet(tq.Yp);return i&&o?eE.p.set(eE.p.widget({widget:new oo(i.key,o),side:1,block:!0}).range(n,r)):eE.p.none}),oo=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e,r){var i;return(0,eP._)(this,n),(i=t.call(this)).key=e,i.filePath=r,i}var r=n.prototype;return r.toDOM=function(e){var t=(0,t1.V)((0,k.tZ)(oe,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:iU.qs.of(null)})},onInsert:function(t){e.dispatch(e.state.changeByRange(function(e){return{range:eN.jT.cursor(e.from+t.length),changes:{from:e.from,to:e.to,insert:t}}})),e.focus(),(0,no.j)(no.U3.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(t,e),t},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(eE.l9),oa=[ot,(c=[iU.xv,iU.xg],s=function(e){return null!=e.field(iU.xv,!1)?null:e.field(iU.xg,!1)||null},[eE.hJ.compute(c,function(e){var t=s(e);if(!t||e.facet(iF.h))return null;for(var n=t.iter();n.value;){var r=function(){var e=new on(n.value,"tooltip");return{v:{arrow:!0,pos:n.to,create:function(t){return{dom:e.toDOM(t)}}}}}();if("object"===(0,iM._)(r))return r.v}return null}),eE.tk.decorations.compute(c,function(e){var t=s(e);if(!t||!e.facet(iF.h))return eE.p.none;for(var n=t.iter();n.value;){var r=new on(n.value,"pocket");return eE.p.set(eE.p.widget({widget:r,side:1,block:!0}).range(n.to,n.to))}return eE.p.none})]),or,oi],ol=new eT.j(function(e){return[iU.$X.of(!e),iU.Do,iU.xg,iU.xv,oa,iU.Gv]});function oc(e,t){var n=performance.now();ni.kg.time(e,n-t)}var os=new eT.j(function(e){var t=e?.01:.001;return eN.Wl.highest(eE.tk.domEventHandlers({keydown:function(e){if(Math.random()<t){var n=e.timeStamp;requestAnimationFrame(function(){oc("editor input latency",n),"undefined"!=typeof requestIdleCallback?requestIdleCallback(function(){oc("editor input latency after layout",n)}):setTimeout(function(){oc("editor input latency after layout",n)})})}}}))}),ou=n(51148),od=n(97260),of=function(e){var t=parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]},oh=n(32508),op=n.n(oh);function om(e){var t=RegExp("".concat(e,"\\(-?\\b\\d+\\.?\\d*\\b\\s*(,\\s*-?\\b\\d+\\.?\\d*\\b)?"),"g"),n=new RegExp("".concat(e,"\\((?<x>-?\\b\\d+\\.?\\d*\\b)\\s*(,\\s*(?<y>-?\\b\\d+\\.?\\d*\\b))?"));return{regexp:t,cursor:"move",onDrag:function(t,r,i){var o,a,l=n.exec(t),c=Number(null==l?void 0:null===(o=l.groups)||void 0===o?void 0:o.x),s=Number(null==l?void 0:null===(a=l.groups)||void 0===a?void 0:a.y);isNaN(c)||(isNaN(s)&&(s=c),r("".concat(e,"(").concat(c+i.movementX,", ").concat(s+i.movementY)))}}}var ov=om("vec2");function og(e){var t=RegExp("".concat(e,"\\(.*\\)"),"g"),n=new RegExp("".concat(e,"\\((?<r>\\d+)\\s*,\\s*(?<g>\\d+)\\s*,\\s*(?<b>\\d+)\\)"));return{regexp:t,cursor:"pointer",onClick:function(t,r){var i,o,a,l=n.exec(t),c=Number(null==l?void 0:null===(i=l.groups)||void 0===i?void 0:i.r),s=Number(null==l?void 0:null===(o=l.groups)||void 0===o?void 0:o.g),u=Number(null==l?void 0:null===(a=l.groups)||void 0===a?void 0:a.b),d=document.createElement("input");d.type="color",isNaN(c+s+u)||(d.value="#"+c.toString(16)+s.toString(16)+u.toString(16)),d.addEventListener("input",function(t){var n=t.target;if(n.value){var i=(0,_._)(of(n.value),3),o=i[0],a=i[1],l=i[2];r("".concat(e,"(").concat(o,", ").concat(a,", ").concat(l,")"))}}),d.click()}}}om("ellipse"),om("circle"),om("point"),om("rect"),om("square"),om("vertex");var oy=og("rgb");og("background"),og("fill"),og("stroke");var ob={regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){op()(e)&&window.open(e,"_blank")}},ow=[{regexp:/-?\b\d+\.?\d*\b/g,cursor:"ew-resize",onDrag:function(e,t,n){var r=Number(e)+n.movementX;isNaN(r)||"number"!=typeof r||t(r.toString())}},{regexp:/true|false/g,cursor:"pointer",onClick:function(e,t){switch(e){case"true":return t("false");case"false":return t("true")}}},ov,oy,ob],oZ=[ob],ox=new eT.j(function(e,t){return t?null:(0,od.ZP)({key:"mod",rules:e?ow:oZ})}),oC=n(30826),o_=n.n(oC),oS=new Set,ok=o_()(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=oS[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,no.j)(no.U3.WS_TYPED,{fileExt:o})}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}oS.clear()},18e4),oE=eE.tk.updateListener.of(function(e){if(e.docChanged){var t=e.state.facet(tq.Yp);if(t){var n=(0,Q.r6)(t)||(0,Q.UO)(t);!e.transactions.some(function(e){return e.annotation(eN.YW.remote)})&&(oS.has(n)||(oS.add(n),ok()))}}}),oT=n(87502),oR=eE.tk.theme({".cm-ruler-element":{backgroundColor:ea.TV.backgroundHigher}}),oI=eN.QQ.define({create:function(e){return 0===e.doc.length},update:function(e,t){return t.docChanged?0===t.state.doc.length:e}}),oD=(0,eE.EY)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,eL.aU)(e,oB,oI,rX.R)},markers:function(e){if(e.state.field(oI,!1))return[];var t=e.state.facet(oB);if(0===t.length)return[];var n=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left+6,o=r.width-2,a=Math.max(r.height,e.contentHeight),l=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,h=i+e.defaultCharacterWidth*f;h<o&&n.push(new eE.dc("cm-ruler-element",h,0,2,a))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return n}}),oB=eN.r$.define({enables:[oI,oD,oR]}),oG=new eT.j(function(e){return e.map(function(e){return oB.of(e)})}),oA=n(5786),oP=n(85733),oN=n(55927),oL=n(46026),oO=n(45911),oU=n(35247),oM=n(79556),oX=n(82496);function oF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(t),o=i.next();!o.done&&r.length<n;)r.push(o.value),o=i.next();return r}var oW=n(38477);function oH(e){return e>420?"large":"small"}var oV=er.K.div,oz=(0,ed.X)({root:[ea.l0.rowWithGap(4),ea.l0.px(4),ea.l0.py(6),{borderBottom:"1px solid",borderColor:ea.TV.outlineDimmest}],panelButtonWrapper:[ea.l0.center,ea.l0.height(32)],content:[ea.l0.display.grid,ea.l0.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:ea.TV.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[ea.l0.position.absolute,ea.l0.top(0),ea.l0.right(0),ea.l0.height("100%"),ea.l0.center,ea.l0.pr(4)],inputControlsSmall:[ea.l0.colWithGap(8),ea.l0.flex.growAndShrink(1)],searchInputWrapper:[ea.l0.position.relative,{gridArea:"search"}],searchControls:[ea.l0.display.flex,ea.l0.align.center,ea.l0.rowWithGap(8),ea.l0.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[ea.l0.display.flex,ea.l0.align.center,ea.l0.rowWithGap(8),ea.l0.flex.wrap,{gridArea:"replace-controls"}],searchSettings:ea.l0.flex.row,jumpIconButton:[ea.l0.height(32),ea.l0.width(32)]});function oj(e){var t=(0,$.useRef)(null);return(0,$.useEffect)(function(){if(t.current){var n;e!==(null===(n=t.current)||void 0===n?void 0:n.value)&&(t.current.value=e)}},[e]),t}var oq=new t1.J($.forwardRef(function(e,t){var n=e.view,r=e.query,i=e.updateQuery,o=(0,_._)((0,$.useState)(!1),2),a=o[0],l=o[1],c=(0,_._)((0,$.useState)([]),2),s=c[0],u=c[1],d=(0,_._)((0,$.useState)(null),2),f=d[0],h=d[1],p=s.length,m=(0,oP.Z)(r),v=(0,oP.Z)(s),g=oj(r.search),y=oj(r.replace);function b(){(0,oA.g)(n);var e=n.state.selection.main;n.dispatch({effects:eE.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),p<=1||h(function(t){if(null===t){var n=s.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t>=p?1:t+1})}function w(){(0,oA.a7)(n);var e=n.state.selection.main;n.dispatch({effects:eE.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),p<=1||h(function(t){if(null===t){var n=s.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t<=1?p||1:t-1})}(0,$.useImperativeHandle)(t,function(){return{onSelectionSet:function(){var e=n.state.selection.main,t=v.current.findIndex(function(t){return t.from<=e.anchor&&t.to>=e.anchor});h(-1!==t?t+1:null)},onDocChanged:function(){u(oF(m.current,n.state.doc)),h(null)},onExpandRequested:function(){l(!0)}}},[n,m,v]),(0,$.useEffect)(function(){var e=oF(r,n.state.doc);u(e);var t=n.state.selection.main,i=e.findIndex(function(e){return e.from<=t.anchor&&e.to>=t.anchor});h(-1!==i?i+1:null)},[n,r]);var Z=(0,_._)((0,$.useState)(oH(0)),2),x=Z[0],C=Z[1],S=(0,oN.Z)(function(e){e.width&&C(oH(e.width))});function E(e){return(0,eE.$1)(n,e,"search-panel")}var T=p>0,R=r.search.length>0?"0 / 0":null,I=T?"".concat(f||1," / ").concat(p):R,D=I?8*I.length:null,B=(0,k.BX)(er.G,{css:oz.searchSettings,children:[(0,k.tZ)(oX.Z,{alt:"case sensitive",icon:(0,k.tZ)(oO.Z,{}),checked:r.caseSensitive,onClick:function(){i({caseSensitive:!r.caseSensitive})}}),(0,k.tZ)(oX.Z,{alt:"regular expressions",icon:(0,k.tZ)(oU.Z,{}),checked:r.regexp,onClick:function(){i({regexp:!r.regexp})}}),(0,k.tZ)(oX.Z,{alt:"whole words",icon:(0,k.tZ)(oW.Z,{}),checked:r.wholeWord,onClick:function(){i({wholeWord:!r.wholeWord})}})]}),G=[oz.content];return"small"!==x&&a?G.push(oz.contentExpanded):"small"===x&&a?G.push(oz.contentExpandedSmall):"small"!==x||a||G.push(oz.contentSmall),(0,k.tZ)(oV,{ref:S,onKeyDown:function(e){E(e)&&e.preventDefault()},children:(0,k.BX)(i5.Tg,{elevated:!0,css:oz.root,children:[(0,k.tZ)(er.G,{css:oz.panelButtonWrapper,children:(0,k.tZ)(iV.hU,{alt:a?"Close replace panel":"Show replace panel",css:oz.jumpIconButton,onClick:function(){l(function(e){return!e})},children:(0,k.tZ)(X.Z,{rotate:a?90:0,style:{transition:"200ms ease"}})})}),(0,k.BX)(er.G,{css:G,children:[(0,k.BX)(er.G,{css:oz.searchInputWrapper,children:[(0,k.tZ)(oM.h,{ref:g,style:{padding:4,paddingRight:null!=D?D:void 0},placeholder:"Search",defaultValue:r.search,name:"search","main-field":"true",onKeyDown:function(e){if((0,oL.jh)(e)&&"f"===e.key){e.currentTarget.select();return}if(!("enter"!==e.key.toLowerCase()||E(e))){if(e.preventDefault(),e.shiftKey){w();return}b()}},onChange:function(e){i({search:e})}}),I?(0,k.tZ)(er.G,{css:oz.matchLabel,children:(0,k.tZ)(t3.xv,{variant:"small",color:"dimmest",multiline:!1,children:I})}):null]}),(0,k.BX)(er.G,{css:oz.searchControls,children:[(0,k.BX)(er.G,{css:ea.l0.flex.row,children:[(0,k.tZ)(iV.hU,{css:oz.jumpIconButton,alt:"Previous",onClick:function(){w()},children:(0,k.tZ)(X.Z,{rotate:-90})}),(0,k.tZ)(iV.hU,{css:oz.jumpIconButton,alt:"Next",onClick:function(){b()},children:(0,k.tZ)(X.Z,{rotate:90})})]}),(0,k.tZ)(iH.zx,{text:"Select all",onClick:function(){(0,oA.i3)(n),n.focus()}}),B]}),a?(0,k.BX)(k.HY,{children:[(0,k.tZ)(er.G,{css:oz.replaceInputWrapper,children:(0,k.tZ)(iz.II,{ref:y,style:{padding:4},placeholder:"Replacement",name:"replace",defaultValue:r.replace,onKeyDown:function(e){"enter"!==e.key.toLowerCase()||E(e)||(e.preventDefault(),(0,oA.K9)(n))},onChange:function(e){i({replace:e.target.value})}})}),(0,k.BX)(er.G,{css:oz.replaceControls,children:[(0,k.tZ)(iH.zx,{text:"Replace",onClick:function(){(0,oA.K9)(n)}}),(0,k.tZ)(iH.zx,{text:"Replace all",onClick:function(){(0,oA.ko)(n)}})]})]}):null]}),(0,k.tZ)(er.G,{css:oz.panelButtonWrapper,children:(0,k.tZ)(iV.hU,{alt:"Close Search Panel",tooltipBehavior:"hidden",onClick:function(){(0,oA.N$)(n)},children:(0,k.tZ)(re.Z,{})})})]})})})),oJ=eN.Py.define(),oY=[(0,oA.yC)({createPanel:function(e){var t=!1,n=!1,r=!1,i=!1,o=!1,a=function(t){var n,r,i,o,a,l,c=(0,oA.uP)(e.state),s=new oA.Jb({search:null!==(n=t.search)&&void 0!==n?n:c.search,caseSensitive:null!==(r=t.caseSensitive)&&void 0!==r?r:c.caseSensitive,literal:null!==(i=t.literal)&&void 0!==i?i:c.literal,regexp:null!==(o=t.regexp)&&void 0!==o?o:c.regexp,replace:null!==(a=t.replace)&&void 0!==a?a:c.replace,wholeWord:null!==(l=t.wholeWord)&&void 0!==l?l:c.wholeWord});s.eq(c)||e.dispatch({effects:oA.ql.of(s)})},l=oq.create({view:e,query:(0,oA.uP)(e.state),updateQuery:a});return{dom:l,top:!0,update:function(t){(0,eL.aU)(t,oA.ql)&&oq.set(l,{view:e,query:(0,oA.uP)(t.state),updateQuery:a}),t.selectionSet&&!i&&(i=!0,requestAnimationFrame(function(){if(!n){var e;i=!1,null===(e=oq.ref(l))||void 0===e||e.onSelectionSet()}})),t.docChanged&&!r&&(r=!0,requestAnimationFrame(function(){if(!n){var e;r=!1,null===(e=oq.ref(l))||void 0===e||e.onDocChanged()}})),(0,eL.aU)(t,oJ)&&!o&&(o=!0,requestAnimationFrame(function(){if(!n){var e;o=!1,null===(e=oq.ref(l))||void 0===e||e.onExpandRequested()}}))},mount:function(){t||(t=!0,requestAnimationFrame(function(){if(!n){t=!1;var e=l.querySelector("[main-field]");e&&(e.focus(),e.select())}}))},destroy:function(){return n=!0}}}}),eE.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(e){return!!((0,oA.Ep)(e.state)||(0,oA.nx)(e))&&(e.dispatch({effects:oJ.of(null)}),!0)}}])],oK=n(39271),o$=n(90413),oQ=null!==(w=globalThis.requestIdleCallback)&&void 0!==w?w:globalThis.requestAnimationFrame;function o0(e,t,n){var r=e.field(t,!1);if(void 0===r){if(void 0===n)throw Error("Field is not mounted on state");return n}return t.spec.toJSON(r,e)}function o1(e){for(var t=e.sliceString(0,200)+e.length,n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(n>>>0).toString(36)}var o2=function(){"use strict";function e(t,n,r,i){var o=this;(0,eP._)(this,e),this.view=t,this.replId=n,this.cache=r,this.compartment=i,this.historyIsMounted=!1,this.destroyed=!1,this.pending=!1,this.scheduleCacheUpdate=this.scheduleCacheUpdate.bind(this),this.view.scrollDOM.addEventListener("scroll",this.scheduleCacheUpdate),this.view.state.field(iA,!1)||Promise.resolve().then(function(){o.destroyed||o.apply()})}var t=e.prototype;return t.apply=function(){if(!this.historyIsMounted&&this.view.state.field(ee.cE,!1)){(0,eE.OO)(this.view.state,Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view"));return}if(!this.key||this.view.state.field(iA,!1)){if(this.historyIsMounted){var e,t,n=this.key?rO.o.of(!0):[];this.view.dispatch({effects:this.compartment.reconfigure(n)}),this.historyIsMounted=!1}return}var r=this.cache.get(this.key);if(!r||r.hash!==o1(this.view.state.doc)){this.view.dispatch({effects:this.compartment.reconfigure((0,ee.m8)())}),this.historyIsMounted=!0;return}var i=eN.jT.fromJSON(r.selection),o=[(e=r.scroll,(t=eE.tk.scrollIntoView(e.pos,{y:"start",x:"start",yMargin:e.yDiff,xMargin:e.scrollLeft})).value.isSnapshot=!0,t),this.compartment.reconfigure([ee.cE.init(function(e){var t,n;return t=ee.cE,n=r.history,t.spec.fromJSON(n,e)}),(0,ee.m8)()])];if(this.view.state.field(E.iQ,!1))for(var a=0;a<r.folds.length;a+=2){var l=r.folds[a],c=r.folds[a+1];o.push(E.SW.of({from:l,to:c}))}this.view.dispatch({selection:i,effects:o}),this.historyIsMounted=!0},t.scheduleCacheUpdate=function(){var e=this;this.pending||(this.pending=!0,oQ(function(){e.pending&&!e.destroyed&&(e.pending=!1,e.historyIsMounted&&e.key&&e.cache.set(e.key,{hash:o1(e.view.state.doc),scroll:function(e){var t=e.scrollDOM.scrollTop,n=e.scrollDOM.scrollLeft;if(0===t&&0===n)return{pos:0,yDiff:0,scrollLeft:0};var r=e.lineBlockAtHeight(t+8),i=r.from>=e.viewport.from||e.viewportLineBlocks[0].top-t>200?r:e.viewportLineBlocks[0];return{pos:i.from,yDiff:i.top-t,scrollLeft:n}}(e.view),selection:e.view.state.selection.toJSON(),history:o0(e.view.state,ee.cE),folds:o0(e.view.state,E.iQ,[])}))}))},t.postUpdate=function(e){if((0,eL.aU)(e,tq.Yp,iA)){this.apply();return}!this.pending&&this.historyIsMounted&&(0,eL.aU)(e,"doc","selection",ee.cE,E.iQ)&&this.scheduleCacheUpdate()},t.destroy=function(){this.destroyed=!0,this.view.scrollDOM.removeEventListener("scroll",this.scheduleCacheUpdate)},(0,nv._)(e,[{key:"key",get:function(){var e=this.view.state.facet(tq.Yp);return e?"".concat(this.replId,":").concat(e):null}}]),e}(),o3=new eT.j(function(e,t){var n=new eN.F6,r=eE.lg.define(function(r){return new o2(r,e,t,n)},{provide:function(e){return eE.tk.updateListener.of(function(t){var n;null===(n=t.view.plugin(e))||void 0===n||n.postUpdate(t)})}});return[n.of(rO.o.of(!0)),r]}),o4=eE.tk.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),o8=n(527),o6=n(89016);function o5(e,t,n,r){var i=(0,e0.Z)().showError,o=(0,oK.Z)(),a=(0,o6.eR)({variables:{replId:o,path:e},onError:function(e){i(e.message)},skip:!r||t});return(0,$.useMemo)(function(){var r;return t||a.loading||a.error||!a.data||(null===(r=a.data.threadsByFile)||void 0===r?void 0:r.__typename)!=="ThreadsByFileResult"?{}:a.data.threadsByFile.threads.filter(function(t){return t.path===e&&(!n||!t.isResolved)}).reduce(function(e,t){return(0,C._)((0,x._)({},e),(0,tf._)({},t.id,t))},{})},[a.loading,a.data,a.error,e,t,n])}var o9=n(43312),o7=n(8261),ae=n(50054),at=n(11715),an=n(1712),ar=n(74042),ai=n(59947),ao=n(36397),aa=function(e){var t=e.caretSize,n=void 0===t?[8,12]:t,r=(0,nm._)(e,["caretSize"]);return(0,k.BX)("svg",(0,C._)((0,x._)({width:n[0],height:n[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),{children:[(0,k.tZ)("mask",{id:"outline",fill:"white",children:(0,k.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,k.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,k.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,k.tZ)("defs",{children:(0,k.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,k.tZ)("stop",{stopColor:"#57ABFF"}),(0,k.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},al=n(89578),ac=n(39885),as=n(68098),au=n(30470),ad=n(38672),af=n(86257),ah=n(66403),ap=n(43816),am=n(75958),av=n(38172),ag=n(92286),ay=n(77535),ab=n(24857),aw=n(21371),aZ=n(25150),ax=n(92834),aC=(0,ed.X)({inlineThreadHeader:[ea.l0.flex.row,ea.l0.align.center,ea.l0.justify.spaceBetween,ea.l0.position.relative,ea.l0.px(12),ea.l0.py(8),{borderBottomWidth:ea.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:ea.TV.outlineDimmest}],inlineThreadHeaderCaret:[ea.l0.position.absolute,ea.l0.height("fit-content"),ea.l0.display.flex,ea.l0.flex.row,ea.l0.align.center],inlineThreadHeaderActions:[ea.l0.flex.row,ea.l0.align.center,ea.l0.rowWithGap(4)],inlineThreadHeaderNavigator:[ea.l0.flex.row,ea.l0.align.center,ea.l0.rowWithGap(4)],inlineThreadInputContainer:[ea.l0.px(12),ea.l0.pb(8),ea.l0.pt(8),ea.l0.border({color:ea.TV.outlineDimmest,direction:"top"}),{".popover-control-container":[ea.l0.flex.grow(1)]}],inlineThreadInput:[ea.l0.flex.row,ea.l0.align.start,ea.l0.rowWithGap(8),ea.l0.width("full")],commentContainer:[ea.l0.px(12),ea.l0.py(12),ea.l0.maxHeight(300),ea.l0.overflowY("auto"),ea.l0.colWithGap(16)]}),a_=function(e){var t,n,r=e.isCreating,i=e.threadId,o=e.filePath,a=e.isResolved,l=e.isLoading,c=e.isPlaceholder,s=e.caretPosition,u=e.onRequestClose,d=e.onResolveThread,f=e.openThreadsInbox,h={viewAll:"Inbox",next:"Next thread",previous:"Previous thread",dismiss:"Collapse"},p=o5(null===o?"":o,l,!0,!0),m=(0,N.Gn)("fontSize").preferences.fontSize,v=[12,8];switch(m){case 10:v=[8,6];break;case 14:v=[10,6];break;case 18:v=[12,8];break;case 24:v=[14,10]}var g=(0,$.useMemo)(function(){return Object.values(p).sort(function(e,t){return e.indexStart-t.indexStart})},[p]),y=(0,$.useMemo)(function(){return g.findIndex(function(e){return e.id===i})},[g,i]),b=(0,ac.a9)(),w=(t=(0,eJ._)(function(){return(0,eY.Jh)(this,function(e){return b(y===g.length-1?g[0].id:g[y+1].id),[2]})}),function(){return t.apply(this,arguments)}),Z=(n=(0,eJ._)(function(){return(0,eY.Jh)(this,function(e){return b(0===y?g[g.length-1].id:g[y-1].id),[2]})}),function(){return n.apply(this,arguments)});return(0,k.BX)(i5.Tg,{background:"root",css:aC.inlineThreadHeader,children:[null!==s&&(0,k.tZ)("span",{css:aC.inlineThreadHeaderCaret,style:{top:-v[1],left:s},children:(0,k.tZ)(aa,{caretSize:v})}),(0,k.tZ)(iH.zx,{iconLeft:(0,k.tZ)(ay.Z,{}),onClick:function(){f()},text:h.viewAll,size:"small"}),g.length>1?(0,k.BX)(er.G,{css:aC.inlineThreadHeaderNavigator,children:[(0,k.tZ)(iV.hU,{alt:h.previous,onClick:Z,children:(0,k.tZ)(ar.Z,{})}),(0,k.BX)(t3.xv,{color:"dimmest",variant:"small",multiline:!1,children:[y+1,"/",g.length]}),(0,k.tZ)(iV.hU,{alt:h.next,onClick:w,children:(0,k.tZ)(an.Z,{})})]}):null,(0,k.BX)(er.G,{css:aC.inlineThreadHeaderActions,children:[r||a||c?null:(0,k.tZ)(iH.zx,{onClick:void 0===d?function(){}:d,text:"Resolve",size:"small",iconLeft:(0,k.tZ)(ai.Z,{})}),!r&&a?(0,k.tZ)(o7.D,{text:"Resolved",colorway:"positive"}):null,(0,k.tZ)(iH.zx,{onClick:void 0===u?function(){}:u,text:h.dismiss,size:"small",iconLeft:(0,k.tZ)(ag.Z,{})})]})]})},aS=function(e){var t,n,r=e.threadId,i=e.isResolved,o=e.onMessageChange,a=e.onMessageSubmit,l=e.isPlaceholder,c=e.onRequestClose,s=void 0===c?function(){}:c,u=(0,_._)((0,$.useState)(""),2),d=u[0],f=u[1],h=(0,_._)((0,$.useState)(rv().v4()),2),p=h[0],m=h[1],v=(0,af.Z)().ref,g=(0,$.useRef)(null),y={input:{placeholder:function(){return l?"Start a new thread… (Markdown is supported)":i?"Reply to re-open thread…":"Reply… (Markdown is supported)"}},submit:"Post reply",cancel:"Cancel"},b=function(){var e=d.trim();0!==e.length&&(a({message:e,messageId:p}),f(""),m(rv().v4()))},w=(0,ah.d)(),Z=(0,au.Z)(),S=(0,_._)((0,ap.Z)({"@":(t=(0,eJ._)(function(e){var t,n;return(0,eY.Jh)(this,function(r){return t=Z.filter(function(e){return e.id!==w}),e&&(n=e.toLowerCase(),t=t.filter(function(e){return e.username.toLowerCase().startsWith(n)})),[2,t.slice(0,5).map(function(e){return{icon:(0,k.tZ)(ad.Z,{username:e.username,fullName:e.fullName,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return t.apply(this,arguments)})}),2),E=S[0].suggestions,T=S[1],R=(0,aw.Kb)({items:(null==E?void 0:E.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(n=null==E?void 0:E.results.length)&&void 0!==n?n:0)>0,onSelectedItemChange:function(e){var t=e.selectedItem;if(E&&t){var n=E.applySuggestion({targetValue:d,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;f(r),setTimeout(function(){g.current&&(g.current.setSelectionRange(i,i),g.current.focus())})}}}),I=R.isOpen,D=R.getInputProps,B=R.getMenuProps,G=R.getItemProps,A=R.highlightedIndex,P=R.getComboboxProps;return(0,$.useEffect)(function(){var e="threads/drafts/".concat(r),t=am.Z.get(e,"string");t&&f(t);var n=g.current;return function(){if(n){var t=n.value;if(0===t.length){am.Z.remove(e);return}am.Z.set(e,t)}}},[r]),(0,k.tZ)(i5.Tg,{background:"root",css:aC.inlineThreadInputContainer,children:(0,k.BX)("div",(0,C._)((0,x._)({css:aC.inlineThreadInput},P()),{children:[l?(0,k.tZ)(iH.zx,{text:y.cancel,onClick:s}):null,(0,k.BX)("div",{css:[{width:"100%"}],children:[(0,k.tZ)(iz.B,(0,x._)({},D({ref:function(e){g.current=e,v(e),T(e)},value:d,onChange:function(e){var t=e.target.value;f(t),o({message:t,messageId:p})},onKeyDown:function(e){!I&&(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),b()))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),s())},placeholder:y.input.placeholder(),css:[ea.l0.height(32),ea.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1,caretColor:"auto"}],autoFocus:!0}))),(0,k.tZ)("div",{css:{position:"relative"},children:(0,k.tZ)("div",(0,C._)((0,x._)({},B({css:[{position:"absolute",top:ea.TV.space2,overflow:"hidden"},ea.l0.borderRadius(16),ea.l0.shadow(1),ea.l0.backgroundColor.backgroundDefault]})),{children:null==E?void 0:E.results.map(function(e,t){return(0,o9.az)("div",(0,C._)((0,x._)({},G({item:e,index:t})),{key:e.value}),(0,k.BX)(ab.Ug,{spacing:2,css:[A===t?ea.l0.backgroundColor.backgroundHighest:null,ea.l0.p(8)],children:[e.icon,(0,k.tZ)("div",{children:e.value})]}))})}))})]}),(0,k.tZ)(er.G,{css:[ea.l0.pt(4)],children:(0,k.tZ)(iV.hU,{alt:y.submit,tooltipDelay:"long",onClick:b,children:(0,k.tZ)(ao.Z,{})})})]}))})},ak=function(e){var t,n,r=e.threadId,i=e.isCreating,o=e.isResolved,a=void 0!==o&&o,l=e.view,c=e.filePath,s=e.openThreadsInbox,u=(0,ae.Z)(r,l,c),d=u.thread,f=u.loading,h=u.isPlaceholder,p=u.getLatestAnchor,m=u.updateThread,v=u.changeThreadMessage,g=u.finalizeThreadMessage,y=function(){null==l||l.dispatch({effects:[ax.YM.of(null)]})},b=(0,N.Gn)("fontSize").preferences.fontSize,w=(0,$.useRef)(null);(0,as.Z)(d);var Z=p(),x=l&&!f&&"number"==typeof(null==Z?void 0:Z.indexEnd)&&Z.indexEnd<=l.state.doc.length?null===(n=l.coordsAtPos(Z.indexEnd))||void 0===n?void 0:n.left:null,C=(null==l?void 0:l.dom.getBoundingClientRect().left)||null,_=b;switch(b){case 10:_=13;break;case 14:_=19;break;case 18:_=25;break;case 24:_=34}var E=(0,e0.Z)().showConfirm,T=(0,oK.Z)(),R=(0,$.useRef)(null),I=function(){R.current&&(R.current.scrollTop=R.current.scrollHeight)};(0,$.useEffect)(function(){setTimeout(function(){I()},0)},[null==d?void 0:d.messages]);var D=(0,$.useMemo)(function(){return(null==d?void 0:d.messages)?(0,S._)(d.messages).sort(function(e,t){return Date.parse(e.timeCreated)-Date.parse(t.timeCreated)}):[]},[null==d?void 0:d.messages]),B=(t=(0,$.useRef)(0),(0,oN.Z)(function(e){var n=e.height;n!==t.current&&(null==l||l.requestMeasure()),t.current=n}));return(0,k.tZ)("div",{css:[ea.l0.width("100%"),ea.l0.backgroundColor.backgroundRoot],children:(0,k.BX)(er.G,{innerRef:(0,av.l)(w,B),css:[ea.l0.font.default,{borderTopWidth:ea.TV.borderWidthDefault,borderBottomWidth:ea.TV.borderWidthDefault,borderStyle:"solid",borderColor:ea.TV.accentPrimaryDefault}],children:[h||f?null:(0,k.tZ)(a_,{isCreating:i,isResolved:a,isLoading:f,threadId:r,filePath:c,caretPosition:x&&C?x-C-6:null,isPlaceholder:h,onRequestClose:y,onResolveThread:function(){m({changes:{isResolved:!0}}),E("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:s}),f&&!h?(0,k.tZ)(er.G,{style:{height:_},children:(0,k.tZ)(at.Z,{viewBox:"0 0 400 21",backgroundColor:ea.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:ea.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,k.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})}):(0,k.BX)(k.HY,{children:[!i&&D.length>0?(0,k.tZ)("div",{css:aC.commentContainer,style:{fontSize:b},ref:R,children:D.map(function(e){return(0,k.tZ)(al.Z,{thread:d,message:e},e.id)})}):null,(0,k.tZ)(aS,{threadId:r,isPlaceholder:h,isResolved:a,onRequestClose:y,onMessageChange:v,onMessageSubmit:function(e){g(e),(0,no.j)(aZ.U3.MESSAGE_SENT,{replId:T,source:"threads",newThread:h})}})]})]})})},aE=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(){return(0,eP._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},r.eq=function(e){return!1},r.destroy=function(e){},n}(eN.uU);aE.prototype.elementClass="",aE.prototype.toDOM=void 0,aE.prototype.mapMode=eN.gc.TrackBefore,aE.prototype.startSide=aE.prototype.endSide=-1,aE.prototype.point=!0;var aT=eN.r$.define(),aR=eN.r$.define(),aI=eN.r$.define({combine:function(e){return e.some(function(e){return e})}}),aD=eE.lg.fromClass(function(){"use strict";function e(t){(0,eP._)(this,e),this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(aR).map(function(e){return new aP(t,e)});var n=!0,r=!1,i=void 0;try{for(var o,a=this.gutters[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.dom.appendChild(l.dom)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this.fixed=!t.state.facet(aI),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling)}var t=e.prototype;return t.update=function(e){if(e.viewportChanged){var t=this.view.contentDOM.nextElementSibling;t&&t!==this.dom&&t.classList.contains("cm-minimap-gutter")&&e.view.scrollDOM.insertBefore(this.dom,e.view.contentDOM.nextSibling)}if(this.updateGutters(e)){var n=this.prevViewport,r=e.view.viewport,i=Math.min(n.to,r.to)-Math.max(n.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(aI)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},t.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();var r=eN.Xs.iter(this.view.state.facet(aT),this.view.viewport.from),i=[],o=this.gutters.map(function(e){return new aA(e,t.view.viewport,-t.view.documentPadding.top)}),a=!0,l=!1,c=void 0;try{for(var s,u=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=void 0;if(Array.isArray(d.type)){var h=!0,p=!1,m=void 0;try{for(var v,g=d.type[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.type==eE.kH.Text){f=y;break}}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}else f=d.type==eE.kH.Text?d:void 0;if(f){i.length&&(i=[]),aG(r,i,d.from);var b=!0,w=!1,Z=void 0;try{for(var x,C=o[Symbol.iterator]();!(b=(x=C.next()).done);b=!0)x.value.line(this.view,f,i)}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}var _=!0,S=!1,k=void 0;try{for(var E,T=o[Symbol.iterator]();!(_=(E=T.next()).done);_=!0)E.value.finish()}catch(e){S=!0,k=e}finally{try{_||null==T.return||T.return()}finally{if(S)throw k}}e&&this.view.scrollDOM.insertBefore(this.dom,n)},t.updateGutters=function(e){var t=e.startState.facet(aR),n=e.state.facet(aR),r=e.docChanged||e.heightChanged||e.viewportChanged||!eN.Xs.eq(e.startState.facet(aT),e.state.facet(aT),e.view.viewport.from,e.view.viewport.to);if(t==n){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)l.value.update(e)&&(r=!0)}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var s=[],u=!0,d=!1,f=void 0;try{for(var h,p=n[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value,v=t.indexOf(m);v<0?s.push(new aP(this.view,m)):(this.gutters[v].update(e),s.push(this.gutters[v]))}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}var g=!0,y=!1,b=void 0;try{for(var w,Z=this.gutters[Symbol.iterator]();!(g=(w=Z.next()).done);g=!0){var x=w.value;x.dom.remove(),0>s.indexOf(x)&&x.destroy()}}catch(e){y=!0,b=e}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw b}}var C=!0,_=!1,S=void 0;try{for(var k,E=s[Symbol.iterator]();!(C=(k=E.next()).done);C=!0){var T=k.value;this.dom.appendChild(T.dom)}}catch(e){_=!0,S=e}finally{try{C||null==E.return||E.return()}finally{if(_)throw S}}this.gutters=s}return r},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.dom.remove()},e}(),{provide:function(e){return eE.tk.scrollMargins.of(function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==eE.Nm.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null})}});function aB(e){return Array.isArray(e)?e:[e]}function aG(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var aA=function(){"use strict";function e(t,n,r){(0,eP._)(this,e),this.gutter=t,this.height=r,this.localMarkers=[],this.i=0,this.cursor=eN.Xs.iter(t.markers,n.from)}var t=e.prototype;return t.line=function(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),aG(this.cursor,this.localMarkers,t.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=t.top-this.height;if(this.i==o.elements.length){var l=new aN(e,t.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,t.height,a,r);this.height=t.bottom,this.i++}},t.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),aP=function(){"use strict";function e(t,n){var r=this,i=function(e){r.dom.addEventListener(e,function(r){var i=t.lineBlockAtHeight(r.clientY-t.documentTop);n.domEventHandlers[e](t,i,r)&&r.preventDefault()})};for(var o in(0,eP._)(this,e),this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),n.domEventHandlers)i(o);this.markers=aB(n.markers(t)),n.initialSpacer&&(this.spacer=new aN(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var t=e.prototype;return t.update=function(e){var t=this.markers;if(this.markers=aB(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var r=e.view.viewport;return!eN.Xs.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},e}(),aN=function(){"use strict";function e(t,n,r,i){(0,eP._)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,r,i)}var t=e.prototype;return t.update=function(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),!function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)&&this.setMarkers(e,r)},t.setMarkers=function(e,t){for(var n="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<t.length?t[i++]:null,c=!1;if(l){var s=l.elementClass;s&&(n+=" "+s);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=n,this.markers=t},t.destroy=function(){this.setMarkers(null,[])},e}(),aL=eN.r$.define(),aO=eN.r$.define({combine:function(e){return(0,eN.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=Object.assign({},e);for(var r in t)!function(e){var r=n[e],i=t[e];n[e]=r?function(e,t,n){return r(e,t,n)||i(e,t,n)}:i}(r);return n}})}}),aU=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e){var r;return(0,eP._)(this,n),(r=t.call(this)).number=e,r}var r=n.prototype;return r.eq=function(e){return this.number==e.number},r.toDOM=function(){return document.createTextNode(this.number)},n}(aE);function aM(e,t){return e.state.facet(aO).formatNumber(t,e.state)}function aX(e){for(var t=9;t<e;)t=10*t+9;return t}aR.compute([aO],function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(aL)},lineMarker:function(e,t,n){return n.some(function(e){return e.toDOM})?null:new aU(aM(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:function(e){return e.startState.facet(aO)!=e.state.facet(aO)},initialSpacer:function(e){return new aU(aM(e,aX(e.state.doc.lines)))},updateSpacer:function(e,t){var n=aM(t.view,aX(t.view.state.doc.lines));return n==e.number?e:new aU(n)},domEventHandlers:e.facet(aO).domEventHandlers}});var aF=new(function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(){var e;return(0,eP._)(this,n),e=t.apply(this,arguments),e.elementClass="cm-activeLineGutter",e}return n}(aE));aT.compute(["selection"],function(e){var t=[],n=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var s=e.doc.lineAt(c.head).from;s>n&&(n=s,t.push(aF.range(s)))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return eN.Xs.of(t)});var aW=n(73173),aH=n(8043),aV=function(e){var t=e.isOpen,n=e.threadId,r=(0,_._)((0,$.useState)(!1),2),i=r[0],o=r[1],a=(0,aH.GD)({variables:{id:n},skip:"initial-spacer"===n});(0,$.useEffect)(function(){if(a&&!a.error){var e,t=null===(e=a.data)||void 0===e?void 0:e.thread;t&&o((null==t?void 0:t.__typename)==="AnnotationAnchor"&&(null==t?void 0:t.messages.some(function(e){return!e.seen})))}},[a]);var l={button:{alt:{default:"View threads",close:"Dismiss thread"}}};return(0,k.tZ)(iV.hU,{alt:t?l.button.alt.close:l.button.alt.default,size:24,className:"thread-indicator",css:[ea.l0.width(20),ea.l0.height(20),ea.l0.transition.snappy,ea.l0.cursor.pointer,ea.l0.display.flex,ea.l0.borderRadius(8),ea.l0.position.relative,ea.l0.overflow("visible"),t?ea.l0.color.accentPrimaryStrongest:ea.l0.color.foregroundDimmest,{borderWidth:ea.TV.borderWidthDefault,borderStyle:"solid",borderColor:t?ea.TV.accentPrimaryDefault:"transparent",backgroundColor:t?ea.TV.accentPrimaryDimmer:ea.TV.backgroundHigher,outline:0},{":hover":{borderColor:t?ea.TV.accentPrimaryStronger:ea.TV.outlineDimmer,color:t?ea.TV.accentPrimaryStrongest:ea.TV.foregroundDimmer,background:t?ea.TV.accentPrimaryDefault+" !important":ea.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,k.BX)(k.HY,{children:[i?(0,k.tZ)("div",{css:[ea.l0.width(8),ea.l0.height(8),ea.l0.backgroundColor.redStronger,ea.l0.position.absolute,ea.l0.top(-1),ea.l0.left(-1),ea.l0.borderRadius("full")]}):null,(0,k.tZ)(aW.Z,{})]})})};function az(e,t,n){var r=t.clientWidth,i=n.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var aj=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e,r,i){var o;return(0,eP._)(this,n),(o=t.call(this)).id=e,o.filePath=r,o.openThreadsInbox=i,o}var r=n.prototype;return r.eq=function(e){return e.id===this.id},r.toDOM=function(e){var t=(0,t1.V)((0,k.tZ)(ak,{threadId:this.id,view:e,filePath:this.filePath,openThreadsInbox:this.openThreadsInbox}));t.className="cm-thread-portal-widget";var n=e.dom.querySelector(".cm-scroller"),r=e.dom.querySelector(".cm-gutters");return n&&r&&az(t,n,r),t},r.ignoreEvent=function(){return!0},n}(eE.l9),aq=function(e){"use strict";(0,tt._)(n,e);var t=(0,tn._)(n);function n(e,r){var i;return(0,eP._)(this,n),(i=t.call(this)).id=e,i.active=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,t1.V)((0,k.tZ)(aV,{isOpen:this.active,threadId:this.id}));return n.className="cm-thread-indicator",n.style.display="inline",n.style.cursor="pointer",n.setAttribute("aria-hidden","true"),n.onclick=function(n){n.stopPropagation(),n.preventDefault(),e.dispatch({effects:[ax.YM.of(e.state.field(ax.PQ)===t.id?null:t.id)]})},n},r.eq=function(e){return e.id===this.id&&e.active===this.active},n}(aE),aJ=[(i=[aD],r&&!1===r.fixed&&i.push(aI.of(!0)),i),aR.of((0,x._)({},{class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return eN.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},{class:"cm-thread-indicator-gutter",markers:function(e){var t=e.state.field(ax.OQ),n=e.state.field(ax.PQ);return eN.Xs.of(Object.values(t).filter(function(e){return e.indexEnd!==e.indexStart}).map(function(t){var r=e.state.doc.lineAt(Math.min(t.indexStart,t.indexEnd)).from;return new aq(t.id,t.id===n).range(r)}),!0)},initialSpacer:function(){return new aq("initial-spacer",!1)}}))],aY=n(55460),aK=function(e,t,n,r,i){if(t===n)return null;var o=(0,_._)(r,2),a=o[0],l=o[1];return eE.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(t,n)},a$=new eT.j(function(e,t,n){return e&&n?[eN.Wl.highest(aJ),ax.cR,ax.OQ,ax.ZS,ax.PQ,eE.tk.decorations.compute([ax.OQ,ax.ZS,ax.PQ],function(e){var n=e.field(ax.OQ),r=e.field(ax.ZS),i=e.field(ax.PQ),o=r||Object.values(n).find(function(e){return e.id===i});return eE.p.set((0,S._)(Object.values(n)).map(function(e){var n=o&&e.id===o.id;return aK(e.id,e.indexStart,e.indexEnd,t,n)}).filter(function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length}),!0)}),eE.tk.decorations.compute([ax.OQ,ax.ZS,ax.PQ,tq.Yp],function(e){var t=e.field(ax.OQ),r=e.field(ax.ZS),i=e.field(ax.PQ),o=e.facet(tq.Yp);if(void 0===o)return eE.p.none;var a=(0,S._)(Object.values(t)).concat((0,S._)(r?[r]:[])).filter(Boolean).find(function(e){return e.id===i});return a?eE.p.set([eE.p.widget({widget:new aj(a.id,o,n),block:!0,side:1}).range(a.indexEnd)],!0):eE.p.none}),eE.tk.updateListener.of(function(e){(0,rl.j)(e,rX.R,function(){var t=(0,S._)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),n=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(t.length&&n&&r){var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;az(s,n,r)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}})}),eE.tk.updateListener.of(function(e){(0,rl.j)(e,ax.eR,function(t){var n=t.value,r=e.state.field(ax.OQ)[n];r&&e.view.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[eE.tk.scrollIntoView(r.indexStart,{x:"center",y:"center"})]})})})]:null}),aQ=n(99189),a0=n(26294),a1=n(18317);function a2(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function a3(e,t){var n;return null==t?a2(e):{filePath:e,text:null!==(n=t.state.doc.toString())&&void 0!==n?n:"",selections:t.state.selection.ranges.map(function(e){var t=e.from;return{location:t,length:e.to-t}}),hasFocus:t.hasFocus}}function a4(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rM()(),i=a3(e,t),o={messageType:a1.cF.TEXT_EDITOR_STATE,filePath:e,text:i.text,selections:i.selections,hasFocus:i.hasFocus,hasGhostwriterSuggestion:n.hasGhostwriterSuggestion,revisionId:n.revisionId};(0,aQ.bG)(o,r)}function a8(e,t,n,r,i){return r===e&&r===n.textEditorState.filePath&&t===n.textEditorState.filePath&&i===n.revisionId}function a6(e){var t=e.map(function(e){return eN.jT.range(e.location,e.location+e.length)});return eN.jT.create(t)}function a5(e,t,n,r,i){var o=i.payload;if((0,a1.Se)(o))return function(e,t,n,r,i){if(!a8(e,t,r,i.filePath,i.revisionId))return!1;var o=a6(i.selections);return n.dispatch({selection:o,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,a1.m7)(o))return function(e,t,n,r,i){if(!a8(e,t,r,i.filePath,i.revisionId))return!1;var o=a3(e,n),a=a6(i.selections);return n.dispatch({changes:{from:0,to:o.text.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,a1.ac)(o))return function(e,t,n,r,i){if(!a8(e,t,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=a6(i.selections);return n.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,a1.fz)(o))return!!a8(e,t,r,o.filePath,o.revisionId)&&(n.dispatch(n.state.replaceSelection(o.text)),!0);if((0,a1.T$)(o))a8(e,t,r,o.filePath,o.revisionId)&&(0,iL.l)({filePath:e,view:n,clipboardText:o.text});else if((0,a1.aB)(o))switch(o.action){case a1.b9.REQUEST_BLUR:return function(e,t,n,r,i,o){if(!a8(e,t,r,i,o))return!1;n.contentDOM.blur()}(e,t,n,r,o.filePath,o.revisionId);case a1.b9.REQUEST_UNDO:return!!a8(e,t,r,o.filePath,o.revisionId)&&((0,ee.Yw)(n),!0);case a1.b9.REQUEST_REDO:return!!a8(e,t,r,o.filePath,o.revisionId)&&((0,ee.KX)(n),!0);case a1.b9.REQUEST_INDENT_SELECTION:return!!a8(e,t,r,o.filePath,o.revisionId)&&(ee.at(n),!0);case a1.b9.REQUEST_DEDENT_SELECTION:return!!a8(e,t,r,o.filePath,o.revisionId)&&(ee.xi(n),!0);case a1.b9.REQUEST_TOGGLE_COMMENT:return!!a8(e,t,r,o.filePath,o.revisionId)&&(ee.O8(n),!0);case a1.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return!!a8(e,t,r,o.filePath,o.revisionId)&&(0,a0.o)(n);case a1.b9.REQUEST_FOCUS:return n.focus(),!0;default:throw Error("Unknown BridgeTextEditorAction.")}else throw Error("Invalid payload.")}var a9=n(96955),a7=n(36136),le=new eT.j(function(e){var t=eE.tk.domEventHandlers({scroll:ec()(function(t,n){var r=0,i=0,o=!0,a=!1,l=void 0;try{for(var c,s=n.visibleRanges[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;r=Math.min(r,u.from),i=Math.max(r,u.to)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}e("user:scroll",{visibleLines:{from:n.state.doc.lineAt(r).number,to:n.state.doc.lineAt(i).number}})},250)}),n=ec()(function(t,n,r){e("user:selection",{inputMethod:r,from:t,to:n})},250);return[t,eE.tk.updateListener.of(function(t){var r=t.transactions,i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.isUserEvent("input.paste")&&e("user:paste",{}),s.isUserEvent("input.drop")&&e("user:new-drop",{}),s.isUserEvent("move.drop")&&e("user:move-drop",{}),s.isUserEvent("delete.cut")&&e("user:cut",{}),s.isUserEvent("input.complete")&&e("user:complete",{}),s.isUserEvent("select")&&n(s.newSelection.main.from,s.newSelection.main.to,s.isUserEvent("select.pointer")?"pointer":"keyboard"),s.isUserEvent("undo")&&e("user:undo",{}),s.isUserEvent("redo")&&e("user:redo",{})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})]}),lt=n(7954),ln=n(77454);function lr(e){var t=e.selection.main.head,n=e.doc.lineAt(t);return{offset:t,line:n.number,column:t-n.from+1}}var li=new eT.j(function(e){return eE.tk.focusChangeEffect.of(function(t,n){var r=t.facet(tq.Yp);return r&&e(r,n?{type:"focus",position:lr(t)}:{type:"blur"}),null})}),lo=new eT.j(function(e){return eE.tk.updateListener.of(function(t){if(t.selectionSet){var n=t.state.facet(tq.Yp);n&&e(n,{type:"update",hasFocus:t.view.hasFocus,position:lr(t.state)})}})}),la=n(52425),ll=n(43471),lc=n(59500),ls=n(82646),lu=n(40042),ld=n(91664),lf=n(25978),lh=n(6191),lp=n(27025),lm=n(70995),lv=n(73590),lg=n(44707),ly=n(30341),lb=n(27894),lw=n(50783),lZ=n(44906),lx=eE.tk.theme({"& .cm-scrollbar-gutter":{backgroundColor:nW.TV.backgroundDefault},"& .cm-scrollbar-inner":{borderColor:nW.TV.backgroundHigher}}),lC=new eT.j(function(e,t,n){var r;return e||!t?null:[lx,r9.of({create:function(){return{dom:document.createElement("div")}}}),rW.compute(["doc",tB],function(e){var t=e.field(tB,!1);if(!t)return null;for(var r=[],i=1;i<=e.doc.lines;i++)switch(t.getLineChangeType(i)){case tR.dQ.COVERED:r.push({number:i,color:n.values.global.greenDefault,zIndex:1});break;case tR.dQ.MODIFIED:r.push({number:i,color:n.values.global.blueDefault,zIndex:0})}return r}),rq,(r=({color:n.values.global.foregroundDefault}).color,rH.compute(["doc","selection"],function(e){return e.selection.ranges.map(function(t){var n=t.head;return{color:r,number:e.doc.lineAt(n).number,zIndex:1/0}})}))]}),l_=new eT.j(function(){return(0,eE.CT)()});function lS(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,E,T,R,I,D,U,M,X,F,W,H,V,z,j,Y,K,ee,et,en,er,ei,eo,ea,el,ed,ef,eh,ep,em,ev,eg,eb,ew,ex,eC,e_,eS,ek,eT,eB,eG,eO,eU,eM,eX,eF,eW,eH,eV,ez,ej,eK,e$,e3,e6,e5,tt,tn,tr,ti,to,ta,tl,tc,ts,tu,td,tf,th,tp,tm,tv,tg,ty,tb,tw,tZ,tx,tC,t_,tS=e.filePath,tk=e.autoFocus,tE=e.isHidden,tT=e.deeplink,tR=e.onDeeplinkUpdated,tI=e.openFile,tD=e.openThreadsInbox,tB=e.openPane,tG=e.performPaneOperation,tA=(0,eD.Z)(),tP=tA.fs,tN=tA.debuggest,tL=tA.presence,tO=tA.runner,tU=(0,N.Gn)("rulers","minimapDisplay","showLeadingWhitespace","showEnclosedWhitespace","showTrailingWhitespace","showSelectedWhitespace").preferences,tM=(0,oT.Z)(),tH=tM.ref,tV=tM.view;(0,es.VD)(tV);var tz=(0,eu.FS)(),t2=iT.use(!!(null==tz?void 0:tz.match(/Chrome/i))&&!!(null==tz?void 0:tz.match(/Android/i))),t3="/replEnvironmentDesktop"===J().pathname,t4=(0,$.useContext)(ll.B3),t9=(0,iR.jT)(),t7=(n=(t={path:tS,isHidden:tE}).path,r=t.isHidden,i=(0,ln.NH)(),o=li.use(i),a=lo.use(i),(0,$.useEffect)(function(){i(n,{type:r?"hidden":"unhidden"})},[r,i,n]),(0,$.useEffect)(function(){return function(){i(n,{type:"unmount"})}},[i,n]),(0,$.useMemo)(function(){return[o,a]},[o,a])),nr=(s=(l={view:tV,presence:tL,fs:tP,filePath:tS}).view,u=l.presence,d=l.fs,f=l.filePath,h=ix.use(f,d,u),p=i_.use(u),m=(0,iI.Z)().trackTimeToLoadFileEnd,v=(0,iR.uV)(),g=(0,iR.Id)(),y=(0,iR.I7)(),b=(0,$.useMemo)(function(){return{trackTimeToLoadFileEnd:m,throwBsod:v,setBsodFilePathVersion:g,deleteBsodFilePathVersion:y}},[y,g,v,m]),w=iN.use(f,d,b),Z=null===(c=(0,P.IK)(s,rO.o))||void 0===c||c,E=(0,$.useMemo)(function(){return[w,h,p]},[w,h,p]),(0,$.useMemo)(function(){return{isLoading:Z,extensions:E}},[Z,E])),ns=nr.isLoading,nu=nr.extensions;R=(T={view:tV,autoFocus:tk,isLoading:ns}).view,I=T.isLoading,D=T.autoFocus,(0,$.useEffect)(function(){D&&R&&!I&&R.focus()},[R,I,D]);var nd=function(){var e=(0,oK.Z)(),t=(0,$.useContext)(o$.d);if(!t)throw Error("Expected codemirror state to be in codemirror state context");return o3.use(e,t)}(),nf=(M=(U={filePath:tS,isLoading:ns,openFile:tI}).filePath,X=U.isLoading,F=U.openFile,W=(0,eD.Z)().fs,H=(0,e4.Z)(M),V=(0,N.Gn)("acceptSuggestionOnCommitCharacter","codeIntelligence","semanticTokens").preferences,z=(0,tX.P5)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),j=X||!V.codeIntelligence||!H.find(function(e){return e.isSupportedFile(M)}),Y=(0,$.useMemo)(function(){return new tY.R(j?[]:function(e,t,n,r){if(!t.length)return[];var i,o,a,l,c,s,u=[(l=(a={lspClients:t,path:n}).lspClients,c=a.path,eE.lg.define(function(e){var t,n,r,i,o,a;return n=(t={lspClients:l,path:c,view:e}).lspClients,r=t.path,i=t.view,o=rv().v4(),a=function(e){var t,n=rg.get(e.clientId);return(null!==(t=null==n?void 0:n.get(r))&&void 0!==t?t:[])[0]===o},function(){var e=!0,t=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var s,u=l.value,d=rg.get(u.clientId),f=null!==(s=null==d?void 0:d.get(r))&&void 0!==s?s:[];d?d.set(r,(0,S._)(f).concat([o])):rg.set(u.clientId,new Map([[r,[o]]])),u.notify.didOpen(r,i.state.doc.toString())}}catch(e){t=!0,a=e}finally{try{e||null==c.return||c.return()}finally{if(t)throw a}}}(),{id:o,destroy:function(){var e=!0,t=!1,i=void 0;try{for(var a,l=n[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c,s=a.value,u=rg.get(s.clientId),d=(null!==(c=null==u?void 0:u.get(r))&&void 0!==c?c:[]).filter(function(e){return e!==o});s.getServerState()===rp.a.INITIALIZED&&s.isOpen(r)&&s.notify.didClose(r),0===d.length?null==u||u.delete(r):null==u||u.set(r,d)}}catch(e){t=!0,i=e}finally{try{e||null==l.return||l.return()}finally{if(t)throw i}}},update:function(e){var t=!0,i=!1,o=void 0;try{for(var l,c,s=n[Symbol.iterator]();!(t=(c=s.next()).done);t=!0){var u,d=c.value;if(!a(d)||!e.docChanged)return;var f=null===(u=d.getServerCapabilities())||void 0===u?void 0:u.textDocumentSync;if(f===nl.TextDocumentSyncKind.None||!d.isOpen(r))return;if(f===nl.TextDocumentSyncKind.Full){var h=e.view.state.doc.toString();d.notify.didChange(r,[{text:h}]);return}l||(l=function(e,t){var n=[],r=t;return e.iterChanges(function(e,t,i,o,a){var l=a.sliceString(0),c=t-e,s=c+i;n.push({range:{start:(0,eQ.sg)(r,i),end:(0,eQ.sg)(r,s)},rangeLength:c,text:l}),r=r.replace(i,s,a)}),n}(e.changes,e.startState.doc)),d.notify.didChange(r,l)}}catch(e){i=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw o}}}}})),(0,A.Fq)({lspClients:t,path:n}),function(e,t){function n(e){return(0,e2.Z)(e).isTextDocumentSyncSupported}return eE.lg.fromClass(function(){"use strict";function r(e){(0,eP._)(this,r),this.dispose=this.listen(e.state.facet(tq.Yp))}var i=r.prototype;return i.update=function(e){(0,eL.aU)(e,tq.Yp)&&(this.dispose=this.listen(e.state.facet(tq.Yp)))},i.destroy=function(){this.dispose&&this.dispose()},i.listen=function(r){if(this.dispose&&this.dispose(),r&&t.find(function(e){return n(e)}))return e.watchTextFile(r,{onFlush:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value;n(c)&&c.isOpen(r)&&c.notify.didSave(r)}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},r}())}(e,t),(0,rw.BB)(t)];return(0,rb.isMobile)()||u.push((i=null!==(s=t.find(function(e){var t;return null===(t=e.getServerCapabilities())||void 0===t?void 0:t.completionProvider}))&&void 0!==s?s:t[0],new tY.R(function(e){return function(e){var t=e.lspClient,n=e.view,r=n.state.facet(tq.Yp),i=.01>Math.random(),o=0,a=function(e,n){if(i&&r){var o=t.getLanguageId(r);return ni.kg.info("lsp:autocomplete:".concat(e),(0,x._)({languageId:o},n)),(0,no.j)(no.U3.LSP_COMPLETION_USED,(0,x._)({type:e,sampleRate:.01},n))}};function l(){return(l=(0,eJ._)(function(e){var i,l,c,s,u;return(0,eY.Jh)(this,function(d){switch(d.label){case 0:if(!(l=t.getServerCapabilities())||!(null==l?void 0:l.completionProvider)||!(c=function(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:nl.CompletionTriggerKind.Invoked};var i=n.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);return(null==t?void 0:t.includes(o))?{triggerKind:nl.CompletionTriggerKind.TriggerCharacter,triggerCharacter:o}:a.match(/\w$/)?{triggerKind:nl.CompletionTriggerKind.Invoked}:null}(e,(null==l?void 0:null===(i=l.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[])))return[2,null];if(o&&t.notify.cancelRequest(o),!r)throw Error("path not found");return o=t.generateId(),n.dispatch({effects:[nt.of(null)]}),[4,t.request.completion(r,(0,eQ.sg)(e.state.doc,e.pos),c,{id:o})];case 1:if("error"in(s=d.sent())||(u=s.result,e.aborted||!u))return[2,null];return[2,function(e){for(var t=e.context,n=e.items,r=e.itemDefaults,i=e.client,o=e.path,a=e.trackCompletion,l=0,c=null!==(O=(0,t0.Z)(t.state))&&void 0!==O?O:"unknown",s=null!==(B=null===(D=i.getServerCapabilities())||void 0===D?void 0:null===(I=D.completionProvider)||void 0===I?void 0:I.allCommitCharacters)&&void 0!==B?B:[],u=(G=n.filter(function(e){return!!e.label}),A=["label","kind"],P=new Set,G.filter(function(e){var t=A.map(function(t){return e[t]}).join("␞");return!P.has(t)&&(P.add(t),!0)})).map(function(e){var n,u,d,f,h,p,m=e.additionalTextEdits,v={label:e.label,detail:(null===(p=i.getServerCapabilities())||void 0===p?void 0:null===(h=p.completionProvider)||void 0===h?void 0:null===(f=h.completionItem)||void 0===f?void 0:f.labelDetailsSupport)?null===(n=e.labelDetails)||void 0===n?void 0:n.description:null==e?void 0:e.detail,apply:function(t,n,r,l){if(e.insertTextFormat===nc.InsertTextFormat.Snippet){var s=[];m&&s.push({changes:m.map(function(e){return nq(t,e)})});var u=new nB(null!==(h=null!==(f=null===(d=e.textEdit)||void 0===d?void 0:d.newText)&&void 0!==f?f:e.insertText)&&void 0!==h?h:e.label);if(e.textEdit&&("range"in e.textEdit)){var d,f,h,p,v=l;r=(p=nj(t.state,e.textEdit.range)).from,l=Math.max(l=p.to,v)}var g=u.apply({view:t,from:r,to:l,path:o,completion:n});t.dispatch.apply(t,(0,S._)(s).concat([g])),a("completion-accepted",{language:c,completionKind:e.kind,insertTextFormat:e.insertTextFormat});return}var y=function(e){var t,n=e.view,r=e.item,i=e.from,o=e.to,a=n.state,l=a.doc,c=a.selection,s=[];if(r.textEdit){if(!("range"in r.textEdit))return;var u=nq(n,r.textEdit);if(!u)return;u.to=Math.max(u.to,c.main.to),s.push(u)}else{var d=r.insertText||r.label,f=n.state.wordAt(o);f&&f.to>o&&d.includes(n.state.doc.sliceString(o,f.to))&&(o=f.to),s.push({from:i,to:o,insert:d})}var h=(0,_._)(s,1)[0],p="";null===(t=r.additionalTextEdits)||void 0===t||t.forEach(function(e){var t=nq(n,e);t&&(("from"in h)&&t.from===h.from&&(p=t.insert),s.push(t))});var m=o-i;c.ranges.forEach(function(e){if(e!==c.main){if(!("insert"in h)||!h.insert)throw Error("Expected insert in mainChange");var t=e.from-m,n=p+h.insert;s.push({from:t,to:e.to,insert:n})}});var v=s.map(function(e){return("from"in e)&&void 0!==e.to?(0,C._)((0,x._)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e}),g=eN.as.of(v,l.length),y=c.ranges.map(function(e){return e.map(g,0)});return{changes:g,selection:eN.jT.create(y,c.mainIndex)}}({view:t,item:(0,C._)((0,x._)({},e),{additionalTextEdits:m}),to:l,from:r});y&&(a("completion-accepted",{language:c,completionKind:e.kind,insertTextFormat:e.insertTextFormat}),t.dispatch({changes:y.changes,selection:y.selection,annotations:t$.Jv.of(n)}),e.command&&i.request.executeCommand(e.command.command,e.command.arguments))},type:e.kind&&nz[e.kind],filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase(),commitCharacters:t.state.facet(nV)?null!==(d=null!==(u=null==e?void 0:e.commitCharacters)&&void 0!==u?u:null==r?void 0:r.commitCharacters)&&void 0!==d?d:s:void 0};return i&&(0,e2.Z)(i).isCompletionItemResolveSupported?v.info=(0,eJ._)(function(){var t,n,r,s,u;return(0,eY.Jh)(this,function(d){switch(d.label){case 0:return[4,i.request.resolveCompletionItem(e)];case 1:if(n=("cancelled"in(t=d.sent()))&&t.cancelled,r=("result"in t)?t.result:null,n||!r||(r.additionalTextEdits&&(m=r.additionalTextEdits),l++,s=[],r.detail&&r.detail!==e.detail&&r.detail!==e.label&&(u=["```"+(0,na.extname)(o).slice(1),r.detail,"```"].join("\n"),s.push((0,k.tZ)(np,{className:"lsp-completion-detail",content:{value:u,kind:"markdown"}},"".concat(l,"-detail")))),r.documentation&&s.push((0,k.tZ)(np,{content:r.documentation},"".concat(l,"-documentation"))),0===s.length))return[2,null];return a("resolution-presented",{language:c,resolutionSource:"request",completionKind:e.kind}),[2,(0,t1.V)((0,k.tZ)("div",{children:s}))]}})}):e.documentation&&(v.info=function(){return e.documentation?(a("resolution-presented",{language:c,resolutionSource:"documentation",completionKind:e.kind}),(0,t1.V)((0,k.tZ)("div",{children:(0,k.tZ)(np,{content:e.documentation})}))):null}),v}),d=((u=u.sort(function(e,t){return e.sortText<t.sortText?-1:e.sortText>t.sortText?1:0})).length%2?u.length-1:u.length)/2,f=0;f<=d;f++){if(0===f&&u[d]){u[d].boost=0;continue}var h=u[d-f];if(h){var p=u[d-f+1],m=p.sortText,v=p.boost,g=void 0===v?0:v;h.boost=h.sortText===m?g:g+1}var y=u[d+f];if(y){var b=u[d+f-1],w=b.sortText,Z=b.boost,E=void 0===Z?0:Z;y.boost=y.sortText===w?E:E-1}}var T=null!==(U=null===(N=u[0])||void 0===N?void 0:N.boost)&&void 0!==U?U:0,R=null!==(M=null===(L=u[u.length-1])||void 0===L?void 0:L.boost)&&void 0!==M?M:0;if(T>99||R<-99)for(var I,D,B,G,A,P,N,L,O,U,M,X,F=99/Math.max(Math.abs(T),Math.abs(R)),W=0;W<u.length;W++)u[W].boost=(null!==(X=u[W].boost)&&void 0!==X?X:0)*F;var H=(0,_._)(function(e){var t=Object.create(null),n=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;t[c[0]]=!0;for(var s=1;s<c.length;s++)n[c[s]]=!0}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=nH(t)+nH(n)+"*$";return[RegExp("^"+u),new RegExp(u)]}(u),2),V=H[0],z=H[1],j=t.matchBefore(z),q=t.pos;return j&&(q=j.from),u.length&&a("completion-options-presented",{language:c}),{from:q,options:u,validFor:V}}({context:e,items:Array.isArray(u)?u:u.items,itemDefaults:Array.isArray(u)?{}:u.itemDefaults,client:t,path:r,trackCompletion:a})]}})})).apply(this,arguments)}return[t5,ne,nn,(0,t$.ys)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,tQ.o)(e)?t6:""},addToOptions:[{render:function(e,t){if(!(0,tQ.o)(t))return null;var n=(0,t1.V)((0,k.tZ)("div",{className:"lsp-completion-keyboard-shortcuts",children:(0,k.tZ)(t8.ZP,{size:"inherit",shortcut:{key:"⏎"}})}));return n.style.display="inline-flex",n},position:200}],override:[(0,t$.eC)(["LineComment","BlockComment"],function(e){return l.apply(this,arguments)})]}),nJ,nY]}({lspClient:i,view:e})})),function(e){var t={current:new Map};function n(){return(n=(0,eJ._)(function(n,i){var o,a,l,c,s,u;return(0,eY.Jh)(this,function(d){switch(d.label){case 0:if(!(a=n.facet(tq.Yp))||(l=n.field(r,!1),c=n.field(ru,!1),!(s=e.filter(function(e){var t,n,r,i=null!==(r=null===(n=e.getServerCapabilities())||void 0===n?void 0:null===(t=n.signatureHelpProvider)||void 0===t?void 0:t.triggerCharacters)&&void 0!==r?r:[];return!!(i.length&&(l||c&&i.includes(c)))})).length))return[2,null];return[4,function(e,t,n,r,i){return rh.apply(this,arguments)}(n,i,s,a,t)];case 1:if(!(null==(u=d.sent())?void 0:null===(o=u.signatures)||void 0===o?void 0:o.length))return[2,null];return[2,u]}})})).apply(this,arguments)}var r=eN.QQ.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=(0,C._)((0,x._)({},e),{pos:t.newSelection.main.from})),(0,rl.j)(t,rc.effect,function(n){var r=n.value;e=r?{pos:t.newSelection.main.from,help:r,index:0}:null}),(0,rl.j)(t,rs,function(t){var n=t.value;if(e){var r=e.help.signatures.length,i=(r+e.index+n)%r;e=i>=e.help.signatures.length||i<0?null:(0,C._)((0,x._)({},e),{index:i})}}),e)},provide:function(e){var t=function(t){var n=t.state.field(e);if(!n)throw Error("expected nonnull field");var r=rd.create({help:n.help,index:n.index});return{dom:r,update:function(t){rd.update(r,function(r){var i=t.state.field(e);return i&&i!==n?{help:i.help,index:i.index}:r})}}};return eE.hJ.compute([e],function(n){var r=n.field(e);return r?{pos:r.pos,create:t,above:!0}:null})}}),i=eE.lg.define(function(){var t,r=ec()((t=(0,eJ._)(function(e){var t,r,i;return(0,eY.Jh)(this,function(o){switch(o.label){case 0:if(!(t=e.state.selection.main).empty)return[3,2];return r=e.state.field(rc.state,!1),[4,function(e,t){return n.apply(this,arguments)}(e.state,t.from)];case 1:(i=o.sent())&&!r&&(0,t$._B)(e),e.dispatch({effects:rc.effect.of(i)}),o.label=2;case 2:return[2]}})}),function(e){return t.apply(this,arguments)}),0);return{update:function(t){e.some(function(e){return(0,e2.Z)(e).isSignatureHelpSupported})&&t.selectionSet&&t.state.selection.main.empty&&r(t.view)}}});function o(e,t){var n=e.state.field(rc.state,!1);return"active"!==(0,t$.LR)(e.state)&&null!=n&&("navigate"!==t||n.signatures.length>1)}var a=function(e){return function(t){return!!o(t,"navigate")&&(t.dispatch({effects:rs.of(e)}),!0)}},l=[{key:"ArrowDown",run:a(1)},{key:"ArrowUp",run:a(-1)},{key:"Escape",run:function(e){return!!o(e,"dismiss")&&(e.dispatch({effects:rc.effect.of(null)}),!0)}}];return[r,rc.state,ru,i,eN.Wl.high(eE.$f.of(l))]}(t),(o=function(e){var t,n=null;return(0,eE.bF)((t=(0,eJ._)(function(t,r){var i,o,a,l,c,s;return(0,eY.Jh)(this,function(u){switch(u.label){case 0:if(t.state.facet(n1.j)||!(0,e2.Z)(e).isHoverSupported||!(i=t.state.facet(tq.Yp)))return[2,null];o=(0,eQ.sg)(t.state.doc,r);try{a=t.state.wordAt(r)}catch(e){return[2,null]}if(n){if(n.from===(null==a?void 0:a.from)&&n.to===(null==a?void 0:a.to))return[2,null];e.notify.cancelRequest(n.id)}return n={id:l=e.generateId(),from:null==a?void 0:a.from,to:null==a?void 0:a.to},[4,e.request.hover(i,o,{id:l})];case 1:if(c=u.sent(),n=null,"error"in c||null===(s=c.result))return[2,null];return[2,function(e){var t,n,r=e.hover,i=e.state,o=e.offset;if((Array.isArray(r.contents)||"string"==typeof r.contents)&&0===r.contents.length)return null;var a="",l=i.doc;if(r.range)t=(0,eQ.RL)(l,r.range.start),n=(0,eQ.RL)(l,r.range.end),a=l.sliceString(t,n);else if(n=void 0,(t=o)<=i.doc.length){var c=i.wordAt(t);c?(a=l.sliceString(c.from,c.to),t=Math.min(t,c.from),n=c.to):a=l.sliceString(t,t+1)}return{pos:t,end:n,create:function(e){var t=(0,t1.V)((0,k.tZ)(n0,{content:r.contents,textHovered:a}));return t.classList.add("hover-tooltip"),t.style.padding="0",{dom:t,mount:function(){!function(e,t){t.forEach(function(t){return setTimeout(e,t)})}(function(){(0,eE.E2)(e)},[0,50,200,1e3])}}},above:!0}}({hover:s,offset:r,state:t.state})]}})}),function(e,n){return t.apply(this,arguments)}),{hideOn:function(e){return!e.annotation(eN.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select")||e.state.facet(n1.j))},hoverTime:0})},[t.map(function(e){return o(e)}),eE.tk.domEventObservers({mousedown:function(e,t){!(e.target instanceof HTMLElement&&e.target.matches(".cm-tooltip *"))&&(0,eE.Dm)(t.state)&&t.dispatch({effects:eE.E8})},keydown:function(e,t){"Escape"===e.key&&(0,eE.Dm)(t.state)&&t.dispatch({effects:eE.E8})},scroll:function(e,t){(0,eE.Dm)(t.state)&&t.dispatch({effects:eE.E8})}})]),(0,ry.DZ)(t,e),(0,n2.jd)({lspClients:t,openFile:r}),function(e,t){if(!t)return[];var n,r=eN.Py.define(),i=eN.Py.define();return[eE.tk.updateListener.of((n=(0,eJ._)(function(t){var n,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,_,k,E,T,R,I,D,B,G,A,P,N,L,O,U,M;return(0,eY.Jh)(this,function(X){switch(X.label){case 0:if(!e.some(function(e){var t=(0,e2.Z)(e);return t.isFindReferencesSupported||t.isFindDefinitionSupported}))return[2];n=null,o=!0,a=!1,l=void 0;try{for(c=t.transactions[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){u=s.value,d=!0,f=!1,h=void 0;try{for(p=u.effects[Symbol.iterator]();!(d=(m=p.next()).done);d=!0)(v=m.value).is(n4.h)&&(n=v.value)}catch(e){f=!0,h=e}finally{try{d||null==p.return||p.return()}finally{if(f)throw h}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}if(!n||!(g=t.view.state.facet(tq.Yp)))return[2];y=t.state.doc,b=(0,eQ.sg)(y,n),w=[],Z=!0,x=!1,C=void 0;try{for(_=function(){var e=E.value,t=(0,e2.Z)(e);t.isFindDefinitionSupported&&w.push(e.request.findDefinitions(g,b).then(function(t){return{client:e,response:t,type:"definition"}})),t.isFindReferencesSupported&&w.push(e.request.findReferences(g,b,{includeDeclaration:!1}).then(function(t){return{client:e,response:t,type:"references"}}))},k=e[Symbol.iterator]();!(Z=(E=k.next()).done);Z=!0)_()}catch(e){x=!0,C=e}finally{try{Z||null==k.return||k.return()}finally{if(x)throw C}}return T=Promise.all(w),(0,n3.SC)(t.view,T),[4,T];case 1:R=X.sent(),I=[],D=[],B=new Set,G=!0,A=!1,P=void 0;try{for(N=function(){var e=O.value,t=e.client,n=e.response,r=e.type;if(("error"in n))throw Error("Something went wrong fetching references: ".concat(n.error.message));var i=(0,n6.g)(n.result);if(!i)return"continue";"definition"===r&&I.push.apply(I,(0,S._)(i)),"references"===r&&D.push.apply(D,(0,S._)(i)),i.forEach(function(e){B.add(t.documentUriToPath(e.uri))})},L=R[Symbol.iterator]();!(G=(O=L.next()).done);G=!0)N()}catch(e){A=!0,P=e}finally{try{G||null==L.return||L.return()}finally{if(A)throw P}}if(!I.length&&!D.length)return(0,n8.J)(t.view,{message:"No references found",offset:n}),t.view.dispatch({effects:i.of(null)}),[2];return U=Array.from(B).filter(function(e){return e!==g}),M=y.toJSON().join("\n"),t.view.dispatch({effects:r.of({references:D,definitions:I,currentFile:g,currentFileContents:M,files:U})}),[2]}})}),function(e){return n.apply(this,arguments)})),eN.QQ.define({create:function(){return null},update:function(e,t){var n=e,o=!0,a=!1,l=void 0;try{for(var c,s=t.effects[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u.is(r)&&(n=u.value),u.is(i)&&(n=null)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return n},provide:function(e){return eE.hJ.compute([e],function(n){var r=n.field(e),o=n.facet(tq.Yp);if(!r)return null;var a=n.selection.asSingle().main;return{pos:a.from,end:a.to,create:function(e){var n=(0,t1.V)((0,k.tZ)("div",{children:(0,k.tZ)(ro,(0,C._)((0,x._)({},r),{onClose:function(){e.dispatch({effects:i.of(null)})},jumpToPosition:function(n){if(t){if(n.path!==o){t(n);return}var r=n.line,i=n.col;(0,tW.S)({view:e,line:r,col:i}),e.focus()}}}))}));return n.classList.add("cm-lsp-tooltip"),n.classList.add("replit-tooltip"),n.style.padding="0",n.style.overflow="scroll",{dom:n}}}})}})]}(t,r),(0,ra.f)(e,t)),u}(W,H,M,F))},[H,M,W,F,j]),K=(0,$.useMemo)(function(){return new tY.R(function(){return tK.T.of(H.map(function(e){return(0,e2.Z)(e)}))})},[H]),(0,$.useEffect)(function(){return!H.length||j?Y.set(null):(0,rZ.uf)(H.map(function(e){return e.onServerCapabilitiesChange(function(){K.set(tK.T.of(H.map(function(e){return(0,e2.Z)(e)})))})}))},[K,H,Y,j]),[K.extension,Y.extension,(0,A.wB)(H,V.codeIntelligence),rG.use(V.acceptSuggestionOnCommitCharacter),rB.use(V.semanticTokens&&z?H:null)]),nh=(et=(ee={debuggest:tN,filePath:tS}).debuggest,en=ee.filePath,er=(0,eD.Z)().fs,ei=(0,eI.Z)(),eo=(0,eR.Z)(et.mainClient),eA.use(eo,ei,en,er));(0,tW.Z)({filePath:tS,view:tV,isLoading:ns,deeplink:tT,onDeeplinkUpdated:tR});var nm=tj.use((0,ey.f6)()),nv=(ed=(ea={view:tV,filePath:tS}).view,ef=ea.filePath,eh=(0,eD.Z)().fs,ep=(0,ey.xZ)(null!==(el=null==ed?void 0:ed.state.facet(tq.Yp))&&void 0!==el?el:null),(0,_._)((0,lf.L)({accept:[eZ.z.Code,lh.FILE],drop:function(e,t){if(ed){var n=t.getClientOffset(),r=n?ed.posAtCoords(n):null;if(null!==r){var i=function(e){ed.focus(),ed.dispatch({changes:{from:r,insert:e},selection:{anchor:r,head:r+e.length}})};if(e.type===eZ.z.Code)i(e.code);else{var o=!0,a=!1,l=void 0;try{for(var c,s=e.files[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;ep?(0,ld.L0)(u).then(function(e){return i('"'+e+'"')}):ef&&(0,Q.gK)(ef)&&(0,lp.r)(u,eh,ef).then(i)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}}}}}),2)[1]),ng=(0,e7.Z)({filePath:tS}),ny=(ev=(em={view:tV,filePath:tS,isLoading:ns,enable:t3,openThreadsInbox:tD}).view,eg=em.filePath,eb=em.isLoading,ew=em.enable,ex=em.openThreadsInbox,eC=(0,ac.kM)(),(0,$.useEffect)(function(){ev&&eC&&ev.dispatch({effects:[ax.YM.of(eC),ax.eR.of(eC)]})},[ev,eC]),e_=(0,aY.F)().theme,ek=(eS=(0,_._)((0,$.useState)([nW.TV.accentPrimaryDimmest,nW.TV.accentPrimaryDimmer]),2))[0],eT=eS[1],(0,$.useEffect)(function(){var e=of(e_.values.global.accentPrimaryDimmest);eT(["rgba(".concat(e.join(","),", 0.5)"),nW.TV.accentPrimaryDimmer])},[e_]),eB=o5(eg,eb,!0,ew),eG=(0,eD.Z)().fs,eU=(eO=(0,o8.kL)(eg)).contentRef,eM=eO.loadedFile,eX=eO.transformSelectionRef,(0,$.useEffect)(function(){var e=!1,t=eX.current,n=eU.current;if(eM&&t&&n&&!eb&&ev){var r=Object.values(eB);if(0===r.length){ev.dispatch({effects:ax.qi.of({})});return}Promise.all(r.map(function(e){return(0,o8.Ft)({anchor:e,version:eG.getOTVersion(eg),transformSelection:t,content:n})})).then(function(t){if(!e){var n=t.filter(function(e){return!!e}).map(function(e){if(!e)throw Error("expected resolved anchor");return(0,x._)({},e.anchor,null==e?void 0:e.newSelection)});return ev.dispatch({effects:ax.qi.of(n.reduce(function(e,t){return e[t.id]=t,e},{}))}),function(){e=!0,ev&&ev.dispatch({effects:ax.qi.of({})})}}})}},[eB,ev,eM,eG,eX,eU,eg,eb]),a$.use(ew,ek,ex));eW=(eF={view:tV,filePath:tS}).view,eH=eF.filePath,eV=(0,q.useRouter)(),ez=(0,O.Gv)(eV),ej=(0,$.useRef)({revisionId:rM()(),textEditorState:a2(eH),hasGhostwriterSuggestion:!1}),eK=(0,$.useRef)(eH),e3=(e$={view:eW}).view,e5=void 0===(e6=e$.initialExtension)?[]:e6,(tt=(0,$.useRef)()).current||(tt.current=new eN.F6),(0,$.useEffect)(function(){if(e3){var e=tt.current;if(void 0===e.get(e3.state))e3.dispatch({effects:eN.Py.appendConfig.of(e.of(e5))});else throw Error("Did not expect useEffect hook to rerun in useCompartment");return function(){e3.dispatch({effects:e.reconfigure([])})}}},[e3]),tn=tt.current,(0,$.useEffect)(function(){if(eW&&ez){var e=a3(eH,eW);ej.current={revisionId:rM()(),textEditorState:e,hasGhostwriterSuggestion:ej.current.hasGhostwriterSuggestion},a4(eH,eW,ej.current);var t=function(t){var n,r=(0,tQ.o)(eW.state),i=(null===(n=ej.current)||void 0===n?void 0:n.hasGhostwriterSuggestion)!==r;t.docChanged?(ej.current={revisionId:rM()(),textEditorState:e,hasGhostwriterSuggestion:r},a4(eH,eW,ej.current)):(t.selectionSet||t.focusChanged||i)&&(ej.current={revisionId:ej.current.revisionId,textEditorState:e,hasGhostwriterSuggestion:r},a4(eH,eW,ej.current))};return eW.dispatch({effects:tn.reconfigure(eE.tk.updateListener.of(function(e){t(e)}))}),function(){eW.dispatch({effects:tn.reconfigure([])})}}},[eW,eH,tn,ez]),(0,$.useEffect)(function(){if(eW&&ez){var e=function(e){a4(eH,eW,ej.current,e.messageId)},t=function(t){a5(eH,eK.current,eW,ej.current,t)?e(t):(0,aQ.pl)(t.messageId)},n=function(t){a5(eH,eK.current,eW,ej.current,t)?e(t):(0,aQ.pl)(t.messageId)},r=function(r){try{var i=r.data;if(!(0,a1.CF)(i)||i.protocolVersion!==a1.Wj)return;var o=i.payload;i.messageDirection===a1.s1.TO_NATIVE&&(0,a1.H7)(o)&&(eK.current=o.activePaneFilePath),(0,aQ.fp)(r,function(r){var o=r.type;switch(o){case a1.cF.TEXT_EDITOR_STATE_REQUEST:e(i);break;case a1.cF.REQUEST_SET_SELECTION:case a1.cF.REQUEST_REPLACE_SELECTION:case a1.cF.REQUEST_SET_TEXT:case a1.cF.REQUEST_INSERT_TEXT:case a1.cF.REQUEST_PASTE_TEXT:t(i);break;case a1.cF.TEXT_EDITOR_REQUEST_ACTION:n(i);break;default:(0,a9.Z)(o)}})}catch(e){throw Error("Invalid message: ".concat(e))}};return window.addEventListener("message",r),a4(eH,eW,ej.current),function(){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rM()(),n={messageType:a1.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,aQ.bG)(n,t)})(eH),window.removeEventListener("message",r)}}},[eW,eH,ez]);var nb=(tr=(0,a7.K)((0,L.Z)(function(){return{path:tS}},[tS])),le.use(tr)),nw=(0,lw.O)(),nZ=(0,$.useMemo)(function(){if(!nw)return!0;var e=nw.get(tS);return!e||e.index===lZ.h.UNTRACKED||e.worktree===lZ.h.UNTRACKED},[nw,tS]),nx=(to=(ti={filePath:tS,disableDiff:nZ,disableConflicts:nZ}).filePath,tl=void 0!==(ta=ti.disableDiff)&&ta,ts=void 0!==(tc=ti.disableConflicts)&&tc,tu=(0,tX.P5)({controlName:"flag-git-gud",logFlagToAnalytics:!1}),td=(0,tX.P5)({controlName:"flag-git-gud-gutter",logFlagToAnalytics:!1}),tf=(0,tX.P5)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),th=(0,eD.Z)().git,tl=!tu||!td||tl,ts=!tu||!tf||ts,tF.use(th,void 0===to?null:to,tl,ts)),nC=(0,O.T3)(),n_=(0,ey.xZ)(null!==(t_=null==tV?void 0:tV.state.facet(tq.Yp))&&void 0!==t_?t_:null),nS=ox.use(n_,nC),nk=iL.hx.use(n_,tP),nE=os.use(nC),nT=oG.use(tU.rulers),nR=(0,aY.F)(),nI=rL.use(nC,tU.minimapDisplay,nR),nD=(0,tX.P5)({controlName:"flag-pretty-scrollbar"}),nG=lC.use(nC,nD,nR),nA=B.NS.use(tO),nP=(tp={filePath:tS},tm=(0,eD.Z)().container,tg=(tv=(0,e0.Z)()).showError,ty=tv.showConfirm,tb=(0,e1.T)(),tw=(0,N.Gn)("codeIntelligence").preferences,tZ=(0,e4.Z)(tp.filePath),tx=(0,e8.Z)(tZ),e9.use(tb,tm,tZ,tx,tw.codeIntelligence,tp.filePath,function(){return ty("Formatted ".concat(tp.filePath," successfully"),1500)},function(){return tg("Sorry, formatting ".concat(tp.filePath," failed"),1500)})),nN=eq.use(tU.showLeadingWhitespace,tU.showEnclosedWhitespace,tU.showTrailingWhitespace,tU.showSelectedWhitespace),nL=(0,lu.Ls)({path:tS}),nO=(0,lu.fD)({path:tS}),nU=(0,lu.jg)({path:tS}),nM=(0,$.useCallback)(function(){tV&&nL(tV,"shortcut")},[tV,nL]),nX=(0,lm.u)({isMobile:nC,generateCode:nL,filePath:tS,openPane:tB}),nF=(0,$.useCallback)(function(){tB({type:"ghostwriterChat"})},[tB]),nK=(0,$.useCallback)(function(e){tB({type:"searchReplace",data:{initialQuery:e}})},[tB]),n$=(0,te.W)({onGenerateCode:nM,onReplyInChat:nF}),nQ=(0,lc.av)(),n5=nQ.onContextMenu,n9=nQ.closeContextMenu,n7=nQ.openContextMenu,re=nQ.isVisible,rt=(0,$.useCallback)(function(e){tV&&(0,eE.$1)(tV,e,"context-menu")&&(n9(),e.stopPropagation(),e.preventDefault())},[n9,tV]),rn=(0,_._)((0,lu.aT)({openFile:tI,openSearchAndReplace:nK,path:tS,view:tV,onCommand:function(e){if(tV){var t=tV.state.selection.main.head;if(t){var n=tV.coordsAtPos(t);n&&n7({target:{x:n.left,y:n.top},command:[rr(),e],width:275,onKeyDownHandler:rt})}}}}),2),rr=rn[0],ri=rn[1],rf=(0,$.useCallback)(function(e){n5(e,{command:rr(),width:275,onKeyDownHandler:rt})},[rr,n5,rt]),rm=(0,$.useCallback)(function(e,t){n7({target:e,command:[rr(),t],width:275,onKeyDownHandler:rt})},[rr,rt,n7]),rx=lu.pZ.use(nC,re,rf),rC=ls.t.use(rm),r_=(0,$.useCallback)(function(e){n7({target:{x:e.right-275,y:e.top},width:275,command:rr(),onKeyDownHandler:rt})},[rr,rt,n7]),rS=(0,lv.W)({editCode:nU,explainCode:nO,generateCode:nL,onMoreClick:r_}),rk=(tC=(0,iO.T)(),ol.use(tC)),rE=(0,tX.P5)({controlName:"flag-problems-pane"}),rT=tJ.y.use(rE),rR=l_.use(),rI=(0,ly.Fs)(tG),rD=lb.Gb.use(tP);return(0,k.tZ)("div",{css:lg.ac,"data-cy":ns?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(tS),children:(0,k.tZ)(ou.ZP,{ref:tH,elementRef:nv,css:lg.Mp,filePath:tS,hideTooltips:tE,extensions:[rx,rC,ri,nu,nh,nd,nf,nX,rR,nS,t2,nE,nx,nG,nI,iL.sy,nk,ik,n$,rk,o4,nT,nN,nA,nP,G.er,nb,ng,ny,oY,oE,nm,nC?[]:rS,t7,rT,rI,rD],onException:function(e){var t,n={filePath:tS,cursorPosition:JSON.stringify(null==t4?void 0:null===(t=t4.get(la._s))||void 0===t?void 0:t.position),fileVersion:t9({filePath:tS})};if(tV){var r=tV.plugin(ik),i=null==r?void 0:r.logs();null==r||r.flush(),n.domText=tV.contentDOM.innerText,n.keystrokes=JSON.stringify(i),n.selection=JSON.stringify(tV.state.selection.main.toJSON()),n.updateDoc=tV.state.doc.sliceString(0)}(0,lt.O)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:n})},noHistory:!0})})}var lk=n(36759),lE=n(19068),lT=n(41974),lR=n(39460),lI=n(53928),lD=n(62435),lB=(0,K.cn)(0),lG=(0,K.cn)(new Map([["normal",[]],["compact",[]]])),lA=(0,K.cn)(null,function(e,t,n){var r=e(lO);t(lG,function(e){return(0,lT.Uy)(e,function(e){var t=e.get(r);if(!t)throw Error("Expect width for: "+r);t[n.index]=n.width})})}),lP=(0,K.cn)(null,function(e,t,n){t(lG,function(e){return(0,lT.Uy)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)(0,_._)(o.value,2)[1].slice(0,n)}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})}),lN=(0,K.cn)(function(e){var t=new Map([["normal",0],["compact",0]]),n=!0,r=!1,i=void 0;try{for(var o,a=e(lG)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,_._)(o.value,2),c=l[0],s=l[1],u=0,d=!0,f=!1,h=void 0;try{for(var p,m=s[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;void 0!==v&&(u+=v)}}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}t.set(c,u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}),lL=(0,K.cn)(function(e){if("normal"===e(lO))return null;var t=e(lG).get("compact");if(!t)return null;var n=e(lB)-24,r=0,i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(void 0!==s){if((n-=s)>0){r++;continue}return r}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return null}),lO=(0,K.cn)(function(e){var t,n=e(lB);return(null!==(t=e(lN).get("normal"))&&void 0!==t?t:0)>n?"compact":"normal"}),lU=(0,ed.X)({item:[ea.l0.viewStyle,lE.gU.listItem,ea.l0.p(6),ea.l0.rowWithGap(4),ea.l0.align.center,{fontSize:ea.TV.fontSizeSmall}]});function lM(e){var t=(0,_._)((0,$.useState)(null),2),n=t[0],r=t[1],i=null!==n&&(null===(s=e.items[n])||void 0===s?void 0:s.popover);if(i)return(0,k.tZ)(k.HY,{children:i});var o=[],a=!0,l=!1,c=void 0;try{for(var s,u,d=e.items[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;f.onClick||f.popover||o.push(f.key)}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return(0,k.tZ)(lk.v2,{disabledKeys:o,onAction:function(t){var n=!0,i=!1,o=void 0;try{for(var a,l=e.items[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;if(c.key===t){if(c.onClick){c.onClick();break}c.popover&&r(e.items.indexOf(c));break}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}},children:e.items.map(function(e){return(0,k.tZ)(lk.sN,{id:e.key,css:lU.item,children:(0,k.tZ)(lX.Provider,{value:function(){},children:(0,$.cloneElement)(e.item,{presentation:"overflowMenu"})})},e.key)})})}var lX=(0,$.createContext)(function(e){});function lF(){return(0,$.useContext)(lX)}var lW=(0,ed.X)({button:[ea.l0.viewStyle,ea.l0.reset.button,ea.l0.rowWithGap(4),ea.l0.center,ea.l0.color.foregroundDimmest,ea.l0.hover([ea.l0.color.foregroundDefault]),ea.l0.height("100%"),{fontSize:12,"&:has(*)":[ea.l0.px(4),lE.gU.nofill,ea.l0.borderRadius(0)]}],tooltip:[ea.l0.backgroundColor.backgroundHighest,ea.l0.borderRadius(4),ea.l0.color.foregroundDimmer,ea.l0.p(4),ea.l0.border({color:ea.TV.outlineDefault}),{fontSize:12}]});function lH(e){var t=(0,oN.Z)(function(t){return e.onWidth(t.width)}),n=(0,_._)((0,$.useState)(null),2),r=n[0],i=n[1];return(0,k.tZ)(er.G,{innerRef:t,children:(0,k.BX)(lk.aJ,{isDisabled:null==r||e.hidden,children:[(0,k.tZ)(lk.zx,{isDisabled:e.isDisabled||e.hidden,css:lW.button,style:e.hidden?{opacity:0,pointerEvents:"none"}:void 0,onPress:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},children:(0,k.tZ)(lX.Provider,{value:i,children:e.children})}),(0,k.tZ)(lk.u,{placement:"top",offset:8,css:lW.tooltip,children:r})]})})}var lV=(0,ed.X)({root:[ea.l0.flex.row,ea.l0.flex.growAndShrink(1),ea.l0.position.relative,{"& > div:first-of-type > button":{borderBottomLeftRadius:4},"& > div:button:last-of-type > button":{borderBottomRightRadius:4}}],middle:[ea.l0.flex.growAndShrink(1)],moreButton:[{width:24},ea.l0.reset.button,ea.l0.center,lE.gU.nofill,ea.l0.height("100%"),ea.l0.position.absolute,ea.l0.right(0),ea.l0.top(0)],popover:[ea.l0.borderRadius(4),ea.l0.border({color:ea.TV.outlineDefault})]});function lz(e){var t=e.left.filter(Boolean),n=e.right.filter(Boolean),r=(0,_._)((0,$.useState)(function(){return(0,K.MT)()}),1)[0],i=(0,lR.Dv)(lO,{store:r}),o=(0,lR.Dv)(lL,{store:r}),a=(0,lR.b9)(lA,{store:r}),l=(0,lR.b9)(lB,{store:r}),c=(0,oN.Z)(function(e){return l(e.width)}),s=t.length-1,u=(0,S._)(t).concat((0,S._)(n)),d=(0,lR.b9)(lP,{store:r}),f=u.length;return(0,$.useEffect)(function(){d(f)},[d,f]),(0,k.tZ)(k.HY,{children:(0,k.BX)(er.G,{className:e.className,css:lV.root,innerRef:c,children:[u.map(function(e,t){return e.popover?(0,k.BX)($.Fragment,{children:[(0,k.BX)(lk.hg,{children:[(0,k.tZ)(lH,{onWidth:function(e){return a({index:t,width:e})},hidden:null!==o&&t>=o,isDisabled:!e.popover&&!e.onClick,children:(0,$.cloneElement)(e.item,{presentation:i})}),(0,k.tZ)(lI.Bf,{placement:t<=s?"top left":"top right",children:e.popover})]}),t===s?(0,k.tZ)(er.G,{css:lV.middle}):null]},e.key):(0,k.BX)($.Fragment,{children:[(0,k.tZ)(lH,{onWidth:function(e){return a({index:t,width:e})},onClick:e.onClick,hidden:null!==o&&t>=o,isDisabled:!e.popover&&!e.onClick,children:(0,$.cloneElement)(e.item,{presentation:i})}),t===s?(0,k.tZ)(er.G,{css:lV.middle}):null]},e.key+t)}),null===o?null:(0,k.BX)(lk.hg,{children:[(0,k.tZ)(lk.zx,{css:lV.moreButton,children:(0,k.tZ)(lD.Z,{size:12})}),(0,k.tZ)(lI.Bf,{placement:"top right",children:(0,k.tZ)(lM,{items:u.slice(o)})})]})]})})}var lj=n(85127),lq=n(71089),lJ=n(9853);function lY(e){var t=e.presentation,n=(0,N.Gn)("codeSuggestion").preferences.codeSuggestion,r=lF();return(0,$.useEffect)(function(){r("compact"===t?"AI":null)},[r,t]),(0,k.BX)(k.HY,{children:[(0,k.tZ)(t4.Z,{size:12,color:n?ea.TV.blurpleDefault:void 0}),"compact"===t?null:(0,k.tZ)(er.G,{children:"AI"})]})}var lK=(0,ed.X)({root:[ea.l0.p(8),ea.l0.maxWidth(260)],featureHeader:[ea.l0.rowWithGap(8),ea.l0.align.center],featureTitle:[ea.l0.rowWithGap(4),ea.l0.align.center,ea.l0.flex.growAndShrink(1),ea.l0.fontWeight.medium],enableAutocomplete:[ea.l0.rowWithGap(4),ea.l0.align.center],text:[ea.l0.colWithGap(8)],hint:[ea.l0.rowWithGap(4),ea.l0.align.center]});function l$(){var e=(0,$.useId)(),t=(0,N.Gn)("codeSuggestion"),n=t.preferences.codeSuggestion,r=t.update;return(0,k.BX)(er.G,{css:lK.root,children:[(0,k.BX)(er.G,{css:lK.featureHeader,children:[(0,k.BX)(er.G,{css:lK.featureTitle,children:[(0,k.tZ)(lj.Z,{color:ea.TV.blurpleDefault}),(0,k.tZ)(t3.xv,{children:"AI Autocomplete"})]}),(0,k.BX)(er.G,{css:lK.enableAutocomplete,children:[(0,k.tZ)(er.G,{tag:"label",htmlFor:e,children:(0,k.tZ)(t3.xv,{color:"dimmer",variant:"small",children:"Enable"})}),(0,k.tZ)(lq.X,{id:e,checked:n,onChange:function(){return r({codeSuggestion:!n})}})]})]}),(0,k.BX)(er.G,{css:lK.text,children:[(0,k.tZ)(t3.xv,{color:"dimmer",variant:"small",children:"Suggest lines of code as you type based on existing context."}),(0,k.BX)(er.G,{css:lK.hint,children:[(0,k.tZ)(t3.xv,{color:"dimmer",variant:"small",children:"Press"}),(0,k.tZ)(i1.bM,{small:!0,keyCombo:"Tab"}),(0,k.tZ)(t3.xv,{color:"dimmer",variant:"small",children:"to accept result"})]})]})]})}var lQ=n(53557),l0=n(67242),l1=n(49926),l2=n(99477),l3=n(6481),l4=n(82241),l8=n(11894),l6=n(47857);function l5(e){var t=e.filePath,n=e.presentation,r=(0,N.Gn)("codeIntelligence").preferences.codeIntelligence,i=(0,es.uN)(),o=(0,e4.Z)(t)[0],a=(0,_._)((0,$.useState)(null==o?void 0:o.getServerState()),2),l=a[0],c=a[1],s=(0,_._)((0,$.useState)(null==o?void 0:o.getServerHealth()),2),u=s[0],d=s[1],f=(0,_._)((0,$.useState)(!1),2),h=f[0],p=f[1],m=(0,P.IK)(i,tq.Q$),v=(0,$.useMemo)(function(){var e,n,r,i;return(r=null===(e=lQ.$R.from(t))||void 0===e?void 0:e.name)?r:(r=null==m?void 0:null===(n=m.language)||void 0===n?void 0:n.name)&&r.length>0?(i=r).slice(0,1).toUpperCase()+i.slice(1).toLowerCase():(r=(0,Q.r6)(t),m)?r:"Plain Text"},[t,m]),g=(0,$.useMemo)(function(){if(!r)return 6;if(null!==o&&u===rp.N.STALLED)return 3;var e=null!=o&&u===rp.N.READY;return h||l===rp.a.INITIALIZING||l===rp.a.INITIALIZED&&!e?0:e?1:l===rp.a.EXITED?2:null!==m?4:5},[o,h,m,u,l,r]);(0,$.useEffect)(function(){if(o)return p(!1),c(o.getServerState()),d(o.getServerHealth()),(0,rZ.uf)([o.onServerStateChange(function(e){c(e)}),o.onServerHealthChange(function(e){d(e)})])},[o]);var y=(0,P.IK)(i,e$.i5),b=(0,_._)((0,$.useState)(y?{title:y.name,value:y.id}:void 0),2),w=b[0],Z=b[1],x=(0,$.useRef)(!1);(0,$.useEffect)(function(){x.current||(null==w?void 0:w.value)===(null==y?void 0:y.id)||Z(y?{title:y.name,value:y.id}:void 0)},[w,y]);var C=lF();return(0,$.useEffect)(function(){C("Language support"+("compact"===n?" (".concat(v,")"):""))},[C,n,v]),(0,k.BX)(k.HY,{children:[(0,k.tZ)(cn,{state:g}),"compact"===n?null:(0,k.tZ)(er.G,{children:v})]})}var l9=(0,ed.X)({menu:[ea.l0.p(8),ea.l0.colWithGap(8),ea.l0.maxWidth(390),ea.l0.minWidth(390)],file:[ea.l0.pl(4),ea.l0.display.inlineFlex,ea.l0.rowWithGap(4),ea.l0.align.center,{verticalAlign:"top"}],section:[ea.l0.rowWithGap(8),ea.l0.align.center,ea.l0.justify.spaceBetween],header:[ea.l0.colWithGap(2),ea.l0.flex.shrink(1)],selects:[ea.l0.rowWithGap(4)],staticWidth:[ea.l0.flex.grow(0),ea.l0.flex.shrink(1)],variableWidth:[ea.l0.flex.grow(1),ea.l0.flex.shrink(0),{flexBasis:0}],flexEnd:[ea.l0.align.end],red:[ea.l0.color.redDefault],row:[ea.l0.rowWithGap(8),ea.l0.align.center]});function l7(e){var t=e.filePath,n=e.openSettings,r=(0,eD.Z)(),i=r.dotReplit,o=r.lspnix,a=(0,e4.Z)(t)[0],l=(0,_._)((0,$.useState)(null==a?void 0:a.getServerState()),2),c=l[0],s=l[1],u=(0,_._)((0,$.useState)(null==a?void 0:a.getServerHealth()),2),d=u[0],f=u[1],h=(0,_._)((0,$.useState)(!1),2),p=h[0],m=h[1];(0,$.useEffect)(function(){if(a)return m(!1),s(a.getServerState()),f(a.getServerHealth()),(0,rZ.uf)([a.onServerStateChange(function(e){s(e)}),a.onServerHealthChange(function(e){f(e)})])},[a]);var v=(0,N.Gn)("codeIntelligence").preferences.codeIntelligence,g=(0,$.useCallback)(function(){v&&(o.disable(),o.enable(),m(!0))},[o,v]),y=(0,es.uN)(),b=(0,P.IK)(y,tq.Q$),w=(0,$.useMemo)(function(){if(!v)return 6;if(null!==a&&d===rp.N.STALLED)return 3;var e=null!=a&&d===rp.N.READY;return p||c===rp.a.INITIALIZING||c===rp.a.INITIALIZED&&!e?0:e?1:c===rp.a.EXITED?2:null!==b?4:5},[a,p,b,d,c,v]),Z=(0,P.IK)(y,e$.i5),S=(0,P.IK)(y,e$.dt),E=(0,_._)((0,$.useState)(Z?{title:Z.name,value:Z.id}:void 0),2),T=E[0],R=E[1],I=(0,$.useRef)(!1),D=(0,$.useMemo)(function(){var e;return null!==(e=null==S?void 0:S.map(function(e){return{title:e.name,value:e.id,icon:void 0}}))&&void 0!==e?e:[]},[S]);return(0,k.BX)(er.G,{css:l9.menu,children:[(0,k.BX)(t3.h4,{level:1,children:["Language support for ",(0,k.BX)("span",{css:l9.file,children:[(0,k.tZ)(U.Z,{path:t,size:16})," ",(0,k.tZ)("span",{children:(0,Q.UO)(t)})]})]}),(0,k.tZ)(l0.R,{}),(0,k.tZ)(ct,{client:a,restart:g,state:w,openSettings:n,filePath:t}),S&&T?(0,k.BX)(k.HY,{children:[(0,k.tZ)(l0.R,{}),(0,k.BX)(er.G,{css:l9.section,children:[(0,k.tZ)(er.G,{css:[l9.header,l9.staticWidth],children:(0,k.tZ)(t3.xv,{multiline:!1,children:"Code Formatter"})}),1===S.length?(0,k.tZ)(er.G,{css:[l9.header,l9.variableWidth,l9.flexEnd],children:(0,k.tZ)(t3.xv,{multiline:!1,children:T.title})}):(0,k.tZ)(er.G,{css:l9.selects,children:(0,k.tZ)(l8.P,{placement:"top",items:D,selectedItem:(0,C._)((0,x._)({},T),{icon:I.current?(0,k.tZ)(rt.Z,{size:12}):void 0}),disabled:I.current,onChange:function(e){e.value!==T.value&&(I.current=!0,R(e),(function(e,t){return cr.apply(this,arguments)})(i,{path:t,formatterId:e.value}).finally(function(){return I.current=!1}))}})})]})]}):null]})}function ce(e){var t=(0,k.tZ)("a",{tabIndex:0,role:"button",onClick:e.restart,onKeyDown:function(t){"Enter"===t.key&&e.restart()},children:"Restart"});switch(e.state){case 0:return(0,k.tZ)(t3.xv,{multiline:!1,color:"dimmer",children:"Loading"});case 1:return(0,k.tZ)(t3.xv,{multiline:!1,color:"dimmer",children:"Active"});case 3:return(0,k.BX)(er.G,{css:l9.row,children:[(0,k.tZ)(t3.xv,{css:l9.red,multiline:!1,children:"Stalled"})," ",t]});case 2:return(0,k.BX)(er.G,{css:l9.row,children:[(0,k.tZ)(t3.xv,{css:l9.red,multiline:!1,children:"Stopped"})," ",t]});default:return null}}function ct(e){var t=function(){switch(e.state){case 0:case 1:case 2:case 3:return(0,k.BX)(k.HY,{children:[(0,k.tZ)(er.G,{css:[l9.header,l9.variableWidth],children:(0,k.tZ)(t3.xv,{multiline:!1,children:e.client?e.client.clientName:"Language Server for ".concat(e.filePath)})}),(0,k.tZ)(er.G,{css:[l9.header,l9.staticWidth],children:(0,k.tZ)(ce,{restart:e.restart,state:e.state})})]});case 5:case 4:return(0,k.tZ)(er.G,{css:l9.header,children:(0,k.tZ)(t3.xv,{color:"dimmer",children:"Limited language support because the language server is not available."})});case 6:return(0,k.tZ)(er.G,{css:l9.header,children:(0,k.BX)(t3.xv,{multiline:!0,color:"dimmer",children:["Code intelligence is disabled. Enable it in settings.",(0,k.tZ)("br",{}),(0,k.tZ)("a",{tabIndex:0,role:"button",onClick:e.openSettings,onKeyDown:function(t){"Enter"===t.key&&e.openSettings()},children:"Open settings"})]})});default:return null}}();return t?(0,k.BX)(er.G,{css:l9.section,children:[" ",t," "]}):null}function cn(e){switch(e.state){case 3:case 6:case 4:return(0,k.tZ)(l4.Z,{size:16});case 0:return(0,k.tZ)(rt.Z,{size:16,color:ea.TV.blueStronger});case 1:return(0,k.tZ)(er.G,{dataCy:"ws-code-intelligence-active",children:(0,k.tZ)(l2.Z,{size:16})});case 2:return(0,k.tZ)(l3.Z,{size:16});case 5:return(0,k.tZ)(l1.Z,{size:16})}}function cr(){return(cr=(0,eJ._)(function(e,t){var n,r;return(0,eY.Jh)(this,function(i){return(n=".".concat((0,l6.mD)(t.path)),r="rules/formatter/fileExtensions/".concat(n,"/id"),t.formatterId)?[2,e.updateDotReplit([{path:"rules/formatter/fileExtensions",op:"add",value:JSON.stringify((0,tf._)({},"".concat(n),{id:t.formatterId}))}])]:[2,e.updateDotReplit([{path:r,op:"remove"}])]})})).apply(this,arguments)}(u=Z||(Z={}))[u.Loading=0]="Loading",u[u.Ready=1]="Ready",u[u.Exited=2]="Exited",u[u.Stalled=3]="Stalled",u[u.Partial=4]="Partial",u[u.Missing=5]="Missing",u[u.Disabled=6]="Disabled";var ci=n(46577),co=n(72658),ca=n(69880);function cl(e){var t,n=e.presentation,r=(0,ca.Z)((t=(0,eJ._)(function(e){var t,n,r,i;return(0,eY.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=o.sent()).error)return[2,t];if(n=t.type,r=null,!(n!==co.y5.INITIALIZING))return[3,3];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null==r?void 0:r.branch,error:null}]}})}),function(e){return t.apply(this,arguments)})),i=!r||r.error?null:r.branchName,o=lF();return(0,$.useEffect)(function(){o("compact"===n&&i?i:null)},[o,n,i]),i?(0,k.BX)(k.HY,{children:[(0,k.tZ)(ci.Z,{color:nW.TV.foregroundDimmer,size:12}),"compact"===n?null:(0,k.tZ)(er.G,{children:i})]}):null}var cc=n(39743),cs=n(32622),cu=n(44941),cd=(0,ed.X)({group:[ea.l0.align.center,ea.l0.rowWithGap(4)],row:[ea.l0.align.center,ea.l0.rowWithGap(8)]});function cf(e){var t,n,r,i,o,a,l,c,s=e.filePath,u=e.presentation,d=(n=(t=(0,_._)((0,$.useState)(null),2))[0],r=t[1],i=(0,e4.Z)(s),o=(0,cc.nC)(),a=(0,Y.dr)(),(0,$.useEffect)(function(){var e=function(e){var t,n=o().find(function(e){var t=(0,_._)(e,2);return"problems"===(t[0],t[1]).type});if(n){var r=a(n[0]);r&&"problems"===r.type&&(null===(t=r.updateProblems)||void 0===t||t.call(r,s,e))}},t=function(t){if(t.path===s){var n=[],o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;d.isOpen(s)&&n.push.apply(n,(0,S._)(d.getDiagnostics(t.path)))}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}r(n),e(n)}},n=[],l=!0,c=!1,u=void 0;try{for(var d,f=i[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value;h.isOpen(s)&&n.push.apply(n,(0,S._)(h.getDiagnostics(s)))}}catch(e){c=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}r(n),e(n);var p=[],m=!0,v=!1,g=void 0;try{for(var y,b=i[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var w=y.value;p.push(w.onDiagnostics(function(e){return t(e)}))}}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}return function(){p.forEach(function(e){return e()}),o().some(function(e){var t=(0,_._)(e,2),n=(t[0],t[1]);return"codeEditor"===n.type&&n.data.path===s})||e([])}},[i,s,o,a]),n),f=(0,$.useMemo)(function(){var e;return d?(e=d.reduce(function(e,t){return void 0===t.severity||(e[t.severity]=(e[t.severity]||0)+1),e},{}),d.length>0&&0===Object.keys(e).length&&(e[nc.DiagnosticSeverity.Error]=d.length),e):null},[d]),h=f&&null!==(l=f[nc.DiagnosticSeverity.Error])&&void 0!==l?l:0,p=f&&null!==(c=f[nc.DiagnosticSeverity.Warning])&&void 0!==c?c:0,m=null===f,v=lF();return((0,$.useEffect)(function(){if(m){v(null);return}var e="";0===h&&0===p&&(e="No problems"),h>0&&(e+="".concat((0,cs.Z)("Error",h),": ").concat(h)),p>0&&(e.length>0&&(e+=", "),e+="".concat((0,cs.Z)("Warning",p),": ").concat(p)),v(e)},[v,u,m,p,h]),f)?(0,k.BX)(er.G,{css:cd.row,children:[(0,k.BX)(er.G,{css:cd.group,children:[(0,k.tZ)(cu.Z,{severity:nc.DiagnosticSeverity.Error,size:12}),"compact"===u?null:(0,k.tZ)(t3.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(h)})]}),(0,k.BX)(er.G,{css:cd.group,children:[(0,k.tZ)(cu.Z,{severity:nc.DiagnosticSeverity.Warning,size:12}),"compact"===u?null:(0,k.tZ)(t3.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(p)})]})]}):null}function ch(e){if(e.facet(rO.o))return"";var t=e.selection,n="",r=0;if(t.ranges.length>1){r=t.ranges.reduce(function(e,t){return e+(t.to-t.from)},0);var i=t.ranges.length;n="".concat(i," selections")}else{var o=t.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,n="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(n+=" (".concat(r," chars)")),n}function cp(e){var t=e.view,n=(0,$.useRef)(null);return(0,$.useEffect)(function(){var e,r=n.current,i=null!==(e=t.plugin(P.pE))&&void 0!==e?e:null;if(r&&i&&!i.destroyed){var o=null,a=t.state;r.textContent=ch(a);var l=i.bind({changed:function(e){return(0,eL.aU)(e,"selection",rO.o)},callback:function(e){a=e.state,null===o&&(o=requestAnimationFrame(function(){o=null,r.textContent=a?ch(a):""}))}});return function(){l(),null!==o&&cancelAnimationFrame(o),r.textContent=""}}},[t]),(0,k.tZ)("span",{ref:n,"data-cy":"current-position"})}var cm=n(9558),cv=n(22238);function cg(e,t,n){var r=[],i=0,o=!0,a=!1,l=void 0;try{for(var c,s=e.iterLines()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=i;if(i=i+u.length+1,0!==u.length){var f=(0,cv.L)(u,t),h=u.trimStart(),p=d+(u.length-h.length);if(0!==f&&d!==p){var m="";if(n===cm.Q.TABS){var v=Math.floor(f/t),g=f%t;m="	".repeat(v)+" ".repeat(g)}else n===cm.Q.SPACES&&(m=" ".repeat(f));m+h!==u&&r.push({from:d,to:p,insert:m})}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return eN.as.of(r,e.length)}var cy=n(99047),cb=n(99236),cw=n(66548),cZ=n(40509),cx=n(15434),cC=n(28675),c_=n(74035),cS=(0,ed.X)({surface:[ea.l0.height("100%")],cursorOverlay:{cursor:"pointer"},menu:[ea.l0.p(8),ea.l0.colWithGap(8),ea.l0.maxWidth(410)],close:[ea.l0.position.absolute,ea.l0.top(4),ea.l0.right(4)],file:[ea.l0.pl(4),ea.l0.display.inlineFlex,ea.l0.rowWithGap(4),ea.l0.align.center,{verticalAlign:"top"}],space:[ea.l0.width(2),ea.l0.color.foregroundDimmer,ea.l0.textAlign.center],section:[ea.l0.rowWithGap(8),ea.l0.align.center,ea.l0.justify.spaceBetween],header:[ea.l0.colWithGap(2),ea.l0.flex.shrink(1)],selects:[ea.l0.rowWithGap(4)],sizeInput:{border:"none"},buttonsGroup:[ea.l0.rowWithGap(8),ea.l0.align.center,ea.l0.justify.spaceBetween],saveButtons:[ea.l0.rowWithGap(4)]});function ck(e){var t,n=e.filePath,r=e.openSettings,i=(0,N.Gn)("indentDetection","indentSize").preferences,o=(0,es.uN)(),a=(0,P.IK)(o,rO.o),l=null!==a&&!!i.indentDetection&&a,c=(0,P.IK)(o,cy.K_),s=(0,P.IK)(o,cy.E2),u=(0,P.IK)(o,cy.vO),d=null!==(t=(0,P.IK)(o,eN.yy.tabSize))&&void 0!==t?t:i.indentSize,f="	"===(0,P.IK)(o,E.c)?cm.Q.TABS:cm.Q.SPACES,h=(0,_._)((0,$.useState)(!1),2),p=h[0],m=h[1],v=(0,_._)((0,$.useState)(f),2),g=v[0],y=v[1],b=(0,_._)((0,$.useState)(d),2),w=b[0],Z=b[1],x=(0,_._)((0,$.useState)(!1),2),C=x[0],T=x[1],R=(0,_._)((0,$.useState)(!1),2),I=R[0],D=R[1],B=(0,_._)((0,$.useState)(!1),2),G=B[0],A=B[1],L=(0,_._)((0,$.useState)(!1),2),O=L[0],M=L[1];(0,$.useEffect)(function(){C||(y(f),Z(d))},[f,d,C]),(0,$.useEffect)(function(){p||(y(f),Z(d),T(!1))},[p,f,d]),(0,$.useEffect)(function(){g===f&&w===d&&T(!1)},[g,w,f,d]),(0,$.useEffect)(function(){if(I||G||O){var e=setTimeout(function(){D(!1),A(!1),M(!1)},1e3);return function(){return clearTimeout(e)}}},[I,G,O]),l&&p&&m(!1);var X=(0,$.useCallback)(function(){if(o){var e=cg(o.state.doc,d,f);o.dispatch({changes:e,effects:cy.Fm.of(!0)}),A(!0)}},[o,f,d]),F=(0,$.useCallback)(function(){o&&(o.dispatch({effects:cy.Fm.of(!0)}),o.state.field(cy.E2)&&o.dispatch({effects:cy.O4.of({type:void 0,size:void 0})}),M(!0))},[o]),W=(0,$.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o){var t=void 0,n=[cy.O4.of({type:g,size:w})];if(e){if(g!==f&&(t=cg(o.state.doc,d,g)),g===cm.Q.SPACES&&w!==d){var r=function(e,t,n,r){if(t===cm.Q.TABS)return eN.as.empty(e.length);var i=" ".repeat(r),o=[],a=0,l=!0,c=!1,s=void 0;try{for(var u,d=e.iterLines()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,h=a;if(a=a+f.length+1,0!==f.length){var p=(0,cv.L)(f,n),m=f.trimStart(),v=h+(f.length-m.length);if(0!==p&&h!==v){var g=Math.floor(p/n),y=p%n,b=i.repeat(g)+" ".repeat(y);b+m!==f&&o.push({from:h,to:v,insert:b})}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return eN.as.of(o,e.length)}(t?t.apply(o.state.doc):o.state.doc,g,d,w);t=t?t.compose(r):r}t&&n.push(cy.Fm.of(!0))}o.dispatch({changes:t,effects:n}),T(!1),D(!0)}},[o,f,d,g,w]),H=(0,$.useCallback)(function(){m(!1),r()},[r]),V=(0,$.useMemo)(function(){if(s){var e=s.size,t=s.type===cm.Q.SPACES?"spaces":"tabs";return"This file appears to use a unit of ".concat(e," ").concat(t,".")}return u?"Indentation detection hasn't been run on this file yet.":"This file is too small for indentation detection."},[s,u]);return(0,k.BX)(er.G,{css:cS.menu,children:[(0,k.tZ)(er.G,{css:cS.close,children:(0,k.tZ)(iV.hU,{alt:"Close",onClick:function(){return m(!1)},children:(0,k.tZ)(re.Z,{})})}),(0,k.BX)(t3.h4,{level:1,children:["Indentation for",(0,k.BX)("span",{css:cS.file,children:[(0,k.tZ)(U.Z,{path:n,size:16})," ",(0,k.tZ)("span",{children:(0,Q.UO)(n)})]})]}),c?(0,k.tZ)(cb.E,{colorway:"warning",icon:(0,k.tZ)(i0.Z,{}),text:"This file type requires that ".concat(c===cm.Q.SPACES?"spaces":"tabs"," be used for indentation.")}):null,(0,k.tZ)(l0.R,{}),(0,k.BX)(er.G,{css:cS.section,children:[(0,k.BX)(er.G,{css:cS.header,children:[(0,k.tZ)(t3.xv,{multiline:!1,children:"Indentation unit"}),(0,k.tZ)(t3.xv,{variant:"small",color:"dimmer",children:"The size and character to use when indenting lines."})]}),(0,k.BX)(er.G,{css:cS.selects,children:[(0,k.tZ)(c_.qm,{css:cS.sizeInput,size:w,onChange:function(e){e!==w&&(Z(e),T(!0))}}),(0,k.tZ)(l8.P,{items:(0,S._)(c_.Ly),selectedItem:c_.Ly.find(function(e){return e.value===(g===cm.Q.SPACES?"spaces":"tabs")}),onChange:function(e){var t=(null==e?void 0:e.value)==="spaces"?cm.Q.SPACES:cm.Q.TABS;t!==g&&(y(t),T(!0))}})]})]}),(0,k.tZ)(l0.R,{}),i.indentDetection?(0,k.BX)(k.HY,{children:[(0,k.BX)(er.G,{css:cS.section,children:[(0,k.BX)(er.G,{css:cS.header,children:[(0,k.tZ)(t3.xv,{multiline:!1,children:"Detected indentation unit"}),(0,k.tZ)(t3.xv,{variant:"small",color:"dimmer",children:V})]}),O?(0,k.tZ)(iH.zx,{colorway:"positive",text:"Detected!",iconLeft:(0,k.tZ)(ai.Z,{}),onClick:F}):(0,k.tZ)(iH.zx,{text:s?"Re-detect":"Detect",iconLeft:(0,k.tZ)(cZ.Z,{}),disabled:!u&&!s,onClick:F})]}),(0,k.tZ)(l0.R,{})]}):null,(0,k.BX)(er.G,{css:cS.buttonsGroup,children:[(0,k.tZ)(iH.zx,{text:"Global settings",iconLeft:(0,k.tZ)(cx.Z,{}),onClick:H}),(0,k.tZ)(er.G,{css:cS.saveButtons,children:I||G?(0,k.tZ)(k.HY,{children:I?(0,k.tZ)(iH.zx,{text:"Saved!",colorway:"positive",iconLeft:(0,k.tZ)(ai.Z,{}),onClick:function(){return W(!1)}}):(0,k.tZ)(iH.zx,{text:"Re-indented!",colorway:"positive",iconLeft:(0,k.tZ)(ai.Z,{}),onClick:X})}):(0,k.tZ)(k.HY,{children:C?(0,k.BX)(k.HY,{children:[(0,k.tZ)(iH.zx,{text:"Save and re-indent",colorway:"primary",iconLeft:(0,k.tZ)(cC.Z,{}),onClick:function(){return W(!0)}}),(0,k.tZ)(iH.zx,{text:"Save",iconLeft:(0,k.tZ)(ai.Z,{}),onClick:function(){return W(!1)}})]}):(0,k.tZ)(iH.zx,{text:"Re-indent file",iconLeft:(0,k.tZ)(cC.Z,{}),onClick:X})})})]})]})}function cE(e){var t,n=e.presentation,r=(0,N.Gn)("indentDetection","indentSize").preferences,i=(0,es.uN)(),o=(0,P.IK)(i,rO.o),a=null!==o&&!!r.indentDetection&&o,l=null!==(t=(0,P.IK)(i,eN.yy.tabSize))&&void 0!==t?t:r.indentSize,c="	"===(0,P.IK)(i,E.c)?cm.Q.TABS:cm.Q.SPACES,s=lF();return(0,$.useEffect)(function(){s("File Indentation")},[s]),(0,k.BX)(k.HY,{children:[(0,k.tZ)(cR,{type:c,loading:a}),"compact"===n?null:(0,k.tZ)(cI,{type:c,size:l,loading:a})]})}function cT(e){var t=e.size,n=void 0===t?16:t,r=(0,nm._)(e,["size"]);return(0,k.tZ)(cw.ZP,(0,C._)((0,x._)({size:n},r),{children:(0,k.tZ)("circle",{cx:n,cy:n,r:n/2,fillRule:"evenodd"})}))}function cR(e){var t=e.type;return e.loading?(0,k.tZ)(rt.Z,{size:12}):t===cm.Q.SPACES?(0,k.tZ)(cT,{color:ea.TV.foregroundDimmer,size:12}):(0,k.tZ)(cC.Z,{color:ea.TV.foregroundDimmer,size:12})}function cI(e){var t=e.type,n=e.size;if(e.loading)return(0,k.tZ)(t3.xv,{variant:"small",color:"dimmest",children:"Detecting..."});var r=t===cm.Q.SPACES?"Spaces":"Tabs";return(0,k.BX)(t3.xv,{variant:"small",color:"dimmer",children:[r,": ",n]})}function cD(e){var t=e.presentation,n=lF();return(0,$.useEffect)(function(){n("compact"===t?"History":null)},[n,t]),(0,k.BX)(k.HY,{children:["compact"===t?null:(0,k.tZ)(er.G,{children:"History"}),(0,k.tZ)(V.Z,{size:12})]})}var cB=n(51953),cG=(0,ed.X)({text:[{textTransform:"capitalize"}]});function cA(e){var t=e.presentation,r=(0,_._)((0,$.useState)(null),2),i=r[0],o=r[1],a=(0,$.useRef)(null),l=(0,$.useRef)(null),c=lF(),s=(0,es.uN)(),u=(0,N.Gn)("keyboardHandler").preferences,d=(null==u?void 0:u.keyboardHandler)==="vim",f=(0,$.useCallback)(function(e){var n=null!=e?e:"";if(s&&i&&void 0===e){var r,o,u=i.getCM(s);n=null!==(o=null==u?void 0:null===(r=u.state.vim)||void 0===r?void 0:r.mode)&&void 0!==o?o:"normal"}c("compact"===t?n:null),l.current=n,a.current&&a.current.innerText!==n&&(a.current.innerText=n||"")},[s,i,c,t]);return(0,$.useEffect)(function(){d&&!i&&n.e(720).then(n.bind(n,16713)).then(function(e){o(e),f()})},[d,i,f]),(0,$.useEffect)(function(){if(s&&d&&i){var e,t=a.current,n=null!==(e=s.plugin(P.pE))&&void 0!==e?e:null;if(t&&n&&!n.destroyed)return n.bind({changed:function(){var e,t,n=i.getCM(s),r=null!==(t=null==n?void 0:null===(e=n.state.vim)||void 0===e?void 0:e.mode)&&void 0!==t?t:"";return l.current!==r},callback:function(){f()}})}},[s,d,i,f]),d?(0,k.BX)(k.HY,{children:[(0,k.tZ)(cB.Z,{size:12}),"compact"===t?null:(0,k.tZ)("span",{css:cG.text,ref:a})]}):null}var cP=n(51197);function cN(e){var t=e.presentation,n=e.toggled?"Diffing":"Diff",r=lF();return(0,$.useEffect)(function(){r("compact"===t?n:null)},[r,t,n]),(0,k.BX)(k.HY,{children:[(0,k.tZ)(cP.Z,{color:nW.TV.foregroundDimmer,size:12}),"compact"===t?null:(0,k.tZ)(er.G,{children:n})]})}var cL=(0,ed.X)({root:[{borderTop:"1px solid ".concat(ea.TV.backgroundHigher)},{height:"29px",contain:"strict"}]}),cO=(0,$.memo)(function(e){var t,n,r,i,o,a,l,c,s,u,d,h,p,m,v,g,y,b,w,Z,x,C,_,S=e.filePath,E=e.performPaneOperation,T=(0,$.useCallback)(function(e){return E({operation:"open",pane:e,secondary:!0})},[E]),R=(0,$.useCallback)(function(){return T({type:"preferences"})},[T]),I=(t=(0,lJ.ZP)(),(0,lJ.G_)(t)?{item:(0,k.tZ)(lY,{}),popover:(0,k.tZ)(l$,{}),key:"ai"}:null),D=(r=(n={filePath:S,openSettings:R}).filePath,i=n.openSettings,{item:(0,k.tZ)(l5,{filePath:r,openSettings:i}),popover:(0,k.tZ)(l7,{openSettings:i,filePath:r}),key:"codeIntelligence"}),B=(o=(0,tX.P5)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),a=(0,es.uN)(),o?{item:(0,k.tZ)(cf,{filePath:S}),onClick:a?function(){return(0,tJ.C)(a)}:void 0,key:"lspDiagnostics"}:null),G=(0,tX.P5)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1})?{item:(0,k.tZ)(cl,{}),onClick:function(){return T({type:"git"})},key:"currentBranch"}:null,A=(l=(0,tX.P5)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),p=(c=(0,es.uN)(),s=(0,P.IK)(c,tU),u=!c||!s||null===s.head,d=(null==s?void 0:s.mode)===f.INLINE_DIFF,h={toggle:(0,$.useCallback)(function(){if(!c)return null;c.dispatch({effects:tO.of(d?f.GUTTER_DIFF:f.INLINE_DIFF)})},[c,d]),toggled:d,disabled:u}).toggle,m=h.toggled,v=h.disabled,l&&!v?{item:(0,k.tZ)(cN,{toggled:m}),onClick:p,key:"toggleDiff"}:null),N={item:(0,k.tZ)(cA,{}),key:"vimMode"},L=(g=(0,es.uN)())?{item:(0,k.tZ)(cp,{view:g}),onClick:function(){return(0,oA.zo)(g)},key:"currentPosition"}:null,O=(b=(y={filePath:S,performPaneOperation:E}).filePath,w=y.performPaneOperation,Z=(0,$.useCallback)(function(){w({operation:"replace",pane:{type:"history",data:{path:b}}})},[w,b]),{item:(0,k.tZ)(cD,{}),key:"history",onClick:Z}),U=(C=(x={filePath:S,openSettings:R}).filePath,_=x.openSettings,{item:(0,k.tZ)(cE,{}),popover:(0,k.tZ)(ck,{filePath:C,openSettings:_}),key:"indentation"});return(0,k.tZ)(lz,{css:cL.root,left:[I,D,B,G,A,N],right:[L,U,O]})}),cU=(0,ed.X)({root:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"}});function cM(e){var t=(0,ey.xZ)(e.filePath),n=(0,ew.Do)(eb.y.Editor),r=(0,en.Z)(),i=e.performPaneOperation,o=(0,$.useCallback)(function(e){return i({operation:"open",pane:e,secondary:!0})},[i]);return(0,k.BX)("div",{ref:n,css:cU.root,children:[e.performPaneOperation?(0,k.tZ)(ek.$,{performPaneOperation:e.performPaneOperation,path:e.filePath}):null,(0,k.BX)("div",{css:lg.ev,children:[(0,k.tZ)(lS,{openPane:o,openFile:e.openFile,openThreadsInbox:e.openThreadsInbox,filePath:e.filePath,autoFocus:e.autoFocus,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated,performPaneOperation:e.performPaneOperation}),t?(0,k.tZ)(eS,{}):null]}),(0,k.tZ)("div",{style:{display:r?"none":"block"},children:(0,k.tZ)(cO,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,k.tZ)(eg,{filePath:e.filePath,isLoading:!1})]})}var cX=n(89748),cF=n(63416),cW=(0,ed.X)({root:[ea.l0.coverContainer,ea.l0.center,ea.l0.p(16)]});function cH(e){var t=e.message;return(0,k.tZ)(er.G,{css:cW.root,children:(0,k.tZ)(er.G,{children:(0,k.tZ)(cb.E,{icon:(0,k.tZ)(i0.Z,{}),colorway:"orange",text:t})})})}var cV=n(96264),cz=R.Dy.Object({type:R.Dy.Literal("codeEditor"),data:R.Dy.Object({path:R.Dy.Union([R.Dy.String({minLength:1}),R.Dy.Null()]),line:R.Dy.Optional(R.Dy.Number()),col:R.Dy.Optional(R.Dy.Number())})}),cj={Content:function(e){var t=e.pane,n=e.options;return(0,k.tZ)(cJ,(0,C._)((0,x._)({},t.data),{isActive:n.isActive,isHidden:n.isHidden,performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.pane,n=e.size;return(0,k.tZ)(U.Z,{path:t.data.path||"",size:n})},getTitle:function(e){return e.data.path?(0,Q.UO)(e.data.path):"No file open"},decode:function(e){return I.B4.Decode(cz,e)}};function cq(e){var t,n,r,i,o,a,l,c=e.path,s=e.performPaneOperation,u=(0,es.uN)(),d=(0,L.Z)(function(){return u?{match:cX.pl,data:{type:"action",label:"Toggle all folds",icon:(0,k.tZ)(X.Z,{}),run:function(){0===(0,E.q2)(u.state).size?(0,E.g_)(u):(0,E.jZ)(u)}}}:null},[u]),f=(0,P.IK)(u,D.W);(0,$.useEffect)(function(){f&&s({operation:"commit"})},[f,s]);var h=(0,cF.Mp)({path:c,performPaneOperation:s}),p=(t=(0,es.uN)(),n=(0,P.IK)(t,B.SD),(0,L.Z)(function(){if(t&&n)return{match:cX.pl,data:{label:"Format "+(0,Q.UO)(c),icon:(0,k.tZ)(H.Z,{}),type:"action",run:function(){(0,B.z1)(t)}}}},[n,c,t])),m=(r=(0,O.T3)(),o=(i=(0,N.Gn)("minimapDisplay")).preferences.minimapDisplay,a=i.update,(0,L.Z)(function(){return r?null:{match:cX.pl,data:{label:"Minimap",icon:(0,k.tZ)(M.Z,{}),type:"context"},commands:function(e){var t=e.active,n=e.search;return t||n?[{value:"none",label:"Hide",icon:(0,k.tZ)(W.Z,{})},{value:"characters",label:"Characters",icon:(0,k.tZ)(z.Z,{})},{value:"blocks",label:"Blocks",icon:(0,k.tZ)(j.Z,{})}].filter(function(e){return e.value!==o}).map(function(e){return{match:cX.pl,data:{type:"action",label:e.label,icon:e.icon,run:function(){a({minimapDisplay:e.value})}}}}):[]}}},[a,o,r])),v=(l=function(){return s({operation:"replace",pane:{type:"history",data:{path:c}}})},(0,L.Z)(function(){return{match:cX.pl,data:{label:"History",icon:(0,k.tZ)(V.Z,{}),type:"action",run:function(){l()}}}},[l])),g=(0,L.Z)(function(){var e=void 0;if((0,Q.gK)(c)&&(e={type:"markdown",data:{path:c}}),(0,Q.B4)(c)&&(e={type:"media",data:{path:c}}),e)return{match:cX.pl,data:{label:"Preview",icon:(0,k.tZ)(F.Z,{}),type:"action",run:function(){e&&s({operation:"replace",pane:e})}}}},[c,s]);return(0,Y.L5)(function(){if(u){var e=[];return p&&e.push(p),g&&e.push(g),e.push(v),m&&e.push(m),d&&e.push(d),h&&e.push.apply(e,(0,S._)(h)),{type:"codeEditor",commands:e,getEditorView:function(){return u},getCurrentSelectionText:function(){if(!u.state.selection.main.empty)return u.state.sliceDoc(u.state.selection.main.from,u.state.selection.main.to)},insertGhostwriterChatCode:function(e,t){(0,G.el)({view:u,insert:e,overwrite:t})},revertGhostwriterChatCode:function(){(0,G.iG)(u)},fetchProblems:function(){var e,t;return(0,T.j)(u),null!==(t=null===(e=u.state.field(A.G0,!1))||void 0===e?void 0:e.flatten())&&void 0!==t?t:[]}}}},[u,p,g,v,m,d,h]),(0,Y.Wk)(function(){return u},[u]),null}function cJ(e){var t,n,r,i,o=e.path,a=e.line,l=e.col,c=e.isActive,s=e.isHidden,u=e.performPaneOperation,d=(0,_._)((0,$.useState)(!s),2),f=d[0],h=d[1];f||s||h(!0);var p=(0,_._)((0,$.useState)(function(){return(0,K.MT)()}),1)[0],m=(0,_._)((0,$.useState)(function(){return(0,K.MT)()}),1)[0],v=(0,q.useRouter)(),g=!(J().query.embed||J().query.lite)&&!(0,O.Gv)(v)&&c,y=(t=(0,eD.Z)().fs,r=(n=(0,_._)((0,$.useState)(null),2))[0],i=n[1],(0,$.useEffect)(function(){if(o){if(o.startsWith("/"))return i('Cannot open "'.concat(o,'"')),function(){i(null)};var e=t.watchPathStat(o,{onNewStat:function(e){if(!e.exists){i('No file found at "'.concat(o,'", it may have been deleted'));return}if(e.type===iD.Tv.Directory){i('"'.concat(o,'" is a directory'));return}i(null)},onError:function(){i('Unknown error occured while read "'.concat(o,'", try re-opening the editor'))}});return function(){e(),i(null)}}},[t,o]),r),b=(0,L.Z)(function(){return{line:a,col:l}},[a,l]),w=(0,L.Z)(function(){return function(){u({operation:"replace",pane:{type:"codeEditor",data:{path:o}}})}},[u,o]),Z=(0,L.Z)(function(){return function(e){u({operation:"commit"}),u({operation:"open",pane:{type:"codeEditor",data:e}})}},[u]),x=(0,$.useCallback)(function(){u({operation:"open",secondary:!0,pane:{type:"threadInbox"}})},[u]);return o?y?(0,k.tZ)(cH,{message:y}):s&&!f?null:(0,k.tZ)(es.Cl.Provider,{value:p,children:(0,k.BX)(cV.ox.Provider,{value:m,children:[(0,k.tZ)(cM,{filePath:o,autoFocus:g,isHidden:null!=s&&s,deeplink:b,onDeeplinkUpdated:w,hideMobileKeyboardToolbar:!0,performPaneOperation:u,openFile:Z,openThreadsInbox:x},o),(0,k.tZ)(cq,{path:o,isActive:c,performPaneOperation:u})]})}):null}},14209:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("commands"),data:r.Dy.Object({autoFocus:r.Dy.Boolean()})}),a=function(e){return i.B4.Decode(o,e)}},67295:function(e,t,n){n.d(t,{R:function(){return sE}});var r,i,o,a,l,c,s,u,d,f,h,p,m=n(66626),v=n(74985),g=n(74044),y=n(99149),b=n(94778),w=n(29318),Z=n(72093),x=n(50959),C=n(15063),_=n(89885),S=n(27387),k=n(63257),E=n(96583),T=n(39271),R=n(99236),I=n(49224),D=n(24635),B=n(52554),G=n(77361),A=n(27901),P=n(15434),N=n(87128),L=n(85438),O=n(15235),U=n(19068),M=n(64479),X=n(39475),F=n(94932),W=(0,I.X)({root:[{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)}],inner:[Z.l0.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(Z.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(Z.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],tabs:[Z.l0.flex.row,Z.l0.align.center,Z.l0.overflowX("auto"),Z.l0.pl(8)],tab:[U.gU.nofill,Z.l0.borderRadius(0),Z.l0.px(12),Z.l0.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:Z.TV.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],dot:[Z.l0.position.absolute,Z.l0.borderRadius(16),Z.l0.width(8),Z.l0.height(8),Z.l0.backgroundColor.accentPrimaryStronger,{top:8,right:8}]}),H=function(e){var t=e.tabs,n=e.activeView,r=e.onClick,i=(0,X.o)("deployment-analytics-dot"),o=i.isLoading,a=i.isDone;return(0,v.tZ)(M.Tg,{css:W.root,children:(0,v.tZ)(b.G,{css:W.inner,children:(0,v.tZ)(b.G,{css:W.tabs,children:t.map(function(e){return(0,v.BX)(b.G,{css:Z.l0.position.relative,children:[(0,v.tZ)(O.zx,{style:{borderBottom:"1px solid "+(n===e.view?Z.TV.foregroundDefault:"transparent")},css:W.tab,text:e.label,iconLeft:e.icon,onClick:function(){return r(e)}}),e.view!==F.k.Analytics||o||a?null:(0,v.tZ)(b.G,{css:W.dot})]},e.view)})})})})},V=n(41733),z=n(30509),j=n(98924),q=n(41365),J=[Z.l0.px(8),Z.l0.pt(16)],Y=(0,I.X)({root:[J],rootMaxWidth:[J,q.Qw.maxWidth]}),K=function(e){var t=e.children,n=e.maxWidth,r=(0,j._)(e,["children","maxWidth"]);return(0,v.tZ)(b.G,(0,z._)((0,V._)({},r),{css:n?Y.rootMaxWidth:Y.root,children:t}))},$=n(42516),Q=n(26881),ee=n(43312),et=n(55460),en=(0,ee.iv)([Z.l0.maxHeight(320),Z.l0.minHeight(240),{aspectRatio:"2 / 1"}]);function er(){var e=(0,et.F)().values;return{animation:{duration:0},backgroundColor:e.global.backgroundHigher,borderColor:e.global.outlineDimmer,borderWidth:1,titleFont:{family:"'IBM Plex Sans', sans-serif"},bodyFont:{family:"'IBM Plex Sans', sans-serif"},footerFont:{family:"'IBM Plex Sans', sans-serif"},padding:8,cornerRadius:6}}var ei=n(99266),eo=n(82230),ea=n(85289),el=n(21262),ec=n(71440),es=n(58995);function eu(){var e=(0,el._)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return eu=function(){return e},e}function ed(){var e=(0,el._)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return ed=function(){return e},e}var ef={},eh=(0,ec.Ps)(eu()),ep=(0,ec.Ps)(ed(),eh),em=function(e){var t=e.data;Q.kL.register(Q.ZL);var n=(0,et.F)().values;return(0,v.tZ)(ea.$Q,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},plugins:{tooltip:er()},scales:{y:{title:{display:!0,text:"# Requests",color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:n.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return e}},grid:{color:n.global.outlineDimmest}},x:{title:{font:{family:"'IBM Plex Sans', sans-serif"},display:!0,text:"Duration (ms)",color:n.global.foregroundDimmer},ticks:{autoSkip:!1,maxRotation:20,color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:n.global.outlineDimmest}}}},data:{labels:t.results.map(function(e){var t=e.value.replace("ms","").split("-"),n=t[t.length-1];return n.includes("s+")?n.replace("s+","000+"):"< "+n}),datasets:[{borderWidth:0,data:t.results.map(function(e){return e.count}),backgroundColor:Array(t.results.length).fill(n.global.tealDefault)}]}})},ev=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=(0,m._)((0,x.useState)(void 0),2),c=l[0],s=l[1],u=(t=(0,V._)({},ef,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsDuration.__typename){case"UserError":case"NotFoundError":s(Error(e.repl.analyticsDuration.message))}}}),es.a(ep,t)),d=u.data,f=u.loading,h=u.error;return h&&s(h),(0,v.BX)(b.G,{css:Z.l0.colWithGap(8),children:[(0,v.tZ)(eo.xv,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,v.BX)(b.G,{children:[f?(0,v.tZ)(b.G,{css:[en,Z.l0.borderRadius(),ei.p.backgroundPulse()]}):null,c?(0,v.tZ)(R.E,{text:c.message,colorway:"negative"}):null,(null==d?void 0:null===(n=d.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=d.repl.analyticsDuration)||void 0===r?void 0:r.__typename)==="ReplAnalyticsDuration"?(0,v.tZ)(b.G,{css:en,children:(0,v.tZ)(em,{data:d.repl.analyticsDuration})}):null]})]})},eg=n(86306),ey=n(56412),eb=n(81995);Q.kL.register(Q.uw,Q.f$,Q.od,Q.jn,Q.u);var ew=function(e){var t=e.labels,n=e.datasets,r=e.maintainAspectRatio,i=e.yAxisLabel,o=e.xAxisLabel,a=e.unit,l=(0,et.F)().values,c={labels:t.map(function(e){return e.toISOString()}),datasets:n.map(function(e){return(0,z._)((0,V._)({},e),{data:e.data.map(function(e){var t=e.x,n=e.y;return{x:t.toISOString(),y:n}}),pointRadius:.5,tension:.1})})},s=t.length;return(0,v.tZ)(ea.x1,{options:{clip:4,interaction:{mode:"nearest",intersect:!1},transitions:{active:{animation:{duration:0}}},elements:{point:{hoverRadius:4},line:{borderWidth:2}},responsive:!0,maintainAspectRatio:void 0===r||r,plugins:{tooltip:(0,z._)((0,V._)({},er()),{callbacks:{title:function(e){var t=new Date(e[0].label);return(0,ey.Z)(t,"MMM d, HH:mm (z)")}}})},scales:{y:{title:{display:!0,text:void 0===i?"# Requests":i,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return a?"".concat(e).concat(a):e}},min:0},x:{title:{display:!0,text:void 0===o?"Time":o,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e,n){var r=t[n];if(s<=24){if(r.getHours()%4!=0)return;return(0,ey.Z)(r,"HH:mm")}if(r.toISOString()===(0,eb.Z)(r).toISOString())return(0,ey.Z)(r,"MMM d")}}}}},data:c})};function eZ(){var e=(0,el._)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return eZ=function(){return e},e}function ex(){var e=(0,el._)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return ex=function(){return e},e}function eC(){var e=(0,el._)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eC=function(){return e},e}var e_={},eS=(0,ec.Ps)(eZ()),ek=(0,ec.Ps)(ex(),eS),eE=(0,ec.Ps)(eC(),ek),eT=function(e){var t=e.data,n=e.start,r=e.hours,i=(0,et.F)().values,o=Array(r).fill(0).map(function(e,t){return(0,eg.Z)(n,t)}),a=t.results.reduce(function(e,t){return e.set(t.timestamp,t),e},new Map),l=[{label:"Connected",data:o.map(function(e){var t;return{y:(null!==(t=a.get(e.toISOString()))&&void 0!==t?t:{success:0}).success,x:e}}),borderColor:i.global.accentPrimaryStronger,backgroundColor:i.global.accentPrimaryStronger},{label:"Failed",data:o.map(function(e){var t;return{y:(null!==(t=a.get(e.toISOString()))&&void 0!==t?t:{failure:0}).failure,x:e}}),borderColor:i.global.accentNegativeStronger,backgroundColor:i.global.accentNegativeStronger}];return(0,v.tZ)(ew,{labels:o,datasets:l,maintainAspectRatio:!1})},eR=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=(0,m._)((0,x.useState)(void 0),2),c=l[0],s=l[1],u=(t=(0,V._)({},e_,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":s(Error(e.repl.analyticsPageViews.message))}}}),es.a(eE,t)),d=u.data,f=u.loading,h=u.error,p=(null==d?void 0:null===(n=d.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=d.repl.analyticsPageViews)||void 0===r?void 0:r.__typename)==="ReplAnalyticsPageViews"?d.repl.analyticsPageViews:void 0,g=p?p.uniques:void 0;return h&&s(h),(0,v.BX)(b.G,{css:[Z.l0.colWithGap(8)],children:[(0,v.BX)(b.G,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween],children:[(0,v.tZ)(eo.xv,{variant:"subheadDefault",multiline:!1,children:"Requests"}),g?(0,v.BX)(eo.xv,{multiline:!1,children:[(0,v.tZ)("strong",{children:g})," unique visitors"]}):null]}),(0,v.BX)(b.G,{children:[f?(0,v.tZ)(b.G,{css:[Z.l0.width("100%"),en,Z.l0.borderRadius(),ei.p.backgroundPulse()]}):null,c?(0,v.tZ)(R.E,{text:c.message,colorway:"negative"}):null,p?(0,v.tZ)(b.G,{css:en,children:(0,v.tZ)(eT,{data:p,start:o,hours:a})}):null]})]})};function eI(){var e=(0,el._)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n    unit\n  }\n"]);return eI=function(){return e},e}function eD(){var e=(0,el._)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return eD=function(){return e},e}function eB(){var e=(0,el._)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eB=function(){return e},e}var eG={},eA=(0,ec.Ps)(eI()),eP=(0,ec.Ps)(eD(),eA),eN=(0,ec.Ps)(eB(),eP),eL=n(57201),eO=function(e){var t,n,r=e.data,i=e.colorFn,o=e.xAxisLabel,a=e.yAxisLabel,l=(t={},r.results.forEach(function(e){var n=e.value;t[n]||(t[n]=[]),t[n].push({x:new Date(e.timestamp),y:e.count})}),Object.keys(t).map(function(e){var n=i(e,0);return{label:e,data:t[e],borderColor:n,backgroundColor:n}})),c=l.flatMap(function(e){return e.data.map(function(e){return new Date(e.x)})}).sort(function(e,t){return e.getTime()-t.getTime()}),s=null===(n=r.results[0])||void 0===n?void 0:n.unit,u=s?function(e,t){var n=Object.entries(e).find(function(e){var n=(0,m._)(e,2);return n[0],n[1]===t});if(n)return e[n[0]]}(eL.YL,s):void 0;return(0,v.tZ)(ew,{labels:c,datasets:l,maintainAspectRatio:!1,yAxisLabel:a,xAxisLabel:o,unit:u})},eU=function(e){var t=e.data,n=e.start,r=e.hours,i=e.colorFn,o=Array(r).fill(0).map(function(e,t){return(0,eg.Z)(n,t)}),a=t.results.reduce(function(e,t){var n,r=t.timestamp,i=t.value,o=t.count,a=null!==(n=e.get(i))&&void 0!==n?n:new Map;return a.set(r,o),e.set(i,a),e},new Map),l=(0,k._)(a.keys()).map(function(e,t){var n=i(e,t),r=a.get(e);return{label:e,data:o.map(function(e){var t,n=null!==(t=null==r?void 0:r.get(e.toISOString()))&&void 0!==t?t:0;return{x:new Date(e),y:n}}),borderColor:n,backgroundColor:n}});return(0,v.tZ)(ew,{labels:o,datasets:l,maintainAspectRatio:!1})},eM=function(e){var t,n,r,i=e.replId,o=e.title,a=e.metric,l=e.start,c=e.hours,s=e.colorFn,u=(0,m._)((0,x.useState)(void 0),2),d=u[0],f=u[1],h=(t=(0,V._)({},eG,{variables:{id:i,input:{metric:a,start:l,hours:c,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTimeSeries.__typename){case"UserError":case"NotFoundError":f(Error(e.repl.analyticsTimeSeries.message))}}}),es.a(eN,t)),p=h.data,g=h.loading,y=h.error,w=(null==p?void 0:null===(n=p.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=p.repl.analyticsTimeSeries)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTimeSeries"?p.repl.analyticsTimeSeries:void 0;return y&&f(y),(0,v.BX)(b.G,{css:[Z.l0.colWithGap(8)],children:[(0,v.tZ)(b.G,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween],children:(0,v.tZ)(eo.xv,{variant:"subheadDefault",multiline:!1,children:o})}),(0,v.BX)(b.G,{children:[g?(0,v.tZ)(b.G,{css:[Z.l0.width("100%"),en,Z.l0.borderRadius(),ei.p.backgroundPulse()]}):null,d?(0,v.tZ)(R.E,{text:d.message,colorway:"negative"}):null,w?(0,v.tZ)(b.G,{css:en,children:(0,eL.BB)(a)?(0,v.tZ)(eO,{data:w,colorFn:s,yAxisLabel:""}):(0,v.tZ)(eU,{data:w,start:l,hours:c,colorFn:s})}):null]})]})},eX=n(85763),eF=n(92286),eW=n(73705),eH=n(11765),eV=n.n(eH);function ez(){var e=(0,el._)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return ez=function(){return e},e}function ej(){var e=(0,el._)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return ej=function(){return e},e}var eq={},eJ=(0,ec.Ps)(ez()),eY=(0,ec.Ps)(ej(),eJ),eK=function(e){var t=e.data,n=e.variant;if(0===t.results.length)return(0,v.tZ)(eo.xv,{multiline:!1,children:"No results"});switch(n){case"map":return(0,v.tZ)(e0,{data:t});case"pie":return(0,v.tZ)(eQ,{data:t,devices:!1});case"device-pie":return(0,v.tZ)(eQ,{data:t,devices:!0});case"table":return(0,v.tZ)(e$,{data:t})}},e$=function(e){var t=e.data;return Q.kL.register(Q.qi),(0,v.tZ)(b.G,{children:t.results.map(function(e,t){return(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(16),Z.l0.py(8),{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],children:[(0,v.tZ)(b.G,{css:[Z.l0.flex.grow(1),Z.l0.maxWidth("90%")],children:(0,v.tZ)(eo.xv,{title:e.value,multiline:!1,children:e.value})}),(0,v.tZ)(b.G,{children:(0,v.tZ)(eo.xv,{multiline:!1,children:e.count})})]},t)})})},eQ=function(e){var t=e.data,n=e.devices,r=(0,et.F)(),i=r.isDarkColorScheme,o=r.values,a=i?Z.tX.categorical:Z.tX.categorical.reverse(),l=new Map;return n?t.results.forEach(function(e){var t=e.value,n=e.count,r=t.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),o=l.get(i)||0;l.set(i,o+n)}else{var a=l.get("Unknown")||0;l.set("Unknown",a+n)}}):t.results.forEach(function(e){var t=e.value,n=e.count,r=t.replace(/ \(.*\)/,""),i=l.get(r)||0;l.set(r,i+n)}),(0,v.tZ)(b.G,{css:en,children:(0,v.tZ)(ea.by,{options:{radius:"90%",maintainAspectRatio:!1,plugins:{tooltip:er()}},data:{labels:(0,k._)(l.keys()),datasets:[{borderWidth:(0,k._)(l.keys()).length>1?1:0,borderColor:o.global.outlineDimmest,data:(0,k._)(l.values()),backgroundColor:Array(l.size).fill(0).map(function(e,t){return a[t%a.length]})}]}})})},e0=function(e){var t=e.data,r=eV()(function(){return Promise.all([n.e(5381),n.e(4096),n.e(8742),n.e(7739)]).then(n.bind(n,67739))},{loadableGenerated:{webpack:function(){return[67739]}},ssr:!1}),i=t.results.map(function(e){return{country:e.value,numHits:e.count}});return(0,v.tZ)(r,{countries:i})},e1=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=e.metric,c=e.count,s=e.variant,u=void 0===s?"table":s,d=e.expandable,f=(0,eL.CZ)(l),h=(0,m._)((0,x.useState)(void 0),2),p=h[0],g=h[1],y=(0,m._)((0,x.useState)(!1),2),w=y[0],C=y[1],_=(t=(0,V._)({},eq,{variables:{id:i,input:{metric:l,start:o,hours:a,deployment:!0,count:w?3*c:c}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTopList.__typename){case"UserError":case"NotFoundError":g(Error(e.repl.analyticsTopList.message))}}}),es.a(eY,t)),S=_.data,k=_.loading,E=_.error;return E&&g(E),(0,v.BX)(b.G,{css:Z.l0.colWithGap(8),children:[(0,v.BX)(b.G,{css:Z.l0.rowWithGap(8),children:[(0,v.tZ)(eo.xv,{variant:"subheadDefault",multiline:!1,children:"device-pie"===u?"Top Devices":"Top ".concat(f)}),void 0!==d&&d?(0,v.tZ)(eX.hU,{alt:w?"Collapse list":"Expand list",onClick:function(){return C(!w)},children:w?(0,v.tZ)(eF.Z,{}):(0,v.tZ)(eW.Z,{})}):null]}),(0,v.BX)(b.G,{children:[k?(0,v.tZ)(b.G,{css:[Z.l0.height(80),Z.l0.borderRadius(),ei.p.backgroundPulse()]}):null,p?(0,v.tZ)(R.E,{text:p.message,colorway:"negative"}):null,(null==S?void 0:null===(n=S.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=S.repl.analyticsTopList)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTopList"?(0,v.tZ)(eK,{variant:u,data:S.repl.analyticsTopList}):null]})]})},e2=n(13033),e3=n(43449),e4=n(6543),e8=n(34017),e6=n(60305),e5=function(e){var t=e.context;(0,e6.j)(e6.U3.DEPLOYMENT_SECTION_VIEWED,{context:t})},e9=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],e7={label:"one week",key:168},te=Z.nC.min(600),tt=(0,I.X)({fullWidth:(0,$._)({},te,{gridColumn:"span 2"})}),tn=(0,I.X)({container:(0,$._)({display:"grid",gap:32},te,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:tt.fullWidth,map:[tt.fullWidth],pies:[tt.fullWidth,Z.l0.flex.column,(0,$._)({gap:32},Z.nC.min(480),[Z.l0.flex.row,{" > *":{flex:1}}])]}),tr=function(e){var t=e.replId,n=(0,m._)((0,x.useState)(e7),2),r=n[0],i=r.key,o=r.label,a=n[1],l=(0,m._)((0,x.useState)((0,e4.Z)((0,e8.Z)(new Date),i-1)),2),c=l[0],s=l[1],u=(0,X.o)("deployment-analytics-dot"),d=u.isDone,f=u.setAsDone,h=(0,e4.Z)((0,e8.Z)(new Date),23),p=(0,et.F)().values,g=[p.global.redStronger,p.global.redDimmer,p.global.redStrongest,p.global.redDimmest],y=[p.global.orangeDefault,p.global.orangeDimmer,p.global.orangeStronger,p.global.orangeDimmest],w=[p.global.blueDefault,p.global.blueDimmer,p.global.blueStronger,p.global.blueDimmest],C=[p.global.greenDefault,p.global.greenDimmer,p.global.greenStronger,p.global.greenDimmest];return(0,x.useEffect)(function(){e5({context:F.k.Analytics})},[]),(0,x.useEffect)(function(){d||f()},[d,f]),(0,v.tZ)(K,{children:(0,v.BX)(b.G,{css:tn.container,children:[(0,v.tZ)(b.G,{css:tn.fullWidth,children:(0,v.tZ)(e2.ZE,{items:e9,label:"Past ".concat(o),icon:(0,v.tZ)(e3.Z,{}),onAction:function(e){var t,n="string"==typeof e?parseInt(e,10):e;a(null!==(t=e9.find(function(e){return e.key===n}))&&void 0!==t?t:e7),s((0,e4.Z)((0,e8.Z)(new Date),n-1))},cssProps:[Z.l0.width("fit-content")],children:e9.map(function(e){return(0,v.tZ)(e2.ck,{children:(0,v.tZ)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.color.foregroundDefault],children:(0,v.tZ)(eo.xv,{multiline:!1,children:e.label})})},e.key)})})}),(0,v.tZ)(b.G,{css:tn.fullWidth,children:(0,v.tZ)(eR,{replId:t,start:c,hours:i})}),(0,v.tZ)(e1,{replId:t,metric:eL.Pc.Url,start:c,hours:i,count:4,expandable:!0}),(0,v.tZ)(e1,{replId:t,metric:eL.Pc.Referrer,start:c,hours:i,count:4,expandable:!0}),(0,v.tZ)(eM,{replId:t,title:"HTTP Statuses (24h)",metric:eL.RH.Statuses,start:h,hours:24,colorFn:function(e,t){var n=Number(e);return n<300?C[t%C.length]:n<400?w[t%w.length]:n<500?y[t%y.length]:g[t%g.length]}}),(0,v.tZ)(ev,{replId:t,start:c,hours:i}),(0,v.BX)(b.G,{css:tn.pies,children:[(0,v.tZ)(e1,{replId:t,metric:eL.Pc.Browser,start:c,hours:i,count:100,variant:"pie"}),(0,v.tZ)(e1,{replId:t,metric:eL.Pc.Browser,start:c,hours:i,count:100,variant:"device-pie"})]}),(0,v.tZ)(b.G,{css:tn.map,children:(0,v.tZ)(e1,{replId:t,metric:eL.Pc.Country,start:c,hours:i,count:100,variant:"map"})})]})})},ti=(0,I.X)({line:{width:1,position:"absolute",left:3},circlePast:{position:"absolute",top:10,left:1,width:5,height:5,borderRadius:"100%",opacity:.5}}),to=(0,I.X)({container:{width:7,position:"relative"},linePast:[ti.line,{backgroundColor:Z.TV.outlineDimmest,top:15,bottom:-10}],linePresent:[ti.line,{backgroundImage:"linear-gradient(to top, ".concat(Z.TV.outlineDimmest,", ").concat(Z.TV.outlineDimmer,")"),top:27,bottom:-10}],lineFuture:[ti.line,{borderRight:"1px dashed "+Z.TV.outlineDimmer,top:23,bottom:-20}],lineFutureFailClosed:[ti.line,{backgroundColor:Z.TV.outlineDimmest,top:19,bottom:-20}],lineFutureFailOpen:[ti.line,{borderRight:"1px dashed "+Z.TV.outlineDimmer,top:22,bottom:-18}],circlePastGreen:[ti.circlePast,Z.l0.backgroundColor.accentPositiveDefault],circlePastRed:[ti.circlePast,Z.l0.backgroundColor.accentNegativeDefault],circlePastGray:[ti.circlePast,Z.l0.backgroundColor.outlineDimmer],circlePresent:[Z.l0.backgroundColor.accentPrimaryStronger,{position:"absolute",top:20,left:0,width:7,height:7,borderRadius:"100%"}],circleFuture:{position:"absolute",top:12,left:-1,width:9,height:9},circleFutureFailClosed:[Z.l0.backgroundColor.accentNegativeDefault,{position:"absolute",top:14,left:1,width:5,height:5,borderRadius:"100%",opacity:.6}]});function ta(e){var t,n;switch(e.type){case"pastSuccess":t=to.linePast,n=(0,v.tZ)(b.G,{css:to.circlePastGreen});break;case"pastFail":t=to.linePast,n=(0,v.tZ)(b.G,{css:to.circlePastRed});break;case"pastNeutral":t=to.linePast,n=(0,v.tZ)(b.G,{css:to.circlePastGray});break;case"present":t=to.linePresent,n=(0,v.tZ)(b.G,{css:to.circlePresent});break;case"future":t=to.lineFuture,n=(0,v.tZ)("svg",{viewBox:"0 0 9 9",css:to.circleFuture,children:(0,v.tZ)("circle",{cx:4.5,cy:4.5,r:4,fill:"none",stroke:Z.TV.outlineStrongest,strokeDasharray:"2 1"})});break;case"futureFailClosed":t=to.lineFutureFailClosed,n=(0,v.tZ)(b.G,{css:to.circleFutureFailClosed});break;case"futureFailOpen":t=to.lineFutureFailOpen,n=null}return(0,v.BX)(b.G,{css:to.container,children:[(0,v.tZ)(b.G,{css:t,"data-timeline-line":!0}),n]})}var tl=n(67242),tc=n(39477),ts=n(25114),tu=n(81541),td=n(16572),tf=n(54401),th=n(8261),tp=n(59947),tm=n(82400),tv=n(65377),tg=function(e){var t=e.stage,n=e.activeStage;return t===e.erroredStage?(0,v.tZ)(N.Z,{alt:"error"}):t<n?(0,v.tZ)(tp.Z,{alt:"success"}):t===n?(0,v.tZ)(w.Z,{alt:"current"}):(0,v.tZ)(tm.Z,{alt:"waiting"})},ty=function(e){var t=e.stage,n=e.activeStage,r=e.erroredStage;return n?t===r?"negative":t<n?"positive":t===n?"primary":null:null},tb=function(e){var t,n=e.stage,r=e.totalStagesWithTitle,i=e.activeStage,o=e.text,a=e.erroredStage,l=(0,tf.d)({tablet:!0});return(0,v.tZ)(th.D,{text:i?o:"",colorway:null!==(t=ty({stage:n,activeStage:i,erroredStage:a}))&&void 0!==t?t:void 0,variant:"filled",css:[Z.l0.border({color:tv.TV.backgroundDefault}),Z.l0.overflow("hidden"),i||l?{}:ei.p.foregroundPulse(),(0,$._)({flex:1,height:26,zIndex:r-n,":first-of-type":{paddingLeft:6,paddingRight:6},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}," span":Z.l0.display.none},Z.nC.min(400),{" span":Z.l0.display.flex,":first-of-type":{paddingLeft:16,paddingRight:0}})],iconRight:i?(0,v.tZ)(tg,{stage:n,activeStage:i,erroredStage:a}):void 0})};function tw(){var e=(0,el._)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return tw=function(){return e},e}var tZ={},tx=(0,ec.Ps)(tw()),tC=[{id:0,title:"Provision",statusType:L.Fe.Pending},{id:1,title:"Build",statusType:L.Fe.Building},{id:2,title:"Bundle",statusType:L.Fe.Running},{id:3,title:"Promote",statusType:L.Fe.Promoting},{id:4,statusType:L.Fe.Success}],t_=tC.filter(function(e){return"title"in e}),tS=function(e){return tC.find(function(t){return t.statusType===e})},tk=(0,I.X)({base:{borderRadius:Z.TV.borderRadiusDefault,paddingLeft:6,paddingRight:6,height:24},disabled:{pointerEvents:"none",color:Z.TV.greyDefault}}),tE=[Z.l0.borderRadius(),{border:"1px solid var(--outline-dimmest)"}],tT=(0,I.X)({container:tE,top:[Z.l0.colWithGap(12),Z.l0.p(16),Z.l0.pt(12)],header:[Z.l0.rowWithGap(40)],started:[Z.l0.rowWithGap(6),Z.l0.flex.growAndShrink(1),Z.l0.justify.end],cancel:tk.base,canceling:[tk.base,tk.disabled],stages:[Z.l0.flex.row,Z.l0.flex.grow(1),{zIndex:0}],bottom:[Z.l0.borderRadius(0,0,4,4),Z.l0.overflow("hidden")],logsOpen:[Z.l0.overflow("hidden"),Z.l0.height("auto")],logsClosed:[Z.l0.overflow("hidden"),Z.l0.height(0)],xterm:[Z.l0.width("100%"),Z.l0.maxWidth("100%"),Z.l0.height(340)]}),tR=function(e){return(0,v.BX)(b.G,{css:tT.top,children:[(0,v.BX)(b.G,{css:tT.header,children:[(0,v.BX)(b.G,{css:Z.l0.rowWithGap(8),children:[(0,v.tZ)(eo.xv,{variant:"subheadDefault",multiline:!1,children:"Deploying"}),(0,v.tZ)(O.zx,{style:{opacity:e.onCancel?1:0},size:"small",text:"Cancel",css:e.isCanceling?tT.canceling:tT.cancel,onClick:e.onCancel,iconRight:e.isCanceling?(0,v.tZ)(w.Z,{}):void 0})]}),(0,v.BX)(b.G,{css:tT.started,children:[e.timeStarted&&e.userDisplayName?(0,v.BX)(eo.xv,{css:Z.l0.color.greyStronger,multiline:!1,children:["Started ".concat((0,td.Z)(new Date(e.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,v.tZ)("span",{css:Z.l0.color.foregroundDefault,children:e.userDisplayName})]}):null,e.onViewBuildLogs?(0,v.tZ)(eX.hU,{onClick:e.onViewBuildLogs,alt:"View deploy logs",children:e.viewBuildLogs?(0,v.tZ)(tc.Z,{}):(0,v.tZ)(e3.Z,{})}):null]})]}),(0,v.tZ)(b.G,{css:tT.stages,children:t_.map(function(t){var n=t.id,r=t.title;return(0,v.tZ)(tb,{stage:n,totalStagesWithTitle:t_.length,text:r,activeStage:e.activeStage,erroredStage:e.erroredStage},n)})})]})},tI=function(e){return(0,C.kW)()===_.z.Preparing?(0,v.tZ)(b.G,{css:tT.container,children:(0,v.tZ)(tR,{})}):(0,v.tZ)(tD,(0,V._)({},e))},tD=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p=e.initialBuild,g=e.viewBuildLogsOnLoad,y=e.onViewLogs,w=e.onCanceled,_=e.onError,T=e.openFile,R=(0,C.rm)(),I=(0,C.pn)(),D=I?{id:I.id,status:I.status,provider:I.provider,timeStarted:I.timeCreated,userDisplayName:I.user.displayName}:void 0,B=(0,x.useRef)(p||D),G=(t={skip:!(null===(i=B.current)||void 0===i?void 0:i.id),variables:{input:{buildId:null!==(h=null===(o=B.current)||void 0===o?void 0:o.id)&&void 0!==h?h:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null==e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":_(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var t=e.hostingBuildDeployActionHistory.results;if(t&&t.length>0){var n=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;switch(s.__typename){case"HostingBuildDeployLogAction":n.push(s.log);break;case"HostingBuildDeployStatusAction":r.push(s)}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}ee({type:"history",payload:n});var u=!0,d=!1,f=void 0;try{for(var h,p=r[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;et(m.status)}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}}break;default:_("Unexpected typename.")}},onError:function(e){_(e.message)}},n=(0,V._)({},tZ,t),es.a(tx,n)),A=G.loading,P=G.refetch;(0,C.U)(function(e){switch(e.__typename){case"HostingBuildDeployLogAction":ee({type:"update",payload:e.log});break;case"HostingBuildDeployStatusAction":et(e.status)}});var N=(0,m._)((0,x.useState)(B.current?null===(a=tS(B.current.status))||void 0===a?void 0:a.id:void 0),2),O=N[0],U=N[1],M=(0,m._)((0,x.useState)((null===(l=B.current)||void 0===l?void 0:l.status)==="failed"?null===(c=tS(null===(s=B.current)||void 0===s?void 0:s.status))||void 0===c?void 0:c.id:void 0),2),X=M[0],F=M[1],W=(0,m._)((0,x.useState)(!1),2),H=W[0],z=W[1],j=(0,C.XZ)(),q=(0,m._)((0,ts.Z)({openFile:T,listFiles:j.listFiles}),2),J=q[0],Y=q[1],K=(0,tu.f)(),$=(0,m._)((0,x.useReducer)(function(e,t){switch(t.type){case"history":return J&&J.clear(),(0,k._)(t.payload).concat((0,k._)(e));case"update":return[t.payload];case"refetch":return J&&J.clear(),A||P(),[]}},[]),2),Q=$[0],ee=$[1],et=function(e){if(e===L.Fe.Failed)F(O);else{var t=tS(e);if(!t)return;U(t.id)}},en=(r=(0,S._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return z(!0),[4,R()];case 1:return e.sent(),w(),[2]}})}),function(){return r.apply(this,arguments)}),er=(0,m._)((0,x.useState)(g||!1),2),ei=er[0],eo=er[1],ea=function(){eo(!ei),ei||e5({context:"deploy_progress_logs"})};(0,x.useEffect)(function(){e5({context:"deploy_progress"})},[]),(0,x.useEffect)(function(){var e;(null===(e=B.current)||void 0===e?void 0:e.id)&&I&&I.id!==B.current.id&&(B.current={id:I.id,status:I.status,provider:I.provider,timeStarted:I.timeCreated,userDisplayName:I.user.displayName},U(void 0),F(void 0),ee({type:"refetch"}))},[I,null===(u=B.current)||void 0===u?void 0:u.id,P]),(0,x.useEffect)(function(){var e;void 0!==O&&(null===(e=B.current)||void 0===e?void 0:e.status)==="failed"&&F(O)},[O,null===(d=B.current)||void 0===d?void 0:d.status]),(0,x.useEffect)(function(){J&&Q.forEach(function(e){return J.write(e)})},[Q,J]);var el=null===(f=tC.find(function(e){return e.id===O}))||void 0===f?void 0:f.statusType,ec=el!==L.Fe.Success&&!X;return B.current?(0,v.BX)(b.G,{css:tT.container,children:[(0,v.tZ)(tR,{onCancel:ec?en:void 0,isCanceling:H,onViewBuildLogs:ea,viewBuildLogs:ei,timeStarted:B.current.timeStarted,userDisplayName:B.current.userDisplayName,activeStage:O,erroredStage:X}),(0,v.BX)(b.G,{css:tT.bottom,children:[(0,v.BX)(b.G,{css:ei?tT.logsOpen:tT.logsClosed,children:[(0,v.tZ)(tl.R,{}),(0,v.tZ)(b.G,{css:[Z.l0.display.flex,Z.l0.pt(12),Z.l0.pl(16),Z.l0.overflow("hidden"),{backgroundColor:null==K?void 0:K.background}],children:(0,v.tZ)(b.K.div,{css:tT.xterm,ref:Y})})]}),X&&el?(0,v.BX)(v.HY,{children:[(0,v.tZ)(tl.R,{}),el===L.Fe.Building?(0,v.tZ)(tN,{provider:B.current.provider,logs:Q.slice(-3),openFile:T,viewBuildLogs:ei,onViewBuildLogs:ea}):null,el===L.Fe.Promoting?(0,v.tZ)(tA,{provider:B.current.provider,logs:Q.slice(-3),openFile:T,viewBuildLogs:ei,onViewBuildLogs:ea,onViewApplicationLogs:y}):null]}):null]})]}):null},tB=(0,I.X)({errorContainer:[Z.l0.p(12),Z.l0.colWithGap(12)],warning:[Z.l0.colWithGap(8)],warningTitle:[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.fontWeight.medium],link:{color:Z.TV.foregroundDefault,textDecoration:"underline",":hover":{color:Z.TV.accentPrimaryStronger}},xtermContainer:[Z.l0.display.flex,Z.l0.pt(12),Z.l0.pl(16),Z.l0.overflow("hidden"),Z.l0.borderRadius(4,4,0,0)],xterm:[Z.l0.width("100%"),Z.l0.maxWidth("100%"),Z.l0.height(120)],xtermButton:Z.l0.borderRadius(0,0,4,4),list:[{listStyle:"inside"}],listCta:Z.l0.display.inlineFlex}),tG=function(e){var t=e.title,n=e.description,r=e.logs,i=e.viewBuildLogs,o=e.onViewBuildLogs,a=e.openFile,l=(0,tu.f)(),c=(0,C.XZ)(),s=(0,m._)((0,ts.Z)({openFile:a,listFiles:c.listFiles}),2),u=s[0],d=s[1],f=(0,x.useRef)(r?r.slice(-3):[]);return(0,x.useEffect)(function(){f.current.length&&f.current.forEach(function(e){null==u||u.write(e)})},[u]),(0,v.BX)(M.Tg,{elevated:!0,css:tB.errorContainer,children:[(0,v.BX)(b.G,{css:tB.warning,children:[(0,v.BX)(b.G,{css:tB.warningTitle,children:[(0,v.tZ)(N.Z,{color:Z.TV.accentNegativeStronger}),(0,v.tZ)(eo.xv,{multiline:!1,children:t})]}),(0,v.tZ)(eo.xv,{children:n})]}),void 0===i||i?null:(0,v.BX)(b.G,{children:[(0,v.tZ)(b.G,{css:tB.xtermContainer,style:{backgroundColor:null==l?void 0:l.background},children:(0,v.tZ)(b.K.div,{css:tB.xterm,ref:d})}),(0,v.tZ)(O.zx,{text:"View all",iconLeft:(0,v.tZ)(eW.Z,{}),onClick:o,css:tB.xtermButton})]})]})};function tA(e){var t=(0,C.MV)();return(0,v.tZ)(tG,(0,V._)({title:"Your app failed to promote",description:(0,v.BX)(v.HY,{children:["Common issues for promote stage errors can be an error occurring while trying to run your run command, your application exiting unexpectedly, an error on your app server or a provisioning issue.",(0,v.tZ)("br",{}),(0,v.tZ)("br",{}),"Ways to debug:",(0,v.BX)("ul",{css:tB.list,children:[t?(0,v.tZ)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,v.tZ)("li",{children:"make sure your repl runs in the Workspace"}),(0,v.BX)("li",{children:["view our"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:tB.link,onClick:function(){return e5({context:"troubleshooting_doc"})},children:"troubleshooting tips"})]}),e.provider!==L.r4.Static&&e.onViewApplicationLogs?(0,v.BX)("li",{children:["look for errors in your application's server logs"," ",(0,v.tZ)(O.zx,{text:"Logs",size:"small",iconLeft:(0,v.tZ)(A.Z,{}),onClick:e.onViewApplicationLogs,css:Z.l0.display.inlineFlex})," "]}):null,(0,v.tZ)("li",{children:"look for errors in your promote stage logs"})]})]})},e))}function tP(e){return(0,v.tZ)(tG,(0,V._)({title:"This build's deploy logs have expired",description:(0,v.tZ)(v.HY,{children:"No information was found for this build. Deploy logs expire after 30 days."})},e))}function tN(e){var t=(0,C.MV)();return(0,v.tZ)(tG,(0,V._)({title:"Your app failed to build",description:(0,v.BX)(v.HY,{children:["Common issues for build stage errors can be an error occurring while trying to run your build command or an compilation issue with your application code.",(0,v.tZ)("br",{}),(0,v.tZ)("br",{}),"Ways to debug:",(0,v.BX)("ul",{css:tB.list,children:[t?(0,v.tZ)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,v.tZ)("li",{children:"make sure your repl runs in the Workspace"}),(0,v.BX)("li",{children:["view our"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:tB.link,onClick:function(){return e5({context:"troubleshooting_doc"})},children:"troubleshooting tips"})]}),(0,v.tZ)("li",{children:"look for errors in your build stage logs"})]})]})},e))}var tL=n(71166),tO=n(27022),tU=n(64586);(a||(a={})).Current="current";var tM=(0,$._)({},"current",{icon:(0,v.tZ)(function(e){var t=e.color;return(0,v.tZ)(b.G,{css:[Z.l0.align.center,Z.l0.rowWithGap(8),{textTransform:"capitalize"}],children:(0,v.tZ)(b.G,{tag:"span",css:[Z.l0.width("8px"),Z.l0.height("8px"),Z.l0.borderRadius("full"),{backgroundColor:t,boxShadow:"0 0 12px ".concat(t)}]})})},{color:Z.TV.blueStronger}),text:"Current deployment"}),tX=b.K.div,tF=function(e){var t=e.activityLogItem.type,n=(0,m._)((0,x.useState)(!1),2),r=n[0],i=n[1],o=(0,m._)((0,x.useState)(!1),2),a=o[0],l=o[1],c=(0,x.useRef)(!1);(0,x.useEffect)(function(){c.current=!0;var e=setTimeout(function(){l(r)},200);return function(){clearTimeout(e)}},[r]);var s=t in tM&&tM[t];if(!s)return null;var u=s.icon,d=s.text;return(0,v.tZ)(b.G,{css:[Z.l0.p(8)],onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:(0,v.BX)(tU.Z,{isOpen:a,onClickOutside:function(){return l(!1)},padding:8,children:[(0,v.tZ)(tX,{css:Z.l0.cursor.pointer,children:u}),(0,v.tZ)(b.G,{css:[Z.l0.maxWidth(240)],children:(0,v.tZ)(eo.xv,{children:d})})]})})};function tW(){var e=(0,el._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    hasDeployLogs\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n    }\n  }\n"]);return tW=function(){return e},e}function tH(){var e=(0,el._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n  }\n  ","\n"]);return tH=function(){return e},e}function tV(){var e=(0,el._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return tV=function(){return e},e}function tz(){var e=(0,el._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return tz=function(){return e},e}var tj={},tq=(0,ec.Ps)(tW()),tJ=(0,ec.Ps)(tH(),tq),tY=(0,ec.Ps)(tV(),tJ),tK=(0,ec.Ps)(tz()),t$=n(2511),tQ=n(49494),t0=function(e){var t=e.build,n=t.id.slice(0,8),r=(0,m._)((0,x.useState)(!1),2),i=r[0],o=r[1],a=(0,m._)((0,x.useState)(!1),2),l=a[0],c=a[1],s=(0,x.useRef)(!1);return(0,x.useEffect)(function(){s.current=!0;var e=setTimeout(function(){c(i)},200);return function(){clearTimeout(e)}},[i]),(0,v.tZ)("span",{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:(0,v.BX)(tU.Z,{isOpen:l,onClickOutside:function(){return c(!1)},padding:8,children:[(0,v.tZ)("span",{css:[U.gU.listItem,Z.l0.display.inlineBlock,Z.l0.px(2),Z.l0.py(0),Z.l0.borderRadius(4)],children:n}),(0,v.tZ)(b.G,{css:[Z.l0.maxWidth(260)],children:(0,v.tZ)(eo.xv,{variant:"small",children:t.id})})]})})},t1=(l={},(0,$._)(l,tQ.dD.Deploy,function(e){return(0,v.BX)(v.HY,{children:["deployed ",(0,v.tZ)(t0,{build:e})]})}),(0,$._)(l,tQ.dD.Rollback,function(e){return(0,v.BX)(v.HY,{children:["rolled back ",(0,v.tZ)(t0,{build:e})]})}),(0,$._)(l,tQ.dD.Fail,function(e){return(0,v.BX)(v.HY,{children:["failed to deploy ",(0,v.tZ)(t0,{build:e})]})}),l),t2=function(e){var t=e.activityLogItem,n=t.type,r=t.build,i=t.user.displayName,o=n in t1&&t1[n](r);return o?(0,v.BX)(eo.xv,{multiline:!1,children:[(0,v.tZ)("span",{css:Z.l0.fontWeight.medium,children:i+" "}),o]}):null},t3=n(11491),t4=n(32622);function t8(e){var t=e.onViewBuildLogs,n=e.type,r=(0,T.Z)();return(0,v.tZ)(na,{replId:r,onSelect:t,type:void 0===n?"default":n})}var t6=tC.filter(function(e){return"title"in e}),t5=(0,I.X)({root:[Z.l0.flex.row,Z.l0.px(8),Z.l0.pb(8),{zIndex:0}]});function t9(e){var t=e.activeStage,n=e.erroredStage;return(0,v.tZ)(b.G,{css:t5.root,children:t6.map(function(e){return(0,v.tZ)(tb,{stage:e.id,text:e.title,totalStagesWithTitle:t6.length,activeStage:t,erroredStage:n},e.id)})})}var t7=(0,I.X)({root:[Z.l0.colWithGap(8),Z.l0.height("100%")],header:[Z.l0.pt(8),Z.l0.px(8),Z.l0.rowWithGap(8),Z.l0.align.center],divider:[{marginLeft:8,marginRight:8,borderBottom:"1px solid "+Z.TV.outlineDimmest}],name:[Z.l0.color.foregroundDefault,Z.l0.fontWeight.medium],content:[Z.l0.p(8),Z.l0.flex.growAndShrink(1),Z.l0.position.relative],loading:[Z.l0.coverContainer,Z.l0.center],error:[Z.l0.m(8),Z.l0.borderRadius(8),Z.l0.overflow("hidden")],xterm:[Z.l0.coverContainer,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,"& > div":[Z.l0.coverContainer,Z.l0.p(8)]}]});function ne(e){var t,n,r=e.build,i=e.onBack,o=e.fs,a=e.openFile,l=e.onViewAppLogs,c=(0,m._)((0,ts.Z)({openFile:a,listFiles:o.listFiles}),2),s=c[0],u=c[1],d=(t={variables:{input:{buildId:r.id}},ssr:!1,fetchPolicy:"cache-and-network"},n=(0,V._)({},tj,t),es.a(tK,n)),f=d.data,h=d.loading,p=(0,x.useMemo)(function(){var e=[],t=f&&"HostingBuildDeployActionHistoryResults"===f.hostingBuildDeployActionHistory.__typename?f.hostingBuildDeployActionHistory.results:null;if(t){var n=void 0,r=void 0,i=void 0,o=!0,a=!1,l=void 0;try{for(var c,s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)!function(){var t=s.value;if("HostingBuildDeployLogAction"===t.__typename)return e.push(t.log);tC.some(function(e){return e.statusType===t.status})&&(n=t.status),t.status===L.Fe.Failed&&(r=n)}()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=n?null===(c=tS(n))||void 0===c?void 0:c.id:void 0;return r&&(i=d),{logs:e,activeStage:d,erroredStage:i,erroredStatus:r}}},[f]);return(0,x.useEffect)(function(){s&&p&&s.write(p.logs.join(""))},[s,p]),(0,v.BX)(b.G,{css:t7.root,children:[(0,v.BX)(b.G,{css:t7.header,children:[(0,v.tZ)(eX.hU,{alt:"Back to timeline",onClick:function(){return i()},children:(0,v.tZ)(t$.Z,{})}),(0,v.tZ)(b.G,{children:(0,v.BX)(eo.xv,{color:"dimmer",multiline:!1,children:[(0,v.tZ)("span",{css:t7.name,children:r.user.displayName+" "}),(0,t3.BX)(r.status)]})}),(0,v.tZ)(t0,{build:r})]}),p||h?(0,v.BX)(v.HY,{children:[(null==p?void 0:p.erroredStatus)?(0,v.BX)(b.G,{css:t7.error,children:[(null==p?void 0:p.erroredStatus)===L.Fe.Building?(0,v.tZ)(tN,{provider:r.provider,openFile:a}):null,(null==p?void 0:p.erroredStatus)===L.Fe.Promoting?(0,v.tZ)(tA,{provider:r.provider,openFile:a,onViewApplicationLogs:l}):null]}):null,(0,v.tZ)(t9,{activeStage:null==p?void 0:p.activeStage,erroredStage:null==p?void 0:p.erroredStage}),(0,v.tZ)(b.G,{css:t7.divider}),(0,v.BX)(M.Tg,{css:t7.content,children:[(0,v.tZ)(b.G,{css:t7.xterm,innerRef:u}),h||!s?(0,v.tZ)(b.G,{css:t7.loading,children:(0,v.tZ)(w.Z,{color:Z.TV.white,size:24})}):null]})]}):(0,v.tZ)(tP,{provider:r.provider,openFile:a})]})}var nt=(0,I.X)({item:Z.l0.rowWithGap(12),past:{":last-of-type":{"[data-timeline-line]":{display:"none"}}},future:{":last-of-type":{"[data-timeline-line]":{bottom:-19}}},animate:{animation:(0,q.Gs)(36.4)+" 300ms ease-out forwards"}}),nn=(0,I.X)({root:[Z.l0.colWithGap(8)],empty:[Z.l0.pb(8),Z.l0.center,Z.l0.align.stretch],items:[],loadMore:[Z.l0.center],item:[Z.l0.rowWithGap(8),Z.l0.pl(8),Z.l0.pr(4),Z.l0.pb(12),Z.l0.align.center,Z.l0.flex.growAndShrink(1),Z.l0.color.foregroundDimmest,Z.l0.hover(Z.l0.color.foregroundDefault)],itemMainText:[Z.l0.flex.growAndShrink(1),(0,$._)({},Z.nC.min(640),Z.l0.flex.growAndShrink(0))],itemLine:[Z.l0.display.none,(0,$._)({},Z.nC.min(640),[Z.l0.display.flex,Z.l0.flex.growAndShrink(1),Z.l0.border({color:Z.TV.outlineDimmest,direction:"top"})])],itemRight:[Z.l0.rowWithGap(6),Z.l0.justify.end,Z.l0.textAlign.right],itemContent:[Z.l0.rowWithGap(8),Z.l0.flex.growAndShrink(1),Z.l0.align.center],itemPast:[nt.item,nt.past],itemPastAnimate:[nt.item,nt.past,nt.animate],itemFuture:[nt.item,nt.future],itemFutureAnimate:[nt.item,nt.future,nt.animate],disabledLog:{cursor:"not-allowed"}}),nr=(0,I.X)({button:[Z.l0.reset.button,Z.l0.cursor.pointer,Z.l0.borderRadius(8),Z.l0.display.flex,Z.l0.rowWithGap(6),Z.l0.align.center,Z.l0.px(8),Z.l0.color.foregroundDimmer,Z.l0.height(32),Z.l0.hover(Z.l0.color.foregroundDefault)]}),ni=(0,I.X)({button:nr.button,buttonHighlight:[nr.button,Z.l0.color.accentNegativeStrongest,Z.l0.backgroundColor.accentNegativeDimmest,Z.l0.border({color:Z.TV.accentNegativeDimmer})],buttonOpen:Z.l0.flex.growAndShrink(1),buttonClosed:[Z.l0.flex.growAndShrink(1),Z.l0.pb(12)],buttonContent:[Z.l0.flex.growAndShrink(1),Z.l0.rowWithGap(8),Z.l0.align.center]});function no(e){var t=e.items,n=e.onClick,r=(0,m._)((0,x.useState)(!1),2),i=r[0],o=r[1],a=(0,C.pn)(),l=(0,x.useRef)(void 0);(0,x.useEffect)(function(){(null==a?void 0:a.status)!==void 0&&(l.current=null==a?void 0:a.status)},[a,null==a?void 0:a.status]);var c=!a&&l.current!==L.Fe.Building&&l.current!==L.Fe.Success,s=c?Z.TV.accentNegativeStronger:Z.TV.foregroundDimmer;return 0===t.length?null:(0,v.BX)(b.G,{children:[(0,v.BX)(b.G,{css:Z.l0.rowWithGap(12),children:[(0,v.tZ)(ta,{type:i?"futureFailOpen":"futureFailClosed"}),(0,v.tZ)(b.G,{css:i?ni.buttonOpen:ni.buttonClosed,children:(0,v.BX)("button",{onClick:function(){return o(!i)},css:c?ni.buttonHighlight:ni.button,children:[(0,v.BX)(b.G,{css:ni.buttonContent,children:[c?(0,v.tZ)(N.Z,{color:Z.TV.accentNegativeStronger}):null,(0,v.BX)(eo.xv,{children:[t.length," ",(0,t4.Z)("build",t.length)," failed"]}),i?null:(0,v.BX)(eo.xv,{children:[t.length>1?"Most recent: ":null,(0,td.Z)(new Date(t[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),i?(0,v.tZ)(tc.Z,{color:s}):(0,v.tZ)(e3.Z,{color:s})]})})]}),i?(0,v.tZ)(b.G,{css:Z.l0.pt(8),children:t.map(function(e){return(0,v.tZ)(nl,{item:e,onClick:function(){return n(e.build)},type:"future"},e.id)})}):null]})}function na(e){var t,n,r,i=e.replId,o=e.onSelect,a=e.type,l=void 0===a?"default":a,c=(t=(0,V._)({},tj,{variables:{replId:i,count:20},fetchPolicy:"cache-and-network",ssr:!1}),es.a(tY,t)),s=c.data,u=c.previousData,d=c.loading,f=c.error,h=c.fetchMore,p=null!=s?s:u,m=(null==p?void 0:p.repl.__typename)==="Repl"?p.repl:null,g=(null==m?void 0:null===(r=m.hostingDeployment)||void 0===r?void 0:r.__typename)==="HostingDeployment"?m.hostingDeployment:null,y=(n=(0,S._)(function(){var e;return(0,E.Jh)(this,function(t){switch(t.label){case 0:if(!(e=null==g?void 0:g.activityLogs.pageInfo.nextCursor))return[2];return[4,h({variables:{after:e,count:20}})];case 1:return t.sent(),[2]}})}),function(){return n.apply(this,arguments)}),Z=(0,tL.Z)({onLoadMore:y,rootMargin:"0px 0px 300px 0px"}).targetRef,_=(0,x.useRef)(""),k=(0,C.$y)(),T=(0,C.pn)(),I=(0,x.useRef)(void 0);if((0,x.useEffect)(function(){(null==T?void 0:T.id)!==void 0&&(I.current=null==T?void 0:T.id)},[null==T?void 0:T.id]),d&&!g)return"failureQueue"===l?null:(0,v.tZ)(ns,{});if(!(null==g?void 0:g.activityLogs))return null;var D=g.activityLogs,B=D.items,G=D.pageInfo;if(0===B.length)return null;if(f)return(0,v.tZ)(b.G,{css:nn.empty,children:(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:"Something went wrong"})});B.length&&(B[0].build.id===(null==k?void 0:k.id)&&B[1]?_.current=B[1].build.id:_.current=B[0].build.id);var A=function(e,t){var n=[],r=(null==t?void 0:t.timeCreated)?new Date(t.timeCreated):null,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(s.type!==L.dD.Fail||r&&r.getTime()>new Date(s.build.timeCreated).getTime()||(null==t?void 0:t.id)===s.build.id)break;n.push(s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n}(B,k);return"failureQueue"===l?(0,v.tZ)(q.un,{render:A.length>0,initialHeight:44,children:(0,v.tZ)(no,{items:A,onClick:o})}):(0,v.BX)(b.G,{css:nn.root,"data-history-timeline-items":B.length-A.length,children:[(0,v.tZ)(b.G,{css:nn.items,children:B.map(function(e,t){return e.build.id===(null==k?void 0:k.id)||t<A.length?null:(0,v.tZ)(nl,{item:e,onClick:function(){return o(e.build)}},e.id)})}),G.nextCursor?(0,v.tZ)(b.G,{css:nn.loadMore,children:(0,v.tZ)(eX.hU,{disabled:d,tooltipBehavior:"hidden",alt:"Show more",onClick:y,ref:Z,children:d?(0,v.tZ)(w.Z,{}):(0,v.tZ)(tO.Z,{})})}):null]})}function nl(e){var t=e.item,n=e.onClick,r=e.timeline,i=e.type,o=t.build.hasDeployLogs,a=new Date(t.timeCreated),l=Date.now(),c=!o,s=(0,v.BX)(b.G,{css:nn.item,children:[(0,v.tZ)(b.G,{css:nn.itemMainText,children:(0,v.tZ)(t2,{activityLogItem:t})}),(0,v.tZ)(b.G,{css:nn.itemLine}),(0,v.BX)(b.G,{css:nn.itemRight,children:[(0,v.tZ)(tF,{activityLogItem:t}),(0,v.tZ)(eo.xv,{multiline:!1,children:(0,td.Z)(a,l,{addSuffix:!0})}),(0,v.tZ)(eX.hU,{alt:o?"View deploy logs":"Deploy logs expire after 30 days",onClick:n,disabled:c,css:c&&nn.disabledLog,children:(0,v.tZ)(A.Z,{})})]})]});return void 0===r||r?(0,v.BX)(b.G,{css:"past"===(void 0===i?"past":i)?nn.itemPast:nn.itemFuture,children:[(0,v.tZ)(ta,{type:t.type===L.dD.Fail?"pastFail":"pastSuccess"}),s]}):s}var nc=(0,I.X)({loading:[Z.l0.rowWithGap(12),{":last-of-type":{"[data-timeline-line]":{display:"none"}}}],loadingItem:[ei.p.backgroundPulse(),Z.l0.height(20.4),Z.l0.mt(2),Z.l0.ml(4),Z.l0.flex.growAndShrink(1),Z.l0.borderRadius(6),{opacity:.5,marginBottom:14}]});function ns(){return(0,v.tZ)(b.G,{children:[,,,].fill(0).map(function(e,t){return(0,v.BX)(b.G,{css:nc.loading,children:[(0,v.tZ)(ta,{type:"pastNeutral"}),(0,v.tZ)(M.Tg,{elevated:!0,css:nc.loadingItem})]},t)})})}var nu=n(18060),nd=n(64432),nf=n(73789),nh=(0,I.X)({self:[Z.l0.colWithGap(8)],selfGrow:[Z.l0.colWithGap(8),Z.l0.flex.grow(1)],label:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.maxWidth("100%")],labelText:[Z.l0.flex.growAndShrink(1),{textOverflow:"ellipsis"}],labelTextWarning:[Z.l0.flex.growAndShrink(1),Z.l0.color.orangeStrongest,{textOverflow:"ellipsis"}],header:[Z.l0.display.flex,Z.l0.flex.row,Z.l0.justify.spaceBetween,Z.l0.align.center],actions:[Z.l0.rowWithGap(4)],labelLoading:[Z.l0.rowWithGap(8),Z.l0.align.center,ei.p.foregroundPulse(),Z.l0.width(200),Z.l0.borderRadius(8)],inputLoading:[ei.p.foregroundPulse(),Z.l0.borderRadius(8)]}),np=function(e){var t=e.id,n=e.title,r=e.information,i=e.optional,o=e.detail,a=e.warning,l=e.actions,c=e.children,s=e.grow;return(0,v.BX)(b.G,{css:void 0!==s&&s?nh.selfGrow:nh.self,children:[(0,v.BX)(b.G,{css:nh.header,children:[(0,v.BX)(b.G,{tag:"label",htmlFor:t,css:nh.label,children:[(0,v.tZ)(eo.xv,{color:"dimmer",multiline:!1,children:n}),(0,v.tZ)(nd.u,{tooltip:r,children:(0,v.tZ)(nf.Z,{color:Z.TV.foregroundDimmest})}),void 0!==i&&i?(0,v.tZ)(eo.xv,{css:nh.labelText,variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null,o?(0,v.tZ)(eo.xv,{css:nh.labelText,variant:"small",color:"dimmest",multiline:!1,children:o}):null,a?(0,v.tZ)(eo.xv,{css:nh.labelTextWarning,variant:"small",multiline:!1,children:a}):null]}),l?(0,v.tZ)(b.G,{css:nh.actions,children:l}):null]}),c]})},nm=function(){return(0,v.BX)(b.G,{css:nh.self,children:[(0,v.tZ)(b.G,{css:nh.header,children:(0,v.tZ)(b.G,{css:nh.labelLoading,children:(0,v.tZ)(eo.xv,{color:"dimmer",multiline:!1,children:"\xa0"})})}),(0,v.tZ)(b.G,{css:nh.inputLoading,children:(0,v.tZ)(nu.II,{disabled:!0})})]})},nv=function(e){return e.loading?(0,v.tZ)(b.G,{css:[Z.l0.p(8),Z.l0.center],children:(0,v.tZ)(w.Z,{})}):null},ng=(0,I.X)({error:[Z.l0.flex.grow(0),Z.l0.mt(0)]}),ny=function(e){var t=e.text;return(0,v.tZ)(K,{css:ng.error,children:(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:t})})},nb=(0,I.X)({back:[Z.l0.flex.row,Z.l0.align.center]}),nw=function(e){var t=e.onBack;return(0,v.tZ)(b.G,{css:nb.back,children:(0,v.tZ)(eX.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:t,children:(0,v.tZ)(t$.Z,{})})})},nZ=n(41201);function nx(){var e=(0,el._)(["\n  query ReservedVMMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: gce }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return nx=function(){return e},e}var nC={},n_=(0,ec.Ps)(nx(),nZ.bN),nS=n(11894),nk=n(1383),nE=n(18158),nT=n(63548),nR=(0,I.X)({header:[Z.l0.colWithGap(4),Z.l0.mb(16)],costWrapper:[Z.l0.rowWithGap(2),Z.l0.align.center,Z.l0.flex.shrink(1)],cost:[Z.l0.rowWithGap(4),Z.l0.align.baseline],selectWrapper:Z.l0.rowWithGap(12),selectInner:[Z.l0.flex.growAndShrink(1)],select:[Z.l0.border({color:tv.TV.outlineDefault}),{flex:"1 1 auto"}]}),nI=function(e){var t,n=e.initialMachineConfiguration,r=e.isTeamRepl,i=e.onChange,o=e.onConfirm,a=e.onError,l=e.onBack,c=(0,m._)((0,x.useState)(n?(0,z._)((0,V._)({},n),{maxInstances:1}):void 0),2),s=c[0],u=c[1],d=(0,m._)((0,nT.gr)(null==s?void 0:s.configurationSlug),2),f=d[0],h=d[1],p=(0,m._)((0,x.useState)(!1),2),g=p[0],y=p[1],w=(t=(0,V._)({},nC,{onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&a("Something went wrong")},onError:function(e){return a(e.message)}}),es.a(n_,t)),C=w.data,_=w.loading,S=(null==C?void 0:C.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?C.hostingMachineConfigurations.results:null;(0,x.useEffect)(function(){e5({context:F.k.AutoscaleMachineConfiguration})},[]),(0,x.useEffect)(function(){if(S&&!s){var e=r?S.find(function(e){return"e2-micro"===e.slug}):S.find(function(e){return"e2-small"===e.slug});if(!e){a("An error occurred trying to validate default machine configuration");return}var t={configurationId:e.id,configurationLabel:e.label,configurationSlug:e.slug,maxInstances:1};u(t),"function"==typeof i&&i(t)}},[S,s,r,i,a]);var k=S&&(null==S?void 0:S.length)>0,E=_||r||g||!k;return(0,v.BX)(v.HY,{children:[(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(nw,{onBack:l})}),(0,v.BX)(K,{maxWidth:!0,children:[(0,v.BX)(b.G,{css:nR.header,children:[(0,v.tZ)(eo.xv,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,v.tZ)(eo.xv,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,v.tZ)(np,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app. You can change it at any time.",children:s?(0,v.BX)(v.HY,{children:[(0,v.tZ)(b.G,{css:nR.selectWrapper,children:r?(0,v.tZ)(nu.II,{value:s.configurationLabel,disabled:!0}):(0,v.BX)(v.HY,{children:[(0,v.tZ)(b.G,{css:nR.selectInner,children:(0,v.tZ)(nS.P,{css:nR.select,initialSelectedItem:{id:s.configurationId,title:s.configurationLabel},items:k?Object.values(S).map(function(e){var t=e.id;return{title:e.label,id:t}}):[],onChange:function(e){var t=e.id,n=null==S?void 0:S.find(function(e){return e.id===t});if(!n){a("An error occurred trying to validate selected machine configuration");return}var r={configurationId:n.id,configurationLabel:n.label,configurationSlug:n.slug,maxInstances:1};u(r),"function"==typeof i&&i(r)},disabled:E})}),(0,v.tZ)(b.G,{css:nR.costWrapper,children:(0,v.BX)(b.G,{css:nR.cost,children:[(0,v.BX)(eo.xv,{variant:"subheadDefault",multiline:!1,children:["$",h]}),(0,v.tZ)(eo.xv,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,v.BX)(eo.xv,{color:"dimmer",variant:"small",multiline:!1,children:["($",f,"/hour)"]})]})})]})}),"function"==typeof o?(0,v.BX)(b.G,{css:[Z.l0.colWithGap(8),Z.l0.pt(8)],children:[(0,v.tZ)(O.zx,{colorway:"primary",text:"Approve and update",iconRight:(0,v.tZ)(nk.Z,{}),onClick:function(){if(!s){a("An error occurred trying to validate selected machine configuration");return}y(!0),o(s)},loading:_,disabled:E}),(0,v.BX)(eo.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,v.tZ)("a",{href:nE.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]}):(0,v.tZ)(b.G,{css:[ei.p.foregroundPulse(),Z.l0.borderRadius(8)],children:(0,v.tZ)(nu.II,{disabled:!0})})})]})]})},nD=n(96955),nB=n(84920);function nG(e,t){if(void 0!==t)switch(t){case L.DZ.HostingTierE2Micro:return e.hostingTierE2Micro;case L.DZ.HostingTierE2Small:return e.hostingTierE2Small;case L.DZ.HostingTierE2Medium:return e.hostingTierE2Medium;case L.DZ.HostingTierN1Custom_1_4:return e.hostingTierN1Custom1_4;case L.DZ.HostingTierE2Standard_2:return e.hostingTierE2Standard2;case L.DZ.HostingTierE2Standard_4:return e.hostingTierE2Standard4;default:(0,nD.Z)(t)}}function nA(e){var t=nB.r4[e],n=t.vCpu,r=t.ram,i=t.dedicated;return"".concat(i?"Dedicated ":"").concat(n," vCPU / ").concat(r," GiB RAM")}var nP=(c={},(0,$._)(c,L.r4.Gce,"Reserved VM"),(0,$._)(c,L.r4.CloudRun,"Autoscale"),(0,$._)(c,L.r4.Static,"Static"),(0,$._)(c,L.r4.Cron,"Scheduled"),c),nN=n(59786),nL=n(47336),nO=n.n(nL),nU=n(59249),nM=n(18123),nX=function(e){var t=e.currentBuild,n=(0,m._)((0,x.useState)([]),2),r=n[0],i=n[1];return(0,x.useEffect)(function(){var e=(null===(r=t.repl.hostingDeployment)||void 0===r?void 0:r.__typename)==="HostingDeployment"&&t.repl.hostingDeployment.id,n=[];switch(t.provider){case L.r4.Goval:n.push({href:"https://".concat(e,".id.repl.co"),private:!0});break;case L.r4.Gce:case L.r4.CloudRun:case L.r4.Static:var r,o,a,l,c,s,u=(null===(o=t.repl.hostingDeployment)||void 0===o?void 0:o.__typename)==="HostingDeployment"?null===(a=t.repl.hostingDeployment)||void 0===a?void 0:a.replitAppSubdomain:void 0;!u&&(null===(l=t.repl.owner)||void 0===l?void 0:l.username)&&(u="".concat(t.repl.slug,"-").concat(t.repl.owner.username)),u&&n.push({href:"https://".concat(u).concat((null===(s=window)||void 0===s?void 0:null===(c=s.location)||void 0===c?void 0:c.hostname)!=="replit.com"?".staging":"",".replit.app"),private:!1})}if(t.repl.domains){var d=t.repl.domains.filter(function(t){return(null==t?void 0:t.hosting_deployment_id)===e}),f=!0,h=!1,p=void 0;try{for(var m,v=d[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;g&&n.push({href:"https://".concat(g.domain),private:!1,state:"verified"!==g.state?g.state:void 0})}}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}i(n)},[t]),(0,v.tZ)(b.G,{css:[Z.l0.colWithGap(2),Z.l0.flex.growAndShrink(1)],children:r.map(function(e,t){return(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,v.tZ)(eo.xv,{css:[Z.l0.flex.shrink(1)],multiline:!1,children:(0,v.tZ)("a",{href:e.href,target:"_blank",css:[Z.l0.color.foregroundDefault],children:e.href})}),e.private?(0,v.tZ)(nM.Z,{color:Z.TV.foregroundDefault}):null,(0,v.tZ)("a",{href:e.href,target:"_blank",css:[Z.l0.display.flex,Z.l0.align.center],children:(0,v.tZ)(nU.Z,{color:Z.TV.foregroundDefault})}),e.state?(0,v.BX)(eo.xv,{multiline:!1,children:["(",e.state,")"]}):null]},"domains-".concat(t))})})},nF=n(65370),nW=(0,ee.F4)("\n    50% {\n      background-color: ".concat(Z.TV.accentPositiveDimmest,";\n      outline: 1px solid ").concat(Z.TV.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),nH=(0,I.X)({deploymentInfo:[Z.l0.colWithGap(8),Z.l0.p(16),Z.l0.borderRadius(),{outline:"1px solid transparent"}]}),nV=(0,I.X)({textButton:[Z.l0.cursor.pointer,Z.l0.reset.button,Z.l0.color.accentPrimaryStronger,Z.l0.focusRing,Z.l0.hover(Z.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],textLink:Z.l0.hover(Z.l0.color.accentPrimaryStrongest),labeledSection:[Z.l0.flex.growAndShrink(1),(0,$._)({},Z.nC.min(400),[Z.l0.flex.row,Z.l0.align.baseline])],labeledSectionFullWidth:[Z.l0.flex.growAndShrink(1),(0,$._)({},Z.nC.min(400),[Z.l0.flex.row,Z.l0.align.baseline,Z.l0.flex.grow(1),Z.l0.justify.spaceBetween])],buildStatus:[Z.l0.rowWithGap(4),Z.l0.align.center],deploymentInfo:nH.deploymentInfo,deploymentInfoAnimate:[nH.deploymentInfo,{animation:"".concat(nW," 700ms ease-out")}],deploymentInfoContent:[Z.l0.colWithGap(8),(0,$._)({},Z.nC.min(400),Z.l0.colWithGap(4))],typeColumn:[Z.l0.rowWithGap(6),Z.l0.flex.wrap,Z.l0.flex.shrink(0)]}),nz=function(e){var t=e.text,n=e.onClick;return(0,v.tZ)("button",{css:nV.textButton,onClick:n,children:t})},nj=function(e){var t=e.name,n=e.sku,r=e.canManage,i=e.usageLink,o=e.onManageClick;return(0,v.BX)(b.G,{css:nV.typeColumn,children:[(0,v.tZ)(eo.xv,{multiline:!1,children:t}),n?(0,v.BX)(eo.xv,{color:"dimmest",multiline:!1,children:["(",n,")"]}):null,r?(0,v.tZ)(nz,{text:"Manage",onClick:o}):null,i?(0,v.tZ)(nO(),{legacyBehavior:!0,href:"/usage",passHref:!0,children:(0,v.tZ)("a",{css:nV.textLink,children:(0,v.tZ)(eo.xv,{children:"See all usage"})})}):null]})},nq=function(e){var t=e.label,n=e.children,r=e.fullWidth;return(0,v.BX)(b.G,{css:r?nV.labeledSectionFullWidth:nV.labeledSection,children:[(0,v.tZ)(b.G,{css:Z.l0.minWidth(100),children:(0,v.tZ)(eo.xv,{css:Z.l0.color.foregroundDimmer,multiline:!1,children:t})}),n]})},nJ=function(e){var t=e.provider,n=e.machine,r=e.onViewBuildLogs,i=e.onManageClick,o=(0,C.kW)(),a=(0,C.Sl)((0,T.Z)()).hostingTier,l=(0,C.$y)(),c=(0,nN.P5)({controlName:nT.dD,logFlagToAnalytics:!1}),s=void 0!==l,u=t===L.r4.Gce&&s&&!c&&!a,d=t!==L.r4.Static&&s&&null===l.hasImageTag,f=!!((o===_.z.Ready||o===_.z.Suspended)&&!d),h=null,p=null,m=null,g=null,y=(0,C.pn)(),w=(0,x.useRef)(void 0);(0,x.useEffect)(function(){y&&(w.current=null==y?void 0:y.id)},[y,null==y?void 0:y.id]);var Z=(null==l?void 0:l.status)===L.Fe.Success,S=(null==l?void 0:l.id)===w.current,k=(null==l?void 0:l.provider)!==L.r4.Cron;switch(l&&(h=(0,v.BX)(v.HY,{children:[(0,v.tZ)(nq,{label:"Status",children:(0,v.tZ)(b.G,{css:nV.buildStatus,children:(0,v.tZ)(t3.hD,{onClick:function(){r(l)}})})}),k?(0,v.tZ)(nq,{label:"Domain",children:(0,v.tZ)(nX,{currentBuild:l})}):null]})),t){case L.r4.Gce:if(c){p=(0,v.tZ)(nq,{label:"Type",fullWidth:!s,children:(0,v.tZ)(nj,{name:nP[t],sku:null==n?void 0:n.configurationLabel,canManage:f,onManageClick:i})});break}if(!a)break;p=(0,v.tZ)(nq,{label:"Type",fullWidth:!s,children:(0,v.tZ)(nj,{name:nP[t],sku:(null==n?void 0:n.configurationLabel)||nA(a.sku),canManage:f,onManageClick:i})});break;case L.r4.CloudRun:p=(0,v.tZ)(nq,{label:"Type",fullWidth:!s,children:(0,v.tZ)(nj,{name:nP[t],sku:n?"".concat(n.configurationLabel," / ").concat(n.maxInstances," Max"):"Beta",canManage:f,usageLink:!0,onManageClick:i})});break;case L.r4.Static:p=(0,v.tZ)(nq,{label:"Type",fullWidth:!s,children:(0,v.tZ)(nj,{name:nP[t],sku:void 0,canManage:f&&s,onManageClick:i})});break;case L.r4.Cron:if(!(null==l?void 0:null===(E=l.machineJob)||void 0===E?void 0:E.timezone))break;var E,I,D,B=null==l?void 0:null===(I=l.machineJob)||void 0===I?void 0:I.timezone,G=nF.y.find(function(e){return e.utc.includes(B)}),A=(null==G?void 0:G.abbr)||B;p=(0,v.tZ)(nq,{label:"Type",fullWidth:!s,children:(0,v.tZ)(nj,{name:nP[t],sku:"".concat(A,", ").concat(null==l?void 0:null===(D=l.machineJob)||void 0===D?void 0:D.crontab),canManage:!1,onManageClick:i})});case L.r4.Goval:}return(d&&(m=(0,v.tZ)(b.G,{children:(0,v.tZ)(R.E,{icon:(0,v.tZ)(N.Z,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),u&&(g=(0,v.tZ)(O.zx,{onClick:function(){i()},text:"Select hosting tier"})),h||p||m||g)?(0,v.BX)(M.Tg,{elevated:!0,css:Z&&S?nV.deploymentInfoAnimate:nV.deploymentInfo,style:{paddingTop:l?12:16},children:[l?(0,v.tZ)(eo.xv,{variant:"subheadDefault",multiline:!1,children:"Production"}):null,(0,v.BX)(b.G,{css:nV.deploymentInfoContent,children:[h,p,m,g]})]}):null},nY=n(38753),nK=n(98250),n$=n(46717),nQ=(0,I.X)({styles0:[Z.l0.height(128),Z.l0.width(128),Z.l0.borderRadius(2),U.gU.nofill],styles1:[Z.l0.position.absolute]}),n0=(0,I.X)({container:[Z.l0.align.center,Z.l0.colWithGap(4)],qrContainer:[Z.l0.align.center,Z.l0.justify.center]});function n1(e){var t=e.color;return(0,v.BX)(b.G,{css:n0.container,children:[(0,v.BX)(b.G,{css:n0.qrContainer,children:[(0,v.tZ)("svg",{viewBox:"0 0 128 128",css:nQ.styles0,target:"_blank",onClick:function(){window.open("/mobile")},children:(0,v.tZ)("path",{fill:null!=t?t:Z.TV.foregroundDefault,d:"m0,13.58v13.58h27.15V0H0v13.58ZM34.91,1.94v1.94h-3.88v3.88h3.88v-3.88h7.76v3.88h3.88v-3.88h-3.88V0h-7.76v1.94Zm31.03,0v1.94h-15.52v7.76h-15.52v3.88h7.76v7.76h-3.88v-3.88h-7.76v11.64h-15.52v7.76h-3.88v3.88h-3.88v-3.88H0v3.88h7.76v3.88H0v7.76h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h15.52v3.88h-3.88v7.76h3.88v-3.88h3.88v-3.88h7.76v-3.88h-7.76v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-19.39h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-7.76h3.88v3.88h3.88v7.76h-3.88v3.88h11.64v-3.88h3.88v3.88h15.52v3.88h-3.88v3.88h3.88v11.64h11.64v3.88h-11.64v3.88h-3.88v3.88h15.52v7.76h-3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h3.88v15.52h3.88v15.52h7.76v3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-7.76v-3.88h-3.88v3.88h3.88v3.88h-11.64v-3.88h3.88v-7.76h7.76v-3.88h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-11.64h-11.64v3.88h3.88v3.88h-7.76v-3.88h-7.76v-3.88h-7.76v3.88h7.76v7.76h-7.76v-3.88h-15.52v7.76h3.88v-3.88h7.76v3.88h3.88v3.88h-3.88v3.88h-11.64v-3.88h-3.88v-7.76h-3.88v15.52h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v3.88h3.88v3.88h7.76v-3.88h-7.76v-3.88h15.52v-3.88h-3.88v-3.88h7.76v-7.76h11.64v7.76h-7.76v3.88h-3.88v7.76h-3.88v3.88h3.88v3.88h27.15v-7.76h3.88v7.76h7.76v-3.88h3.88v3.88h3.88v-3.88h-3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88v3.88h7.76v-3.88h-3.88v-3.88h-7.76v-7.76h-3.88v-7.76h7.76v7.76h7.76v-3.88h-3.88v-7.76h-7.76v-3.88h-7.76v3.88h-3.88v-11.64h3.88v3.88h7.76v-3.88h-7.76v-3.88h3.88v-7.76h3.88v-3.88h3.88v3.88h3.88v3.88h-3.88v15.52h3.88v-11.64h3.88v-7.76h-3.88v-7.76h3.88v-7.76h-3.88v-11.64h-3.88v11.64h3.88v3.88h-3.88v3.88h-7.76v-3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-7.76h-7.76v3.88h3.88v3.88h-11.64v-3.88h3.88v-11.64h-3.88v7.76h-3.88v-11.64h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-3.88h7.76V3.88h3.88v3.88h3.88V0h-7.76v3.88h-3.88V0h-3.88v3.88h-7.76V0h-7.76v1.94Zm34.91,11.64v13.58h27.15V0h-27.15v13.58Zm-31.03-5.82v3.88h-7.76v3.88h-3.88v7.76h3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v7.76h-3.88v-7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h-11.64v-3.88h11.64v-3.88h3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h-7.76v-3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h7.76v-3.88h3.88v3.88Zm-46.8,5.82v9.45H4.13V4.13h18.89v9.45Zm100.85,0v9.45h-18.89V4.13h18.89v9.45Zm-116.11,0v5.82h11.64V7.76H7.76v5.82Zm73.7-3.88v1.94h-3.88v7.76h-3.88v3.88h3.88v3.88h3.88v-7.76h3.88v7.76h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88V7.76h7.76v1.94Zm27.15,3.88v5.82h11.64V7.76h-11.64v5.82Zm-38.79,11.64v1.94h3.88v-3.88h-3.88v1.94Zm-27.15,3.88v1.94h3.88v-3.88h-3.88v1.94Zm46.55,7.76v1.94h-11.64v-3.88h11.64v1.94Zm-62.06,7.76v1.94h-3.88v3.88h11.64v3.88h-11.64v3.88h3.88v3.88h3.88v11.64h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h-3.88v-7.76h3.88v-11.64h3.88v3.88h3.88v-7.76h-7.76v-3.88h-3.88v-3.88h3.88v-3.88h15.52v1.94Zm81.45,1.94v3.88h3.88v7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h3.88v-11.64h-3.88v-3.88h-3.88v-3.88h-3.88v-3.88h15.52v3.88Zm-96.97,1.94v1.94h3.88v-3.88h-3.88v1.94Zm89.21,0v1.94h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm-81.45,3.88v1.94h3.88v-3.88h-3.88v1.94Zm77.58,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-77.58,9.7v3.88h-7.76v7.76h3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-7.76v3.88Zm19.39-1.94v1.94h3.88v-3.88h-3.88v1.94Zm0,11.64v1.94h-3.88v7.76h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h-3.88v-3.88h3.88v-3.88h-3.88v1.94Zm58.18,7.76v1.94h3.88v-3.88h3.88v11.64h-7.76v-3.88h-3.88v-7.76h3.88v1.94Zm15.52,0v1.94h-3.88v-3.88h3.88v1.94ZM0,95.03v1.94h7.76v-3.88H0v1.94Zm23.27,0v1.94h3.88v-3.88h-3.88v1.94Zm46.55,0v1.94h-3.88v-3.88h3.88v1.94Zm38.79,7.76v5.82h-11.64v-11.64h11.64v5.82ZM0,114.42v13.58h27.15v-27.15H0v13.58Zm65.94-11.64v1.94h-3.88v-3.88h3.88v1.94Zm34.91,0v1.94h3.88v-3.88h-3.88v1.94Zm-42.67,3.88v1.94h-3.88v3.88h-3.88v-3.88h3.88v-3.88h3.88v1.94Zm-35.16,7.76v9.45H4.13v-18.89h18.89v9.45Zm-15.26,0v5.82h11.64v-11.64H7.76v5.82Zm100.85,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-69.82,3.88v1.94h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm54.3,0v1.94h-3.88v-3.88h3.88v1.94Zm31.03,3.88v1.94h3.88v-3.88h-3.88v1.94Z"})}),(0,v.tZ)(n$.Z,{size:32,css:nQ.styles1,color:t})]}),(0,v.tZ)(eo.xv,{variant:"small",color:"dimmer",children:"Scan to install"})]})}var n2=n(45271),n3=n(64318),n4=n(24799),n8=n(25150),n6=(0,I.X)({row:[Z.l0.pb(12),Z.l0.rowWithGap(2),Z.l0.justify.center],buttonLeft:[Z.l0.borderRadius(8,0,0,8),Z.l0.flex.growAndShrink(1)],buttonRight:[Z.l0.borderRadius(0,8,8,0)]});function n5(e){var t=e.shouldShow,n=e.onDismissTour,r=(0,m._)((0,x.useState)(!1),2),i=r[0],o=r[1];return(0,v.BX)(v.HY,{children:[t?(0,v.BX)(b.G,{css:n6.row,children:[(0,v.tZ)(O.zx,{iconLeft:(0,v.tZ)(n4.Z,{}),onClick:function(){(0,e6.j)(n8.U3.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),o(!0)},text:"Deploy with the Replit App!",css:n6.buttonLeft}),(0,v.tZ)(O.zx,{css:n6.buttonRight,text:"",iconLeft:(0,v.tZ)(n3.Z,{}),onClick:n})]}):null,(0,v.tZ)(n2.u,{isOpen:i,onRequestClose:function(){o(!1),n()},children:(0,v.tZ)(n1,{})})]})}var n9=n(29252),n7=n(85287);function re(e){var t=e.secrets,n=e.otherSecrets,r=new Map,i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=(0,m._)(l.value,2),u=s[0],d=s[1];t.has(u)||r.set(u,d)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{missing:r}}var rt=(0,I.X)({root:[Z.l0.borderRadius(8),{border:"1px solid "+Z.TV.outlineDimmer}],button:[Z.l0.reset.button,U.gU.nofill,Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.height(32),Z.l0.px(8),{border:"0 none",borderBottomLeftRadius:0,borderBottomRightRadius:0}],buttonText:[Z.l0.flex.growAndShrink(1),Z.l0.rowWithGap(8),Z.l0.align.center],expanded:[Z.l0.px(8),Z.l0.pb(8)],missingItems:[Z.l0.colWithGap(8)],missingItem:[Z.l0.rowWithGap(8)],missingSecret:[Z.l0.rowWithGap(8),Z.l0.flex.growAndShrink(1)],subtitle:[{borderTop:"1px solid "+Z.TV.outlineDimmest,top:-1},Z.l0.py(8),Z.l0.position.relative]});function rn(e){var t=e.secrets,n=e.otherSecrets,r=e.otherEnvName,i=e.onAddSecret,o=e.initialExpanded,a=re({secrets:t,otherSecrets:n}).missing,l=(0,m._)((0,x.useState)(o),2),c=l[0],s=l[1],u=0===a.size;if((0,x.useEffect)(function(){u&&s(!1)},[u]),u)return null;var d="".concat(a.size," ").concat((0,t4.Z)("secret",a.size)," out of sync"),f=1===a.size?"A ".concat(r," secret is missing from this environment"):"".concat(a.size," ").concat(r," secrets are missing from this environment");return(0,v.BX)(b.G,{css:rt.root,children:[(0,v.BX)(b.G,{css:rt.button,tag:"button",onClick:function(){return s(function(e){return!e})},children:[(0,v.BX)(b.G,{css:rt.buttonText,children:[(0,v.tZ)(N.Z,{color:Z.TV.orangeDefault}),(0,v.tZ)(eo.xv,{multiline:!1,children:d})]}),c?(0,v.tZ)(tc.Z,{}):(0,v.tZ)(e3.Z,{})]}),c?(0,v.BX)(b.G,{css:rt.expanded,children:[(0,v.tZ)(eo.xv,{css:rt.subtitle,color:"dimmer",children:f}),(0,v.tZ)(b.G,{css:rt.missingItems,children:(0,k._)(a.entries()).map(function(e){var t=(0,m._)(e,2),n=t[0],r=t[1];return(0,v.BX)(b.G,{css:rt.missingItem,children:[(0,v.BX)(b.G,{css:rt.missingSecret,children:[(0,v.tZ)(n7.u_,{value:n}),(0,v.tZ)(n7.BH,{value:r})]}),r?(0,v.tZ)(O.zx,{iconLeft:(0,v.tZ)(n9.Z,{}),variant:"outlined",text:"Add secret",onClick:function(){return i({key:n,value:r})}}):null]},n)})})]}):null]})}var rr=n(32822);function ri(e){var t=e.fs,n=(0,m._)((0,x.useState)(null),2),r=n[0],i=n[1],o=(0,m._)((0,x.useState)(null),2),a=o[0],l=o[1];return(0,x.useEffect)(function(){return t.watchFile(".env",{onChange:function(e){var t=rr.Z.parse(e.toString());i(new Map(Object.entries(t).map(function(e){var t=(0,m._)(e,2);return[t[0],t[1]]})))},onMoveOrDelete:function(){return i(null)},onError:l})},[t]),{devSecrets:r,error:a}}var ro=n(33318),ra=n(13464),rl=n(40107),rc=n.n(rl),rs=n(46298),ru=n(54738),rd=n(80012),rf=n(70316),rh=n(93213),rp=n(15561),rm=Z.nC.min(600),rv=(0,I.X)({self:[Z.l0.colWithGap(8),Z.l0.mt(8)],accordion:[Z.l0.mb(0)],accordionItem:[Z.l0.rowWithGap(4),Z.l0.align.center],textButton:[Z.l0.cursor.pointer,Z.l0.reset.button,Z.l0.color.accentPrimaryStronger,Z.l0.focusRing,Z.l0.hover(Z.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],tableHeader:[Z.l0.color.foregroundDimmer,Z.l0.m(4),Z.l0.textAlign.left],tableWrapper:[Z.l0.mb(8),Z.l0.colWithGap(8),(0,$._)({},rm,Z.l0.rowWithGap(0))],table:[Z.l0.flex.column,Z.l0.width("100%"),(0,$._)({},rm,[Z.l0.width("50%"),Z.l0.colWithGap(6),{"&:first-child":{table:{borderRight:"1px solid "+Z.TV.outlineDimmer}}}])],ghostRow:[Z.l0.display.none,(0,$._)({},rm,Z.l0.display.flex)]}),rg=function(e){var t=e.text,n=e.onClick;return(0,v.tZ)("button",{css:rv.textButton,onClick:n,children:t})};function ry(e){var t=e.hasPortsConfigured,n=e.hasPort80Configured,r=e.hasConflictingPorts,i=e.hasLocalhostPort80,o=e.openNetworkingPane;return t?n?r?(0,v.tZ)(R.E,{text:(0,v.BX)(v.HY,{children:["Potential port conflict. Make sure no External Ports have conflicts in your configuration and that you only have one External Port configured on port :80. Open the"," ",(0,v.tZ)(rg,{text:"Networking pane to resolve.",onClick:o})]}),colorway:"warning"}):i?(0,v.tZ)(R.E,{text:(0,v.BX)(v.HY,{children:["Hosting your deployment on localhost can cause security or performance issues in some cases. Open the"," ",(0,v.tZ)(rg,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,v.tZ)(R.E,{text:(0,v.BX)(v.HY,{children:["Deployment forwarding to External Port :80. Open the"," ",(0,v.tZ)(rg,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,v.tZ)(R.E,{text:(0,v.BX)(v.HY,{children:["Potential port issue. Deployments require an External Port configured on port :80. Open the"," ",(0,v.tZ)(rg,{text:"Networking pane to configure.",onClick:o})]}),colorway:"warning"}):(0,v.tZ)(R.E,{text:(0,v.BX)(v.HY,{children:["No ports configured. Deployments will automatically forward the first Internal Port that opens. Open the"," ",(0,v.tZ)(rg,{text:"Networking pane to configure.",onClick:o})]})})}var rb=function(e){return 80===(0,rf.OD)(e.configuration)};function rw(e){var t=e.portState,n=(0,rf.VZ)(t.configuration),r=(0,rf.OD)(t.configuration),i=rb(t);return(0,v.BX)(v.HY,{children:[(0,v.BX)(rh.sg,{width:"50%",children:[(0,v.tZ)(eo.xv,{children:n?"localhost":"0.0.0.0"}),i&&n?(0,v.tZ)(rp.Z,{size:16,color:rd.Br.primary.default}):null]}),(0,v.BX)(rh.sg,{width:"50%",children:[(0,v.BX)(eo.xv,{children:[":",r]}),i?(0,v.tZ)(tp.Z,{size:16,color:rd.Br.positive.default}):(0,v.tZ)(n3.Z,{size:16,color:rd.Br.negative.default})]})]})}function rZ(e){var t=e.ports,n=e.openNetworkingPane,r=(0,rs.Z)(t.portsState),i=(null==r?void 0:r.filter(function(e){return(0,rf.OD)(e.configuration)}).sort(function(e,t){var n,r;return(null!==(n=(0,rf.OD)(e.configuration))&&void 0!==n?n:0)-(null!==(r=(0,rf.OD)(t.configuration))&&void 0!==r?r:0)}))||null,o=null==i?void 0:i.find(rb),a=!!o,l=!!(i&&i.length>0),c=!!i&&!!o&&!!(i.filter(rb).length>1||i.some(function(e){return(0,rf.OD)(e.configuration)===o.configuration.localPort})),s=!!(o&&(0,rf.VZ)(o.configuration)),u=l&&!a||c,d=(0,m._)((0,x.useState)(!1),2),f=d[0],h=d[1];return(0,v.tZ)(ru.Q,{headerContent:(0,v.BX)(b.G,{css:rv.accordionItem,children:[(0,v.tZ)(np,{id:"deploymentPortConfiguration",title:"Port configuration",information:"Configure which port your deployment should use for incoming requests."}),u?(0,v.tZ)(N.Z,{size:16,color:rd.Br.warning.strongest}):null]}),expanded:f,onClick:function(){return h(!f)},css:rv.accordion,children:(0,v.BX)(b.G,{css:rv.self,children:[(0,v.tZ)(ry,{hasPortsConfigured:l,hasPort80Configured:a,hasConflictingPorts:c,hasLocalhostPort80:s,openNetworkingPane:n}),(0,v.tZ)(b.G,{children:(0,v.BX)(b.G,{css:rv.tableWrapper,children:[(0,v.BX)(b.G,{css:rv.table,children:[(0,v.tZ)(eo.xv,{css:rv.tableHeader,children:"Deployment expects:"}),(0,v.BX)(rh.iA,{children:[(0,v.BX)(rh.X2,{children:[(0,v.tZ)(rh.sg,{header:!0,width:"50%",children:"Host"}),(0,v.tZ)(rh.sg,{header:!0,width:"50%",children:"External Port"})]}),(0,v.BX)(rh.X2,{children:[(0,v.tZ)(rh.sg,{width:"50%",children:(0,v.tZ)(eo.xv,{children:"0.0.0.0"})}),(0,v.BX)(rh.sg,{width:"50%",children:[(0,v.tZ)(eo.xv,{children:":80"}),(0,v.tZ)(tp.Z,{size:16,color:rd.Br.positive.default})]})]}),l&&i?rc()((null==i?void 0:i.length)-1).map(function(e){return(0,v.tZ)(rh.X2,{css:rv.ghostRow,children:(0,v.tZ)(rh.sg,{children:(0,v.tZ)(eo.xv,{children:"\xa0"})})},e)}):null]})]}),(0,v.BX)(b.G,{css:rv.table,children:[(0,v.tZ)(eo.xv,{css:rv.tableHeader,children:"Your External Port configuration(s):"}),(0,v.BX)(rh.iA,{children:[(0,v.BX)(rh.X2,{children:[(0,v.tZ)(rh.sg,{header:!0,width:"50%",children:"Host"}),(0,v.tZ)(rh.sg,{header:!0,width:"50%",children:"External Port"})]}),l?null==i?void 0:i.map(function(e){return(0,v.tZ)(rh.X2,{children:(0,v.tZ)(rw,{portState:e})},e.configuration.localPort)}):(0,v.BX)(rh.X2,{children:[(0,v.tZ)(rh.sg,{width:"50%",children:(0,v.tZ)(eo.xv,{children:"-"})}),(0,v.tZ)(rh.sg,{width:"50%",children:(0,v.tZ)(eo.xv,{children:"-"})})]})]})]})]})})]})})}var rx=n(85733),rC=n(69170),r_=n(41974),rS=n(9851),rk=n(57253),rE=n(19653),rT=n(54590),rR=n(56731);function rI(){var e=(0,el._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return rI=function(){return e},e}var rD={},rB=(0,ec.Ps)(rI()),rG=(0,I.X)({self:[Z.l0.colWithGap(4),Z.l0.flex.growAndShrink(1)],input:[Z.l0.color.greyStrongest],loading:[ei.p.backgroundPulse(Z.TV.backgroundHighest,Z.TV.backgroundHigher)],error:[Z.l0.color.accentNegativeStronger]}),rA=function(e){var t=e.id,n=e.value,r=e.loading,i=e.disabled,o=e.onChange,a=e.error,l=e.placeholder,c=e.type,s=void 0===c?"text":c,u=e.onFocus,d=(0,rS.Ar)(n),f=(0,x.useId)();return s||(s="text"),(0,v.BX)(b.G,{css:rG.self,children:[(0,v.tZ)(nu.II,{id:t,value:!r&&d?n:"",onChange:function(e){return o(e.target.value)},css:r?rG.loading:rG.input,disabled:r||i,"aria-describedby":f,placeholder:r?"":l,type:s,onFocus:u}),a?(0,v.tZ)(b.G,{css:rG.error,"aria-live":"polite","aria-atomic":"true",id:f,children:(0,v.tZ)("span",{children:a})}):null]})},rP=(0,I.X)({root:[Z.l0.rowWithGap(8),Z.l0.align.center],iconButton:[Z.l0.height("100%"),Z.l0.borderRadius(8),{"& button":Z.l0.height(32)}],keyInput:[Z.l0.width("40%")],valueInput:[Z.l0.flex.growAndShrink(1)]}),rN=function(e){var t=e.index,n=e.name,r=e.value,i=e.disabled,o=e.updateEnvVarName,a=e.updateEnvVarValue,l=e.removeEnvVar,c=e.otherKeys,s=(0,rR.U)(),u=(0,m._)((0,x.useState)(""===n||""===r),2),d=u[0],f=u[1],h=!!(n&&r),p=(0,rx.Z)(h),g=(0,rE.Z)(function(){g.current&&p.current&&f(!1)},[p]);return d?(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:rP.root,innerRef:g,children:[(0,v.tZ)(b.G,{css:rP.keyInput,children:(0,v.tZ)(nu.II,{placeholder:"Name",id:"".concat(s,"-name-").concat(t),value:n,onChange:function(e){return o(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&h&&f(!1)},disabled:i})}),(0,v.tZ)(b.G,{css:rP.valueInput,children:(0,v.tZ)(nu.II,{placeholder:"Value",name:"".concat(s,"-value-").concat(t),value:r,onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&h&&f(!1)},disabled:i})}),i?null:(0,v.tZ)(M.Tg,{elevated:!0,css:rP.iconButton,children:(0,v.tZ)(eX.hU,{alt:"Add",tooltipBehavior:"hidden",onClick:function(){h?f(!1):l()},children:h?(0,v.tZ)(tp.Z,{}):(0,v.tZ)(n3.Z,{})})})]}),c.includes(n)?(0,v.BX)(eo.xv,{variant:"small",css:{color:Z.TV.accentNegativeDefault},children:['Secret "',n,'" already exists']}):null]}):(0,v.BX)(b.G,{css:rP.root,children:[(0,v.tZ)(n7.u_,{value:n}),(0,v.tZ)(n7.BH,{value:r}),(0,v.tZ)(n7.$M,{onEdit:function(){return f(!0)},onDelete:function(){return l()}})]})},rL=function(e){var t,n,r,i,o,a=e.id,l=e.subdomain,c=e.deploymentId,s=e.onChange,u=e.updateValidity,d=(t={variables:{subdomain:l,deploymentId:c},skip:0===l.length},n=(0,V._)({},rD,t),es.a(rB,n)),f=d.data,h=d.loading,p=d.error,m=(null==f?void 0:f.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&f.replitAppSubdomainAvailability.available,g=(null==f?void 0:f.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?f.replitAppSubdomainAvailability.message:null==f?void 0:null===(r=f.replitAppSubdomainAvailability)||void 0===r?void 0:r.errorMessage;return((0,x.useEffect)(function(){u(m)},[m]),p)?(0,v.tZ)(R.E,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,v.BX)(b.G,{children:[(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,v.tZ)(nu.II,{id:a,placeholder:"subdomain",value:l,onChange:function(e){return s(e.target.value)}}),(0,v.BX)(eo.xv,{multiline:!1,children:[(null===(o=window)||void 0===o?void 0:null===(i=o.location)||void 0===i?void 0:i.hostname)!=="replit.com"?".staging":"",".replit.app"]})]}),(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.pt(4)],children:[h?(0,v.BX)(v.HY,{children:[(0,v.tZ)(w.Z,{}),(0,v.tZ)(eo.xv,{multiline:!1,children:"Checking availability"})]}):null,m?(0,v.BX)(v.HY,{children:[(0,v.tZ)(tp.Z,{color:"green"}),(0,v.tZ)(eo.xv,{css:[Z.l0.color.greenDefault],multiline:!1,children:"Available"})]}):null,m||h?null:(0,v.BX)(v.HY,{children:[(0,v.tZ)(N.Z,{color:"red"}),(0,v.tZ)(eo.xv,{css:[Z.l0.color.redDefault],multiline:!1,children:g})]})]})]})},rO=function(e){var t=e.appType,n=e.onChange,r=(0,rR.U)();return(0,v.tZ)(rT.hE,{name:"deploymentTargetSelector",value:t,onChange:n,row:!0,css:[Z.l0.width("100%"),Z.l0.flex.row],children:[{value:L.Vp.Server,name:"Web Server",description:"ex. an API or website"},{value:L.Vp.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,t){return(0,v.tZ)(b.G,{css:[Z.l0.flex.grow(1)],children:(0,v.tZ)(nd.u,{tooltip:e.description,children:(0,v.tZ)(rT.rK,{id:r(e.value),value:e.value,text:e.name})})},t)})})};function rU(){var e=(0,el._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n    currentBuild {\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n        timeoutSeconds\n      }\n    }\n  }\n"]);return rU=function(){return e},e}function rM(){var e=(0,el._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return rM=function(){return e},e}var rX={},rF=(0,ec.Ps)(rU()),rW=(0,ec.Ps)(rM(),rF),rH={NEEDS_PAYMENT_METHOD:"A payment method is required. Navigate to Account > Billing to resolve.",NEEDS_SUBSCRIPTION:"A subscription is required. Navigate to Account > Billing to resolve.",NEEDS_SUBSCRIPTION_OR_PAYMENT_METHOD:"Either a subscription or payment method is required. Navigate to Account > Billing to resolve.",NEEDS_SMS_VERIFICATION:"A verified phone number is required. Navigate to Account > Verification to resolve.",NEEDS_UNBANNING:"Your account currently has restrictions in place. Please reach out to our support team for assistance.",INCLUDED_IN_SUBSCRIPTION:"Plan found.",HAS_PAYMENT_METHOD:"Payment method found.",INSUFFICIENT_BUDGET:"You've reached your monthly usage budget. Navigate to Account > Billing to increase your budget."};function rV(e){var t=e.deployability,n=e.ubbCapabilities,r=t.isDeployable,i=t.explanation;if(!t.disableDeployments)return null;if(!r)return(0,v.tZ)(R.E,{text:i,colorway:"warning",icon:(0,v.tZ)(N.Z,{})});var o=function(e){switch(e){case L.Fp.HasPaymentMethod:return"HAS_PAYMENT_METHOD";case L.Fp.IncludedInSubscription:return"INCLUDED_IN_SUBSCRIPTION";case L.Fp.InsufficientBudget:return"INSUFFICIENT_BUDGET";case L.Fp.NeedsPaymentMethod:return"NEEDS_PAYMENT_METHOD";case L.Fp.NeedsSmsVerification:return"NEEDS_SMS_VERIFICATION";case L.Fp.NeedsSubscription:return"NEEDS_SUBSCRIPTION";case L.Fp.NeedsSubscriptionOrPaymentMethod:return"NEEDS_SUBSCRIPTION_OR_PAYMENT_METHOD";case L.Fp.NeedsUnbanning:return"NEEDS_UNBANNING";default:return}}(null==n?void 0:n.explanation);return o?(0,v.tZ)(R.E,{text:"You are not eligible for this feature. ".concat(rH[o]),colorway:"warning",icon:(0,v.tZ)(N.Z,{})}):null}var rz=n(53928),rj=n(36759),rq=(0,I.X)({self:{ul:{maxHeight:"300px"}},select:[Z.l0.border()],error:[Z.l0.color.accentNegativeStronger],button:[Z.l0.reset.button,Z.l0.viewStyle,U.gU.nofill,Z.l0.align.center,Z.l0.display.inlineFlex,{borderColor:U.gU.outlined.borderColor}],popover:[Z.l0.width("max-content"),Z.l0.overflow("auto"),Z.l0.p(1),Z.l0.minWidth(240)],listbox:[Z.l0.maxHeight(300),Z.l0.minWidth(300),Z.l0.overflow("auto")],dropdownItemAndContainer:[Z.l0.flex.row,Z.l0.align.center,U.gU.listItem,Z.l0.px(8),Z.l0.py(4)],selectedItemAndContainer:[Z.l0.px(8),Z.l0.py(4),Z.l0.justify.spaceBetween,Z.l0.align.center,Z.l0.rowWithGap(8)],selectedTimezoneCode:[Z.l0.align.center,Z.l0.textAlign.left,Z.l0.rowWithGap(8)],timezoneCode:[Z.l0.align.center,Z.l0.textAlign.left,Z.l0.rowWithGap(8)],selectedCheckIcon:[Z.l0.align.center,Z.l0.flex.row],header:[Z.l0.pt(8),Z.l0.px(8),Z.l0.pb(4),Z.l0.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)}],search:[Z.l0.p(8),{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)}],searchInput:[Z.l0.width("100%")],dropdownHeader:[Z.l0.fontWeight.medium],loading:[Z.l0.maxWidth(70),ei.p.backgroundPulse(Z.TV.backgroundHighest,Z.TV.backgroundHigher)]});function rJ(e,t){return e.abbr<t.abbr?-1:e.abbr>t.abbr?1:0}function rY(e){var t=e.initialTimezone,n=e.onChange,r=e.loading,i=e.error,o=(0,m._)((0,x.useState)(),2),a=o[0],l=o[1],c=(0,x.useId)();return(0,x.useEffect)(function(){if(!r){if(t&&!a){l(t);return}if(!a&&!t){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if((0,nT.lb)(e)){n(e),l(e);return}var i="America/Los_Angeles";i&&(n(i),l(i))}}},[n,a,t,r]),(0,v.BX)(b.G,{css:rq.self,children:[r||!a?(0,v.tZ)(nu.II,{css:rq.loading,disabled:!0}):(0,v.tZ)(r1,{selectedTzCode:a,timezones:nF.y.sort(rJ),onSelectionChange:function(e){"string"==typeof e&&(n(e),l(e))},css:rq.select}),i?(0,v.tZ)(b.G,{css:rq.error,"aria-live":"polite","aria-atomic":"true",id:c,children:(0,v.tZ)("span",{children:i})}):null]})}var rK=(0,I.X)({self:[rq.dropdownItemAndContainer,Z.l0.justify.spaceBetween,{backgroundColor:U.vb.interactiveBackground}]});function r$(e){var t=e.title;return(0,v.BX)(b.G,{css:rq.selectedItemAndContainer,children:[(0,v.tZ)(b.G,{css:rq.selectedTimezoneCode,children:(0,v.tZ)(eo.xv,{variant:"text",color:"dimmer",children:t})}),(0,v.tZ)(e3.Z,{})]})}function rQ(e){var t=e.tzCode,n=e.selected;return(0,v.BX)(b.G,{css:n?rK.self:rq.dropdownItemAndContainer,children:[(0,v.tZ)(b.G,{css:rq.timezoneCode,children:(0,v.tZ)(eo.xv,{variant:"text",color:n?"default":"dimmer",children:t.replace(/_/g," ").replace(/\//g,", ")})}),(0,v.tZ)(b.G,{css:rq.selectedCheckIcon,children:n?(0,v.tZ)(tp.Z,{size:16}):null})]})}var r0=(0,I.X)({self:[rq.button,Z.l0.align.center,Z.l0.px(8),Z.l0.py(4),(0,$._)({},Z.BC.min("mobileMax"),[Z.l0.rowWithGap(4)])]});function r1(e){var t=e.selectedTzCode,n=e.timezones,r=e.onSelectionChange,i=(0,m._)((0,x.useState)(""),2),o=i[0],a=i[1],l=n.find(function(e){return e.utc.includes(t)});return(0,v.BX)(rj.Ph,{onSelectionChange:r,"aria-label":"Timezone Select",children:[l?(0,v.tZ)(rj.zx,{css:rq.button,children:(0,v.tZ)(r$,{title:l.abbr})}):(0,v.tZ)(nd.u,{tooltip:"Could not detect valid timezone. Please try again, or contact support.",children:(0,v.BX)(rj.zx,{css:r0.self,children:[(0,v.tZ)(eo.xv,{color:"dimmer",children:"Select"}),(0,v.tZ)(nf.Z,{})]})}),(0,v.BX)(rz.Bf,{noArrow:!0,css:rq.popover,background:"default",placement:"bottom right",children:[(0,v.tZ)(b.G,{css:rq.search,children:(0,v.tZ)(nu.II,{css:rq.searchInput,value:o,onChange:function(e){return a(e.target.value)},placeholder:"Search"})}),(0,v.tZ)(rj.wb,{css:rq.listbox,children:n.filter(function(e){return e.abbr.toLowerCase().includes(o.toLowerCase())||e.text.toLowerCase().includes(o.toLowerCase())}).map(function(e){var n=e.value,r=e.abbr,i=e.utc;return(0,v.BX)(rj.$0,{children:[(0,v.tZ)(rj.h4,{css:rq.header,children:(0,v.BX)(eo.xv,{variant:"small",color:"dimmest",css:rq.dropdownHeader,children:[n," (",r,")"]})}),i.map(function(e){return(0,v.tZ)(rj.m9,{id:e,children:(0,v.tZ)(rQ,{tzCode:e,selected:e===t})},e)})]},n)})})]})]})}var r2=n(57159),r3=n(95369),r4=n(43182),r8=n(82419),r6={scheduleToCronExpression:{inputTarget:r2.i3.ENGLISH,outputTarget:r2.i3.CRON},cronExpressionToSchedule:{inputTarget:r2.i3.CRON,outputTarget:r2.i3.ENGLISH}},r5=function(e){var t,n=e.type,r=e.onTranslation,i=e.onError,o=(0,x.useRef)(null),a=(0,m._)((0,x.useState)(!1),2),l=a[0],c=a[1],s=function(e,t){var n,r;n=Error(e),r4.$e(function(e){e.setTag("deployments-pane",!0),e.setTag("context","useScheduledMachineConfigurationTranslator"),r&&e.setExtras(r),r4.Tb(n)}),i(t||e)},u=(0,r3.Vs)({onTranslation:function(e,t,i){if(!l&&(o.current&&clearTimeout(o.current),t)){if(!e){r("Unable to derive valid translation from description");return}var a,c=(a=e.match(/`([^`]+)`(?=[^`]*$)/))?a[1]:null;if(!c||"scheduleToCronExpression"===n&&!(0,r8.isValidCron)(c)){r("Unable to derive valid Cron expression from description");return}r(c),(0,e6.j)(e6.U3.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:n,translation:e,prompt:i})}},onError:function(e){return s(e,"Error translating description")}}),d=u.sendMessage,f=u.loading,h=(t=(0,S._)(function(e){var t;return(0,E.Jh)(this,function(i){return(o.current&&clearTimeout(o.current),e)?"cronExpressionToSchedule"!==n||(0,r8.isValidCron)(e)?(t=r6[n],d((0,z._)((0,V._)({},t),{content:e})),o.current=setTimeout(function(){c(!0),s("Translation timed out")},8e3)):r("Invalid cron expression"):r(""),[2]})}),function(e){return t.apply(this,arguments)});return(0,x.useEffect)(function(){return function(){o.current&&clearTimeout(o.current)}},[o]),{translate:h,loading:f}};function r9(){return(0,v.BX)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,v.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.97978 15.6465C2.78451 15.8417 2.78451 16.1583 2.97978 16.3536L7.64644 21.0202C7.8417 21.2155 8.15829 21.2155 8.35355 21.0202C8.54881 20.825 8.54881 20.5084 8.35355 20.3131L4.54044 16.5L9.66666 16.5C9.9428 16.5 10.1667 16.2762 10.1667 16C10.1667 15.7239 9.9428 15.5 9.66666 15.5L4.54044 15.5L8.35355 11.6869C8.54881 11.4916 8.54881 11.1751 8.35355 10.9798C8.15829 10.7845 7.8417 10.7845 7.64644 10.9798L2.97978 15.6465Z",fill:Z.TV.blurpleStronger}),(0,v.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3889 12.2661C16.259 11.9113 15.741 11.9113 15.6111 12.2661L14.7182 14.7055C14.675 14.8237 14.577 14.9153 14.4536 14.9531L12.2883 15.6156C11.9044 15.7331 11.9037 16.2592 12.2873 16.3776L14.4544 17.0466C14.5773 17.0846 14.6749 17.1761 14.718 17.2939L15.6111 19.7339C15.741 20.0887 16.259 20.0887 16.3889 19.7339L17.2819 17.2942C17.3251 17.1762 17.4228 17.0846 17.546 17.0468L19.7122 16.381C20.0959 16.263 20.0959 15.737 19.7122 15.619L17.546 14.9532C17.4228 14.9154 17.3251 14.8238 17.2819 14.7058L16.3889 12.2661Z",fill:Z.TV.blurpleStronger}),(0,v.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M29.0202 15.6465C29.2155 15.8417 29.2155 16.1583 29.0202 16.3536L24.3536 21.0202C24.1583 21.2155 23.8417 21.2155 23.6465 21.0202C23.4512 20.825 23.4512 20.5084 23.6465 20.3131L27.4596 16.5L22.3333 16.5C22.0572 16.5 21.8333 16.2762 21.8333 16C21.8333 15.7239 22.0572 15.5 22.3333 15.5L27.4596 15.5L23.6465 11.6869C23.4512 11.4916 23.4512 11.1751 23.6465 10.9798C23.8417 10.7845 24.1583 10.7845 24.3536 10.9798L29.0202 15.6465Z",fill:Z.TV.blurpleStronger})]})}var r7=Z.nC.min(480),ie=(0,I.X)({cronConfig:[Z.l0.colWithGap(8),Z.l0.pb(16),Z.l0.flex.growAndShrink(1),(0,$._)({},r7,[Z.l0.colWithGap(0),Z.l0.rowWithGap(8),Z.l0.align.end])],scheduledLabeledInput:[Z.l0.flex.growAndShrink(1)],crontabLabeledInput:[Z.l0.flex.growAndShrink(1),Z.l0.maxWidth(128)],translationSwitch:[Z.l0.flex.shrink(1),Z.l0.mb(4),(0,$._)({transform:"rotate(90deg)",alignSelf:"flex-start"},r7,{transform:"rotate(0deg)",alignSelf:"inherit",marginBottom:0})],translationSwitchIcon:[Z.l0.height(32),Z.l0.width(32),Z.l0.center],timezoneSelect:[Z.l0.flex.shrink(1),{minWidth:75}],spacer:[Z.l0.height(30)],timeoutConfig:[Z.l0.flex.row,Z.l0.flex.growAndShrink(1),Z.l0.width("100%"),Z.l0.align.start],selectedItemAndContainer:[Z.l0.px(8),Z.l0.py(4),Z.l0.justify.spaceBetween,Z.l0.align.center,Z.l0.rowWithGap(8)],selectedTimeoutUnits:[Z.l0.align.center,Z.l0.textAlign.left,Z.l0.rowWithGap(8)],button:[Z.l0.reset.button,Z.l0.viewStyle,U.gU.nofill,Z.l0.align.center,Z.l0.display.inlineFlex,{borderColor:U.gU.outlined.borderColor},Z.l0.minWidth(100)],timeoutUnitsDropdown:[Z.l0.ml(4)],dropdownItemAndContainer:[Z.l0.flex.row,Z.l0.align.center,U.gU.listItem,Z.l0.px(8),Z.l0.py(4)],dropdownItem:[Z.l0.align.center,Z.l0.textAlign.left,Z.l0.rowWithGap(8)],selectedCheckIcon:[Z.l0.align.center,Z.l0.flex.row],popover:[Z.l0.width("max-content"),Z.l0.overflow("auto"),Z.l0.p(1),Z.l0.minWidth(120)],timeoutLabeledSection:[Z.l0.flex.row]}),it=(0,I.X)({self:[ie.dropdownItemAndContainer,Z.l0.justify.spaceBetween,{backgroundColor:U.vb.interactiveBackground}]}),ir=["minutes","hours"];function ii(e,t){var n=parseInt(e,10);return isNaN(n)?0:"Hours"===t?3600*n:60*n}function io(e){return/^\d+$/.test(e.trim())&&!isNaN(parseInt(e,10))}function ia(e,t){return io(e)&&ii(e,t)>39600}function il(e){var t=e.title;return(0,v.BX)(b.G,{css:ie.selectedItemAndContainer,children:[(0,v.tZ)(b.G,{css:ie.selectedTimeoutUnits,children:(0,v.tZ)(eo.xv,{variant:"text",color:"dimmer",children:t})}),(0,v.tZ)(e3.Z,{})]})}function ic(e){var t=e.item,n=e.selected;return(0,v.BX)(b.G,{css:n?it.self:ie.dropdownItemAndContainer,children:[(0,v.tZ)(b.G,{css:ie.dropdownItem,children:(0,v.tZ)(eo.xv,{variant:"text",color:n?"default":"dimmer",children:t})}),(0,v.tZ)(b.G,{css:ie.selectedCheckIcon,children:n?(0,v.tZ)(tp.Z,{size:16}):null})]})}function is(e){var t=e.callback,n=e.delay,r=(0,x.useRef)();return(0,x.useEffect)(function(){return function(){r.current&&clearTimeout(r.current)}},[]),{callerFunction:function(e){r.current&&clearTimeout(r.current),r.current=setTimeout(function(){return t(e)},n)}}}function iu(e){var t=e.crontab,n=e.setCrontab,r=e.crontabError,i=e.timezone,o=e.setTimezone,a=e.timezoneError,l=e.loading,c=void 0!==l&&l,s=e.timeoutValue,u=e.setTimeoutValue,d=e.timeoutUnits,f=e.setTimeoutUnits,h=e.setTimeoutValueError,p=(0,m._)((0,x.useState)(!1),2),g=p[0],y=p[1],C=(0,m._)((0,x.useState)(null),2),_=C[0],S=C[1],k=(0,m._)((0,x.useState)(null),2),E=k[0],T=k[1],R=(0,m._)((0,x.useState)("scheduleToCronExpression"),2),I=R[0],D=R[1],B="scheduleToCronExpression"===I,G="cronExpressionToSchedule"===I,A=r5({type:I,onTranslation:function(e){y(!1),B?n(e):G&&T(e)},onError:function(e){y(!1),S(e)}}),P=A.translate,N=A.loading,L=is({callback:function(e){return P(e)},delay:3e3}).callerFunction,O=is({callback:y,delay:500}).callerFunction,U=function(e,t){switch(t){case"scheduleToCronExpression":T(e);break;case"cronExpressionToSchedule":n(e)}M&&y(!1),""!==e&&null!==e&&(O(!0),L(e))},M=N||g;if((0,x.useEffect)(function(){h(!io(s)||ia(s,d))},[s,d,h]),_)return(0,v.BX)(b.G,{children:[(0,v.tZ)(b.G,{css:ie.crontabLabeledInput,children:(0,v.tZ)(np,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",warning:"".concat(_,". Enter valid Cron expression."),grow:!0,children:(0,v.tZ)(rA,{id:"cronExpression",value:t,placeholder:"* * * * *",loading:c,disabled:!1,onChange:n,error:r})})}),(0,v.BX)(b.G,{css:ie.timezoneSelect,children:[(0,v.tZ)(id,{}),(0,v.tZ)(rY,{initialTimezone:i,onChange:o,error:a,loading:c})]})]});var X="";return io(s)?ia(s,d)&&(X="Please enter a value less than the maximum of 11 hours"):X="Please enter a positive whole number",(0,v.BX)(b.G,{children:[(0,v.BX)(b.G,{css:ie.cronConfig,children:[(0,v.tZ)(b.G,{css:ie.scheduledLabeledInput,children:(0,v.tZ)(np,{id:"schedule",title:"Schedule description",information:"Describe when you want your scheduled deployment to run",grow:!0,children:(0,v.tZ)(rA,{id:"describeSchedule",value:E,placeholder:t?"":"Every day at 3:00 AM",loading:c,disabled:M&&!B,onChange:function(e){return U(e,"scheduleToCronExpression")},onFocus:function(){return D("scheduleToCronExpression")}})})}),(0,v.tZ)(b.G,{css:ie.translationSwitch,children:(0,v.tZ)(nd.u,{tooltip:"When you type, Replit AI will translate between these properties",children:(0,v.tZ)(b.G,{css:ie.translationSwitchIcon,children:M?(0,v.tZ)(w.Z,{color:Z.TV.blurpleStronger}):(0,v.tZ)(r9,{})})})}),(0,v.tZ)(b.G,{css:ie.crontabLabeledInput,children:(0,v.tZ)(np,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",grow:!0,children:(0,v.tZ)(rA,{id:"cronExpression",value:t,placeholder:"* * * * *",loading:c,disabled:M&&!G,onChange:function(e){return U(e,"cronExpressionToSchedule")},onFocus:function(){return D("cronExpressionToSchedule")},error:r})})}),(0,v.tZ)(b.G,{css:ie.timezoneSelect,children:(0,v.tZ)(rY,{initialTimezone:i,onChange:o,error:a,loading:c})})]}),(0,v.tZ)(b.G,{css:ie.timeoutConfig,children:(0,v.tZ)(np,{id:"timeout",title:"Job timeout",information:"The maximum amount of time each execution of your scheduled job will run before being stopped",grow:!0,children:(0,v.BX)(b.G,{css:ie.timeoutLabeledSection,children:[(0,v.tZ)(rA,{id:"timeoutValue",value:s,placeholder:"",loading:c,disabled:!1,onChange:function(e){return u(null!=e?e:"")},error:X,type:"number"}),(0,v.BX)(rj.Ph,{css:ie.timeoutUnitsDropdown,defaultSelectedKey:ir[0],selectedKey:d,onSelectionChange:function(e){return f(e.toString())},children:[(0,v.tZ)(rj.zx,{css:ie.button,children:(0,v.tZ)(il,{title:d})}),(0,v.tZ)(rz.Bf,{css:ie.popover,background:"default",placement:"bottom right",children:(0,v.tZ)(rj.wb,{children:ir.map(function(e){return(0,v.tZ)(rj.m9,{id:e,children:(0,v.tZ)(ic,{item:e,selected:e===d})},e)})})})]})]})})})]})}function id(){return(0,v.tZ)(b.G,{css:ie.spacer})}function ih(){return(ih=(0,S._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g;return(0,E.Jh)(this,function(y){switch(y.label){case 0:t=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],n=!0,r=!1,i=void 0,y.label=1;case 1:y.trys.push([1,6,7,8]),o=t[Symbol.iterator](),y.label=2;case 2:if(n=(a=o.next()).done)return[3,5];return l=a.value,[4,e.stat(l)];case 3:if(!((c=y.sent()).exists&&c.type===rk.Tv.File))return[3,4];return[2,"dist"];case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return s=y.sent(),r=!0,i=s,[3,8];case 7:try{n||null==o.return||o.return()}finally{if(r)throw i}return[7];case 8:u=["dist","build","public"],d=!0,f=!1,h=void 0,y.label=9;case 9:y.trys.push([9,14,15,16]),p=u[Symbol.iterator](),y.label=10;case 10:if(d=(m=p.next()).done)return[3,13];return v=m.value,[4,e.stat(v)];case 11:if(!((g=y.sent()).exists&&g.type===rk.Tv.Directory))return[3,12];return[2,v];case 12:return d=!0,[3,10];case 13:return[3,16];case 14:return s=y.sent(),f=!0,h=s,[3,16];case 15:try{d||null==p.return||p.return()}finally{if(f)throw h}return[7];case 16:return[2]}})})).apply(this,arguments)}var ip=(0,I.X)({self:Z.l0.colWithGap(16),footer:Z.l0.colWithGap(0),ctaGroup:[Z.l0.rowWithGap(8),Z.l0.pt(12)],deployButton:Z.l0.flex.grow(1),secretsModal:[Z.l0.colWithGap(8)],secretsModalButtons:[Z.l0.rowWithGap(8),Z.l0.justify.end,Z.l0.pt(8)]}),im=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,g,y,k,T=e.deploymentId,R=e.initialSubdomain,I=e.provider,D=e.machine,B=e.fs,A=e.ports,P=e.dotReplit,N=e.onDeploy,U=e.onCancel,M=e.onError,X=e.initialSecretsSyncExpanded,F=e.openNetworkingPane,W=(0,C.kW)(),H=(0,C.XA)().deployBuild,z=(t=(0,V._)({},rX,{skip:!T,variables:{id:null!=T?T:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var t=(null===(n=e.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"?e.hostingDeployment:null;if(t){if(t.replitAppSubdomain&&(er(t.replitAppSubdomain),el(!0)),t.currentBuild.machineJob&&(ew(t.currentBuild.machineJob.timezone),ek(t.currentBuild.machineJob.crontab),t.currentBuild.machineJob.timeoutSeconds)){var n,r,i,o=t.currentBuild.machineJob.timeoutSeconds;o%3600==0?(r=o/3600,i="Hours"):(r=Math.floor(o/60),i="Minutes"),eV(r.toString()),eq(i)}eB(t.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}}))}}}),es.a(rW,t)),j=z.data,q=z.loading,J=(r=(n={provider:I,fs:B,dotReplit:P,isNewDeployment:!T,onError:M,onOptions:function(e){e.appType&&ee(e.appType),e.envVars&&eB(e.envVars),e.ignorePorts&&eP(e.ignorePorts),e.buildCommand&&ed(e.buildCommand),e.runCommand&&ep(e.runCommand),e.publicDir&&eO(e.publicDir)}}).isNewDeployment,i=n.provider,o=n.fs,a=n.onOptions,l=n.onError,c=n.dotReplit,u=(s=(0,m._)((0,x.useState)(!0),2))[0],d=s[1],f=(0,rx.Z)(l),h=(0,rx.Z)(a),(0,x.useEffect)(function(){var e=!1;function t(){return(t=(0,S._)(function(){var t,n,a,l,s,u,f,p,v;return(0,E.Jh)(this,function(g){switch(g.label){case 0:return t=L.Vp.Server,n=null,a=null,l=null,s=null,[4,Promise.all([r?(0,ro.xk)(o):Promise.resolve(null),(0,ro.$f)(c)])];case 1:if(f=(u=m._.apply(void 0,[g.sent(),2]))[0],p=u[1],e)return[2];if(r)switch(i){case L.r4.Gce:t=p.ignorePorts?L.Vp.Worker:L.Vp.Server;break;case L.r4.CloudRun:t=L.Vp.CloudRun;break;case L.r4.Static:t=L.Vp.Static;break;case L.r4.Cron:t=L.Vp.Cron}else p.appType&&(t=p.appType);if(a=p.buildCommand,!(t!==L.Vp.Static))return[3,2];return n=p.runCommand,[3,5];case 2:if(!p.publicDir)return[3,3];return l=p.publicDir,[3,5];case 3:return[4,function(e){return ih.apply(this,arguments)}(o)];case 4:(v=g.sent())&&(l=v),g.label=5;case 5:return i===L.r4.Gce&&(s=p.ignorePorts),h.current({appType:t,envVars:f,buildCommand:a,runCommand:n,publicDir:l,ignorePorts:s}),d(!1),[2]}})})).apply(this,arguments)}try{!function(){t.apply(this,arguments)}()}catch(e){f.current(e.message),d(!1)}return function(){e=!0}},[i,o,c,f,h,r]),{loading:u}).loading,Y=(null==j?void 0:null===(y=j.hostingDeployment)||void 0===y?void 0:y.__typename)==="HostingDeployment"?j.hostingDeployment:null,K=null==Y?void 0:Y.currentBuild,$=(0,m._)((0,x.useState)(L.Vp.Server),2),Q=$[0],ee=$[1],et=(0,m._)((0,x.useState)(R),2),en=et[0],er=et[1],ei=(0,m._)((0,x.useState)(!1),2),ea=ei[0],el=ei[1],ec=(0,m._)((0,x.useState)(null),2),eu=ec[0],ed=ec[1],ef=(0,m._)((0,x.useState)(null),2),eh=ef[0],ep=ef[1],em=(0,m._)((0,x.useState)(void 0),2),ev=em[0],eg=em[1],ey=(0,m._)((0,x.useState)(null),2),eb=ey[0],ew=ey[1],eZ=(0,m._)((0,x.useState)(void 0),2),ex=eZ[0],eC=eZ[1],e_=(0,m._)((0,x.useState)(null),2),eS=e_[0],ek=e_[1],eE=(0,m._)((0,x.useState)(void 0),2),eT=eE[0],eR=eE[1],eI=(0,m._)((0,x.useState)(null!==(k=null==K?void 0:K.envVars.map(function(e){return{name:e.name,value:e.value}}))&&void 0!==k?k:[]),2),eD=eI[0],eB=eI[1],eG=(0,m._)((0,x.useState)(!1),2),eA=eG[0],eP=eG[1],eN=(0,m._)((0,x.useState)(null),2),eL=eN[0],eO=eN[1],eU=(0,m._)((0,x.useState)(void 0),2),eM=eU[0],eF=eU[1],eW=(0,m._)((0,x.useState)("10"),2),eH=eW[0],eV=eW[1],ez=(0,m._)((0,x.useState)(ir[0]),2),ej=ez[0],eq=ez[1],eJ=(0,m._)((0,x.useState)(!1),2),eY=eJ[0],eK=eJ[1],e$=ri({fs:B}).devSecrets;(0,x.useEffect)(function(){e5({context:"deploy_options"})},[]);var eQ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;eB(function(e){return(0,r_.Uy)(e,function(e){e.push({name:null!=t?t:"",value:null!=n?n:""})})})},e0=function(e,t){eB(function(n){return(0,r_.Uy)(n,function(n){n[e].name=t})})},e1=function(e,t){eB(function(n){return(0,r_.Uy)(n,function(n){n[e].value=t})})},e2=function(e){eB(function(t){return(0,r_.Uy)(t,function(t){t.splice(e,1)})})},e3=Q!==L.Vp.Static,e4=I===L.r4.Gce,e8=Q===L.Vp.Static,e6=I!==L.r4.Cron&&!(null==Y?void 0:Y.replitAppSubdomain),e9=I===L.r4.Cron,e7=Q===L.Vp.Server||Q===L.Vp.CloudRun,te=(p=(0,S._)(function(){var e,t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:if(!(e=(!e6||ea)&&en.length?en:void 0))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,H({envVars:eD.filter(function(e){return(0,rS.GV)(e)}),subdomain:e,machineConfigurationId:(null==D?void 0:D.configurationId)||void 0,maxMachineInstances:(null==D?void 0:D.maxInstances)||void 0,machineJob:eb&&eS?{timezone:eb,crontab:eS,timeoutSeconds:ii(eH,ej)}:void 0,config:{buildCommand:eu,runCommand:eh,appType:Q,ignorePorts:eA,publicDir:eL}})];case 2:return n.sent(),N(),[3,4];case 3:if((t=n.sent())instanceof ra.ZG)return eg("Run command cannot be empty."),[2];if(t instanceof ra.SF)return eF("Public directory cannot be empty."),[2];if(t instanceof ra.Iy)return eC(t.message||"Invalid timezone."),[2];if(t instanceof ra.Bz)return eR(t.message||"Invalid crontab."),[2];return M(t.message),[3,4];case 4:return[2]}})}),function(){return p.apply(this,arguments)}),tt=(0,m._)((0,x.useState)(!1),2),tn=tt[0],tr=tt[1],ti=(0,m._)((0,x.useState)(!1),2),to=ti[0],ta=ti[1],tl=(0,C.BU)(),tc=tl.getDeployabilityByProvider,ts=tl.usageBasedBillingCapabilities,tu=tc(I),td=q||J||tu.disableDeployments||W===_.z.Preparing||eY,tf=td||e6&&!ea,th=eD.map(function(e){return e.name}),tp=(0,rC.Z)(),tm=(g=(0,S._)(function(){var e,t,n,r,i,o;return(0,E.Jh)(this,function(a){switch(a.label){case 0:return tr(!0),e=eD.reduce(function(e,t){return e[t.name]=t.value,e},{}),[4,B.readFile(".env")];case 1:if(t=a.sent(),n="",t.error&&t.error!==rk.Df.NotFound)return tp.showError("Failed to overwrite secrets"),tr(!1),[2];return t.error||(n=t.content.toString()),r=rr.Z.parse(n),i=(0,V._)({},r,e),o=rr.Z.serialize(i),[4,B.writeFile(".env",o)];case 2:return a.sent().error&&tp.showError("Failed to overwrite secrets"),tr(!1),ta(!1),[2]}})}),function(){return g.apply(this,arguments)}),tv=J?(0,v.BX)(v.HY,{children:[(0,v.tZ)(nm,{}),(0,v.tZ)(nm,{}),(0,v.tZ)(nm,{})]}):(0,v.BX)(v.HY,{children:[e9?(0,v.tZ)(iu,{crontab:eS,setCrontab:ek,crontabError:eT,timezone:eb,setTimezone:ew,timezoneError:ex,loading:q,timeoutValue:eH,setTimeoutValue:eV,timeoutUnits:ej,setTimeoutUnits:eq,setTimeoutValueError:eK}):null,e6?(0,v.tZ)(np,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,v.tZ)(rL,{id:"primaryDomain",subdomain:en,deploymentId:T||void 0,onChange:er,updateValidity:el})}):null,e8?(0,v.tZ)(np,{id:"publicDir",title:"Public directory",information:"The public directory is the folder where the browser should start when serving your static site",children:(0,v.tZ)(rA,{id:"publicDir",value:eL,onChange:eO,loading:J,disabled:td,error:eM})}):null,(0,v.tZ)(np,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,v.tZ)(rA,{id:"buildCommand",value:eu,onChange:ed,loading:J,disabled:td})}),e3?(0,v.tZ)(np,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,v.tZ)(rA,{id:"runCommand",value:eh,onChange:ep,loading:J,disabled:td,error:ev})}):null,(0,v.tZ)(np,{id:"envVars",title:"Deployment secrets",information:"Secrets, or environment variables, are private keys you can use to access APIs and services",actions:T&&eD.length>0?(0,v.tZ)(eX.hU,{alt:"Copy all secrets from Deployment to Development.",disabled:tn,onClick:function(){ta(!0)},children:(0,v.tZ)(t$.Z,{})}):null,children:(0,v.BX)(b.G,{css:[Z.l0.colWithGap(12)],children:[eD.length>0?eD.map(function(e,t){var n=e.name,r=e.value;return(0,v.tZ)(rN,{index:t,name:n,value:r,updateEnvVarName:function(e){return e0(t,e)},updateEnvVarValue:function(e){return e1(t,e)},removeEnvVar:function(){return e2(t)},disabled:td,otherKeys:th.filter(function(e,n){return n!==t})},t)}):null,e$?(0,v.tZ)(rn,{secrets:new Map(eD.map(function(e){return[e.name,e.value]})),otherSecrets:e$,otherEnvName:"workspace",onAddSecret:function(e){return eQ({name:e.key,value:e.value})},initialExpanded:X}):null,(0,v.tZ)(O.zx,{onClick:function(){return eQ()},text:"Add deployment secret",iconLeft:(0,v.tZ)(n9.Z,{}),disabled:q})]})}),e4?(0,v.tZ)(np,{id:"deploymentAppType",title:"App type",information:"Configure your app based on whether it needs to serve traffic from the web.",children:(0,v.tZ)(rO,{appType:Q,onChange:function(e){ee(e),eP((e===L.Vp.Server||e===L.Vp.Worker)&&e===L.Vp.Worker)}})}):null,e7?(0,v.tZ)(rZ,{ports:A,openNetworkingPane:F}):null]});return(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:ip.self,children:[tv,(0,v.BX)(b.G,{css:ip.footer,children:[(0,v.tZ)(rV,{deployability:tu,ubbCapabilities:ts}),(0,v.BX)(b.G,{css:ip.ctaGroup,children:[K?(0,v.tZ)(O.zx,{text:"Cancel",onClick:U}):null,(0,v.tZ)(b.G,{css:ip.deployButton,children:(0,v.tZ)(O.zx,{colorway:"primary",onClick:te,text:W===_.z.Preparing&&"Preparing..."||J&&"Fetching options..."||"Deploy",iconLeft:J||W===_.z.Preparing?(0,v.tZ)(w.Z,{}):(0,v.tZ)(G.Z,{}),disabled:tf})})]})]})]}),(0,v.tZ)(n2.u,{isOpen:to,onRequestClose:function(){tn||ta(!1)},children:(0,v.BX)(b.G,{css:ip.secretsModal,children:[(0,v.tZ)(eo.xv,{variant:"subheadBig",children:"Copy secrets from Deployment to Development?"}),(0,v.tZ)(eo.xv,{children:"Are you sure you want to copy all of your secrets from Deployment to Development? Secrets already present in Development will be overwritten and lost permanently."}),(0,v.BX)(b.G,{css:ip.secretsModalButtons,children:[(0,v.tZ)(O.zx,{text:"Cancel",disabled:tn,onClick:function(){ta(!1)}}),(0,v.tZ)(O.zx,{text:"Yes, copy secrets",colorway:"negative",disabled:tn,loading:tn,onClick:tm})]})]})})]})};function iv(){var e=(0,el._)(["\n  query HostingDeploymentConfigRedeploy($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        activityLogs(count: 20) {\n          items {\n            id\n            ...HostingActivityLogLine2\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n        }\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n  ","\n"]);return iv=function(){return e},e}var ig={},iy=(0,ec.Ps)(iv(),tJ,rF),ib=(0,I.X)({self:Z.l0.colWithGap(8),ctaGroup:{flexDirection:"row",gap:8,flexWrap:"wrap"},loading:tE,deployOptions:[Z.l0.p(16),Z.l0.pt(12),Z.l0.borderRadius(8),Z.l0.border({color:Z.TV.outlineDimmest})]}),iw=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,g,y,w=e.deploymentId,Z=e.dotReplit,k=e.fs,T=e.ports,I=e.onError,D=e.expanded,B=e.setExpanded,A=e.shouldShowMobileTour,P=e.onDismissMobileTour,L=e.openNetworkingPane,U=(0,C.XA)().redeployWithNoNewOptions,M=(i=(t={deploymentId:w,dotReplit:Z}).deploymentId,o=t.dotReplit,l=(a=(0,m._)((0,x.useState)(null),2))[0],c=a[1],(0,x.useEffect)(function(){var e=!1;function t(){return(t=(0,S._)(function(){var t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,ro.$f)(o)];case 1:if(t=n.sent(),e)return[2];return c(t),[2]}})})).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}},[o]),d=(s=(0,V._)({},ig,{variables:{id:i},ssr:!1,fetchPolicy:"cache-and-network"}),u=es.a(iy,s)).data,f=u.loading,h=u.error,p=(null==d?void 0:null===(n=d.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"?d.hostingDeployment:null,(null==d?void 0:null===(r=d.hostingDeployment)||void 0===r?void 0:r.__typename)==="NotFoundError"?{deployment:null,config:null,error:"Deployment not found",loading:!1}:null===l||!p&&f?{data:null,erorr:null,loading:!0}:h||!p?{deployment:null,config:null,error:"Something went wrong",loading:!1}:{deployment:p,config:l,error:null,loading:!1}),X=(0,C.BU)(),F=X.deployability,W=X.usageBasedBillingCapabilities,H=null===(g=M.deployment)||void 0===g?void 0:g.currentBuild,z=ri({fs:k}).devSecrets,j=null===(y=M.deployment)||void 0===y?void 0:y.currentBuild.envVars,q=(0,x.useMemo)(function(){return z?re({secrets:new Map(null==j?void 0:j.map(function(e){return[e.name,e.value]})),otherSecrets:z}).missing.size:0},[z,j]),J=(0,C.kW)();if(J===_.z.Preparing||J===_.z.Deploying)return(0,v.tZ)(b.G,{css:ib.loading,children:(0,v.tZ)(tR,{})});if(M.error)return(0,v.tZ)(ny,{text:M.error});if(D)return H?(0,v.tZ)(b.G,{css:ib.deployOptions,children:(0,v.tZ)(im,{initialSubdomain:"",provider:H.provider,deploymentId:w,fs:k,dotReplit:Z,ports:T,onCancel:function(){return B(!1)},onDeploy:function(){return B(!1)},onError:I,initialSecretsSyncExpanded:q>0,openNetworkingPane:L})}):(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:"Provider not found"});var Y=M.loading||F.disableDeployments||!(J===_.z.Ready||J===_.z.Suspended);return(0,v.BX)(b.G,{css:ib.self,children:[(0,v.tZ)(rV,{deployability:F,ubbCapabilities:W}),(0,v.BX)(b.G,{css:ib.ctaGroup,children:[(0,v.tZ)(O.zx,{disabled:Y,onClick:(0,S._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:if(M.loading)return[2];return[4,U()];case 1:return e.sent(),[2]}})}),text:J===_.z.Suspended?"Resume":"Redeploy",iconLeft:(0,v.tZ)(G.Z,{})}),(0,v.tZ)(O.zx,{disabled:Y,text:q>0?"".concat(q," ").concat((0,t4.Z)("secrets",q)," out of sync"):"Edit commands and secrets",iconLeft:q>0?(0,v.tZ)(N.Z,{}):void 0,onClick:function(){return B(!0)}}),(0,v.tZ)(n5,{shouldShow:A,onDismissTour:P})]})]})},iZ=n(77862),ix=n(17841),iC=n(39460),i_=Z.nC.min(320),iS=(0,I.X)({container:Z.l0.colWithGap(4),label:[Z.l0.flex.column,Z.l0.pb(4),(0,$._)({},i_,[Z.l0.flex.row,Z.l0.justify.spaceBetween,Z.l0.pb(0)])],resource:Z.l0.fontWeight.medium,cost:[Z.l0.rowWithGap(1),Z.l0.align.baseline]}),ik=n(42650),iE=n(4762),iT=[1,2,4,8],iR=iE.m0*iE.hU,iI=[iR,2*iR,4*iR,8*iR],iD=[[0,3],[0,4],[2,5],[3,6]],iB=iT.length-1,iG=1/(2*iB),iA=(0,ik.cn)(0),iP=(0,ik.cn)(function(e){return iT[e(iA)]}),iN=(0,ik.cn)(function(e){return iI[e(iA)]}),iL=(0,ik.cn)(function(e){return iD[e(iA)]}),iO=(0,ik.cn)(0),iU=(0,ik.cn)(function(e){var t=e(ij)[0]/iB,n=e(ij)[1]/iB,r=0,i=0;return e(iO)<t&&(r=(t-e(iO))/iG,i=t-iG),e(iO)>n&&(r=(e(iO)-n)/iG,i=n+iG),{overage:r,point:i}}),iM=[.5,1,2,4,8,16,32];iE.m0;var iX=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],iF=iM.length-1,iW=1/(2*iF),iH=(0,ik.cn)(2),iV=(0,ik.cn)(function(e){return iM[e(iH)]}),iz=(0,ik.cn)(function(e){return e(i0)*iE.m0}),ij=(0,ik.cn)(function(e){return iX[e(iH)]}),iq=(0,ik.cn)(0),iJ=(0,ik.cn)(function(e){var t=e(iL)[0]/iF,n=e(iL)[1]/iF,r=0,i=0;return e(iq)<t&&(r=(t-e(iq))/iW,i=t-iW),e(iq)>n&&(r=(e(iq)-n)/iW,i=n+iW),{overage:r,point:i}}),iY=(0,ik.cn)(null,function(e,t){var n=e(iA),r=e(ij)[0],i=e(ij)[1];n<r&&t(iA,r),n>i&&t(iA,i)}),iK=(0,ik.cn)(null,function(e,t){var n=e(iH),r=e(iL)[0],i=e(iL)[1];n<r&&t(iH,r),n>i&&t(iH,i)}),i$=(0,ik.cn)(function(e){var t=e(ij)[0]/iB,n=e(ij)[1]/iB,r=e(iL)[0]/iF,i=e(iL)[1]/iF;return e(iO)<t?(t-e(iO))/iG:e(iO)>n?(e(iO)-n)/iG:e(iq)<r?(r-e(iq))/iW:e(iq)>i?(e(iq)-i)/iW:0}),iQ=(0,ik.cn)(function(e){var t;return(1e5*(t={ramCost:e(iz),cpuCost:e(iN)}).ramCost+1e5*t.cpuCost)/1e5}),i0=(0,ik.cn)(function(e){return e(iV)*iE.v7}),i1=(0,ik.cn)(function(e){return e(iP)*iE.hU}),i2=(0,ik.cn)(function(e){return e(i0)+e(i1)});(r=s||(s={})).None="0ms",r.Normal="120ms";var i3=["ArrowLeft","ArrowRight","Home","End"],i4=(0,ee.iv)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),i8=(0,ee.iv)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:Z.TV.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(Z.TV.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}}),i6=(0,x.forwardRef)(function(e,t){var n=(0,m._)((0,iC.KO)(iP),1)[0],r=(0,x.useRef)(null);return(0,x.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(iT[0])),r.current.setAttribute("aria-valuemax",String(iT[iT.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,x.useMemo)(function(){return(0,v.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:[i8,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) ease-out"}]})},[])}),i5="min(var(--point), var(--position))",i9="max(var(--point), var(--position))",i7=(0,x.forwardRef)(function(e,t){var n=(0,iC.Dv)(iU),r=n.overage,i=n.point,o=(0,iC.Dv)(iO),a=(0,x.useRef)(null);return(0,x.useEffect)(function(){(0,iZ.A)(a,"--opacity",String(r))},[r]),(0,x.useEffect)(function(){(0,iZ.A)(a,"--point",String(100*i)+"%")},[i]),(0,x.useEffect)(function(){(0,iZ.A)(a,"--position",String(100*o)+"%")},[o]),(0,x.useMemo)(function(){return(0,v.BX)(v.HY,{children:[(0,v.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,v.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:U.vb.interactiveBorder,borderRadius:"2px"},children:(0,v.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(i5,", \n                  ").concat(U.vb.interactiveBorderHover," ").concat(i5,", \n                  ").concat(U.vb.interactiveBorderHover," ").concat(i9,", \n                  transparent ").concat(i9," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])}),oe=(0,I.X)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:Z.TV.outlineStronger}});function ot(e){var t=e.list;return(0,v.tZ)(b.G,{css:oe.container,children:t.map(function(e){return(0,v.tZ)(b.G,{css:oe.mark},e)})})}function on(e){var t=e.setAttrs,n=(0,m._)((0,iC.KO)(iA),2),r=n[0],i=n[1],o=(0,m._)((0,x.useState)(!1),2),a=o[0],l=o[1],c=(0,x.useRef)(null),u=(0,x.useRef)(null),d=(0,x.useRef)(null),f=(0,x.useCallback)(function(e){t.setTransitionTime(e)},[t]),h=(0,x.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(h(r/iB),f(s.Normal)),(0,x.useEffect)(function(){if(void 0!==r&&u.current&&d.current&&!a){var e=u.current,t=d.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,c=o.width,u=n.target===e?c/2:n.clientX-o.left,d=null,p=function(e){var t=Math.max(0,Math.min(1,(e-r.left-u)/(a-c)));t!==d&&(d=t,h(t),i(Math.round(t*iB)))};p(n.clientX);var m=function(e){f(s.None),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),f(s.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,h,f]),(0,x.useEffect)(function(){if(void 0!==r&&d.current&&!a){var e=d.current,t=function(e){if(void 0!==r&&i3.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(iB,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=iB}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,x.useMemo)(function(){return(0,v.BX)(b.G,{css:Z.l0.colWithGap(8),children:[(0,v.BX)(b.G,{innerRef:c,css:i4,children:[(0,v.tZ)(i7,{ref:u}),(0,v.tZ)(i6,{ref:d})]}),(0,v.tZ)(ot,{list:iT})]})},[])}function or(e){var t=e.setAttrs,n=(0,m._)((0,iC.KO)(iP),1)[0],r=(0,m._)((0,iC.KO)(i1),1)[0],i=(0,iC.b9)(iK);return(0,x.useEffect)(function(){i()},[i,n]),(0,v.BX)(b.G,{css:iS.container,children:[(0,v.BX)(b.G,{css:iS.label,children:[(0,v.BX)(eo.xv,{css:iS.resource,multiline:!1,children:[n," ",(0,t4.Z)("vCPU",n)]}),(0,v.BX)(b.G,{css:iS.cost,children:[(0,v.BX)(eo.xv,{color:"dimmer",multiline:!1,children:[r," ",(0,t4.Z)("compute unit",r)]}),(0,v.tZ)(eo.xv,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,v.tZ)(on,{setAttrs:t})]})}var oi=(0,x.forwardRef)(function(e,t){var n=(0,m._)((0,iC.KO)(iV),1)[0],r=(0,x.useRef)(null);return(0,x.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(iM[0])),r.current.setAttribute("aria-valuemax",String(iM[iM.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,x.useMemo)(function(){return(0,v.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:[i8,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) ease-out"}]})},[])}),oo="min(var(--point), var(--position))",oa="max(var(--point), var(--position))",ol=(0,x.forwardRef)(function(e,t){var n=(0,iC.Dv)(iJ),r=n.overage,i=n.point,o=(0,iC.Dv)(iq),a=(0,x.useRef)(null);return(0,x.useEffect)(function(){(0,iZ.A)(a,"--opacity",String(r))},[r]),(0,x.useEffect)(function(){(0,iZ.A)(a,"--point",String(100*i)+"%")},[i]),(0,x.useEffect)(function(){(0,iZ.A)(a,"--position",String(100*o)+"%")},[o]),(0,x.useMemo)(function(){return(0,v.BX)(v.HY,{children:[(0,v.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,v.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:U.vb.interactiveBorder,borderRadius:"2px"},children:(0,v.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(oo,", \n                  ").concat(U.vb.interactiveBorderHover," ").concat(oo,", \n                  ").concat(U.vb.interactiveBorderHover," ").concat(oa,", \n                  transparent ").concat(oa," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function oc(e){var t=e.setAttrs,n=(0,m._)((0,iC.KO)(iH),2),r=n[0],i=n[1],o=(0,m._)((0,x.useState)(!1),2),a=o[0],l=o[1],c=(0,x.useRef)(null),u=(0,x.useRef)(null),d=(0,x.useRef)(null),f=(0,x.useCallback)(function(e){t.setTransitionTime(e)},[t]),h=(0,x.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(h(r/iF),f(s.Normal)),(0,x.useEffect)(function(){if(void 0!==r&&u.current&&d.current&&!a){var e=u.current,t=d.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,c=o.width,u=n.target===e?c/2:n.clientX-o.left,d=null,p=function(e){var t=Math.max(0,Math.min(1,(e-r.left-u)/(a-c)));t!==d&&(d=t,h(t),i(Math.round(t*iF)))};p(n.clientX);var m=function(e){f(s.None),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),f(s.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,h,f]),(0,x.useEffect)(function(){if(void 0!==r&&d.current&&!a){var e=d.current,t=function(e){if(void 0!==r&&i3.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(iF,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=iF}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,x.useMemo)(function(){return(0,v.BX)(b.G,{css:Z.l0.colWithGap(8),children:[(0,v.BX)(b.G,{innerRef:c,css:i4,children:[(0,v.tZ)(ol,{ref:u}),(0,v.tZ)(oi,{ref:d})]}),(0,v.tZ)(ot,{list:iM})]})},[])}function os(e){var t=e.setAttrs,n=(0,m._)((0,iC.KO)(iV),1)[0],r=(0,m._)((0,iC.KO)(i0),1)[0],i=(0,iC.b9)(iY);return(0,x.useEffect)(function(){i()},[i,n]),(0,v.BX)(b.G,{css:iS.container,children:[(0,v.BX)(b.G,{css:iS.label,children:[(0,v.BX)(eo.xv,{css:iS.resource,multiline:!1,children:[n," GiB RAM"]}),(0,v.BX)(b.G,{css:iS.cost,children:[(0,v.BX)(eo.xv,{color:"dimmer",multiline:!1,children:[r," ",(0,t4.Z)("compute unit",r)]}),(0,v.tZ)(eo.xv,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,v.tZ)(oc,{setAttrs:t})]})}var ou="var(--cpu-progress)",od="var(--ram-progress)",of="min(".concat(ou,", ").concat(od,")"),oh="min(".concat("var(--cpu-transition-time)",", ").concat("var(--ram-transition-time)",")"),op="calc(calc(".concat(od," - ").concat(ou,") + 0.00000001)"),om="calc(".concat(of," + ").concat("max(0, ".concat(op," * -1)"),")"),ov=(0,I.X)({container:[Z.l0.px(8),Z.l0.width("100%"),Z.l0.position.absolute,Z.l0.top(60),Z.l0.bottom(10),Z.l0.transition.snappy,Z.l0.zIndex(1),(0,$._)({},Z.nC.min(320),Z.l0.top(34))],svg:[Z.l0.width("100%"),Z.l0.height("100%"),Z.l0.overflow("visible")],line:{transition:"transform max(24ms, ".concat(oh,") ease"),transform:"translateX(".concat("calc(".concat(om," * 100%)"),") scaleX(").concat("calc(".concat(op," * 100%)"),")"),willChange:"stroke"},overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}}),og={x1:0,y1:0,x2:100,y2:100,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges",css:ov.line};function oy(){var e=(0,iC.Dv)(i$),t=(0,x.useRef)(null);return(0,x.useEffect)(function(){(0,iZ.A)(t,"--opacity",String(Math.pow(e,1/3)))},[e]),(0,v.tZ)(b.G,{css:ov.container,id:"rope",children:(0,v.BX)("svg",{height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:ov.svg,children:[(0,v.tZ)("line",(0,z._)((0,V._)({},og),{stroke:Z.TV.outlineDimmer})),(0,v.tZ)("line",(0,z._)((0,V._)({},og),{stroke:Z.TV.outlineDefault,strokeDasharray:8})),(0,v.BX)("g",{ref:t,css:ov.overage,children:[(0,v.tZ)("line",(0,z._)((0,V._)({},og),{stroke:Z.TV.accentPrimaryDefault})),(0,v.tZ)("line",(0,z._)((0,V._)({},og),{stroke:Z.TV.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var ob=[Z.l0.borderRadius(8)],ow=(0,I.X)({container:[ob],disabled:[ob,{opacity:.5,pointerEvents:"none"}],top:[Z.l0.p(16),Z.l0.colWithGap(12)],bottom:[Z.l0.p(16),Z.l0.border({direction:"top",color:Z.TV.outlineDimmer})],header:[Z.l0.rowWithGap(8)],text:[Z.l0.colWithGap(4),Z.l0.flex.growAndShrink(1)],title:[Z.l0.rowWithGap(4),Z.l0.align.center],edit:U.gU.outlined,overview:[Z.l0.colWithGap(8)],overviewLine:[Z.l0.flex.column,(0,$._)({},Z.nC.min(320),[Z.l0.flex.row,Z.l0.justify.spaceBetween])],overviewValue:[Z.l0.fontWeight.medium],total:[Z.l0.rowWithGap(4),Z.l0.flex.shrink(1),Z.l0.align.center],cost:[Z.l0.flex.row,Z.l0.align.baseline,{gap:1}],builder:[Z.l0.colWithGap(12),Z.l0.position.relative,{"--cpu-transition-time":s.Normal,"--cpu-progress":1,"--ram-transition-time":s.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function oZ(e){var t=e.machineConfiguration,n=e.disabled,r=e.toggleEditable,i=void 0===r||r,o=(0,x.useRef)(null),a=(0,m._)((0,x.useState)(!i),2),l=a[0],c=a[1],s=(0,iC.Dv)(iP),u=(0,iC.Dv)(iV),d=(0,iC.Dv)(i1),f=(0,iC.Dv)(i0),h=(0,iC.Dv)(iQ),p=(0,iC.Dv)(i2),g=(0,iC.b9)(iO),y=(0,iC.b9)(iq),w=(0,iC.b9)(iA),C=(0,iC.b9)(iH);return(0,x.useEffect)(function(){if(t){var e=iT.findIndex(function(e){return e.toString()===t.vcpu}),n=iM.findIndex(function(e){return e.toString()===t.memory});w(e),C(n)}},[t,w,C]),(0,v.BX)(M.Tg,{elevated:!0,css:n?ow.disabled:ow.container,children:[(0,v.BX)(b.G,{css:ow.top,children:[(0,v.BX)(b.G,{css:ow.header,children:[(0,v.BX)(b.G,{css:ow.text,children:[(0,v.BX)(b.G,{css:ow.title,children:[(0,v.tZ)(ix.Z,{}),(0,v.tZ)(eo.xv,{variant:"subheadDefault",multiline:!1,children:"Machine power"})]}),(0,v.tZ)(eo.xv,{multiline:!0,variant:"small",color:"dimmer",children:"The power level for each machine that spins up upon any request"})]}),i?(0,v.tZ)(O.zx,{text:l?"Done":"Edit",css:ow.edit,onClick:function(){return c(!l)}}):null]}),l?(0,v.BX)(b.G,{css:ow.builder,innerRef:o,children:[(0,v.tZ)(oy,{}),(0,v.tZ)(or,{setAttrs:{setTransitionTime:function(e){(0,iZ.A)(o,"--cpu-transition-time",e)},setProgress:function(e){(0,iZ.A)(o,"--cpu-progress",e.toString()),g(e)}}}),(0,v.tZ)(os,{setAttrs:{setTransitionTime:function(e){(0,iZ.A)(o,"--ram-transition-time",e)},setProgress:function(e){(0,iZ.A)(o,"--ram-progress",e.toString()),y(e)}}})]}):(0,v.BX)(b.G,{css:ow.overview,children:[(0,v.BX)(b.G,{css:ow.overviewLine,children:[(0,v.BX)(eo.xv,{css:ow.overviewValue,multiline:!1,children:[s," vCPU"]}),(0,v.BX)(b.G,{css:ow.cost,children:[(0,v.BX)(eo.xv,{multiline:!1,color:"dimmer",children:[d," ",(0,t4.Z)("compute unit",d)]}),(0,v.tZ)(eo.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]}),(0,v.BX)(b.G,{css:ow.overviewLine,children:[(0,v.BX)(eo.xv,{css:ow.overviewValue,multiline:!1,children:[u," GiB RAM"]}),(0,v.BX)(b.G,{css:ow.cost,children:[(0,v.BX)(eo.xv,{multiline:!1,color:"dimmer",children:[f," ",(0,t4.Z)("compute unit",f)]}),(0,v.tZ)(eo.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]})]})]}),(0,v.tZ)(b.G,{css:ow.bottom,children:(0,v.BX)(b.G,{css:ow.overviewLine,children:[(0,v.tZ)(eo.xv,{css:ow.overviewValue,multiline:!1,children:"Total per machine"}),(0,v.BX)(b.G,{css:ow.total,children:[(0,v.BX)(b.G,{css:ow.cost,children:[(0,v.BX)(eo.xv,{multiline:!1,children:[p," ",(0,t4.Z)("compute unit",p)]}),(0,v.tZ)(eo.xv,{variant:"small",color:"dimmer",multiline:!1,children:"/sec"})]}),(0,v.tZ)(nd.u,{tooltip:(0,v.BX)(b.G,{css:ow.cost,children:[(0,v.BX)(eo.xv,{multiline:!1,children:["$",h.toFixed(6)]}),(0,v.tZ)(eo.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]}),children:(0,v.tZ)(nf.Z,{color:Z.TV.foregroundDimmest})})]})]})})]})}var ox=[1,2,3,4,5,6,7,8,9,10],oC=ox.length-1,o_=1/(2*oC),oS=(0,ik.cn)(2),ok=(0,ik.cn)(function(e){return ox[e(oS)]}),oE=(0,ik.cn)(function(e){return(e(iQ)*e(ok)).toFixed(6)}),oT=(0,ik.cn)(function(e){return e(i2)*e(ok)}),oR=(0,ik.cn)(0),oI=(0,ik.cn)(function(e){var t=0/oC,n=ox.length-1/oC,r=0,i=0;return e(oR)<t&&(r=(t-e(oR))/o_,i=t-o_),e(oR)>n&&(r=(e(oR)-n)/o_,i=n+o_),{overage:r,point:i}});(i=u||(u={})).None="0ms",i.Normal="120ms";var oD=["ArrowLeft","ArrowRight","Home","End"],oB=(0,ee.iv)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),oG=(0,ee.iv)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:Z.TV.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(Z.TV.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}}),oA=(0,x.forwardRef)(function(e,t){var n=(0,m._)((0,iC.KO)(ok),1)[0],r=(0,x.useRef)(null);return(0,x.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(ox[0])),r.current.setAttribute("aria-valuemax",String(ox[ox.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,x.useMemo)(function(){return(0,v.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:[oG,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])}),oP="min(var(--point), var(--position))",oN="max(var(--point), var(--position))",oL=(0,x.forwardRef)(function(e,t){var n=(0,iC.Dv)(oI),r=n.overage,i=n.point,o=(0,iC.Dv)(oR),a=(0,x.useRef)(null);return(0,x.useEffect)(function(){(0,iZ.A)(a,"--opacity",String(r))},[r]),(0,x.useEffect)(function(){(0,iZ.A)(a,"--point",String(100*i)+"%")},[i]),(0,x.useEffect)(function(){(0,iZ.A)(a,"--position",String(100*o)+"%")},[o]),(0,x.useMemo)(function(){return(0,v.BX)(v.HY,{children:[(0,v.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,v.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:U.vb.interactiveBorder,borderRadius:"2px"},children:(0,v.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(oP,", \n                  ").concat(U.vb.interactiveBorderHover," ").concat(oP,", \n                  ").concat(U.vb.interactiveBorderHover," ").concat(oN,", \n                  transparent ").concat(oN," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function oO(e){var t=e.setAttrs,n=(0,m._)((0,iC.KO)(oS),2),r=n[0],i=n[1],o=(0,m._)((0,x.useState)(!1),2),a=o[0],l=o[1],c=(0,x.useRef)(null),s=(0,x.useRef)(null),d=(0,x.useRef)(null),f=(0,x.useCallback)(function(e){t.setTransitionTime(e)},[t]),h=(0,x.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(h(r/oC),f(u.Normal)),(0,x.useEffect)(function(){if(void 0!==r&&s.current&&d.current&&!a){var e=s.current,t=d.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,c=o.width,s=n.target===e?c/2:n.clientX-o.left,d=null,p=function(e){var t=Math.max(0,Math.min(1,(e-r.left-s)/(a-c)));t!==d&&(d=t,h(t),i(Math.round(t*oC)))};p(n.clientX);var m=function(e){f(u.None),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),f(u.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,h,f]),(0,x.useEffect)(function(){if(void 0!==r&&d.current&&!a){var e=d.current,t=function(e){if(void 0!==r&&oD.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(oC,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=oC}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,x.useMemo)(function(){return(0,v.tZ)(b.G,{css:Z.l0.colWithGap(8),children:(0,v.BX)(b.G,{innerRef:c,css:oB,children:[(0,v.tZ)(oL,{ref:s}),(0,v.tZ)(oA,{ref:d})]})})},[])}var oU=(0,I.X)({costInfo:[Z.l0.rowWithGap(4),Z.l0.flex.shrink(1),Z.l0.align.center]});function oM(e){var t=e.setAttrs,n=(0,m._)((0,iC.KO)(ok),1)[0],r=(0,m._)((0,iC.KO)(oE),1)[0],i=(0,m._)((0,iC.KO)(oT),1)[0];return(0,v.BX)(b.G,{css:iS.container,children:[(0,v.BX)(b.G,{css:iS.label,children:[(0,v.BX)(eo.xv,{css:iS.resource,multiline:!1,children:[n," ",(0,t4.Z)("machine",n)]}),(0,v.BX)(b.G,{css:oU.costInfo,children:[(0,v.BX)(b.G,{css:iS.cost,children:[(0,v.BX)(eo.xv,{multiline:!1,children:[i," compute units"]}),(0,v.tZ)(eo.xv,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,v.tZ)(nd.u,{tooltip:(0,v.BX)(b.G,{css:iS.cost,children:[(0,v.BX)(eo.xv,{multiline:!1,children:["$",r]}),(0,v.tZ)(eo.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,v.tZ)(nf.Z,{color:Z.TV.foregroundDimmest})})]})]}),(0,v.tZ)(oO,{setAttrs:t})]})}var oX=n(18257),oF=[Z.l0.colWithGap(12),Z.l0.borderRadius("container"),Z.l0.p(16)],oW=(0,I.X)({container:[oF],disabled:[oF,{opacity:.5,pointerEvents:"none"}],text:[Z.l0.colWithGap(4)],title:[Z.l0.rowWithGap(4),Z.l0.align.center],cost:[Z.l0.flex.row,Z.l0.align.baseline,Z.l0.fontWeight.medium,{gap:3}],builder:[Z.l0.colWithGap(8),Z.l0.position.relative,{"--max-instances-transition-time":u.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function oH(e){var t=e.maxMachineInstances,n=e.disabled,r=e.onError,i=(0,x.useRef)(null),o=(0,iC.b9)(oR),a=(0,iC.b9)(oS);return(0,x.useEffect)(function(){if(t){var e=ox.indexOf(t);if(-1===e){r("An error occurred while setting selected max machine instances.");return}a(e)}},[t,a,r]),(0,v.BX)(M.Tg,{elevated:!0,css:n?oW.disabled:oW.container,children:[(0,v.BX)(b.G,{css:oW.text,children:[(0,v.BX)(b.G,{css:oW.title,children:[(0,v.tZ)(oX.Z,{}),(0,v.tZ)(eo.xv,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,v.tZ)(eo.xv,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,v.tZ)(b.G,{css:oW.builder,innerRef:i,children:(0,v.tZ)(oM,{setAttrs:{setTransitionTime:function(e){(0,iZ.A)(i,"--max-instances-transition-time",e)},setProgress:function(e){(0,iZ.A)(i,"--max-instances-progress",e.toString()),o(e)}}})})]})}function oV(){var e=(0,el._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return oV=function(){return e},e}var oz={},oj=(0,ec.Ps)(oV(),nZ.bN),oq=function(e){var t,n,r=(0,C.kW)(),i=(0,C.hn)(),o=(0,C.$y)(),a=void 0!==(0,C.pn)(),l=!a&&"string"!=typeof i,c=(0,iC.Dv)(iP),s=(0,iC.Dv)(iV),u=(0,iC.Dv)(ok),d=(t=(0,V._)({},oz,{onCompleted:function(t){"HostingMachineConfigurationsResults"!==t.hostingMachineConfigurations.__typename&&e.onError("Something went wrong")},onError:function(t){return e.onError(t.message)}}),es.a(oj,t)),f=d.data,h=d.loading,p=(null==f?void 0:f.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?f.hostingMachineConfigurations.results:null;(0,x.useEffect)(function(){e5({context:F.k.AutoscaleMachineConfiguration})},[]);var m=(n=(0,S._)(function(){var t,n,r,i;return(0,E.Jh)(this,function(o){return(t=null==p?void 0:p.find(function(e){var t=e.vcpu,n=e.memory;return c.toString()===t&&s.toString()===n}))?(n=t.id,r=t.label,i=t.slug,e.onConfirm({configurationId:n,configurationLabel:r,configurationSlug:i,maxInstances:u})):e.onError("An error occurred trying to validate selected machine configuration"),[2]})}),function(){return n.apply(this,arguments)}),g=h||e.fetching||a||r!==_.z.Ready;return(0,v.BX)(v.HY,{children:[(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(nw,{onBack:e.onBack})}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.BX)(b.G,{css:Z.l0.colWithGap(16),children:[(0,v.BX)(b.G,{css:Z.l0.colWithGap(4),children:[(0,v.tZ)(eo.xv,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,v.tZ)(eo.xv,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,v.BX)(b.G,{css:Z.l0.colWithGap(16),children:[(0,v.tZ)(oZ,{machineConfiguration:null==o?void 0:o.machineConfiguration,disabled:g}),(0,v.tZ)(oH,{maxMachineInstances:null==o?void 0:o.maxMachineInstances,disabled:g,onError:e.onError})]}),(0,v.BX)(b.G,{css:[Z.l0.colWithGap(8),Z.l0.pt(8)],children:[(0,v.tZ)(O.zx,{colorway:"primary",text:l?"Approve and configure build settings":"Approve and update",iconRight:(0,v.tZ)(nk.Z,{}),onClick:m,loading:h}),(0,v.BX)(eo.xv,{color:"dimmest",children:["Your deployed app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,v.tZ)("a",{href:nE.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})},oJ=(0,I.X)({deployOptionsWithCurrentBuild:[Z.l0.p(16),Z.l0.pt(12),Z.l0.borderRadius(),Z.l0.border({color:Z.TV.outlineDimmest})],back:[Z.l0.pb(8),Z.l0.flex.growAndShrink(1)],subViewOuter:[Z.l0.rowWithGap(12)],subView:[Z.l0.pb(12),Z.l0.flex.growAndShrink(1),Z.l0.colWithGap(12)],deploymentInfoWrapper:[Z.l0.rowWithGap(12),{':has( + [data-history-timeline-items="1"])':{"[data-timeline-line]":{display:"none"}}}],deploymentInfo:[Z.l0.pb(16),Z.l0.flex.growAndShrink(1),Z.l0.colWithGap(12)]}),oY=function(e){var t=e.view,n=e.onViewAction,r=e.onError,i=e.openFile,o=(0,C.kW)(),a=(0,C.hn)(),l=(0,C.$y)(),c=(0,C.pn)(),s=(0,C.XZ)(),u=(0,nY.sG)(),d=void 0!==l,f=(0,T.Z)(),h=(0,C.l9)(f),p=null==l?void 0:l.provider,g=d&&l.machineConfiguration?{configurationId:l.machineConfiguration.id,configurationLabel:l.machineConfiguration.label,configurationSlug:l.machineConfiguration.slug,maxInstances:null==l?void 0:l.maxMachineInstances}:void 0,y=(0,nK.Z)("deployments-pane","deployments-mobile-download"),w=y.shouldDisplay,Z=y.dismiss,S=y.register;(0,x.useEffect)(function(){S()},[S]);var k=(null==l?void 0:l.status)&&l.status===L.Fe.Success&&w&&!u,E=(0,m._)((0,x.useState)(!1),2),R=E[0],I=E[1],D=o===_.z.Ready||o===_.z.Suspended,B=(0,m._)((0,x.useState)(null),2),G=B[0],A=B[1],P=(0,m._)((0,x.useState)(null),2),N=P[0],O=P[1];(0,x.useEffect)(function(){e5({context:F.k.Deployment})},[]),(0,x.useEffect)(function(){(o===_.z.Preparing||o===_.z.Deploying)&&(t===F.k.DeploymentInProgress||G||n({type:F.a.ChangeView,payload:{view:F.k.DeploymentInProgress}}))},[o,t,n,G]);var U=(0,x.useRef)(void 0);(0,x.useEffect)(function(){U.current=null==c?void 0:c.id},[null==c?void 0:c.id]);var M=(null==l?void 0:l.status)===L.Fe.Success,X=(null==l?void 0:l.id)===U.current;(0,x.useEffect)(function(){M&&X&&n({type:F.a.ChangeView,payload:{view:F.k.Deployment}})},[M,X,n]);var W=null==c?void 0:c.status,H=(0,x.useRef)(W);(0,x.useEffect)(function(){W&&(H.current=W)},[W]);var V=(0,C.v5)(),z=(0,C.t7)();if(G)return(0,v.tZ)(ne,{build:G,fs:s,openFile:i,onBack:function(){A(null)},onViewAppLogs:function(){n({type:F.a.ChangeView,payload:{view:F.k.Logs}})}});if(N===L.r4.CloudRun)return(0,v.tZ)(oq,{onError:r,onConfirm:function(e){n({type:F.a.SendDeploymentLifecycleCommand,payload:{command:L.Qc.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return O(null)}});if(N===L.r4.Gce)return(0,v.tZ)(nI,{isTeamRepl:h,initialMachineConfiguration:g,onConfirm:function(e){n({type:F.a.SendDeploymentLifecycleCommand,payload:{command:L.Qc.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return O(null)},onError:r});var j=!d||!a;return(0,v.tZ)(v.HY,{children:(0,v.tZ)(K,{children:(0,v.BX)(b.G,{children:[(0,v.BX)(b.G,{css:oJ.subViewOuter,children:[d?(0,v.tZ)(ta,{type:"future"}):null,(0,v.BX)(b.G,{css:oJ.subView,children:[!j&&D?(0,v.tZ)(iw,{dotReplit:V,fs:s,ports:z,deploymentId:a,onError:r,expanded:R,setExpanded:I,shouldShowMobileTour:null!=k&&k,onDismissMobileTour:Z,openNetworkingPane:function(){n({type:F.a.OpenPane,payload:{type:"networking"}})}}):null,t===F.k.DeploymentInProgress?(0,v.tZ)(tI,{openFile:i,viewBuildLogsOnLoad:!d,onViewLogs:function(){n({type:F.a.ChangeView,payload:{view:F.k.Logs}})},onCanceled:function(){n({type:F.a.ChangeView,payload:{view:F.k.Deployment}}),r("Build cancelled")},onError:r}):null]})]}),d?(0,v.BX)(v.HY,{children:[(0,v.tZ)(t8,{type:"failureQueue",onViewBuildLogs:A}),(0,v.BX)(b.G,{css:oJ.deploymentInfoWrapper,children:[(0,v.tZ)(ta,{type:"present"}),(0,v.tZ)(b.G,{css:oJ.deploymentInfo,children:(0,v.tZ)(nJ,{provider:p,machine:g,onViewBuildLogs:A,onManageClick:function(){if(p===L.r4.CloudRun||p===L.r4.Gce){O(p);return}p===L.r4.Static&&n({type:F.a.ChangeView,payload:{view:F.k.Settings}})}})})]}),(0,v.tZ)(t8,{onViewBuildLogs:A})]}):null]})})})},oK=n(25012),o$=n(68081),oQ=n(88736),o0=n(24336),o1=n(12113),o2=n(28341),o3=n(18471),o4=n(81836),o8=n(43983),o6=n(54556),o5=n(42182),o9=n(97906);function o7(){var e=(0,el._)(["\n  fragment DeploymentsNewDeploymentRepl on Repl {\n    id\n    slug\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    powerUps {\n      ... on ReplPowerUpTypes {\n        hostingTier {\n          sku\n        }\n      }\n    }\n  }\n"]);return o7=function(){return e},e}function ae(){var e=(0,el._)(["\n  query DeploymentsNewDeployment($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentsNewDeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return ae=function(){return e},e}var at={},an=(0,ec.Ps)(o7()),ar=(0,ec.Ps)(ae(),an);function ai(){var e=(0,el._)(["\n  query DeploymentsPaneIntro($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n        }\n        ...DeploymentsNewDeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return ai=function(){return e},e}var ao={},aa=(0,ec.Ps)(ai(),an),al=n(72597),ac=n(20694),as=n(95109),au=n(13618);function ad(){var e=(0,el._)(["\n  query MonthlyPowerUpUsage($daysFromNow: Int!) {\n    currentUser {\n      id\n      cycles {\n        forecast(daysFromNow: $daysFromNow) {\n          ... on CyclesForecast {\n            estimatedCyclesSpend\n          }\n        }\n      }\n    }\n  }\n"]);return ad=function(){return e},e}var af={},ah=(0,ec.Ps)(ad()),ap=n(35163),am=n(29609),av=n(71089),ag=n(55821),ay=n(1789),ab=n(99165);function aw(){var e=(0,el._)(["\n  query CyclesAutoRefillConfiguration {\n    currentUser {\n      id\n      cyclesAutoRefillConfiguration {\n        ... on CyclesAutoRefillConfiguration {\n          ...AutoRefillConfig\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return aw=function(){return e},e}function aZ(){var e=(0,el._)(["\n  mutation UpdateCyclesAutoRefillConfiguration(\n    $input: UpdateCyclesAutoRefillConfigurationInput!\n  ) {\n    updateCyclesAutoRefillConfiguration(input: $input) {\n      ... on CurrentUser {\n        id\n        cyclesAutoRefillConfiguration {\n          ... on CyclesAutoRefillConfiguration {\n            ...AutoRefillConfig\n          }\n          ... on UnauthorizedError {\n            message\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return aZ=function(){return e},e}var ax={},aC=(0,ec.Ps)(aw(),ay.L),a_=(0,ec.Ps)(aZ(),ay.L);function aS(e){var t,n,r,i=e.defaultAutoRefillEnabledValue,o=void 0!==i&&i,a=e.onAutoRefillPreferencesUpdated,l=(0,m._)((0,x.useState)(!1),2),c=l[0],s=l[1],u=(0,m._)((0,x.useState)(null),2),d=u[0],f=u[1],h=(t=(0,V._)({},ax,{onCompleted:function(e){var t,n,r,i,a,l=(null==e?void 0:null===(n=e.currentUser)||void 0===n?void 0:null===(t=n.cyclesAutoRefillConfiguration)||void 0===t?void 0:t.__typename)==="CyclesAutoRefillConfiguration"?e.currentUser.cyclesAutoRefillConfiguration:null;s(!!(null==l?void 0:l.enabled)),p.setValue(null!==(r=null==l?void 0:l.enabled)&&void 0!==r?r:o),f(null!==(i=null==l?void 0:l.monthlyBudget)&&void 0!==i?i:null),v.setValue(null!==(a=null==l?void 0:l.monthlyBudget)&&void 0!==a?a:null)}}),es.a(aC,t)).loading,p=(0,am.Y)(!0,function(){}),v=(0,am.Y)(null,function(e){if(null!=e&&e<nB.wi)return{severity:"error",message:"Monthly budget must be ".concat((0,ap.$d)(nB.wi)," or greater")}}),g=(0,m._)((0,x.useState)(null),2),y=g[0],b=g[1],w=(0,m._)((n=(0,V._)({},ax,void 0),ab.D(a_,n)),2),Z=w[0],C=w[1].loading,_=h||C,k=(r=(0,S._)(function(){var e,t,n,r;return(0,E.Jh)(this,function(i){switch(i.label){case 0:if(_)return[2,!1];return[4,Promise.all([p,v].map(function(e){return e.validate()}))];case 1:if(i.sent().some(function(e){return null!=e}))return[2,!1];return b(null),[4,Z({variables:{input:{enabled:p.value,monthlyBudget:v.value}}})];case 2:if(n=(t=i.sent()).data,r=t.errors)return b(r[0].message),[2,!1];if((null==n?void 0:n.updateCyclesAutoRefillConfiguration.__typename)==="UnauthorizedError"||(null==n?void 0:n.updateCyclesAutoRefillConfiguration.__typename)==="UserError")return b(n.updateCyclesAutoRefillConfiguration.message),[2,!1];if((null==n?void 0:n.updateCyclesAutoRefillConfiguration.__typename)==="CurrentUser"&&(null===(e=n.updateCyclesAutoRefillConfiguration.cyclesAutoRefillConfiguration)||void 0===e?void 0:e.__typename)==="UnauthorizedError")return b(n.updateCyclesAutoRefillConfiguration.cyclesAutoRefillConfiguration.message),[2,!1];return a&&a(),[2,!0]}})}),function(){return r.apply(this,arguments)}),T=!!(p.error||v.error),R=p.value!==c||v.value!==d;return{cardAutoRefillPreferencesProps:{enabledField:p,monthlyBudgetUsdCentsField:v,updateAutoRefill:k,loading:_,submissionError:y,autoRefillHasChanged:R,autoRefillHasError:T},autoRefillEnabled:p.value,autoRefillMonthlyBudget:v.value,autoRefillHasChanged:R,autoRefillHasError:T}}function ak(e){var t,n,r,i=e.showSaveButton,o=e.autoRefillHasChanged,a=e.autoRefillHasError,l=e.loading,c=e.submissionError,s=e.updateAutoRefill,u=e.enabledField,d=e.monthlyBudgetUsdCentsField,f=(t={variables:{daysFromNow:nE.Dj},fetchPolicy:"network-only",ssr:!1},n=(0,V._)({},af,t),es.a(ah,n)).data,h=(null==f?void 0:null===(r=f.currentUser)||void 0===r?void 0:r.cycles.forecast.__typename)==="CyclesForecast"?f.currentUser.cycles.forecast.estimatedCyclesSpend:0,p=null;return u.value?null!==d.value&&(0,nB.Gn)(h)>d.value&&(p=(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:"Your Auto-Refill budget might be too low. If your current usage continues, you could run out of Cycles, and some of your Power Ups may be disabled."})):p=(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:"Without Auto-Refill, you may lose access to Power Ups if you run out of Cycles."}),(0,v.BX)(b.G,{css:[Z.l0.colWithGap(16)],children:[(0,v.BX)(b.G,{css:[Z.l0.colWithGap(16)],children:[(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(12),Z.l0.align.start],children:[(0,v.tZ)(av.X,{checked:u.value,id:"auto-refill",onChange:function(e){return u.setValue(e)},disabled:l}),(0,v.BX)(b.G,{css:[Z.l0.colWithGap(16),Z.l0.flex.growAndShrink(1)],children:[(0,v.BX)(eo.xv,{variant:"small",children:[(0,v.tZ)("strong",{children:"Cycles Auto-Refill"}),(0,v.tZ)("br",{}),"We'll charge your card to refill your Cycles balance when needed to keep your Cycles Power Ups active."," ",(0,v.tZ)("a",{target:"_blank",href:nE.TT.ABOUT_CYCLES,css:[{textDecoration:"underline",color:Z.TV.foregroundDimmer,"&:hover":{color:Z.TV.foregroundDefault}}],children:"Learn more"})]}),u.value?(0,v.BX)(b.G,{css:[Z.l0.colWithGap(8)],children:[null==d.value?(0,v.tZ)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:(0,v.tZ)(O.zx,{size:"small",text:"Configure Monthly Budget",disabled:l,onClick:function(){return d.setValue(10*nB.wi)}})}):null,null!=d.value?(0,v.BX)(b.G,{css:[Z.l0.colWithGap(8)],children:[(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,v.tZ)(eo.xv,{variant:"small",multiline:!1,children:"Monthly Budget"}),(0,v.tZ)(nu.II,{value:(0,ap.$d)(d.value),css:[{height:28},Z.l0.maxWidth(80)],maxLength:8,disabled:l,onChange:function(e){var t=e.target.value.replace(/\D/g,"");if(""===t){d.setValue(0);return}var n=parseInt(t,10);d.setValue(100*n)}}),(0,v.tZ)(eX.hU,{alt:"Disable Monthly Budget",disabled:l,onClick:function(){return d.setValue(null)},children:(0,v.tZ)(ag.Z,{})})]}),d.error?(0,v.tZ)(eo.xv,{multiline:!1,variant:"small",css:[Z.l0.color.accentNegativeDefault],children:d.error.message}):null]}):null]}):null]})]}),p]}),c?(0,v.tZ)(eo.xv,{css:[Z.l0.color.accentNegativeDefault],multiline:!1,children:c}):null,(void 0===i||i)&&o?(0,v.tZ)(O.zx,{text:"Save",colorway:"primary",disabled:a||l,onClick:s}):null]})}var aE=n(59195),aT=n(33359);function aR(e){var t=e.amount,n=e.includeUsd,r=e.variant,i=e.color,o=void 0===i?"default":i,a=(0,ap.$E)(t),l=(0,ap.H2)(t);return(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(2),Z.l0.align.center],children:[(0,v.tZ)(aT.Z,{size:"small"===r?12:16,css:[eo.E_[o]]}),(0,v.BX)(eo.xv,{variant:r,color:o,multiline:!1,children:[l,n?" (".concat(a,")"):""]})]})}var aI=n(69216),aD={hosting_tier:L.kL.HostingTier},aB={hosting_tier_e2_micro:L.s2.HostingTierE2Micro,hosting_tier_e2_small:L.s2.HostingTierE2Small,hosting_tier_e2_medium:L.s2.HostingTierE2Medium,hosting_tier_n1_custom_1_4:L.s2.HostingTierN1Custom_1_4,hosting_tier_e2_standard_2:L.s2.HostingTierE2Standard_2,hosting_tier_e2_standard_4:L.s2.HostingTierE2Standard_4},aG=n(89173),aA=n(77536),aP=n(76575),aN=n(62996),aL=n(23955),aO=n(50895),aU=n(7670),aM=n(78711);function aX(){var e=(0,el._)(["\n  query RefetchPowerUps($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...ReplPowerUpMutationReturnFields\n      }\n    }\n    currentUser {\n      ...PowerUpMutationReturnFields\n    }\n  }\n  ","\n  ","\n"]);return aX=function(){return e},e}var aF={},aW=(0,ec.Ps)(aX(),aU.sh,aU.E_),aH=function(e){var t,n=e.productCost,r=e.cyclesBalance;if(n<=r)return{cyclesToBePurchased:0,cyclesBalanceAfterUpgrade:r,excessPurchaseExplanation:"no-purchase"};var i=n-r,o="no-excess";i>=nB.gp?(t=i,o="no-excess"):(t=nB.gp,o="minimum");var a=r+t-n;return{cyclesToBePurchased:t,cyclesBalanceAfterUpgrade:a,excessPurchaseExplanation:o}};function aV(e){var t=e.cycles,n=e.description;return(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,v.tZ)(eo.xv,{color:"dimmest",multiline:!1,children:n}),(0,v.tZ)(tl.R,{}),(0,v.tZ)(aR,{amount:t,includeUsd:!1,color:"dimmest"})]})}var az=(0,I.X)({iconBackground:[Z.l0.width(40),Z.l0.height(40),Z.l0.borderRadius(8),Z.l0.justify.center,Z.l0.align.center,Z.l0.backgroundColor.blueDimmer],loadingContainer:[Z.l0.justify.center,Z.l0.align.center,Z.l0.minHeight(80)]});function aj(e){var t=e.powerUpCategory,n=e.cyclesCost,r=e.description,i=al.S0[t];return(0,v.tZ)(b.G,{css:[Z.l0.colWithGap(16)],children:(0,v.BX)(b.G,{css:[Z.l0.flex.row,Z.l0.justify.spaceBetween],children:[(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,v.tZ)(b.G,{css:az.iconBackground,children:(0,v.tZ)(i.iconComponent,{size:24})}),(0,v.BX)(b.G,{css:[Z.l0.px(8),Z.l0.py(2),Z.l0.colWithGap(4),Z.l0.justify.spaceBetween],children:[(0,v.tZ)(eo.xv,{variant:"subheadDefault",multiline:!1,children:i.name}),(0,v.tZ)(eo.xv,{variant:"small",color:"dimmer",multiline:!1,children:r})]})]}),(0,v.BX)(b.G,{css:[Z.l0.px(8),Z.l0.py(2),Z.l0.colWithGap(4),Z.l0.justify.spaceBetween,Z.l0.align.end],children:[(0,v.tZ)(aR,{amount:n,includeUsd:!0}),(0,v.BX)(eo.xv,{variant:"small",color:"dimmer",multiline:!1,children:["per / ",i.orderDuration]})]})]})})}function aq(e){var t,n,r,i=e.product,o=e.goToCheckoutSuccess,a=e.goToNewPaymentMethodForm,l=(0,as.useStripe)(),c=(0,au.Z)({forceFetch:!0}),s=c.cycles,u=c.loading,d=(0,aA.Q)(),f=d.paymentMethod,h=d.loading,p=al.S0[i.powerUpCategory],g=al.$[i.powerUpSku].provisionDescription,y=(0,m._)((0,x.useState)(null),2),C=y[0],_=y[1],k=(0,m._)((0,x.useState)(!1),2),T=k[0],R=k[1],I=(0,m._)((0,x.useState)(!1),2),D=I[0],B=I[1],G=(0,aG.M)().createCheckoutSession,A=(0,m._)((t={variables:{replId:i.replId}},n=(0,V._)({},aF,t),aM.t(aW,n)),1)[0],P=(0,aO.B)().startPolling,N=aS({defaultAutoRefillEnabledValue:!0}),L=N.autoRefillEnabled,U=N.autoRefillMonthlyBudget,M=N.autoRefillHasError,X=N.autoRefillHasChanged,F=N.cardAutoRefillPreferencesProps,W=aH({productCost:i.cyclesCostNow,cyclesBalance:null!=s?s:0}),H="This will purchase ".concat(W.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,nB.qJ)(W.cyclesToBePurchased)," and activate your ").concat(p.name,".");"minimum"===W.excessPurchaseExplanation&&(H="This will purchase the minimum purchase amount of ".concat(W.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,nB.qJ)(W.cyclesToBePurchased)," and activate your ").concat(p.name,"."));var j=(0,m._)((0,x.useState)("Processing..."),2),q=j[0],J=j[1],Y=(0,aL.i)(),K=Y.isPurchaseAllowed,$=Y.reasonPurchaseNotAllowed;if(!K&&$)return(0,v.tZ)(aN.Z,{reason:$});var Q=function(){R(!1)},ee=(r=(0,S._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:var t;if(R(!0),null==f)throw Error("paymentMethod is null");if(null==l)throw Error("stripe is null");return J("Checking out..."),[4,G({input:{cyclesQuantity:W.cyclesToBePurchased,postPurchasePowerUp:{replPowerUp:{replId:i.replId,sku:aB[i.powerUpSku],type:aD[i.powerUpCategory]}},cyclesAutoRefillConfiguration:X?{enabled:L,monthlyBudget:U}:null},onError:function(e){_(e),Q()},onSucceed:(t=(0,S._)(function(e){var t,n;return(0,E.Jh)(this,function(r){switch(r.label){case 0:return J("Processing payment..."),[4,l.confirmCardPayment(e.clientSecret)];case 1:if(t=r.sent().error)return _(null!==(n=t.message)&&void 0!==n?n:"An error occurred. Please try again."),Q(),[2];return J("Provisioning Power Up..."),P({checkoutSessionId:{checkoutSessionId:e.checkoutSessionId}.checkoutSessionId,onSucceeded:function(){B(!0),A(),o(i)},onFailed:function(){_("Payment failed. Please try again."),Q(),A()},onError:function(e){_(e),Q(),A()}}),[2]}})}),function(e){return t.apply(this,arguments)})})];case 1:return e.sent(),[2]}})}),function(){return r.apply(this,arguments)}),et=h||u||null==s,en=null!=f&&!et&&!T;return(0,v.BX)(b.G,{css:[Z.l0.colWithGap(16)],children:[(0,v.tZ)(aj,{powerUpCategory:i.powerUpCategory,cyclesCost:nB.z4[i.powerUpSku],description:g}),(0,v.tZ)(tl.R,{}),et?(0,v.tZ)(b.G,{css:az.loadingContainer,children:(0,v.tZ)(w.Z,{})}):(0,v.tZ)(b.G,{css:[Z.l0.colWithGap(12),Z.l0.align.start],children:null==f?(0,v.BX)(v.HY,{children:[(0,v.tZ)(eo.xv,{color:"dimmer",children:"You need to add a payment method to complete this purchase."}),(0,v.tZ)(O.zx,{iconLeft:(0,v.tZ)(n9.Z,{}),text:"Add Payment Method",size:"big",onClick:a,colorway:"primary",stretch:!0})]}):(0,v.tZ)(v.HY,{children:(0,v.tZ)(b.G,{css:[Z.l0.colWithGap(16)],children:(0,v.BX)(b.G,{css:[Z.l0.colWithGap(4)],children:[(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,v.tZ)(eX.hU,{alt:"Update Payment Method",onClick:a,children:(0,v.tZ)(aP.Z,{})}),(0,v.tZ)(aE.R,{last4:f.last4})]}),(0,v.tZ)(b.G,{css:[Z.l0.pl(24),Z.l0.pr(16),Z.l0.colWithGap(8)],children:(0,v.tZ)(ak,(0,z._)((0,V._)({},F),{loading:F.loading||T,showSaveButton:!1}))})]})})})}),null!==f?(0,v.BX)(v.HY,{children:[(0,v.tZ)(tl.R,{}),(0,v.tZ)(eo.xv,{variant:"small",css:[Z.l0.color.foregroundDimmer],children:H}),(0,v.tZ)(aI.q,{isMakingPayment:!0,showSuccessState:D,showProcessingState:T,disabled:!en||M,initialStateTextOverride:"Purchase ".concat(W.cyclesToBePurchased.toLocaleString()," Cycles & Upgrade ").concat(p.name),processingStateTextOverride:q,size:"big",onClick:ee}),null!=C?(0,v.tZ)(eo.xv,{css:[Z.l0.color.accentNegativeDefault],children:C}):null,(0,v.BX)(b.G,{css:[Z.l0.colWithGap(4)],children:[(0,v.tZ)(aV,{description:"Cycles balance after purchase",cycles:W.cyclesToBePurchased}),(0,v.tZ)(aV,{description:"1st ".concat(p.orderDuration," of ").concat(p.name),cycles:-1*i.cyclesCostNow}),(0,v.tZ)(aV,{description:"Cycles balance after upgrade",cycles:W.cyclesBalanceAfterUpgrade})]})]}):null]})}function aJ(){var e=(0,el._)(["\n  query CheckOutSuccess($replId: String!) {\n    currentUser {\n      id\n      cyclesAutoRefillConfiguration {\n        ... on CyclesAutoRefillConfiguration {\n          id\n          enabled\n          refillAmount\n          monthlyBudget\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return aJ=function(){return e},e}var aY={},aK=(0,ec.Ps)(aJ()),a$=n(37546),aQ=(0,I.X)({powerUpIconBackground:[Z.l0.width(32),Z.l0.height(32),Z.l0.borderRadius(8),Z.l0.justify.center,Z.l0.align.center,Z.l0.backgroundColor.blueDimmer],autoRefillIconBackground:[Z.l0.width(32),Z.l0.height(32),Z.l0.borderRadius(8),Z.l0.justify.center,Z.l0.align.center,Z.l0.backgroundColor.greyDimmer]});function a0(e){var t,n,r,i,o,a,l,c=e.product,s=e.goToCardPreferences,u=e.goToPowerUpDetails,d=(0,au.Z)({forceFetch:!0}).cycles,f=(t={variables:{replId:c.replId}},n=(0,V._)({},aY,t),es.a(aK,n)),h=f.data,p=f.loading,m=(null==h?void 0:null===(a=h.currentUser)||void 0===a?void 0:null===(o=a.cyclesAutoRefillConfiguration)||void 0===o?void 0:o.__typename)==="CyclesAutoRefillConfiguration"?h.currentUser.cyclesAutoRefillConfiguration:null,g=(null==h?void 0:h.repl.__typename)==="Repl"&&(null===(l=h.repl.owner)||void 0===l?void 0:l.__typename)==="Team",y=!!(null==m?void 0:m.enabled),x=al.S0[c.powerUpCategory],C=al.$[c.powerUpSku];return(0,v.BX)(b.G,{css:[Z.l0.colWithGap(16)],children:[(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.align.center],children:[(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,v.tZ)(b.G,{css:aQ.powerUpIconBackground,children:(0,v.tZ)(x.iconComponent,{size:20})}),(0,v.BX)(b.G,{css:[Z.l0.flex.column],children:[(0,v.BX)(eo.xv,{multiline:!1,children:[x.name," activated"]}),(0,v.BX)(b.G,{css:Z.l0.rowWithGap(8),children:[(0,v.tZ)(eo.xv,{variant:"small",color:"dimmer",multiline:!1,children:C.provisionDescription}),g?null:(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(4)],children:[(0,v.tZ)(aR,{amount:nB.z4[c.powerUpSku],includeUsd:!0,variant:"small",color:"dimmer"}),(0,v.BX)(eo.xv,{variant:"small",color:"dimmer",multiline:!1,children:["/ ",x.orderDuration]})]})]})]})]}),(0,v.tZ)(eo.xv,{multiline:!1,children:(0,v.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return u(c.powerUpCategory)},onClick:function(){return u(c.powerUpCategory)},css:[Z.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),g||p?null:(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.align.center],children:[(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,v.tZ)(b.G,{css:aQ.autoRefillIconBackground,children:(0,v.tZ)(a$.Z,{size:20})}),(0,v.BX)(b.G,{css:[Z.l0.flex.column],children:[(0,v.BX)(eo.xv,{multiline:!1,children:["Auto-Refill is"," ",(i=(r={autoRefillEnabled:y,loadingAutoRefill:p}).autoRefillEnabled,r.loadingAutoRefill?"...":i?"on":"off")]}),(0,v.tZ)(b.G,{css:Z.l0.rowWithGap(4),children:null==d?(0,v.tZ)(w.Z,{}):(0,v.BX)(v.HY,{children:[(0,v.tZ)(aR,{amount:d,includeUsd:!1,variant:"small",color:"dimmer"}),(0,v.tZ)(eo.xv,{variant:"small",color:"dimmer",multiline:!1,children:"left"})]})})]})]}),(0,v.tZ)(eo.xv,{multiline:!1,children:(0,v.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return s(c.powerUpCategory)},onClick:function(){return s(c.powerUpCategory)},css:[Z.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),p||y||g?null:(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:"Add a payment method and enable Auto-Refill to prevent your ".concat(x.name," Power Up from being disabled when you run out of Cycles.")})]})}var a1=n(2957),a2={tier:(0,ee.iv)([Z.l0.borderRadius(12),Z.l0.colWithGap(12),Z.l0.p(12)]),tierHeader:(0,ee.iv)([Z.l0.rowWithGap(8),Z.l0.flex.grow(1),Z.l0.justify.spaceBetween,Z.l0.align.baseline]),tierHeaderTitle:(0,ee.iv)(Z.l0.rowWithGap(8)),tierHeaderCost:(0,ee.iv)([Z.l0.rowWithGap(4),Z.l0.align.baseline]),tierFeatures:(0,ee.iv)(Z.l0.colWithGap(8)),tierFeature:(0,ee.iv)(Z.l0.rowWithGap(4),Z.l0.align.center),tierPicker:(0,ee.iv)([Z.l0.border({color:Z.TV.outlineDefault})])},a3=function(e){var t=e.selectedOption,n=e.onChange,r=e.disabled,i=nB.r4[t.sku].egress,o="INCLUDED_IN_SUBSCRIPTION"!==t.cost.explanation&&"NOT_SUPPORTED_FOR_TEAMS"!==t.cost.explanation;return(0,v.BX)(M.Tg,{elevated:!0,css:a2.tier,children:[(0,v.BX)(b.G,{css:a2.tierHeader,children:[(0,v.tZ)(b.G,{css:a2.tierHeaderTitle,children:(0,v.tZ)(eo.xv,{variant:"subheadBig",multiline:!1,children:"Reserved VM"})}),(0,v.tZ)(b.G,{css:Z.l0.rowWithGap(4),children:o?(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(2),Z.l0.align.center],children:[(0,v.tZ)(aT.Z,{}),(0,v.BX)(b.G,{css:[a2.tierHeaderCost],children:[(0,v.tZ)(eo.xv,{variant:"subheadDefault",multiline:!1,children:t.cost.cyclesCostRecurring}),(0,v.tZ)(eo.xv,{color:"dimmer",variant:"small",multiline:!1,children:"per day"})]})]}):null})]}),(0,v.tZ)(nS.P,{css:a2.tierPicker,initialSelectedItem:{title:nA(t.sku),sku:t.sku},items:Object.keys(nB.r4).map(function(e){return{title:nA(e),sku:e}}),onChange:function(e){return n(e.sku)},disabled:r}),(0,v.tZ)(b.G,{css:a2.tierFeatures,children:["".concat(i," GiB egress"),"Deploy to any URL, cover page optional","Configurable machine","Always on"].map(function(e,t){return(0,v.BX)(b.G,{css:a2.tierFeature,children:[(0,v.tZ)(tp.Z,{}),(0,v.tZ)(eo.xv,{multiline:!1,children:e})]},t)})})]})},a4=n(41268),a8=function(e){var t,n,r=e.context,i=e.selectedOption,o=e.currentOption,a=e.onBuyMoreCycles,l=e.onPowerUpUpdated,c=e.onPowerUpRequested,s=(0,T.Z)(),u=(0,rC.Z)().showError,d=(0,m._)((0,x.useState)(!1),2),f=d[0],h=d[1],p=aS({}).autoRefillEnabled,g=(0,m._)((0,a4.IN)({onCompleted:(t=(0,S._)(function(e){var t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:if("UserError"===(t=e.setHostingTier).__typename)return u(t.message),[2];return h(!0),[4,new Promise(function(e){return setTimeout(e,2e3)})];case 1:return n.sent(),l({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:i.sku,cyclesCostNow:i.cost.cyclesCostNow,replId:s}),[2]}})}),function(e){return t.apply(this,arguments)}),onError:function(e){c(!1),r4.Tb(e),u(e.message)}}),2),y=g[0],b=g[1].loading;if(f)return(0,v.tZ)(O.zx,{text:"Tier Purchased",colorway:"positive",loading:!0,css:{color:"".concat(Z.TV.accentPositiveStronger," !important")}});var w=(null==o?void 0:o.sku)===i.sku,C=!0;switch(i.cost.explanation){case L.Ch.IncludedInExistingOrder:case L.Ch.ActivateExistingOrder:case L.Ch.SpendCycles:case L.Ch.NeedsCycles:case L.Ch.IncludedInSubscription:C=!1}return b?(C=!0,n="Processing"):w?(C=!0,n="Current tier"):n="INCLUDED_IN_SUBSCRIPTION"===i.cost.explanation?"Activate and deploy":"NOT_SUPPORTED_FOR_TEAMS"===i.cost.explanation?"Not available for teams":"Purchase and deploy",(0,v.tZ)(O.zx,{text:n,disabled:C,loading:b,colorway:b||!C?"primary":void 0,iconRight:b?void 0:(0,v.tZ)(nk.Z,{}),onClick:function(){var e;if(c(!0),!b){if(i.cost.explanation===L.Ch.NeedsCycles){a({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:i.sku,cyclesCostNow:i.cost.cyclesCostNow,replId:s});return}y({variables:{input:{replId:s,sku:i.sku}}}),null!==(e=i.cost.cyclesCostNow)&&void 0!==e&&e&&((0,e6.j)(e6.U3.CHECKOUT_REQUESTED,{source:r,powerUpCategory:"boost"}),(0,e6.j)(e6.U3.CYCLES_USED,{powerUp:"hosting_tier",sku:i.sku,source:r}),(0,e6.j)(e6.U3.CHECKOUT_COMPLETED,{source:r,powerUpCategory:"boost",autoRefill:p}))}},css:b&&{color:"".concat(Z.TV.accentPrimaryStronger," !important")}})},a6=function(e){var t=e.context,n=e.onBuyMoreCycles,r=e.onPowerUpUpdated,i=(0,T.Z)(),o=(0,m._)((0,x.useState)("ready"),2),a=o[0],l=o[1],c=(0,m._)((0,x.useState)(null),2),s=c[0],u=c[1],d=(0,m._)((0,x.useState)(null),2),f=d[0],h=d[1],p=(0,m._)((0,x.useState)(null),2),g=p[0],y=p[1];if((0,a4.s7)({fetchPolicy:"network-only",ssr:!1,variables:{replId:i},onCompleted:function(e){if((null==e?void 0:e.repl.__typename)==="Repl"&&(null===(n=e.repl)||void 0===n?void 0:null===(t=n.powerUps)||void 0===t?void 0:t.__typename)==="ReplPowerUpTypes"&&(null===(i=e.repl)||void 0===i?void 0:null===(r=i.powerUpCosts)||void 0===r?void 0:r.__typename)==="PowerUpCostsType"){var t,n,r,i,o,a,l=null===(o=e.repl.powerUps.hostingTier)||void 0===o?void 0:o.sku,c=l||((null===(a=e.repl.owner)||void 0===a?void 0:a.__typename)==="Team"?L.DZ.HostingTierE2Micro:L.DZ.HostingTierE2Small),s=nG(e.repl.powerUpCosts,l),d=nG(e.repl.powerUpCosts,c);s&&l&&h({sku:l,cost:s}),d&&u({sku:c,cost:d}),y(e.repl.powerUpCosts)}}}).loading||!s||!g)return(0,v.tZ)(b.G,{css:[Z.l0.flex.row,Z.l0.justify.center],children:(0,v.tZ)(w.Z,{})});var C=null;if("INCLUDED_IN_SUBSCRIPTION"===s.cost.explanation)C="Included in your subscription plan.";else if(s.cost.cyclesCostRecurring>0){var _=(0,ap.$E)(s.cost.cyclesCostRecurring),S=(0,ap.$E)(s.cost.cyclesCostRecurring*nE.Dj);C="".concat(_,"/day (Approximately ").concat(S,"/month).")}var k=null;switch(s.cost.explanation){case L.Ch.IncludedInExistingOrder:break;case L.Ch.NeedsCycles:k="You'll be able to purchase Cycles while activating.";break;case L.Ch.SpendCycles:k="Today's charge will be ".concat(s.cost.cyclesCostNow," Cycles.")}return(0,v.BX)(b.G,{css:Z.l0.colWithGap(16),children:[(0,v.tZ)(a3,{selectedOption:s,onChange:function(e){var t=nG(g,e);t&&u({sku:e,cost:t})},disabled:"requesting"===a}),(0,v.tZ)(b.G,{css:[Z.l0.colWithGap(12)],children:(0,v.BX)(b.G,{css:[Z.l0.colWithGap(8)],children:[(0,v.BX)(b.G,{css:[Z.l0.minHeight(50),Z.l0.colWithGap(16),Z.l0.justify.end,Z.l0.mb(16)],children:[null!=C?(0,v.tZ)(eo.xv,{css:[Z.l0.textAlign.center],multiline:!1,children:C}):null,null!=k?(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.justify.center,Z.l0.color.foregroundDimmer],children:[(0,v.tZ)(eo.xv,{multiline:!1,children:k}),(0,v.tZ)(nd.u,{tooltip:"Upgrades and downgrades are immediate. Upgrading within a 24 hour period following a downgrade will incur a charge.",children:(0,v.tZ)(nf.Z,{})})]}):null]}),(0,v.tZ)(a8,{context:t,selectedOption:s,currentOption:f,onBuyMoreCycles:n,onPowerUpUpdated:r,onPowerUpRequested:function(e){return l(e?"requesting":"ready")}})]})})]})},a5=n(53077),a9=n(53021),a7="workspace_info_modal";function le(e){var t=e.powerUpCategory,n=e.goToCheckout,r=e.goToCheckoutSuccess,i=e.onRequestPowerUp,o=(0,m._)((0,x.useState)(null),2),a=o[0],l=o[1];switch(t){case"hosting_tier":return(0,v.tZ)(a6,{context:"workspace_hosting_pane",onPowerUpUpdated:r,onBuyMoreCycles:n});case"always-on":return(0,v.BX)(v.HY,{children:[(0,v.tZ)(a5.Z,{isOpen:a===a9.x.BuyCycles,onRequestClose:function(){return l(null)},uponPurchaseGoTo:"workspace",context:a7}),(0,v.tZ)(a1.Z,{onRequestBuyMore:function(){return l(a9.x.BuyCycles)},powerUp:"always-on",context:a7,onRequestPowerUp:i})]});case"gpu":return(0,v.BX)(v.HY,{children:[(0,v.tZ)(a5.Z,{isOpen:a===a9.x.BuyCycles,onRequestClose:function(){return l(null)},uponPurchaseGoTo:"workspace",context:a7}),(0,v.tZ)(a1.Z,{onRequestBuyMore:function(){return l(a9.x.BuyCycles)},powerUp:"gpu",context:a7,onRequestPowerUp:i})]});default:throw Error("Unknown power up category: ".concat(t))}}function lt(e){var t=e.title,n=e.children,r=e.goBack,i=e.canGoBack,o=e.allowBack;return(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.p(8),Z.l0.align.center],children:[(void 0===o||o)&&i?(0,v.tZ)(eX.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){return r()},dataCy:"purchase-flow-back-button",children:(0,v.tZ)(t$.Z,{})}):null,"string"==typeof t?(0,v.tZ)(eo.xv,{variant:"subheadDefault",multiline:!1,children:t}):t]}),(0,v.tZ)(b.G,{css:[Z.l0.colWithGap(8),Z.l0.p(8)],children:n})]})}function ln(e){var t=e.currentStep,n=e.goBack,r=e.canGoBack,i=e.goTo,o=e.analyticsContext,a=e.onRequestPowerUp;switch(t.step){case"power_up_details":var l=t.powerUpCategory,c=al.S0[l];return(0,v.tZ)(lt,{goBack:n,canGoBack:r,title:c.name,children:(0,v.tZ)(le,{powerUpCategory:l,goToCheckout:function(e){i({step:"checkout",product:e}),(0,e6.j)(e6.U3.CHECKOUT_REQUESTED,{source:o,powerUpCategory:l})},goToCheckoutSuccess:function(e){i({step:"checkout_success",product:e})},onRequestPowerUp:a})});case"checkout":return(0,v.tZ)(lt,{goBack:n,canGoBack:r,title:"Checkout",children:(0,v.tZ)(aq,{product:t.product,goToCheckoutSuccess:function(e){i({step:"checkout_success",product:e})},goToNewPaymentMethodForm:function(){return i({step:"new_payment_method_form"})},context:o})});case"checkout_success":return(0,v.tZ)(lt,{goBack:n,canGoBack:r,allowBack:!1,title:(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[r?(0,v.tZ)(eX.hU,{tooltipBehavior:"hidden",alt:"Back",onClick:function(){return n()},children:(0,v.tZ)(t$.Z,{})}):null,(0,v.tZ)(eo.xv,{multiline:!1,css:[Z.l0.color.accentPositiveStronger],children:"Success"}),(0,v.tZ)(tp.Z,{color:Z.TV.accentPositiveStronger})]}),children:(0,v.tZ)(a0,{product:t.product,goToCardPreferences:function(e){return i({step:"card_preferences",powerUpCategory:e})},goToPowerUpDetails:function(e){return i({step:"power_up_details",powerUpCategory:e})}})});case"card_preferences":var s=t.powerUpCategory;return(0,v.tZ)(lt,{goBack:n,canGoBack:r,title:"Card Preferences",children:(0,v.tZ)(ac.t,{goToNewPaymentMethodForm:function(){return i({step:"new_payment_method_form",powerUpCategory:s})}})});case"new_payment_method_form":var u=t.powerUpCategory;return(0,v.tZ)(lt,{goBack:n,canGoBack:r,title:"Update Payment Method",children:(0,v.tZ)(o2.q,{onSuccess:function(){return r&&n()},powerUpCategory:u,context:o})});case"not_shown":throw Error("This step should never be rendered");default:(0,nD.Z)(t)}}var lr=n(24774),li=n(83003),lo=n(92804),la=n(80888),ll=n(54368),lc=(0,I.X)({container:Z.l0.colWithGap(24),pauseAndResumeButtons:Z.l0.colWithGap(8),sectionContainer:Z.l0.colWithGap(8),sectionButton:[Z.l0.color.accentNegativeStrongest,Z.l0.transition.snappy,(0,$._)({backgroundColor:U.vb.interactiveBackground,borderColor:"transparent"},Z.wl.hover,{borderColor:"transparent"})]}),ls=function(e){var t=e.hideResume,n=e.hideSuspend,r=e.onLifecycleCommand,i=(0,C.kW)(),o=(0,C.$y)(),a=(0,m._)((0,x.useState)(!1),2),l=a[0],c=a[1],s=(0,T.Z)(),u=(0,C.FN)(s),d=(null==o?void 0:o.status)===L.Fe.Resuming,f=(null==o?void 0:o.status)===L.Fe.Suspending,h=(null==o?void 0:o.status)===L.Fe.Suspended,p=d||f||i===_.z.ProcessingLifecycleCommand||i===_.z.Deploying,g=!(void 0!==t&&t)&&u&&(h||d)&&(null==o?void 0:o.hasImageTag),y=(null==o?void 0:o.provider)===L.r4.Cron,Z=!(void 0!==n&&n)&&!h&&!d&&(f||i===_.z.Deploying||i===_.z.Ready)&&(null==o?void 0:o.hasImageTag);return(0,v.tZ)(v.HY,{children:(0,v.BX)(b.G,{css:lc.container,children:[g||Z?(0,v.BX)(b.G,{css:lc.pauseAndResumeButtons,children:[g?(0,v.BX)(v.HY,{children:[(0,v.tZ)(O.zx,{text:d?"Resuming":"Resume",onClick:function(){return r({command:L.Qc.Resume})},loading:d,disabled:p,iconLeft:d?(0,v.tZ)(w.Z,{}):(0,v.tZ)(la.Z,{})}),(0,v.tZ)(eo.xv,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,Z?(0,v.BX)(v.HY,{children:[(0,v.tZ)(O.zx,{text:"Pause",onClick:function(){return r({command:L.Qc.Suspend})},loading:f,disabled:p||y,iconLeft:f?(0,v.tZ)(w.Z,{}):(0,v.tZ)(lo.Z,{})}),(0,v.tZ)(eo.xv,{color:"dimmer",children:y?"Coming soon for Scheduled Jobs.":"Your deployment billing will continue, but all users will lose access to your app"})]}):null]}):null,(0,v.tZ)(lu,{setIsDestroying:c,onLifecycleCommand:r}),(0,v.tZ)(ld,{isDestroying:l,setIsDestroying:c,onLifecycleCommand:r})]})})};function lu(e){var t=e.setIsDestroying,n=e.onLifecycleCommand,r=(0,m._)((0,x.useState)(!1),2),i=r[0],o=r[1];return(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:lc.sectionContainer,children:[(0,v.tZ)(O.zx,{text:"Change deployment type",onClick:function(){return o(!0)},iconLeft:(0,v.tZ)(ll.Z,{})}),(0,v.tZ)(eo.xv,{color:"dimmer",children:"To change your deployment type, you will need to shut down and create a new deployment."})]}),(0,v.tZ)(n2.u,{isOpen:i,onRequestClose:function(){return o(!1)},children:(0,v.tZ)(li.Z,{confirmLabel:"Yes, delete my deployment",title:"Change Deployment Type",isDestructive:!0,onConfirm:function(){t(!0),o(!1),n({command:L.Qc.Destroy})},onCancel:function(){return o(!1)},children:"To change your deployment type, you will need to shut down and create a new deployment. This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}function ld(e){var t=e.isDestroying,n=e.setIsDestroying,r=e.onLifecycleCommand,i=(0,m._)((0,x.useState)(!1),2),o=i[0],a=i[1];return(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:lc.sectionContainer,children:[(0,v.tZ)(O.zx,{text:"Shut down",colorway:"negative",variant:"outlined",css:lc.sectionButton,onClick:function(){return a(!0)},disabled:t,iconLeft:(0,v.tZ)(ag.Z,{})}),(0,v.tZ)(eo.xv,{color:"dimmer",children:"Your deployment billing will be canceled, and your deployed app will cease to exist"})]}),(0,v.tZ)(n2.u,{isOpen:o,onRequestClose:function(){return a(!1)},children:(0,v.tZ)(li.Z,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){n(!0),a(!1),r({command:L.Qc.Destroy})},onCancel:function(){return a(!1)},children:"This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}var lf=(0,I.X)({type:[Z.l0.borderRadius(8),Z.l0.p(8)],hostingTierFlow:Z.l0.colWithGap(8),manageReserved:Z.l0.colWithGap(16),manageReservedHeader:[Z.l0.rowWithGap(8),Z.l0.align.center],scheduledJobsConfiguration:[Z.l0.colWithGap(4)]});function lh(e){var t,n,r,i=e.replId,o=e.initialState,a=e.fs,l=e.dotReplit,c=e.ports,s=e.onBack,u=e.onDeploy,d=e.onError,f=e.onLifecycleCommand,h=e.openNetworkingPane,p=(0,m._)((0,x.useState)(o),2),g=p[0],y=p[1],w=(t=(0,V._)({},at,{variables:{replId:i},onError:function(e){return d(e.message)}}),es.a(ar,t)),Z=w.data,C=w.loading,_=w.refetch,S=(null==Z?void 0:Z.repl.__typename)==="Repl"?Z.repl:null,k=S?(0,rS.Jw)({replSlug:S.slug,username:null===(n=S.owner)||void 0===n?void 0:n.username}):"",E=(null==S?void 0:S.powerUps.__typename)==="ReplPowerUpTypes"?S.powerUps.hostingTier:null,T=(0,nN.P5)({controlName:nT.dD,logFlagToAnalytics:!1}),I=(0,nN.P5)({controlName:nT.dA,logFlagToAnalytics:!1});if(C)return(0,v.tZ)(nv,{loading:!0});if(!S)return null;var D=(null==S?void 0:null===(r=S.owner)||void 0===r?void 0:r.__typename)==="Team";return g.type===L.r4.Static?(0,v.BX)(v.HY,{children:[(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(eX.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){return s()},children:(0,v.tZ)(t$.Z,{})})}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(M.Tg,{css:lf.type,elevated:!0,children:(0,v.tZ)(nq,{label:"Type",fullWidth:!0,children:(0,v.tZ)(nj,{name:nP[g.type]})})})}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(im,{initialSubdomain:k,deploymentId:null,provider:g.type,onError:d,onCancel:function(){return s()},onDeploy:u,fs:a,dotReplit:l,ports:c,openNetworkingPane:h})})]}):g.type===L.r4.Gce?E&&g.didCheckout?g.manage?(0,v.tZ)(K,{maxWidth:!0,children:(0,v.BX)(b.G,{css:lf.manageReserved,children:[(0,v.BX)(b.G,{css:lf.manageReservedHeader,children:[(0,v.tZ)(eX.hU,{alt:"Back",onClick:function(){return y({type:g.type,didCheckout:g.didCheckout,manage:!1})},children:(0,v.tZ)(t$.Z,{})}),(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:"To upgrade hosting tier, please deploy your repl first."})]}),(0,v.tZ)(ls,{hideResume:!0,hideSuspend:!0,onLifecycleCommand:f})]})}):(0,v.BX)(v.HY,{children:[(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(M.Tg,{css:lf.type,elevated:!0,children:(0,v.tZ)(nq,{label:"Type",fullWidth:!0,children:(0,v.tZ)(nj,{name:nP[g.type],sku:nA(E.sku),canManage:!0,onManageClick:function(){y({type:g.type,didCheckout:g.didCheckout,manage:!0})}})})})}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(im,{initialSubdomain:k,deploymentId:null,provider:g.type,onError:d,onCancel:function(){return s()},onDeploy:u,fs:a,dotReplit:l,ports:c,openNetworkingPane:h})})]}):!E&&T?(0,v.BX)(v.HY,{children:[(0,v.tZ)(nI,{isTeamRepl:D,onBack:s,onError:d,onChange:function(e){y({type:L.r4.Gce,machine:e})}}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(im,{initialSubdomain:k,deploymentId:null,provider:g.type,machine:g.machine,onError:d,onCancel:s,onDeploy:u,fs:a,dotReplit:l,ports:c,openNetworkingPane:h})}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.BX)(eo.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,v.tZ)("a",{href:nE.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(lp,{onBack:s,onCheckout:function(){y({type:g.type,didCheckout:!0,manage:!1}),_()}})}):g.type===L.r4.Cron?I?(0,v.BX)(v.HY,{children:[(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(nw,{onBack:s})}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.BX)(b.G,{css:lf.scheduledJobsConfiguration,children:[(0,v.tZ)(eo.xv,{variant:"subheadBig",children:"Scheduled Job configuration"}),(0,v.tZ)(eo.xv,{variant:"small",color:"dimmer",children:"Scheduled deployments run at a specified time and frequency configured by you. During executions they spin up an on demand machine to run your code. You are billed for the total number of compute units used across all machines plus $0.10/month per scheduled deployment scheduler."})]})}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(np,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app.",detail:"More machine configurations coming soon.",children:(0,v.tZ)(M.Tg,{css:lf.type,elevated:!0,children:(0,v.tZ)(nj,{name:"1 vCPU / 2 GiB RAM",sku:"$0.000028/sec"})})})}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(im,{initialSubdomain:k,deploymentId:null,provider:g.type,onError:d,onCancel:function(){return s()},onDeploy:u,fs:a,dotReplit:l,ports:c,openNetworkingPane:h})}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.BX)(eo.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,v.tZ)("a",{href:nE.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):null:g.machine?(0,v.BX)(v.HY,{children:[(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(eX.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){return y({type:L.r4.CloudRun,machine:null})},children:(0,v.tZ)(t$.Z,{})})}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(M.Tg,{css:lf.type,elevated:!0,children:(0,v.tZ)(nq,{label:"Type",fullWidth:!0,children:(0,v.tZ)(nj,{name:nP[g.type],sku:"".concat(g.machine.configurationLabel," / ").concat(g.machine.maxInstances," Max"),canManage:!0,onManageClick:function(){y({type:L.r4.CloudRun,machine:null})}})})})}),(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(im,{initialSubdomain:k,deploymentId:null,provider:g.type,machine:g.machine,onError:d,onCancel:function(){return y({type:L.r4.CloudRun})},onDeploy:u,fs:a,dotReplit:l,ports:c,openNetworkingPane:h})})]}):(0,v.tZ)(K,{maxWidth:!0,children:(0,v.tZ)(oq,{onBack:s,onError:d,onConfirm:function(e){y({type:L.r4.CloudRun,machine:e})}})})}var lp=function(e){var t=e.onBack,n=e.onCheckout,r=(0,T.Z)(),i=(0,C.Sl)(r),o=i.hostingTier,a=i.refetch,l=(0,lr.P)({step:"power_up_details",powerUpCategory:"hosting_tier"}),c=l.currentStep.step;return(0,x.useEffect)(function(){"checkout_success"===c&&a()},[c,a]),(0,v.BX)(b.G,{css:lf.hostingTierFlow,children:[(0,v.tZ)(ln,{currentStep:l.currentStep,canGoBack:l.canGoBack||"power_up_details"===c,goTo:l.goTo,analyticsContext:"workspace_hosting_pane",goBack:function(){if("checkout_success"===l.currentStep.step){n();return}if("power_up_details"!==l.currentStep.step){l.goBack();return}t()}}),o?(0,v.tZ)(O.zx,{colorway:"primary",onClick:n,text:"Deploy your project"}):null]})},lm=Z.nC.min(600),lv={order:"--provider-order"},lg={order:"var(".concat(lv.order,")")},ly=(0,ee.iv)([Z.l0.width("100%"),Z.l0.maxWidth(340),(0,$._)({},lm,{order:lg.order})]),lb=(0,ee.iv)([Z.l0.reset.button,Z.l0.overflow("hidden"),Z.l0.position.relative,Z.l0.focusRing,Z.l0.borderRadius(),Z.l0.width("100%")]),lw=(0,I.X)({self:[ly,{"&::after":{content:"none"}}],selfLoading:[ly,ei.p.foregroundPulse(),Z.l0.border({color:Z.TV.backgroundHighest})],button:[lb,U.gU.filledAndOutlined,Z.l0.border({color:Z.TV.outlineDimmer})],buttonActive:[lb,Z.l0.cursor.pointer,Z.l0.backgroundColor.accentPrimaryDimmest,Z.l0.border({color:Z.TV.accentPrimaryStronger})],content:[Z.l0.p(8),Z.l0.colWithGap(4),(0,$._)({},lm,Z.l0.py(12))],contentRecommended:[Z.l0.p(8),Z.l0.colWithGap(4),(0,$._)({},lm,{paddingTop:12,paddingBottom:20})],recommended:[Z.l0.py(4),Z.l0.backgroundColor.backgroundHighest],recommendedActive:[Z.l0.py(4),Z.l0.backgroundColor.accentPrimaryDimmer],icon:[Z.l0.display.none,Z.l0.color.foregroundDimmer,Z.l0.center,(0,$._)({},lm,Z.l0.display.flex)],iconActive:[Z.l0.display.none,Z.l0.color.accentPrimaryStrongest,Z.l0.center,(0,$._)({},lm,Z.l0.display.flex)],tiersTitle:[Z.l0.rowWithGap(8),Z.l0.align.center],title:[Z.l0.rowWithGap(4),Z.l0.center]});function lZ(e){var t,n=e.loading,r=e.active,i=e.provider,o=e.onClick,a=e.title,l=e.description,c=e.recommended,s=e.index,u=(t={},(0,$._)(t,L.r4.CloudRun,(0,v.tZ)(o4.Z,{size:32})),(0,$._)(t,L.r4.Gce,(0,v.tZ)(oX.Z,{size:32})),(0,$._)(t,L.r4.Static,(0,v.tZ)(o6.Z,{size:32})),(0,$._)(t,L.r4.Cron,(0,v.tZ)(tm.Z,{size:32})),t)[i];return(0,v.tZ)("span",{css:n?lw.selfLoading:lw.self,children:(0,v.BX)("button",{css:r?lw.buttonActive:lw.button,onClick:function(){return o(i)},disabled:n,style:(0,$._)({},lv.order,s),children:[c?(0,v.tZ)(b.G,{css:r?lw.recommendedActive:lw.recommended,children:(0,v.tZ)(eo.xv,{variant:"small",children:"Recommended"})}):null,(0,v.BX)(b.G,{css:c?lw.contentRecommended:lw.content,children:[(0,v.tZ)(b.G,{css:r?lw.iconActive:lw.icon,children:u}),(0,v.BX)(b.G,{children:[(0,v.tZ)(b.G,{css:lw.title,children:(0,v.tZ)(eo.xv,{variant:"subheadDefault",multiline:!1,children:a})}),(0,v.tZ)(eo.xv,{multiline:!1,variant:"small",children:l})]})]})]})})}var lx=(0,I.X)({container:[Z.l0.colWithGap(12),Z.l0.maxWidth(420),{marginLeft:"auto",marginRight:"auto"}],item:[Z.l0.align.center,{display:"grid",gridTemplateColumns:"56px auto",gap:20}],text:[Z.l0.flex.growAndShrink(1),Z.l0.textAlign.left]});function lC(e){var t=e.header,n=e.info;return(0,v.BX)(b.G,{css:lx.container,children:[(0,v.tZ)(eo.xv,{variant:"subheadDefault",children:t}),n.map(function(e,t){return(0,v.BX)(b.G,{css:lx.item,children:[e.icon,(0,v.tZ)(eo.xv,{css:lx.text,children:e.text})]},t)})]})}var l_=[L.r4.Gce,L.r4.CloudRun,L.r4.Static,L.r4.Cron],lS=(0,I.X)({container:[Z.l0.colWithGap(32),Z.l0.py(32),Z.l0.textAlign.center,q.Qw.maxWidth],title:[Z.l0.colWithGap(4),Z.l0.width("100%"),Z.l0.maxWidth(400),{marginLeft:"auto",marginRight:"auto"}],body:Z.l0.colWithGap(16),providers:[Z.l0.flex.column,Z.l0.align.center,(0,$._)({gap:8},lm,[Z.l0.flex.row,Z.l0.align.center,{gap:12}])],providerDetails:Z.l0.colWithGap(16),cta:[Z.l0.width("100%"),Z.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaGroup:Z.l0.colWithGap(8),secondaryCta:[Z.l0.width("100%"),Z.l0.maxWidth(320)],ctaContainer:[Z.l0.colWithGap(8),Z.l0.align.center],ctaStatusBanner:[Z.l0.textAlign.left],oldCta:[Z.l0.px(8),Z.l0.colWithGap(16)],payment:[Z.l0.p(16),Z.l0.borderRadius("container"),Z.l0.textAlign.left,Z.l0.shadow(2)],budgetContainer:[Z.l0.colWithGap(8),Z.l0.border(),Z.l0.borderRadius(),Z.l0.p(8)],disabledBanner:[Z.l0.py(6),{alignSelf:"center"}]}),lk=function(e){var t,n,r,i,o,a,l=e.replId,c=e.onError,s=e.onDeploy,u=e.onLifecycleCommand,d=e.onViewAction,f=e.initialSelectedProvider,h=(0,C.XZ)(),p=(0,C.v5)(),g=(0,C.t7)(),y=(0,m._)((0,x.useState)(void 0),2),w=y[0],_=y[1],k=(0,m._)((0,x.useState)(void 0),2),T=k[0],R=k[1],I=(0,m._)((0,x.useState)(!1),2),D=I[0],B=I[1],G=(0,m._)((0,x.useState)(!1),2),A=G[0],P=G[1],N=(0,m._)((0,x.useState)(null!=f?f:null),2),O=N[0],U=N[1],X=(0,C.BU)(),W=X.getDeployabilityByProvider,H=X.usageBasedBillingCapabilities,z=X.refetch;(0,x.useEffect)(function(){e5({context:"intro"})},[]);var j=(t=(0,V._)({},ao,{variables:{id:l},onError:function(e){return c(e.message)}}),es.a(aa,t)),q=j.loading,J=j.data,Y=(0,m._)((0,x.useState)(!1),2),Q=Y[0],ee=Y[1],et=(null==J?void 0:J.repl.__typename)==="Repl"&&(null===(r=J.repl.owner)||void 0===r?void 0:r.__typename)==="Team",en=(null==J?void 0:J.repl.__typename)==="Repl"&&(null==J?void 0:null===(i=J.repl.owner)||void 0===i?void 0:i.id)&&(0,o9.xm)(null==J?void 0:null===(o=J.repl.owner)||void 0===o?void 0:o.id),er=(0,nN.P5)({controlName:nT.dA,logFlagToAnalytics:!1});(0,x.useEffect)(function(){(0,S._)(function(){var e,t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:if(q)return[2];if(et&&!en)return _(L.r4.Gce),R(L.r4.Gce),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,ro.$f)(p)];case 2:if(null===(e=n.sent()).appType)return _(L.r4.CloudRun),R(L.r4.CloudRun),[2];if((t=(0,oQ.oU)(e.appType))===L.r4.Goval||t===L.r4.Extension)return c("Did not recognize template deployment provider"),[2];return _(t),R(t),[3,4];case 3:return n.sent(),c("Something went wrong"),[3,4];case 4:return[2]}})})()},[c,p,q,et,en]);var ei=(0,x.useCallback)((0,S._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return ee(!0),[4,z()];case 1:return e.sent(),ee(!1),[2]}})}),[z,ee]);if(O)return(0,v.tZ)(lh,{replId:l,initialState:O?{type:O}:{type:L.r4.Gce,didCheckout:!0},fs:h,dotReplit:p,ports:g,onDeploy:s,onBack:function(){return U(null)},onError:c,onLifecycleCommand:u,openNetworkingPane:function(){d({type:F.a.OpenPane,payload:{type:"networking"}})}});var ea=W(w),el=ea.isDeployable,ec=ea.explanation,eu=ea.isDeployableByProTeam,ed=q||Q||void 0===w,ef=(a={title:"Deploy to production",subtitle:"Deploy a stable, public version of your project, unaffected by the changes you make in the workspace."},(0,$._)(a,L.r4.Gce,{display:!0,title:"Reserved VM",subtitle:"Always On Servers",header:"Reserved VMs are for long-running jobs and apps.",info:[{text:"Reserved VMs ensure high uptime, minimizing disruptions for apps requiring persistent session data.",icon:(0,v.tZ)(o0.lV,{})},{text:(n=(0,m._)((0,nT.gr)("e2-micro"),1)[0],"Reserved VMs are billed hourly starting at $".concat(n,"/hour.")),icon:(0,v.tZ)(o0.G8,{})},{text:"Suitable for bots, stateful APIs, webscraping, and long-running jobs.",icon:(0,v.tZ)(o0.KU,{})}]}),(0,$._)(a,L.r4.CloudRun,{display:!0,title:"Autoscale",subtitle:"Meet demand exactly",header:"Autoscale is the best choice for most projects",info:[{text:"Automatically scales from zero to any level of demand, making it inexpensive for most apps and effortless when you go viral.",icon:(0,v.tZ)(o0.Qm,{})},{text:"Compute units are billed at $".concat(iE.m0," per compute unit."),icon:(0,v.tZ)(o0.fG,{})},{text:"Suitable for web apps and stateless APIs.",icon:(0,v.tZ)(o0.KU,{})}]}),(0,$._)(a,L.r4.Static,{display:!0,title:"Static",subtitle:"Easy client-side apps",header:"Share client-side apps fast",info:[{text:"You only pay for outbound data transfer (included in Replit plans). $0.10/GiB otherwise.",icon:(0,v.tZ)(o0.Lv,{})},{text:"Fast deploy times allow you to move quickly on your production sites.",icon:(0,v.tZ)(o0.lt,{})},{text:"Suitable for HTML sites and static content.",icon:(0,v.tZ)(o0.KU,{})}]}),(0,$._)(a,L.r4.Cron,{display:er,title:"Scheduled",subtitle:"Time-based job scheduler",header:"The easiest way to schedule for your apps to run",info:[{text:"Scheduled deployments run at a specified time and frequency configured by you.",icon:(0,v.tZ)(o0.lt,{})},{text:"Usage-based pricing. Each scheduled job is billed at $0.00000125 per compute unit + $0.10 per month for the scheduler.",icon:(0,v.tZ)(o0.fG,{})},{text:"Suitable for internal tools, one-off tasks, and Cron jobs.",icon:(0,v.tZ)(o0.KU,{})}]}),a);return(0,v.BX)(K,{children:[(0,v.tZ)(n2.u,{isOpen:A,onRequestClose:function(){return P(!1)},children:(0,v.tZ)(o$.Z,{onRequestClose:function(){return P(!1)}})}),(0,v.BX)(b.G,{css:lS.container,children:[(0,v.BX)(b.G,{css:lS.title,children:[(0,v.tZ)(eo.xv,{variant:"subheadBig",children:ef.title}),(0,v.tZ)(eo.xv,{color:"dimmer",children:ef.subtitle}),(0,v.tZ)(eo.xv,{css:Z.l0.textAlign.center,children:(0,v.tZ)("a",{href:"https://docs.replit.com/category/deployments",target:"_blank",rel:"noopener",children:"Learn more"})})]}),(0,v.BX)(b.G,{css:lS.body,children:[(0,v.tZ)(b.G,{css:lS.providers,children:l_.map(function(e,t){if(!ef[e].display)return null;var n=ef[e],r=n.title,i=n.subtitle;return(0,v.tZ)(lZ,{provider:e,loading:ed,active:w===e,onClick:function(e){_(e),B(!1)},title:r,description:i,recommended:T===e,index:e===T&&0===t?1.5:e===T&&2===t?.5:t},e)})}),(0,v.BX)(b.G,{css:lS.ctaGroup,children:[(0,v.tZ)(lE,{loading:ed,isDeployable:el,isDeployableExplanation:ec,ubbExplanation:null==H?void 0:H.explanation,hasPaymentMethod:null==H?void 0:H.hasPaymentMethod,isDeployableByProTeam:eu,handleOnProviderContinue:function(){w&&U(w)},refetchUbbCapabilitiesQueryData:ei,setShowPaymentMethodForm:function(){return B(!0)},showPaymentMethodForm:D,setShowSupportForm:function(){return P(!0)}}),D?(0,v.tZ)(M.Tg,{elevated:!0,css:lS.payment,children:(0,v.tZ)(o2.q,{onSuccess:(0,S._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return B(!1),[4,ei()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,v.tZ)(b.G,{css:lS.providerDetails,children:w?(0,v.tZ)(lC,{header:ef[w].header,info:ef[w].info}):null})]})]})};function lE(e){var t=e.isDeployable,n=e.isDeployableExplanation,r=e.isDeployableByProTeam,i=e.loading,o=e.ubbExplanation,a=e.hasPaymentMethod,l=e.handleOnProviderContinue,c=e.refetchUbbCapabilitiesQueryData,s=e.setShowPaymentMethodForm,u=e.showPaymentMethodForm,d=e.setShowSupportForm,f=(0,nY.sG)();return t?r?(0,v.BX)(v.HY,{children:[(0,v.tZ)(O.zx,{colorway:"primary",onClick:l,text:"Included in your subscription",loading:i,css:lS.cta}),(0,v.tZ)(eo.xv,{color:"dimmer",children:n})]}):o===L.Fp.NeedsSubscription||o===L.Fp.NeedsSubscriptionOrPaymentMethod?f?(0,v.tZ)(R.E,{text:"You need a subscription to deploy. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,v.tZ)(N.Z,{}),css:lS.ctaStatusBanner}):(0,v.BX)(b.G,{css:lS.ctaContainer,children:[(0,v.tZ)(o5.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:lS.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:c}),(0,v.tZ)(O.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:lS.cta,disabled:u,loading:i,iconLeft:(0,v.tZ)(o8.Z,{}),onClick:function(){return s()}})]}):o===L.Fp.NeedsSmsVerification?(0,v.tZ)(oK.Z,{context:L.jv.Deployments,onSuccess:c}):o===L.Fp.NeedsPaymentMethod?f?(0,v.tZ)(R.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,v.tZ)(N.Z,{}),css:lS.ctaStatusBanner}):(0,v.tZ)(O.zx,{colorway:"primary",text:"Add a payment method",css:lS.cta,disabled:u,loading:i,iconLeft:(0,v.tZ)(o8.Z,{}),onClick:function(){return s()}}):o===L.Fp.NeedsUnbanning?(0,v.tZ)(o3.u,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",icon:(0,v.tZ)(N.Z,{}),css:lS.ctaStatusBanner,onClick:function(){return d()}}):o===L.Fp.InsufficientBudget?(0,v.BX)(v.HY,{children:[(0,v.tZ)(R.E,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,v.tZ)(N.Z,{}),css:lS.ctaStatusBanner}),(0,v.tZ)(b.G,{css:lS.budgetContainer,children:(0,v.tZ)(o1.L,{onUpdateSuccess:c})})]}):(0,v.BX)(v.HY,{children:[(0,v.tZ)(O.zx,{colorway:"primary",onClick:l,text:"Set up your deployment",loading:i,css:lS.cta}),!1===a?(0,v.tZ)(o3.u,{text:"Add a payment method to avoid downtime",colorway:"warning",icon:(0,v.tZ)(N.Z,{}),css:lS.ctaStatusBanner,onClick:function(){return f?null:s()}}):null]}):(0,v.tZ)(v.HY,{children:(0,v.tZ)(R.E,{text:n,colorway:"grey",css:lS.disabledBanner})})}var lT=n(47357),lR=n(58474),lI=n(24800);function lD(){var e=(0,el._)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n    level\n    isFromReplit\n    deploymentId\n    executionId\n  }\n"]);return lD=function(){return e},e}function lB(){var e=(0,el._)(["\n  query HostingDeploymentLogs2(\n    $replId: String!\n    $deploymentId: String!\n    $executionId: String\n    $start: DateTime\n    $end: DateTime\n    $message: String\n    $level: LogLevel\n    $limit: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(\n          deploymentId: $deploymentId\n          executionId: $executionId\n          start: $start\n          end: $end\n          message: $message\n          level: $level\n          limit: $limit\n        ) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return lB=function(){return e},e}function lG(){var e=(0,el._)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ...ReplLogLine2\n    }\n  }\n  ","\n"]);return lG=function(){return e},e}var lA={},lP=(0,ec.Ps)(lD()),lN=(0,ec.Ps)(lB(),lP),lL=(0,ec.Ps)(lG(),lP),lO=function(){return(0,nN.P5)({controlName:"flag-spirit-evidence"})},lU=(0,x.createContext)(null),lM=function(){var e=(0,x.useContext)(lU);if(!e)throw Error("Expected log context in context");return e},lX=function(e){var t,n,r=e.deploymentId,i=e.replId,o=e.executionId,a=(0,m._)((0,x.useState)(null),2),l=a[0],c=a[1],s=(0,m._)((0,x.useState)([]),2),u=s[0],d=s[1],f=(0,m._)((0,x.useState)(),2),h=f[0],p=f[1],v=(0,m._)((0,x.useState)({message:"",start:null,end:null,level:null}),2),g=v[0],y=v[1],b=(0,x.useCallback)(function(){return y({message:"",start:null,end:null,level:null})},[]),w=!!(g.message||g.level||g.start||g.end),Z=lO(),C=(0,m._)((0,x.useState)(Z),2),_=C[0],T=C[1],R=(0,m._)((0,x.useState)(Z),2),I=R[0],D=R[1],B=(t={ssr:!1,fetchPolicy:"network-only",variables:{deploymentId:r,replId:i,executionId:o,limit:Z?100:void 0,level:g.level,message:g.message},onError:function(){p("Something went wrong")},onCompleted:function(e){if("hostingDeploymentLogs"in e.repl){if("ReplLogs"===e.repl.hostingDeploymentLogs.__typename){p(void 0);var t=e.repl.hostingDeploymentLogs.result;d((0,k._)(t).reverse());var n=new Date(t[0].timestamp);n.setSeconds(n.getSeconds()+1),c(n.toISOString())}else p(e.repl.hostingDeploymentLogs.message)}}},n=(0,V._)({},lA,t),es.a(lN,n)),G=B.data,A=B.loading,P=B.fetchMore,N=B.subscribeToMore,L=B.variables;(0,x.useEffect)(function(){c(null)},[g,r,i,o]),(0,x.useEffect)(function(){if(l&&G&&!h)return N({document:lL,variables:{input:(0,z._)((0,V._)({deploymentId:r,executionId:o},g),{start:g.end?g.start:l,level:g.level||void 0})},updateQuery:function(e,t){var n=t.subscriptionData;return(0,r_.Uy)(e,function(e){if(!("hostingDeploymentLogs"in e.repl))return e;if("ReplLogs"===e.repl.hostingDeploymentLogs.__typename){var t=n.data.hostingDeploymentLogUpdates;e.repl.hostingDeploymentLogs.result.unshift(t),d(function(e){return(0,k._)(e).concat([t])}),p(void 0)}else p(e.repl.hostingDeploymentLogs.message);return e})}})},[N,r,o,A,g,l,h,G]);var O=(0,x.useRef)(null),U=(0,x.useRef)(!1),M=(0,x.useRef)(!1),X=(0,x.useCallback)((0,S._)(function(){var e,t,n,r;return(0,E.Jh)(this,function(i){switch(i.label){case 0:if(e=O.current?Math.abs(O.current.getTime()-Date.now()):0,A||O.current&&e<500||M.current||U.current)return[2];return(t=new Date(u[0].timestamp)).setSeconds(t.getSeconds()-1),U.current=!0,[4,P({variables:(0,z._)((0,V._)({},L),{end:t.toISOString()})})];case 1:return n=i.sent().data,U.current=!1,"hostingDeploymentLogs"in n.repl&&"ReplLogs"===n.repl.hostingDeploymentLogs.__typename&&(O.current=new Date,0===n.repl.hostingDeploymentLogs.result.length?M.current=!0:(r=(0,k._)(n.repl.hostingDeploymentLogs.result).reverse(),d(function(e){return(0,k._)(r).concat((0,k._)(e))}))),[2]}})}),[P,A,u,L]);return{logs:u,loading:A,error:h,fetchPage:X,isLive:_,setIsLive:T,isExpanded:I,setIsExpanded:D,filter:g,setFilter:y,clearFilter:b,hasFilter:w,deploymentId:r}},lF=n(12202),lW=(0,ee.iv)([U.gU.listItem,Z.l0.transition.none,Z.l0.reset.button,Z.l0.flex.row,Z.l0.align.start,Z.l0.font.code,Z.l0.fontSize(12),Z.l0.textAlign.left,Z.l0.position.absolute,Z.l0.top(0),Z.l0.left(0),Z.l0.width("100%"),Z.l0.color.foregroundDefault,Z.l0.border({color:Z.TV.outlineDimmest,direction:"bottom"}),{"&:hover .copy":{display:"block"},"&:active":{boxShadow:"0 -1px 0 0 "+Z.TV.accentPrimaryDefault}},Z.l0.highRes({borderWidth:.5,"&:active":{boxShadow:"0 -0.5px 0 0 "+Z.TV.accentPrimaryDefault}})]),lH=(0,ee.iv)([Z.l0.p(6),Z.l0.color.foregroundDimmest,Z.l0.truncate,{userSelect:"none"}]),lV=(0,I.X)({root:lW,rootError:[lW,Z.l0.colorMixBg(Z.TV.accentNegativeDimmest,"transparent"),{borderBottomColor:Z.TV.accentNegativeDimmest,boxShadow:"0 -1px 0 0 "+Z.TV.accentNegativeDimmest,"&:hover":{backgroundColor:"".concat(Z.TV.accentNegativeDimmest," !important")},"&:active":{boxShadow:"0 -1px 0 0 "+Z.TV.accentPrimaryDefault}},Z.l0.highRes({boxShadow:"0 -0.5px 0 0 "+Z.TV.accentNegativeDimmest,"&:active":{boxShadow:"0 -0.5px 0 0 "+Z.TV.accentPrimaryDefault}})],primaryCell:[Z.l0.pl(6),Z.l0.py(6),Z.l0.pr(4),Z.l0.flex.growAndShrink(1),Z.l0.position.relative,Z.l0.minHeight(26),{cursor:"pointer"}],secondaryCell:lH,secondaryCellError:[lH,Z.l0.color.accentNegativeStrongest],copyColumn:[{display:"none"}],copyButton:[{backgroundColor:"transparent !important",color:"inherit",":hover":{backgroundColor:"transparent"}}],truncated:[Z.l0.flex.growAndShrink(1),Z.l0.truncate]}),lz=(0,x.memo)(function(e){var t=e.log,n=e.y,r=e.height,i=e.resizeRef,o=e.index,a=e.isScrolling,l=e.columns,c=lO(),s=(0,m._)((0,x.useState)(!1),2),u=s[0],d=s[1],f=(0,x.useRef)({x:0,y:0}),h=(0,x.useCallback)(function(e){f.current={x:e.clientX,y:e.clientY}},[]),p=c&&t.level===L.in.Error;return(0,v.BX)("div",{tabIndex:0,role:"button",title:t.line,css:p?lV.rootError:lV.root,style:{height:r,transform:"translateY(".concat(n,"px)")},onClick:function(e){var t=f.current;e.clientY===t.y&&e.clientX===t.x&&d(function(e){return!e})},onMouseDown:h,onKeyDown:function(e){(" "===e.key||"Enter"===e.key)&&d(function(e){return!e})},children:[l.map(function(e,n){var r=n===l.length-1,a=p?lV.secondaryCellError:lV.secondaryCell;r&&(a=lV.primaryCell);var c=e.renderCell(t);return(0,v.tZ)(b.G,{css:a,style:{width:e.width},innerRef:r?i:void 0,"data-index":o,children:r?(0,v.tZ)(b.G,{css:!u&&lV.truncated,children:c}):c},e.key)}),(0,v.tZ)("span",{css:lV.copyColumn,className:"copy",children:!a&&(0,v.tZ)(lF.m,{textToCopy:t.line,tooltipDisable:!0,css:lV.copyButton})})]})}),lj=n(63123),lq=function(e){var t=e.scrollRef,n=(0,x.useRef)(!1);return(0,lI.q)(function(){var e=t.current;e&&setTimeout(function(){e.scrollTo({top:e.scrollHeight,behavior:"instant"}),n.current=!0},0)}),{didInitialScroll:n}},lJ=function(e){var t,n=e.didInitialScroll,r=e.itemHeight,i=lM(),o=i.fetchPage,a=i.setIsLive,l=lO(),c=(0,m._)((0,x.useState)(!1),2),s=c[0],u=c[1],d=(0,x.useRef)(),f=(0,x.useRef)(!1),h=(0,x.useCallback)(function(){(d.current||s)&&clearTimeout(d.current),u(!0),d.current=setTimeout(function(){u(!1)},100)},[s]);return{scrollHandler:(0,x.useCallback)((t=(0,S._)(function(e){var t,i,c,s,u,d,p;return(0,E.Jh)(this,function(m){switch(m.label){case 0:if(!(t=e.currentTarget)||f.current)return[2];if(h(),i=t.scrollHeight,c=t.scrollTop,s=t.clientHeight,a(u=l&&i-s===c),d=20*r,!(!u&&c<d&&i>s&&n.current))return[3,5];f.current=!0,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,o()];case 2:return m.sent(),[3,4];case 3:return p=m.sent(),r4.Tb(p),[3,4];case 4:f.current=!1,m.label=5;case 5:return[2]}})}),function(e){return t.apply(this,arguments)}),[h,l,a,r,n,o]),isScrolling:s}},lY=function(e){var t=e.scrollRef,n=lM(),r=n.loading,i=n.logs,o=n.isLive,a=(0,x.useRef)(0),l=(0,x.useRef)(i[0]);(0,x.useEffect)(function(){var e=t.current;if(e&&!r&&0!==i.length){if(o)e.scrollHeight>e.clientHeight&&e.scrollTo({top:e.scrollHeight,behavior:"instant"});else if(l.current&&l.current.timestamp>i[0].timestamp){var n=e.scrollHeight;if(n!==a.current){var c=n-a.current,s=e.scrollTop;e.scrollTo({top:s+c,behavior:"instant"})}}l.current=i[0],a.current=e.scrollHeight}},[o,r,i,t])},lK=(0,I.X)({root:[{overflow:"auto"},Z.l0.flex.growAndShrink(1)],virtualTable:[Z.l0.width("100%"),Z.l0.position.relative],tableHeader:[Z.l0.display.flex,Z.l0.flex.row,Z.l0.backgroundColor.backgroundDefault,Z.l0.position.sticky,Z.l0.zIndex(1),Z.l0.top(0),Z.l0.border({color:Z.TV.outlineDimmest,direction:"bottom"})],columnHeader:[Z.l0.color.foregroundDimmer,Z.l0.fontSize(12),{lineHeight:"18px"},Z.l0.px(6),Z.l0.justify.center]});function l$(){var e=lM(),t=e.loading,n=e.error,r=e.logs,i=e.isExpanded,o=!!(t||n),a=(0,x.useRef)(null),l=(0,nY.sG)()?44:26,c=(0,lT.MG)({count:(null==r?void 0:r.length)||0,getScrollElement:function(){return a.current},estimateSize:function(){return l},overscan:10,measureElement:function(e){return e.getBoundingClientRect().height},rangeExtractor:function(e){var t=new Set([0].concat((0,k._)((0,lR.MK)(e))));return(0,k._)(t)}});lY({scrollRef:a});var s=lJ({didInitialScroll:lq({scrollRef:a}).didInitialScroll,itemHeight:l}),u=s.scrollHandler,d=s.isScrolling,f=(0,C.$y)(),h=(null==f?void 0:f.provider)===L.r4.Cron,p=(0,x.useMemo)(function(){return[{key:"time",title:"Time",width:175,renderCell:function(e){var t=(0,lj.Z)(e.timestamp);return(0,ey.Z)(t,"yyyy-MM-dd' 'HH:mm:ss.SS")}},h&&{key:"run",title:"Run",width:50,renderCell:function(e){var t,n=null===(t=e.executionId)||void 0===t?void 0:t.split("-");return n?[n.length-1]:""}},i&&{key:"source",title:"Source",width:60,renderCell:function(e){return e.isFromReplit?"System":"User"}},{key:"log",title:"Log",renderCell:function(e){return e.line}}].filter(Boolean)},[h,i]);return(0,v.tZ)(b.G,{innerRef:a,css:lK.root,onScroll:u,children:(0,v.BX)(b.G,{style:{height:c.getTotalSize()},css:lK.virtualTable,children:[(0,v.tZ)(b.G,{css:lK.tableHeader,children:p.map(function(e){return(0,v.tZ)(b.G,{tag:"div",css:lK.columnHeader,style:{width:e.width,flex:e.width?void 0:1,height:l},children:e.title},e.title)})}),c.getVirtualItems().map(function(e){var t=r[e.index];return t?(0,v.tZ)(lz,{log:t,height:e.size,y:e.start,resizeRef:c.measureElement,index:e.index,disabled:o,isScrolling:d,columns:p},e.key):null})]})})}var lQ=(0,I.X)({root:[Z.l0.flex.grow(1)],noLogsContainer:[Z.l0.colWithGap(8),Z.l0.pt(4)],noLogsText:[Z.l0.textAlign.center]});function l0(){var e=lM(),t=e.logs;return e.loading?(0,v.tZ)(K,{css:lQ.root,children:(0,v.tZ)(nv,{loading:!0})}):0===t.length?(0,v.tZ)(K,{css:lQ.root,children:(0,v.BX)(b.G,{css:lQ.noLogsContainer,children:[(0,v.tZ)(eo.xv,{css:lQ.noLogsText,children:"No logs are available."}),(0,v.BX)(eo.xv,{color:"dimmer",css:lQ.noLogsText,children:["Having trouble?"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",onClick:function(){return e5({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})}):(0,v.tZ)(l$,{})}var l1=n(1712),l2=(0,I.X)({root:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.border({color:Z.TV.outlineDimmest,direction:"top"})],button:[Z.l0.color.foregroundDefault,Z.l0.borderRadius(0)],liveIndicatorWrapper:[Z.l0.width(16),Z.l0.height(16),Z.l0.display.flex,Z.l0.align.center,Z.l0.justify.center],liveIndicator:[Z.l0.width(6),Z.l0.height(6),Z.l0.borderRadius("full"),Z.l0.backgroundColor.accentPositiveStronger]});function l3(){var e=lM(),t=e.isLive,n=e.setIsLive,r=e.isExpanded,i=e.setIsExpanded;return(0,v.BX)(b.G,{css:l2.root,children:[(0,v.tZ)(b.G,{children:(0,v.tZ)(O.zx,{iconLeft:r?(0,v.tZ)(eF.Z,{rotate:90}):(0,v.tZ)(eW.Z,{rotate:90}),onClick:function(){return i(function(e){return!e})},variant:"nofill",text:r?"Collapse":"Expand",css:l2.button})}),(0,v.tZ)(b.G,{children:(0,v.tZ)(O.zx,{iconLeft:t?(0,v.tZ)(b.G,{css:l2.liveIndicatorWrapper,children:(0,v.tZ)(b.G,{css:l2.liveIndicator})}):(0,v.tZ)(l1.Z,{}),onClick:function(){return n(function(e){return!e})},variant:"nofill",text:"Live",css:l2.button})})]})}var l4=n(39667),l8=n(19054),l6=(0,I.X)({root:[Z.l0.p(8),Z.l0.rowWithGap(8),{"*:first-child":Z.l0.flex.grow(1)}],divider:Z.l0.backgroundColor.outlineDimmer,section:[Z.l0.p(8)],buttonGroup:[Z.l0.flex.row,Z.l0.rowWithGap(1),{button:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}}],checkboxWithLabel:[Z.l0.rowWithGap(8),Z.l0.p(8)]}),l5=function(){var e=lM(),t=e.filter,n=e.setFilter,r=e.clearFilter,i=e.hasFilter,o=(0,m._)((0,x.useState)(!1),2),a=o[0],l=o[1],c=(0,rR.U)(),s=i?"primary":void 0;return(0,v.BX)(rj.ZA,{css:l6.buttonGroup,children:[(0,v.BX)(rz.xo,{label:"Filter",isOpen:a,onOpenChange:l,noArrow:!0,background:"higher",children:[(0,v.tZ)(O.zx,{colorway:s,text:"",iconLeft:(0,v.tZ)(l8.Z,{})},s),(0,v.BX)(b.G,{children:[(0,v.BX)(b.G,{css:l6.checkboxWithLabel,children:[(0,v.tZ)(av.X,{name:"Filter by errors only",id:c("errors-only"),checked:t.level===L.in.Error,onChange:function(e){return n(function(t){return(0,z._)((0,V._)({},t),{level:e?L.in.Error:null})})}}),(0,v.tZ)("label",{htmlFor:c("errors-only"),children:"Errors only"})]}),(0,v.tZ)(tl.R,{css:l6.divider}),(0,v.tZ)(O.zx,{variant:"nofill",onClick:function(){return r()},text:"Clear all filters"})]})]}),i?(0,v.tZ)(O.zx,{colorway:s,text:"",iconLeft:(0,v.tZ)(n3.Z,{}),onClick:function(){return r()}}):null]})};function l9(){var e=lM(),t=e.filter,n=e.setFilter,r=(0,m._)((0,x.useState)(t.message),2),i=r[0],o=r[1];return(0,x.useEffect)(function(){o(t.message)},[t.message]),(0,v.BX)(b.G,{css:l6.root,children:[(0,v.tZ)(l4.E,{placeholder:"Search",value:i,onChange:function(e){return o(e.target.value)},onBlur:function(){return n(function(e){return(0,z._)((0,V._)({},e),{message:i})})},onClear:function(){n(function(e){return(0,z._)((0,V._)({},e),{message:""})})},onKeyDown:function(e){"Enter"===e.key&&n(function(e){return(0,z._)((0,V._)({},e),{message:i})})}}),(0,v.tZ)(l5,{})]})}var l7=(0,I.X)({root:[{overflow:"hidden"},Z.l0.coverContainer],header:[Z.l0.colWithGap(8),Z.l0.p(6),{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)}],headerActions:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween]}),ce=function(e){var t=e.deploymentId,n=e.replId,r=e.executionId,i=e.onBack;return t?(0,v.tZ)(ct,{deploymentId:t,replId:n,executionId:r,onBack:i}):(0,v.tZ)(K,{children:(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:"Deployment not found"})})};function ct(e){var t=e.deploymentId,n=e.replId,r=e.executionId,i=e.onBack,o=lO(),a=lX({deploymentId:t,replId:n,executionId:r}),l=a.error;(0,lI.q)(function(){e5({context:F.k.Logs})});var c=l||r||i;return(0,v.tZ)(lU.Provider,{value:a,children:(0,v.BX)(b.G,{css:l7.root,children:[c?(0,v.BX)(b.G,{css:l7.header,children:[l?(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:l}):null,i?(0,v.tZ)(b.G,{css:l7.headerActions,children:(0,v.tZ)(eX.hU,{alt:"Back",onClick:i,children:(0,v.tZ)(t$.Z,{})})}):null]}):null,o?(0,v.tZ)(l9,{}):null,(0,v.tZ)(l0,{}),o?(0,v.tZ)(l3,{}):null]})})}var cn=[{label:"one hour",key:1},{label:"six hours",key:6},{label:"one day",key:24},{label:"three days",key:72},{label:"one week",key:168}],cr={label:"one hour",key:1},ci=function(e){var t=e.replId,n=(0,m._)((0,x.useState)(cr),2),r=n[0],i=r.key,o=r.label,a=n[1],l=(0,e4.Z)(new Date,i),c=(0,et.F)().values,s=Z.nC.min(600),u=(0,I.X)({fullWidth:(0,$._)({},s,{gridColumn:"span 2"})}),d=(0,I.X)({container:(0,$._)({display:"grid",gap:32},s,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:u.fullWidth,map:[u.fullWidth],pies:[u.fullWidth,Z.l0.flex.column,(0,$._)({gap:32},Z.nC.min(480),[Z.l0.flex.row,{" > *":{flex:1}}])]});return(0,v.tZ)(K,{children:(0,v.BX)(b.G,{css:d.container,children:[(0,v.tZ)(b.G,{css:d.fullWidth,children:(0,v.tZ)(e2.ZE,{items:cn,label:"Past ".concat(o),icon:(0,v.tZ)(e3.Z,{}),onAction:function(e){var t,n="string"==typeof e?parseInt(e,10):e;a(null!==(t=cn.find(function(e){return e.key===n}))&&void 0!==t?t:cr)},cssProps:[Z.l0.width("fit-content")],children:cn.map(function(e){return(0,v.tZ)(e2.ck,{children:(0,v.tZ)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.color.foregroundDefault],children:(0,v.tZ)(eo.xv,{multiline:!1,children:e.label})})},e.key)})})}),(0,v.tZ)(b.G,{css:d.fullWidth,children:(0,v.tZ)(eM,{replId:t,title:"CPU Utilization",metric:eL.RH.CPU,start:l,hours:i,colorFn:function(){return c.global.redDefault}})}),(0,v.tZ)(b.G,{css:d.fullWidth,children:(0,v.tZ)(eM,{replId:t,title:"Memory Utilization",metric:eL.RH.Memory,start:l,hours:i,colorFn:function(){return c.global.redDefault}})})]})})},co=(0,I.X)({sectionContainer:[Z.l0.colWithGap(8)]});function ca(e){var t=e.shouldShowDownloadQR,n=(0,m._)((0,x.useState)(t),2),r=n[0],i=n[1];return(0,v.tZ)(b.G,{children:(0,v.BX)(b.G,{css:co.sectionContainer,children:[(0,v.tZ)(O.zx,{iconLeft:(0,v.tZ)(n4.Z,{}),text:"Install the Replit App",onClick:function(){return i(function(e){var t=!e;return t&&(0,e6.j)(e6.U3.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),t})}}),r?(0,v.tZ)(n1,{color:Z.TV.foregroundDefault}):null]})})}var cl=n(87409);function cc(){var e=(0,el._)(["\n  query AutoscaleUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            autoscaleComputeUnits {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return cc=function(){return e},e}var cs={},cu=(0,ec.Ps)(cc()),cd=(0,I.X)({root:[Z.l0.colWithGap(4),Z.l0.p(8),Z.l0.pt(12),Z.l0.borderRadius(8),{outline:"1px solid transparent"}],outerRow:[Z.l0.rowWithGap(12),Z.l0.align.center],typeCol:[Z.l0.colWithGap(4),Z.l0.flex.growAndShrink(1)],configAndUsageRow:[Z.l0.rowWithGap(12),Z.l0.align.center,Z.l0.flex.growAndShrink(1)],usageRow:[Z.l0.rowWithGap(8)]}),cf=function(e){var t,n=e.machineConfiguration,r=(t=(0,V._)({},cs,void 0),es.a(cu,t)).data,i=(0,x.useMemo)(function(){return function(e){var t,n,r=e.data;if((null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"){var i=null==r?void 0:null===(n=r.currentUser)||void 0===n?void 0:n.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.autoscaleComputeUnits.usage,a=(0,cl.fZ)(o,{resourceUsageType:"ComputeUnits"}),l=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{description:"".concat(a," used this billing period"),renewalInfo:"Renews ".concat(l," ")}}}}({data:r})},[r]),o=(0,x.useMemo)(function(){if(null!=n)return"Autoscale (".concat(n.label,")")},[n]);return o&&i?(0,v.BX)(M.Tg,{elevated:!0,css:cd.root,children:[(0,v.BX)(b.G,{css:cd.outerRow,children:[(0,v.tZ)(b.G,{css:cd.typeCol,children:o?(0,v.tZ)(eo.xv,{multiline:!1,children:o}):null}),(0,v.tZ)(eX.hU,{alt:"Edit",onClick:e.onEditAutoscaleMachineConfiguration,children:(0,v.tZ)(aP.Z,{})})]}),i?(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:cd.outerRow,children:[(0,v.tZ)(eo.xv,{multiline:!1,children:i.description}),(0,v.tZ)(eo.xv,{color:"dimmer",multiline:!1,children:i.renewalInfo})]}),(0,v.tZ)(b.G,{css:cd.outerRow,children:(0,v.tZ)(nO(),{legacyBehavior:!0,passHref:!0,href:"/usage",prefetch:!1,children:(0,v.tZ)("a",{role:"button",children:"View account resource limits"})})})]}):null]}):(0,v.tZ)(b.G,{css:[Z.l0.justify.center,Z.l0.flex.row],children:(0,v.tZ)(w.Z,{})})},ch=n(40509),cp=n(75993),cm=n(33298),cv=n(84126),cg=(0,cm.$)(["paddingRight"]),cy=cg.cssVars,cb=cg.styleTokens,cw=(0,I.X)({inputWrapper:[Z.l0.position.relative,Z.l0.flex.growAndShrink(1),{input:[{paddingRight:cb.paddingRight}]}],copyButton:[Z.l0.position.absolute,Z.l0.top("50%"),Z.l0.right(4),{transform:"translateY(-50%)"}]});function cZ(e){return(0,v.BX)(b.G,{css:cw.inputWrapper,style:(0,$._)({},cy.paddingRight,e.value?"36px":"8px"),children:[(0,v.tZ)(nu.II,(0,z._)((0,V._)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,v.tZ)(eX.hU,{css:cw.copyButton,alt:"Copy",tooltipBehavior:"hidden",onClick:function(){return e.value&&(0,cp.Z)(e.value)},children:(0,v.tZ)(cv.Z,{})}):null]})}var cx=(0,I.X)({root:[Z.l0.flex.column,(d={gap:8},(0,$._)(d,Z.nC.min("mobileMax"),[Z.l0.flex.row,{"& > div:nth-of-type(1)":{width:"30%"},"& > div:nth-of-type(2)":{maxWidth:50}}]),(0,$._)(d,"label",[Z.l0.color.foregroundDimmer,{fontSize:Z.TV.fontSizeSmall}]),d)],col:[Z.l0.colWithGap(4),Z.l0.flex.growAndShrink(1)],records:[Z.l0.px(12),Z.l0.pt(8),Z.l0.pb(16),Z.l0.colWithGap(16),Z.l0.borderRadius(12),(0,$._)({},Z.nC.min("mobileMax"),Z.l0.colWithGap(12))],divider:(0,$._)({display:"flex",height:1,backgroundColor:Z.TV.outlineDimmest},Z.nC.min("mobileMax"),Z.l0.display.none)});function cC(e){return(0,v.BX)(b.G,{css:cx.root,children:[(0,v.BX)(b.G,{css:cx.col,children:[(0,v.tZ)(b.G,{tag:"label",children:"Hostname"}),(0,v.tZ)(nu.II,{value:e.hostname,readOnly:!0})]}),(0,v.BX)(b.G,{css:cx.col,children:[(0,v.tZ)(b.G,{tag:"label",children:"Type"}),(0,v.tZ)(nu.II,{value:e.type,readOnly:!0})]}),(0,v.BX)(b.G,{css:cx.col,children:[(0,v.tZ)(b.G,{tag:"label",children:"Record"}),(0,v.tZ)(cZ,{value:e.record,readOnly:!0})]})]})}function c_(e){var t="replit-verify=".concat(e.deploymentId);return(0,v.BX)(M.Tg,{background:"default",css:cx.records,children:[(0,v.tZ)(cC,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,v.tZ)(b.G,{css:cx.divider}),(0,v.tZ)(cC,{hostname:e.hostname,type:"TXT",record:t})]})}function cS(){var e=(0,el._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          id\n        }\n      }\n    }\n  }\n"]);return cS=function(){return e},e}function ck(){var e=(0,el._)(["\n  mutation HostingDeploymentsVerifyDomain(\n    $input: VerifyHostingDeploymentDomainInput!\n  ) {\n    verifyHostingDeploymentDomain(input: $input) {\n      ... on HostingDeploymentDomain {\n        id\n        state\n      }\n    }\n  }\n"]);return ck=function(){return e},e}var cE={},cT=(0,ec.Ps)(cS()),cR=(0,ec.Ps)(ck());function cI(){var e=(0,el._)(["\n  fragment HostingDeploymentDomainsDomain on HostingDeploymentDomain {\n    id\n    state\n    domain\n  }\n"]);return cI=function(){return e},e}function cD(){var e=(0,el._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      apexProxy\n    }\n    domains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n    legacyReplDomains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n  }\n  ","\n"]);return cD=function(){return e},e}function cB(){var e=(0,el._)(["\n  query HostingDeploymentDomains($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return cB=function(){return e},e}function cG(){var e=(0,el._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          ...HostingDeploymentDomainsDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return cG=function(){return e},e}var cA={},cP=(0,ec.Ps)(cI()),cN=(0,ec.Ps)(cD(),cP),cL=(0,ec.Ps)(cB(),cN),cO=(0,ec.Ps)(cG(),cP),cU="https://docs.replit.com/hosting/deployments/custom-domains",cM=(0,I.X)({root:[Z.l0.colWithGap(8),Z.l0.borderRadius(8),Z.l0.pl(8),Z.l0.pr(4),Z.l0.height(32),Z.l0.justify.center]}),cX=(0,I.X)({root:cM.root,rootExpanded:[cM.root,Z.l0.height("auto"),Z.l0.pt(4),Z.l0.pb(12),Z.l0.justify.start],domainRow:[Z.l0.reset.button,Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween],iconButtons:[Z.l0.flex.row],expanded:[Z.l0.colWithGap(12),Z.l0.pl(4),Z.l0.pr(8)],domainWrapper:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.flex.shrink(1),Z.l0.color.accentPrimaryStronger,{a:Z.l0.hover(Z.l0.color.accentPrimaryStrongest)}],statusDot:[Z.l0.borderRadius("full"),Z.l0.width(6),Z.l0.height(6)],status:[Z.l0.rowWithGap(4),Z.l0.align.center],dnsRecords:[Z.l0.colWithGap(6)],buttons:[Z.l0.flex.column,Z.l0.justify.spaceBetween,(f={gap:8},(0,$._)(f,Z.nC.min("mobileMax"),Z.l0.flex.row),(0,$._)(f,"button",[Z.l0.flex.growAndShrink(1)]),f)],warning:[Z.l0.rowWithGap(6),Z.l0.align.center]}),cF={verified:{color:Z.TV.accentPositiveDefault,text:"Verified"},verifying:{color:Z.TV.orangeDefault,text:"Verifying"},failed:{color:Z.TV.accentNegativeDefault,text:"Failed"}};function cW(e){var t,n,r,i=e.domain,o=e.deploymentId,a=e.apexProxy,l=(0,m._)((0,x.useState)(!1),2),c=l[0],s=l[1],u=(0,m._)((0,x.useState)(!1),2),d=u[0],f=u[1],h=(0,m._)((t=(0,V._)({},cA,{variables:{id:o},fetchPolicy:"network-only",ssr:!1}),aM.t(cL,t)),2),p=h[0],g=h[1].loading,y=(0,m._)((n=(0,V._)({},cE,void 0),ab.D(cT,n)),2),C=y[0],_=y[1].loading,S=(0,m._)((r=(0,V._)({},cE,void 0),ab.D(cR,r)),2),k=S[0],E=S[1].loading,T=i.state===L.zt.Failed;return(0,v.BX)(M.Tg,{elevated:!0,css:c?cX.rootExpanded:cX.root,children:[(0,v.BX)(b.G,{css:cX.domainRow,style:{borderBottomLeftRadius:c?0:void 0,borderBottomRightRadius:c?0:void 0},children:[(0,v.BX)(b.G,{css:cX.domainWrapper,children:[(0,v.tZ)(eo.xv,{multiline:!1,children:(0,v.tZ)("a",{target:"_blank",href:"".concat(i.domain.startsWith("http://")||i.domain.startsWith("https://")?"":"https://").concat(i.domain),children:i.domain})}),(0,v.BX)(b.G,{css:cX.status,children:[(0,v.tZ)(b.G,{css:cX.statusDot,style:{backgroundColor:cF[i.state].color}}),(0,v.tZ)(eo.xv,{color:"dimmer",variant:"small",children:cF[i.state].text})]})]}),(0,v.BX)(b.G,{css:cX.iconButtons,children:[(0,v.tZ)(lF.m,{textToCopy:i.domain,tooltipSuccessText:"Copy link"}),(0,v.tZ)(eX.hU,{alt:"Edit",tooltipBehavior:"hidden",onClick:function(){f(!1),s(function(e){return!e})},css:Z.l0.color.foregroundDimmer,children:c?(0,v.tZ)(tc.Z,{}):(0,v.tZ)(aP.Z,{})})]})]}),c?(0,v.tZ)(b.G,{css:cX.expanded,children:d?(0,v.BX)(v.HY,{children:[(0,v.tZ)(eo.xv,{children:"Are you sure you want to unlink this domain?"}),(0,v.BX)(b.G,{css:cX.buttons,children:[(0,v.tZ)(O.zx,{size:"small",variant:"outlined",text:"Cancel",onClick:function(){f(!1)}}),(0,v.tZ)(O.zx,{size:"small",disabled:_,text:"Yes, unlink "+i.domain,colorway:"negative",onClick:function(){C({variables:{input:{hostingDeploymentDomainId:i.id}}})}})]})]}):(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:cX.dnsRecords,children:[T?(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:cX.warning,children:[(0,v.tZ)(N.Z,{}),(0,v.tZ)(eo.xv,{children:"DNS Error"})]}),(0,v.BX)(eo.xv,{children:["Failed to link domain. Make sure your domain's DNS settings have these records."," ",(0,v.tZ)("a",{target:"_blank",href:cU,children:"Learn more"})]})]}):(0,v.BX)(eo.xv,{color:"dimmer",children:["Add these records to your domain's"," ",(0,v.tZ)("strong",{css:Z.l0.color.foregroundDefault,children:"DNS settings"}),". This may take up to 48 hours to fully apply."," ",(0,v.tZ)("a",{target:"_blank",href:cU,children:"Learn more"})]}),(0,v.tZ)(c_,{hostname:i.domain,apexProxy:a,deploymentId:o})]}),(0,v.BX)(b.G,{css:cX.buttons,children:[(0,v.tZ)(O.zx,{iconLeft:g||E?(0,v.tZ)(w.Z,{}):(0,v.tZ)(ch.Z,{}),size:"small",text:T?"Retry linking":"Check status",onClick:function(){T?k({variables:{input:{hostingDeploymentDomainId:i.id}}}):p()}}),(0,v.tZ)(O.zx,{iconLeft:(0,v.tZ)(ag.Z,{}),size:"small",disabled:_,text:T?"Remove domain":"Unlink domain",colorway:"negative",onClick:function(){f(!0)}})]})]})}):null]})}var cH=n(66958);function cV(){var e=(0,el._)(["\n  mutation HostingDeploymentsUnlinkLegacyReplDomain(\n    $input: UnlinkLegacyReplDomainInput!\n  ) {\n    unlinkLegacyReplDomain(input: $input) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            legacyReplDomains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n            domains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return cV=function(){return e},e}var cz={},cj=(0,ec.Ps)(cV(),cP),cq=n(54615),cJ=n(32508),cY=n.n(cJ),cK=(0,I.X)({root:[Z.l0.colWithGap(16),Z.l0.p(8),Z.l0.borderRadius(8),Z.l0.border({color:Z.TV.outlineDimmer})],labelRow:[Z.l0.rowWithGap(8),Z.l0.align.center],labelText:[Z.l0.flex.growAndShrink(1)],controls:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,{"& > button":[Z.l0.flex.growAndShrink(1)]}],domainSection:[Z.l0.colWithGap(8)],error:[Z.l0.rowWithGap(4),Z.l0.align.center],recordsSection:[Z.l0.colWithGap(8)],valueRow:[Z.l0.borderRadius(8),Z.l0.pl(8),Z.l0.pr(4),Z.l0.height(32),Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween,{a:Z.l0.hover(Z.l0.color.accentPrimaryStrongest)}]});function c$(e){var t,n=(0,m._)((0,x.useState)(!0),2),r=n[0],i=n[1],o=(0,m._)((0,x.useState)(""),2),a=o[0],l=o[1],c=(0,m._)((0,x.useState)(!1),2),s=c[0],u=c[1],d=(0,m._)((t=(0,V._)({},cA,{onCompleted:function(){e.onAdd()}}),ab.D(cO,t)),2),f=d[0],h=d[1].loading,p=(0,x.useRef)(null),g=(0,x.useId)(),y=cY()(a,{require_valid_protocol:!1})&&a.split(".").length>=2,C=!y||h,_=y?null:"Enter a valid domain",S=h?(0,v.tZ)(w.Z,{}):(0,v.tZ)(nk.Z,{});return r||h||(S=(0,v.tZ)(cH.Z,{})),(0,v.BX)(b.G,{tag:"form",css:cK.root,onSubmit:function(t){if(t.preventDefault(),r){var n;i(!1),null===(n=p.current)||void 0===n||n.focus();return}f({variables:{input:{hostingDeploymentId:e.deploymentId,domain:a}}})},children:[(0,v.BX)(b.G,{css:cK.domainSection,children:[(0,v.BX)(b.G,{tag:"label",htmlFor:g,css:cK.labelRow,children:[y&&!r?(0,v.tZ)(tp.Z,{color:Z.TV.accentPositiveDefault}):null,(0,v.tZ)(eo.xv,{color:"dimmer",children:"First, enter your domain"})]}),r?(0,v.tZ)(nu.II,{id:g,autoFocus:!0,placeholder:"example.com",value:a,disabled:h,onChange:function(e){return l(e.currentTarget.value)},onBlur:function(e){return u(!!e.currentTarget.value)}}):(0,v.BX)(M.Tg,{elevated:!0,css:cK.valueRow,children:[(0,v.tZ)(b.G,{href:"https://"+a,tag:"a",target:"_blank",children:a}),(0,v.tZ)(eX.hU,{alt:"Edit",onClick:function(){return i(!0)},children:(0,v.tZ)(aP.Z,{color:Z.TV.foregroundDimmer})})]}),_&&s?(0,v.BX)(b.G,{css:cK.error,children:[(0,v.tZ)(N.Z,{size:12,color:Z.TV.orangeDefault}),(0,v.tZ)(eo.xv,{variant:"small",children:_})]}):null]}),!r&&y?(0,v.tZ)(cQ,{apexProxy:e.apexProxy,domain:a,deploymentId:e.deploymentId}):null,(0,v.BX)(b.G,{css:cK.controls,children:[(0,v.tZ)(O.zx,{type:"button",text:"Cancel",onClick:e.onCancel}),(0,v.tZ)(O.zx,{ref:p,iconRight:S,colorway:"primary",type:"submit",disabled:C,text:r?"Next":"Link domain"})]})]})}function cQ(e){return(0,v.BX)(b.G,{css:cK.recordsSection,children:[(0,v.BX)(b.G,{css:cK.labelRow,children:[(0,v.tZ)(cq.Z,{color:Z.TV.foregroundDimmest}),(0,v.BX)(eo.xv,{multiline:!0,css:cK.labelText,children:["Next, add the following records your domain's DNS settings."," ",(0,v.tZ)("a",{target:"_blank",href:cU,children:"Learn more"})]})]}),(0,v.tZ)(c_,{apexProxy:e.apexProxy,hostname:e.domain,deploymentId:e.deploymentId})]})}var c0=(0,I.X)({root:[Z.l0.py(12),Z.l0.flex.column,(0,$._)({gap:6},Z.nC.min("mobileMax"),[Z.l0.py(4),Z.l0.flex.row,Z.l0.align.center,{gap:2,button:{border:"none"}}])],domainLink:[Z.l0.flex.growAndShrink(1),Z.l0.flex.row,Z.l0.fontWeight.medium,{a:[Z.l0.truncate,Z.l0.flex.shrink(1)]}],confirm:[Z.l0.p(8),Z.l0.borderRadius(8),Z.l0.colWithGap(8),Z.l0.justify.spaceBetween],confirmButtons:[Z.l0.rowWithGap(8),{button:[Z.l0.flex.growAndShrink(1)]}],unlinkButton:[Z.l0.color.foregroundDimmer,Z.l0.hover(Z.l0.backgroundColor.backgroundHighest)]}),c1=function(e){var t=e.domain;return(0,v.tZ)("a",{target:"_bank",href:"https://"+t,children:t})};function c2(e){var t,n=e.deploymentId,r=e.domain,i=e.apexProxy,o=(0,m._)((t=(0,V._)({},cz,void 0),ab.D(cj,t)),2),a=o[0],l=o[1].loading,c=(0,m._)((0,x.useState)(!1),2),s=c[0],u=c[1],d=(0,m._)((0,x.useState)(!1),2),f=d[0],h=d[1];return s?(0,v.BX)(M.Tg,{elevated:!0,css:c0.confirm,children:[(0,v.BX)(eo.xv,{children:["Are you sure you want to remove ",(0,v.tZ)(c1,{domain:r.domain}),"?"]}),(0,v.BX)(b.G,{css:c0.confirmButtons,children:[(0,v.tZ)(O.zx,{text:"Cancel",onClick:function(){return u(!1)},size:"small"}),(0,v.tZ)(O.zx,{size:"small",disabled:l,colorway:"negative",iconLeft:l?(0,v.tZ)(w.Z,{}):(0,v.tZ)(ag.Z,{}),text:"Unlink domain",onClick:function(){return a({variables:{input:{replDomainId:r.id}}})}})]})]}):f?(0,v.BX)(M.Tg,{elevated:!0,css:c0.confirm,children:[(0,v.BX)(b.G,{children:[(0,v.tZ)(eo.xv,{variant:"small",color:"dimmer",children:"Transfering"}),(0,v.tZ)(b.G,{css:c0.domainLink,children:(0,v.tZ)(c1,{domain:r.domain})})]}),(0,v.tZ)(cQ,{deploymentId:n,domain:r.domain,apexProxy:i}),(0,v.BX)(b.G,{css:c0.confirmButtons,children:[(0,v.tZ)(O.zx,{text:"Cancel",onClick:function(){return h(!1)},size:"small"}),(0,v.tZ)(O.zx,{size:"small",disabled:l,colorway:"primary",iconLeft:l?(0,v.tZ)(w.Z,{}):(0,v.tZ)(cH.Z,{}),text:"Complete transfer",onClick:function(){return a({variables:{input:{replDomainId:r.id,transferToHostingDeploymentId:n}}})}})]})]}):(0,v.BX)(b.G,{css:c0.root,children:[(0,v.tZ)(b.G,{css:c0.domainLink,children:(0,v.tZ)(c1,{domain:r.domain})}),(0,v.tZ)(O.zx,{size:"small",variant:"outlined",text:"Unlink",onClick:function(){return u(!0)},iconLeft:(0,v.tZ)(ag.Z,{}),css:c0.unlinkButton}),(0,v.tZ)(O.zx,{size:"small",variant:"outlined",disabled:l,iconRight:(0,v.tZ)(nk.Z,{}),colorway:"primary",text:"Transfer to deployment",onClick:function(){return h(!0)}})]})}var c3=(0,I.X)({root:[Z.l0.colWithGap(4),Z.l0.p(12),Z.l0.pb(6),Z.l0.borderRadius(12),Z.l0.backgroundColor.backgroundHigher,Z.l0.border({color:Z.TV.outlineDimmer})],header:[Z.l0.align.center,Z.l0.rowWithGap(8)],list:[{"& > div:not(:first-of-type)":Z.l0.border({color:Z.TV.outlineDimmer,direction:"top"})}]});function c4(e){var t=e.domains,n=e.deploymentId,r=e.apexProxy,i=1===t.length?"domain":"domains";return(0,v.BX)(M.Tg,{css:c3.root,children:[(0,v.BX)(b.G,{css:Z.l0.colWithGap(4),children:[(0,v.BX)(b.G,{css:c3.header,children:[(0,v.tZ)(N.Z,{color:Z.TV.yellowStronger}),(0,v.BX)(eo.xv,{variant:"subheadDefault",children:["Transfer ",i]})]}),(0,v.BX)(eo.xv,{color:"dimmer",children:["You have attached ",t.length," custom ",i," to your development Repl. Please transfer ","domain"===i?"it":"them"," to your deployment for the best user experience."]})]}),(0,v.tZ)(b.G,{css:c3.list,children:t.map(function(e){return(0,v.tZ)(c2,{domain:e,deploymentId:n,apexProxy:r},e.id)})})]})}var c8=(0,I.X)({root:[Z.l0.colWithGap(8)],error:[Z.l0.center,Z.l0.rowWithGap(8)],loading:[Z.l0.center],empty:[Z.l0.px(16),Z.l0.py(32),Z.l0.borderRadius(8),Z.l0.center,Z.l0.colWithGap(8),{border:"1px dashed",borderColor:Z.TV.outlineDimmer}],primaryDomain:[Z.l0.rowWithGap(4),Z.l0.height(32),Z.l0.justify.spaceBetween,Z.l0.align.center,Z.l0.pl(8),Z.l0.pr(4),Z.l0.borderRadius(8)],primaryDomainLink:[Z.l0.flex.shrink(1),Z.l0.color.accentPrimaryStronger,{a:Z.l0.hover(Z.l0.color.accentPrimaryStrongest)}],icons:[Z.l0.flex.row,Z.l0.align.center],footer:[Z.l0.flex.row]});function c6(e){var t,n,r,i,o=e.deployment,a=(0,m._)((0,x.useState)(!1),2),l=a[0],c=a[1],s=(0,m._)((0,x.useState)(void 0),2),u=s[0],d=s[1];t={variables:{id:o.id},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:u,onCompleted:function(e){var t,n;d((null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&(null===(n=e.hostingDeployment.domains)||void 0===n?void 0:n.some(function(e){return e.state===tQ.zt.Verifying}))?3e4:void 0)}},n=(0,V._)({},cA,t),es.a(cL,n);var f=(null==o?void 0:null===(r=o.domains)||void 0===r?void 0:r.length)?o.domains:null,h=(null==o?void 0:o.currentBuild.status)===L.Fe.Success,p=null==o?void 0:o.repl.apexProxy,g=(0,C.$y)(),y=function(){var e,t,n,r,i,o=(null==g?void 0:null===(e=g.repl.hostingDeployment)||void 0===e?void 0:e.__typename)==="HostingDeployment"?null===(t=g.repl.hostingDeployment)||void 0===t?void 0:t.replitAppSubdomain:void 0;if(!o&&(null==g?void 0:null===(n=g.repl.owner)||void 0===n?void 0:n.username)&&(o="".concat(g.repl.slug,"-").concat(g.repl.owner.username)),o)return"https://".concat(o).concat((null===(i=window)||void 0===i?void 0:null===(r=i.location)||void 0===r?void 0:r.hostname)!=="replit.com"?".staging":"",".replit.app")}();return(0,v.BX)(b.G,{css:c8.root,children:[!l&&(null==o?void 0:null===(i=o.legacyReplDomains)||void 0===i?void 0:i.length)&&p?(0,v.tZ)(c4,{domains:o.legacyReplDomains,deploymentId:o.id,apexProxy:p}):null,(0,v.BX)(M.Tg,{elevated:!0,css:c8.primaryDomain,children:[(0,v.tZ)(eo.xv,{multiline:!1,css:c8.primaryDomainLink,children:(0,v.tZ)("a",{href:y,target:"_blank",rel:"noreferrer noopener",children:y})}),(0,v.BX)(b.G,{css:c8.icons,children:[(0,v.tZ)(lF.m,{textToCopy:null!=y?y:""}),(0,v.tZ)(nd.u,{tooltip:c5,children:(0,v.tZ)(nM.Z,{"aria-label":c5,color:Z.TV.foregroundDimmer,css:Z.l0.m(4)})})]})]}),f&&o?(0,v.tZ)(b.G,{css:Z.l0.colWithGap(8),children:f.map(function(e){return(0,v.tZ)(b.G,{children:(0,v.tZ)(cW,{apexProxy:o.repl.apexProxy,deploymentId:o.id,domain:e})},e.domain)})}):null,l&&p?(0,v.tZ)(c$,{apexProxy:p,deploymentId:o.id,onAdd:function(){return c(!1)},onCancel:function(){return c(!1)}}):null,h?null:(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:"You must successfully deploy your project before linking a domain"}),!1===l?(0,v.tZ)(b.G,{css:c8.footer,children:(0,v.tZ)(O.zx,{disabled:!h,iconLeft:(0,v.tZ)(n9.Z,{}),text:"Link a domain",onClick:function(){return c(!0)},variant:"outlined",size:"small"})}):null]})}var c5="Your primary domain cannot be changed";function c9(){var e=(0,el._)(["\n  query HostingDeploymentSettings($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        currentBuild {\n          id\n          provider\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return c9=function(){return e},e}var c7={},se=(0,ec.Ps)(c9(),cN,nZ.bN),st=(0,I.X)({container:[Z.l0.colWithGap(32),q.Qw.maxWidth],usageContainer:Z.l0.colWithGap(16),header:Z.l0.pb(8),paddedHeader:Z.l0.pb(12)}),sn=function(e){var t=e.deploymentId,n=e.onLifecycleCommand,r=e.onError;return t?(0,v.tZ)(sr,{deploymentId:t,onLifecycleCommand:n,onError:r}):(0,v.tZ)(K,{children:(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:"Deployment not found"})})};function sr(e){var t,n,r,i,o,a,l,c,s,u,d=(0,nY.sG)(),f=(0,m._)((0,x.useState)(!1),2),h=f[0],p=f[1];(0,x.useEffect)(function(){e5({context:F.k.Settings})},[]);var g=(a=(r={variables:{id:({deploymentId:e.deploymentId}).deploymentId},ssr:!1,fetchPolicy:"cache-and-network"},i=(0,V._)({},c7,r),o=es.a(se,i)).data,l=o.loading,c=o.error,s=(null==a?void 0:null===(t=a.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?a.hostingDeployment:null,(null==a?void 0:null===(n=a.hostingDeployment)||void 0===n?void 0:n.__typename)==="NotFoundError"?{data:null,error:"Deployment not found",loading:!1}:!s&&l?{deployment:null,erorr:null,loading:!0}:c||!s?{deployment:null,error:"Something went wrong",loading:!1}:{deployment:s,error:null,loading:!1});if(h)return(0,v.tZ)(oq,{onError:e.onError,onConfirm:function(t){e.onLifecycleCommand({command:L.Qc.UpdateMachineConfiguration,machineConfigurationId:t.configurationId,maxMachineInstances:t.maxInstances})},onBack:function(){return p(!1)}});if(g.loading)return(0,v.tZ)(K,{children:(0,v.tZ)(nv,{loading:!0})});if(g.error)return(0,v.tZ)(ny,{text:g.error});var y=g.deployment,w=y.currentBuild,Z=null!==(u=null==w?void 0:w.machineConfiguration)&&void 0!==u?u:void 0;return(0,v.tZ)(K,{children:(0,v.BX)(b.G,{css:st.container,children:[w.provider===L.r4.CloudRun?(0,v.BX)(b.G,{children:[(0,v.tZ)(eo.xv,{variant:"subheadDefault",css:st.header,children:"Resource usage"}),(0,v.tZ)(b.G,{css:st.usageContainer,children:(0,v.tZ)(cf,{machineConfiguration:Z,onEditAutoscaleMachineConfiguration:function(){return p(!0)}})})]}):null,(0,v.BX)(b.G,{children:[(0,v.tZ)(eo.xv,{variant:"subheadDefault",css:st.header,children:"Domains"}),(0,v.tZ)(c6,{deployment:y})]}),(0,v.BX)(b.G,{children:[(0,v.tZ)(eo.xv,{variant:"subheadDefault",css:st.paddedHeader,children:"Manage deployment"}),(0,v.tZ)(ls,{onLifecycleCommand:e.onLifecycleCommand})]}),d?null:(0,v.BX)(b.G,{children:[(0,v.tZ)(eo.xv,{variant:"subheadDefault",css:st.paddedHeader,children:"Deploy on the go"}),(0,v.tZ)(ca,{shouldShowDownloadQR:!1})]})]})})}function si(){var e=(0,el._)(["\n  query ScheduledJobListExecution($deploymentId: String!) {\n    scheduledJobListExecutions(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ScheduledJobListExecutionsResults {\n        results {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return si=function(){return e},e}function so(){var e=(0,el._)(["\n  mutation ExecuteScheduledJob($deploymentId: String!) {\n    executeScheduledJob(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ExecuteScheduledJobResult {\n        execution {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return so=function(){return e},e}function sa(){var e=(0,el._)(["\n  mutation CancelScheduledJobExecution(\n    $deploymentId: String!\n    $executionId: String!\n  ) {\n    cancelScheduledJobExecution(\n      input: { deploymentId: $deploymentId, executionId: $executionId }\n    ) {\n      __typename\n      ... on CancelScheduledJobExecutionResult {\n        execution {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return sa=function(){return e},e}var sl={},sc=(0,ec.Ps)(si()),ss=(0,ec.Ps)(so()),su=(0,ec.Ps)(sa()),sd=n(39864),sf=n(2447),sh=n(97486),sp=(0,I.X)({root:[{overflow:"hidden"},Z.l0.coverContainer],executionListHeader:[Z.l0.colWithGap(8),Z.l0.p(6),{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)}],executionListHeaderActions:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween],executionList:[{overflow:"auto"},Z.l0.flex.growAndShrink(1)],executionListRows:{width:"100%",position:"relative"},executionItem:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.fontSize(12),Z.l0.px(8),{position:"absolute",top:0,left:0,width:"100%",borderBottom:"1px solid ".concat(Z.TV.outlineDimmest),color:Z.TV.foregroundDimmer}],executionItemStatusDot:[Z.l0.width("6px"),Z.l0.height("6px"),Z.l0.borderRadius("full"),Z.l0.flex.shrink(0),Z.l0.pr(4)],executionItemDistance:[Z.l0.minWidth(100)],executionItemTimestamp:[Z.l0.minWidth(90)],executionItemRunTime:[Z.l0.minWidth(60)],executionItemStatus:[Z.l0.minWidth(100),{textTransform:"capitalize"}],executionItemActions:[Z.l0.rowWithGap(8),Z.l0.align.center,{marginLeft:"auto"}],noExecutionsContainer:[Z.l0.colWithGap(8),Z.l0.pt(4)],noExecutionsText:[Z.l0.textAlign.center],maxResultsMessage:[Z.l0.fontSize(12),Z.l0.color.foregroundDimmest]});function sm(e){var t=e.deploymentId,n=e.replId,r=(0,m._)((0,x.useState)(),2),i=r[0],o=r[1];return t?i?(0,v.tZ)(ce,{replId:n,deploymentId:t,executionId:i,onBack:function(){return o(void 0)}}):(0,v.tZ)(sv,{deploymentId:t,onViewExecutionLogs:function(e){return o(e)}}):(0,v.tZ)(K,{children:(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:"Deployment not found"})})}function sv(e){var t,n,r,i,o=e.deploymentId,a=e.onViewExecutionLogs,l=(0,m._)((0,x.useState)([]),2),c=l[0],s=l[1],u=(0,m._)((0,x.useState)(!1),2),d=u[0],f=u[1],h=(0,m._)((0,x.useState)(),2),p=h[0],g=h[1],y=(t=(0,V._)({},sl,{variables:{deploymentId:o},onError:function(e){g(e)},onCompleted:function(e){(null==e?void 0:e.scheduledJobListExecutions.__typename)==="ScheduledJobListExecutionsResults"&&s(e.scheduledJobListExecutions.results)}}),es.a(sc,t)),Z=y.loading,C=y.refetch,_=(0,m._)((n=(0,V._)({},sl,{onError:function(e){g(e)},onCompleted:function(e){var t=e.executeScheduledJob;"ExecuteScheduledJobResult"===t.__typename&&s(function(e){return[t.execution].concat((0,k._)(e)).slice(0,50)})}}),ab.D(ss,n)),2),S=_[0],E=_[1].loading,T=(0,m._)((r=(0,V._)({},sl,{onError:function(e){g(e)},onCompleted:function(e){var t=e.cancelScheduledJobExecution;"CancelScheduledJobExecutionResult"===t.__typename&&s(function(e){return e.map(function(e){return e.id===t.execution.id?t.execution:e})})}}),ab.D(su,r)),2),I=T[0],D=T[1].loading,B=!!(Z||E||D||d||p);return(0,lI.q)(function(){Z||C(),e5({context:F.k.Schedule})}),(0,v.BX)(b.G,{css:sp.root,children:[(0,v.BX)(b.G,{css:sp.executionListHeader,children:[p?(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:null!==(i=p.message)&&void 0!==i?i:"Something went wrong"}):null,(0,v.BX)(b.G,{css:sp.executionListHeaderActions,children:[(0,v.tZ)(O.zx,{text:"Run now",iconLeft:(0,v.tZ)(sd.Z,{}),size:"small",disabled:B,onClick:function(){B||S({variables:{deploymentId:o}})}}),(0,v.tZ)(eX.hU,{alt:"Refresh",disabled:B,onClick:function(){B||(f(!0),C().finally(function(){f(!1)}))},children:d?(0,v.tZ)(w.Z,{}):(0,v.tZ)(ch.Z,{})})]})]}),(0,v.tZ)(sg,{executions:c,loading:Z,disabled:B,onExecutionItemAction:function(e){switch(e.type){case"cancel":I({variables:{deploymentId:o,executionId:e.payload.id}});break;case"logs":a(e.payload.id)}}})]})}function sg(e){var t=e.executions,n=e.loading,r=e.disabled,i=e.onExecutionItemAction,o=(0,x.useRef)(null),a=(0,nY.sG)()?44:28,l=(0,lT.MG)({count:t.length,getScrollElement:function(){return o.current},estimateSize:function(){return a},overscan:10});return n?(0,v.tZ)(K,{children:(0,v.tZ)(nv,{loading:!0})}):0===t.length?(0,v.tZ)(K,{children:(0,v.BX)(b.G,{css:sp.noExecutionsContainer,children:[(0,v.tZ)(eo.xv,{css:sp.noExecutionsText,children:"No runs yet..."}),(0,v.BX)(eo.xv,{color:"dimmer",css:sp.noExecutionsText,children:["Having trouble?"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",onClick:function(){return e5({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})}):(0,v.tZ)(b.G,{innerRef:o,css:sp.executionList,children:(0,v.tZ)(b.G,{style:{height:l.getTotalSize()},css:sp.executionListRows,children:l.getVirtualItems().map(function(e){var n=t[e.index];return(0,v.tZ)(sw,{execution:n,height:e.size,y:e.start,index:e.index,onAction:i,disabled:r},e.key)})})})}var sy=(h={},(0,$._)(h,L.YJ.Done,Z.TV.accentPositiveDefault),(0,$._)(h,L.YJ.Running,Z.TV.orangeStronger),(0,$._)(h,L.YJ.Failed,Z.TV.accentNegativeDefault),(0,$._)(h,L.YJ.Cancelled,Z.TV.greyDefault),(0,$._)(h,L.YJ.Unrecognized,Z.TV.greyDefault),h);function sb(e){var t=e.status,n=t in sy?sy[t]:Z.TV.greyDefault;return(0,v.tZ)(b.G,{tag:"span",css:sp.executionItemStatusDot,style:{backgroundColor:n,boxShadow:"0 0 8px ".concat(n)}})}function sw(e){var t=e.execution,n=e.y,r=e.height,i=e.index,o=e.onAction,a=e.disabled,l=(null==t?void 0:t.endedAt)?(new Date(t.endedAt).valueOf()-new Date(t.startedAt).valueOf())/1e3:null;return(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{title:t.id,css:sp.executionItem,style:{height:r,transform:"translateY(".concat(n,"px)")},children:[(0,v.tZ)(sb,{status:t.status}),(0,v.tZ)(b.G,{css:sp.executionItemDistance,children:(0,sf.Z)(new Date(t.startedAt),Date.now(),{addSuffix:!0})}),(0,v.BX)(b.G,{css:sp.executionItemTimestamp,children:[new Date(t.startedAt).toLocaleString("en-US",{month:"short",day:"2-digit"}),", ",new Date(t.startedAt).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"})]}),(0,v.tZ)(b.G,{css:sp.executionItemRunTime,children:l?"".concat(l,"s"):"-"}),(0,v.tZ)(b.G,{css:sp.executionItemStatus,children:t.status}),(0,v.BX)(b.G,{css:sp.executionItemActions,children:[t.status===L.YJ.Running?(0,v.tZ)(eX.hU,{alt:"Cancel",size:12,disabled:a,onClick:function(){return o({type:"cancel",payload:{id:t.id}})},children:(0,v.tZ)(sh.Z,{})}):null,(0,v.tZ)(eX.hU,{alt:"Logs",size:18,disabled:a,onClick:function(){return o({type:"logs",payload:{id:t.id}})},children:(0,v.tZ)(A.Z,{})})]})]}),49===i?(0,v.tZ)(b.G,{title:t.id,css:sp.executionItem,style:{height:r,transform:"translateY(".concat(n+r,"px)")},children:(0,v.tZ)(eo.xv,{css:sp.maxResultsMessage,children:"Only the most recent 50 runs are displayed currently"})}):null]})}(o=p||(p={})).Cancel="cancel",o.Logs="logs";var sZ=(0,I.X)({root:[{height:"100%"},Z.l0.overflow("hidden"),Z.l0.position.relative],content:[Z.l0.overflow("auto"),Z.l0.flex.growAndShrink(1),Z.l0.position.relative,Z.l0.pb(16)]}),sx=function(e){var t,n=e.onViewUpdate,r=e.onError,i=e.refetch,o=e.openFile,a=e.openPane,l=e.initialView,c=e.error,s=function(e){U({type:F.a.SendDeploymentLifecycleCommand,payload:e})},u=(0,T.Z)(),d=(0,C.hn)(),f=(0,C.pn)(),h=(0,C.$y)(),p=(0,C.XZ)(),g="string"==typeof d,y=!(void 0!==f)&&!g,w=(0,m._)((0,x.useState)(function(){return f?F.k.DeploymentInProgress:y?F.k.Intro:F.k.Deployment}),2),Z=w[0],_=w[1],I=(0,nN.P5)({controlName:"flag-supply-eye",logFlagToAnalytics:!1,default:!1}),O=(0,C.mF)(),U=(t=(0,S._)(function(e){var t;return(0,E.Jh)(this,function(o){switch(o.label){case 0:switch(n(),e.type){case F.a.SendDeploymentLifecycleCommand:return[3,1];case F.a.ChangeView:return[3,3];case F.a.OpenPane:return[3,4]}return[3,7];case 1:return[4,O(e.payload)];case 2:if(o.sent(),e.payload.command===L.Qc.Destroy)return _(F.k.Intro),i(),[2];return e.payload.command===L.Qc.UpdateMachineConfiguration&&i(),_(F.k.Deployment),[3,8];case 3:return _(e.payload.view),[3,8];case 4:if(!("codeEditor"===(t=e.payload).type&&".replit"===t.data.path))return[3,6];return[4,p.stat(".replit")];case 5:if(!o.sent().exists)return r("Could not find .replit configuration file."),[2];o.label=6;case 6:return a(t),[3,8];case 7:return[3,8];case 8:return[2]}})}),function(e){return t.apply(this,arguments)});if(Z===F.k.Intro)return(0,v.tZ)(b.G,{css:sZ.content,children:(0,v.tZ)(lk,{initialSelectedProvider:l===F.k.ReservedVMTierSelection?L.r4.Gce:void 0,onLifecycleCommand:s,onViewAction:U,onError:r,onDeploy:function(){U({type:F.a.ChangeView,payload:{view:F.k.DeploymentInProgress}})},replId:u})});var M=h?function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[{view:F.k.Deployment,label:"Overview",icon:(0,v.tZ)(G.Z,{})},{view:F.k.Analytics,label:"Analytics",icon:(0,v.tZ)(D.Z,{})}].concat((0,k._)(t&&[L.r4.Gce,L.r4.CloudRun].includes(e)?[{view:F.k.ResourceMonitoring,label:"Resource Monitoring",icon:(0,v.tZ)(B.Z,{})}]:[]),[{view:F.k.Settings,label:"Settings",icon:(0,v.tZ)(P.Z,{})}]);return e!==L.r4.Static&&n.splice(1,0,{view:F.k.Logs,label:"Logs",icon:(0,v.tZ)(A.Z,{})}),e===L.r4.Cron&&n.splice(1,0,{view:F.k.Schedule,label:"Schedule",icon:(0,v.tZ)(tm.Z,{})}),n}(h.provider,I):null;return(0,v.BX)(b.G,{css:sZ.root,children:[M?(0,v.tZ)(H,{onClick:function(e){U({type:F.a.ChangeView,payload:{view:e.view}})},tabs:M,activeView:Z===F.k.DeploymentInProgress?F.k.Deployment:Z}):null,(0,v.BX)(b.G,{css:sZ.content,children:[c?(0,v.tZ)(K,{children:(0,v.tZ)(R.E,{colorway:"warning",icon:(0,v.tZ)(N.Z,{}),text:c})}):null,Z===F.k.Analytics?(0,v.tZ)(tr,{replId:u}):null,Z===F.k.Logs?(0,v.tZ)(ce,{replId:u,deploymentId:d}):null,Z===F.k.ResourceMonitoring?(0,v.tZ)(ci,{replId:u}):null,Z===F.k.Settings?(0,v.tZ)(sn,{onError:r,deploymentId:d,onLifecycleCommand:s}):null,Z===F.k.Deployment||Z===F.k.DeploymentInProgress?(0,v.tZ)(oY,{view:Z,refetch:i,onViewAction:U,onError:r,openFile:o,onLifecycleCommand:s}):null,Z===F.k.Schedule?(0,v.tZ)(sm,{replId:u,deploymentId:d}):null]})]})};function sC(e){var t=e.initialView,n=e.onViewUpdate,r=e.openFile,i=e.openPane,o=e.tabsNavRef,a=(0,C.m8)(),l=(0,C.kW)(),c=(0,C.ev)(),s=(0,m._)((0,x.useState)(null),2),u=s[0],d=s[1];return l===_.z.Loading?(0,v.tZ)(b.G,{css:[Z.l0.center,Z.l0.my(32)],children:(0,v.tZ)(w.Z,{size:16})}):(0,v.tZ)(sx,{tabsNavRef:o,initialView:t,onViewUpdate:function(){u&&d(null),n()},onError:d,refetch:a,openFile:r,openPane:i,error:u||c})}var s_=n(58045),sS=n(70016),sk=g.Dy.Object({type:g.Dy.Literal("deployments"),data:g.Dy.Optional(g.Dy.Object({view:g.Dy.Enum(F.k)}))}),sE={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,r=(0,x.useRef)(function(e){if(e&&"object"==typeof e&&"view"in e&&e.view===F.k.ReservedVMTierSelection)return F.k.ReservedVMTierSelection}(t)),i=(0,x.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:{type:(0,s_.Dp)(e),data:e}})},[n]),o=(0,m._)((0,x.useState)(null),2),a=o[0],l=o[1];return(0,sS.L5)(function(){if(a)return{type:"deployments",getTabs:a.getTabs,setTab:a.setTab}},[a]),(0,v.tZ)(sC,{tabsNavRef:l,initialView:r.current,onViewUpdate:function(){r.current&&(r.current=void 0,n({operation:"replace",pane:{type:"deployments"}}))},openFile:i,openPane:function(e){n({operation:"open",pane:e})}})},Icon:function(e){var t=e.size;return(0,v.tZ)(G.Z,{size:t})},getTitle:function(){return"Deployments"},decode:function(e){return y.B4.Decode(sk,e)}}},69688:function(e,t,n){n.d(t,{J:function(){return c}});var r=n(74044),i=n(99149),o=n(18158),a=r.Dy.Union(Object.values(o.TT).map(function(e){return r.Dy.Literal(e)})),l=r.Dy.Object({type:r.Dy.Literal("docs"),data:r.Dy.Optional(r.Dy.Object({url:r.Dy.Optional(r.Dy.Union([a,r.Dy.Null()]))}))}),c=function(e){return i.B4.Decode(l,e)}},61117:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("preferences")}),a=function(e){return i.B4.Decode(o,e)}},87344:function(e,t,n){n.d(t,{s:function(){return eK},G:function(){return e0}});var r,i,o,a,l,c=n(27387),s=n(66626),u=n(96583),d=n(74985),f=n(74044),h=n(99149),p=n(82230),m=n(94778),v=n(49224),g=n(23936),y=n(55821),b=n(72093),w=n(81199),Z=n(37058),x=n(70016),C=n(50959),_=n(42516),S=n(41733),k=n(30509),E=n(4354),T=n(14872),R=n(55927),I=n(33298),D=n(28659),B=n(38753),G=n(13621),A=n(99266),P=n(48058),N=n(45929),L=n(85777),O=n(58045),U=n(81541),M=n(41974),X=n(73210),F=n(32622),W=n(15235),H=n(85763),V=n(8261),z=n(64432),j=n(59947),q=n(43449),J=n(70501),Y=n(44610),K=n(98640),$=n(33559),Q=n(87128),ee=n(70316),et=n(56412),en=n(57127),er=n(96955),ei=n(90869);function eo(e){return e&&0!==e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():""}var ea=(0,v.X)({outputBlockMetadataWrapper:[{containerType:"size"},b.l0.pl(4),b.l0.pr(8),b.l0.rowWithGap(4),b.l0.align.center,b.l0.justify.spaceBetween,b.l0.height(28),b.l0.backgroundColor.backgroundDefault,b.l0.border({direction:"bottom",width:1,style:"solid",color:b.TV.backgroundHigher}),b.l0.position.sticky,b.l0.top(0),b.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[b.l0.rowWithGap(4),b.l0.align.center,b.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[b.l0.rowWithGap(6),b.l0.align.center],executionPill:[b.l0.flex.shrink(0),b.l0.display.flex,{"@container (max-width: 120px)":[b.l0.display.none]}],lastLineTextWrapper:[b.l0.flex.shrink(1)],lastLineText:[b.l0.display.block,b.l0.maxWidth("100%"),b.l0.overflow("hidden"),b.l0.font.code,b.l0.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],askAIButton:[b.l0.display.flex,b.l0.flex.row,b.l0.align.center,b.l0.m(0),{"@container (max-width: 120px)":[b.l0.display.none]}],aiButtonWithoutPorts:[{"@container (max-width: 320px)":{padding:"0 4px","& > span":[b.l0.display.none]}}],aiButtonWithPorts:[{"@container (max-width: 460px)":{padding:"0 4px","& > span":[b.l0.display.none]}}],dateText:[b.l0.flex.row,{"@container (max-width: 260px)":[b.l0.display.none]}],verticalDivider:[b.l0.mx(6),{width:1,height:28,background:b.TV.backgroundHigher}],portInfoDomain:[b.l0.display.flex,b.l0.flex.row,b.l0.align.center,b.l0.m(0),{"@container (max-width: 400px)":b.l0.display.none}],portInfoPorts:[b.l0.display.flex,b.l0.flex.row,b.l0.align.center,b.l0.m(0),{"@container (max-width: 320px)":b.l0.display.none}],portTooltipHeader:[b.l0.color.foregroundDimmer,b.l0.fontWeight.normal,b.l0.px(2),b.l0.pb(2)],portTooltipColumnLeft:[b.l0.textAlign.right],portTooltipColumnMiddle:[b.l0.textAlign.center,b.l0.px(4)],portInfoText:[b.l0.mr(0)]}),el=[ea.askAIButton,ea.aiButtonWithoutPorts],ec=[ea.askAIButton,ea.aiButtonWithPorts],es=(o={},(0,_._)(o,N.kH.DEBUGGER,"debugger"),(0,_._)(o,N.kH.PACKAGER,"packager"),(0,_._)(o,N.kH.UNIT_TEST,"tests"),(0,_._)(o,N.kH.EXECUTION,"run"),(0,_._)(o,N.kH.PORT_INFO,"port"),(0,_._)(o,N.kH.FORMATTER,"formatter"),o);function eu(e){var t=e.onClick,n=e.showingPorts;return(0,d.BX)(m.G,{css:n?ec:el,children:[(0,d.tZ)(p.xv,{color:"dimmer",children:(0,d.tZ)(W.zx,{size:"small",variant:"underlinedOnHover",iconLeft:(0,d.tZ)($.Z,{}),text:"Ask AI",onClick:void 0===t?function(){}:t})}),(0,d.tZ)(m.G,{css:ea.verticalDivider})]})}function ed(e){var t=e.openedPorts;return(0,d.tZ)(m.G,{children:(0,d.BX)("table",{children:[(0,d.BX)("tr",{children:[(0,d.tZ)("th",{css:ea.portTooltipHeader,children:"Internal"}),(0,d.tZ)("th",{}),(0,d.tZ)("th",{css:ea.portTooltipHeader,children:"External"})]}),(0,d.tZ)("tbody",{children:t.map(function(e){var t=e.configuration,n=!0,r=null;switch(t.type){case ee.DL.FORWARDED:n=!0,r=":".concat(t.externalPort);break;case ee.DL.INTERNAL_ONLY:n=!1,r=null;break;case ee.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case ee.DL.MISCONFIGURED:case ee.DL.CONFIG_MISSING:n=!0,r=(0,d.tZ)(Q.Z,{})}return(0,d.BX)("tr",{children:[(0,d.BX)("td",{css:ea.portTooltipColumnLeft,children:[":",t.localPort]}),(0,d.tZ)("td",{css:ea.portTooltipColumnMiddle,children:n?"→":null}),(0,d.tZ)("td",{children:r})]},t.localPort)})})]})})}function ef(e){var t=e.isDone,n=e.error,r=e.finishedTooltipText,i=e.executionPillText,o=e.runningTooltipText,a=e.circleColor,l=void 0===a?b.TV.accentPositiveDefault:a,c=e.duration,s=e.time,u=e.openPane,f=e.isCollapsed,h=e.setIsCollapsed,v=e.lastMeaningfullLine,g=e.openedPorts,y=e.onAiChatClick,w=(0,et.Z)(new Date(s),"HH:mm:ss, MM/dd"),Z=void 0!==g&&g.length>0,x="";return Z&&(x=1===g.length?":".concat(g[0].configuration.localPort):"".concat(g.length," ").concat((0,F.Z)("port",g.length))),(0,d.BX)(m.G,{css:ea.outputBlockMetadataWrapper,onDoubleClick:function(){return h(!f)},children:[(0,d.BX)(m.G,{css:ea.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,d.tZ)(H.hU,{alt:f?"Expand":"Collapse",onClick:function(){return h(!f)},children:f?(0,d.tZ)(J.Z,{}):(0,d.tZ)(q.Z,{})}),(0,d.tZ)(V.D,{color:"grey",text:eo(i),css:ea.executionPill}),(0,d.tZ)(m.G,{css:ea.lastLineTextWrapper,children:f?(0,d.tZ)(p.xv,{css:ea.lastLineText,variant:"small",children:v}):null})]}),(0,d.BX)(m.G,{css:ea.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,d.tZ)(eu,{showingPorts:Z,onClick:y}),Z?(0,d.BX)(d.HY,{children:[(0,d.BX)(m.G,{css:ea.portInfoDomain,children:[(0,d.tZ)(p.xv,{color:"dimmer",css:ea.portInfoText,children:(0,d.tZ)(z.u,{tooltip:"Open Webview",children:(0,d.tZ)(W.zx,{size:"small",variant:"underlinedOnHover",text:Z?"{...}.replit.dev":"",onClick:function(){u({type:"webview",data:Z?{portType:"local",port:g[0].configuration.localPort}:void 0},!0)}})})}),(0,d.tZ)(m.G,{css:ea.verticalDivider})]}),(0,d.BX)(m.G,{css:ea.portInfoPorts,children:[(0,d.tZ)(p.xv,{color:"dimmer",css:ea.portInfoText,children:(0,d.tZ)(z.u,{tooltip:(0,d.tZ)(ed,{openedPorts:g}),children:(0,d.tZ)(W.zx,{size:"small",variant:"underlinedOnHover",iconLeft:(0,d.tZ)(Y.Z,{color:b.TV.accentPositiveStronger}),text:x,onClick:function(){u({type:"networking"},!0)}})})}),(0,d.tZ)(m.G,{css:ea.verticalDivider})]})]}):null,(0,d.BX)(p.xv,{color:"dimmer",variant:"small",css:ea.dateText,children:[c?(0,d.tZ)(z.u,{tooltip:"".concat(Math.round(c).toLocaleString(),"ms"),children:c<1e3?"".concat(Math.floor(c),"ms"):c<6e4?"".concat(Math.floor(c/1e3),"s"):"".concat(Math.floor(c/6e4),"m")}):null,c?"".concat("\xa0","on").concat("\xa0"):null,w]}),t?(0,d.tZ)(z.u,{tooltip:r,children:void 0!==n?(0,d.tZ)(Q.Z,{}):(0,d.tZ)(j.Z,{})}):(0,d.tZ)(z.u,{tooltip:void 0===o?"Running...":o,children:(0,d.tZ)(K.Z,{color:l})})]})]})}function eh(e){var t,n,r=e.isCollapsed,i=e.setIsCollapsed,o=e.openPane,a=e.startTime,l=e.endTime,c=e.localStartTime,s=e.localEndTime,u=e.isDone,f=e.data,h=e.error,p=e.ports,m=e.onAiChatClick,v=em(!u),g=ev(f.onMessage),y=(0,P.r4)(p,f.cgroup);a&&l?t=l-a:!u&&c?t=v-c:u&&s&&(t=s-c);var b="Finished";return void 0!==h&&(b=void 0!==h?eo(h):"Finished with error"),(0,d.tZ)(ef,{isDone:u,error:h,finishedTooltipText:b,executionPillText:null!==(n=f.executionMode)&&void 0!==n?n:"unknown",duration:t,time:null!=a?a:c,lastMeaningfullLine:g,openPane:o,isCollapsed:r,setIsCollapsed:i,openedPorts:y,onAiChatClick:m})}function ep(e){var t,n=e.isCollapsed,r=e.setIsCollapsed,i=e.openPane,o=e.localStartTime,a=e.localEndTime,l=e.isDone,c=e.type,s=e.error,u=e.data,f=e.onAiChatClick,h=em(!l),m=ev(u.onMessage),v=es[c],g=s?(0,d.BX)(p.xv,{multiline:!0,children:[eo(es[c])," error",(0,d.tZ)("br",{}),s]}):"Finished",y=b.TV.accentPositiveDefault,w="Running...";if(c===N.kH.DEBUGGER){var Z=u.debugState;y="paused"===Z?b.TV.yellowDefault:b.TV.accentPositiveDefault,w="paused"===Z?"Paused":"Running..."}return a?t=a-o:!l&&o&&(t=h-o),(0,d.tZ)(ef,{isCollapsed:n,setIsCollapsed:r,openPane:i,isDone:l,finishedTooltipText:g,executionPillText:v,duration:t,time:o,circleColor:y,runningTooltipText:w,lastMeaningfullLine:m,error:s,onAiChatClick:f})}function em(e){var t=(0,s._)((0,C.useState)(function(){return Date.now()}),2),n=t[0],r=t[1];return(0,C.useEffect)(function(){if(e){var t=setInterval(function(){r(Date.now())},100);return function(){clearInterval(t)}}},[e]),n}function ev(e){var t=(0,s._)((0,C.useState)(""),2),n=t[0],r=t[1];return(0,C.useEffect)(function(){return e(function(e){var t,n=null===(t=(0,ei.Z)(e).split("\n").reverse().find(function(e){return e.trim().length>0}))||void 0===t?void 0:t.trim();n&&r(n)})}),n}function eg(e){var t,n,r=e.isCollapsed,i=e.setIsCollapsed,o=e.openPane,a=e.isDone,l=e.type,c=e.data,s=e.error,u=e.localStartTime,f=e.localEndTime,h=e.startTime,p=e.endTime,m=e.ports,v=e.openAIWithMessage,g=(t=c.onMessage,n=(0,C.useRef)(""),(0,C.useEffect)(function(){return t(function(e){n.current=(n.current+e).slice(-1500)})},[t]),n.current),y=function(){g&&(null==v||v((0,en.Rn)(g)))};switch(l){case N.kH.EXECUTION:return(0,d.tZ)(eh,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:l,startTime:h,endTime:p,localStartTime:u,localEndTime:f,data:c,error:s,ports:m,onAiChatClick:y});case N.kH.DEBUGGER:case N.kH.PACKAGER:case N.kH.UNIT_TEST:case N.kH.FORMATTER:return(0,d.tZ)(ep,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:l,localStartTime:u,localEndTime:f,data:c,error:s,ports:m,onAiChatClick:y});default:(0,er.Z)(l)}}var ey=n(93880),eb=n(59500),ew=n(35909),eZ=n(85033),ex=n(46026),eC=n(59786),e_=n(36136),eS={noScroll:!0},ek=(0,v.X)({terminal:{gridRow:1,gridColumn:1,position:"sticky",top:ey.Cn.topOffset,"& .xterm":[b.l0.py(ey.J),b.l0.pl(ey.J),b.l0.height("100%"),b.l0.overflow("hidden")],"& .xterm-viewport":[b.l0.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:ey.Cn.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4}});function eE(e){var t=e.onMessage,n=e.onInput,r=e.openFile,i=e.openAIWithMessage,o=e.openSearchAndReplace,a=e.openWebview,l=e.listFiles,c=e.autoFocus,u=e.maxHeight,f=e.onResizeTerminal,h=e.scrollPosition,p=e.scrollParent,v=(0,ey.fB)({maxHeight:u,openFile:r,listFiles:l,openWebview:a}),g=v.visibleHeight,y=v.visibleLines,b=v.bufferHeight,w=v.bufferLines,Z=v.wrapperResizeRef,x=v.xterm,_=v.xtermRef,S=v.hasScrollback,k=(0,C.useMemo)(function(){return null==x?void 0:x._term},[x]),E=(0,C.useMemo)(function(){var e,t=null==k?void 0:k._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[k]),T=(0,s._)((0,C.useState)(!1),2),R=T[0],I=T[1],D=(0,s._)((0,C.useState)(""),2),B=D[0],G=D[1],A=(0,s._)((0,C.useState)(!1),2),P=A[0],N=A[1],L=(0,C.useRef)(null),O=(0,eC.P5)({controlName:"flag-output-userevents",logFlagToAnalytics:!1}),U=(0,e_.K)();(0,C.useEffect)(function(){return function(){null!==L.current&&clearTimeout(L.current)}},[L]),(0,C.useEffect)(function(){if(k){if(h<1||!S){k.scrollToLine(0);return}var e=b-g,t=w-y;if(e<1){k.scrollToLine(0);return}k.scrollToLine(Math.round(h/e*t))}},[b,w,S,h,k,g,y]);var M=(0,C.useCallback)(function(){if(k){var e=k.getSelectionPosition();e&&p(e.start.y*E.height-u/2)}},[k,u,p,E.height]);(0,C.useEffect)(function(){if(O)return t(function(e){return U("repl:run:output",{output:e})})},[t,O,U]);var X=(0,eb.av)().onContextMenu,F=(0,ew.j)({xterm:x,isOutputsTerminal:!0,openAIWithMessage:i,openShellSearch:function(e){I(!0),G(e)},openSearchAndReplace:o});return(0,d.BX)(ey.VU,{onInput:n,xterm:x,wrapperResizeRef:Z,bufferHeight:b,onMessage:t,onResizeTerminal:f,autoFocus:c,style:{pointerEvents:P?"none":"all"},onWheel:function(){N(!0),L.current&&clearTimeout(L.current),L.current=setTimeout(function(){N(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,ex.jh)(e)&&(I(!0),e.preventDefault())},children:[R?(0,d.tZ)(m.G,{css:ek.searchWidget,children:(0,d.tZ)(eZ.R,{searchValue:B,setSearchValue:G,findPrevious:function(e){(null==x?void 0:x.findPrevious(e,eS))&&M()},findNext:function(e){(null==x?void 0:x.findNext(e,eS))&&M()},exit:function(){return I(!1)}})}):null,(0,d.tZ)(ey.UB,{xtermRef:_,visibleHeight:g,maxHeight:u,css:ek.terminal,onContextMenu:function(e){return X(e,{command:F})}})]})}var eT=n(80888),eR=(0,v.X)({emptyStateWrapper:[b.l0.p(8),b.l0.display.block,{lineHeight:"32px"}],simpleRunButtonWrapper:[b.l0.rowWithGap(6),b.l0.backgroundColor.accentPositiveDimmest,b.l0.color.accentPositiveStrongest,b.l0.align.center,b.l0.borderRadius(8),b.l0.py(2),b.l0.px(6),b.l0.mx(4),b.l0.cursor.pointer,{"&:hover":[b.l0.color.white,b.l0.backgroundColor.accentPositiveDefault]}]});function eI(e){var t=e.runner;return(0,d.tZ)(m.G,{tag:"span",style:{display:"inline-block"},children:(0,d.BX)(m.G,{tag:"button",onClick:function(){var e=t.getRunState();(e===N.Ah.IDLE||e===N.Ah.STOPPING)&&t.run()},css:eR.simpleRunButtonWrapper,children:[(0,d.tZ)(eT.Z,{size:12}),(0,d.tZ)(p.xv,{children:"Run"})]})})}function eD(e){var t=e.runner,n=(0,s._)((0,C.useState)(function(){return t.getRunState()}),2),r=n[0],i=n[1];return((0,C.useEffect)(function(){var e=t.onStateChanged(function(e){i(e)});return function(){return e()}},[t]),r===N.Ah.OFFLINE)?(0,d.tZ)(m.G,{css:eR.emptyStateWrapper,children:"The Repl is booting..."}):r===N.Ah.RUNNING||r===N.Ah.BEFORE_RUN?(0,d.tZ)(m.G,{css:eR.emptyStateWrapper,children:"Running..."}):(0,d.BX)(m.G,{css:eR.emptyStateWrapper,children:["Results of your code will appear here when you"," ",(0,d.tZ)(eI,{runner:t})," the project."]})}var eB=(0,I.$)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),eG=eB.cssVars,eA=eB.styleTokens,eP=(0,v.X)({outputsListParent:[b.l0.height("100%"),b.l0.overflow("hidden"),b.l0.borderRadius(0,0,8,8)],outputsListWrapper:[b.l0.height("100%")],outputsList:[b.l0.height("100%"),b.l0.overflowY("scroll")],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[b.l0.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[b.l0.minHeight(eA.blockMinHeight)],outputBlockTerminalWrapper:[b.l0.minHeight(eA.blockMinHeight),{backgroundColor:eA.terminalBackgroundColor}],outputBlockClosingBorder:[b.l0.height(1),b.l0.zIndex(1),b.l0.border({direction:"bottom",width:1,style:"solid",color:b.TV.backgroundHigher}),{marginTop:-1}],terminalLoadingWrapper:[b.l0.p(8),b.l0.height(eA.previewHeight)],terminalLoadingLine:[b.l0.borderRadius(2),A.p.foregroundPulse(),b.l0.height(16),b.l0.mb(4)]});function eN(e){var t=e.targetHeight,n=Math.min(Math.floor((t-8)/20),4),r=(0,C.useMemo)(function(){return Array.from({length:n}).map(function(e,t){return(0,d.tZ)(m.G,{css:[eP.terminalLoadingLine],style:{width:100*Math.random()+"%"}},t)})},[n]);return(0,d.tZ)(m.G,{css:eP.terminalLoadingWrapper,style:(0,_._)({},eG.previewHeight,t+"px"),children:(0,d.tZ)(m.G,{style:{position:"sticky",top:36},children:r})})}function eL(e){var t,n,r,i,o,a,l,c,u,f,h,p,v,g,y,b,w,Z,x,E=e.onInput,I=e.openFile,B=e.openPane,G=e.openAIWithMessage,A=e.openSearchAndReplace,L=e.listFiles,O=e.autoFocus,M=e.rootRef,F=e.maxHeight,W=e.onResizeTerminal,H=e.isDone,V=e.data,z=e.error,j=e.localStartTime,q=e.localEndTime,J=e.startTime,Y=e.endTime,K=e.type,$=e.visualState,Q=e.onSetVisualState,ee=e.ports,et=e.onDontExposePort,en=e.onDoExposePort,er=(0,C.useRef)(null),ei=(0,s._)((0,C.useState)(!0),2),eo=ei[0],ea=ei[1],el=(0,s._)((0,C.useState)(!1),2),ec=el[0],es=el[1],eu=(0,s._)((0,C.useState)(0),2),ed=eu[0],ef=eu[1],eh=(0,U.f)(),ep=(0,T.Z)(eo,ec?6e4:500),em=(0,P.r4)(ee,K===N.kH.EXECUTION?V.cgroup:void 0),ev=(0,s._)((0,C.useState)(0),2),eb=ev[0],ew=ev[1],eZ=(0,C.useCallback)(function(e,t){B({type:"webview",data:{portType:"local",path:e,port:t}},!0)},[B]),ex=(n=(t={maxHeight:F,visualState:$,onSetVisualState:Q}).visualState,r=t.onSetVisualState,i=t.maxHeight,a=(o=(0,s._)((0,C.useState)(0),2))[0],l=o[1],c=(0,C.useRef)(null),f=(u=(0,s._)((0,C.useState)(n===N.MZ.EXPANDED?"expanded":"collapsed"),2))[0],h=u[1],v=(p=(0,s._)((0,C.useState)(void 0),2))[0],g=p[1],y=(0,R.Z)(function(e){var t=e.height;"expanded"===f&&l(t)},{type:"debounce",wait:200}),(0,C.useEffect)(function(){if(c.current)switch(f){case"start-collapsing":h("is-collapsing");break;case"is-collapsing":g(0);break;case"start-expanding":h("is-expanding");break;case"is-expanding":g(a);break;case"expanded":g(void 0)}},[f,a]),b="expanded"!==f&&"is-expanding"!==f,w=(0,C.useCallback)(function(e){r(e?N.MZ.COLLAPSED:N.MZ.EXPANDED)},[r]),Z=(0,C.useRef)(n),(0,C.useEffect)(function(){Z.current===N.MZ.EXPANDED&&n===N.MZ.COLLAPSED&&c.current&&(h("start-collapsing"),g(Math.min(c.current.getBoundingClientRect().height,i)),h("start-collapsing")),Z.current===N.MZ.COLLAPSED&&n===N.MZ.EXPANDED&&h("start-expanding"),Z.current=n},[i,n]),{collapsedStep:f,isCollapsed:b,setIsCollapsed:w,blockWrapperRef:c,blockWrapperProps:{style:{height:v,transition:"height 120ms ease-out",overflow:"expanded"===f||"start-collapsing"===f?"visible":"hidden"},onTransitionEnd:function(){"is-collapsing"===f&&h("collapsed"),"is-expanding"===f&&h("expanded")}},blockResizeRef:y,measuredBlockHeight:a}),eC=ex.collapsedStep,e_=ex.isCollapsed,eS=ex.setIsCollapsed,ek=ex.blockWrapperRef,eT=ex.blockWrapperProps,eR=ex.blockResizeRef,eI=ex.measuredBlockHeight;(0,C.useEffect)(function(){if(M.current){var e,t=M.current,n=function(){var n,r;ef(Math.max(0,t.scrollTop-(null!==(r=null===(n=er.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0))),es(!0),e&&clearTimeout(e),e=setTimeout(function(){es(!1)},500)};return t.addEventListener("scroll",n),function(){clearInterval(e),t.removeEventListener("scroll",n)}}},[M,er]),(0,C.useEffect)(function(){if(er.current&&M.current)return(0,D.j)(er.current,function(){return ea(!0),function(){ea(!1)}},{root:M.current,threshold:0})},[M,er]);var eD=(0,R.Z)(function(e){var t=e.height;"expanded"===eC&&ew(t)},{type:"debounce",wait:200}),eB=!1;return"collapsed"===eC?eB=!1:(!H||ep)&&(eB=!0),(0,d.BX)(m.G,{innerRef:er,children:[(0,d.tZ)(eg,{isCollapsed:e_,setIsCollapsed:eS,openPane:B,isDone:H,data:V,localStartTime:j,localEndTime:q,startTime:J,endTime:Y,type:K,error:z,ports:ee,openAIWithMessage:G}),(0,d.tZ)(m.G,{innerRef:eD,style:{position:"sticky",top:28},children:(0,d.tZ)(X.ms,{configurations:em.map(function(e){return e.configuration}),openWebview:function(){eZ("/",em[0].configuration.localPort)},openNetworkingTool:function(){B({type:"networking"},!0)},onDontExposePort:function(){1===em.length&&et(em[0].configuration.localPort)},onDoExposePort:function(){1===em.length&&en(em[0].configuration.localPort)}})}),(0,d.tZ)("div",(0,k._)((0,S._)({ref:ek},eT),{children:(0,d.tZ)(m.G,{css:eP.outputBlockTerminalWrapper,style:(x={},(0,_._)(x,eG.blockMinHeight,eI+"px"),(0,_._)(x,eG.terminalBackgroundColor,null==eh?void 0:eh.background),(0,_._)(x,ey.Dq.topOffset,28+eb+"px"),x),children:eB?(0,d.tZ)(m.G,{innerRef:eR,children:(0,d.tZ)(eE,{onMessage:V.onMessage,onInput:E,openFile:I,openAIWithMessage:G,openSearchAndReplace:A,openWebview:eZ,listFiles:L,maxHeight:F-28-eb,onResizeTerminal:W,scrollPosition:ed,scrollParent:function(e){var t,n,r,i=e+(null!==(r=null===(t=er.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0);null===(n=M.current)||void 0===n||n.scrollTo({top:i})},autoFocus:O})}):(0,d.tZ)(eN,{targetHeight:eI})})})),(0,d.tZ)(m.G,{css:eP.outputBlockClosingBorder})]})}function eO(e){var t=e.performPaneOperation,n=e.isActive,r=e.runner,i=e.ports,o=e.listFiles,a=e.sessionId,l=e.openAIWithMessage,c=e.onDontExposePort,u=e.onDoExposePort,f=(0,s._)((0,C.useState)([]),2),h=f[0],p=f[1],v=(0,s._)((0,C.useState)(0),2),g=v[0],y=v[1],b=(0,s._)((0,C.useState)(!0),2),w=b[0],Z=b[1],x=(0,C.useRef)(null),_=(0,L.Do)(G.y.Output),S=(0,s._)((0,C.useState)(!1),2),k=S[0],T=S[1],I=(0,C.useRef)(0),D=(0,B.T3)(),A=(0,R.Z)(function(e){y(e.height)},{type:"throttle",wait:200}),P=(0,C.useCallback)(function(e){t({operation:"open",secondary:!0,pane:{type:(0,O.Dp)(e),data:e}})},[t]),U=(0,C.useCallback)(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t({operation:"open",secondary:n,pane:e})},[t]),X=(0,C.useCallback)(function(e){t({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[t]),F=(0,C.useCallback)(function(e){l(e),a&&t({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:a}}})},[t,l,a]);return(0,C.useEffect)(function(){return r.onStateChanged(function(e){T(e===N.Ah.BEFORE_RUN)})},[r]),(0,C.useEffect)(function(){p(r.getOutputBlocks())},[r]),(0,C.useEffect)(function(){var e=r.onAllBlocksChanged(function(e){p(e)}),t=r.onBlockChanged(function(e){!h.find(function(t){return t.id===e.id})&&x.current&&(x.current.scrollTo(0,x.current.scrollHeight),Z(!0)),p((0,M.Uy)(function(t){var n=t.findIndex(function(t){return t.id===e.id});n>=0?t[n]=e:t.push(e)}))});return function(){t(),e()}},[r,h,x]),(0,d.BX)(m.G,{css:eP.outputsListParent,innerRef:_,children:[k?(0,d.tZ)(E.Z,{}):null,(0,d.BX)(m.G,{css:eP.outputsListWrapper,innerRef:A,children:[0===h.length?(0,d.tZ)(eD,{runner:r}):null,(0,d.BX)(m.G,{css:[eP.outputsList,w&&eP.outputsListSnapToBottom],innerRef:x,onScroll:function(){x.current&&(x.current.scrollTop<I.current?Z(!1):Z(x.current.scrollHeight-x.current.scrollTop-20<g),I.current=x.current.scrollTop)},children:[h.map(function(e,t){var a=t===h.length-1;return(0,d.tZ)(eL,{rootRef:x,maxHeight:g,onInput:function(e){var t=r.getRunState();(t===N.Ah.IDLE||t===N.Ah.RUNNING)&&r.sendInput(e)},openFile:P,openAIWithMessage:F,openSearchAndReplace:X,openPane:U,listFiles:o,onResizeTerminal:function(t){e.isDone||e.type!==N.kH.EXECUTION||r.resizeTerminalForBlock(e.id,t)},autoFocus:n&&a&&!D,isDone:e.isDone,type:e.type,error:e.error,visualState:e.visualState,onSetVisualState:function(t){return r.setBlockVisualState(e.id,t)},localStartTime:e.localStartTime,localEndTime:e.localEndTime,startTime:e.startTime,endTime:e.endTime,data:e.data,ports:i,onDontExposePort:c,onDoExposePort:u},e.id)}),w?(0,d.tZ)(m.G,{css:eP.scrollSnap}):null]})]})]})}var eU=n(95369),eM=n(65914),eX=n(57159),eF=n(60305),eW=n(31417),eH=n(50243);(r=a||(a={})).RUNNING="RUNNING",r.FINISHED="FINISHED",r.FAILED="FAILED",(i=l||(l={})).NOT_STARTED="NOT_STARTED",i.RUNNING="RUNNING",i.FINISHED="FINISHED",i.FAILED="FAILED",i.ERROR="ERROR";var eV=n(55260),ez=(0,v.X)({outputBlockMetadataWrapper:[{containerType:"size"},b.l0.pl(4),b.l0.pr(8),b.l0.rowWithGap(4),b.l0.align.center,b.l0.justify.spaceBetween,b.l0.height(28),b.l0.backgroundColor.backgroundDefault,b.l0.border({direction:"bottom",width:1,style:"solid",color:b.TV.backgroundHigher}),b.l0.position.sticky,b.l0.top(0),b.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[b.l0.rowWithGap(4),b.l0.align.center,b.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[b.l0.rowWithGap(4),b.l0.align.center],taskNamePill:[b.l0.flex.shrink(0),b.l0.display.flex,{"@container (max-width: 120px)":[b.l0.display.none]}],lastLineTextWrapper:[b.l0.flex.shrink(1)],lastLineText:[b.l0.display.block,b.l0.maxWidth("100%"),b.l0.overflow("hidden"),b.l0.font.code,b.l0.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],dateText:[b.l0.flex.row,{"@container (max-width: 260px)":[b.l0.display.none]}],verticalDivider:[b.l0.mx(6),{width:1,height:28,background:b.TV.backgroundHigher}],portInfoDomain:[b.l0.display.flex,b.l0.flex.row,b.l0.align.center,b.l0.m(0),{"@container (max-width: 400px)":b.l0.display.none}],portInfoPorts:[b.l0.display.flex,b.l0.flex.row,b.l0.align.center,b.l0.m(0),{"@container (max-width: 320px)":b.l0.display.none}],portTooltipHeader:[b.l0.color.foregroundDimmer,b.l0.fontWeight.normal,b.l0.px(2),b.l0.pb(2)],portTooltipColumnLeft:[b.l0.textAlign.right],portTooltipColumnMiddle:[b.l0.textAlign.center,b.l0.px(4)],outputBlockClosingBorder:[b.l0.height(1),b.l0.zIndex(1),b.l0.border({direction:"bottom",width:1,style:"solid",color:b.TV.backgroundHigher}),{marginTop:-1}]});function ej(e){var t,n=e.isCollapsed,r=e.setIsCollapsed,i=e.taskName,o=e.duration,a=e.isDone,l=e.hasError,c=e.errorMessage,s=(t=e.startTime,(0,et.Z)(new Date(t),"HH:mm:ss, MM/dd"));return(0,d.BX)(m.G,{css:ez.outputBlockMetadataWrapper,onDoubleClick:function(){return r(!n)},children:[(0,d.BX)(m.G,{css:ez.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,d.tZ)(H.hU,{alt:n?"Expand":"Collapse",onClick:function(){return r(!n)},children:n?(0,d.tZ)(J.Z,{}):(0,d.tZ)(q.Z,{})}),(0,d.tZ)(V.D,{color:"grey",text:i,css:ez.taskNamePill})]}),(0,d.BX)(m.G,{css:ez.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,d.BX)(p.xv,{color:"dimmer",variant:"small",css:ez.dateText,children:[o?(0,d.tZ)(z.u,{tooltip:"".concat(Math.round(o).toLocaleString(),"ms"),children:o<1e3?"".concat(Math.floor(o),"ms"):o<6e4?"".concat(Math.floor(o/1e3),"s"):"".concat(Math.floor(o/6e4),"m")}):null,o?"".concat("\xa0","on").concat("\xa0"):null,s]}),a?(0,d.tZ)(z.u,{tooltip:l?"Error".concat(c?": ".concat(c):""):"Finished",children:l?(0,d.tZ)(Q.Z,{}):(0,d.tZ)(j.Z,{})}):(0,d.tZ)(z.u,{tooltip:"Running...",children:(0,d.tZ)(K.Z,{color:b.TV.accentPositiveDefault})})]})]})}function eq(e){var t,n,r,i,o,a,l=e.task,f=e.taskIdx,h=e.runId,p=e.connectToTask,v=e.config,g=(0,C.useRef)(!1),y=(0,s._)((0,C.useState)(null),2),b=y[0],w=y[1],Z=(0,ey.fB)({maxHeight:300,openFile:function(){},listFiles:function(){return Promise.resolve({error:null,files:[]})},openWebview:function(){}}),x=Z.visibleHeight,_=Z.bufferHeight,S=Z.wrapperResizeRef,k=Z.xterm,E=Z.xtermRef;(0,C.useEffect)(function(){function e(){return(e=(0,c._)(function(){var e,t,n,r,i,o,a,l,c;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(g.current||!k||!b)return[2];return g.current=!0,[4,p({runId:h,taskIdx:f})];case 1:(e=s._.apply(void 0,[u.sent(),2]))[0],t=e[1],n=!1,r=!1,u.label=2;case 2:u.trys.push([2,7,8,13]),o=(0,eW._)(t),u.label=3;case 3:return[4,o.next()];case 4:if(!(n=!(a=u.sent()).done))return[3,6];(l=a.value).ok&&"output"===l.payload.$kind&&b(l.payload.chunk),u.label=5;case 5:return n=!1,[3,3];case 6:return[3,13];case 7:return c=u.sent(),r=!0,i=c,[3,13];case 8:if(u.trys.push([8,,11,12]),!(n&&null!=o.return))return[3,10];return[4,o.return()];case 9:u.sent(),u.label=10;case 10:return[3,12];case 11:if(r)throw i;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[p,h,l.state,f,b,k]);var T=(0,C.useCallback)(function(e){return w(function(){return e}),function(){}},[]),R="FINISHED"===l.state||"FAILED"===l.state,I=l.startTime,D=R?l.endTime:void 0,B=(t=!R,r=(n=(0,s._)((0,C.useState)(function(){return Date.now()}),2))[0],i=n[1],(0,C.useEffect)(function(){if(t){var e=setInterval(function(){i(Date.now())},100);return function(){clearInterval(e)}}},[t]),r);return I&&D?a=D-I:R||(a=B-I),(0,d.BX)(m.G,{children:[(0,d.tZ)(ej,{isCollapsed:!1,setIsCollapsed:function(){},taskName:"".concat(v.task).concat(v.args?' "'.concat(v.args,'"'):""),duration:a,isDone:R,hasError:"FAILED"===l.state,errorMessage:"FAILED"===l.state?null===(o=l.result)||void 0===o?void 0:o.message:void 0,startTime:l.startTime}),(0,d.BX)(m.G,{children:[(0,d.tZ)(ey.VU,{xterm:k,wrapperResizeRef:S,bufferHeight:_,onInput:function(e){},onMessage:T,onResizeTerminal:function(e){},children:(0,d.tZ)(ey.UB,{xtermRef:E,visibleHeight:x,maxHeight:300})}),(0,d.tZ)(m.G,{css:ez.outputBlockClosingBorder})]})]})}function eJ(){var e=(0,eV.Z)(),t=e.runStateObservable,n=e.connectToTask,r=(0,eH.yL)(t),i=(0,C.useMemo)(function(){return r?Object.entries(r).sort(function(e,t){return e[1].startTime-t[1].startTime}).flatMap(function(e){var t=(0,s._)(e,2),n=t[0],r=t[1];return r.tasks.filter(function(e){return e.state!==l.NOT_STARTED}).map(function(e,t){return{task:e,taskIdx:t,runId:n,config:r.workflow.tasks[t]}})}):[]},[r]);return(0,d.tZ)(m.G,{children:i.map(function(e){var t=e.task,r=e.taskIdx,i=e.runId,o=e.config;return(0,d.tZ)(eq,{task:t,config:o,taskIdx:r,runId:i,connectToTask:n},"".concat(i,":").concat(r))})})}var eY=f.Dy.Object({type:f.Dy.Literal("runnerOutput")}),eK={id:"outputs.clear",name:"Clear console history",default:void 0};function e$(e){var t,n,r,i,o,a,l,f,h=e.runner,p=e.options,m=(n=(t=(0,w.Z)()).fs,r=t.ports,i=(0,eV.Z)().clearHistory,o=(0,eC.P5)({controlName:"flag-work-flows",logFlagToAnalytics:!1}),a=(0,C.useMemo)(function(){return[{type:"action",label:"Clear history",icon:(0,d.tZ)(y.Z,{}),run:function(){o&&i(),h.clearBlockHistory()}}]},[o,h,i]),(0,x.L5)(function(){return{actions:a,type:"runnerOutput",startBlock:h.startBlock,endBlock:h.endBlock,writeOutputToBlock:h.writeOutputToBlock,writeErrorToBlock:h.writeErrorToBlock}},[h,a]),(0,Z.Il)(function(){return[eK.id,h.clearBlockHistory]},[h]),l=(0,C.useCallback)(function(e){r.updateDotReplitPortsMapping(e,void 0)},[r]),{onDoExposePort:(0,C.useCallback)(function(e){r.tryExposingPortAutomatically(e)},[r]),onDontExposePort:l,ports:r,fs:n}),v=m.ports,g=m.fs,b=m.onDontExposePort,_=m.onDoExposePort,S=(0,s._)((0,C.useState)(""),2),k=S[0],E=S[1],T=(0,eC.P5)({controlName:"flag-work-flows",logFlagToAnalytics:!1}),R=(0,eU.bD)({onSession:function(e){E(e),p.performPaneOperation({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,I=(0,s._)((0,eM.N)(),1)[0],D=(0,C.useCallback)((f=(0,c._)(function(e){return(0,u.Jh)(this,function(t){return(0,eF.j)(eF.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:I,user_model_selection:I,message_content:e,message_source:"console"}),R({kind:"message",message:e,intent:eX.$h.EXPLAIN,model:"advanced"===I?eX.BY.ADVANCED:eX.BY.BASIC}),[2]})}),function(e){return f.apply(this,arguments)}),[I,R]);return T?(0,d.tZ)(eJ,{}):(0,d.tZ)(eO,{runner:h,ports:v,listFiles:g.listFiles,isActive:p.isActive,performPaneOperation:p.performPaneOperation,sessionId:k,openAIWithMessage:D,onDontExposePort:b,onDoExposePort:_})}var eQ=(0,v.X)({unavailable:[b.l0.p(8)]}),e0={Content:function(e){var t=e.options,n=(0,w.Z)().runner;return"outputs"!==n.mode?(0,d.tZ)(m.G,{css:eQ.unavailable,children:(0,d.tZ)(p.xv,{children:"Console is not available."})}):(0,d.tZ)(e$,{options:t,runner:n})},Icon:function(e){var t=e.size;return(0,d.tZ)(g.Z,{size:t})},getTitle:function(){return"Console"},decode:function(e){return h.B4.Decode(eY,e)}}},64780:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(74985),i=n(94778),o=n(87128),a=n(72121),l={Content:function(){return(0,r.tZ)(i.G,{style:{padding:32},children:(0,r.tZ)(a.Z,{children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.tZ)(o.Z,{})},getTitle:function(){return"Unsupported"},decode:function(){return{type:"commands",data:{autoFocus:!1}}}}},36214:function(e,t,n){n.d(t,{J:function(){return m},R:function(){return v}});var r=n(66626),i=n(74985),o=n(74044),a=n(99149),l=n(54556),c=n(48058),s=n(81199),u=n(50529),d=n(51500),f=n(95751),h=n(50959),p=o.Dy.Object({type:o.Dy.Literal("webview"),data:o.Dy.Optional(o.Dy.Union([o.Dy.Object({portType:o.Dy.Literal("local"),port:o.Dy.Number(),path:o.Dy.Optional(o.Dy.String())}),o.Dy.Object({portType:o.Dy.Literal("external"),port:o.Dy.Number(),path:o.Dy.Optional(o.Dy.String())})]))}),m=function(e){return a.B4.Decode(p,e)},v={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,o=(0,s.Z)(),a=o.container,l=o.runner,p=(0,r._)((0,h.useState)(function(){return function(){}}),2),m=p[0],v=p[1],g=(0,c.bg)();return(0,d.Z)({container:a,runner:l,refreshWebView:m}),(0,f.Z)({runner:l,refreshWebView:m}),(0,i.tZ)(u.e,{initialPort:(0,u.C)(t,g),initialPath:null==t?void 0:t.path,openPane:function(e){n({operation:"open",pane:e})},openNetworkingTool:function(){n({operation:"open",secondary:!0,pane:{type:"networking"}})},setRefreshCb:v})},Icon:function(e){var t=e.size;return(0,i.tZ)(l.Z,{size:t})},getTitle:function(){return"Webview"},decode:m}},72116:function(e,t,n){n.d(t,{U:function(){return Zw}});var r,i,o,a,l,c=n(66626),s=n(63257),u=n(74985),d=n(74044),f=n(99149),h=n(85763),p=n(16923),m=n(82230),v=n(94778),g=n(49224),y=n(38057),b=n(29318),w=n(72093),Z=n(81199),x=n(63416),C=n(70016),_=n(50959),S=n(36559),k=(0,g.X)({text:{width:"100%",textAlign:"center"},loaderContainer:[w.l0.display.flex,w.l0.center,w.l0.height("100%")]}),E=d.Dy.Object({type:d.Dy.Literal("binary"),data:d.Dy.Object({path:d.Dy.String()})}),T={Content:function(e){var t=e.pane,n=e.options;return(0,u.tZ)(R,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,u.tZ)(p.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,S.UO)(e.data.path)},decode:function(e){return f.B4.Decode(E,e)}};function R(e){var t=e.path,n=e.performPaneOperation,r=(0,Z.Z)().fs,i=(0,x.Mp)({path:t,performPaneOperation:n});(0,C.L5)(function(){if(i)return{commands:i?(0,s._)(i):[]}},[i]);var o=(0,c._)((0,_.useState)(null),2),a=o[0],l=o[1],d=(0,c._)((0,_.useState)(!0),2),f=d[0],p=d[1];return((0,_.useEffect)(function(){var e=r.watchFile(t,{onChange:function(e){l(e.toString("base64")),p(!1)},onError:function(){l(null),p(!1)},onMoveOrDelete:function(){l(null),p(!1)}});return function(){e(),p(!0),l(null)}},[r,t]),f)?(0,u.tZ)(v.G,{css:k.loaderContainer,children:(0,u.tZ)(b.Z,{})}):null===a?(0,u.tZ)(m.xv,{multiline:!1,children:"Failed to load binary file"}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(x.HK,{path:t,performPaneOperation:n}),(0,u.BX)(x.VY,{centered:!0,children:[(0,u.tZ)(m.xv,{css:k.text,children:"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."}),(0,u.tZ)(h.hU,{alt:"Download",css:[w.l0.position.absolute,w.l0.bottom(8),w.l0.right(8),w.l0.p(16)],children:(0,u.tZ)("a",{href:"data:text/plain;base64,".concat(a),download:(0,S.UO)(t),css:[w.l0.color.foregroundDimmer],children:(0,u.tZ)(y.Z,{})})})]})]})}var I=n(85242),D=n(18257),B=n(58045),G=n(52425),A=n(18158),P=n(36647),N=n(41733),L=n(30509),O=n(78950),U=n(18060),M=n(75993),X=n(15235),F=n(64479),W=n(1383),H=n(84126),V=n(64546),z=(0,g.X)({button:{width:"fit-content"}});function j(e){var t=e.code,n=e.activeFile,r=(0,V.Z)(n),i=r?{text:"Insert",iconRight:(0,u.tZ)(W.Z,{}),onClick:function(){return r({code:t,insertAt:"end"})}}:{text:"Copy",iconLeft:(0,u.tZ)(H.Z,{}),onClick:function(){return(0,M.Z)(t)}};return(0,u.tZ)(F.Tg,{background:"default",children:(0,u.tZ)(X.zx,(0,N._)({size:"small",variant:"outlined",css:z.button},i))})}var q=(0,g.X)({self:w.l0.colWithGap(4),content:[w.l0.rowWithGap(4),w.l0.backgroundColor.backgroundRoot,w.l0.borderRadius(4),w.l0.p(4),w.l0.align.center,{width:"fit-content"}]});function J(e){var t=e.method,n=e.content,r=e.activeFile,i=(0,c._)((0,_.useState)(n),2),o=i[0],a=i[1];return(0,u.BX)(v.G,{css:q.self,children:[(0,u.tZ)(et,{title:t}),(0,u.tZ)(v.G,{css:q.content,children:o.map(function(e,n){var r="".concat(t,"-").concat(n);return"input"===e.type?(0,u.tZ)(K,{i:n,value:e.value,placeholder:e.placeholder,setContent:a},r):(0,u.tZ)(Q,{value:e.value},r)})}),(0,u.tZ)(j,{code:o.reduce(function(e,t){return e+(t.value||("input"===t.type?t.placeholder:""))},""),activeFile:r})]})}var Y=(0,g.X)({self:[w.l0.width(64),w.l0.height(24),w.l0.zIndex(1)]});function K(e){var t=e.i,n=e.value,r=e.placeholder,i=e.setContent;return(0,u.tZ)(U.II,{onChange:function(e){i(function(n){return n.map(function(n,r){return t===r?(0,L._)((0,N._)({},n),{value:e.target.value}):n})})},placeholder:r,value:n||"",css:Y.self})}var $=(0,g.X)({self:[w.l0.borderRadius(0),w.l0.backgroundColor.backgroundRoot],code:[w.l0.font.code,w.l0.color.greyStronger,w.l0.p(4)]});function Q(e){var t=e.value;return(0,u.tZ)(v.G,{css:$.self,children:(0,u.tZ)(m.xv,{css:$.code,multiline:!1,children:t})})}var ee=(0,g.X)({self:w.l0.rowWithGap(4),bold:{fontWeight:w.TV.fontWeightMedium}});function et(e){var t=e.title,n=(0,c._)((0,P.Z)(function(){var e=(0,O._)(t.split(" "));return[e[0],e.slice(1).join(" ")]},[t]),2),r=n[0],i=n[1];return(0,u.BX)(v.G,{css:ee.self,children:[(0,u.tZ)(m.xv,{css:ee.bold,multiline:!1,children:r}),(0,u.tZ)(m.xv,{color:"dimmer",multiline:!1,children:i})]})}(gX=g3||(g3={})).IMPORT="Import the database",gX.CREATE="Create a new database",gX.SET="Set a key to a value",gX.GET="Get a key's value",gX.DELETE="Delete a key",gX.LIST="List all keys",gX.LIST_PREFIX="List keys with a prefix";var en={language:"Bash",methods:[ea("Set a key to a value","curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),ea("Get a key's value","curl $REPLIT_DB_URL/{{key}}"),ea("Delete a key","curl -XDELETE $REPLIT_DB_URL/{{key}}"),ea("List all keys",'curl "$REPLIT_DB_URL?prefix={{key}}"')]},er={language:"Node",methods:[ea("Import the database",'const Database = require("@replit/database")'),ea("Create a new database","const db = new Database()"),ea("Set a key to a value",'db.set("{{key}}", "{{value}}").then(() => {})'),ea("Get a key's value",'db.get("{{key}}").then(value => {})'),ea("Delete a key",'db.delete("{{key}}").then(() => {})'),ea("List all keys","db.list().then(keys => {})"),ea("List keys with a prefix",'db.list("{{prefix}}").then(matches => {})')]},ei={language:"Go",methods:[ea("Import the database",'import "github.com/replit/database-go"'),ea("Set a key to a value",'db.Set("{{key}}", "{{value}}")'),ea("Get a key's value",'value, _ := database.Get("{{key}}")'),ea("Delete a key",'database.Delete("{{key}}")'),ea("List all keys",'keys, _ := database.ListKeys("")'),ea("List keys with a prefix",'matches, _ := database.ListKeys("{{prefix}}")')]},eo={language:"Python",methods:[ea("Import the database","from replit import db"),ea("Set a key to a value",'db["{{key}}"] = "{{value}}"'),ea("Get a key's value",'db["{{key}}"]'),ea("Delete a key",'del db["{{key}}"]'),ea("List all keys","keys = db.keys()"),ea("List keys with a prefix",'matches = db.prefix("{{prefix}}")')]};function ea(e,t){return{method:e,content:function(e){for(var t=[],n=0;n<e.length;){var r=e.indexOf("{{",n),i=e.indexOf("}}",n);if(-1===r||-1===i){t.push({type:"code",value:e.substring(n)});break}t.push({type:"code",value:e.substring(n,r)}),t.push({type:"input",placeholder:e.substring(r+2,i)}),n=i+2}return t}(t)}}var el=(0,g.X)({self:w.l0.colWithGap(24),code:[w.l0.font.code,w.l0.color.greyStronger,w.l0.backgroundColor.backgroundRoot,w.l0.p(4),w.l0.borderRadius(4)]});function ec(e){var t=e.activeFile,n=(0,P.Z)(function(){return function(e){switch(e?(0,S.r6)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return er;case"go":return ei;case"py":return eo;default:return en}}(t)},[t]);return(0,u.BX)(v.G,{css:el.self,children:[(0,u.BX)(m.xv,{color:"dimmer",children:["You can use the Database from any Repl by making HTTP requests or a client library as outlined below. We’ve set an environment variable called ",(0,u.tZ)("code",{css:el.code,children:"REPLIT_DB_URL"})," in your Repl if you'd like to interact with the database directly."]}),n.methods.map(function(e){return(0,u.tZ)(J,{method:e.method,content:e.content,activeFile:t},"".concat(n.language).concat(e.method))})]})}var es=n(54738),eu=(0,g.X)({children:[w.l0.p(12),w.l0.colWithGap(8)]});function ed(e){var t=e.title,n=e.defaultExpanded,r=e.children;return(0,u.tZ)(es.Q,{defaultExpanded:n,headerContent:(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:t}),children:(0,u.tZ)(v.G,{css:eu.children,children:r})})}var ef=n(43312),eh=n(32622),ep=n(99266),em=n(15605),ev=(0,ef.F4)("from{opacity:0}to{opacity:1}"),eg=(0,g.X)({self:[w.l0.colWithGap(8),{animation:"".concat(ev," 100ms forwards ease-in-out alternate")}],selfLoadingText:[w.l0.height(16),w.l0.width(48),w.l0.borderRadius(4),ep.p.backgroundPulse()],selfLoading:[w.l0.height(12),w.l0.borderRadius(16),ep.p.backgroundPulse()],text:[w.l0.rowWithGap(4)],textSpan:[w.l0.width("fit-content"),w.l0.display.inlineFlex]});function ey(e){var t,n,r=e.database,i=e.loading,o=(null==r?void 0:r.sizeMB)||0,a=(t=1e6*(t=o)/1048576,"".concat(t.toFixed(),"/50 MiB")),l=i||!r;return(0,u.tZ)(v.G,{css:eg.self,children:l?(0,u.BX)(u.HY,{children:[(0,u.tZ)(v.G,{css:eg.selfLoadingText}),(0,u.tZ)(v.G,{css:eg.selfLoading})]}):(0,u.BX)(u.HY,{children:[(0,u.BX)(m.xv,{color:"dimmer",css:eg.text,multiline:!1,children:[(0,u.tZ)(v.K.span,{css:eg.textSpan,children:a}),(0,u.tZ)(v.K.span,{css:eg.textSpan,children:"|"}),(0,u.tZ)(v.K.span,{css:eg.textSpan,children:(n=(n=null==r?void 0:r.keysCount)||0,"".concat(n," ").concat((0,eh.Z)("key",n)))})]}),(0,u.tZ)(em.J,{current:o,total:50,tooltip:a})]})},l?"databaseLoadingStats":"databaseLoadedStats")}var eb=n(39271),ew=n(21262),eZ=n(71440),ex=n(58995);function eC(){var e=(0,ew._)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return eC=function(){return e},e}function e_(){var e=(0,ew._)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return e_=function(){return e},e}var eS={},ek=(0,eZ.Ps)(eC()),eE=(0,eZ.Ps)(e_(),ek),eT=(0,g.X)({self:[w.l0.colWithGap(16),w.l0.p(8),w.l0.backgroundColor.backgroundDefault,B.F3],link:[w.l0.color.accentPrimaryStronger,w.l0.pr(4)],sectionWrapper:[w.l0.colWithGap(16),w.l0.overflowY("auto"),w.l0.width("100%"),{flex:"1"}]});function eR(e){var t,n,r,i,o,a,l,c,s,d=e.performPaneOperation,f=(l=(i={variables:{replID:(0,eb.Z)()},pollInterval:1e4},o=(0,N._)({},eS,i),a=ex.a(eE,o)).data,c=a.error,s=a.loading,l&&("Repl"===l.repl.__typename?n=null==l?void 0:null===(r=l.repl)||void 0===r?void 0:r.database:t="Could not fetch Database info"),c&&("GraphQL error: You don't have access to this database"===c.message?n=null:t=c.message),{db:n,loading:s,error:t}),h=f.db,p=f.error,g=f.loading,y=(0,G.R3)();return(0,u.BX)(v.G,{css:eT.self,children:[(0,u.tZ)(m.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,u.BX)(v.G,{css:eT.sectionWrapper,children:[(0,u.BX)(v.G,{children:[(0,u.BX)(m.xv,{children:[(0,u.tZ)("a",{href:A.TT.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),d({operation:"open",pane:{type:"docs",data:{url:A.TT.REPL_DATABASE}}})},children:"Replit Database"})," ","is a free, easy to use key-value store. No configuration is necessary, so you can start using it right away."]}),p?(0,u.tZ)(m.xv,{css:[w.l0.color.accentNegativeStronger],children:p}):null]}),(0,u.tZ)(ed,{title:"Database Info",defaultExpanded:!0,children:(0,u.tZ)(ey,{database:h,loading:g})}),(0,u.tZ)(ed,{title:"Using the database",defaultExpanded:!0,children:(0,u.tZ)(ec,{activeFile:y})})]})]})}var eI=d.Dy.Object({type:d.Dy.Literal("database")}),eD={Content:function(e){var t=e.options.performPaneOperation;return(0,u.tZ)(eR,{performPaneOperation:t})},Icon:function(e){var t=e.size;return(0,u.tZ)(D.Z,{size:t})},getTitle:function(){return"Database"},decode:function(e){return f.B4.Decode(eI,e)}},eB=n(42516),eG=n(80403),eA=n(66873),eP=n(98924),eN=n(2761),eL=n(16826),eO=n(65377),eU="rgba(180, 0, 0, 0.125)",eM="rgba(0, 180, 0, 0.125)",eX=eL.tk.theme({"&.cm-merge-b .cm-changedLine":{background:"rgba(0, 180, 0, 0.075)"},"&.cm-merge-a .cm-changedLine":{background:"rgba(180, 0, 0, 0.075)"},"&.cm-merge-b .cm-changedLineGutter":{background:eM},"&.cm-merge-a .cm-changedLineGutter":{background:eU},"&.cm-merge-b .cm-changedText":{background:eM,outline:"solid 1px ".concat(eM),borderRadius:"2px"},"&.cm-merge-a .cm-changedText":{background:eU,outline:"solid 1px ".concat(eU),borderRadius:"2px"},".cm-collapsedLines":{color:eO.TV.accentPrimaryStrongest,background:eO.TV.accentPrimaryDimmest,transition:"background 250ms ease","&:hover":{background:eO.TV.accentPrimaryDimmer}}}),eF=[eL.tk.baseTheme({".cm-scroller":{height:"100% !important",overflowY:"auto !important"}}),eL.tk.theme({".cm-scroller":{height:"auto !important",overflowY:"visible !important"}})],eW=[eG.Wl.highest(eF),eX],eH=n(51561),eV=n(51148),ez=n(36752),ej=n(85733);function eq(e){var t,n,r,i=e.a,o=e.b,a=e.style,l=e.className,d=(0,eP._)(e,["a","b","style","className"]),f=(0,c._)((0,_.useState)(null),2),h=f[0],p=f[1],m=(0,c._)((0,_.useState)(null),2),v=m[0],g=m[1],y=(0,_.useRef)(!1),b=(0,ej.Z)(d),w=(0,ej.Z)(i.doc),Z=(0,ej.Z)(o.doc),x=(0,eV.Xl)((0,L._)((0,N._)({},i),{readOnly:!0})),C=(0,eV.Xl)((0,L._)((0,N._)({},o),{readOnly:!0})),S=(t=(0,c._)((0,_.useState)(),2)[1],(0,_.useCallback)(function(e){t(function(){throw e})},[])),k=d.orientation,E=d.revertControls,T=d.renderRevertControl,R=d.collapseUnchanged,I=d.gutter,D=d.highlightChanges,B=void 0!==R,G=null==R?void 0:R.margin,A=null==R?void 0:R.minSize,P=null!==(n=null==v?void 0:v.a)&&void 0!==n?n:null,O=null!==(r=null==v?void 0:v.b)&&void 0!==r?r:null;return(0,eV.uF)(),(0,_.useEffect)(function(){var e=function(e){S(e)};if(h){var t=null;try{t=new eN.QK((0,L._)((0,N._)({},b.current),{parent:h,a:{doc:w.current,extensions:[eL.tk.exceptionSink.of(e),eW].concat((0,s._)(x))},b:{doc:Z.current,extensions:[eL.tk.exceptionSink.of(e),eW].concat((0,s._)(C))}}))}catch(t){e(t)}return t&&(g(t),y.current=!0),function(){if(t){g(null);try{t.destroy()}catch(t){e(t)}}}}},[h]),(0,_.useEffect)(function(){P&&!y.current&&P.dispatch({changes:{from:0,to:P.state.doc.length,insert:i.doc}})},[P,i.doc]),(0,_.useEffect)(function(){O&&!y.current&&O.dispatch({changes:{from:0,to:O.state.doc.length,insert:o.doc}})},[O,o.doc]),(0,_.useEffect)(function(){v&&!y.current&&eJ(v,b.current.collapseUnchanged)},[v,b,i.doc,o.doc]),(0,_.useEffect)(function(){if(v&&!y.current){var e=B?{margin:G,minSize:A}:void 0;v.reconfigure({orientation:k,revertControls:E,renderRevertControl:T,collapseUnchanged:e,gutter:I,highlightChanges:D}),e&&eJ(v,e)}},[v,k,E,T,B,G,A,I,D]),(0,eH.H)(P),(0,eH.H)(O),(0,_.useEffect)(function(){y.current=!1}),(0,u.BX)(u.HY,{children:[(0,u.tZ)("div",{ref:p,className:l,style:a}),(0,u.tZ)(ez.N1,{view:P}),(0,u.tZ)(ez.N1,{view:O})]})}function eJ(e,t){e&&t&&(e.reconfigure({collapseUnchanged:void 0}),e.reconfigure({collapseUnchanged:(0,N._)({},t)}))}var eY=n(54590),eK=n(12202),e$=n(43449),eQ=n(39477),e0=n(44906),e1=(0,g.X)({container:[w.l0.width(60),w.l0.height(24),w.l0.display.flex,w.l0.center,w.l0.borderRadius(4),w.l0.fontSize(w.TV.fontSizeSmall)]});function e2(e){var t,n,r;switch(e.type){case e0.h.ADDED:case e0.h.UNTRACKED:t="Added",n=w.TV.greenDimmest,r=w.TV.greenStrongest;break;case e0.h.MODIFIED:t="Modified",n=w.TV.yellowDimmest,r=w.TV.yellowStrongest;break;case e0.h.DELETED:t="Deleted",n=w.TV.redDimmest,r=w.TV.redStrongest;break;case e0.h.RENAMED:t="Renamed",n=w.TV.tealDimmest,r=w.TV.tealStrongest;break;case e0.h.COPIED:t="Copy",n=w.TV.limeDimmest,r=w.TV.limeStrongest;break;default:return null}return(0,u.tZ)(v.G,{style:{backgroundColor:n,color:r},css:e1.container,children:(0,u.tZ)("span",{children:t})})}function e3(e){var t,n,r;switch(e.type){case"ADDED":t="Added",n=w.TV.greenDimmest,r=w.TV.greenStrongest;break;case"MODIFIED":t="Modified",n=w.TV.yellowDimmest,r=w.TV.yellowStrongest;break;case"DELETED":t="Deleted",n=w.TV.redDimmest,r=w.TV.redStrongest;break;case"RENAMED":t="Renamed",n=w.TV.tealDimmest,r=w.TV.tealStrongest;break;case"COPIED":t="Copy",n=w.TV.limeDimmest,r=w.TV.limeStrongest;break;default:return null}return(0,u.tZ)(v.G,{style:{backgroundColor:n,color:r},css:e1.container,children:(0,u.tZ)("span",{children:t})})}var e4=n(22706),e8=[{"& > span:first-child-of-type":[w.l0.flex.grow(1),w.l0.textAlign.left]},{"& > span":[w.l0.flex.shrink(1)]},w.l0.height("auto"),w.l0.p(8),w.l0.fontWeight.medium,w.l0.backgroundColor.backgroundHigher,w.l0.flex.row,w.l0.align.center,w.l0.justify.spaceBetween,w.l0.overflow("hidden"),w.l0.cursor.pointer],e6=(0,g.X)({buttonFolded:[e8,w.l0.borderRadius(8)],buttonUnfolded:[e8,w.l0.borderRadius(8,8,0,0)],rowContainer:[w.l0.align.center,w.l0.rowWithGap(8),w.l0.position.relative,w.l0.zIndex(1),w.l0.overflow("hidden")],diffContainer:[w.l0.flex.grow(1),w.l0.borderRadius(8)],bodyContainer:[w.l0.borderRadius(0,0,8,8),w.l0.p(8),w.l0.display.flex,w.l0.flex.row,w.l0.flex.wrap,w.l0.align.center,w.l0.justify.center,w.l0.backgroundColor.backgroundDefault,w.l0.border({color:w.TV.outlineDimmer,direction:"bottom"}),w.l0.border({color:w.TV.outlineDimmer,direction:"left"}),w.l0.border({color:w.TV.outlineDimmer,direction:"right"})],noChangesContainer:[w.l0.py(8),w.l0.px(8),w.l0.center,w.l0.width("100%")],innerContainer:[w.l0.display.flex,w.l0.align.center],splitContainer:[w.l0.p(8),w.l0.display.flex,w.l0.flex.row,w.l0.justify.spaceBetween,w.l0.maxWidth("100%"),w.l0.align.center],splitChild:[w.l0.align.center,w.l0.justify.center,{flexBasis:"50%"}],buttonGroupItem:[w.l0.width(64),w.l0.height(32)]}),e5=function(e){var t=e.value,n=e.onChange;return(0,u.BX)(eY.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,u.tZ)(v.G,{css:e6.buttonGroupItem,children:(0,u.tZ)(eY.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,u.tZ)(v.G,{css:e6.buttonGroupItem,children:(0,u.tZ)(eY.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},e9=function(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,u.BX)(v.G,{css:n?e6.buttonFolded:e6.buttonUnfolded,onClick:function(){return r(!n)},children:[(0,u.BX)(v.G,{css:[e6.rowContainer,w.l0.flex.shrink(1)],children:["RENAMED"===i.status||"COPIED"===i.status?(0,u.BX)(u.HY,{children:[(0,u.tZ)(p.Z,{path:o}),(0,u.tZ)(m.xv,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,u.tZ)(m.xv,{multiline:!1,color:"dimmest",css:[w.l0.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,u.tZ)(W.Z,{}),(0,u.tZ)(p.Z,{path:a}),(0,u.tZ)(m.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,u.tZ)(m.xv,{multiline:!1,color:"dimmest",css:[w.l0.fontWeight.normal],children:i.final.path})]}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(p.Z,{path:a}),(0,u.tZ)(m.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,u.tZ)(m.xv,{multiline:!1,color:"dimmest",css:[w.l0.fontWeight.normal],children:i.final.path})]}),(0,u.tZ)(eK.m,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,u.BX)(v.G,{css:e6.rowContainer,children:[(0,u.tZ)(e3,{type:i.status}),(0,u.tZ)(h.hU,{alt:n?"Collapse diff":"Expand diff",onClick:function(){return r(!n)},children:n?(0,u.tZ)(e$.Z,{}):(0,u.tZ)(eQ.Z,{})})]})]})},e7=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;return"Split"===n?(0,u.tZ)(eq,{a:{filePath:t.initial.filename,doc:t.initial.content},b:{filePath:t.final.filename,doc:t.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,u.tZ)(eV.ZP,{filePath:t.final.filename,initialDoc:t.final.content,extensions:[eA.p.of(eG.xv.of(t.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},te=function(e){return(0,S.T3)(e)?"media":(0,S.Mb)(e)?"ot":"binary"},tt=function(e){var t=e.content,n=e.type,r=e.filename,i=e.extensions;switch(n){case"media":return(0,u.tZ)(v.G,{css:[{display:"flex",height:"100%"}],children:(0,u.tZ)(e4.A,{content:t,mime:(0,S.yC)(r)})});case"ot":return(0,u.tZ)(eV.ZP,{filePath:r,initialDoc:t,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},tn=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;if(t.loading)return(0,u.tZ)(v.G,{css:e6.noChangesContainer,children:(0,u.tZ)(b.Z,{size:20})});if(t.initial.content===t.final.content)return(0,u.tZ)(v.G,{css:e6.noChangesContainer,children:(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===t.status)return(0,u.tZ)(v.G,{css:e6.noChangesContainer,children:(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=te(t.initial.filename),o=te(t.final.filename);if("ADDED"===t.status)switch(o){case"media":return(0,u.tZ)(v.G,{css:e6.noChangesContainer,children:(0,u.tZ)(v.G,{css:e6.innerContainer,children:(0,u.tZ)(e4.A,{content:t.final.content,mime:(0,S.yC)(t.final.filename)})})});case"ot":return(0,u.tZ)(v.G,{css:e6.noChangesContainer,children:(0,u.tZ)(eV.ZP,{filePath:t.final.filename,initialDoc:t.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,u.tZ)(v.G,{css:e6.noChangesContainer,children:(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"binary"===i&&"binary"===o?(0,u.tZ)(v.G,{css:e6.noChangesContainer,children:(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}):"ot"===i&&"ot"===o?(0,u.tZ)(e7,{diff:t,splitOrUnified:n,extensions:r}):(0,u.BX)(v.G,{css:e6.splitContainer,children:[(0,u.tZ)(v.G,{css:e6.splitChild,children:(0,u.tZ)(tt,{content:t.initial.content,type:i,filename:t.initial.filename,extensions:r})}),(0,u.tZ)(v.G,{css:e6.splitChild,children:(0,u.tZ)(tt,{content:t.final.content,type:o,filename:t.final.filename,extensions:r})})]})},tr=function(e){var t=e.diff,n=e.folded,r=e.setFolded,i=e.splitOrUnified;return(0,u.BX)(v.G,{css:e6.diffContainer,children:[(0,u.tZ)(e9,{folded:n,setFolded:r,diff:t}),n?null:(0,u.tZ)(F.Tg,{css:e6.bodyContainer,elevated:!0,children:(0,u.tZ)(tn,{diff:t,splitOrUnified:i})})]},t.id)},ti=n(64432),to=n(12441),ta=n(15026),tl=n(27387),tc=n(96583),ts=n(69880),tu=n(43182),td=function(e){var t=e.context,n=e.gitService,r=e.result,i=e.data;tu.$e(function(e){e.setTag("service","git"),e.setTag("context",t),e.setExtra("env",n.getEnv()),i&&tu.sU("data",i),tu.Tb(r.error)})},tf=(gF=(0,tl._)(function(e,t,n,r){var i,o,a;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:if("git"!==r.type)return[3,2];return i=r.revision,[4,e.getFileContents({path:n,revision:i})];case 1:if((o=l.sent()).error)throw td({context:"use-file-at-revision-fetch-content",gitService:e,result:o,data:{path:n,revision:i}}),o.error;return[2,o.content||""];case 2:return[4,t.readFile(n,{fromDisk:!0})];case 3:if((a=l.sent()).error)throw a.error;return[2,a.content.toString("utf8")]}})}),function(e,t,n,r){return gF.apply(this,arguments)}),th=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,c._)((0,_.useState)(null),2),o=i[0],a=i[1],l=(0,c._)((0,_.useState)(!0),2),s=l[0],u=l[1],d=(0,Z.Z)().fs,f=(0,ts.Z)((n=(0,tl._)(function(n){var r,i;return(0,tc.Jh)(this,function(o){switch(o.label){case 0:u(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,tf(n,d,e,t)];case 2:return r=o.sent(),u(!1),[2,{content:r,error:null}];case 3:return i=o.sent(),u(!1),[2,{content:null,error:i}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[e,t,d],r);return(0,_.useEffect)(function(){f&&(f.error?a(null):a(f.content))},[f]),{fileContent:o,loading:s}},tp=d.Dy.Object({type:d.Dy.Literal("git"),revision:d.Dy.String()}),tm=d.Dy.Object({type:d.Dy.Literal("fs")}),tv=d.Dy.Object({type:d.Dy.Literal("diff"),data:d.Dy.Object({left:d.Dy.Object({path:d.Dy.String(),data:d.Dy.Union([tp,tm])}),right:d.Dy.Object({path:d.Dy.String(),data:d.Dy.Union([tp,tm])})})}),tg=(0,g.X)({container:[w.l0.colWithGap(16),w.l0.p(8)],header:[w.l0.mt(0),w.l0.mb(8)],emphasizedText:[w.l0.fontWeight.bold],bodyContainer:[w.l0.borderRadius(8),w.l0.p(8),w.l0.display.flex,w.l0.flex.row,w.l0.flex.wrap,w.l0.align.center,w.l0.justify.center,w.l0.backgroundColor.backgroundDefault,w.l0.border({color:w.TV.outlineDimmest,direction:"full"})],tooltipContainer:[w.l0.display.inlineBlock]}),ty=function(e){var t=e.filename,n=e.onFileClick;return(0,u.tZ)("span",{css:tg.tooltipContainer,children:(0,u.tZ)(ti.u,{tooltip:"View file",children:(0,u.tZ)("button",{css:[w.l0.reset.button,w.l0.linkStyle,w.l0.fontWeight.medium],onClick:n,children:t})})})},tb=function(e){return"git"===e.type?e.revision:"working directory"},tw=function(e){var t,n,r=e.left,i=e.right,o=e.onFileClick,a=r.path===i.path,l=(t=r.data,n=i.data,t.type===n.type&&("git"!==t.type||t.revision===n.revision));return a?l?(0,u.BX)(m.h4,{level:1,variant:"text",css:tg.header,children:["Comparing"," ",(0,u.BX)("span",{css:tg.emphasizedText,children:[(0,u.tZ)(ty,{filename:r.path,onFileClick:o})," ",tb(r.data)]})," ","to itself"]}):(0,u.BX)(m.h4,{level:1,variant:"text",css:tg.header,children:["Comparing"," ",(0,u.BX)("span",{css:tg.emphasizedText,children:[(0,u.tZ)(ty,{filename:r.path,onFileClick:o})," ",tb(r.data)]})," ","to ",(0,u.tZ)("span",{css:tg.emphasizedText,children:tb(i.data)})]}):l?(0,u.BX)(m.h4,{level:1,variant:"text",css:tg.header,children:["Comparing ",(0,u.tZ)("span",{css:tg.emphasizedText,children:r.path})," to"," ",(0,u.BX)("span",{css:tg.emphasizedText,children:[(0,u.tZ)(ty,{filename:i.path,onFileClick:o})," ",tb(r.data)]})]}):(0,u.BX)(m.h4,{level:1,variant:"text",css:tg.header,children:["Comparing"," ",(0,u.BX)("span",{css:tg.emphasizedText,children:[r.path," ",tb(r.data)]})," ","to"," ",(0,u.BX)("span",{css:tg.emphasizedText,children:[(0,u.tZ)(ty,{filename:i.path,onFileClick:o})," ",tb(i.data)]})]})},tZ=(g4={},(0,eB._)(g4,"Content",function(e){var t=e.pane.data,n=t.left,r=t.right,i=e.options.performPaneOperation,o=(0,c._)((0,_.useState)("Split"),2),a=o[0],l=o[1],s=th(n.path,n.data),d=s.fileContent,f=s.loading,h=th(r.path,r.data),p=h.fileContent,m=h.loading,g=(0,_.useMemo)(function(){return null===d&&null!==p?ta.yH.ADDED:null!==d&&null===p?ta.yH.DELETED:ta.yH.MODIFIED},[d,p]);return(0,u.BX)(v.G,{css:tg.container,children:[(0,u.tZ)(tw,{left:n,right:r,onFileClick:function(){i({operation:"open",pane:{type:(0,B.Dp)({path:r.path}),data:{path:r.path}}})}}),(0,u.tZ)(e5,{value:a,onChange:l}),(0,u.tZ)(F.Tg,{css:tg.bodyContainer,children:(0,u.tZ)(tn,{diff:{id:"".concat(n.path,"-").concat(r.path),status:g,loading:f||m,initial:{filename:(0,S.UO)(n.path),path:(0,S.Il)(n.path),content:null!=d?d:""},final:{filename:(0,S.UO)(r.path),path:(0,S.Il)(r.path),content:null!=p?p:""}},splitOrUnified:a})})]})}),(0,eB._)(g4,"Icon",function(){return(0,u.tZ)(to.Z,{})}),(0,eB._)(g4,"getTitle",function(){return"Diff"}),(0,eB._)(g4,"decode",function(e){return f.B4.Decode(tv,e)}),g4),tx=n(7375),tC=n(32317),t_=n(57967),tS=n(46051),tk=n(55460),tE=n(51973),tT=n(86763),tR=n.n(tT),tI=n(52399),tD=n(92674),tB=n.n(tD);function tG(){var e=(0,ew._)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return tG=function(){return e},e}var tA={},tP=(0,eZ.Ps)(tG()),tN=function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})},tL=function(e,t,n){if(!e)return[];var r,i=t(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=n.reduce(function(e,t){var n,r,a;return t.id===(null===(n=o.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||t.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[t.id]&&i[t.id].version>t.version?e.push(i[t.id]):i[t.id]&&i[t.id].version===t.version&&i[t.id].versionNonce!==t.versionNonce&&i[t.id].versionNonce<t.versionNonce?e.push(i[t.id]):e.push(t),delete i[t.id]),e},[])).concat.apply(r,(0,s._)(Object.values(i)))},tO=function(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n},tU=(0,ef.iv)(".excalidraw.excalidraw-modal-container.excalidraw--mobile{margin-top:",tC.Mz-1,"px;}");function tM(e){var t,r,i,o,a=e.fs,l=e.broadcast,d=e.filePath,f=(0,c._)((0,_.useState)(void 0),2),h=f[0],p=f[1],m=(0,t_.Z)(),g=(0,_.useRef)(function(e){return(0,s._)(e)}),y=(0,_.useRef)(function(e){return -1}),b=(0,_.useRef)({readyPromise:tO()}),Z=(0,_.useRef)({promise:null});(0,_.useEffect)(function(){Promise.all([n.e(6655),n.e(7454)]).then(n.t.bind(n,63668,23)).then(function(e){g.current=function(t){return t.filter(function(t){return t.isDeleted||!e.isInvisiblySmallElement(t)})},y.current=e.getSceneVersion,p(e.Excalidraw)})},[]);var x=function(){return b.current},C=(t=(0,N._)({},tA,{ssr:!1}),ex.a(tP,t)),S=C.data,k=C.loading,E=(null==S?void 0:null===(o=S.currentUser)||void 0===o?void 0:o.username)||"",T=(0,tk.F)().isDarkColorScheme,R=(0,tE.aG)(),I=(0,tS.Z)(),D=null==I?void 0:I.color,B=(0,c._)((0,_.useState)(new Map),2),G=B[0],A=B[1],P=(0,c._)((0,_.useState)(-1),2),O=P[0],U=P[1],M=(0,_.useRef)(tB()()).current;(0,_.useEffect)(function(){function e(){return(e=(0,tl._)(function(){var e,t;return(0,tc.Jh)(this,function(n){switch(n.label){case 0:if(!S||!S.currentUser)return[2];return[4,b.current.readyPromise];case 1:return n.sent(),e=x().getAppState().collaborators,t=new Map,R.forEach(function(n){if(n.username!==(null==S?void 0:null===(r=S.currentUser)||void 0===r?void 0:r.username)){var r,i=e.get(n.username)||{};t.set(n.username,(0,L._)((0,N._)({},i),{username:n.username,color:{background:n.color,foreground:n.color}}))}}),x().updateScene({collaborators:t}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[S,R]);var X=(r=(0,tl._)(function(e,t){var n,r,i,o,a,c;return(0,tc.Jh)(this,function(s){t||(e=e.filter(function(e){return!G.has(e.id)||e.version>G.get(e.id)})),n=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)c=a.value,G.set(c.id,c.version),A(new Map(G))}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return l.broadcastMessage(M,{text:JSON.stringify({elements:e,path:d})}),[2]})}),function(e,t){return r.apply(this,arguments)});(0,_.useEffect)(function(){if(l)return l.onBroadcastReceived(M,function(e){var t=e.username,n=JSON.parse(e.text);if(n.path===d){if(n.collaborator&&b.current){var r=x().getAppState().collaborators;r.set(t,(0,L._)((0,N._)({},r.get(t),n.collaborator),{username:t})),x().updateScene({collaborators:r})}else if(n.elements){var i=tL(x(),tN,n.elements);U(y.current(i)),x().updateScene({elements:i})}else if(n.removePresence){var o=x().getAppState().collaborators;o.delete(n.removePresence),x().updateScene({collaborators:o})}}})},[l,d,M]),(0,_.useEffect)(function(){function e(){return(e=(0,tl._)(function(){return(0,tc.Jh)(this,function(e){var t;return d&&a&&(Z.current.promise=new Promise((t=(0,tl._)(function(e){var t,n,r;return(0,tc.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.all([a.readFile(d),b.current.readyPromise])];case 1:return"content"in(t=c._.apply(void 0,[i.sent(),1])[0])&&(n=JSON.parse(t.content.toString()||"{}"),r=x().getAppState(),n.appState=(0,N._)({},r),n.scrollToContent=!0,e(n)),[2]}})}),function(e){return t.apply(this,arguments)}))),[2]})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[d,a]);var F=(0,_.useCallback)(tR()((i=(0,tl._)(function(e,t){var n;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:if(n=e.filter(function(e){return!e.isDeleted}),!d)return[3,2];return[4,a.writeFile(d,tI.Z.from(JSON.stringify({elements:n,files:t})))];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e,t){return i.apply(this,arguments)}),350),[d]),W=function(e){y.current(e)>O&&(O>-1&&X(g.current(e),!1),U(y.current(e)))};return(0,u.BX)(v.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:D?"0 3px 0 3px ".concat(D):"none",backgroundColor:w.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){l.broadcastMessage(M,{text:JSON.stringify({removePresence:E,path:d})})},children:[h&&!k?(0,u.tZ)(h,{ref:b,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:T?"dark":"light",initialData:Z.current.promise,onPointerUpdate:function(e){var t=e.pointer,n=x().getAppState().selectedElementIds||{};l.broadcastMessage(M,{text:JSON.stringify({collaborator:{pointer:t,selectedElementIds:n},path:d})})},onChange:function(e,t,n){W(e),U(y.current(e)),y.current(e)>O&&F(e,n)},name:E}):null,m?(0,u.tZ)(ef.xB,{styles:[tU]}):null]})}function tX(e){var t=e.fs,n=e.broadcast,r=e.filePath;return(0,u.tZ)(tM,{fs:t,broadcast:n,filePath:r},r)}var tF=d.Dy.Object({type:d.Dy.Literal("draw"),data:d.Dy.Object({path:d.Dy.String()})}),tW={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,u.tZ)(tH,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,u.tZ)(tx.Z,{size:t})},getTitle:function(e){return(0,S.UO)(e.data.path)},decode:function(e){return f.B4.Decode(tF,e)}};function tH(e){var t=e.path,n=e.performPaneOperation,r=(0,Z.Z)(),i=r.fs,o=r.broadcast,a=(0,x.Mp)({path:t,performPaneOperation:n});return(0,C.L5)(function(){if(a)return{commands:a}},[a]),(0,u.BX)(u.HY,{children:[(0,u.tZ)(x.HK,{path:t,performPaneOperation:n}),(0,u.tZ)(x.VY,{children:(0,u.tZ)(tX,{fs:i,broadcast:o,filePath:t})})]})}var tV=n(18123),tz=n(85287),tj=d.Dy.Object({type:d.Dy.Literal("envEditor")}),tq={Content:function(){return(0,u.tZ)(tJ,{})},Icon:function(e){var t=e.size;return(0,u.tZ)(tV.Z,{size:t})},getTitle:function(){return"Secrets"},decode:function(e){return f.B4.Decode(tj,e)}};function tJ(){var e=(0,Z.Z)().fs,t=(0,Z.Z)().runner;return(0,u.tZ)(tz.ZP,{readRawEnv:function(){return e.readFile(".env")},writeRawEnv:function(t){return e.writeFile(".env",t)},getRunState:t.getRunState})}var tY=n(31892),tK=n(59786),t$=n(72658),tQ=n(52621),t0=n(39460),t1=n(42650),t2=(0,_.createContext)(null);function t3(){var e=(0,_.useContext)(t2);if(!e)throw Error("Expected store in context");return e}var t4=(0,t1.cn)([]),t8=(0,t1.cn)(function(e){return e(t4)},function(e,t,n){var r=e(t4),i=Math.random().toString(36).substring(7);t(t4,[{id:i,type:n,dismiss:function(){var n=e(t4).filter(function(e){return e.id!==i});t(t4,n)}}].concat((0,s._)(r)))});function t6(){return(0,t0.b9)(t8,{store:t3()})}var t5=n(96955),t9=n(47357),t7=n(67242),ne=n(19068),nt=n(53928),nn=n(39667),nr=n(21187),ni=n(29252),no=n(97658),na=n(44932),nl=n(94311),nc=n(16098),ns=n(50508),nu=n(78711);function nd(){var e=(0,ew._)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return nd=function(){return e},e}var nf={},nh=(0,eZ.Ps)(nd()),np=n(79032),nm=(0,g.X)({gitUserContainer:[w.l0.flex.row],gitUserInnerContainer:[w.l0.align.center,w.l0.flex.row,{"& > :not(:first-child)":{marginLeft:w.TV.space4}}],gitUserInnerContainerFlipped:[w.l0.align.center,w.l0.flex.rowReverse,{"& > :not(:last-child)":{marginLeft:w.TV.space4}}],alignCenter:[w.l0.align.center]});function nv(e){var t=e.name,n=e.email,r=e.allowPlaceholderAvatar,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=e.small,c=void 0!==l&&l,s=e.flip,d=void 0!==s&&s,f=e.placement,h=e.showTooltip;return void 0===h||h?(0,u.tZ)(v.G,{css:nm.gitUserContainer,children:(0,u.tZ)(ti.u,{placement:void 0===f?"bottom":f,tooltip:(0,u.tZ)(m.xv,{children:n}),children:(0,u.BX)(v.G,{css:d?nm.gitUserInnerContainerFlipped:nm.gitUserInnerContainer,children:[(0,u.tZ)(ng,{email:n,name:t,enablePlaceholder:i,small:c}),(0,u.tZ)(m.xv,{multiline:!1,color:a,variant:c?"small":"text",children:t})]})})}):(0,u.tZ)(v.G,{css:nm.gitUserContainer,children:(0,u.BX)(v.G,{css:d?nm.gitUserInnerContainerFlipped:nm.gitUserInnerContainer,children:[(0,u.tZ)(ng,{email:n,name:t,enablePlaceholder:i,small:c}),(0,u.tZ)(m.xv,{multiline:!1,color:a,variant:c?"small":"text",children:t})]})})}function ng(e){var t,n=e.name,r=e.email,i=e.enablePlaceholder,o=void 0!==i&&i,a=e.small,l=void 0!==a&&a,s=(0,c._)((t=(0,N._)({},nf,{initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),nu.t(nh,t)),1)[0],d=(0,c._)((0,_.useState)(null),2),f=d[0],h=d[1];return(0,_.useEffect)(function(){var e;(e=(0,tl._)(function(){var e,t,n,i,o,a,l,u,d,f;return(0,tc.Jh)(this,function(p){switch(p.label){case 0:if(!r.endsWith("@".concat(ns.O)))return[3,1];return e=r.split("@")[0],(t=(0,c._)(e.split("+"),2))[0],n=t[1],h((0,na.vt)("https://github.com/".concat(n,".png"))),[3,4];case 1:if(!r.endsWith("@".concat(ns.J)))return[3,3];return a=r.split("@")[0],(l=(0,c._)(a.split("-"),2))[0],[4,s({variables:{username:l[1]}})];case 2:return(u=null===(o=p.sent().data)||void 0===o?void 0:null===(i=o.userByUsername)||void 0===i?void 0:i.image)&&h(u),[3,4];case 3:d=(0,np.FB)(r),(f=new URL("https://gravatar.com/avatar/".concat(d))).searchParams.append("d","404"),h(f.toString()),p.label=4;case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[r,s]),(0,_.useMemo)(function(){var e=l?12:16;return null===f?o?(0,u.tZ)(nc.Z,{css:nm.alignCenter,size:e}):null:(0,u.tZ)(nl.q,{css:nm.alignCenter,username:n,src:f,onError:function(){return h(null)},size:e})},[f,o,l,n])}var ny=n(33651),nb=n(31534);(gW=g8||(g8={})).DASHBOARD="DASHBOARD",gW.BRANCH="BRANCH",gW.CURRENT_BRANCH="CURRENT_BRANCH",gW.SETTINGS="SETTINGS",gW.COMMIT="COMMIT";var nw=n(1169),nZ=v.K.button,nx=(0,g.X)({container:[w.l0.display.flex,w.l0.flex.growAndShrink(1),w.l0.overflow("hidden")],cursorOverlay:{cursor:"pointer"},fullWidth:[w.l0.width("100%")],searchContainer:[w.l0.p(8)],paddedX:[w.l0.px(8)],loadingContainer:[w.l0.display.flex,w.l0.align.center,w.l0.justify.center,w.l0.py(48)],menu:[w.l0.maxWidth(390),w.l0.width(280),w.l0.display.flex,w.l0.maxHeight(640),w.l0.borderRadius(8),w.l0.overflow("hidden")],form:[w.l0.display.flex,w.l0.flex.growAndShrink(1),w.l0.flex.column,w.l0.overflow("hidden")],body:[w.l0.py(8),w.l0.colWithGap(8),w.l0.flex.growAndShrink(1),w.l0.overflow("auto")],branchMetadata:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.flex.shrink(1)],section:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.spaceBetween],selector:[w.l0.display.flex,w.l0.align.center,w.l0.rowWithGap(4)],header:[w.l0.colWithGap(2),w.l0.width("100%")],menuItem:[{backgroundColor:"inherit"},ne.gU.listItem,w.l0.px(8),w.l0.py(4),w.l0.borderRadius(0),w.l0.align.start],inputDisabled:[{opacity:.75}],padded:[w.l0.p(8)],virtualItem:[w.l0.position.absolute,w.l0.top(0),w.l0.left(0),w.l0.width("100%"),w.l0.overflow("hidden")],virtualList:[w.l0.position.relative],divider:[w.l0.mt(8),w.l0.mb(8),w.l0.ml(0),w.l0.mr(0)],errorText:[w.l0.color.accentNegativeStronger,w.l0.mt(4)],createBranchButton:[w.l0.height(32),w.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),nC=function(e,t){var n,r,i,o=t6(),a=(0,Z.Z)().git,l=(0,c._)((0,_.useState)(!0),2),s=l[0],u=l[1],d=(0,ts.Z)((n=(0,tl._)(function(e){var t,n,r,i,a,l,c,s,d,f,h,p,m,v,g,y,b,w,Z,x,C;return(0,tc.Jh)(this,function(_){switch(_.label){case 0:return u(!0),[4,e.isInitialized()];case 1:if((t=_.sent()).error)return o(t.error),u(!1),[2,t];if(!t.initialized)return u(!1),[2,{active:[],stale:[],important:[],error:null}];return[4,e.listBranches()];case 2:if((n=_.sent()).error)return o(n.error),u(!1),[2,n];return[4,e.findDefaultBranches()];case 3:if((r=_.sent()).error)return o(r.error),u(!1),[2,r];i=n.branches,a=new Set,l=!0,c=!1,s=void 0;try{for(d=function(){var e=h.value,t=i.find(function(t){return(0,no.Pi)(t,e)});t&&a.add(t)},f=r.refs[Symbol.iterator]();!(l=(h=f.next()).done);l=!0)d()}catch(e){c=!0,s=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw s}}p=Date.now()-72e6,m=[],v=[],g=!0,y=!1,b=void 0;try{for(w=i[Symbol.iterator]();!(g=(Z=w.next()).done);g=!0)x=Z.value,a.has(x)||(x.commit.author.date>p?m.push(x):v.push(x))}catch(e){y=!0,b=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw b}}return C=Array.from(a),u(!1),[2,{active:m,stale:v,important:C,error:null}]}})}),function(e){return n.apply(this,arguments)}),[o]),f=(r=(0,tl._)(function(t){var n;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:if(s||(0,no.Pi)(e,t))return[2];return u(!0),[4,a.switchBranch(t)];case 1:return(n=r.sent()).error?(o(n.error),u(!1)):(a.forceRefresh(),(0,ny.J)("branch-switched")),[2]}})}),function(e){return r.apply(this,arguments)}),h=(i=(0,tl._)(function(e){var t;return(0,tc.Jh)(this,function(n){switch(n.label){case 0:if(s||""===e)return[2];return u(!0),[4,a.createBranch({name:e,checkout:!0})];case 1:return(t=n.sent()).error?(o(t.error),u(!1)):(a.forceRefresh(),(0,ny.J)("branch-created")),[2]}})}),function(e){return i.apply(this,arguments)});if((0,_.useEffect)(function(){null!==e&&(u(!1),t({mode:g8.CURRENT_BRANCH}))},[e,t]),null===d||s)return{loading:s,active:[],stale:[],important:[],handleSwitchBranch:f,handleCreateBranch:h,error:null};if(d.error)return{loading:s,active:[],stale:[],important:[],handleSwitchBranch:f,handleCreateBranch:h,error:d.error};var p=d.active,m=d.stale,v=d.important;return{loading:s,active:null!=p?p:[],stale:null!=m?m:[],important:null!=v?v:[],handleSwitchBranch:f,handleCreateBranch:h,error:null}},n_=function(e){var t=e.branch,n=nC(t,e.switchMode),r=n.loading,i=n.active,o=n.important,a=n.stale,l=n.handleSwitchBranch,s=n.handleCreateBranch,d=(0,c._)((0,_.useState)(!1),2),f=d[0],h=d[1],p=(0,c._)((0,_.useState)(""),2),m=p[0],v=p[1],g=(0,c._)((0,_.useState)(!1),2),y=g[0],b=g[1];return(0,u.tZ)(nG,{isOpen:f,setIsOpen:h,important:o,active:i,stale:a,current:t,query:m,setQuery:v,onSwitchBranch:l,createBranchLoading:y,createBranch:(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:return b(!0),[4,s(m)];case 1:return e.sent(),v(""),b(!1),[2]}})}),loading:r})},nS=function(e){var t=e.onClick,n=e.children,r=(0,_.useRef)(null),i=(0,c._)((0,nw.XZ)(r,!1),4),o=i[0],a=i[1],l=i[2],s=i[3];return(0,nw.Ym)(a,r),(0,u.tZ)(nZ,{ref:r,role:"menuitem",css:nx.menuItem,onClick:function(e){s(),t(e)},onKeyDown:l,tabIndex:o,children:n})},nk=function(e){var t=e.branch;return(0,u.BX)(v.G,{css:nx.branchMetadata,children:[(0,u.tZ)(nv,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmer",allowPlaceholderAvatar:!0,placement:"top",showTooltip:!1,small:!0}),(0,u.tZ)(m.xv,{color:"dimmer",variant:"small",children:(0,nr.lb)(t.commit.author.date)})]})},nE=function(e){var t=e.branch,n=e.current,r=e.onSwitchBranch,i=(0,_.useMemo)(function(){return(0,tQ.p3)(t,n)},[t,n]);return(0,u.BX)(nS,{onClick:function(){return r(t)},children:[(0,u.tZ)(m.xv,{multiline:!1,children:(0,u.tZ)(nb.Lr,{name:t.name,remote:t.type===tQ.HO.REMOTE?t.remote:null,current:i})}),(0,u.tZ)(nk,{branch:t})]})},nT=function(e,t){return t.filter(function(t){return(0,no.Qj)(t).toLowerCase().includes(e.toLowerCase())})},nR=function(e,t,n){var r=0,i=[];if(e.length+t.length+n.length===0)return i;if(e.length>0){i.push({key:"heading-important-".concat(r++),type:"heading",title:"Important"});for(var o=0;o<e.length;++o)i.push({key:"branch-important-".concat(r++),type:"branch",branch:e[o]});t.length+n.length>0&&i.push({key:"divider-important-".concat(r++),type:"divider"})}if(t.length>0){i.push({key:"heading-active-".concat(r++),type:"heading",title:"Active"});for(var a=0;a<t.length;++a)i.push({key:"branch-active-".concat(r++),type:"branch",branch:t[a]});n.length>0&&i.push({key:"divider-active-".concat(r++),type:"divider"})}if(n.length>0){i.push({key:"heading-stale-".concat(r++),type:"heading",title:"Stale"});for(var l=0;l<n.length;++l)i.push({key:"branch-stale-".concat(r++),type:"branch",branch:n[l]})}return i},nI=function(e){var t=e.item,n=e.current,r=e.onSwitchBranch;return"heading"===t.type?(0,u.tZ)(v.G,{css:nx.paddedX,children:(0,u.tZ)(m.xv,{multiline:!1,variant:"small",color:"dimmest",css:w.l0.fontWeight.medium,children:t.title})}):"divider"===t.type?(0,u.tZ)(v.G,{css:nx.divider,children:(0,u.tZ)(t7.R,{})}):(0,u.tZ)(v.G,{children:(0,u.tZ)(nE,{branch:t.branch,current:n,onSwitchBranch:r})})},nD=function(e){var t=e.items,n=e.current,r=e.onSwitchBranch,i=(0,_.useRef)(null),o=(0,t9.MG)({overscan:10,count:t.length,getScrollElement:function(){return i.current},estimateSize:function(e){var n,r;return null!==(n=void 0===(r=t[e])?0:"heading"===r.type?30:"branch"===r.type?65:"divider"===r.type?20:void 0)&&void 0!==n?n:0}});return(0,u.tZ)(nw.uP,{options:{direction:"vertical"},children:(0,u.tZ)("div",{css:nx.body,ref:i,children:(0,u.tZ)("ul",{css:nx.virtualList,style:{height:"".concat(o.getTotalSize(),"px")},children:o.getVirtualItems().map(function(e){return(0,u.tZ)("div",{css:nx.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:o.measureElement,children:(0,u.tZ)(nI,{item:t[e.index],current:n,onSwitchBranch:r})},e.key)})})})})},nB=function(e){var t=e.query,n=e.setQuery,r=e.filteredImportant,i=e.filteredActive,o=e.filteredStale,a=e.current,l=e.onSwitchBranch,c=e.createBranchLoading,d=e.createBranch,f=e.loading,h=(0,_.useMemo)(function(){return nR(r,i,o)},[r,i,o]),p='Create Branch "'.concat(t,'"'),g=(0,_.useMemo)(function(){return(0,s._)(r).concat((0,s._)(i),(0,s._)(o)).some(function(e){return e.name===t})},[t,r,i,o]);return(0,u.tZ)(v.G,{css:nx.menu,children:(0,u.tZ)("form",{onSubmit:function(e){e.preventDefault(),d()},css:nx.form,children:f?(0,u.tZ)(v.G,{css:nx.loadingContainer,children:(0,u.tZ)(b.Z,{})}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(v.G,{css:nx.searchContainer,children:(0,u.tZ)(nn.E,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Find or create a branch..."})}),(0,u.tZ)(v.G,{css:nx.paddedX,children:(0,u.tZ)(t7.R,{})}),h.length>0?(0,u.tZ)(nD,{items:h,current:a,onSwitchBranch:l}):null,g||""===t?null:(0,u.BX)(v.G,{css:nx.padded,children:[(0,u.tZ)(X.zx,{text:p,size:"small",iconLeft:c?(0,u.tZ)(b.Z,{}):(0,u.tZ)(ni.Z,{}),stretch:!0,css:nx.createBranchButton,disabled:c||!(0,no.Dc)(t),type:"submit"}),(0,no.Dc)(t)?null:(0,u.tZ)(m.xv,{variant:"small",css:nx.errorText,multiline:!1,children:"Invalid branch name"})]})]})})})},nG=function(e){var t=e.isOpen,n=e.setIsOpen,r=e.important,i=e.active,o=e.stale,a=e.current,l=e.query,c=e.setQuery,s=e.onSwitchBranch,d=e.createBranchLoading,f=e.createBranch,h=e.loading,p=(0,_.useMemo)(function(){return nT(l,r)},[l,r]),v=(0,_.useMemo)(function(){return nT(l,i)},[l,i]),g=(0,_.useMemo)(function(){return nT(l,o)},[l,o]);return(0,u.BX)(nt.xo,{label:"View Branches",placement:"bottom",isOpen:t,onOpenChange:function(e){n(e)},offset:16,children:[function(e){var n=e.onClick,r=(0,eP._)(e,["onClick"]);return(0,u.tZ)(X.zx,{variant:"nofill",text:(0,u.BX)(m.xv,(0,L._)((0,N._)({multiline:!1,variant:"small",css:nx.selector},r),{children:[(0,u.tZ)(nb.Lr,{name:a.name,remote:a.type===tQ.HO.REMOTE?a.remote:null,icon:!0}),t?(0,u.tZ)(eQ.Z,{}):(0,u.tZ)(e$.Z,{})]})),size:"small",stretch:!0,alignment:"start",css:nx.fullWidth,onClick:n})},(0,u.tZ)(nB,{query:l,setQuery:c,filteredImportant:p,filteredActive:v,filteredStale:g,current:a,onSwitchBranch:s,createBranchLoading:d,createBranch:f,loading:h})]})},nA=n(60199),nP=n(96651),nN=n(15434),nL=n(40509);function nO(){var e,t,n,r,i,o=(0,c._)((0,_.useState)(!1),2),a=o[0],l=o[1],s=(0,Z.Z)().git,d=(t=(e=(0,c._)((0,_.useState)(!1),2))[0],n=e[1],r=(0,Z.Z)().git,(0,_.useEffect)(function(){return r.onBusyChange(n)},[r]),t),f=t6(),p=(0,ts.Z)((i=(0,tl._)(function(e){var t,n;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:if((t=r.sent()).error)return f(t.error),[2,t];if(!t.initialized)return[2,{hasRemotes:!1,error:null}];return[4,e.getRemotes()];case 2:if((n=r.sent()).error)return f(n.error),[2,n];return[2,{hasRemotes:n.remotes.size>0,error:null}]}})}),function(e){return i.apply(this,arguments)}),[f]);if(null==p?void 0:p.error)return null;var m=!!p&&p.hasRemotes,v=d||a||null===p;function g(){return(g=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(t){switch(t.label){case 0:if(s.isBusy()||v)return[2];if(l(!0),!m)return[3,2];return[4,s.fetch()];case 1:(e=t.sent()).error?f(e.error):(0,ny.J)("remote-fetched"),t.label=2;case 2:return[4,s.refreshProfiles()];case 3:return t.sent(),s.forceRefresh(),setTimeout(function(){return l(!1)},500),[2]}})})).apply(this,arguments)}return(0,u.tZ)(h.hU,{alt:m?"Refresh and Fetch":"Refresh",size:24,onClick:function(){return g.apply(this,arguments)},disabled:v,children:v?(0,u.tZ)(b.Z,{}):(0,u.tZ)(nL.Z,{})})}var nU=(0,g.X)({container:[w.l0.height(36),w.l0.px(8),w.l0.py(4),w.l0.rowWithGap(8),w.l0.backgroundColor.backgroundDefault,w.l0.align.center,w.l0.justify.spaceBetween,w.l0.zIndex(1),{borderBottom:"1px solid ".concat(w.TV.outlineDimmer)}],left:[w.l0.rowWithGap(4),w.l0.align.center,w.l0.flex.growAndShrink(1)],right:[w.l0.rowWithGap(8),w.l0.align.center],back:{marginLeft:-4}}),nM=function(e){var t=e.openSettings;return(0,u.BX)(v.G,{css:nU.container,children:[(0,u.BX)(v.G,{css:nU.left,children:[(0,u.tZ)(nP.Z,{size:16}),(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),(0,u.BX)(v.G,{css:nU.right,children:[(0,u.tZ)(nj,{openSettings:t}),(0,u.tZ)(nO,{})]})]})},nX=function(e){var t=e.branch,n=e.switchMode,r=e.openSettings;return(0,u.BX)(v.G,{css:nU.container,children:[(0,u.tZ)(v.G,{css:nU.left,children:(0,u.tZ)(n_,{branch:t,switchMode:n})}),(0,u.BX)(v.G,{css:nU.right,children:[(0,u.tZ)(nj,{openSettings:r}),(0,u.tZ)(nO,{})]})]})},nF=function(e){var t=e.onBack;return(0,u.BX)(v.G,{css:nU.container,children:[(0,u.BX)(v.G,{css:nU.left,children:[(0,u.tZ)(nV,{onBack:t,alt:"Back"}),(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:"Settings"})]}),(0,u.tZ)(v.G,{css:nU.right})]})},nW=function(e){var t=e.switchMode,n=e.openSettings;return(0,u.BX)(v.G,{css:nU.container,children:[(0,u.BX)(v.G,{css:nU.left,children:[(0,u.tZ)(nz,{switchMode:t}),(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:"Commit"})]}),(0,u.BX)(v.G,{css:nU.right,children:[(0,u.tZ)(nj,{openSettings:n}),(0,u.tZ)(nO,{})]})]})};function nH(e){var t=e.mode,n=e.branch,r=e.switchMode,i=e.onBack,o=function(){return r({mode:g8.SETTINGS})};switch(t){case g8.DASHBOARD:return(0,u.tZ)(nM,{openSettings:o});case g8.BRANCH:case g8.CURRENT_BRANCH:if(null===n)throw Error("Tried to show branch in header, but branch is null");return(0,u.tZ)(nX,{branch:n,switchMode:r,openSettings:o});case g8.SETTINGS:return(0,u.tZ)(nF,{onBack:i});case g8.COMMIT:return(0,u.tZ)(nW,{switchMode:r,openSettings:o});default:return(0,u.BX)(v.G,{css:nU.container,children:[(0,u.tZ)(v.G,{css:nU.left}),(0,u.tZ)(v.G,{css:nU.right})]})}}function nV(e){var t=e.onBack,n=e.alt;return(0,u.tZ)(h.hU,{css:nU.back,alt:n,size:28,onClick:t,children:(0,u.tZ)(nA.Z,{})})}function nz(e){var t=e.switchMode;return(0,u.tZ)(nV,{css:nU.back,onBack:function(){return t({mode:g8.CURRENT_BRANCH})},alt:"Back to current branch"})}function nj(e){var t=e.openSettings;return(0,u.tZ)(h.hU,{alt:"Settings",size:24,onClick:t,children:(0,u.tZ)(nN.Z,{})})}var nq=n(87128),nJ=n(64318),nY=n(19871),nK=n(63685),n$=n(71407),nQ=n(59947),n0=n(48461);function n1(){var e,t=(0,ts.Z)((e=(0,tl._)(function(e){return(0,tc.Jh)(this,function(t){return[2,{connectedToGithub:n2(e),error:null}]})}),function(t){return e.apply(this,arguments)}));return null==t||t.error?null:t.connectedToGithub}function n2(e){return e.hasProfile(nY.rG.GITHUB)}function n3(e){var t=e.label,n=e.allowReconnect,r=e.callback,i=e.useV2App,o=(0,c._)((0,_.useState)(!1),2),a=o[0],l=o[1],s=(0,Z.Z)().git,d=n1(),f=(0,t_.Z)(),h=(0,n$.v)({onAuth:function(){(0,ny.J)("github-user-connected"),l(!1),s.refreshProfiles({preferredProvider:nY.rG.GITHUB}),null==r||r()},onClose:function(){return l(!1)},useV2App:i});return d&&!(void 0!==n&&n)?(0,u.tZ)(X.zx,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,u.tZ)(nQ.Z,{}),disabled:!0}):(0,u.tZ)(X.zx,{text:a||null===d?"Connecting...":f?"Visit account page to connect to GitHub":void 0===t?"Connect to GitHub":t,colorway:"primary",iconLeft:a?(0,u.tZ)(b.Z,{}):(0,u.tZ)(n0.Z,{}),loading:a,onClick:function(){if(f){nK.X.openExternalUrl("/account#connected-services");return}l(!0),h()}})}var n4=n(1675),n8=n(58498);function n6(e){return!!e&&("string"==typeof e?e.includes(n8.Kd):e.fetch.includes(n8.Kd))}function n5(e){return e.endsWith(".git")?e.slice(0,-4):e}function n9(e){if(!e)return null;var t="string"==typeof e?e:e.fetch;return n6(t)?n5(t):null}function n7(e){var t="string"==typeof e?e:e.fetch;if(n6(t)){var n=(t=n5(t)).split("/");if(n.length<2)return null;var r=n[n.length-2],i=n[n.length-1];return"".concat(r,"/").concat(i)}return null}var re=(0,g.X)({body:[w.l0.p(4),w.l0.colWithGap(8),w.l0.borderRadius(0,0,8,8)],remedies:[w.l0.flex.row,w.l0.align.center,w.l0.justify.end,w.l0.flex.wrap,{gap:"8px"}]});function rt(e){var t=e.description,n=e.remedies,r=e.error;return(0,u.BX)(F.Tg,{css:re.body,elevated:!0,children:[(0,u.tZ)(m.xv,{children:t}),(0,u.BX)(v.G,{css:re.remedies,children:[n,(0,u.tZ)(X.zx,{text:"Dismiss",iconLeft:(0,u.tZ)(nJ.Z,{}),onClick:r.dismiss})]})]})}function rn(e){var t,n=e.error,r=(0,ts.Z)((t=(0,tl._)(function(e){var t,r,i,o,a,l,c,s,d,f;return(0,tc.Jh)(this,function(h){switch(h.label){case 0:switch(n.type){case nY.aq.UNKNOWN_NOT_GIT:return[3,1];case nY.aq.UNKNOWN:return[3,2];case nY.aq.CHANNEL_CLOSED:return[3,3];case nY.aq.NOT_INITIALIZED:return[3,4];case nY.aq.UNAUTHENTICATED:return[3,5];case nY.aq.INDEX_FILE_CORRUPT:return[3,7];case nY.aq.UNKNOWN_REMOTE:return[3,8];case nY.aq.INDEX_LOCKED:return[3,9];case nY.aq.NO_COMMITS:return[3,10];case nY.aq.PATH_MATCHED_NO_FILES:return[3,11];case nY.aq.USER_NOT_CONFIGURED:return[3,12];case nY.aq.INVALID_REFERENCE:return[3,13];case nY.aq.BRANCH_ALREADY_EXISTS:return[3,14];case nY.aq.MERGE_CONFLICT:return[3,15];case nY.aq.UPSTREAM_NOT_SET:return[3,16];case nY.aq.HEAD_DETACHED:return[3,17];case nY.aq.DIRTY_WORKTREE:return[3,18];case nY.aq.PROTECTED_BRANCH:return[3,19];case nY.aq.PUSH_REJECTED:return[3,20];case nY.aq.REMOTE_ALREADY_EXISTS:return[3,21];case nY.aq.TIMEOUT:return[3,22];case nY.aq.ALREADY_INITIALIZED:return[3,23]}return[3,24];case 1:return t="Unknown error from the Git service. This is probably a bug in the app.",r=null,[3,25];case 2:return t="There was an unrecognized fatal error with Git. This is probably a bug in the app.",r=null,[3,25];case 3:return t="The command was interrupted. Please try again.",r=null,[3,25];case 4:return t="There isn't a Git repository in the Repl's root directory.",r=null,[3,25];case 5:return[4,e.getRemotes()];case 6:if((i=h.sent()).error)return[2,i];if(0!==i.remotes.size){o=!1,a=!0,l=!1,c=void 0;try{for(s=i.remotes.values()[Symbol.iterator]();!(a=(d=s.next()).done);a=!0)if(f=d.value,n6(f)){o=!0;break}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(o){if(n2(e))return t="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",r=(0,u.tZ)(n3,{label:"Update GitHub Repository Access",callback:n.dismiss,allowReconnect:!0}),[3,25];return t="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",r=(0,u.tZ)(n3,{label:"Connect to GitHub",callback:n.dismiss,allowReconnect:!0}),[3,25]}}return t="Failed to authenticate with the remote.",r=null,[3,25];case 7:return t="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",r=null,[3,25];case 8:return t="The remote specified isn't configured.",r=null,[3,25];case 9:return t="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",r=null,[3,25];case 10:return t="There are no commits in the repository.",r=null,[3,25];case 11:return t="The path specified didn't match any files.",r=null,[3,25];case 12:return t="There isn't any user information configured for Git.",r=null,[3,25];case 13:return t="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",r=null,[3,25];case 14:return t="The branch specified already exists.",r=null,[3,25];case 15:return t="There was an unexpected merge conflict.",r=null,[3,25];case 16:return t="The upstream branch isn't set.",r=null,[3,25];case 17:return t="The HEAD is detached. You have a commit checked out, not a branch.",r=null,[3,25];case 18:return t="There are uncommitted changes.",r=null,[3,25];case 19:return t="This operation cannot be performed on a protected branch.",r=null,[3,25];case 20:return t="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",r=null,[3,25];case 21:return t="The remote specified already exists.",r=null,[3,25];case 22:return t="The remote operation timed out.",r=null,[3,25];case 23:return t="There is already a Git repository in the Repl's root directory.",r=null,[3,25];case 24:return t="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",r=null,[3,25];case 25:return[2,{description:t,remedies:r,error:null}]}})}),function(e){return t.apply(this,arguments)}),[n],{refresh:!1});if(!r)return(0,u.tZ)(rt,{description:null,remedies:null,error:n});if(r.error)return(0,u.tZ)(rt,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:n});var i=r.description,o=r.remedies;return(0,u.tZ)(rt,{description:i,remedies:o,error:n})}var rr=(0,g.X)({errorNotification:[{pointerEvents:"all"},w.l0.p(1),w.l0.backgroundColor.accentNegativeDimmer,w.l0.borderRadius(8),w.l0.shadow(3)],header:[w.l0.py(4),w.l0.px(8),w.l0.display.flex,w.l0.flex.row,w.l0.align.center,w.l0.justify.spaceBetween,w.l0.color.accentNegativeStrongest],headerText:[w.l0.rowWithGap(4),w.l0.align.center],errorType:[w.l0.font.code,{opacity:.75}],body:[w.l0.pt(4),w.l0.pb(8),w.l0.px(8),w.l0.colWithGap(8),w.l0.backgroundColor.backgroundHigher,w.l0.borderRadius(0,0,8,8)]});function ri(e){var t=e.error;return(0,u.BX)(v.G,{css:rr.errorNotification,children:[(0,u.BX)(v.G,{css:rr.header,children:[(0,u.BX)(v.G,{css:rr.headerText,children:[(0,u.tZ)(nq.Z,{}),(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:function(e){switch(e.type){case nY.aq.UNKNOWN_NOT_GIT:return"Unknown Error";case nY.aq.UNKNOWN:return"Unknown Git Error";case nY.aq.NOT_INITIALIZED:case nY.aq.UNAUTHENTICATED:case nY.aq.INDEX_FILE_CORRUPT:case nY.aq.UNKNOWN_REMOTE:case nY.aq.INDEX_LOCKED:case nY.aq.NO_COMMITS:case nY.aq.PATH_MATCHED_NO_FILES:case nY.aq.USER_NOT_CONFIGURED:case nY.aq.INVALID_REFERENCE:case nY.aq.BRANCH_ALREADY_EXISTS:case nY.aq.MERGE_CONFLICT:case nY.aq.HEAD_DETACHED:case nY.aq.DIRTY_WORKTREE:case nY.aq.PUSH_REJECTED:case nY.aq.PROTECTED_BRANCH:case nY.aq.REMOTE_ALREADY_EXISTS:case nY.aq.ALREADY_INITIALIZED:case nY.aq.TIMEOUT:return"Git Error";default:return"Unknown Error"}}(t)})]}),(0,u.tZ)(m.xv,{css:rr.errorType,multiline:!1,children:t.type})]}),(0,u.tZ)(v.G,{css:rr.body,children:(0,u.tZ)(rn,{error:t})})]})}var ro=(0,g.X)({errorList:[{pointerEvents:"none"},{transition:"background-color 100ms"},w.l0.position.absolute,w.l0.top(0),w.l0.bottom(0),w.l0.left(0),w.l0.right(0),w.l0.p(8),w.l0.colWithGap(16),w.l0.zIndex(10)]});function ra(){var e=(0,t0.Dv)(t8,{store:t3()});return(0,u.tZ)(v.G,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:ro.errorList,children:e.map(function(e){return(0,u.tZ)(ri,{error:e},e.id)})})}function rl(){return(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,u.tZ)(m.xv,{multiline:!1,children:"Please finish the patch manually."})]})}function rc(){return(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,u.tZ)(m.xv,{multiline:!1,children:"Please finish the bisect manually."})]})}var rs=n(45271),ru=n(99236),rd=n(81836),rf=(0,g.X)({modalContainer:[w.l0.colWithGap(24)],statusText:[w.l0.display.flex,w.l0.flex.row,w.l0.textAlign.left],settingsButton:[w.l0.reset.button,w.l0.linkStyle,w.l0.fontWeight.medium,w.l0.textAlign.left,w.l0.ml(4)]}),rh=function(e){var t=e.onViewSettingsClick;return(0,u.tZ)("button",{css:rf.settingsButton,onClick:t,children:"Settings view."})};function rp(e){var t,n,r=e.branch,i=e.onViewSettingsClick,o=(0,c._)((0,_.useState)(!1),2),a=o[0],l=o[1],s=(0,c._)((0,_.useState)(!1),2),d=s[0],f=s[1],h=(0,c._)((0,_.useState)(null),2),p=h[0],g=h[1],y=(0,c._)((0,_.useState)(!1),2),w=y[0],x=y[1],C=t6(),S=(0,Z.Z)().git,k=(0,ts.Z)((t=(0,tl._)(function(e){var t,n,r,i,o,a,l,c;return(0,tc.Jh)(this,function(s){switch(s.label){case 0:return[4,e.isInitialized()];case 1:if((t=s.sent()).error)return C(t.error),td({context:"publish-branch-button-initialized",gitService:e,result:t}),[2,{remote:null,error:t.error}];if(!t.initialized)return[2,{remote:null,error:null}];return[4,e.getRemotes()];case 2:if((n=s.sent()).error)return td({context:"publish-branch-button-get-remotes",gitService:e,result:n}),C(n.error),[2,n];return r=n.remotes,i="",(null==r?void 0:r.size)&&(i=r.has("origin")?"origin":r.keys().next().value),[4,e.status()];case 3:if((o=s.sent()).error)return C(o.error),td({context:"publish-branch-button-status",gitService:e,result:o}),[2,o];if(!(o.branch&&i))return[3,5];return a=(0,n4.C)(o.branch),l="refs/remotes/".concat(i,"/").concat(a),[4,e.branchExists(l)];case 4:(c=s.sent()).error?(td({context:"publish-branch-button-branch-exists",gitService:e,result:c,data:{upstream:a,fullRemoteRef:l}}),C(c.error)):c.exists&&g("".concat(i,"/").concat(a)),s.label=5;case 5:return[2,{remote:i,error:null}]}})}),function(e){return t.apply(this,arguments)}),[C],{keepStaleResult:!1});if((0,_.useEffect)(function(){function e(){return(e=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(t){switch(t.label){case 0:if(!(w&&p))return[3,2];return[4,S.setBranchUpstream({upstream:p})];case 1:(e=t.sent()).error&&(td({context:"publish-branch-button-set-branch-upstream",gitService:S,result:e,data:{upstream:p}}),C(e.error)),x(!1),g(null),t.label=2;case 2:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[S,C,w,p]),null==k?void 0:k.error)return null;var E=k?k.remote:null,T=null===E,R=r.type!==tQ.HO.LOCAL||!E||w;function I(){return(I=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(t){switch(t.label){case 0:if(!E||a)return[2];if(p)return f(!0),[2];return l(!0),[4,S.push({publish:{remote:E}})];case 1:return(e=t.sent()).error?(l(!1),C(e.error),td({context:"publish-branch-button-push",gitService:S,result:e,data:{remote:E}})):(S.forceRefresh(),(0,ny.J)("branch-published-to-remote")),[2]}})})).apply(this,arguments)}var D="".concat(E,"/").concat(r.name);return n=a?"Pushing to '".concat(D,"'..."):r.type!==tQ.HO.LOCAL?"Branch has already been pushed to '".concat(D,"'"):T?"Checking if branch ".concat(r.name," can be pushed..."):E?"Push branch as '".concat(D,"'"):"No remotes to push to",(0,u.BX)(u.HY,{children:[p?(0,u.tZ)(rs.u,{isOpen:d,onRequestClose:function(){return f(!1)},children:(0,u.BX)(v.G,{css:rf.modalContainer,children:[(0,u.tZ)(m.xv,{variant:"headerDefault",children:"Branch already exists"}),(0,u.tZ)(m.xv,{children:"Upstream branch '".concat(p,"' already exists.\n          To push the branch, please confirm you would like to set upstream branch to it.")}),(0,u.tZ)(X.zx,{text:"Set upstream to '".concat(p,"'"),onClick:function(){p&&(x(!0),f(!1))}})]})}):null,T||E?null:(0,u.tZ)(ru.E,{text:(0,u.tZ)(v.G,{css:rf.statusText,children:(0,u.BX)("span",{children:["No remote repositories configured. To push your changes, add a remote repository in the",(0,u.tZ)(rh,{onViewSettingsClick:i})]})}),colorway:"warning",closable:!1}),(0,u.tZ)(X.zx,{text:n,iconLeft:T||a?(0,u.tZ)(b.Z,{}):(0,u.tZ)(rd.Z,{}),onClick:function(){return I.apply(this,arguments)},loading:T||a,disabled:R})]})}var rm=n(85638),rv=n(59249),rg=(0,g.X)({remoteUrl:[{border:"none"},w.l0.height("auto"),w.l0.py(4),w.l0.px(8)]});function ry(e){var t=e.branch,n=e.remotes,r=(0,c._)((0,_.useMemo)(function(){if(t.type===tQ.HO.LOCAL)return[null,null,null];var e=n.get(t.remote);if(!e)return[null,null,null];var r=n9(e),i=n7(e),o=n6(r);return[r,i,o]},[t,n]),3),i=r[0],o=r[1],a=r[2];return i&&o?(0,u.tZ)(rm.Z,{css:rg.remoteUrl,text:o,href:i,target:"_blank",iconLeft:a?(0,u.tZ)(n0.Z,{}):void 0,iconRight:(0,u.tZ)(rv.Z,{}),variant:"outlined",size:"small"}):null}var rb=n(81464),rw=n(76171),rZ=(0,g.X)({warning:[w.l0.align.start],header:[w.l0.fontWeight.bold]});function rx(){return(0,u.BX)(u.HY,{children:[(0,u.tZ)(ru.E,{css:rZ.warning,icon:(0,u.tZ)(nq.Z,{}),colorway:"warning",text:(0,u.BX)(u.HY,{children:[(0,u.tZ)("span",{css:rZ.header,children:"Can't push or pull from GitHub"}),(0,u.tZ)("br",{}),(0,u.tZ)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),(0,u.tZ)(n3,{})]})}var rC=n(2447),r_=(0,g.X)({text:[w.l0.flex.shrink(1)]});function rS(e){var t=e.date,n=(0,c._)((0,_.useState)(null),2),r=n[0],i=n[1];return((0,_.useEffect)(function(){if(t){var e=function(){var e=new Date,n="just now";e.getTime()-t.getTime()>6e4&&(n=(0,rC.Z)(t,e,{addSuffix:!0})),i(n=n.replace(/minutes?/,"min"))};e();var n=setInterval(e,6e4);return function(){clearInterval(n),i(null)}}},[t]),r)?(0,u.BX)(m.xv,{css:r_.text,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",r]}):null}function rk(e){var t=e.hasRemoteMergeConflict,n=e.hasUnpulledCommits,r=e.hasUnpushedCommits,i=e.workTreeDirty,o=[];return i&&n&&o.push("Can't pull: you have uncommitted changes"),t&&(n||r)&&(n&&r?(i||o.push("Warning: pulling will start a merge with conflicts"),o.push("Can't push: unpulled changes must be merged first")):n?i||o.push("Warning: pulling will start a merge with conflicts"):r&&o.push("Can't push: merge conflict with remote")),o.length?(0,u.tZ)(u.HY,{children:o.map(function(e){return(0,u.tZ)(ru.E,{text:e,colorway:"warning",icon:(0,u.tZ)(nq.Z,{})},e)})}):null}var rE=(0,g.X)({divider:[w.l0.mx(8)]});function rT(e){var t=e.ahead,n=e.behind;if(!t&&!n)return(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var r=null,i=null;if(n){var o=(0,eh.Z)("commit",n);r="".concat(n," ").concat(o," to pull")}if(t){var a=(0,eh.Z)("commit",t);i="".concat(t," ").concat(a," to push")}return(0,u.BX)(m.xv,{color:"dimmer",variant:"small",multiline:!1,children:[r?(0,u.tZ)("span",{children:r}):null,r&&i?(0,u.tZ)("span",{css:rE.divider,children:"•"}):null,i?(0,u.tZ)("span",{children:i}):null]})}var rR=(0,g.X)({container:[w.l0.flex.grow(1)],branch:[w.l0.mr(4),w.l0.color.foregroundDefault,w.l0.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[w.l0.color.foregroundDimmest],text:[w.l0.ml(4),w.l0.color.foregroundDimmest]});function rI(e){var t=e.upstream,n=e.remotes,r=(0,_.useMemo)(function(){return function(e,t){var n=null,r=null;if(e instanceof Map){var i=(0,n4.Tg)(t),o=i[0];if(n=i[1],!o||!n)return null;var a=e.get(o);if(!a)return null;r=n9(a)}else n=t,r=n9(e);return r&&n6(r)?"".concat(r,"/tree/").concat(n):null}(n,t)},[t,n]);return(0,u.BX)(m.xv,{css:rR.container,variant:"small",multiline:!1,children:[r?(0,u.tZ)("a",{css:rR.branch,href:r,target:"_blank",children:t}):(0,u.tZ)("span",{css:rR.branch,children:t}),(0,u.tZ)("span",{css:rR.divider,children:"•"}),(0,u.tZ)("span",{css:rR.text,children:"upstream"})]})}var rD=n(97975);function rB(e){return rG.apply(this,arguments)}function rG(){return(rG=(0,tl._)(function(e){var t,n;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:return t=null,[4,Promise.race([e,new Promise(function(e){return t=setTimeout(function(){tu.$e(function(e){e.setTag("gitPane",!0),tu.Tb(Error("Remote update operation timed out"))}),e({error:nY.aq.TIMEOUT})},9e4)})])];case 1:return n=r.sent(),t&&clearTimeout(t),[2,n]}})})).apply(this,arguments)}var rA=(0,g.X)({container:[w.l0.borderRadius(8)],loading:[w.l0.height(64),ep.p.backgroundPulse(),w.l0.borderRadius(8)],header:[w.l0.py(4),w.l0.px(8),w.l0.rowWithGap(8),w.l0.align.center,w.l0.flex.shrink(1),w.l0.border({color:w.TV.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[w.l0.px(8),w.l0.pt(8),w.l0.pb(12),w.l0.colWithGap(8)],buttons:[w.l0.rowWithGap(8),w.l0.flex.grow(1)],sync:[w.l0.flex.grow(1)],pullPush:[w.l0.flex.row],pull:[w.l0.pr(12),w.l0.borderRadius(8,0,0,8),w.l0.border({color:w.TV.outlineDefault,direction:"right"})],push:[w.l0.borderRadius(0,8,8,0)]});function rP(e){var t=e.remotes,n=e.gotoPendingState,r=t6(),i=function(e){var t,n=e.onError,r=e.onPullConflicts,i=(0,c._)((0,_.useState)(!1),2),o=i[0],a=i[1],l=(0,c._)((0,_.useState)(!1),2),s=l[0],u=l[1],d=(0,c._)((0,_.useState)(!1),2),f=d[0],h=d[1],p=(0,c._)((0,_.useState)(!1),2),m=p[0],v=p[1],g=(0,Z.Z)().git,y=(0,ts.Z)((t=(0,tl._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y;return(0,tc.Jh)(this,function(b){switch(b.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:rD.T.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:if((o=b.sent()).error)return[2,o];if(a=o.state,o.type!==t$.y5.NORMAL)return[2,{error:nY.aq.INVALID_STATE}];return(a===t$.yG.DIRTY_WORKTREE||a===t$.yG.DIRTY_INDEX)&&(i.workTreeDirty=!0),[4,e.status()];case 2:if((l=b.sent()).error)return[2,l];if(c=l.branch,s=null===(t=l.upstream)||void 0===t?void 0:t.branch,d=null!==(u=null===(n=l.upstream)||void 0===n?void 0:n.ahead)&&void 0!==u?u:0,h=null!==(f=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==f?f:0,!c)return[2,{error:nY.aq.HEAD_DETACHED}];if(i.ahead=d,i.behind=h,!s)return[3,7];return i.upstream=s,i.hasUnpulledCommits=h>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()];case 3:if((p=b.sent()).error)return[2,p];return i.lastFetched=p.lastFetched,[4,e.canMergeBranches(c,s)];case 4:if((m=b.sent()).error)return[2,m];if(m.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(nY.rG.GITHUB))return[3,6];if(!(v=(0,no.CH)(s)))return[2,{error:nY.aq.INVALID_REFERENCE}];return[4,e.getRemotes()];case 5:if((g=b.sent()).error)return[2,g];if(!(y=g.remotes.get(v)))return[2,{error:nY.aq.INVALID_REFERENCE}];n6(y)&&(i.needGitHubConnection=!0),b.label=6;case 6:i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?rD.T.MERGE:rD.T.REBASE),b.label=7;case 7:return[2,(0,L._)((0,N._)({},i),{error:null})]}})}),function(e){return t.apply(this,arguments)}));if(!y)return{type:"loading"};if(y.error||!y.upstream)return{type:"error",error:y.error};if(!y.upstream)return{type:"noUpstream"};var b=y.upstream,w=y.hasUnpulledCommits,x=y.hasUnpushedCommits,C=y.hasRemoteMergeConflict,S=y.pullMode,k=y.canPull,E=y.canPush,T=y.workTreeDirty,R=y.needGitHubConnection,I=y.ahead,D=y.behind,B=y.lastFetched;if(R)return{type:"needGitHubConnection",upstream:b};var G=o||s||f||m,A=!b||R||G,P=!k||G,O=!E||G,U=!k&&!E||C||G;function M(){return(M=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(t){switch(t.label){case 0:if(A)return[2];return a(!0),[4,rB(g.fetch())];case 1:return e=t.sent(),g.forceRefresh(),a(!1),e.error?n(e.error):(0,ny.J)("remote-fetched"),[2]}})})).apply(this,arguments)}function X(){return(X=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(t){switch(t.label){case 0:if(P)return[2];return u(!0),[4,rB(g.pull({mode:S,allowConflicts:!0}))];case 1:return e=t.sent(),u(!1),e.error?n(e.error):(e.hasConflicts&&r(),g.forceRefresh(),(0,ny.J)("upstream-pulled")),[2]}})})).apply(this,arguments)}function F(){return(F=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(t){switch(t.label){case 0:if(O)return[2];return h(!0),[4,rB(g.push())];case 1:return e=t.sent(),g.forceRefresh(),h(!1),e.error?n(e.error):(0,ny.J)("upstream-pushed"),[2]}})})).apply(this,arguments)}function W(){return(W=(0,tl._)(function(){var e,t;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:if(U)return[2];if(v(!0),!k)return[3,2];return[4,rB(g.pull({mode:S}))];case 1:if((e=r.sent()).error)return n(e.error),v(!1),[2];(0,ny.J)("upstream-pulled"),r.label=2;case 2:if(!E)return[3,4];return[4,g.push()];case 3:if((t=r.sent()).error)return n(t.error),v(!1),[2];(0,ny.J)("upstream-pushed"),r.label=4;case 4:return g.forceRefresh(),v(!1),[2]}})})).apply(this,arguments)}return{type:"remote",fetch:function(){return M.apply(this,arguments)},fetching:o,fetchDisabled:A,lastFetched:B,pull:function(){return X.apply(this,arguments)},pulling:s,pullDisabled:P,pullMode:S,canPull:k,push:function(){return F.apply(this,arguments)},pushing:f,pushDisabled:O,canPush:E,sync:function(){return W.apply(this,arguments)},syncing:m,syncDisabled:U,upstream:b,hasUnpulledCommits:w,hasUnpushedCommits:x,hasRemoteMergeConflict:C,workTreeDirty:T,ahead:I,behind:D}}({onError:r,onPullConflicts:n}),o="error"===i.type?i.error:null;return((0,_.useEffect)(function(){o&&r(o)},[o,r]),"loading"===i.type)?(0,u.tZ)(F.Tg,{css:rA.loading,elevated:!0}):"error"===i.type||"noUpstream"===i.type?null:"needGitHubConnection"===i.type?(0,u.BX)(F.Tg,{css:rA.container,elevated:!0,children:[(0,u.BX)(v.G,{css:rA.header,children:[(0,u.tZ)(rI,{upstream:i.upstream,remotes:t}),(0,u.tZ)(X.zx,{css:rA.fetch,text:"Fetch",iconLeft:(0,u.tZ)(nL.Z,{}),disabled:!0,variant:"outlined",size:"small"})]}),(0,u.tZ)(v.G,{css:rA.body,children:(0,u.tZ)(rx,{})})]}):(0,u.BX)(F.Tg,{css:rA.container,elevated:!0,children:[(0,u.BX)(v.G,{css:rA.header,children:[(0,u.tZ)(rI,{upstream:i.upstream,remotes:t}),(0,u.tZ)(rS,{date:i.lastFetched}),(0,u.tZ)(X.zx,{css:rA.fetch,text:"Fetch",iconLeft:i.fetching?(0,u.tZ)(b.Z,{}):(0,u.tZ)(nL.Z,{}),onClick:i.fetch,loading:i.fetching,disabled:i.fetchDisabled,variant:"outlined",size:"small"})]}),(0,u.BX)(v.G,{css:rA.body,children:[(0,u.tZ)(rk,{hasRemoteMergeConflict:i.hasRemoteMergeConflict,hasUnpulledCommits:i.hasUnpulledCommits,hasUnpushedCommits:i.hasUnpushedCommits,workTreeDirty:i.workTreeDirty}),(0,u.tZ)(rT,{ahead:i.ahead,behind:i.behind}),(0,u.BX)(v.G,{css:rA.buttons,children:[(0,u.tZ)("div",{css:rA.sync,children:(0,u.tZ)(ti.u,{tooltip:"Pull & push the latest changes",children:(0,u.tZ)(X.zx,{css:rA.sync,text:"Sync with Remote",iconLeft:i.syncing?(0,u.tZ)(b.Z,{}):(0,u.tZ)(rb.Z,{rotate:90}),onClick:i.sync,loading:i.syncing,disabled:i.syncDisabled,size:"small"})})}),(0,u.BX)(v.G,{css:rA.pullPush,children:[(0,u.tZ)(X.zx,{css:rA.pull,text:"Pull",iconLeft:i.pulling?(0,u.tZ)(b.Z,{}):(0,u.tZ)(y.Z,{}),onClick:i.pull,loading:i.pulling,disabled:i.pullDisabled,size:"small"}),(0,u.tZ)(X.zx,{css:rA.push,text:"Push",iconLeft:i.pushing?(0,u.tZ)(b.Z,{}):(0,u.tZ)(rw.Z,{}),onClick:i.push,loading:i.pushing,disabled:i.pushDisabled,size:"small"})]})]})]})]})}function rN(e,t,n){var r,i=t6(),o=(0,ts.Z)((r=(0,tl._)(function(r){var i,o,a,l,s,u,d,f,h;return(0,tc.Jh)(this,function(p){switch(p.label){case 0:return[4,r.isInitialized()];case 1:if((i=p.sent()).error)return td({context:"use-branch-commits",gitService:r,result:i}),[2,{error:i.error}];if(!i.initialized)return[2,{log:[],onlyRemote:[],onlyLocal:[],error:null}];if(!e)return[2,{error:null}];if(!(!e.tracking||0===t&&0===n))return[3,3];return o=(0,no.bF)(e,!0),[4,r.log({max:100,revRange:o})];case 2:if((a=p.sent()).error)return td({context:"use-branch-commits",gitService:r,result:a,data:{branch:e,behind:t,ahead:n,revision:o}}),[2,a];return[2,{log:a.commits,error:null}];case 3:return l=(0,no.bF)(e),[4,Promise.all([r.log({max:100,revRange:e.name}),r.log({max:100,revRange:"".concat(e.name,"..").concat(l)}),r.log({max:100,revRange:"".concat(l,"..").concat(e.name)})])];case 4:if(s=p.sent(),d=(u=(0,c._)(s,3))[0],f=u[1],h=u[2],d.error)return td({context:"use-branch-commits-log",gitService:r,result:d,data:{branch:e,behind:t,ahead:n,remoteBranch:l}}),[2,{error:d.error}];if(f.error)return td({context:"use-branch-commits-only-remote",gitService:r,result:f,data:{branch:e,behind:t,ahead:n,remoteBranch:l}}),[2,{error:f.error}];if(h.error)return td({context:"use-branch-commits-only-local",gitService:r,result:h,data:{branch:e,behind:t,ahead:n,remoteBranch:l}}),[2,{error:h.error}];return[2,{log:d.commits,onlyRemote:f.commits,onlyLocal:h.commits,error:null}]}})}),function(e){return r.apply(this,arguments)}),[e,t,n]);return(0,_.useMemo)(function(){if(!o)return null;if(o.error)return i(o.error),{error:o.error};var e=o.log,t=o.onlyRemote,n=o.onlyLocal;if(!t&&!n)return{log:e,error:null};if(e){var r=new Set;if(t){var a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;r.add(d.hash)}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}if(n){var f=!0,h=!1,p=void 0;try{for(var m,v=n[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;r.add(g.hash)}}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}e=e.filter(function(e){return!r.has(e.hash)})}return{log:e,onlyRemote:t,onlyLocal:n,error:null}},[i,o])}var rL=n(97486),rO=n(29212),rU=(0,g.X)({path:[w.l0.rowWithGap(8),w.l0.flex.growAndShrink(1),w.l0.align.center],source:[w.l0.color.foregroundDimmest],sourceArrow:[w.l0.mx(8)]});function rM(e){var t=e.path,n=e.prefix,r=e.source,i=e.onClick;return(0,u.BX)(v.G,{css:rU.path,children:[(0,u.tZ)(p.Z,{path:t}),(0,u.BX)(m.xv,{multiline:!1,children:[(0,u.tZ)(nb.yx,{path:t,prefix:n,onClick:i}),r?(0,u.BX)("span",{css:rU.source,children:[(0,u.tZ)("span",{css:rU.sourceArrow,children:"←"}),(0,u.tZ)(nb.yx,{path:r})]}):null]})]})}var rX=(0,g.X)({container:[w.l0.colWithGap(8)],buttons:[w.l0.rowWithGap(8),w.l0.justify.end],restoringBoth:[w.l0.colWithGap(12)],listContainer:[w.l0.colWithGap(4)],list:[w.l0.px(4),w.l0.colWithGap(2)]});function rF(e){var t=e.show,n=e.files,r=e.pathMap,i=e.callback,o=(0,ej.Z)(i),a=(0,_.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!0)},[o]),l=(0,_.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!1)},[o]);return(0,u.tZ)(rs.u,{isOpen:t,onRequestClose:l,children:t?(0,u.BX)(v.G,{css:rX.container,children:[(0,u.BX)(m.h4,{level:2,children:["Discard ",(0,eh.Z)("Change",n.length)]}),(0,u.tZ)(rW,{files:n,pathMap:r}),(0,u.BX)(v.G,{css:rX.buttons,children:[(0,u.tZ)(X.zx,{text:"Cancel",iconLeft:(0,u.tZ)(rL.Z,{}),onClick:l}),(0,u.tZ)(X.zx,{text:"Discard ".concat((0,eh.Z)("Change",n.length)),iconLeft:(0,u.tZ)(rO.Z,{}),colorway:"negative",onClick:a})]})]}):null})}function rW(e){var t=e.files,n=e.pathMap,r=[],i=[],o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value;d.type.worktree===e0.h.UNTRACKED?i.push(d):r.push(d)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return!r.length&&i.length?(0,u.BX)(v.G,{css:rX.listContainer,children:[(0,u.tZ)(m.xv,{children:1===i.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,u.tZ)(rH,{files:i,pathMap:n})]}):r.length&&!i.length?(0,u.BX)(v.G,{css:rX.listContainer,children:[(0,u.tZ)(m.xv,{children:1===r.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,u.tZ)(rH,{files:r,pathMap:n})]}):(0,u.BX)(v.G,{css:rX.restoringBoth,children:[r.length?(0,u.BX)(v.G,{css:rX.listContainer,children:[(0,u.BX)(m.h4,{level:3,children:["Tracked ",(0,eh.Z)("File",r.length)]}),(0,u.tZ)(m.xv,{multiline:!1,children:1===r.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,u.tZ)(rH,{files:r,pathMap:n})]}):null,i.length?(0,u.BX)(v.G,{css:rX.listContainer,children:[(0,u.BX)(m.h4,{level:3,children:["Untracked ",(0,eh.Z)("File",i.length)]}),(0,u.tZ)(m.xv,{multiline:!1,children:1===i.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,u.tZ)(rH,{files:i,pathMap:n})]}):null]})}function rH(e){var t=e.files,n=e.pathMap,r=(0,_.useMemo)(function(){return t.length>20?t.slice(0,20):t},[t]);return(0,u.tZ)(v.G,{children:(0,u.BX)("ul",{css:rX.list,children:[r.map(function(e){var t;return(0,u.tZ)("li",{children:(0,u.tZ)(rM,{path:e.path,prefix:n.get(e.path),source:null===(t=e.source)||void 0===t?void 0:t.path})},e.path)}),t.length<=20?null:(0,u.tZ)("li",{children:(0,u.BX)(m.xv,{color:"dimmer",children:["... ",t.length-20," more"," ",(0,eh.Z)("file",t.length-20)]})})]})})}function rV(e){var t=(0,c._)((0,_.useState)(function(){return{show:!1,files:[]}}),2),n=t[0],r=t[1];return{openRestoreConfirmationModal:(0,_.useCallback)(function(e){return new Promise(function(t){0===e.length&&t(!1),r({show:!0,files:e,callback:function(e){r({show:!1,files:[],callback:void 0}),t(e)}})})},[]),restoreConfirmationModal:(0,_.useMemo)(function(){return(0,u.tZ)(rF,(0,L._)((0,N._)({},n),{pathMap:e}))},[n,e])}}var rz=n(98512),rj=(0,g.X)({actionsIndex:[w.l0.height(24),w.l0.align.center,w.l0.borderRadius(4)],actionsWorktree:[w.l0.height(24),w.l0.flex.row,w.l0.align.center,w.l0.borderRadius(4)],unstage:[w.l0.height(24),w.l0.width(24),w.l0.borderRadius(2)],stage:[w.l0.px(12),w.l0.height(24),w.l0.width(24),w.l0.borderRadius(2)],discard:[w.l0.pl(16),w.l0.pr(12),w.l0.height(24),w.l0.width(24),w.l0.borderRadius(2)],discardIcon:{transform:"scale(0.85)"},divider:[w.l0.height("75%"),w.l0.width(1),w.l0.backgroundColor.outlineStronger]});function rq(e){var t=e.file,n=e.list,r=e.stageFiles,i=e.restoreFiles,o=e.disabled,a=void 0!==o&&o,l=(0,c._)((0,_.useState)(!1),2),s=l[0],d=l[1],f=(0,c._)((0,_.useState)(!1),2),p=f[0],m=f[1];function v(){return(v=(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:if(a)return[2];return d(!0),[4,r({reset:[t.path]})];case 1:return e.sent(),d(!1),[2]}})})).apply(this,arguments)}function g(){return(g=(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:if(a)return[2];return d(!0),[4,r({add:[t.path]})];case 1:return e.sent(),d(!1),[2]}})})).apply(this,arguments)}function y(){return(y=(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:if(a||"worktree"!==n)return[2];return m(!0),[4,i(t.path)];case 1:return e.sent(),m(!1),[2]}})})).apply(this,arguments)}return a=a||p||s,"index"===n?(0,u.tZ)(F.Tg,{elevated:!0,css:rj.actionsIndex,children:(0,u.tZ)(h.hU,{css:rj.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return v.apply(this,arguments)},disabled:a,children:s?(0,u.tZ)(b.Z,{}):(0,u.tZ)(rz.Z,{})})}):(0,u.BX)(F.Tg,{elevated:!0,css:rj.actionsWorktree,children:[(0,u.tZ)(h.hU,{css:rj.discard,alt:"Discard changes",size:18,tooltipDelay:"long",onClick:function(){return y.apply(this,arguments)},disabled:a,children:p?(0,u.tZ)(b.Z,{}):(0,u.tZ)(rO.Z,{css:rj.discardIcon})}),(0,u.tZ)("div",{css:rj.divider}),(0,u.tZ)(h.hU,{css:rj.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return g.apply(this,arguments)},disabled:a,children:s?(0,u.tZ)(b.Z,{}):(0,u.tZ)(ni.Z,{})})]})}var rJ=(0,g.X)({modifiedFile:[w.l0.py(2),w.l0.rowWithGap(4),w.l0.align.center]});function rY(e){var t,n=e.file,r=e.list,i=e.stageFiles,o=e.restoreFiles,a=e.pathMap,l=e.disabled,c=e.onFilePathClick,s=null==a?void 0:a.get(n.path),d=null===(t=n.source)||void 0===t?void 0:t.path,f="index"===r?n.type.index:n.type.worktree,h=(0,P.Z)(function(){if(f!==e0.h.DELETED)return function(){return c(n.path)}},[n.path,c,f]);return(0,u.BX)(v.G,{css:rJ.modifiedFile,children:[(0,u.tZ)(rM,{path:n.path,prefix:s,source:d,onClick:h}),(0,u.tZ)(e2,{type:f}),(0,u.tZ)(rq,{file:n,list:r,stageFiles:i,restoreFiles:o,disabled:void 0!==l&&l})]})}var rK=(0,g.X)({actions:[w.l0.rowWithGap(2),w.l0.backgroundColor.backgroundHighest,w.l0.borderRadius(8)],buttonDiscard:[w.l0.borderRadius(8,0,0,8)],buttonStage:[w.l0.borderRadius(0,8,8,0)],divider:[w.l0.my(8),w.l0.width(1),w.l0.backgroundColor.outlineStronger]});function r$(e){var t=e.type,n=e.stageFiles,r=e.restoreFiles,i=e.disabled,o=void 0!==i&&i,a=(0,c._)((0,_.useState)(!1),2),l=a[0],s=a[1],d=(0,c._)((0,_.useState)(!1),2),f=d[0],h=d[1];function p(){return m.apply(this,arguments)}function m(){return(m=(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:if(o)return[2];return s(!0),[4,n({all:"index"!==t})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function g(){return(g=(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:if(o||"worktree"!==t)return[2];return h(!0),[4,r(!0)];case 1:return e.sent(),h(!1),[2]}})})).apply(this,arguments)}return o=o||f||l,"index"===t?(0,u.tZ)(X.zx,{text:"Unstage All",iconLeft:l?(0,u.tZ)(b.Z,{}):(0,u.tZ)(rz.Z,{}),onClick:p,disabled:o,loading:l,size:"small"}):(0,u.BX)(v.G,{css:rK.actions,children:[(0,u.tZ)(X.zx,{css:rK.buttonDiscard,text:"Discard All",iconLeft:f?(0,u.tZ)(b.Z,{}):(0,u.tZ)(rO.Z,{}),onClick:function(){return g.apply(this,arguments)},disabled:o,loading:f,size:"small"}),(0,u.tZ)("div",{css:rK.divider}),(0,u.tZ)(X.zx,{css:rK.buttonStage,text:"Stage All",iconLeft:l?(0,u.tZ)(b.Z,{}):(0,u.tZ)(ni.Z,{}),onClick:p,disabled:o,loading:l,size:"small"})]})}var rQ=(0,g.X)({list:[w.l0.pt(4),w.l0.pb(8),w.l0.colWithGap(4)],listFolded:[w.l0.py(4)],header:[w.l0.px(8),w.l0.rowWithGap(4),w.l0.align.center],headerFoldable:[w.l0.py(4),w.l0.pl(4),w.l0.pr(8),w.l0.rowWithGap(4),w.l0.align.center],headerText:[w.l0.flex.grow(1)],body:[w.l0.px(8),w.l0.maxHeight("25vh"),w.l0.overflowY("auto")]});function r0(e){var t,n=e.files,r=e.type,i=e.stageFiles,o=e.restoreFiles,a=e.onFilePathClick,l=e.pathMap,s=e.foldable,d=void 0!==s&&s,f=e.disabled,h=void 0!==f&&f,p=(0,c._)((0,_.useState)(!1),2),m=p[0],g=p[1],y=(0,_.useRef)(null),b=(0,_.useRef)(null),w=(0,t9.MG)({count:n.length,getScrollElement:function(){return b.current},getItemKey:function(e){return n[e].path},estimateSize:function(){return 28},overscan:20}),Z=w.getVirtualItems();return d&&m?(0,u.tZ)(v.G,{css:rQ.listFolded,children:(0,u.BX)(v.G,{css:d?rQ.headerFoldable:rQ.header,children:[(0,u.tZ)(r1,{files:n,type:r,setFolded:g,foldable:!0,folded:!0}),(0,u.tZ)(r$,{type:r,stageFiles:i,restoreFiles:o,disabled:h})]})}):(0,u.BX)(v.G,{innerRef:y,css:rQ.list,children:[(0,u.BX)(v.G,{css:d?rQ.headerFoldable:rQ.header,children:[(0,u.tZ)(r1,{files:n,type:r,setFolded:g,foldable:d}),(0,u.tZ)(r$,{type:r,stageFiles:i,restoreFiles:o,disabled:h})]}),(0,u.tZ)(v.K.div,{ref:b,css:rQ.body,children:(0,u.tZ)("div",{style:{minHeight:w.getTotalSize()},children:(0,u.tZ)("div",{style:{transform:"translateY(".concat(null===(t=Z[0])||void 0===t?void 0:t.start,"px)"),willChange:"transform"},children:Z.map(function(e){var t=n[e.index];return(0,u.tZ)("div",{"data-index":e.index,children:(0,u.tZ)(rY,{file:t,list:r,stageFiles:i,restoreFiles:o,onFilePathClick:a,pathMap:l,disabled:h},t.path)},e.key)})})})})]})}function r1(e){var t=e.files,n=e.type,r=e.setFolded,i=e.foldable,o=void 0!==i&&i,a=e.folded,l=(0,eh.Z)("file",t.length),c="".concat(t.length," ").concat("index"===n?"staged":"changed"," ").concat(l);return o&&void 0!==a&&a?(0,u.BX)(u.HY,{children:[(0,u.tZ)(h.hU,{alt:"Show list",onClick:function(){return r(!1)},children:(0,u.tZ)(e$.Z,{})}),(0,u.tZ)(m.xv,{css:rQ.headerText,multiline:!1,children:c})]}):(0,u.BX)(u.HY,{children:[o?(0,u.tZ)(h.hU,{alt:"Hide list",onClick:function(){return r(!0)},children:(0,u.tZ)(eQ.Z,{color:w.TV.foregroundDimmest})}):null,(0,u.tZ)(m.xv,{css:rQ.headerText,color:"dimmest",multiline:!1,children:c})]})}var r2=n(30513),r3=[{"& > span:first-child":[w.l0.flex.grow(1),w.l0.textAlign.left]},{"& > span":[w.l0.flex.shrink(1)]}],r4=(0,g.X)({buttonFolded:[r3,w.l0.height("auto"),w.l0.py(8),w.l0.fontWeight.medium],buttonUnfolded:[r3,w.l0.height("auto"),w.l0.py(8),w.l0.fontWeight.medium,w.l0.border({color:w.TV.outlineDimmer,direction:"bottom"}),w.l0.borderRadius(8,8,0,0)],container:[w.l0.flex.grow(1),w.l0.borderRadius(8)],lists:[w.l0.borderRadius(0,0,8,8)],divider:[w.l0.height(1),w.l0.minHeight(1),w.l0.width("100%"),w.l0.backgroundColor.outlineDimmer],autoStageMessage:[w.l0.pt(4),w.l0.pb(8),w.l0.px(4),w.l0.center],noChangesMessage:[w.l0.py(16),w.l0.px(4),w.l0.center],buttonText:[w.l0.flex.grow(1)],details:[w.l0.rowWithGap(4),w.l0.fontWeight.normal,w.l0.color.foregroundDimmest]});function r8(e){var t,n,r=e.status,i=e.stageFiles,o=e.restoreFiles,a=e.onStagedFileClick,l=e.disabled,s=void 0!==l&&l,d=(0,c._)((0,_.useState)(!1),2),f=d[0],h=d[1],p=(0,c._)((0,_.useState)(!1),2),g=p[0],y=p[1],b=(0,c._)((0,_.useState)(!1),2),w=b[0],Z=b[1],x=(0,_.useMemo)(function(){return(0,r2.w)(r.changes.map(function(e){return e.path}))},[r]),C=(0,c._)((0,_.useMemo)(function(){var e=[],t=[],n=!0,i=!1,o=void 0;try{for(var a,l=r.changes[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;c.staged&&e.push(c),c.type.worktree!==e0.h.UNMODIFIED&&t.push(c)}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return[e,t]},[r.changes]),2),S=C[0],k=C[1],E=S.length>0&&k.length>0,T=rV(x),R=T.openRestoreConfirmationModal,I=T.restoreConfirmationModal,D=(0,_.useCallback)((t=(0,tl._)(function(e){return(0,tc.Jh)(this,function(t){switch(t.label){case 0:if(!("all"in e))return[3,2];return y(!0),[4,i(e)];case 1:return t.sent(),y(!1),[3,4];case 2:return[4,i(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[i]),B=(0,_.useCallback)((n=(0,tl._)(function(e){var t,n;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:if(!0!==e)return[3,4];return Z(!0),[4,R(k)];case 1:if(!r.sent())return[3,3];return[4,o(e)];case 2:r.sent(),r.label=3;case 3:return Z(!1),[3,8];case 4:if("string"==typeof e){if(!(n=k.find(function(t){return t.path===e})))throw Z(!1),Error("Could not find file in worktree list");t=[n]}else t=k.filter(function(t){return e.includes(t.path)});return[4,R(t)];case 5:if(!r.sent())return[3,7];return[4,o(e)];case 6:r.sent(),r.label=7;case 7:Z(!1),r.label=8;case 8:return[2]}})}),function(e){return n.apply(this,arguments)}),[R,o,k]);return f?(0,u.tZ)(r6,{setFolded:h,changeCount:k.length,stagedCount:S.length,disabled:s,folded:!0}):0===S.length&&0===k.length?(0,u.BX)(v.G,{style:{opacity:s?.725:void 0},css:r4.container,children:[(0,u.tZ)(r6,{setFolded:h,changeCount:k.length,stagedCount:S.length,disabled:s}),(0,u.tZ)(F.Tg,{css:r4.lists,elevated:!0,children:(0,u.tZ)(v.G,{css:r4.noChangesMessage,children:(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{style:{opacity:s?.725:void 0},css:r4.container,children:[(0,u.tZ)(r6,{setFolded:h,changeCount:k.length,stagedCount:S.length,disabled:s}),(0,u.BX)(F.Tg,{css:r4.lists,elevated:!0,children:[0===S.length?null:(0,u.tZ)(r0,{type:"index",files:S,stageFiles:D,restoreFiles:B,onFilePathClick:a,pathMap:x,foldable:E,disabled:s||g||w}),E?(0,u.tZ)("div",{css:r4.divider}):null,0===k.length?null:(0,u.BX)(u.HY,{children:[(0,u.tZ)(r0,{type:"worktree",files:k,stageFiles:D,restoreFiles:B,onFilePathClick:a,pathMap:x,foldable:E,disabled:s||g||w}),E?null:(0,u.tZ)(v.G,{css:r4.autoStageMessage,children:(0,u.tZ)(m.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),I]})}function r6(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.changeCount,o=e.stagedCount,a=e.disabled;return(0,u.tZ)(X.zx,{css:n?r4.buttonFolded:r4.buttonUnfolded,text:"Review Changes",secondaryText:(0,u.tZ)(r5,{folded:n,changeCount:i,stagedCount:o}),onClick:function(){return r(!n)},iconRight:n?(0,u.tZ)(e$.Z,{}):(0,u.tZ)(eQ.Z,{}),disabled:void 0!==a&&a,size:"small"})}function r5(e){var t=e.folded,n=e.changeCount,r=e.stagedCount;if(!t)return null;var i=n>0,o=r>0;return i||o?(0,u.BX)("span",{css:r4.details,children:[i?(0,u.BX)("span",{children:[n," ",(0,eh.Z)("change",n)]}):null,i&&o?(0,u.tZ)("span",{children:"/"}):null,o?(0,u.BX)("span",{children:[r," staged"]}):null]}):(0,u.tZ)("span",{css:r4.details,children:(0,u.tZ)("span",{children:"no changes"})})}var r9=n(95369),r7=n(33817),ie=n(86257),it=n(54401),ir=n(38172),ii=n(15758),io=n(72164),ia=n(43208),il=n(37058),ic=n(50798),is={height:32,width:"100%",resize:"none",border:"none"},iu={width:"100%",resize:"none",border:"none"},id=(0,g.X)({surface:[w.l0.p(8),w.l0.colWithGap(12),w.l0.borderRadius(0,0,8,8)],button:[w.l0.height("auto"),w.l0.py(8),w.l0.fontWeight.medium,w.l0.borderRadius(8,8,0,0),w.l0.justify.start,w.l0.border({color:w.TV.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[w.l0.display.inlineFlex,w.l0.rowWithGap(4)],subjectField:[w.l0.colWithGap(8)],subjectFieldHeader:[w.l0.flex.row,w.l0.center,w.l0.justify.spaceBetween],bodyField:[w.l0.colWithGap(8)],subjectInput:is,bodyInput:iu,subjectInputDisabled:[is,{opacity:.5}],bodyInputDisabled:[iu,{opacity:.5}],required:[w.l0.color.accentNegativeStronger],keyCombo:[w.l0.display.inlineFlex,w.l0.rowWithGap(4),w.l0.flex.grow(1),w.l0.align.center],keyComboText:[w.l0.fontWeight.normal,w.l0.color.foregroundDimmest]});function ih(e){var t=e.message,n=e.disabled,r=void 0!==n&&n,i=e.onMessageChange,o=e.onCommitShortcut,a=(0,c._)((0,_.useState)(!0),2),l=a[0],s=a[1],d=(0,c._)((0,_.useState)(!1),2),f=d[0],h=d[1],p=(0,c._)((0,_.useState)(!1),2),m=p[0],g=p[1],y=(0,_.useRef)(null),b=(0,_.useRef)(null),w=(0,O._)(t.split("\n\n")),Z=w[0],x=void 0===Z?"":Z,C=w.slice(1).join("\n\n"),S=(0,it.d)();function k(e,t){i((e=e.replaceAll("\n"," "))+(t?"\n\n"+t:""))}var E=(0,il.gf)(ia.CN.gitCommit.id);return(0,ic.ow)(ia.CT,m),(0,il.Il)(function(){return[ia.CN.gitCommit.id,{run:function(){null==o||o()},scope:ia.CT,bubble:!1}]},[o]),(0,u.BX)(v.G,{children:[(0,u.tZ)(X.zx,{css:id.button,text:(0,u.BX)("span",{css:id.requiredText,children:[(0,u.tZ)("span",{children:"Message"}),l?(0,u.tZ)(iv,{}):null]}),secondaryText:S||!E?void 0:(0,u.BX)("span",{css:id.keyCombo,children:[(0,u.tZ)("span",{css:id.keyComboText,children:"Commit:"}),(0,u.tZ)(il.bM,{keyCombo:E,small:!0})]}),iconRight:l?(0,u.tZ)(e$.Z,{}):(0,u.tZ)(eQ.Z,{}),onClick:function(){return s(function(e){return!e})},size:"small"}),(0,u.BX)(F.Tg,{css:id.surface,elevated:!0,children:[(0,u.tZ)(ip,{ref:y,value:x,compact:l,disabled:r,onChange:function(e){k(e,C)},onNewline:function(){if(l)s(!1),h(!0);else{if(!b.current)return;b.current.focus(),b.current.setSelectionRange(0,0)}},onFocus:function(){g(!0)},onBlur:function(){g(!1)}}),l&&!C?null:(0,u.tZ)(im,{ref:b,value:C,compact:l,disabled:r,onChange:function(e){if(k(x,e),l&&!e){var t;null===(t=y.current)||void 0===t||t.focus()}else l&&s(!1)},onBackspaceWhenEmpty:function(){y.current&&y.current.focus()},onFocus:function(){f&&h(!1),g(!0)},onBlur:function(){g(!1)},autoFocus:f})]})]})}var ip=(0,_.forwardRef)(function(e,t){var n=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.onChange,c=e.onNewline,s=e.onFocus,d=e.onBlur,f=(0,r7.Un)(),h=(0,Z.Z)().container,p=(0,r9.sg)({onResponse:function(e){var t;null==l||l(e||""),null===(t=w.current)||void 0===t||t.focus()}}),g=p.sendMessage,y=p.loading,w=(0,_.useRef)(null),x=(0,ie.Z)().ref;function C(){return(C=(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:return[4,h.exec("git","diff")];case 1:return[2,e.sent().output||""]}})})).apply(this,arguments)}function S(){return(S=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(t){switch(t.label){case 0:if(!f)return[2];return[4,function(){return C.apply(this,arguments)}()];case 1:return e=t.sent(),g("You are a helpful robot that conducts code reviews","Based on this diff: ".concat(e," can you write a helpful summary of changes in this commit? Only write two sentences.")),[2]}})})).apply(this,arguments)}return(0,u.BX)(v.G,{css:id.subjectField,children:[i?null:(0,u.BX)(v.G,{css:id.subjectFieldHeader,children:[(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",multiline:!1,children:(0,u.BX)("span",{css:id.requiredText,children:[(0,u.tZ)("span",{children:"Summary"}),(0,u.tZ)(iv,{})]})}),(0,u.tZ)(ii.T,{iconLeft:y?(0,u.tZ)(b.Z,{}):(0,u.tZ)(io.Z,{}),text:"Summarize with AI",onClick:function(){return S.apply(this,arguments)}})]}),(0,u.tZ)(U.B,{ref:i?t:(0,ir.l)(t,x,w),css:a?id.subjectInputDisabled:id.subjectInput,placeholder:"Summary of your commit...",value:n,disabled:a,onChange:function(e){return null==l?void 0:l(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null==c||c())},onFocus:s,onBlur:d})]})}),im=(0,_.forwardRef)(function(e,t){var n=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.autoFocus,c=e.onChange,s=e.onBackspaceWhenEmpty,d=e.onFocus,f=e.onBlur,h=(0,ie.Z)().ref;return(0,u.BX)(v.G,{css:id.bodyField,children:[i?null:(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,u.tZ)(U.B,{ref:i?t:(0,ir.l)(t,h),css:a?id.bodyInputDisabled:id.bodyInput,placeholder:"Description of your commit...",value:n,disabled:a,onChange:function(e){return null==c?void 0:c(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===n&&(e.preventDefault(),e.stopPropagation(),null==s||s())},onFocus:d,onBlur:f,autoFocus:void 0!==l&&l})]})});function iv(){return(0,u.tZ)(ti.u,{tooltip:"This field is required.",placement:"top",children:(0,u.tZ)("span",{css:id.required,children:"*"})})}var ig=(0,g.X)({commitArea:[w.l0.colWithGap(8)]});function iy(e){var t=e.status,n=e.onStagedFileClick,r=e.defaultMessage,i=(0,c._)((0,_.useState)(t),2),o=i[0],a=i[1],l=(0,c._)((0,_.useState)(null!=r?r:""),2),s=l[0],d=l[1],f=(0,c._)((0,_.useState)(0),2),h=f[0],p=f[1],g=(0,c._)((0,_.useState)(!1),2),y=g[0],b=g[1],w=t6();(0,_.useEffect)(function(){return a(t)},[t]);var x=(0,Z.Z)().git;if(!o||!o.changes.length)return(0,u.tZ)(v.G,{css:ig.commitArea,children:(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var C=o.changes.length,S=o.changes.filter(function(e){return e.staged}).length;function k(){return(k=(0,tl._)(function(e){var t,n;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:if(y)return[2];return p(function(e){return e+1}),[4,x.stageFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,x.status()];case 2:return(n=r.sent()).error?(td({context:"commit-area-status",gitService:x,result:n,data:{opts:e}}),w(n.error)):a(n),x.forceRefresh(),[3,4];case 3:w(t.error),td({context:"commit-area-stage-files",gitService:x,result:t,data:{opts:e}}),r.label=4;case 4:return p(function(e){return e-1}),[2]}})})).apply(this,arguments)}function E(){return(E=(0,tl._)(function(e){var t,n;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:if(y)return[2];return p(function(e){return e+1}),[4,x.restoreFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,x.status()];case 2:return(n=r.sent()).error?(td({context:"commit-area-status",gitService:x,result:n,data:{files:e}}),w(n.error)):a(n),x.forceRefresh(),[3,4];case 3:td({context:"commit-area-restore-files",gitService:x,result:t,data:{files:e}}),w(t.error),r.label=4;case 4:return p(function(e){return e-1}),[2]}})})).apply(this,arguments)}function T(){return R.apply(this,arguments)}function R(){return(R=(0,tl._)(function(){var e,t;return(0,tc.Jh)(this,function(n){switch(n.label){case 0:if(""===s||y||0===C||h>0)return[2];if(b(!0),0!==S)return[3,2];return[4,x.stageFiles({all:!0})];case 1:n.sent(),n.label=2;case 2:return[4,x.commit({message:s})];case 3:if(!(e=n.sent()).error)return[3,4];return b(!1),w(e.error),td({context:"commit-area-commit",gitService:x,result:e,data:{message:s}}),[3,6];case 4:return(0,ny.J)("commit-created",{hasDescription:-1!==s.trim().indexOf("\n\n")}),[4,x.status()];case 5:t=n.sent(),b(!1),t.error?(w(t.error),td({context:"commit-area-status",gitService:x,result:t,data:{message:s}})):(d(""),a(t)),x.forceRefresh(),n.label=6;case 6:return[2]}})})).apply(this,arguments)}var I="Nothing to commit";if(y)I="Committing...";else if(S>0&&S<C){var D=(0,eh.Z)("change",S);I="Commit ".concat(S," staged ").concat(D)}else C>0&&(I="Stage and commit all changes");var B=!s||0===C||h>0||y;return(0,u.BX)(v.G,{css:ig.commitArea,children:[(0,u.tZ)(ih,{message:s,disabled:y,onMessageChange:d,onCommitShortcut:T}),(0,u.tZ)(r8,{status:o,stageFiles:function(e){return k.apply(this,arguments)},restoreFiles:function(e){return E.apply(this,arguments)},onStagedFileClick:n,disabled:y}),B?(0,u.tZ)(ti.u,{tooltip:h>0?"Changes in progress":0===C?"There are no changes to commit.":"You must enter a commit message before you can commit.",children:(0,u.tZ)(X.zx,{text:I,onClick:T,disabled:B,loading:y,colorway:"primary",iconLeft:(0,u.tZ)(nQ.Z,{}),stretch:!0})}):(0,u.tZ)(X.zx,{text:I,onClick:T,disabled:B,loading:y,colorway:"primary",iconLeft:(0,u.tZ)(nQ.Z,{}),stretch:!0})]})}var ib=/\s\(#(\d+)\)$/,iw=/^Revert "(.+)"/,iZ=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function ix(e){var t=iw.exec(e.subject),n=iZ.exec(e.body);if(t&&n){var r,i=n[1],o=t[1],a=ib.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var iC=/\B#\d+\b/g,i_=/^Merged? pull request (#\d+\b)/,iS=/^Merge branch '(.+)'/,ik=/into (.+)$/;function iE(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var t=e.subject.match(iC);if(t){var n,r=parseInt(t[t.length-1].slice(1),10);if(r)return ib.test(e.subject)&&(n=e.subject.replace(ib,"").trim()),!n&&i_.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(n=e.body),{type:"pull-request",id:r,subject:n,reverts:ix(e)}}}if(i_.test(e.subject)){var i,o=i_.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:ix(e)}}if(iS.test(e.subject)){var a=iS.exec(e.subject);if(a){var l=ik.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}var iT=n(1712),iR={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(w.TV.purpleStrongest),borderRadius:"50%"},iI=(0,g.X)({markerContainer:[w.l0.display.flex,w.l0.align.center,w.l0.justify.center,w.l0.minHeight(20),w.l0.minWidth(20)],commitMarker:[w.l0.height(4),w.l0.width(4),w.l0.backgroundColor.foregroundDefault,w.l0.borderRadius("full")],collapsedMarkerIconDot:[w.l0.height(3),w.l0.width(3),w.l0.backgroundColor.foregroundDimmer,w.l0.borderRadius("full")],collapsedMarkerIconContainer:[w.l0.display.flex,w.l0.align.center,w.l0.justify.center,{"div + div":{marginLeft:1}}],collapsedMarker:[w.l0.display.flex,w.l0.align.center,w.l0.justify.center,w.l0.height(20),w.l0.width(20),w.l0.backgroundColor.backgroundHighest,w.l0.borderRadius("full")],revertMarker:[w.l0.display.flex,w.l0.height(20),w.l0.width(20),w.l0.backgroundColor.orangeDimmest,w.l0.borderRadius("full"),w.l0.align.center,w.l0.justify.center],mergeMarker:[w.l0.display.flex,w.l0.height(20),w.l0.width(20),w.l0.backgroundColor.purpleDimmest,w.l0.borderRadius("full"),w.l0.align.center,w.l0.justify.center],mergeMarkerIconContainer:[w.l0.position.relative,w.l0.height(9),w.l0.width(13)],mergeMarkerIconLeft:[(0,N._)({},iR),w.l0.left(0)],mergeMarkerIconRight:[(0,N._)({},iR),w.l0.right(0)],boundaryMarker:[w.l0.height(6),w.l0.width(6),w.l0.backgroundColor.backgroundDefault,w.l0.borderRadius("full"),{border:"1px solid ".concat(w.TV.backgroundHighest)}]});function iD(e){var t=function(e){switch(e){case"none":default:return null;case"commit":return(0,u.tZ)(iB,{});case"revert":return(0,u.tZ)(iG,{});case"merge":return(0,u.tZ)(iA,{});case"boundary":return(0,u.tZ)(iP,{});case"collapsed":return(0,u.tZ)(iN,{})}}(e.type);return t?(0,u.tZ)("div",{css:iI.markerContainer,children:t}):null}function iB(){return(0,u.tZ)("div",{css:iI.commitMarker})}function iG(){return(0,u.tZ)("div",{css:iI.revertMarker,children:(0,u.tZ)(rO.Z,{size:12,color:w.TV.orangeStrongest})})}function iA(){return(0,u.tZ)("div",{css:iI.mergeMarker,children:(0,u.BX)("div",{css:iI.mergeMarkerIconContainer,children:[(0,u.tZ)("div",{css:iI.mergeMarkerIconLeft}),(0,u.tZ)("div",{css:iI.mergeMarkerIconRight})]})})}function iP(){return(0,u.tZ)("div",{css:iI.boundaryMarker})}function iN(){return(0,u.tZ)("div",{css:iI.collapsedMarker,children:(0,u.BX)("div",{css:iI.collapsedMarkerIconContainer,children:[(0,u.tZ)("div",{css:iI.collapsedMarkerIconDot}),(0,u.tZ)("div",{css:iI.collapsedMarkerIconDot}),(0,u.tZ)("div",{css:iI.collapsedMarkerIconDot})]})})}var iL=[w.l0.position.absolute,w.l0.left(0),w.l0.width(18)],iO=(0,g.X)({connectorSegmentBorderSolid:[iL,{borderRight:"1px solid ".concat(w.TV.outlineDimmest)}],connectorSegmentBorderDashed:[iL,{borderRight:"1px dashed ".concat(w.TV.outlineDimmest)}]});function iU(e){var t=e.boundaryTop,n=void 0!==t&&t,r=e.boundaryBottom,i=void 0!==r&&r,o=e.joint,a=void 0===o?"top":o,l=e.hideTop,c=void 0!==l&&l,s=e.hideBottom,d=void 0!==s&&s;if(c&&d)return null;if(n===i&&!c&&!d)return(0,u.tZ)(iX,{top:0,bottom:0,dashed:n&&i});var f=c?null:(0,u.tZ)(iM,{start:"top",joint:a,dashed:n}),h=d?null:(0,u.tZ)(iM,{start:"bottom",joint:a,dashed:i});return(0,u.BX)(u.HY,{children:[f,h]})}function iM(e){var t,n,r=e.start,i=e.joint,o=e.dashed,a="center"===i?(t={},(0,eB._)(t,r,0),(0,eB._)(t,"height","50%"),t):(n={},(0,eB._)(n,r,0),(0,eB._)(n,r===i?"height":i,8),n);return(0,u.tZ)(iX,(0,L._)((0,N._)({},a),{dashed:void 0!==o&&o}))}function iX(e){var t=e.top,n=e.bottom,r=e.height,i=e.dashed;return(0,u.tZ)("div",{css:void 0!==i&&i?iO.connectorSegmentBorderDashed:iO.connectorSegmentBorderSolid,style:{top:t,bottom:n,height:r}})}var iF=(0,g.X)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[ne.gU.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[w.l0.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:20},nodeUnfoldedContentSurface:[w.l0.mt(4),w.l0.mb(8),w.l0.p(8),w.l0.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[w.l0.position.relative]});function iW(e){var t=e.boundaryTop,n=e.boundaryBottom,r=void 0!==n&&n,i=e.hideConnectorTop,o=e.hideConnectorBottom,a=void 0!==o&&o,l=e.joint,s=void 0===l?"top":l,d=e.marker,f=e.header,h=e.unfoldedContent,p=e.children,m=e.className,g=(0,c._)((0,_.useState)(!0),2),y=g[0],b=g[1];return(0,u.BX)(v.G,{className:m,css:w.l0.position.relative,children:[(0,u.tZ)(iU,{boundaryTop:void 0!==t&&t,boundaryBottom:r,joint:s,hideTop:void 0!==i&&i,hideBottom:a}),d?(0,u.tZ)(iV,{joint:s,children:d}):null,h?(0,u.BX)(v.G,{css:iF.containerInteractive,role:"button",tabIndex:0,onClick:function(){b(!y)},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&b(!y)},children:[y?(0,u.tZ)("div",{css:iF.nodeFoldedIconContainer,children:(0,u.tZ)(e$.Z,{})}):(0,u.tZ)("div",{css:iF.nodeUnFoldedIconContainer,children:(0,u.tZ)(eQ.Z,{})}),(0,u.BX)(v.G,{css:iF.nodeContentContainer,children:[f?(0,u.tZ)(v.G,{css:iF.nodeHeader,children:f}):null,p?(0,u.tZ)(v.G,{children:p}):null]})]}):(0,u.tZ)(v.G,{css:iF.container,children:(0,u.BX)(v.G,{css:iF.nodeContentContainer,children:[f?(0,u.tZ)(v.G,{css:iF.nodeHeader,children:f}):null,p?(0,u.tZ)(v.G,{children:p}):null]})}),!h||y?null:(0,u.BX)(v.G,{css:iF.unfoldedContentContainer,children:[a?null:(0,u.tZ)(iX,{top:0,bottom:0,dashed:r}),(0,u.tZ)(F.Tg,{css:iF.nodeUnfoldedContentSurface,elevated:!0,children:h})]})]})}var iH=(0,g.X)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function iV(e){var t=e.joint,n=e.children;return(0,u.tZ)("div",{css:iH[void 0===t?"top":t],children:n})}var iz=(0,g.X)({container:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.spaceBetween,w.l0.height("100%")],textContainer:[w.l0.rowWithGap(4),w.l0.center],text:[w.l0.flex.shrink(0)]});function ij(e){var t=e.text,n=(0,eP._)(e,["text"]);return(0,u.tZ)(iW,(0,N._)({marker:(0,u.tZ)(iD,{type:"boundary"}),joint:"center",header:(0,u.BX)(v.G,{css:iz.container,children:[(0,u.tZ)(t7.R,{}),(0,u.BX)(v.G,{css:iz.textContainer,children:[(0,u.tZ)(iT.Z,{size:12,color:w.TV.foregroundDimmest}),(0,u.tZ)(m.xv,{css:iz.text,variant:"small",color:"dimmest",multiline:!1,children:t})]}),(0,u.tZ)(t7.R,{})]})},n))}var iq=(0,g.X)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:w.TV.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:w.TV.space2},"> dd":{marginLeft:w.TV.space12,paddingBottom:w.TV.space2}},listHeader:[w.l0.fontWeight.medium],content:[w.l0.colWithGap(8)],description:[w.l0.colWithGap(8)],commitList:[w.l0.colWithGap(2),w.l0.pl(4)]}),iJ=function(e,t){var n=!e.body,r=null,i=null;return t&&"type"in t?(r=t,"pull-request"===t.type&&(t.reverts&&(i=t.reverts),t.subject&&(n=!0))):t&&(i=t),{hideBody:n,merge:r,revert:i}},iY=function(e){var t=e.hash;return(0,u.tZ)(eK.q,{size:"small",iconLeft:(0,u.tZ)(H.Z,{}),textToCopy:t,text:t.slice(0,7),tooltipSuccessText:"Hash copied!"})},iK=function(e){var t=e.onClick,n=e.text,r=e.loading;return(0,u.tZ)(ti.u,{tooltip:"Discard current changes and restore files to time of commit",children:(0,u.tZ)(X.zx,{text:n,onClick:t,size:"small",iconLeft:void 0!==r&&r?(0,u.tZ)(b.Z,{}):(0,u.tZ)(rO.Z,{})})})},i$=function(e,t){return!(e.name===t.name&&e.email===t.email)},iQ=function(e,t){return!(6e4>Math.abs(e-t))};function i0(e){var t=e.commit,n=e.info,r=i$(t.committer,t.author),i=iQ(t.author.date,t.committer.date),o=iJ(t,void 0===n?null:n),a=o.hideBody,l=o.merge,c=o.revert;return(0,u.BX)(v.G,{css:iq.content,children:[a?null:(0,u.BX)(v.G,{css:iq.description,children:[(0,u.tZ)(m.xv,{children:(0,u.tZ)(nb.uJ,{body:t.body})}),(0,u.tZ)(t7.R,{css:w.l0.backgroundColor.outlineDimmer})]}),(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{css:iq.listHeader,multiline:!1,children:"Author"}),(0,u.BX)("dl",{css:iq.definitionList,children:[(0,u.tZ)("dt",{children:"Name:"}),(0,u.tZ)("dd",{children:t.author.name}),(0,u.tZ)("dt",{children:"Email:"}),(0,u.tZ)("dd",{children:t.author.email})]})]}),r?(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{css:iq.listHeader,multiline:!1,children:"Committer"}),(0,u.BX)("dl",{css:iq.definitionList,children:[(0,u.tZ)("dt",{children:"Name:"}),(0,u.tZ)("dd",{children:t.committer.name}),(0,u.tZ)("dt",{children:"Email:"}),(0,u.tZ)("dd",{children:t.committer.email})]})]}):null,(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{css:iq.listHeader,multiline:!1,children:"Commit"}),(0,u.BX)("dl",{css:iq.definitionList,children:[i?(0,u.BX)(u.HY,{children:[(0,u.tZ)("dt",{children:"Authored:"}),(0,u.tZ)("dd",{children:(0,u.tZ)(nr.EK,{date:t.author.date,dateFormat:"absolute"})}),(0,u.tZ)("dt",{children:"Committed:"}),(0,u.tZ)("dd",{children:(0,u.tZ)(nr.EK,{date:t.committer.date,dateFormat:"absolute"})})]}):(0,u.BX)(u.HY,{children:[(0,u.tZ)("dt",{children:"Date:"}),(0,u.tZ)("dd",{children:(0,u.tZ)(nr.EK,{date:t.author.date,dateFormat:"absolute"})})]}),(0,u.tZ)("dt",{children:"Hash:"}),(0,u.tZ)("dd",{children:(0,u.tZ)(iY,{hash:t.hash})}),l&&"pull-request"===l.type?(0,u.BX)(u.HY,{children:[(0,u.tZ)("dt",{children:"PR:"}),(0,u.BX)("dd",{children:["#",l.id]})]}):null,l&&"branch"===l.type?(0,u.BX)(u.HY,{children:[(0,u.tZ)("dt",{children:"Merged:"}),(0,u.tZ)("dd",{children:l.source}),l.target?(0,u.BX)(u.HY,{children:[(0,u.tZ)("dt",{children:"Into:"}),(0,u.tZ)("dd",{children:l.target})]}):null]}):null,c?(0,u.BX)(u.HY,{children:[(0,u.tZ)("dt",{children:"Reverted:"}),(0,u.tZ)("dd",{children:c.hash})]}):null]})]}),l&&"simple"===l.type?(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{css:iq.listHeader,multiline:!1,children:"Merged"}),(0,u.BX)(v.G,{css:iq.commitList,children:[(0,u.tZ)(m.xv,{multiline:!1,children:l.a}),(0,u.tZ)(m.xv,{multiline:!1,children:l.b})]})]}):null,l&&"octopus"===l.type?(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{css:iq.listHeader,multiline:!1,children:"Merged"}),(0,u.tZ)(v.G,{css:iq.commitList,children:l.parents.map(function(e,t){return(0,u.tZ)(m.xv,{multiline:!1,children:e},t)})})]}):null]})}var i1=(0,g.X)({authorContainer:[w.l0.rowWithGap(8),w.l0.align.center],headerText:[w.l0.rowWithGap(4),w.l0.align.center,w.l0.fontWeight.medium],headerContainer:[w.l0.colWithGap(4),w.l0.align.start,w.l0.justify.start],button:[w.l0.reset.button,w.l0.linkStyle,w.l0.color.foregroundDefault,w.l0.fontWeight.medium,{display:"block",width:"100%",textAlign:"left"}]}),i2=function(e){var t=e.author;return(0,u.BX)(v.G,{css:i1.authorContainer,children:[(0,u.tZ)(nv,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,u.tZ)(nr.EK,{date:t.date,textColor:"dimmest",textVariant:"small"})]})},i3=function(e){var t=e.children;return(0,u.tZ)(m.xv,{css:i1.headerText,multiline:!1,maxLines:1,children:t})},i4=function(e){var t=e.commit,n=e.onViewCommitClick,r=e.children;return(0,u.tZ)(v.G,{css:i1.headerContainer,children:(0,u.tZ)(ti.u,{tooltip:"View ".concat(t.hash.slice(0,7)),children:(0,u.tZ)("button",{css:i1.button,onClick:function(){return n(t.hash)},children:r})})})};function i8(e){var t=e.commit,n=(0,eP._)(e,["commit"]);return(0,u.tZ)(iW,(0,L._)((0,N._)({marker:(0,u.tZ)(iD,{type:"commit"}),header:(0,u.tZ)(i3,{children:(0,u.tZ)(nb.Zr,{subject:t.subject})}),unfoldedContent:(0,u.tZ)(i0,{commit:t})},n),{children:(0,u.tZ)(i2,{author:t.author})}))}var i6=function(e){var t=e.commit,n=e.onViewCommitClick,r=(0,eP._)(e,["commit","onViewCommitClick"]);return(0,u.tZ)(iW,(0,L._)((0,N._)({marker:(0,u.tZ)(iD,{type:"commit"}),header:(0,u.tZ)(i4,{commit:t,onViewCommitClick:function(){return n(t.hash)},children:(0,u.tZ)(i3,{children:(0,u.tZ)(nb.Zr,{subject:t.subject})})})},r),{children:(0,u.tZ)(i2,{author:t.author})}))};function i5(e){var t,n=e.commit,r=e.info,i=(0,eP._)(e,["commit","info"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,u.tZ)(iW,(0,L._)((0,N._)({marker:(0,u.tZ)(iD,{type:"merge"}),header:(0,u.BX)(i3,{children:[(0,u.tZ)(nb.ST,{text:"merged"}),(0,u.tZ)(i7,{info:r,hash:n.hash,subject:n.subject})]}),unfoldedContent:(0,u.tZ)(i0,{commit:n,info:r})},i),{children:(0,u.BX)(v.G,{css:[w.l0.colWithGap(8)],children:[t?(0,u.tZ)(m.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,u.tZ)(nb.Zr,{subject:t})}):null,(0,u.tZ)(i2,{author:n.author})]})}))}var i9=function(e){var t,n=e.commit,r=e.info,i=e.onViewCommitClick,o=(0,eP._)(e,["commit","info","onViewCommitClick"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,u.tZ)(iW,(0,L._)((0,N._)({marker:(0,u.tZ)(iD,{type:"merge"}),header:(0,u.tZ)(i4,{commit:n,onViewCommitClick:function(){return i(n.hash)},children:(0,u.BX)(i3,{children:[(0,u.tZ)(nb.ST,{text:"merged"}),(0,u.tZ)(i7,{info:r,hash:n.hash,subject:n.subject})]})})},o),{children:(0,u.BX)(v.G,{css:[w.l0.colWithGap(8)],children:[t?(0,u.tZ)(m.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,u.tZ)(nb.Zr,{subject:t})}):null,(0,u.tZ)(i2,{author:n.author})]})}))};function i7(e){var t=e.info,n=e.hash,r=e.subject,i=(0,u.tZ)("span",{css:w.l0.fontWeight.medium,children:r});switch(t.type){case"pull-request":return(0,u.BX)(u.HY,{children:[(0,u.tZ)("span",{children:"pull request"}),(0,u.tZ)(nb.$8,{id:t.id}),t.reverts&&t.reverts.pr?(0,u.BX)(u.HY,{children:[(0,u.tZ)("span",{children:"-"}),(0,u.tZ)(nb.po,{text:"reverts"}),(0,u.tZ)(nb.$8,{id:t.reverts.pr})]}):null]});case"branch":if(!t.target)return(0,u.BX)(u.HY,{children:[(0,u.tZ)("span",{children:"branch"}),(0,u.tZ)(nb.Lr,{name:t.source})]});return(0,u.BX)(u.HY,{children:[(0,u.tZ)(nb.Lr,{name:t.source}),(0,u.tZ)("span",{children:"into"}),(0,u.tZ)(nb.Lr,{name:t.target})]});case"simple":return(0,u.BX)(u.HY,{children:[(0,u.tZ)(nb.kb,{hash:t.a}),(0,u.tZ)(rb.Z,{css:{alignSelf:"center"},size:12}),(0,u.tZ)(nb.kb,{hash:t.b})]});case"octopus":return(0,u.BX)(u.HY,{children:[(0,u.tZ)("span",{children:"commit"}),(0,u.tZ)(nb.kb,{hash:n}),(0,u.BX)("span",{children:["(",t.parents.length," parents)"]})]});default:return i}}function oe(e){var t=e.commit,n=e.info,r=(0,eP._)(e,["commit","info"]);return(0,u.tZ)(iW,(0,L._)((0,N._)({marker:(0,u.tZ)(iD,{type:"revert"}),header:(0,u.BX)(i3,{children:[(0,u.tZ)(nb.po,{text:"reverted"}),(0,u.tZ)(nb.kb,{hash:n.hash}),(0,u.tZ)(nb.Zr,{subject:n.subject,quoted:!0})]}),unfoldedContent:(0,u.tZ)(i0,{commit:t,info:n})},r),{children:(0,u.tZ)(i2,{author:t.author})}))}var ot=function(e){var t=e.commit,n=e.info,r=e.onViewCommitClick,i=(0,eP._)(e,["commit","info","onViewCommitClick"]);return(0,u.tZ)(iW,(0,L._)((0,N._)({marker:(0,u.tZ)(iD,{type:"revert"}),header:(0,u.tZ)(i4,{commit:t,onViewCommitClick:function(){return r(t.hash)},children:(0,u.BX)(i3,{children:[(0,u.tZ)(nb.po,{text:"reverted"}),(0,u.tZ)(nb.kb,{hash:n.hash}),(0,u.tZ)(nb.Zr,{subject:n.subject,quoted:!0})]})})},i),{children:(0,u.tZ)(i2,{author:t.author})}))},on=(0,g.X)({body:[w.l0.flex.growAndShrink(1)],virtualItem:[w.l0.position.absolute,w.l0.top(0),w.l0.left(0),w.l0.width("100%"),w.l0.overflow("hidden")],virtualList:[w.l0.position.relative]}),or=function(){return 60};function oi(e){var t=e.items,n=(0,_.useRef)(null),r=(0,t9.MG)({overscan:10,count:t.length,getScrollElement:function(){return n.current},estimateSize:or});return(0,u.tZ)("div",{ref:n,css:on.body,children:(0,u.tZ)("div",{css:on.virtualList,style:{height:"".concat(r.getTotalSize(),"px")},children:r.getVirtualItems().map(function(e){return(0,u.tZ)("div",{css:on.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:r.measureElement,children:(0,u.tZ)(oo,{items:t,index:e.index})},e.key)})})})}function oo(e){var t=e.items,n=e.index,r=t[n],i=0===n,o=n===t.length-1;if("boundary"===r.type)return(0,u.tZ)(ij,{text:r.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},r.text);var a=t[n-1]?t[n-1].type:null,l=t[n+1]?t[n+1].type:null;return(0,u.tZ)(oa,{commit:r.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:"commit"!==a,boundaryBottom:"commit"!==l,onViewCommitClick:r.onViewCommitClick},r.commit.hash)}function oa(e){var t=e.commit,n=e.onViewCommitClick,r=(0,eP._)(e,["commit","onViewCommitClick"]),i=iE(t);if(i)return n?(0,u.tZ)(i9,(0,N._)({info:i,commit:t,onViewCommitClick:n},r)):(0,u.tZ)(i5,(0,N._)({info:i,commit:t},r));var o=ix(t);return o?n?(0,u.tZ)(ot,(0,N._)({info:o,commit:t,onViewCommitClick:n},r)):(0,u.tZ)(oe,(0,N._)({info:o,commit:t},r)):n?(0,u.tZ)(i6,(0,N._)({commit:t,onViewCommitClick:n},r)):(0,u.tZ)(i8,(0,N._)({commit:t},r))}var ol=(0,ef.F4)({from:{opacity:0},to:{opacity:1}}),oc=(0,g.X)({loadingView:[{animation:"".concat(ol," 0.125s 0.25s linear backwards")},w.l0.flex.grow(1),w.l0.display.flex,w.l0.center]});function os(){return(0,u.tZ)(v.G,{css:oc.loadingView,children:(0,u.tZ)(b.Z,{size:48})})}var ou=(0,g.X)({view:[w.l0.pt(4),w.l0.pb(8),w.l0.px(4),w.l0.colWithGap(8),w.l0.flex.grow(1)],sectionContainer:[w.l0.colWithGap(8)],section:[w.l0.pt(8),w.l0.pb(16),w.l0.px(8),w.l0.colWithGap(8),w.l0.border({color:w.TV.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.spaceBetween],reviewChangesHeader:[w.l0.rowWithGap(8),w.l0.align.center],headerText:[w.l0.fontWeight.medium],replMergingHeader:[w.l0.rowWithGap(8),w.l0.align.center],switchToBranch:[w.l0.p(4),w.l0.flex.row,w.l0.align.center,w.l0.justify.spaceBetween,w.l0.mt(0),w.l0.mb(0)]});function od(e){var t,n,r=e.status,i=e.remotes,o=e.branch,a=e.onStagedFileClick,l=e.onViewCommitClick,c=e.onViewSettingsClick,d=e.gotoPendingState,f=e.current,h=void 0!==f&&f,p=rN(o,h?null==r?void 0:null===(t=r.upstream)||void 0===t?void 0:t.behind:void 0,h?null==r?void 0:null===(n=r.upstream)||void 0===n?void 0:n.ahead:void 0),g=!!i&&i.size>0,y=(null==o?void 0:o.type)===tQ.HO.LOCAL,b=(0,_.useMemo)(function(){if(!p||p.error)return[];var e=[],t=p.log,n=void 0===t?[]:t,r=p.onlyRemote,i=void 0===r?[]:r,o=p.onlyLocal,a=void 0===o?[]:o,c=n.length>0,u=i.length>0,d=a.length>0;return u&&(e.push({type:"boundary",text:"Not pulled from remote"}),e.push.apply(e,(0,s._)(of(i,l)))),d&&(e.push({type:"boundary",text:"Not pushed to remote"}),e.push.apply(e,(0,s._)(of(a,l)))),c&&((u||d)&&e.push({type:"boundary",text:"Up to date with remote"}),e.push.apply(e,(0,s._)(of(n,l)))),e},[p,l]);return o?(0,u.BX)(v.G,{css:ou.view,children:[(0,u.BX)(v.G,{css:ou.sectionContainer,children:[y?(0,u.tZ)(v.G,{css:ou.section,children:(0,u.tZ)(rp,{branch:o,onViewSettingsClick:c})}):null,h&&!y&&i&&g?(0,u.BX)(v.G,{css:ou.section,children:[(0,u.BX)(v.G,{css:ou.remoteUpdatesHeader,children:[(0,u.tZ)(m.xv,{css:ou.headerText,multiline:!1,children:"Remote Updates"}),(0,u.tZ)(ry,{branch:o,remotes:i})]}),(0,u.tZ)(rP,{remotes:i,gotoPendingState:d})]}):null,h&&r?(0,u.BX)(v.G,{css:ou.section,children:[(0,u.tZ)(v.G,{css:ou.reviewChangesHeader,children:(0,u.tZ)(m.xv,{css:ou.headerText,multiline:!1,children:"Commit"})}),(0,u.tZ)(iy,{status:r,onStagedFileClick:a})]}):null]}),p?(0,u.tZ)(oi,{items:b}):(0,u.tZ)(os,{})]}):(0,u.tZ)("div",{children:"No branch"})}function of(e,t){return e.map(function(e){return{type:"commit",commit:e,onViewCommitClick:t}})}function oh(){return(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,u.tZ)(m.xv,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}var op=(0,g.X)({branch:[ne.gU.nofill,w.l0.py(12),w.l0.px(8),w.l0.colWithGap(2),w.l0.justify.center,w.l0.borderRadius(8),w.l0.flex.shrink(1)],branchMetadata:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.flex.shrink(1)]});function om(e){var t=e.branch,n=e.current,r=e.onClick;return(0,u.BX)(v.G,{css:op.branch,tabIndex:0,role:"button","aria-label":"Switch to branch ".concat((0,no.bF)(t,!0)),onClick:r,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==r||r())},children:[(0,u.tZ)(m.xv,{multiline:!1,children:(0,u.tZ)(nb.Lr,{name:t.name,remote:t.type===tQ.HO.REMOTE?t.remote:null,current:void 0!==n&&n,onClick:r,icon:!0})}),(0,u.tZ)(ov,{branch:t})]})}function ov(e){var t=e.branch;return(0,u.BX)(v.G,{css:op.branchMetadata,children:[(0,u.tZ)(nv,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,u.tZ)(nr.EK,{date:t.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var og=(0,g.X)({expandButton:[{verticalAlign:"middle"},w.l0.justify.spaceBetween],branchListContainer:[w.l0.display.flex],topRow:[w.l0.p(4),w.l0.flex.row,w.l0.align.center,w.l0.justify.spaceBetween],topRowInteractive:[{verticalAlign:"middle"},w.l0.justify.spaceBetween,w.l0.borderRadius(8,8,0,0)],branchList:[w.l0.borderRadius(8)],branchListFoldable:[w.l0.borderRadius(0,0,8,8)]});function oy(e){var t=e.name,n=e.branches,r=e.current,i=void 0===r?null:r,o=e.foldable,a=void 0!==o&&o,l=e.folded,s=e.switchBranch,d=(0,c._)((0,_.useState)(!!a&&void 0!==l&&l),2),f=d[0],h=d[1],p=(0,_.useMemo)(function(){return n.map(function(e){return(0,u.tZ)(om,{branch:e,current:(0,tQ.p3)(e,i),onClick:function(){return s(e)}},(0,no.Qj)(e))})},[n,i,s]);return f?(0,u.tZ)(X.zx,{css:og.expandButton,text:t,iconRight:(0,u.tZ)(e$.Z,{}),onClick:function(){return h(!1)},size:"big"}):a?(0,u.BX)(v.G,{css:og.branchListContainer,children:[(0,u.tZ)(X.zx,{css:og.topRowInteractive,text:t,iconRight:(0,u.tZ)(eQ.Z,{}),onClick:function(){return h(!0)},size:"big"}),(0,u.tZ)(F.Tg,{css:og.branchListFoldable,elevated:!0,children:p})]}):(0,u.BX)(v.G,{css:og.branchListContainer,children:[(0,u.tZ)(v.G,{css:og.topRow,children:(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:t})}),(0,u.tZ)(F.Tg,{css:og.branchList,elevated:!0,children:p})]})}var ob=(0,g.X)({container:[w.l0.p(8),w.l0.colWithGap(8),w.l0.borderRadius(8)],buttonContainer:[w.l0.rowWithGap(4)],button:[w.l0.flex.grow(1)],inputDisabled:[{opacity:.75}]});function ow(){var e=(0,c._)((0,_.useState)(!0),2),t=e[0],n=e[1],r=(0,c._)((0,_.useState)(""),2),i=r[0],o=r[1],a=(0,c._)((0,_.useState)(!1),2),l=a[0],s=a[1],d=t6(),f=(0,Z.Z)().git;function h(){n(!0),o("")}function p(){return m.apply(this,arguments)}function m(){return(m=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:if(t||!i||l)return[2];return s(!0),[4,f.createBranch({name:i,checkout:!0})];case 1:return(e=r.sent()).error?(d(e.error),s(!1)):(f.forceRefresh(),s(!1),o(""),n(!0),(0,ny.J)("branch-created")),[2]}})})).apply(this,arguments)}if(t)return(0,u.tZ)(X.zx,{text:"Create Branch",iconLeft:(0,u.tZ)(ni.Z,{}),onClick:function(){return n(!1)}});var g=!i||!(0,no.Dc)(i);return(0,u.BX)(F.Tg,{css:ob.container,elevated:!0,children:[(0,u.tZ)(oZ,{value:i,onChange:o,onSubmit:p,onCancel:h,disabled:l}),(0,u.BX)(v.G,{css:ob.buttonContainer,children:[(0,u.tZ)(X.zx,{css:ob.button,text:"Cancel",onClick:h,disabled:l}),(0,u.tZ)(X.zx,{css:ob.button,text:"Create Branch",colorway:"primary",iconLeft:(0,u.tZ)(ni.Z,{}),onClick:p,loading:l,disabled:g})]})]})}function oZ(e){var t=e.value,n=e.disabled,r=e.onChange,i=e.onSubmit,o=e.onCancel;function a(e){(0,no.dC)(e)&&(null==r||r(e))}return(0,u.tZ)(U.II,{value:t,css:n?ob.inputDisabled:void 0,disabled:n,placeholder:"Enter a name for your new branch",onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){return function(e,n){switch(e){case"Enter":null==i||i(),n();break;case"Escape":null==o||o(),n();break;case" ":if(""===t){n();break}a(t+"-"),n()}}(e.key,function(){return e.preventDefault()})},onBlur:function(){""===t&&(null==o||o())},autoFocus:!0})}function ox(e){var t,n,r=e.currentBranch,i=e.switchMode,o=t6(),a=(0,Z.Z)().git,l=(0,c._)((0,_.useState)(null),2),s=l[0],d=l[1],f=(0,ts.Z)((t=(0,tl._)(function(e){var t,n,r,i,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w;return(0,tc.Jh)(this,function(Z){switch(Z.label){case 0:return[4,e.listBranches()];case 1:if((t=Z.sent()).error)return o(t.error),td({context:"dashboard-view",gitService:e,result:t}),[2,t];return[4,e.findDefaultBranches()];case 2:if((n=Z.sent()).error)return o(n.error),[2,n];r=t.branches,i=new Set,a=!0,l=!1,c=void 0;try{for(s=function(){var e=d.value,t=r.find(function(t){return(0,no.Pi)(t,e)});t&&i.add(t)},u=n.refs[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)s()}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}f=Date.now()-5184e6,h=[],p=[],m=!0,v=!1,g=void 0;try{for(y=r[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)w=b.value,i.has(w)||(w.commit.author.date>f?h.push(w):p.push(w))}catch(e){v=!0,g=e}finally{try{m||null==y.return||y.return()}finally{if(v)throw g}}return[2,{active:h,stale:p,important:Array.from(i),error:null}]}})}),function(e){return t.apply(this,arguments)}),[o]),h=(n=(0,tl._)(function(e){var t;return(0,tc.Jh)(this,function(n){switch(n.label){case 0:if(null!==s)return[2];return(0,no.Pi)(r,e)&&i({mode:g8.CURRENT_BRANCH}),d(e),[4,a.switchBranch(e)];case 1:return(t=n.sent()).error?(o(t.error),td({context:"dashboard-view",gitService:a,result:t,data:{branch:e.name}}),d(null)):(a.forceRefresh(),(0,ny.J)("branch-switched")),[2]}})}),function(e){return n.apply(this,arguments)});if((0,_.useEffect)(function(){null!==s&&(0,no.Pi)(r,s)&&(d(null),i({mode:g8.CURRENT_BRANCH}))},[r,s,i]),!f||null!==s)return(0,u.tZ)(os,{});if(f.error)return(0,u.tZ)("div",{children:f.error});var p=f.active,g=f.stale,y=f.important;return(0,u.tZ)(v.G,{css:[w.l0.colWithGap(8)],children:(0,u.BX)(v.G,{css:[w.l0.pb(8),w.l0.px(8),w.l0.colWithGap(16)],children:[r?(0,u.BX)(v.G,{css:w.l0.colWithGap(8),children:[(0,u.tZ)(oy,{branches:[r],current:r,name:"Current Branch",switchBranch:h}),(0,u.tZ)(ow,{})]}):null,(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,css:ou.switchToBranch,children:"Switch Branch"}),0===y.length?null:(0,u.tZ)(oy,{branches:y,current:r,name:"Important",switchBranch:h,foldable:!0}),0===p.length?null:(0,u.tZ)(oy,{branches:p,current:r,name:"Active",switchBranch:h,foldable:!0}),0===g.length?null:(0,u.tZ)(oy,{branches:g,current:r,name:"Stale",switchBranch:h,foldable:!0,folded:!0})]})})}function oC(){return(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,u.tZ)(m.xv,{multiline:!1,children:"Please checkout a branch."})]})}var o_=n(71089),oS=(0,g.X)({checkboxLabel:w.l0.rowWithGap(8)});function ok(){var e=(0,_.useId)(),t=(0,c._)((0,_.useState)(!0),2),n=t[0],r=t[1],i=(0,c._)((0,_.useState)(!1),2),o=i[0],a=i[1],l=t6(),s=(0,Z.Z)().git;function d(){return(d=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(t){switch(t.label){case 0:if(o)return[2];return a(!0),[4,s.init({initialCommit:n,includeAllInitialFiles:!0})];case 1:return(e=t.sent()).error?(a(!1),l(e.error)):(s.forceRefresh(),(0,ny.J)("repository-initialized")),[2]}})})).apply(this,arguments)}return(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{css:oS.checkboxLabel,tag:"label",children:[(0,u.tZ)(o_.X,{id:e,checked:n,onChange:function(e){return r(e)}}),(0,u.tZ)(m.xv,{multiline:!1,children:"Create initial commit with all changes"})]}),(0,u.tZ)(X.zx,{text:o?"Initializing...":"Initialize Git Repository",iconLeft:o?(0,u.tZ)(b.Z,{}):(0,u.tZ)(tY.Z,{}),colorway:"primary",loading:o,onClick:function(){return d.apply(this,arguments)}})]})}var oE=n(28508),oT=(0,g.X)({container:[w.l0.height("100%"),w.l0.p(16),w.l0.colWithGap(16),w.l0.center],imageTagline:[w.l0.colWithGap(16),w.l0.center,w.l0.flex.shrink(1)]});function oR(){return(0,u.BX)(v.G,{css:oT.container,children:[(0,u.BX)(v.G,{css:oT.imageTagline,children:[(0,u.tZ)(oE.Z,{art:"Clock"}),(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:"Version control for your Repl."})]}),(0,u.tZ)(ok,{})]})}function oI(){return(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,u.tZ)(m.xv,{multiline:!1,children:"Please finish the rebase manually."})]})}function oD(){return(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,u.tZ)(m.xv,{multiline:!1,children:"Please finish the revert manually."})]})}var oB=(0,g.X)({container:[w.l0.colWithGap(16),w.l0.p(8),w.l0.pt(16)],fakePaneHeader:[w.l0.px(8),w.l0.py(4),w.l0.rowWithGap(8),w.l0.backgroundColor.backgroundDefault,w.l0.align.center,{borderBottom:"1px solid ".concat(w.TV.outlineDimmer)}]});function oG(e){var t=e.onFileClick,n=e.status;return(0,u.BX)(v.G,{children:[(0,u.tZ)(oA,{}),(0,u.BX)(v.G,{css:oB.container,children:[(0,u.tZ)(ru.E,{colorway:"orange",icon:(0,u.tZ)(nq.Z,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,u.BX)(v.G,{css:ou.section,children:[(0,u.tZ)(v.G,{css:ou.reviewChangesHeader,children:(0,u.tZ)(m.xv,{css:ou.headerText,multiline:!1,children:"Commit"})}),(0,u.tZ)(iy,{status:n,onStagedFileClick:t,defaultMessage:"Initial commit"})]})]})]})}function oA(){var e,t=t6(),n=(0,ts.Z)((e=(0,tl._)(function(e){var n;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:return[4,e.status()];case 1:return(n=r.sent()).error&&(td({context:"unborn-branch-view-status",gitService:e,result:n}),t(n.error)),[2,n]}})}),function(t){return e.apply(this,arguments)}),[t]);return(null==n?void 0:n.error)?null:(0,u.tZ)(v.G,{css:oB.fakePaneHeader,children:(null==n?void 0:n.branch)?(0,u.tZ)(nb.Lr,{name:n.branch,current:!0,heading:!0}):null})}function oP(e){var t=e.error;return(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{multiline:!1,children:"Failed to start the Git pane."}),(0,u.BX)(m.xv,{multiline:!1,children:["Error: ",t]})]})}var oN=function(e){var t,n=(0,ts.Z)((t=(0,tl._)(function(t){var n,r,i;return(0,tc.Jh)(this,function(o){switch(o.label){case 0:return[4,t.isInitialized()];case 1:if((n=o.sent()).error)return[2,{error:n.error}];if(!n.initialized)return[2,{error:nY.aq.NOT_INITIALIZED}];return[4,t.log({max:1,revRange:e})];case 2:if((r=o.sent()).error)return[2,{error:r.error}];if(0===r.commits.length)return[2,{error:nY.aq.NO_COMMITS}];return[2,{commit:null!==(i=r.commits[0])&&void 0!==i?i:null,error:null}]}})}),function(e){return t.apply(this,arguments)}),[e]);return(0,_.useMemo)(function(){return n?n.error?{error:n.error}:n:null},[n])},oL=n(99321),oO=n(72452),oU=[{"& > span:first-child":[w.l0.flex.grow(1),w.l0.textAlign.left]},{"& > span":[w.l0.flex.shrink(1)]}],oM=(0,g.X)({container:[w.l0.colWithGap(16)],splitOrUnisonContainer:[w.l0.colWithGap(8),w.l0.display.flex,w.l0.flex.row,w.l0.flex.wrap,w.l0.align.center,w.l0.justify.spaceBetween],emphasizedText:[w.l0.fontWeight.medium],buttonFolded:[oU,w.l0.height("auto"),w.l0.py(8),w.l0.fontWeight.medium],buttonUnfolded:[oU,w.l0.height("auto"),w.l0.py(8),w.l0.fontWeight.medium,w.l0.borderRadius(8,8,0,0)],buttonGroupItem:[w.l0.width(64),w.l0.height(32)],textContainer:[w.l0.mt(8),w.l0.overflow("break-all")]}),oX=function(e){var t=e.children;return(0,u.tZ)(v.G,{css:oM.splitOrUnisonContainer,children:t})},oF=function(e){var t=e.value,n=e.onChange;return(0,u.BX)(eY.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,u.tZ)(v.G,{css:oM.buttonGroupItem,children:(0,u.tZ)(eY.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,u.tZ)(v.G,{css:oM.buttonGroupItem,children:(0,u.tZ)(eY.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},oW=function(e){var t=e.value,n=e.onChange;return(0,u.tZ)(h.hU,{alt:"Markdown"===t?"View Source":"View Markdown",onClick:function(){return n("Markdown"===t?"Source":"Markdown")},children:"Markdown"===t?(0,u.tZ)(oL.Z,{}):(0,u.tZ)(oO.Z,{})})},oH=function(e){var t=e.files,n=e.totalFiles;return t===n?(0,u.BX)(m.xv,{css:oM.textContainer,children:["Showing"," ",(0,u.BX)("span",{css:oM.emphasizedText,children:[n," changed ",(0,eh.Z)("file",n),"."]})]}):(0,u.BX)(m.xv,{css:oM.textContainer,children:["Showing"," ",(0,u.BX)("span",{css:oM.emphasizedText,children:[t," of ",n," changed ",(0,eh.Z)("file",n),"."]})]})},oV=function(e){var t=e.query,n=e.setQuery,r=e.totalDiffs,i=e.diffs,o=e.splitOrUnified,a=e.setSplitOrUnified,l=e.folded,c=e.setFolded,s=(0,_.useMemo)(function(){return i.filter(function(e){var n="".concat(e.final.path,"/").concat(e.final.filename),r="".concat(e.initial.path,"/").concat(e.initial.filename);return n.toLowerCase().includes(t.toLowerCase())||r.toLowerCase().includes(t.toLowerCase())})},[t,i]);return(0,u.BX)(v.G,{css:oM.container,children:[(0,u.tZ)(nn.E,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Filter changed files"}),(0,u.BX)(oX,{children:[(0,u.tZ)(oH,{files:s.length,totalFiles:r}),i.length>0?(0,u.tZ)(oF,{value:o,onChange:function(e){return a(e)}}):null]}),s.map(function(e){var t;return(0,u.tZ)(tr,{folded:null===(t=l[e.id])||void 0===t||t,setFolded:function(t){return c(e.id,t)},diff:e,splitOrUnified:o},e.id)})]})},oz=(0,g.X)({metaContainer:[w.l0.rowWithGap(4),w.l0.align.center,w.l0.flex.wrap]}),oj=function(e){var t=e.author,n=e.committer,r=i$(n,t),i=iQ(n.date,t.date);return(0,u.BX)(v.G,{css:oz.metaContainer,children:[r&&i?(0,u.BX)(u.HY,{children:[(0,u.tZ)(nv,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,u.tZ)(m.xv,{variant:"small",children:"authored"}),(0,u.tZ)(nr.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,u.tZ)(m.xv,{variant:"small",children:"and"})]}):null,r&&!i?(0,u.BX)(u.HY,{children:[(0,u.tZ)(nv,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,u.tZ)(m.xv,{variant:"small",children:"authored"}),(0,u.tZ)(m.xv,{variant:"small",children:"and"})]}):null,(0,u.tZ)(nv,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),!r&&i?(0,u.BX)(u.HY,{children:[(0,u.tZ)(m.xv,{variant:"small",children:"authored "}),(0,u.tZ)(nr.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,u.tZ)(m.xv,{variant:"small",children:"and "})]}):null,(0,u.tZ)(m.xv,{variant:"small",children:"committed"}),(0,u.tZ)(nr.EK,{date:n.date,textColor:"dimmest",textVariant:"small"})]})},oq=(0,g.X)({dullText:[w.l0.color.foregroundDimmest],tooltipContainer:[w.l0.display.inlineBlock]}),oJ=function(e){var t=e.onViewCommitClick,n=e.hash;return(0,u.tZ)("span",{css:oq.tooltipContainer,children:(0,u.tZ)(ti.u,{tooltip:"View commit",children:(0,u.tZ)("button",{css:[w.l0.reset.button,w.l0.linkStyle,w.l0.fontWeight.medium],onClick:function(){return t(n)},children:n.slice(0,7)})})})},oY=function(e){var t=e.parents,n=e.grafted,r=e.onViewCommitClick;return(0,u.BX)(m.xv,{variant:"small",children:[(0,u.BX)("span",{css:oq.dullText,children:[n?"Grafted with ":null,t.length," ",(0,eh.Z)("parent",t.length)," "]}),0===t.length?null:t.map(function(e,n){return(0,u.BX)(_.Fragment,{children:[(0,u.tZ)(oJ,{hash:e,onViewCommitClick:r}),n===t.length-1?"":(0,u.tZ)("span",{css:oq.dullText,children:", "})]},e)})]})},oK=function(e){var t=e.source,n=e.target;return(0,u.tZ)("span",{children:n?(0,u.BX)(u.HY,{children:["Branch ",(0,u.tZ)(nb.Lr,{name:t})," into ",(0,u.tZ)(nb.Lr,{name:n})," "]}):(0,u.BX)(u.HY,{children:["Branch ",(0,u.tZ)(nb.Lr,{name:t})]})})},o$="gitCommitSubject",oQ=(0,ef.iv)([w.l0.display.inline,{fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit"}]),o0=(0,g.X)({header:[(g6={},(0,eB._)(g6,"& .".concat(o$),oQ),(0,eB._)(g6,"& .".concat(o$," > div"),oQ),(0,eB._)(g6,"& .".concat(o$," p"),oQ),g6)],markerContainer:[w.l0.display.inlineFlex,w.l0.mr(4)]}),o1=function(e){var t=e.merge,n=e.revert,r=e.subject,i=e.remotes,o=e.onViewCommitClick,a=(0,_.useMemo)(function(){var e,r=null;if((null==t?void 0:t.type)==="pull-request"?r=t.id:n&&(null==n?void 0:n.pr)&&(r=n.pr),r&&i){var o=i.get("origin");if(!o){var a=Array.from(i.values());if(1!==a.length)return;o=a[0]}return null!==(e=n7(o))&&void 0!==e?e:void 0}},[t,i,n]);return(0,u.BX)(m.h4,{level:2,variant:"subheadDefault",multiline:!0,css:o0.header,children:[t?(0,u.BX)(u.HY,{children:[(0,u.tZ)("span",{css:o0.markerContainer,children:(0,u.tZ)(iD,{type:"merge"})}),(0,u.tZ)(nb.ST,{text:"merged"})," "]}):null,(null==t?void 0:t.type)==="pull-request"?(0,u.BX)(u.HY,{children:["PR ",(0,u.tZ)(nb.$8,{id:t.id,hash:!0})," ",(null==n?void 0:n.pr)?(0,u.BX)(u.HY,{children:[(0,u.tZ)(nb.po,{text:"reverts"})," ",(0,u.tZ)(nb.$8,{id:n.pr,hash:!0})]}):null," - "]}):null,(null==t?void 0:t.type)==="branch"?(0,u.BX)(u.HY,{children:[(0,u.tZ)(oK,{source:t.source,target:t.target})," -"," "]}):null,n&&!t?(0,u.BX)(u.HY,{children:[(0,u.tZ)("span",{css:o0.markerContainer,children:(0,u.tZ)(iD,{type:"revert"})}),(0,u.tZ)(nb.po,{text:"reverted"})," ",(0,u.tZ)("button",{css:[w.l0.reset.button,w.l0.linkStyle,w.l0.fontWeight.medium],onClick:function(){(null==n?void 0:n.hash)!==void 0&&o(n.hash)},children:n.hash.slice(0,7)})," - "]}):null,(0,u.tZ)(nb.Zr,{className:o$,subject:r,remoteName:a})]})},o2=n(69170),o3=function(e){var t,n=t6(),r=(0,ts.Z)((t=(0,tl._)(function(t){var n,r,i,o,a,l;return(0,tc.Jh)(this,function(c){switch(c.label){case 0:return i=e.hash,[4,t.getFilesForCommit(i)];case 1:if(null==(o=c.sent())?void 0:o.error)return td({context:"use-commit-diffs",gitService:t,result:o,data:{commit:e}}),[2,{error:o.error,diffs:[]}];return a=(null==o?void 0:null===(n=o.files)||void 0===n?void 0:n.filter(function(e){return["ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],l=(null==o?void 0:null===(r=o.files)||void 0===r?void 0:r.filter(function(e){return["DELETED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],[2,{error:null,diffs:Array.from(new Set((0,s._)(a).concat((0,s._)(l)))).map(function(e){var t,n;return{id:(0,tD.v4)(),status:e.type,loading:!1,initial:{filename:(0,S.UO)(null!==(t=e.originalPath)&&void 0!==t?t:e.path),path:(0,S.Il)(null!==(n=e.originalPath)&&void 0!==n?n:e.path),content:""},final:{filename:(0,S.UO)(e.path),path:(0,S.Il)(e.path),content:""}}})}]}})}),function(e){return t.apply(this,arguments)}),[e]);return(0,_.useMemo)(function(){return r?r.error?(n(r.error),null):r:null},[n,r])},o4=(gH=(0,tl._)(function(e,t,n,r){var i,o,a;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:return i=""===t?n:"".concat(t,"/").concat(n),[4,e.getFileContents({path:i,revision:r})];case 1:if((o=l.sent()).error)throw o.error;return[2,null!==(a=null==o?void 0:o.content)&&void 0!==a?a:""]}})}),function(e,t,n,r){return gH.apply(this,arguments)}),o8=(gV=(0,tl._)(function(e,t,n){var r,i,o,a;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:return i=t.hash,[4,o4(e,n.final.path,n.final.filename,i)];case 1:if(o=l.sent(),a="",!(!t.grafted&&(null===(r=t.parents)||void 0===r?void 0:r.length)))return[3,3];return[4,o4(e,n.initial.path,n.initial.filename,"".concat(i,"^"))];case 2:a=l.sent(),l.label=3;case 3:return[2,(0,L._)((0,N._)({},n),{loading:!1,initial:(0,L._)((0,N._)({},n.initial),{content:a}),final:(0,L._)((0,N._)({},n.final),{content:o})})]}})}),function(e,t,n){return gV.apply(this,arguments)}),o6=(0,g.X)({content:[w.l0.colWithGap(16),w.l0.p(16)],splitContainer:[w.l0.display.flex,w.l0.flex.row,w.l0.flex.shrink(1),w.l0.flex.wrap,w.l0.justify.spaceBetween,w.l0.maxWidth("100%"),w.l0.border({color:w.TV.outlineDimmest,direction:"bottom"}),w.l0.pb(16)]}),o5=function(e){var t,n,r=e.git,i=e.commit,o=e.info,a=e.onViewCommitClick,l=void 0===a?function(){}:a,d=e.remotes,f=e.status,h=(0,_.useMemo)(function(){return(0,r2.w)(f?f.changes.map(function(e){return e.path}):[])},[f]),p=(0,_.useMemo)(function(){if(!f)return[];var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=f.changes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.type.worktree!==e0.h.UNMODIFIED&&e.push(a)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},[f]),g=(0,o2.Z)().showConfirm,y=t6(),b=(0,c._)((0,_.useState)(!1),2),Z=b[0],x=b[1],C=(0,c._)((0,_.useState)(""),2),S=C[0],k=C[1],E=(0,c._)((0,_.useState)("Split"),2),T=E[0],R=E[1],I=(0,c._)((0,_.useState)("Markdown"),2),D=I[0],B=I[1],G=(0,c._)((0,_.useState)({}),2),A=G[0],P=G[1],O=(0,c._)((0,_.useState)([]),2),U=O[0],M=O[1],X=iJ(i,o),F=X.hideBody,W=X.merge,H=X.revert,V=i.hash,z=i.subject,j=i.body,q=i.committer,J=i.author,Y=i.grafted,K=null!==(n=i.parents)&&void 0!==n?n:[],$=o3(i),Q=(0,_.useCallback)((0,tl._)(function(){var e,t,n,o=arguments;return(0,tc.Jh)(this,function(a){switch(a.label){case 0:return e=!(o.length>0)||void 0===o[0]||o[0],[4,r.restoreFiles(e,i.hash)];case 1:if((t=a.sent()).error)return[3,3];return[4,r.status()];case 2:return(n=a.sent()).error?(y(n.error),td({context:"commit-view",gitService:r,result:n,data:{files:e,commit:i.hash}})):g("Restored commit!"),r.forceRefresh(),[3,4];case 3:y(t.error),td({context:"commit-view",gitService:r,result:t,data:{files:e,commit:i.hash}}),a.label=4;case 4:return[2]}})}),[i.hash,r,y,g]),ee=rV(h),et=ee.openRestoreConfirmationModal,en=ee.restoreConfirmationModal,er=(0,_.useCallback)((0,tl._)(function(){var e,t,n,r=arguments;return(0,tc.Jh)(this,function(i){switch(i.label){case 0:if(!0!==(e=!(r.length>0)||void 0===r[0]||r[0]))return[3,6];if(x(!0),0!==p.length)return[3,2];return[4,Q()];case 1:return i.sent(),x(!1),[2];case 2:return[4,et(p)];case 3:if(!i.sent())return[3,5];return[4,Q()];case 4:i.sent(),i.label=5;case 5:return x(!1),[3,10];case 6:if("string"==typeof e){if(!(n=p.find(function(t){return t.path===e})))throw x(!1),Error("Could not find file in worktree list");t=[n]}else t=p.filter(function(t){return e.includes(t.path)});return[4,et(t)];case 7:if(!i.sent())return[3,9];return[4,Q(e)];case 8:i.sent(),i.label=9;case 9:x(!1),i.label=10;case 10:return[2]}})}),[et,Q,p]);(0,_.useEffect)(function(){var e;M(null!==(e=null==$?void 0:$.diffs.map(function(e){return(0,L._)((0,N._)({},e),{loading:!0})}))&&void 0!==e?e:[])},[$]),(0,_.useEffect)(function(){null!==$&&$.error&&y($.error)},[$,y]);var ei=(t=(0,tl._)(function(e,t){var n,o,a;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:if(P(function(n){var r=(0,N._)({},n);return r[e]=t,r}),!(n=U.find(function(t){return t.id===e})))return y(nY.aq.INVALID_STATE),td({context:"commit-view",gitService:r,result:{error:nY.aq.INVALID_STATE},data:{diffId:e}}),[2];if(!(!t&&n.loading))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,o8(r,i,n)];case 2:return o=l.sent(),M(function(t){var n=(0,s._)(t),r=n.findIndex(function(t){return t.id===e});return n[r]=o,n}),[3,4];case 3:return td({context:"commit-view",gitService:r,result:a=l.sent(),data:{diffId:e}}),y(a),[2];case 4:return[2]}})}),function(e,n){return t.apply(this,arguments)});return(0,u.BX)(v.G,{css:o6.content,children:[(0,u.tZ)(o1,{remotes:d,merge:W,revert:H,subject:z,onViewCommitClick:l}),(0,u.BX)(oX,{children:[(0,u.BX)(v.G,{css:[w.l0.rowWithGap(8),w.l0.align.start,w.l0.flex.shrink(1)],children:[(0,u.tZ)(iY,{hash:V}),(0,u.tZ)(iK,{onClick:function(){return er()},text:"Restore All",loading:Z})]}),F?null:(0,u.tZ)(oW,{value:D,onChange:function(e){B(e)}})]}),F?null:(0,u.tZ)(nb.uJ,{body:j,view:D}),(0,u.BX)(v.G,{css:o6.splitContainer,children:[(0,u.tZ)(oj,{author:J,committer:q}),(0,u.tZ)(oY,{parents:K,grafted:Y,onViewCommitClick:l})]}),null!==W?(0,u.tZ)(m.xv,{variant:"small",color:"dimmest",children:"There is more than one parent, diffing against the first parent."}):null,null===$?(0,u.tZ)(os,{}):(0,u.tZ)(oV,{query:S,setQuery:k,totalDiffs:$.diffs.length,diffs:U,splitOrUnified:T,setSplitOrUnified:R,folded:A,setFolded:ei}),en]})};function o9(e){var t=e.hash,n=e.remotes,r=e.onViewCommitClick,i=e.switchMode,o=e.status,a=(0,Z.Z)().git,l=t6(),c=oN(null!=t?t:"");if(null===c)return(0,u.tZ)(os,{});if(c.error)return c.error===nY.aq.NOT_INITIALIZED?i({mode:g8.CURRENT_BRANCH}):(l(c.error),(c.error===nY.aq.UNKNOWN||c.error===nY.aq.UNKNOWN_NOT_GIT)&&td({context:"commit-view",gitService:a,result:c,data:{hash:t}})),null;if(null===c.commit)return l(nY.aq.UNKNOWN),null;var s=c.commit,d=iE(s)||ix(s);return(0,u.tZ)(o5,{git:a,commit:s,info:d,onViewCommitClick:r,remotes:n,status:o})}var o7=n(5192),ae=(0,g.X)({container:[w.l0.colWithGap(4)],file:[w.l0.rowWithGap(8),w.l0.align.center],fileLeft:[w.l0.rowWithGap(8),w.l0.flex.grow(1),w.l0.align.center],filePrefix:[w.l0.color.foregroundDimmest]});function at(e){var t=e.files,n=e.uniquePathMap,r=e.onFileClick,i=[];if(t instanceof Map){var o=!0,a=!1,l=void 0;try{for(var s,d=t[Symbol.iterator]();!(o=(s=d.next()).done);o=!0){var f=(0,c._)(s.value,2),h=f[0],g=f[1],y=n.get(h);i.push({path:h,prefix:y,resolved:g})}}catch(e){a=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw l}}}else{var b=!0,Z=!1,x=void 0;try{for(var C,_=t[Symbol.iterator]();!(b=(C=_.next()).done);b=!0){var S=C.value,k=n.get(S);i.push({path:S,prefix:k,resolved:!0})}}catch(e){Z=!0,x=e}finally{try{b||null==_.return||_.return()}finally{if(Z)throw x}}}return(0,u.tZ)(v.G,{css:ae.container,children:i.map(function(e){var t=e.path,n=e.prefix,i=e.resolved;return(0,u.BX)(v.G,{css:ae.file,children:[(0,u.BX)(v.G,{css:ae.fileLeft,children:[(0,u.tZ)(p.Z,{path:t}),(0,u.tZ)(m.xv,{multiline:!1,children:(0,u.tZ)(nb.yx,{path:t,prefix:n,onClick:function(){return r(t)}})})]}),i?(0,u.tZ)(nQ.Z,{color:w.TV.greenStronger}):(0,u.tZ)(nq.Z,{color:w.TV.orangeStronger})]},t)})})}function an(e){var t=e.hasConflicts?(0,u.BX)(u.HY,{children:[(0,u.tZ)("span",{css:w.l0.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,u.tZ)("br",{}),(0,u.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,u.BX)(u.HY,{children:[(0,u.tZ)("span",{css:w.l0.fontWeight.medium,children:"You are in the middle of a merge."}),(0,u.tZ)("br",{}),(0,u.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,u.tZ)(ru.E,{colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),text:t})}var ar=(0,g.X)({container:[w.l0.rowWithGap(4),w.l0.align.center,w.l0.justify.spaceBetween],left:[{flexBasis:0,flexGrow:1},w.l0.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[w.l0.p(8),w.l0.rowWithGap(4),w.l0.flex.grow(1),w.l0.center,w.l0.borderRadius(8)]});function ai(e){var t,n=e.branch,r=e.refs,i=e.refsAreBranches,o=e.isUpstreamPull;if(!r.length)return null;if(o){var a=(0,c._)((0,n4.Tg)(r[0]),2),l=a[0],s=a[1];l&&s&&(t=(0,u.tZ)(F.Tg,{css:ar.branch,elevated:!0,children:(0,u.tZ)(nb.Lr,{remote:l,name:s,icon:!0,heading:!0})}))}return t||(t=r.map(function(e){return(0,u.tZ)(F.Tg,{css:ar.branch,elevated:!0,children:(0,u.tZ)(nb.Lr,{name:e,icon:!!i||(0,u.tZ)(to.Z,{size:16}),heading:!0})},e)})),(0,u.BX)(v.G,{css:ar.container,children:[(0,u.tZ)(v.G,{css:ar.left,children:t}),(0,u.tZ)(W.Z,{size:24,color:w.TV.foregroundDimmest}),(0,u.tZ)(v.G,{css:ar.right,children:(0,u.tZ)(F.Tg,{css:ar.branch,elevated:!0,children:(0,u.tZ)(nb.Lr,{name:n,icon:!0,current:!0,heading:!0})})})]})}var ao=(0,g.X)({container:[w.l0.colWithGap(12),w.l0.pt(16),w.l0.pb(8),w.l0.px(8)],fakePaneHeader:[w.l0.p(8),w.l0.rowWithGap(8),w.l0.backgroundColor.backgroundDefault,w.l0.align.center,{borderBottom:"1px solid ".concat(w.TV.outlineDimmer)}],conflictResolution:[w.l0.colWithGap(16)],listContainer:[w.l0.p(8),w.l0.colWithGap(8),w.l0.borderRadius(8)],list:[w.l0.pb(8),w.l0.colWithGap(8)],listDisabled:[{opacity:.5},w.l0.pb(8),w.l0.colWithGap(8)],listHeader:[w.l0.pb(4),w.l0.flex.grow(1),w.l0.border({color:w.TV.outlineDimmer,direction:"bottom"})],listFiles:[w.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},w.l0.rowWithGap(8)],buttons:[w.l0.colWithGap(8)]});function aa(e){var t,n=e.onFileClick,r=e.gotoPendingState,i=(0,c._)((0,_.useState)(!0),2),o=i[0],a=i[1],l=(0,c._)((0,_.useState)(!1),2),d=l[0],f=l[1],h=(0,c._)((0,_.useState)(!1),2),p=h[0],g=h[1],y=d||p,x=t6(),C=(0,Z.Z)().git,S=(0,_.useId)(),k=(0,ts.Z)((t=(0,tl._)(function(e){var t,n,r,i,o,a,l,s,u,d,f,h,p,m,v,g,y,b,w,Z;return(0,tc.Jh)(this,function(x){switch(x.label){case 0:return[4,e.status()];case 1:if((t=x.sent()).error)return td({context:"use-merging-view-state-status",gitService:e,result:t}),[2,t];if(!(n=t.branch))return[2,{error:nY.aq.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=x.sent()).error)return[2,r];return i=r.files,[4,e.getMergingRefs()];case 3:if((o=x.sent()).error)return td({context:"use-merging-view-state-merging-refs",gitService:e,result:o,data:{status:t,conflictingFiles:i}}),[2,o];a=o.commits,u=(s=(l=o.branches).length>0)?l:a,d=t.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),f=!0,h=!0,p=!1,m=void 0;try{for(v=i[Symbol.iterator]();!(h=(g=v.next()).done);h=!0)if(!(0,c._)(g.value,2)[1]){f=!1;break}}catch(e){p=!0,m=e}finally{try{h||null==v.return||v.return()}finally{if(p)throw m}}return y=(0,r2.w)(t.changes.map(function(e){return e.path})),b=i.size>0,w=d.length>0,Z=null!==t.upstream&&1===l.length&&l[0]===t.upstream.branch,[2,{refs:u,branch:n,conflictingFiles:i,otherChangedFiles:d,refsAreBranches:s,allIsResolved:f,uniquePathMap:y,hasConflicts:b,hasOtherChanges:w,isUpstreamPull:Z,error:null}]}})}),function(e){return t.apply(this,arguments)}));if((0,_.useEffect)(function(){(null==k?void 0:k.error)&&x(k.error)},[null==k?void 0:k.error,x]),!k)return(0,u.tZ)(os,{});if(k.error)return null;var E=k.refs,T=k.branch,R=k.conflictingFiles,I=k.otherChangedFiles,D=k.refsAreBranches,B=k.allIsResolved,G=k.uniquePathMap,A=k.hasConflicts,P=k.hasOtherChanges,N=k.isUpstreamPull;function L(){return(L=(0,tl._)(function(){var e,t,n,i,a,l,c,u,d,h,p;return(0,tc.Jh)(this,function(m){switch(m.label){case 0:if(!B||y)return[2];f(!0),e=[],t=!0,n=!1,i=void 0;try{for(a=R.keys()[Symbol.iterator]();!(t=(l=a.next()).done);t=!0)c=l.value,e.push(c)}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return o&&(u=e).push.apply(u,(0,s._)(I)),[4,C.stageFiles({all:!1})];case 1:if((d=m.sent()).error)return x(d.error),f(!1),[2];return[4,C.stageFiles({add:e})];case 2:if((h=m.sent()).error)return x(h.error),f(!1),[2];return[4,C.mergeContinue()];case 3:if(!(p=m.sent()).error)return[3,5];return[4,C.stageFiles({all:!1})];case 4:return m.sent(),x(p.error),f(!1),[3,6];case 5:r(),C.forceRefresh(),m.label=6;case 6:return[2]}})})).apply(this,arguments)}function O(){return(O=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(t){switch(t.label){case 0:if(y)return[2];return g(!0),[4,C.mergeAbort()];case 1:return(e=t.sent()).error?(x(e.error),g(!1),td({context:"merging-view-abort",gitService:C,result:e,data:{branch:T}})):(r(),C.forceRefresh()),[2]}})})).apply(this,arguments)}var U=N?"Complete in-progress pull":"Complete in-progress merge";return A&&(U=N?"Resolve pull conflicts":"Resolve merge conflicts"),(0,u.BX)(v.G,{children:[(0,u.BX)(v.G,{css:ao.fakePaneHeader,children:[(0,u.tZ)(o7.Z,{}),(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:U})]}),(0,u.BX)(v.G,{css:ao.container,children:[(0,u.tZ)(ai,{branch:T,refs:E,refsAreBranches:D,isUpstreamPull:N}),(0,u.tZ)(an,{hasConflicts:A}),(0,u.BX)(F.Tg,{css:ao.listContainer,elevated:!0,children:[(0,u.BX)(v.G,{css:ao.list,children:[(0,u.tZ)(v.G,{css:ao.listHeader,children:(0,u.tZ)(m.xv,{css:w.l0.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,u.tZ)(v.G,{css:ao.listFiles,children:A?(0,u.tZ)(at,{files:R,uniquePathMap:G,onFileClick:n}):(0,u.tZ)(m.xv,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),P?(0,u.BX)(v.G,{css:o?ao.list:ao.listDisabled,children:[(0,u.tZ)(v.G,{css:ao.listHeader,children:(0,u.tZ)(m.xv,{css:w.l0.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,u.tZ)(v.G,{css:ao.listFiles,children:(0,u.tZ)(at,{files:I,uniquePathMap:G,onFileClick:n})})]}):null]}),(0,u.BX)(v.G,{css:ao.includeOtherFiles,tag:"label",children:[(0,u.tZ)(o_.X,{id:S,checked:o,onChange:function(e){return a(e)}}),(0,u.tZ)(m.xv,{multiline:!1,children:"Include other changed files in commit"})]}),(0,u.BX)(v.G,{css:ao.buttons,children:[(0,u.tZ)(X.zx,{text:N?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:d?(0,u.tZ)(b.Z,{}):(0,u.tZ)(o7.Z,{}),disabled:!B||y,loading:d,onClick:function(){return L.apply(this,arguments)}}),(0,u.tZ)(X.zx,{text:N?"Abort pull":"Abort merge",colorway:"negative",iconLeft:p?(0,u.tZ)(b.Z,{}):(0,u.tZ)(rL.Z,{}),disabled:y,loading:p,onClick:function(){return O.apply(this,arguments)}})]})]})]})}var al=n(96372),ac=n(38753),as=n(54579),au=n(85421),ad=(0,g.X)({gitProfileTitle:[w.l0.rowWithGap(8),w.l0.align.center]});function af(e){var t=e.username,n=e.avatar;return(0,u.BX)(v.G,{css:ad.gitProfileTitle,children:[(0,u.tZ)(nl.q,{src:null!=n?n:"/images/evalbot/evalbot_24",username:t}),(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:t})]})}var ah=(0,g.X)({list:{"> div:first-child":w.l0.borderRadius(8,8,0,0),"> div:last-child":[w.l0.borderRadius(0,0,8,8),{border:"none"}]},profile:[ne.gU.filled,w.l0.flex.row,w.l0.justify.spaceBetween,w.l0.p(12),w.l0.borderRadius(0),w.l0.border({color:w.TV.outlineDefault,direction:"bottom"})],information:[w.l0.colWithGap(4),w.l0.flex.shrink(1)],informationRow:[w.l0.rowWithGap(8),w.l0.align.center],email:[w.l0.flex.shrink(1)],connectToGithubContainer:[w.l0.colWithGap(4),w.l0.p(12),w.l0.backgroundColor.backgroundHigher],divider:[w.l0.backgroundColor.outlineDefault],connectToGitHubTitle:[w.l0.rowWithGap(4),w.l0.align.center],notConnectedText:[w.l0.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function ap(e){var t=e.profiles,n=e.current,r=e.showConnectToGithub,i=e.onSelectProvider,o=(0,au.useRouter)(),a=(0,ac.Gv)(o),l=(0,_.useId)();return(0,u.BX)(as.E,{name:l,css:ah.list,value:null!=n?n:"",children:[t.map(function(e){t=e.provider===nY.rG.GITHUB?"GitHub":"Default Profile";var t,r=void 0;return e.provider===nY.rG.GITHUB&&(r=a?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,u.tZ)(am,{profile:e,providerName:t,current:e.provider===n,onSelectProvider:i,settingsURL:r},e.provider)}),r?(0,u.BX)(v.G,{css:ah.connectToGithubContainer,children:[(0,u.tZ)(v.G,{css:ah.connectToGitHubTitle,children:(0,u.tZ)(af,{username:"GitHub Account"})}),(0,u.tZ)(m.xv,{color:"dimmest",css:ah.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),(0,u.tZ)(n3,{})]}):null]})}function am(e){var t=e.profile,n=e.current,r=e.providerName,i=e.settingsURL,o=e.onSelectProvider,a=t.provider,l=t.name,c=t.username,s=t.email,d=t.avatar,f=(0,_.useId)();return(0,u.BX)(v.G,{onClick:function(){return o(a)},css:ah.profile,children:[(0,u.BX)(v.G,{css:ah.information,children:[(0,u.BX)(v.G,{css:ah.informationRow,children:[(0,u.tZ)(af,{username:c,avatar:d}),i?(0,u.tZ)(rm.Z,{css:ah.settingsButton,text:"".concat(r," Settings"),iconRight:(0,u.tZ)(rv.Z,{}),href:i,target:"_blank",variant:"outlined",size:"small"}):(0,u.tZ)(m.xv,{color:"dimmest",variant:"small",multiline:!1,children:r})]}),(0,u.BX)(m.xv,{color:"dimmest",css:ah.email,multiline:!1,children:[l," <",s,">"]})]}),(0,u.tZ)(as.Y,{css:ah.radio,id:f,checked:n,value:a})]})}var av=(0,g.X)({profileContainer:[w.l0.flex.column]});function ag(){var e,t=(0,Z.Z)().git,n=(0,ts.Z)((e=(0,tl._)(function(e){var t,n;return(0,tc.Jh)(this,function(r){return t=e.getCurrentProfile(),[2,{profiles:e.getProfiles(),current:null!==(n=null==t?void 0:t.provider)&&void 0!==n?n:null,hasGitHub:!e.hasProfile(nY.rG.GITHUB),error:null}]})}),function(t){return e.apply(this,arguments)}));if(!n)return null;if(null!==n.error)return td({context:"git-profiles",gitService:t,result:{error:n.error}}),null;var r=n.profiles,i=n.current,o=n.hasGitHub;return(0,u.tZ)(v.G,{css:av.profileContainer,children:(0,u.tZ)(ap,{profiles:r,current:i,showConnectToGithub:o,onSelectProvider:function(e){t.setCurrentProfile(e),e===nY.rG.REPLIT_DEFAULT?(0,ny.J)("profile-changed",{profile:"replit"}):e===nY.rG.GITHUB&&(0,ny.J)("profile-changed",{profile:"github"})}})})}var ay=n(17519),ab=n(56731),aw=n(85438),aZ=n(99165);function ax(){var e=(0,ew._)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return ax=function(){return e},e}function aC(){var e=(0,ew._)(["\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n      }\n    }\n  }\n"]);return aC=function(){return e},e}function a_(){var e=(0,ew._)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return a_=function(){return e},e}var aS={},ak=(0,eZ.Ps)(ax());aC();var aE=(0,eZ.Ps)(a_()),aT=(0,g.X)({errorText:[w.l0.color.accentNegativeStronger,w.l0.pl(4)]});function aR(e){var t,n,r,i,o=e.remoteName,a=e.updateRemote,l=(0,o2.Z)().showConfirm,s=(0,Z.Z)().git,d=(0,t_.Z)(),f=n1(),h=(0,ab.U)(),p=(0,eb.Z)(),g=(0,_.useRef)(null),y=(0,_.useRef)(null),b=(0,c._)((0,_.useState)(),2),x=b[0],C=b[1],S=(t=(0,N._)({},aS,{variables:{replId:p}}),ex.a(ak,t)).data,k=(null==S?void 0:S.repl.__typename)==="Repl"?S.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},E=k.slug,T=k.description,R=k.isPrivate,I=k.url,D=(0,c._)((n=(0,N._)({},aS,void 0),aZ.D(aE,n)),2),B=D[0],G=D[1].loading,A=(0,n$.v)({onAuth:function(){(0,ny.J)("github-user-connected")}}),P=(0,c._)((0,_.useState)(null==R||R),2),L=P[0],O=P[1],M=(0,c._)((0,_.useState)(E),2),F=M[0],W=M[1],H=(0,c._)((0,_.useState)(),2),V=H[0],z=H[1],j=(0,c._)((0,_.useState)(null!=T?T:I&&"Repository for https://replit.com".concat(I)),2),q=j[0],J=j[1],Y=(0,c._)((0,_.useState)(),2),K=Y[0],$=Y[1],Q=function(){z(void 0),$(void 0),C(void 0)},ee=(r=(0,tl._)(function(e){var t,n,r;return(0,tc.Jh)(this,function(i){switch(i.label){case 0:return[4,s.getRemotes()];case 1:if((t=i.sent()).error)return C("Error finding current remotes, ".concat(t.error)),[2];if(!t.remotes.has(o))return[3,3];return[4,s.setRemoteURL({remote:o,url:e})];case 2:if((n=i.sent()).error)return C("Error (".concat(n.error,") setting ").concat(o," to use ").concat(e," as a remote.")),[2];return a(e),(0,ny.J)("remote-edited"),[2];case 3:return[4,s.addRemote({name:o,url:e})];case 4:if((r=i.sent()).error)return C("Error (".concat(r.error,") adding ").concat(o," ").concat(e," as a remote.")),[2];return a(e),(0,ny.J)("remote-added"),[2]}})}),function(e){return r.apply(this,arguments)}),et=(i=(0,tl._)(function(){var e,t,n,r;return(0,tc.Jh)(this,function(i){switch(i.label){case 0:if(Q(),!F)return[2];if(!(0,no.GE)(F))return z("Invalid remote name."),[2];return[4,B({variables:{input:{name:F,description:null!=T?T:null,homepage:"replit.com".concat(I),isPrivate:L,ownerType:aw.xJ.User}}})];case 1:if((null===(e=(r=i.sent()).data)||void 0===e?void 0:e.createGithubRepo.__typename)==="UnauthorizedError"||(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)==="UserError")return C(r.data.createGithubRepo.message),[2];return(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)==="CreateGithubRepoResult"&&(ee(r.data.createGithubRepo.remoteUrl),(0,ny.J)("github-repository-published"),l("Created repository on Github")),[2]}})}),function(){return i.apply(this,arguments)});return f?(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,u.tZ)(U.II,{ref:g,placeholder:"Enter repository name",value:F,onChange:function(e){z(void 0),W(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){var t;e.preventDefault(),null===(t=y.current)||void 0===t||t.focus()}}}),(0,u.tZ)(m.xv,{css:aT.errorText,multiline:!1,children:V}),(0,u.tZ)(al.Z,{height:1}),(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,u.tZ)(U.B,{ref:y,maxLength:350,name:"Repository description",placeholder:"Enter repository description",value:null!=q?q:void 0,onChange:function(e){$(void 0),J(e.target.value)}}),(0,u.tZ)(m.xv,{css:aT.errorText,multiline:!1,children:K}),(0,u.tZ)(al.Z,{height:1}),(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,u.BX)(eY.hE,{tag:"fieldset",id:h("privacy"),name:h("privacy"),value:L,onChange:function(e){return O(e)},row:!0,css:[w.l0.width("100%")],children:[(0,u.tZ)(eY.rK,{id:h("false"),value:!1,text:"Public",icon:(0,u.tZ)(ay.Z,{})}),(0,u.tZ)(eY.rK,{id:h("true"),value:!0,text:"Private",icon:(0,u.tZ)(tV.Z,{})})]}),(0,u.tZ)(al.Z,{height:2}),(0,u.tZ)(X.zx,{text:G?"Creating Repository on GitHub…":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,u.tZ)(n0.Z,{}),onClick:et,loading:G}),x?(0,u.tZ)(m.xv,{css:aT.errorText,maxLines:2,multiline:!1,children:x}):null]}):d?(0,u.tZ)(v.G,{children:(0,u.tZ)(X.zx,{colorway:"primary",iconLeft:(0,u.tZ)(n0.Z,{}),text:"Open Account page to connect to GitHub",onClick:function(){nK.X.openExternalUrl("/account#connected-services")}})}):(0,u.tZ)(v.G,{children:(0,u.tZ)(X.zx,{colorway:"primary",iconLeft:(0,u.tZ)(n0.Z,{}),text:"Connect to GitHub",onClick:A})})}var aI=(0,ef.iv)(w.l0.border({width:1,color:w.TV.outlineDimmer}),w.l0.borderRadius(8)),aD=(0,ef.iv)(ne.gU.filled,w.l0.flex.row,w.l0.justify.spaceBetween,w.l0.align.center,w.l0.px(8),w.l0.py(4),w.l0.borderRadius(8,8,0,0)),aB=(0,ef.iv)(w.l0.borderRadius(8,8,0,0)),aG=(0,ef.iv)(w.l0.borderRadius(8)),aA=(0,ef.iv)(w.l0.p(8)),aP=(0,ef.iv)(w.l0.flex.growAndShrink(1));function aN(e){var t=e.title,n=e.expanded,r=e.content,i=e.onClick;return(0,u.BX)(v.G,{css:aI,children:[(0,u.BX)(v.G,{css:[aD,n?aB:aG],onClick:i,children:[(0,u.tZ)(v.G,{css:aP,children:(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:t})}),n?(0,u.tZ)(eQ.Z,{size:20}):(0,u.tZ)(e$.Z,{size:20})]}),n?(0,u.tZ)(v.G,{css:aA,children:r}):null]})}var aL=(0,ef.iv)(w.l0.rowWithGap(4)),aO=(0,ef.iv)(w.l0.flex.growAndShrink(1)),aU=(0,ef.iv)(w.l0.color.accentNegativeStronger,w.l0.pl(4));function aM(e){var t,n=e.initialRemoteUrl,r=e.remoteName,i=e.updateRemote,o=(0,Z.Z)().git,a=(0,c._)((0,_.useState)(),2),l=a[0],s=a[1];(0,_.useEffect)(function(){s(void 0)},[n]);var d=(0,c._)((0,_.useState)(),2),f=d[0],h=d[1],p=(0,c._)((0,_.useState)(!1),2),g=p[0],y=p[1],b=(t=(0,tl._)(function(){var e,t,n;return(0,tc.Jh)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,6,7]),!l)return[2];if(y(!0),!(0,no.LY)(l))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=a.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));if(!e.remotes.has(r))return[3,3];return[4,o.setRemoteURL({remote:r,url:l})];case 2:if((t=a.sent()).error)throw td({context:"remote-input",gitService:o,result:t,data:{remote:r,url:l}}),Error("Error (".concat(t.error,") setting ").concat(r," to use ").concat(l," as a remote."));return(0,ny.J)("remote-edited"),i(l),[2];case 3:return[4,o.addRemote({name:r,url:l})];case 4:if((n=a.sent()).error)throw td({context:"remote-input",gitService:o,result:n,data:{remote:r,url:l}}),Error("Error (".concat(n.error,") adding ").concat(r," ").concat(l," as a remote."));return(0,ny.J)("remote-added"),[3,7];case 5:return h(a.sent().message),[3,7];case 6:return y(!1),[7];case 7:return[2]}})}),function(){return t.apply(this,arguments)});return(0,u.BX)(v.G,{children:[(0,u.tZ)(U.II,{name:"Remote URL",placeholder:"Enter Remote URL",value:null!=l?l:n,autoComplete:"off",autoCorrect:"off",onChange:function(e){h(void 0),s(e.target.value)},inputMode:"url","aria-label":"Remote URL",onKeyDown:function(e){"Enter"===e.key&&b()}}),f?(0,u.tZ)(m.xv,{variant:"small",css:aU,multiline:!1,children:f}):null,l&&l!==n?(0,u.BX)(u.HY,{children:[(0,u.tZ)(al.Z,{height:1}),(0,u.BX)(v.G,{css:aL,children:[(0,u.tZ)(X.zx,{css:aO,text:"Cancel",iconLeft:(0,u.tZ)(nJ.Z,{}),onClick:function(){return s(void 0)}}),(0,u.tZ)(X.zx,{css:aO,text:g?"Saving…":"Save",loading:g,colorway:"primary",iconLeft:(0,u.tZ)(nQ.Z,{}),onClick:b})]})]}):null]})}var aX="origin";function aF(){var e,t=(0,ts.Z)((e=(0,tl._)(function(e){var t,n,r,i;return(0,tc.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRemotes()];case 1:if((t=o.sent()).error)return td({context:"remote-config",gitService:e,result:t}),[2,{url:void 0,name:aX,error:t.error}];if(!(r=(0,c._)(null!==(n=t.remotes.values())&&void 0!==n?n:void 0,1)[0]))return[2,{url:void 0,name:aX,error:null}];return[2,{url:r.push||r.fetch,name:null!==(i=r.name)&&void 0!==i?i:aX,error:null}]}})}),function(t){return e.apply(this,arguments)}));return null==t?(0,u.BX)(v.G,{css:w.l0.center,children:[(0,u.tZ)(m.xv,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,u.tZ)(os,{})]}):(null==t?void 0:t.error)?null:(0,u.tZ)(aW,{initialRemoteUrl:null==t?void 0:t.url,remoteName:null==t?void 0:t.name})}function aW(e){var t=e.initialRemoteUrl,n=e.remoteName,r=(0,c._)((0,_.useState)(t),2),i=r[0],o=r[1],a=(0,c._)((0,_.useState)(""===t||void 0===t?0:void 0),2),l=a[0],s=a[1],d=function(e){o(e)};return(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,u.tZ)(al.Z,{height:1}),(0,u.tZ)(aM,{remoteName:n,initialRemoteUrl:i,updateRemote:d}),(0,u.tZ)(al.Z,{height:2}),(0,u.tZ)(aN,{title:"GitHub",expanded:0===l,onClick:function(){return s(function(e){return 0===e?void 0:0})},content:(0,u.tZ)(aR,{remoteName:n,updateRemote:d})})]})}(gz=g5||(g5={}))[gz.GitHub=0]="GitHub";var aH=(0,ef.iv)(w.l0.px(16));function aV(){return(0,u.BX)(v.G,{css:aH,children:[(0,u.tZ)(al.Z,{height:2}),(0,u.tZ)(aF,{}),(0,u.tZ)(al.Z,{height:2}),(0,u.tZ)(az,{})]})}function az(){return(0,u.BX)(v.G,{children:[(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,u.tZ)(al.Z,{height:1}),(0,u.tZ)(ag,{})]})}var aj=(0,g.X)({gitPane:[w.l0.position.relative,w.l0.display.flex,w.l0.minHeight("100%")],gitPaneContent:[w.l0.flex.growAndShrink(1),w.l0.overflow("auto")]});function aq(e){var t,n,r,i=e.isActive,o=e.performPaneOperation,a=(0,tK.P5)({controlName:"flag-git-commit-view",logFlagToAnalytics:!1}),l=(0,_.useRef)(),s=(0,c._)((0,_.useState)(g8.CURRENT_BRANCH),2),d=s[0],f=s[1],h=(0,c._)((0,_.useState)(null),2),p=h[0],m=h[1],v=(0,c._)((0,_.useState)(null),2),g=v[0],y=v[1],b=(0,c._)((0,_.useState)(!1),2),w=b[0],x=b[1];t=void 0!==i&&i,n=(0,Z.Z)().git,(0,_.useEffect)(function(){t&&n.forceRefresh()},[t,n]);var C=(0,ts.Z)((r=(0,tl._)(function(e){var t,n,r,i,o,a,l,c,s,u;return(0,tc.Jh)(this,function(d){switch(d.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=d.sent()).error)return[2,t];if(n=t.state,r=t.type,i=null,o=null,a=null,!(r!==t$.y5.INITIALIZING))return[3,6];return[4,e.status()];case 2:if((l=d.sent()).error)return td({context:"git-pane-status",gitService:e,result:l,data:{state:n,type:r}}),[2,l];return i=l,[4,e.getRemotes()];case 3:if((c=d.sent()).error)return td({context:"git-pane-remotes",gitService:e,result:c,data:{state:n,type:r}}),[2,c];if(o=c.remotes,!i.branch)return[3,5];return[4,e.getBranch(i.branch)];case 4:if((s=d.sent()).error)return td({context:"git-pane-branch",gitService:e,result:s,data:{state:n,type:r}}),[2,s];a=s.branch,d.label=5;case 5:return[3,8];case 6:return[4,e.status()];case 7:if((u=d.sent()).error)return td({context:"git-pane-status-initializing",gitService:e,result:u,data:{state:n,type:r}}),[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}];i=u,d.label=8;case 8:return[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}]}})}),function(e){return r.apply(this,arguments)})),S=!C||C.error?null:C.currentBranch,k=(0,_.useCallback)(function(e){switch(f(e),e){case g8.DASHBOARD:(0,ny.J)("pane-mode-changed",{mode:"dashboard"});break;case g8.BRANCH:(0,ny.J)("pane-mode-changed",{mode:"branch"});break;case g8.CURRENT_BRANCH:(0,ny.J)("pane-mode-changed",{mode:"current-branch"});break;case g8.SETTINGS:(0,ny.J)("pane-mode-changed",{mode:"settings"})}},[]),E=(0,_.useCallback)(function(){l.current?(k(l.current),l.current=void 0):k(g8.CURRENT_BRANCH)},[k]),T=(0,_.useCallback)(function(e){var t=function(e){l.current=d,k(e)};switch(e.mode){case g8.DASHBOARD:t(g8.DASHBOARD);break;case g8.BRANCH:if((0,tQ.p3)(e.branch,S)){t(g8.CURRENT_BRANCH);break}y(e.branch),t(g8.BRANCH);break;case g8.CURRENT_BRANCH:t(g8.CURRENT_BRANCH);break;case g8.SETTINGS:t(g8.SETTINGS);break;case g8.COMMIT:m(e.hash),t(g8.COMMIT)}},[k,d,S]),R=(0,_.useCallback)(function(e){var t=(0,B.Dp)({path:e});"codeEditor"===t?o({operation:"open",pane:{type:"diff",data:{left:{path:e,data:{type:"git",revision:"HEAD"}},right:{path:e,data:{type:"fs"}}}}}):o({operation:"open",pane:{type:t,data:{path:e}}})},[o]),I=(0,_.useCallback)(function(e){T({mode:g8.COMMIT,hash:e})},[T]),D=(0,_.useCallback)(function(){x(!0)},[]);if(d===g8.BRANCH&&(0,tQ.p3)(g,S)&&k(g8.CURRENT_BRANCH),(0,_.useEffect)(function(){return x(!1)},[C]),w||!C||C.error)return(0,u.tZ)(aJ,{children:(null==C?void 0:C.error)?(0,u.tZ)(oP,{error:C.error}):(0,u.tZ)(os,{})});switch(C.type){case t$.y5.INITIALIZING:case t$.y5.INTERMEDIATE:case t$.y5.DETACHED_HEAD:return(0,u.tZ)(aJ,{children:(0,u.tZ)(aY,{state:C.state,status:C.status,onFileClick:R,gotoPendingState:D})});case t$.y5.NORMAL:if(d===g8.BRANCH&&!g||d===g8.CURRENT_BRANCH&&!S)return(0,u.tZ)(aJ,{header:(0,u.tZ)(nH,{mode:g8.DASHBOARD,branch:null,switchMode:T,onBack:E}),children:(0,u.tZ)(ox,{currentBranch:null,switchMode:T})});return(0,u.tZ)(aJ,{header:(0,u.tZ)(nH,{mode:d,branch:d===g8.CURRENT_BRANCH?S:g,switchMode:T,onBack:E}),children:(0,u.tZ)(aK,{mode:d,status:C.status,remotes:C.remotes,previewBranch:g,previewCommit:p,currentBranch:S,switchMode:T,onStagedFileClick:R,onViewCommitClick:a?I:void 0,onViewSettingsClick:function(){return T({mode:g8.SETTINGS})},gotoPendingState:D})})}}function aJ(e){var t=e.header,n=e.children,r=(0,c._)((0,_.useState)(function(){return(0,t1.MT)()}),1)[0];return(0,u.tZ)(t2.Provider,{value:r,children:(0,u.BX)(v.G,{css:aj.gitPane,children:[(0,u.tZ)(ra,{}),t,(0,u.tZ)(v.G,{css:aj.gitPaneContent,children:n})]})})}function aY(e){var t=e.state,n=e.status,r=e.onFileClick,i=e.gotoPendingState;switch(t){case t$.yG.NOT_INITIALIZED:return(0,u.tZ)(oR,{});case t$.yG.ON_UNBORN_BRANCH:return(0,u.tZ)(oG,{onFileClick:r,status:n});case t$.yG.MERGING:return(0,u.tZ)(aa,{onFileClick:r,gotoPendingState:i});case t$.yG.REBASING:return(0,u.tZ)(oI,{});case t$.yG.REVERTING:return(0,u.tZ)(oD,{});case t$.yG.CHERRY_PICKING:return(0,u.tZ)(oh,{});case t$.yG.APPLYING_MAILBOX:return(0,u.tZ)(rl,{});case t$.yG.BISECTING:return(0,u.tZ)(rc,{});case t$.yG.DETACHED_HEAD:return(0,u.tZ)(oC,{});default:return null}}function aK(e){var t=e.mode,n=e.status,r=e.remotes,i=e.previewBranch,o=e.previewCommit,a=e.currentBranch,l=e.switchMode,c=e.onStagedFileClick,s=e.onViewCommitClick,d=e.onViewSettingsClick,f=e.gotoPendingState;switch(t){case g8.DASHBOARD:return(0,u.tZ)(ox,{currentBranch:a,switchMode:l});case g8.BRANCH:return(0,u.tZ)(od,{status:n,branch:i,remotes:r,onStagedFileClick:c,onViewCommitClick:s,onViewSettingsClick:d,gotoPendingState:f});case g8.CURRENT_BRANCH:return(0,u.tZ)(od,{status:n,remotes:r,branch:a,onStagedFileClick:c,onViewCommitClick:s,onViewSettingsClick:d,gotoPendingState:f,current:!0});case g8.SETTINGS:return(0,u.tZ)(aV,{});case g8.COMMIT:return(0,u.tZ)(o9,{status:n,remotes:r,onViewCommitClick:s,hash:o,switchMode:l});default:(0,t5.Z)(t)}}var a$=d.Dy.Object({type:d.Dy.Literal("git")}),aQ={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,u.tZ)(aq,{isActive:n,performPaneOperation:r})},Icon:function(e){var t=e.size;return(0,u.tZ)(tY.Z,{size:t})},getTitle:function(){return"Git"},decode:function(e){return f.B4.Decode(a$,e)}},a0=n(34270),a1=n(60305),a2=n(1813),a3=n(25150),a4=n(96264);function a8(){var e=(0,a2.uV)();return(0,_.useCallback)(function(t,n,r){e({origin:"History2: useHistoryBSOD",error:t,tags:{source:"ws-history2",type:n},extras:(0,N._)({state:a4.BI.current()},r)})},[e])}function a6(e){(0,a1.j)(a3.U3.HISTORY_USED,{action:e,which:"ws"})}function a5(e){var t=e.onClose;return(0,u.tZ)(X.zx,{text:"Cancel",onClick:function(){a6("historyExplicitlyClosed"),t()}})}var a9=n(40332),a7=(0,ef.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function le(){var e,t="/replEnvironmentMobile"===(0,au.useRouter)().pathname,n=(0,a4.bA)(),r=(0,a4._Z)(),i=(0,ab.U)(),o=!n||0===n.count;return(0,u.BX)(v.G,{css:[w.l0.rowWithGap(8),w.l0.align.center,o?a7:null],children:[(0,u.tZ)(a9.Z,{id:i("diffButton"),isOn:null!==(e=null==n?void 0:n.comparing)&&void 0!==e&&e,onChange:function(e){o||r({comparing:e.target.checked})}}),(0,u.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},w.l0.flex.column,w.l0.align.center],htmlFor:i("diffButton"),children:(0,u.tZ)(m.xv,{multiline:!1,children:t?"Compare":"Compare Latest"})})]})}function lt(){var e=(0,a4.bA)();if(!e||0===e.count)return null;var t=e.changes[e.version].timestamp;return(0,u.tZ)(nr.EK,{textColor:"dimmer",dateFormat:"switch",date:t})}var ln=n(23742);function lr(e){var t=e.reversed,n=void 0!==t&&t,r=e.hideName,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=(0,a4.bA)(),c=(0,_.useMemo)(function(){return[n?w.l0.rowReverseWithGap(4):w.l0.rowWithGap(4),w.l0.align.center]},[n]);if(!l)return null;if(0===l.count)return(0,u.BX)(v.G,{css:c,children:[(0,u.tZ)(ln.Z,{size:24}),(0,u.tZ)(m.xv,{color:a,multiline:!1,children:"Server Authored"})]});var s=l.changes[l.version];if(!l.users)return(0,u.BX)(v.G,{css:c,children:[(0,u.tZ)(nl.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,u.tZ)(m.xv,{color:a,multiline:!1,children:"Unknown"})]});var d=l.users[s.userId];return d?(0,u.BX)(v.G,{css:c,children:[(0,u.tZ)(nl.q,{size:24,src:d.image,username:d.username}),i?null:(0,u.tZ)(m.xv,{color:a,multiline:!1,children:d.username})]}):s.timestamp>16546464e5?(0,u.BX)(v.G,{css:c,children:[(0,u.tZ)(ln.Z,{size:24}),i?null:(0,u.tZ)(m.xv,{color:a,multiline:!1,children:"Server Authored"})]}):(0,u.BX)(v.G,{css:c,children:[(0,u.tZ)(nl.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,u.tZ)(m.xv,{color:a,multiline:!1,children:"Unknown"})]})}var li=n(73789),lo=n(12285),la=n(4955),ll=n(14105),lc=n(9670),ls=function(e){"use strict";(0,la._)(n,e);var t=(0,lc._)(n);function n(e){var r;return(0,lo._)(this,n),(r=t.call(this,e)).name="UserError",r}return n}((0,ll._)(Error)),lu=n(51585);function ld(){var e=(0,ew._)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return ld=function(){return e},e}function lf(){var e=(0,ew._)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return lf=function(){return e},e}var lh=(0,eZ.Ps)(ld());function lp(e,t,n){return new Promise(function(r,i){try{var o,a=e.watchTextFile(t,{onReady:(o=(0,tl._)(function(e){var t,o;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,n(e)];case 1:return t=l.sent(),r(t),[3,3];case 2:return o=l.sent(),i(o),[3,3];case 3:return a(),[2]}})}),function(e){return o.apply(this,arguments)})})}catch(e){i(e)}})}lf();var lm=lu.I;function lv(){return(lv=(0,tl._)(function(e,t){var n,r,i,o,a,l,c,u,d,f,h,p,m,v,g,y,b,w;return(0,tc.Jh)(this,function(Z){switch(Z.label){case 0:n=new Set,r=!0,i=!1,o=void 0;try{for(a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(c=l.value).userId&&n.add(c.userId)}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===n.size)return[2,{}];if(n.size>=lm)return[2,"too_many_users"];return[4,e.query({query:lh,variables:{ids:Array.from(n)}})];case 1:if(d=(u=Z.sent()).data,f=u.error)throw f;h=d.currentUser?[d.currentUser].concat((0,s._)(d.usersByIds)):d.usersByIds,p={},m=!0,v=!1,g=void 0;try{for(y=h[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)p[(w=b.value).id]={id:w.id,username:w.username,image:w.image}}catch(e){v=!0,g=e}finally{try{m||null==y.return||y.return()}finally{if(v)throw g}}return[2,p]}})})).apply(this,arguments)}function lg(){return(lg=(0,tl._)(function(e,t,n){var r,i,o;return(0,tc.Jh)(this,function(a){switch(a.label){case 0:var l;return[4,lp(e,n,(l=(0,tl._)(function(e){var t,n;return(0,tc.Jh)(this,function(r){return(t=e.fetchChanges,0===(n=e.version))?[2,{isDisposed:!1,result:[]}]:[2,t(1,n,"")]})}),function(e){return l.apply(this,arguments)}))];case 1:if((r=a.sent()).isDisposed)return[2,{data:null,handledError:"File deleted or removed."}];return[4,function(e,t){return lv.apply(this,arguments)}(t,i=r.result)];case 2:if("too_many_users"===(o=a.sent()))return[2,{data:{changes:i,users:null},handledError:null}];return[2,{data:{changes:i,users:o},handledError:null}]}})})).apply(this,arguments)}(g9||(g9={})).TooManyUsersRequestedError="too_many_users";var ly=n(89587),lb=(0,ef.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function lw(e){var t=e.onCloseHistory,n=(0,o2.Z)().showError,r=(0,c._)((0,_.useState)(!1),2),i=r[0],o=r[1],a=(0,c._)((0,_.useState)(!1),2),l=a[0],s=a[1],d=(0,Z.Z)().fs,f=(0,a4.bA)(),h=a8(),p=(0,tK.P5)({controlName:"flag-draft-buffers"}),g=(0,ly.Qk)(),y="Reset",b=!0;function x(){return(x=(0,tl._)(function(){var e,r;return(0,tc.Jh)(this,function(i){switch(i.label){case 0:if(!f||!d||l)return[2];i.label=1;case 1:var a,c;return i.trys.push([1,3,4,5]),s(!0),a6("versionRestored"),e=f.filePath,[4,(a=f.version+1,lp(d,e,(c=(0,tl._)(function(t){var n,r,i,o,l,c,s,u;return(0,tc.Jh)(this,function(f){switch(f.label){case 0:if(n=t.fetchChanges,r=t.writeChange,a>(i=t.version))throw Error("Cannot reset to a version that does not exist");if(a===i)return[2];o=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n(1,i,"")];case 2:if((l=f.sent()).isDisposed)throw new ls("File deleted or removed.");return o=l.result,[3,4];case 3:throw f.sent(),new ls("Something went wrong while resetting the file. It is possible that a bad connection is to blame. Please try again.");case 4:s=(c=(0,O._)(o.slice(a,o.length).reverse()))[0],u=c.slice(1).reduce(function(e,t){return e.compose(t.invertedChanges)},s.invertedChanges);try{r(u)}catch(e){throw tu.Tb(e),new ls("Something went wrong while resetting the file. Maybe the file changed while you were restoring it? Please try again.")}if(!(!p||g))return[3,6];return[4,d.flush(new Set([e]))];case 5:f.sent(),f.label=6;case 6:return[2]}})}),function(e){return c.apply(this,arguments)})))];case 2:return i.sent(),t(),[3,5];case 3:if((r=i.sent())instanceof ls)return n(r.message),[2];return h(r,"restore"),[3,5];case 4:return o(!1),s(!1),[7];case 5:return[2]}})})).apply(this,arguments)}return f?0===f.count?(y="No history",b=!0):l||i?(y="Resetting...",b=!0):f.playing?(y="Playing...",b=!0):f.version===f.count-1?(y="Viewing latest",b=!0):(y="Reset editor to here",b=!1):(y="Loading...",b=!0),(0,u.BX)(u.HY,{children:[(0,u.tZ)(X.zx,{text:y,disabled:b,onClick:function(){return o(!0)},colorway:"primary",iconLeft:(0,u.tZ)(a0.Z,{})}),f&&0!==f.count&&(0,u.tZ)(rs.u,{isOpen:i,onRequestClose:function(){l||o(!1)},children:(0,u.BX)(v.G,{css:w.l0.colWithGap(24),children:[(0,u.tZ)(m.h4,{variant:"headerDefault",level:2,children:"Reset file version"}),(0,u.tZ)(F.Tg,{elevated:!0,css:[w.l0.px(16),w.l0.py(12),w.l0.borderRadius(8)],children:(0,u.BX)("dl",{css:lb,children:[(0,u.tZ)("dt",{children:"File"}),(0,u.tZ)("dd",{children:f.filePath}),(0,u.tZ)("dt",{children:"Version"}),(0,u.BX)("dd",{children:[f.version+1,(0,u.BX)("span",{css:[w.l0.color.foregroundDimmest],children:[(0,u.tZ)("span",{css:w.l0.mx(8),children:"/"}),f.count]})]}),(0,u.tZ)("dt",{children:"Date"}),(0,u.tZ)("dd",{children:(0,u.tZ)(nr.EK,{date:f.changes[f.version].timestamp,dateFormat:"absolute"})}),(0,u.tZ)("dt",{children:"Author"}),(0,u.tZ)("dd",{children:(0,u.tZ)(lr,{})})]})}),(0,u.tZ)(ru.E,{icon:(0,u.tZ)(li.Z,{}),colorway:"positive",text:"Resetting is non-destructive. The reset content will become a new version at the end of history. You can always go back to the version you just had."}),(0,u.BX)(v.G,{css:[w.l0.rowWithGap(8),w.l0.justify.end],children:[(0,u.tZ)(X.zx,{text:"Cancel",disabled:l,onClick:function(){return o(!1)}}),(0,u.tZ)(X.zx,{text:l?"Resetting Version...":"Reset Version",disabled:l,colorway:"primary",onClick:function(){return x.apply(this,arguments)},iconLeft:(0,u.tZ)(a0.Z,{})})]})]})})]})}var lZ=n(77862),lx=(0,_.forwardRef)(function(e,t){var n=(0,a4.bA)(),r=(0,_.useRef)(null);(0,_.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin","1"),r.current.setAttribute("aria-valuemax",String(n.count)),r.current.setAttribute("aria-valuenow",String(n.version+1)));var i=(0,_.useMemo)(function(){return(0,u.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:w.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(w.TV.foregroundDefault," inset")}}})},[]);return n&&n.count>1?i:null}),lC=(0,_.forwardRef)(function(e,t){var n=(0,a4.bA)(),r=(0,_.useMemo)(function(){return(0,u.BX)(u.HY,{children:[(0,u.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,u.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:w.TV.backgroundHighest,borderRadius:"2px"},children:(0,u.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:w.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})},[t]),i=(0,_.useMemo)(function(){return(0,u.tZ)("div",{ref:t,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,u.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:w.TV.backgroundHighest,borderRadius:"2px"}})})},[t]);return n&&n.count>1?r:i}),l_=["ArrowLeft","ArrowRight","Home","End"];function lS(){var e=(0,a4.bA)(),t=(0,a4._Z)(),n=(0,c._)((0,_.useState)(!1),2),r=n[0],i=n[1],o=(0,_.useRef)(null),a=(0,_.useRef)(null),l=(0,_.useRef)(null),s=function(e){(0,lZ.A)(o,"--scrubber-transition-time",e)},d=function(e){(0,lZ.A)(o,"--scrubber-progress",e.toString())};return e&&!r&&(d(e.version/(e.count-1)),e.playing?s("50ms"):s("100ms")),(0,_.useEffect)(function(){if(e&&a.current&&l.current&&!r){var n=a.current,o=l.current,c=function(r){if(0===r.button){i(!0),o.focus();var a=n.getBoundingClientRect(),l=o.getBoundingClientRect(),c=a.width,u=l.width,f=r.target===n?u/2:r.clientX-l.left,h=null,p=function(n){var r=Math.max(0,Math.min(1,(n-a.left-f)/(c-u)));r!==h&&(h=r,d(r),t({version:Math.round(r*(e.count-1)),playing:!1}))};p(r.clientX);var m=function(e){s("0ms"),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),s("100ms"),i(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),r.preventDefault(),r.stopPropagation()}};return n.addEventListener("pointerdown",c),o.addEventListener("pointerdown",c),function(){n.removeEventListener("pointerdown",c),o.removeEventListener("pointerdown",c)}}},[e,t,r]),(0,_.useEffect)(function(){if(e&&l.current&&!r){var n=l.current,i=function(n){if(e&&l_.includes(n.key)){var r=n.shiftKey?10:1,i=e.version,o=e.count-1,a=null;switch(n.key){case"ArrowLeft":a=Math.max(0,i-r);break;case"ArrowRight":a=Math.min(o,i+r);break;case"Home":a=0;break;case"End":a=o}null!==a&&(t({version:a,playing:!1}),n.preventDefault(),n.stopPropagation())}};return n.addEventListener("keydown",i),function(){n.removeEventListener("keydown",i)}}},[e,t,r]),(0,_.useMemo)(function(){return(0,u.BX)(v.G,{innerRef:o,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,u.tZ)(lC,{ref:a}),(0,u.tZ)(lx,{ref:l})]})},[])}var lk=n(70501);function lE(){var e=(0,a4.bA)(),t=0,n=0;return e&&0!==e.count&&(t=e.version+1,n=e.count),(0,u.BX)(v.G,{css:[w.l0.rowWithGap(4),w.l0.justify.spaceBetween],children:[(0,u.tZ)(m.xv,{css:{minWidth:"2ch",textAlign:"right"},color:e?"default":"dimmer",multiline:!1,children:t}),(0,u.tZ)(m.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,u.tZ)(m.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:n})]})}var lT=n(92804),lR=n(80888);function lI(e){if(e<0)throw Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function lD(){var e,t,n,r,i=(0,a4.bA)(),o=(0,a4._Z)(),a=(null!==(t=null==i?void 0:null===(e=i.changes)||void 0===e?void 0:e.length)&&void 0!==t?t:1)-1,l=null!==(n=null==i?void 0:i.version)&&void 0!==n?n:0,s=null!==(r=null==i?void 0:i.playing)&&void 0!==r&&r,d=!i||0===i.count,f=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lI,i=(0,c._)((0,_.useState)(!1),2),o=i[0],a=i[1],l=(0,_.useCallback)(function(){t(1)},[t]),s=(0,_.useCallback)(function(){if(e+1>n){a(!1);return}t(e+1)},[t,e,n]);return(0,_.useEffect)(function(){if(o){var e=setTimeout(function(){s()},r(n));return function(){return clearTimeout(e)}}},[o,s,r,n]),{isPlaying:o,start:function(){a(!0)},stop:function(){a(!1)},reset:l}}(l,function(e){return o({version:e})},a),p=f.isPlaying,m=f.start,v=f.stop;(0,_.useEffect)(function(){p&&!s?v():!p&&s&&m()},[s,p,m,v]);var g="Loading...";return i&&(p?g="Pause":i.version===i.count-1?g="Play file history from beginning":0===i.version?g="Play file history":i.version>0&&(g="Play file history from here")),(0,u.tZ)(h.hU,{alt:g,size:24,disabled:d,onClick:function(){l===a?o({version:0,playing:!0}):o({playing:!s})},children:p?(0,u.tZ)(lT.Z,{}):(0,u.tZ)(lR.Z,{})})}function lB(){return(0,u.BX)(v.G,{css:[w.l0.rowWithGap(4),w.l0.align.center],children:[(0,u.tZ)(lD,{}),(0,u.tZ)(lG,{}),(0,u.tZ)(lE,{}),(0,u.tZ)(lA,{})]})}function lG(){var e=(0,a4.bA)(),t=(0,a4._Z)(),n=!e||0===e.version||0===e.count;return(0,u.tZ)(h.hU,{alt:"Move backwards one version",size:24,disabled:n,onClick:function(){e&&e.version>0&&t({version:e.version-1})},children:(0,u.tZ)(nA.Z,{})})}function lA(){var e=(0,a4.bA)(),t=(0,a4._Z)(),n=!e||e.version===e.count-1||0===e.count;return(0,u.tZ)(h.hU,{alt:"Move forwards one version",size:24,disabled:n,onClick:function(){e&&e.version<e.count-1&&t({version:e.version+1})},children:(0,u.tZ)(lk.Z,{})})}var lP=n(907);function lN(e){var t,n,r,i,o,a=e.filePath,l=e.onCloseHistory,s="/replEnvironmentMobile"===(0,au.useRouter)().pathname,d=s?w.l0.borderRadius(0):w.l0.borderRadius(0,0,8,8),f=(0,a4.bA)(),h=(0,a4._Z)(),p=(0,a4.Ai)(),g=a8(),y=(n=(t=(0,c._)((0,_.useState)({data:null,loading:!0,error:null,handledError:null}),2))[0],r=t[1],i=(0,Z.Z)().fs,o=(0,lP.x)(),(0,_.useEffect)(function(){if(!a){r({data:null,loading:!1,error:null,handledError:null});return}r({data:null,loading:!0,error:null,handledError:null});var e=!1;return(function(e,t,n){return lg.apply(this,arguments)})(i,o,a).then(function(t){var n=t.data,i=t.handledError;if(!e){if(i){r({data:null,loading:!1,error:null,handledError:i});return}r({data:n,loading:!1,error:null,handledError:null})}}).catch(function(t){e||(t instanceof Error||(t=Error(t)),r({data:null,loading:!1,error:t,handledError:null}))}),function(){e=!0}},[a,i,o]),n),b=y.data,x=y.loading,C=y.error;return(0,_.useEffect)(function(){if(C){g(C,"history2-index",{filePath:a});return}if(b&&!x)return h({filePath:a,changes:b.changes,users:b.users}),a6("historyLoaded"),function(){p()}},[a,b,x,C,g,h,p]),(0,u.BX)(v.G,{css:[w.l0.colWithGap(8),w.l0.p(8),w.l0.zIndex(3),w.l0.overflow("hidden"),d,w.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(w.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,u.BX)(F.Tg,{css:[w.l0.position.relative,w.l0.colWithGap(4),w.l0.px(12),w.l0.pt(8),w.l0.pb(8),w.l0.align.center,w.l0.borderRadius(8),w.l0.overflow("hidden")],elevated:!0,children:[(0,u.tZ)(lS,{}),(0,u.BX)(v.G,{css:[w.l0.display.flex,w.l0.flex.row,w.l0.align.center,w.l0.justify.spaceBetween,w.l0.width("100%")],children:[(0,u.tZ)(lB,{}),f&&f.count>0?(0,u.BX)(v.G,{css:[w.l0.rowWithGap(4),w.l0.align.center],children:[(0,u.tZ)(lt,{}),x||s?null:(0,u.tZ)(m.xv,{color:"dimmer",multiline:!1,children:"•"}),(0,u.tZ)(lr,{color:"dimmer",hideName:s,reversed:!0})]}):null]})]}),(0,u.BX)(v.G,{css:[w.l0.display.flex,w.l0.flex.row],children:[(0,u.tZ)(lL,{justify:"flex-start",children:(0,u.tZ)(le,{})}),(0,u.BX)(lL,{justify:"flex-end",children:[(0,u.tZ)(a5,{onClose:l}),(0,u.tZ)(lw,{onCloseHistory:l})]})]})]})}function lL(e){var t=e.children,n=e.justify;return(0,u.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:n,columnGap:w.TV.space8,minWidth:0},children:t})}var lO=n(33083),lU=n(41691),lM=n(4495),lX=n(5994),lF=(0,lM.B)();function lW(e){if(!(e instanceof eG.YW))return{compareTo:e.field(lF.state,!1),changed:!1};var t=e.state.field(lF.state,!1),n=e.startState.field(lF.state,!1)!==t;return{compareTo:t,changed:n}}function lH(e,t){e.state.field(lF.state,!1)!==t&&e.dispatch({effects:lF.effect.of(t)})}var lV=eG.QQ.define({create:function(){return null},update:function(e,t){var n=lW(t),r=n.compareTo,i=n.changed;if(!r)return null;if(!t.docChanged&&!i)return e;var o=t.state.doc.toString();return new lX.PO(o,r)}}),lz=null!==(g7=globalThis.requestIdleCallback)&&void 0!==g7?g7:globalThis.requestAnimationFrame,lj=null!==(ye=globalThis.cancelIdleCallback)&&void 0!==ye?ye:globalThis.cancelAnimationFrame,lq=eL.p.line({class:"cm-diff-deleted"}),lJ=function(e){"use strict";(0,la._)(n,e);var t=(0,lc._)(n);function n(e,r){var i;return(0,lo._)(this,n),(i=t.call(this)).insertion=e,i.highlight=r,i}var r=n.prototype;return r.destroy=function(){this.pendingHighlight&&lj(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var t=this;return this.pendingHighlight&&(lj(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=lz(function(){if(t.highlight){t.pendingHighlight=null;try{var n=t.highlight();e.innerHTML="",e.append(n)}catch(e){}}})),!0},n}(eL.l9),lY=eG.QQ.define({create:function(){return eL.p.none},update:function(e,t){var n=t.state.field(lV,!1);if(!n)return eL.p.none;var r=lW(t).changed;if(!t.docChanged&&!r)return e.map(t.changes);var i=[],o=function(e,t){i.push({from:e,to:e,value:t})},a=n.startInsertions();if(a){var l=!0,c=!1,s=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)!function(){var e=u.value,n=new lJ(e.content,function(){return lK(t.state,e.content)});o(0,eL.p.widget({widget:n,side:-1,block:!0}))}()}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}var f=!0,h=!1,p=void 0;try{for(var m,v=n.lines()[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)!function(){var e=m.value;if(e.isDeleted&&o(e.from,lq),e.insertions){var n=!0,r=!1,i=void 0;try{for(var a,l=e.insertions[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)!function(){var n=a.value,r=new lJ(n.content,function(){return lK(t.state,n.content)});o(e.to,eL.p.widget({widget:r,side:1,block:!0}))}()}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}}()}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}return eL.p.set(i,!0)},provide:function(e){return eL.tk.decorations.from(e)}});function lK(e,t){var n,r=document.createDocumentFragment(),i=null===(n=e.facet(lO.dK))||void 0===n?void 0:n.parser;if(!i){var o=document.createElement("span");return o.textContent=t,r.append(o),r}var a=i.parse(t),l=0;if((0,lU.bW)(a,{style:function(t){return(0,lO.QN)(e,t)}},function(e,n,i){if(e>l){var o=document.createElement("span");o.textContent=t.slice(l,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=t.slice(e,n),r.append(a),l=n}),l<t.length){var c=document.createElement("span");c.textContent=t.slice(l),r.append(c)}return r}var l$=function(e){"use strict";(0,la._)(n,e);var t=(0,lc._)(n);function n(e){var r;return(0,lo._)(this,n),(r=t.call(this)).line=e,r}var r=n.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(eL.SJ),lQ=function(e){"use strict";(0,la._)(n,e);var t=(0,lc._)(n);function n(e,r){var i;return(0,lo._)(this,n),(i=t.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=n.prototype;return r.eq=function(e){var t,n,r,i;if((null===(t=this.lines)||void 0===t?void 0:t.length)!==(null==e?void 0:null===(n=e.lines)||void 0===n?void 0:n.length)||(null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null==e?void 0:null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var c=0;c<this.lines.length;c++){var s=this.lines[c],u=e.lines[c];if(s.height!==u.height||s.left!==u.left||s.right!==u.right)return!1}return!0},r.toDOM=function(){var e=this,t=document.createElement("div");if(this.preceding){var n=this.preceding.slice().reverse(),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;r+=u.height;var d=this.piece(u);d.style.position="absolute",d.style.top="-".concat(r,"px"),t.prepend(d)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}var f=this.lines.map(function(t){return e.piece(t)});return t.append.apply(t,(0,s._)(f)),t},r.piece=function(e){var t=e.height,n=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==n&&(i.innerText=n.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(t,"px"),a.append(i,o),(null===n||null===r)&&(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===n&&a.classList.add("cm-diff-gutter-inserted")),a},n}(eL.SJ),l0=(0,eL.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var t=e.viewportLineBlocks,n=[],r=lW(e.state).compareTo,i=e.state.field(lV,!1),o=function(e,t){n.push({from:e,to:e,value:t})};if(!r||!i){var a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=e.state.doc.lineAt(d.from).number;if(d.type===eL.kH.Text)o(d.from,new l$(f));else if(Array.isArray(d.type)){var h=!0,p=!1,m=void 0;try{for(var v,g=d.type[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.type===eL.kH.Text){o(y.from,new l$(f));break}}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return eG.Xs.of(n,!0)}var b=!0,w=!1,Z=void 0;try{for(var x,C=t[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var _=x.value,S=[],k=e.state.doc.lineAt(_.from).number,E=i.line(k);if(E){var T=e.defaultLineHeight,R=E.offset,I=E.isDeleted,D=E.insertions,B=1===k?i.startInsertions():null,G=B?B.length:0,A=B?[]:null;if(!(Array.isArray(_.type)&&_.type.length>=G+(null!==(O=null==D?void 0:D.length)&&void 0!==O?O:0)+1)){if(B&&A){var P=!0,N=!1,L=void 0;try{for(var O,U,M=B[Symbol.iterator]();!(P=(U=M.next()).done);P=!0){var X=U.value;A.push({height:T,left:null,right:X.number})}}catch(e){N=!0,L=e}finally{try{P||null==M.return||M.return()}finally{if(N)throw L}}}if(S.push({height:_.height,left:k,right:I?null:k+R}),D){var F=!0,W=!1,H=void 0;try{for(var V,z=D[Symbol.iterator]();!(F=(V=z.next()).done);F=!0){var j=V.value;S.push({height:T,left:null,right:j.number})}}catch(e){W=!0,H=e}finally{try{F||null==z.return||z.return()}finally{if(W)throw H}}}o(_.from,new lQ(S,A));continue}for(var q=0;q<_.type.length;q++){var J=_.type[q];if((null==J?void 0:J.type)===eL.kH.Text){if(B&&A)for(var Y=0;Y<B.length;Y++){var K,$=B[Y],Q=_.type[q-Y-1];A.push({height:null!==(K=null==Q?void 0:Q.height)&&void 0!==K?K:T,left:null,right:$.number})}if(S.push({height:J.height,left:k,right:I?null:k+R}),D)for(var ee=0;ee<D.length;ee++){var et,en=D[ee],er=_.type[q+ee+1];S.push({height:null!==(et=null==er?void 0:er.height)&&void 0!==et?et:T,left:null,right:en.number})}break}}o(_.from,new lQ(S,A))}}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}return eG.Xs.of(n,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(lW(a).changed)return!0}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1},initialSpacer:function(e){return new l$(e.state.doc.lines)},updateSpacer:function(e,t){var n=t.state.doc.lines;return lW(t.state).compareTo?new lQ([{height:0,left:n,right:n}]):new l$(n)}}),l1="#0053A644",l2="#c93c3733",l3=[eL.tk.theme({".cm-diff-inserted":{backgroundColor:l1},".cm-diff-deleted":{backgroundColor:l2},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:l1,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:l2,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),lF.state,lV,lY,l0,(0,lO.mi)({openText:"▼",closedText:"▶︎"})],l4=n(4384),l8=function(){"use strict";function e(t){var n=this;(0,lo._)(this,e),this.view=t,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],t=n.view.scrollDOM.getBoundingClientRect(),r=n.view.scrollDOM.scrollTop,i=n.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var c,s=n.elements.values()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=u.dom,f=u.pos,h=u.offsetX,p=u.offsetY,m=n.view.coordsAtPos(f),v=n.view.lineBlockAt(f);if(!m){e.push({dom:d,x:null,y:null});continue}var g=v.top-r+t.top+n.view.documentPadding.top,y=Math.round((m.top-g)/n.view.defaultLineHeight)*n.view.defaultLineHeight+g,b=i+m.left-t.left+h,w=r+y-t.top+p;e.push({dom:d,x:b,y:w})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return e},write:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)!function(){var e=i.value,t=e.dom,n=e.x,r=e.y;if(null===n||null===r)return t.style.visibility="hidden",t.style.transition="none";t.style.visibility="",t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.style.transition.startsWith("none")&&requestAnimationFrame(function(){t.style.transition=""})}()}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}}}var t=e.prototype;return t.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},t.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var t=Array.from(this.elements.values()),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=e.changes.mapPos(l.pos,-1,eG.gc.TrackDel);if(!c){this.removeElement(l.dom);continue}l.pos=c}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},t.addElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:t,offsetX:n,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},t.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},t.updateElement=function(e,t){var n=t.pos,r=t.offsetX,i=t.offsetY,o=this.elements.get(e);o&&(void 0!==n&&(o.pos=n),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},t.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();(gj=yt||(yt={}))[gj.Insertion=0]="Insertion",gj[gj.Deletion=1]="Deletion";var l6=function(){"use strict";function e(t){(0,lo._)(this,e),this.map=new Map,this.duration=t}var t=e.prototype;return t.set=function(e,t,n,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(t,{from:e,to:t,time:n,type:r,cursor:i})},t.get=function(e,t){var n=this.map.get(e);if(n)return n.get(t)},t.update=function(t){var n=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,c=this[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(!(n-s.time>this.duration)){var u=t.changes.mapPos(s.from,-1,eG.gc.TrackDel),d=t.changes.mapPos(s.to,-1,eG.gc.TrackDel);if(null!==u&&null!==d){var f=s.cursor;t.docChanged&&(f=!1),r.set(u,d,s.time,s.type,f)}}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t.changes.iterChangedRanges(function(e,t,i,o){r.set(i,o,n,i!==o?0:1,!0)},!0),r},t.cursors=function(){var e,t,n,r,i,o,a;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,5];if(!(o=i.value).cursor)return[3,4];return[4,{type:o.type,pos:o.to}];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,n=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})},t[Symbol.iterator]=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;e.push(f)}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e[Symbol.iterator]()},e}(),l5="cm-flash-insertion",l9="cm-flash-deletion",l7="cm-flash-element",ce=eL.tk.theme((0,eB._)({},".".concat(l5,", .").concat(l9),{display:"inline-block"})),ct=function(e){"use strict";(0,la._)(n,e);var t=(0,lc._)(n);function n(){return(0,lo._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if(e instanceof n&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,t;null===(t=this.animation)||void 0===t||null===(e=t.cancel)||void 0===e||e.call(t)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var t=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(t>1e3)){var n=this.type===yt.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)";this.animate&&(this.animation=this.animate({backgroundColor:e?[n,n,"transparent"]:["transparent",n,"transparent"],offset:[0,.05,1]},{id:"cm-flash-anim",duration:1e3,easing:"ease-in-out",delay:-t}))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,t,n){"data-time"===e&&n&&this.play()},(0,l4._)(n,[{key:"type",get:function(){return this.classList.contains(l5)?yt.Insertion:yt.Deletion}},{key:"isPlaying",get:function(){var e;return(null===(e=this.animation)||void 0===e?void 0:e.playState)==="running"}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,ll._)(HTMLElement));customElements.get(l7)||customElements.define(l7,ct);var cn=function(){"use strict";function e(t){(0,lo._)(this,e),this.view=t,this.prevFlashes=new l6(1e3),this.decorations=eL.p.set([]),this.hasRenderedOnce=!1,this.overlay=new l8(t)}var t=e.prototype;return t.destroy=function(){this.overlay.destroy()},t.update=function(e){if(!this.hasRenderedOnce){e.docChanged&&(this.hasRenderedOnce=!0);return}var t=this.prevFlashes.update(e),n=[],r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;switch(c.type){case yt.Insertion:n.push({from:c.from,to:c.to,value:(s=c.time,eL.p.mark({class:l5,tagName:l7,attributes:{"data-time":s.toString()}}))});break;case yt.Deletion:var s,u,d=e.state.wordAt(c.from);d&&n.push({from:d.from,to:c.to,value:(u=c.time,eL.p.mark({class:l9,tagName:l7,attributes:{"data-time":u.toString()}}))})}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}this.overlay.clear();var f=this.view.defaultLineHeight.toString()+"px",h=!0,p=!1,m=void 0;try{for(var v,g=t.cursors()[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value,b=y.type,w=y.pos,Z=function(e,t){var n=e===yt.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=t,r.style.borderRadius="1px",r.style.backgroundColor=n,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}(b,f);this.overlay.addElement(Z,w)}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}this.prevFlashes=t,this.decorations=eL.p.set(n,!0)},e}(),cr=eL.lg.fromClass(cn,{decorations:function(e){return e.decorations}}),ci=eG.Wl.lowest([ce,cr]),co=n(87502),ca=n(60941),cl=n(33675),cc=n(44707),cs=function(){"use strict";function e(t){(0,lo._)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var n=!0,r=!1,i=void 0;try{for(var o,a=this,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)!function(){var e=o.value,t=e.changes,n=e.invertedChanges,r=null,i=!1;t.iterChangedRanges(function(e,t,n,o){i||(r||(r=o),n===o||(i=!0))}),a.forward.push(t),a.inverted.push(n),a.locations.push(r)}()}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}var t=e.prototype;return t.slice=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(t>this.length||n>this.length||t<0||n<0)throw Error("Invalid version range");if(t===n){if(0===this.length)return[eG.as.empty(0),null];var r=this.forward[t].newLength;return[eG.as.empty(r),null]}var i=t<n?cu(this.forward.slice(t,n)):cu(this.inverted.slice(n,t).reverse()),o=t<n?t:n-1,a=null!==(e=this.locations[o])&&void 0!==e?e:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},t.get=function(e){if(e>this.length||e<0)throw Error("Invalid version");return this.changes[e]},t.documentFor=function(e){if(e>this.length||e<0)throw Error("Invalid version");if(0===this.length)return"";var t=(0,c._)(this.slice(0,e),1)[0],n=eG.xv.of([""]);return t.apply(n).sliceString(0)},(0,l4._)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function cu(e){if(0===e.length)return eG.as.empty(0);if(1===e.length)return e[0];var t=(0,O._)(e),n=t[0],r=t.slice(1),i=n,o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;i=i.compose(u)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i}var cd=new ca.j(function(){return(0,eL.CT)()}),cf=[ci,l3];function ch(e){var t,n,r,i=e.filePath,o=(0,a4.bA)(),a=(0,co.Z)(),l=a.ref,s=a.view;(0,cl.VD)(s),(0,a4._H)(s);var d=a8();t=(0,_.useMemo)(function(){return(null==o?void 0:o.changes)?new cs(o.changes):null},[null==o?void 0:o.changes]),n=(0,_.useMemo)(function(){return t?t.documentFor(t.length):null},[t]),r=(0,_.useRef)({current:-1,next:0,pending:!1}),(0,_.useEffect)(function(){if(s)return function(){r.current.pending=!1,r.current={current:-1,next:0,pending:!1}}},[s]),(0,_.useEffect)(function(){if(s&&o&&t){o.comparing?lH(s,n):lH(s,null);var e=r.current;e.next=o.version,e.pending||e.current===e.next||(e.pending=!0,requestAnimationFrame(function(){!1!==e.pending&&(e.pending=!1,s&&t&&e.current!==e.next&&(function(e,t,n,r){var i=(0,c._)(t.slice(n+1,r+1),2),o=i[0],a=i[1];if(o.length!==e.state.doc.length){var l=(0,c._)(t.slice(0,r+1),1)[0];if(l.length!==e.state.doc.length)throw Error("Unresolvable mismatch between changes and document");e.dispatch({changes:{from:0,to:e.state.doc.length}}),e.dispatch({changes:l});return}e.dispatch({changes:o,effects:a?eL.tk.scrollIntoView(a,{yMargin:10}):void 0})}(s,t,e.current,e.next),e.current=e.next))}))}},[s,o,t,n]);var f=cd.use();return(0,u.tZ)("div",{css:cc.ev,children:(0,u.tZ)("div",{css:cc.ac,children:o&&0===o.count?(0,u.tZ)(cp,{}):(0,u.tZ)("div",{css:cc.ac,children:(0,u.tZ)(eV.ZP,{ref:l,css:cc.Mp,filePath:i,extensions:[f,cf],initializing:!o,onException:function(e){d(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function cp(){return(0,u.tZ)("div",{css:[cc.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,u.tZ)("span",{children:"This file has no history."})})}var cm=d.Dy.Object({type:d.Dy.Literal("history"),data:d.Dy.Object({path:d.Dy.Union([d.Dy.String(),d.Dy.Null()])})}),cv={Content:function(e){var t=e.pane,n=e.options;return(0,u.tZ)(cg,(0,L._)((0,N._)({},t.data),{performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.size;return(0,u.tZ)(a0.Z,{size:t})},getTitle:function(e){return e.data.path?"History - ".concat((0,S.UO)(e.data.path)):"History - no file open"},decode:function(e){return f.B4.Decode(cm,e)}};function cg(e){var t=e.path,n=e.performPaneOperation,r=(0,c._)((0,_.useState)(function(){return(0,t1.MT)()}),1)[0],i=(0,c._)((0,_.useState)(function(){return(0,t1.MT)()}),1)[0],o=(0,x.Mp)({path:t,performPaneOperation:n});(0,C.L5)(function(){if(o)return{commands:o}},[o]);var a=(0,P.Z)(function(){return function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}},[t,n]);return t?(0,u.tZ)(cl.Cl.Provider,{value:r,children:(0,u.tZ)(a4.ox.Provider,{value:i,children:(0,u.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,u.tZ)(x.HK,{path:t,performPaneOperation:n}),(0,u.tZ)(ch,{filePath:t}),(0,u.tZ)(lN,{filePath:t,onCloseHistory:a})]})})}):null}var cy=n(40166),cb=n(11120),cw=n(55927),cZ=n(60772),cx=n(64510),cC=n(4723),c_=n(30826),cS=n.n(c_),ck=n(59775),cE=n(57253),cT=n(77454),cR=n(30364),cI=n(89748),cD=(0,_.memo)(cx.Z),cB=(0,g.X)({bodyRoot:[w.l0.flex.growAndShrink(1),w.l0.overflowY("auto")],contentRoot:[w.l0.colWithGap(8),w.l0.height("100%"),w.l0.width("100%"),w.l0.overflow("auto"),w.l0.zIndex(2),w.l0.align.center,w.l0.py(16),w.l0.px(16),w.l0.borderRadius(8),(0,eB._)({margin:"0 auto"},"@media only screen and (min-width: ".concat(cZ.j.tabletMin,"px)"),w.l0.px(32))],emptyState:[w.l0.colWithGap(4),w.l0.align.center,{"& button":[{color:w.TV.foregroundDimmer}]}],header:[w.l0.rowWithGap(4),w.l0.height(30),w.l0.width("100%"),w.l0.align.center],markdownContainer:[w.l0.width("100%"),{"& .rendered-markdown":[w.l0.flex.column,w.l0.center],"& .rendered-markdown > *":[w.l0.maxWidth(840),w.l0.width("100%")],"& .rendered-markdown > table":w.l0.maxWidth("100%")}],paneRoot:[w.l0.position.relative,w.l0.display.flex,w.l0.flex.column,w.l0.overflowY("hidden"),w.l0.height("100%"),w.l0.width("100%")]});function cG(e){var t,n,r=(0,Z.Z)().fs,i=(0,c._)((t=(0,_.useRef)(!1),n=(0,_.useRef)(null),[(0,cw.Z)(function(){t.current=!0,n.current&&clearTimeout(n.current),n.current=setTimeout(function(){t.current=!1},150)},{type:"throttle",wait:37.5}),t]),2),o=i[0],a=i[1],l=(0,_.useRef)(null),s=(0,cb.T)(),d=e.path,f=e.performPaneOperation,h=(0,_.useCallback)(function(){f({operation:"replace",pane:{type:"codeEditor",data:{path:d}}}),f({operation:"commit"})},[f,d]);(0,C.L5)(function(){return{commands:[{match:cI.pl,data:{label:"Open in Editor",icon:(0,u.tZ)(oL.Z,{}),type:"action",run:h}}]}},[h]);var p=e.isHidden,m=(0,cT.p5)();(0,_.useEffect)(function(){if(!p){var e=cS()(function(e){(0,ck.Z)(e,{behavior:s?"auto":"smooth",scrollMode:"if-needed"})},100),t=cS()(function(t){if(d===(null==t?void 0:t.path)&&t&&!a.current){var n=l.current?function(e,t){var n=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null==n?void 0:n.length))return null;var r=Array.from(n).reverse(),i=t.line,o=t.column,a=!0,l=!1,s=void 0;try{for(var u,d=r[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value,h=f.dataset.sourcepos;if(!h)throw Error("Expected data source pos on selected element");var p=(0,c._)(h.split("-"),2),m=p[0],v=p[1],g=(0,c._)(m.split(":").map(Number),2),y=g[0],b=g[1],w=(0,c._)(v.split(":").map(Number),2),Z=w[0],x=w[1];if(i>=y&&o>=b&&(i<Z||i===Z&&o<=x))return f}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}}(l.current,t.position):null;n&&e(n)}},200),n=m.subscribe(t);return function(){t.cancel(),e.cancel(),n()}}},[m,p,s,d]);var g=(0,c._)((0,_.useState)(null),2),y=g[0],b=g[1];return(0,_.useEffect)(function(){return b(null),r.watchTextFile(d,{onReady:function(e){b(e.initialContent.toString())},onChange:function(e){b(e.latestContent)},onMoveOrDelete:function(e){e.eventType===cE.kS.Delete&&f({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[d,r,f,h]),(0,u.BX)(v.G,{css:cB.paneRoot,children:[(0,u.tZ)(x.HK,{path:e.path,performPaneOperation:f,children:y&&y.trim().length?(0,u.tZ)(cR.u,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:h,icon:(0,u.tZ)(oL.Z,{})}):null}),(0,u.tZ)(v.G,{css:cB.bodyRoot,children:(0,u.tZ)(cA,{ref:o,content:y,fs:r,markdownContainerRef:l,openInEditor:h,path:d})})]})}var cA=(0,_.forwardRef)(function(e,t){var n=e.content,r=e.fs,i=e.markdownContainerRef,o=e.openInEditor,a=e.path;return null===n?(0,u.tZ)(cP,{}):(0,u.tZ)(v.G,{css:cB.contentRoot,innerRef:t,children:(0,u.tZ)(v.G,{innerRef:i,css:cB.markdownContainer,children:n.trim().length?(0,u.tZ)(cD,{path:a,source:n,fs:r,sourcePos:!0}):(0,u.tZ)("div",{className:"rendered-markdown rendered-markdown-empty",children:(0,u.BX)(v.G,{css:cB.emptyState,innerRef:t,children:[(0,u.tZ)(m.xv,{color:"dimmer",children:(0,u.tZ)("i",{children:"This file is empty"})}),(0,u.tZ)(X.zx,{text:"Open in Editor",iconLeft:(0,u.tZ)(oL.Z,{}),onClick:o,variant:"nofill"})]})})})})});function cP(){var e=(0,c._)((0,_.useState)(!1),2),t=e[0],n=e[1];return(0,_.useEffect)(function(){var e=setTimeout(function(){return n(!0)},500);return function(){clearTimeout(e)}},[]),t?(0,u.tZ)(cC.Z,{}):null}var cN=d.Dy.Object({type:d.Dy.Literal("markdown"),data:d.Dy.Object({path:d.Dy.String({minLength:1})})}),cL={Content:function(e){var t=e.pane,n=e.options;return(0,u.tZ)(cG,{path:t.data.path,isHidden:!!n.isHidden,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.size;return(0,u.tZ)(cy.Z,{fill:"currentColor",size:t})},getTitle:function(e){return e.data.path?(0,S.UO)(e.data.path):"Markdown"},decode:function(e){return f.B4.Decode(cN,e)}},cO=d.Dy.Object({type:d.Dy.Literal("media"),data:d.Dy.Object({path:d.Dy.String()})}),cU={Content:function(e){var t=e.pane,n=e.options;return(0,u.tZ)(cM,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,u.tZ)(p.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,S.UO)(e.data.path)},decode:function(e){return f.B4.Decode(cO,e)}};function cM(e){var t=e.path,n=e.performPaneOperation,r=(0,Z.Z)().fs,i=(0,x.Mp)({path:t,performPaneOperation:n}),o=i?(0,s._)(i):[],a=(0,_.useCallback)(function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})},[n,t]),l={match:cI.pl,data:{label:"Open in Editor",icon:(0,u.tZ)(oL.Z,{}),type:"action",run:function(){a()}}};return(0,S.B4)(t)&&o.push(l),(0,C.L5)(function(){if(i)return{commands:o}},[i]),(0,u.BX)(u.HY,{children:[(0,u.tZ)(x.HK,{path:t,performPaneOperation:n,children:(0,u.tZ)(cR.u,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:a,icon:(0,u.tZ)(oL.Z,{})})}),(0,u.tZ)(x.VY,{centered:!0,children:(0,u.tZ)(e4.Z,{filePath:t,fs:r})})]})}var cX=n(99742),cF=n(20795),cW=n(44049),cH=n(32822),cV=function(e){(0,a1.j)(a1.U3.DATABASE_USED,(0,N._)({type:"PostgreSQL",provider:"neon"},e))},cz="DATABASE_URL",cj="PGDATABASE",cq="PGHOST",cJ="PGPORT",cY="5432",cK="PGUSER",c$="PGPASSWORD",cQ=function(e){var t=e.envVarKey,n=e.envVarValue,r=e.isSecret,i=(0,ab.U)()("db-env-var-".concat(t)),o=(0,c._)((0,_.useState)(!1),2),a=o[0],l=o[1];return(0,u.BX)(v.G,{css:[w.l0.flex.row,w.l0.flex.wrap,w.l0.align.end,w.l0.pb(8),{gap:w.TV.space8}],children:[(0,u.BX)(v.G,{css:[w.l0.colWithGap(8),{flexBasis:250},w.l0.flex.grow(0),w.l0.flex.shrink(1)],children:[(0,u.tZ)("label",{css:w.l0.color.foregroundDimmer,htmlFor:i,children:t}),(0,u.tZ)(U.II,{id:i,type:!r||a?"text":"password",readOnly:!0,value:n})]}),(0,u.tZ)(X.zx,{text:"Copy",iconLeft:(0,u.tZ)(cF.Z,{}),onClick:function(){(0,M.Z)(n),cV({action:"envVarCopied",envVarKey:t,envVarType:"value"})}}),r?(0,u.tZ)(X.zx,{text:a?"Hide":"View",iconLeft:a?(0,u.tZ)(cW.Z,{}):(0,u.tZ)(oO.Z,{}),onClick:function(){return l(function(e){return!e})}}):null]})},c0=function(e){var t,n=e.connectionString,r=e.databaseName,i=new URL(n.replace("postgres://","https://")),o=i.host,a=i.username,l=i.password;return t={},(0,eB._)(t,cz,n),(0,eB._)(t,cj,r),(0,eB._)(t,cq,o),(0,eB._)(t,cJ,cY),(0,eB._)(t,cK,a),(0,eB._)(t,c$,l),t},c1=function(){var e=(0,Z.Z)().fs;return(0,_.useCallback)(function(t){var n=c0({connectionString:t.connectionString,databaseName:t.databaseName});function r(){return(r=(0,tl._)(function(){var t,r,i,o,a,l,s,u,d,f,h,p,m,v;return(0,tc.Jh)(this,function(g){switch(g.label){case 0:return[4,e.readFile(".env")];case 1:if(t=g.sent(),r="",t.error){if(t.error===cE.Df.NotFound)r="";else throw Error("Error getting .env")}else r=t.content;i=cH.Z.parse(r.toString()),o=!1,a=(0,N._)({},i),l=!0,s=!1,u=void 0;try{for(d=Object.entries(n)[Symbol.iterator]();!(l=(f=d.next()).done);l=!0)p=(h=(0,c._)(f.value,2))[0],m=h[1],a[p]!==m&&(o=!0,a[p]=m)}catch(e){s=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw u}}if(!o)return[2];return v=cH.Z.serialize(a),[4,e.writeFile(".env",tI.Z.from(v))];case 2:return g.sent(),[2]}})})).apply(this,arguments)}!function(){r.apply(this,arguments)}()},[e])},c2=function(e){var t=e.connectionString,n=e.databaseName,r=(0,P.Z)(function(){return c0({connectionString:t,databaseName:n})},[t,n]),i=r[cq],o=r[cK],a=r[c$],l=c1();return(0,_.useEffect)(function(){l({connectionString:t,databaseName:n})},[t,n,l]),(0,u.BX)(v.G,{css:[w.l0.colWithGap(8)],children:[(0,u.tZ)(cQ,{envVarKey:cz,envVarValue:t,isSecret:!0}),(0,u.tZ)(cQ,{envVarKey:cj,envVarValue:n}),(0,u.tZ)(cQ,{envVarKey:cq,envVarValue:i}),(0,u.tZ)(cQ,{envVarKey:cJ,envVarValue:cY}),(0,u.tZ)(cQ,{envVarKey:cK,envVarValue:o}),(0,u.tZ)(cQ,{envVarKey:c$,envVarValue:a,isSecret:!0})]})},c3=n(77865),c4=n(55821),c8=n(75076),c6=n(25012),c5=n(68081),c9=n(12113),c7=n(18471),se=n(43983),st=n(42182);function sn(){var e=(0,ew._)(["\n  fragment CurrentUserUsageBasedBillingSummary on CurrentUser {\n    __typename\n    usageBasedBilling {\n      __typename\n      ... on UserUsageBasedBillingSummary {\n        capabilities {\n          canUseUsageBasedBilling\n          explanation\n          hasPaymentMethod\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return sn=function(){return e},e}function sr(){var e=(0,ew._)(["\n  query CurrentUserUsageBasedBilling {\n    currentUser {\n      id\n      username\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return sr=function(){return e},e}var si=(0,eZ.Ps)(sn());function so(){var e=(0,ew._)(["\n  query DatabaseFrozen {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return so=function(){return e},e}sr();var sa={},sl=(0,eZ.Ps)(so(),si);function sc(){var e=(0,ew._)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n      }\n    }\n  }\n"]);return sc=function(){return e},e}function ss(){var e=(0,ew._)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return ss=function(){return e},e}function su(){var e=(0,ew._)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n        }\n      }\n    }\n  }\n"]);return su=function(){return e},e}function sd(){var e=(0,ew._)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return sd=function(){return e},e}var sf={},sh=(0,eZ.Ps)(sc()),sp=(0,eZ.Ps)(ss()),sm=(0,eZ.Ps)(su()),sv=(0,eZ.Ps)(sd()),sg=(0,g.X)({self:[],title:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.color.foregroundDimmest],status:[w.l0.width(8),w.l0.height(8),w.l0.backgroundColor.foregroundDimmer,w.l0.borderRadius("full")],main:[w.l0.colWithGap(8),w.l0.align.center],icon:w.l0.mt(32),subTitle:w.l0.my(16),cta:[w.l0.width("100%"),w.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[w.l0.colWithGap(8),w.l0.align.center],ctaStatusBanner:[w.l0.textAlign.left],budgetContainer:[w.l0.colWithGap(8),w.l0.border(),w.l0.borderRadius(8),w.l0.p(8)]});function sy(e){var t=e.loading,n=e.ubbExplanation,r=e.hasPaymentMethod,i=e.handleOnUnpause,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,c=e.setShowSupportForm,s=(0,ac.sG)();return n===aw.Fp.NeedsSubscription||n===aw.Fp.NeedsSubscriptionOrPaymentMethod?s?(0,u.tZ)(ru.E,{text:"You need a subscription to use PostgreSQL databases. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),css:sg.ctaStatusBanner}):(0,u.BX)(v.G,{css:sg.ctaContainer,children:[(0,u.tZ)(st.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to unpause database",css:sg.cta,colorway:"primary",variant:"outlined",disabled:l,onPlanCheckoutComplete:o}),(0,u.tZ)(X.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:sg.cta,disabled:l,loading:t,iconLeft:(0,u.tZ)(se.Z,{}),onClick:function(){return a()}})]}):n===aw.Fp.NeedsSmsVerification?(0,u.tZ)(c6.Z,{context:aw.jv.Neon,onSuccess:o}):n===aw.Fp.NeedsPaymentMethod?s?(0,u.tZ)(ru.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),css:sg.ctaStatusBanner}):(0,u.tZ)(X.zx,{colorway:"primary",text:"Add a payment method",css:sg.cta,disabled:l,loading:t,iconLeft:(0,u.tZ)(se.Z,{}),onClick:function(){return a()}}):n===aw.Fp.NeedsUnbanning?(0,u.tZ)(c7.u,{text:"Your account currently has restrictions on use PostgreSQL databases. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),css:sg.ctaStatusBanner,onClick:function(){return c()}}):n===aw.Fp.InsufficientBudget?(0,u.BX)(u.HY,{children:[(0,u.tZ)(ru.E,{text:"You've reached your monthly usage budget. Increase your budget to unpause your database.",colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),css:sg.ctaStatusBanner}),(0,u.tZ)(v.G,{css:sg.budgetContainer,children:(0,u.tZ)(c9.L,{onUpdateSuccess:o})})]}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(X.zx,{colorway:"primary",onClick:i,text:"Unpause database",loading:t,css:sg.cta}),!1===r?(0,u.tZ)(c7.u,{text:"Add a payment method to avoid downtime",colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),css:sg.ctaStatusBanner,onClick:function(){return s?null:a()}}):null]})}function sb(e){var t,n,r,i=e.replId,o=e.neonProjectId,a=e.onDatabaseUnfreezed,l=(0,c._)((0,_.useState)(!1),2),s=l[0],d=l[1],f=(0,c._)((0,_.useState)(!1),2),h=f[0],p=f[1],g=(0,o2.Z)().showError,y=(t=(0,N._)({},sa,{notifyOnNetworkStatusChange:!0,onError:function(e){g(e.message)}}),ex.a(sl,t)),b=y.loading,Z=y.data,x=y.refetch,C=(0,c._)((n=(0,N._)({},sf,{onError:function(e){g("Error when unfreezing Neon database: ".concat(e.message)),cV({action:"unfreeze",success:!1})},onCompleted:function(e){if((null==e?void 0:e.unfreezeNeonDatabase.__typename)!=="UnfreezeNeonDatabaseResult"){g("Error: Unfreezes Neon Database failed."),cV({action:"unfreeze",success:!1});return}(null==e?void 0:e.unfreezeNeonDatabase.success)?(a(),cV({action:"unfreeze",success:!0})):(g("Error: Unfreezes Neon Database failed."),cV({action:"unfreeze",success:!1}))}}),aZ.D(sv,n)),2),S=C[0],k=C[1].loading,E=(null==Z?void 0:null===(r=Z.currentUser)||void 0===r?void 0:r.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?Z.currentUser.usageBasedBilling.capabilities:null;return(0,u.BX)(v.G,{css:sg.self,children:[(0,u.tZ)(rs.u,{isOpen:h,onRequestClose:function(){return p(!1)},children:(0,u.tZ)(c5.Z,{onRequestClose:function(){return p(!1)}})}),(0,u.BX)(v.G,{css:sg.title,children:[(0,u.tZ)(v.G,{css:sg.status}),(0,u.tZ)(m.xv,{css:[w.l0.color.foregroundDimmest],multiline:!1,children:"Database paused"})]}),(0,u.BX)(v.G,{css:sg.main,children:[(0,u.tZ)(tV.Z,{size:32,fill:eO.TV.foregroundDimmest,css:sg.icon}),(0,u.tZ)(m.xv,{variant:"subheadDefault",css:sg.subTitle,multiline:!1,children:"Your Database is paused."}),(0,u.tZ)(sy,{loading:b||k,ubbExplanation:null==E?void 0:E.explanation,hasPaymentMethod:null==E?void 0:E.hasPaymentMethod,handleOnUnpause:function(){S({variables:{input:{replId:i,neonProjectId:o}}})},refetchUbbCapabilitiesQueryData:x,setShowPaymentMethodForm:function(){return d(!0)},showPaymentMethodForm:s,setShowSupportForm:function(){return p(!0)}})]})]})}var sw=function(e){var t=e.title,n=e.children,r=e.isAccordion,i=e.sectionStyles;return(0,u.tZ)(v.G,{css:[w.l0.colWithGap(8),w.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:w.TV.outlineDefault},i],children:r?(0,u.tZ)(es.Q,{headerContent:(0,u.tZ)(v.G,{css:[w.l0.rowWithGap(8),w.l0.align.center],children:(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,u.tZ)(v.G,{css:[w.l0.p(12),w.l0.colWithGap(8),w.l0.height("100%")],children:n})}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(m.xv,{multiline:!1,css:[w.l0.fontSize(w.TV.fontSizeSubheadDefault),w.l0.fontWeight.medium],children:t}),n]})})},sZ=n(95605);function sx(e){var t=e.title,n=e.doWarnAtom,r=e.inactive,i=(0,t0.Dv)(n);return(0,u.BX)(v.G,{css:[w.l0.rowWithGap(4),w.l0.align.center],children:[(0,u.tZ)(m.xv,{variant:"small",css:w.l0.color.foregroundDimmer,multiline:!1,children:void 0!==r&&r?t+" last run":t}),i?(0,u.tZ)(nq.Z,{color:w.TV.orangeStronger}):null]})}function sC(e){var t=e.title,n=e.totalAtom,r=e.currentAtom,i=e.countAtom,o=e.measure,a=e.limitText,l=e.inactive,c=void 0!==l&&l,s=(0,P.Z)(function(){return(0,t1.cn)(function(e){return sS(e(r),e(n))})},[r,n]),d=(0,P.Z)(function(){return(0,t1.cn)(function(e){var t,l,c,u;return a||(t=e(s),l=e(r),c=e(n),u=i&&e(i),"empty"===t||void 0===l?void 0:"vCPU"===o?sk(100*Math.min(1,l/c))+"% of "+u+" vCPUs":sk(l).toLocaleString()+"/"+sk(c).toLocaleString()+" "+o)})},[a,s,r,n,i,o]),f=(0,P.Z)(function(){return(0,t1.cn)(function(e){var t=e(s);return"At limit"===t||"Close to limit"===t})},[s]);return(0,u.BX)(v.G,{css:[w.l0.colWithGap(4),w.l0.flex.growAndShrink(2),{flexBasis:32}],children:[t?(0,u.tZ)(sx,{title:t,doWarnAtom:f,inactive:c}):null,(0,u.tZ)(s_,{currentAtom:r,totalAtom:n,inactive:c,limitTextAtom:d,mini:!0})]})}function s_(e){var t=e.currentAtom,n=e.totalAtom,r=e.limitTextAtom,i=e.inactive,o=e.mini,a=(0,t0.Dv)(n),l=(0,t0.Dv)(t),c=(0,t0.Dv)(r),s=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return w.TV.accentNegativeDefault;case"Close to limit":return w.TV.orangeDefault}}(sS(l,a));return(0,u.tZ)(em.J,{css:o&&w.l0.height(8),total:a,current:l,color:s,disabled:i,tooltip:c})}function sS(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}function sk(e){return Math.round((e+Number.EPSILON)*100)/100}var sE=n(47336),sT=n.n(sE),sR=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],sI=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function sD(e,t){var n,r=t||{},i=r.signed,o=r.digitsNumber,a=r.isKib,l=r.isKibNotation;if(n=void 0!==i&&i?e<0?"-":"+":"",0===e)return"".concat(n,"0B");var c=void 0===a||a?1024:1e3,s=Math.floor(Math.log(Math.abs(e))/Math.log(c));return"".concat(n).concat(parseFloat(Math.abs(e/Math.pow(c,s)).toFixed(void 0===o?2:o))).concat((void 0!==l&&l?sR:sI)[s])}var sB=n(2511),sG=n(88623),sA=n(88032),sP=n(59520),sN=n(93272),sL={"td,th":{border:"1px solid "+w.TV.outlineDefault}},sO={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},sU={outline:"2px solid ".concat(w.TV.accentPrimaryDefault),outlineOffset:"-2px"},sM=(0,ef.iv)({":focus:focus-visible":sU}),sX=(0,ef.iv)(sU),sF=(0,ef.iv)([sO,sL,sM]),sW=(0,ef.iv)([w.l0.fontWeight.medium,sO,sL,sM]),sH=(0,ef.iv)({"tbody > tr:hover":{backgroundColor:w.TV.backgroundHigher,cursor:"pointer"}});function sV(e){var t=e.type,n=e.style,r=e.children,i=(0,sG.LA)().rowGroupProps;return(0,u.tZ)(t,(0,L._)((0,N._)({},i),{style:n,children:r}))}function sz(e){var t=e.item,n=e.state,r=e.children,i=(0,_.useRef)(null),o=(0,sG.Qm)({node:t},n,i).rowProps;return(0,u.tZ)("tr",(0,L._)((0,N._)({css:sW},o),{ref:i,children:r}))}function sj(e){var t,n=e.column,r=e.state,i=(0,_.useRef)(null),o=(0,sG.WY)({node:n},r,i).columnHeaderProps,a=(0,sA.Fx)(),l=a.isFocusVisible,c=a.focusProps;return(0,u.tZ)("th",(0,L._)((0,N._)({},(0,sP.dG)(o,c)),{css:[l&&sX,sM],colSpan:n.colspan,style:{textAlign:(null!==(t=n.colspan)&&void 0!==t?t:1)>1?"center":"left"},ref:i,children:n.rendered}))}function sq(e){var t=e.item,n=e.children,r=e.state,i=(0,_.useRef)(null),o=(0,sG.U)({node:t},r,i).rowProps,a=(0,sA.Fx)(),l=a.isFocusVisible,c=a.focusProps;return(0,u.tZ)("tr",(0,L._)((0,N._)({css:[l&&sX,sF]},(0,sP.dG)(o,c)),{ref:i,children:n}))}function sJ(e){var t=e.cell,n=e.state,r=(0,_.useRef)(null),i=(0,sG.fs)({node:t},n,r).gridCellProps,o=(0,sA.Fx)(),a=o.isFocusVisible,l=o.focusProps;return(0,u.tZ)("td",(0,L._)((0,N._)({},(0,sP.dG)(i,l)),{css:[a&&sX,sM],ref:r,children:t.rendered}))}function sY(e){var t=e.selectionMode,n=e.selectionBehavior,r=(0,sN.oy)((0,L._)((0,N._)({},e),{showSelectionCheckboxes:"multiple"===t&&"replace"!==n})),i=(0,_.useRef)(null),o=r.collection,a=(0,sG.x6)(e,r,i).gridProps;return(0,u.BX)("table",(0,L._)((0,N._)({},a),{ref:i,css:[(null==e?void 0:e.onRowAction)&&sH],style:{borderCollapse:"collapse"},children:[(0,u.tZ)(sV,{type:"thead",children:o.headerRows.map(function(e){return(0,u.tZ)(sz,{item:e,state:r,children:(0,s._)(e.childNodes).map(function(e){return(0,u.tZ)(sj,{column:e,state:r},e.key)})},e.key)})}),(0,u.tZ)(sV,{type:"tbody",children:(0,s._)(o.body.childNodes).map(function(e){return(0,u.tZ)(sq,{item:e,state:r,children:(0,s._)(e.childNodes).map(function(e){return(0,u.tZ)(sJ,{cell:e,state:r},e.key)})},e.key)})})]}))}var sK=function(e){var t=e.ariaTableProps,n=e.rows,r=e.columns;return(0,u.BX)(sY,(0,L._)((0,N._)({},t),{children:[(0,u.tZ)(sN.xD,{columns:r,children:function(e){return(0,u.tZ)(sN.sg,{children:e.value})}}),(0,u.tZ)(sN.RM,{items:n,children:function(e){return(0,u.tZ)(sN.X2,{children:function(t){return(0,u.tZ)(sN.bL,{children:e[t]})}})}})]}))};function s$(e){var t=e.headerColumns,n=e.bodyData,r=e.ariaLabel,i=e.scrollRef,o=e.onRowAction,a=t.map(function(e,t){return{key:"string"==typeof e?e:"".concat(t),value:e}}),l=n.map(function(e,n){for(var r={id:n},i=0;i<e.length;i++){var o=t[i];r["string"==typeof o?o:"".concat(i)]=e[i]}return r});return(0,u.tZ)(sK,{ariaTableProps:{selectionMode:"none","aria-label":void 0===r?"Database Table":r,onRowAction:o,scrollRef:i},columns:a,rows:l})}var sQ=(0,t1.cn)(["databaseManager"]),s0=(0,t1.cn)(null,function(e,t,n){var r=e(sQ);t(sQ,(0,s._)(r).concat([n])),cV({action:"pageNav",databasePage:n})}),s1=(0,t1.cn)(null,function(e,t){var n=e(sQ);t(sQ,n.slice(0,n.length-1))}),s2=(0,t1.cn)(function(e){var t=e(sQ);return t[t.length-1]}),s3=function(){return(0,t0.b9)(s0)},s4=function(){return(0,t0.b9)(s1)},s8=function(e,t){var n,r=(0,Z.Z)().psql,i=(0,c._)((0,_.useState)(),2),o=i[0],a=i[1],l=(0,c._)((0,_.useState)(!1),2),s=l[0],u=l[1],d=(0,_.useCallback)((n=(0,tl._)(function(){return(0,tc.Jh)(this,function(n){switch(n.label){case 0:if(!e)return[2];n.label=1;case 1:return n.trys.push([1,,3,4]),u(!0),[4,r.run({query:e,connectionString:t})];case 2:return a(n.sent()),[3,4];case 3:return u(!1),[7];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),[t,r,e]);return(0,_.useEffect)(function(){d()},[t,r,e,d]),{data:o,loading:s,refetch:d}},s6=function(e){var t=e.rows,n=e.columns;return!Array.isArray(t)||t.length<1?null:{headerColumns:null!=n?n:[],bodyData:t.map(function(e){return Object.values(e)})}},s5=function(e){return s8("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",e.connectionString)},s9=(0,t1.cn)(void 0),s7=(0,t1.cn)(function(e){var t=e(s9);return null==t?void 0:t.rows.reduce(function(e,t){var n=t.table_name,r=t.column_name;return e[n]||(e[n]=[]),e[n].push(r),e},{})}),ue=function(e){var t=s8("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",e.connectionString).data,n=(0,t0.b9)(s9);(0,_.useEffect)(function(){n(t)},[t,n])},ut=function(e){var t=e.tableName,n=e.connectionString;return s8("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(t.replace(/"/g,'""'),"';"),n).data},un=function(e){var t=e.tableData,n=e.scrollRef,r=t.headerColumns,i=t.bodyData,o=s3(),a=(0,_.useCallback)(function(e){var t=parseInt(String(e),10);if(!isNaN(t)){var n=i[t][r.indexOf("Name")];o("table/".concat(n))}},[o,r,i]);return(0,u.tZ)(s$,{headerColumns:r,bodyData:i,onRowAction:a,scrollRef:n})},ur=function(e){var t=e.psqlQueryResult,n=e.scrollRef,r=t.data;if(t.loading)return(0,u.tZ)(v.G,{css:[w.l0.flex.row,w.l0.justify.center,w.l0.p(32)],children:(0,u.tZ)(b.Z,{})});if(null==r?void 0:r.error)return(0,u.tZ)(v.G,{css:[w.l0.flex.row,w.l0.justify.center,w.l0.p(32)],children:(0,u.tZ)(m.xv,{css:[w.l0.color.accentNegativeDefault,w.l0.maxWidth("100%")],children:null==r?void 0:r.error})});var i=r?s6(r):null;return i?(0,u.tZ)(un,{tableData:i,scrollRef:n}):(0,u.tZ)(v.G,{css:[w.l0.flex.row,w.l0.justify.center,w.l0.p(32)],children:(0,u.tZ)(m.xv,{css:[w.l0.color.accentPositiveDefault,w.l0.maxWidth("100%")],children:"No tables found"})})},ui=function(e){var t=e.connectionString,n=s4(),r=(0,_.useRef)(null),i=s5({connectionString:t}),o=i.refetch;return(0,u.BX)(v.G,{css:[w.l0.flex.column,w.l0.height("100%")],children:[(0,u.BX)(v.G,{css:[w.l0.flex.row,w.l0.py(16),w.l0.px(8),w.l0.align.center],children:[(0,u.tZ)(h.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,u.tZ)(sB.Z,{})}),(0,u.tZ)(v.G,{css:[w.l0.flex.growAndShrink(1)],children:(0,u.tZ)(m.xv,{css:[w.l0.fontSize(16),w.l0.ml(8)],multiline:!1,children:"All tables"})}),(0,u.tZ)(h.hU,{alt:"Refresh",size:24,type:"button",onClick:o,children:(0,u.tZ)(nL.Z,{})})]}),(0,u.tZ)(v.G,{css:[w.l0.flex.growAndShrink(1),w.l0.overflow("auto"),w.l0.px(8)],innerRef:r,children:(0,u.tZ)(ur,{psqlQueryResult:i,scrollRef:r})})]})},uo="1px solid "+w.TV.outlineDefault,ua=(0,ef.iv)([w.l0.p(8),w.l0.backgroundColor.backgroundDefault,w.l0.align.center,w.l0.borderRadius(0),{borderLeft:uo,borderRight:uo,borderBottom:uo},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(w.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:w.TV.backgroundHigher}}}]),ul=function(e){var t=s5({connectionString:e.connectionString}),n=t.data,r=t.loading,i=(0,c._)((0,_.useState)(!1),2),o=i[0],a=i[1],l=(0,_.useCallback)(function(){a(!0)},[]),s=n?s6(n):null,d=(0,_.useRef)(null);if(!s||r)return null;var f=s.bodyData.length,h=s.headerColumns,p=s.bodyData;return(0,u.tZ)(u.HY,{children:(0,u.BX)(v.G,{css:[w.l0.overflow("auto"),w.l0.display.grid],innerRef:d,children:[(0,u.tZ)(un,{tableData:{headerColumns:h,bodyData:o?p:p.slice(0,5)},scrollRef:d}),f-5>0&&!o?(0,u.tZ)(X.zx,{text:"".concat(f-5," more"),css:ua,onClick:l}):null]})})},uc="https://docs.replit.com/hosting/databases/postgresql-on-replit",us="https://docs.replit.com/hosting/about-usage-based-billing#1-postgresql-usage-metrics",uu=function(e){var t=e.dbSize,n=e.totalSize,r=sD(t),i=sD(n),o=(0,P.Z)(function(){return(0,t1.cn)(t)},[t]),a=(0,P.Z)(function(){return(0,t1.cn)(n)},[n]);return(0,u.BX)(u.HY,{children:[(0,u.BX)(m.xv,{css:w.l0.color.foregroundDimmer,multiline:!1,children:[r,"/",i]}),(0,u.tZ)(sC,{totalAtom:a,currentAtom:o,limitText:"".concat(r," / ").concat(i),inactive:!1,measure:"MB"})]})},ud=function(e){var t,n,r=e.connectionString,i=s8("SELECT sum(pg_database_size(datname)) FROM pg_database;",r),o=i.data,a=i.loading,l=s8("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",r),c=l.data,s=l.loading,d=parseInt(null!==(n=null==o?void 0:null===(t=o.rows[0])||void 0===t?void 0:t.sum)&&void 0!==n?n:"0",10),f=null==c?void 0:c.rows.length;return(0,u.BX)(v.G,{css:w.l0.rowWithGap(8),children:[s?null:(0,u.BX)(m.xv,{multiline:!1,children:[f," ",1===f?"table":"tables"]}),a?null:(0,u.tZ)(uu,{dbSize:d,totalSize:10737418240})]})},uf=function(e){var t=e.connectionString,n=e.onOpenDatabaseViewerClick,r=e.showUsageLink;return(0,u.BX)(v.G,{css:[w.l0.colWithGap(8)],children:[(0,u.BX)(v.G,{children:[(0,u.tZ)(ud,{connectionString:t}),r?(0,u.tZ)(sT(),{legacyBehavior:!0,href:"/usage#postgres-storage",passHref:!0,children:(0,u.tZ)("a",{css:w.l0.hover(w.l0.color.accentPrimaryStrongest),children:(0,u.tZ)(m.xv,{children:"See all usage"})})}):null]}),(0,u.tZ)(ul,{connectionString:t}),(0,u.tZ)(X.zx,{text:"See Database Contents",iconLeft:(0,u.tZ)(sZ.Z,{}),onClick:n})]})},uh=n(8261),up=function(e){var t=e.psqlQueryResult,n=e.tableName,r=e.connectionString,i=e.scrollRef,o=t.data,a=t.loading,l=ut({tableName:n,connectionString:r});if(a)return(0,u.tZ)(v.G,{css:[w.l0.flex.row,w.l0.justify.center,w.l0.p(32)],children:(0,u.tZ)(b.Z,{})});if(null==o?void 0:o.error)return(0,u.tZ)(v.G,{css:[w.l0.flex.row,w.l0.justify.center,w.l0.p(32)],children:(0,u.tZ)(m.xv,{css:[w.l0.color.accentNegativeDefault,w.l0.maxWidth("100%")],children:null==o?void 0:o.error})});var c=o?s6(o):null;if(!c)return(0,u.tZ)(v.G,{css:[w.l0.flex.row,w.l0.justify.center,w.l0.p(32)],children:(0,u.tZ)(m.xv,{css:[w.l0.color.accentPositiveDefault,w.l0.maxWidth("100%")],children:"No rows"})});var s=c.headerColumns,d=c.bodyData;return(0,u.tZ)(s$,{headerColumns:s.map(function(e,t){var n,r=null==l?void 0:null===(n=l.rows)||void 0===n?void 0:n.find(function(t){return t.column_name===e}),i=null==r?void 0:r.data_type,o=i?(0,u.tZ)(uh.D,{text:i}):null;return(0,u.BX)(v.G,{css:[w.l0.rowWithGap(8),w.l0.align.center],children:[(0,u.tZ)(m.xv,{multiline:!1,children:e}),o]},t)}),bodyData:d,scrollRef:i})},um=function(e){var t=e.tableName,n=e.connectionString,r=s4(),i=(0,_.useRef)(null),o=s8('SELECT * FROM "'.concat(t.replace(/"/g,'""'),'" LIMIT ').concat(500),n),a=o.refetch;return(0,u.BX)(v.G,{css:[w.l0.flex.column,w.l0.height("100%")],children:[(0,u.BX)(v.G,{css:[w.l0.flex.row,w.l0.py(16),w.l0.px(8),w.l0.align.center],children:[(0,u.tZ)(h.hU,{alt:"Go back",size:28,type:"button",onClick:r,children:(0,u.tZ)(sB.Z,{})}),(0,u.tZ)(v.G,{css:[w.l0.flex.growAndShrink(1)],children:(0,u.tZ)(m.xv,{css:[w.l0.fontSize(16),w.l0.ml(8)],multiline:!1,children:t})}),(0,u.tZ)(h.hU,{alt:"Refresh",size:24,type:"button",onClick:a,children:(0,u.tZ)(nL.Z,{})})]}),(0,u.tZ)(v.G,{css:[w.l0.flex.growAndShrink(1),w.l0.overflow("auto"),w.l0.px(8)],innerRef:i,children:(0,u.tZ)(up,{psqlQueryResult:o,tableName:t,connectionString:n,scrollRef:i})})]})};n(66548);var uv=function(e){var t=e.size;return(0,u.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:void 0===t?16:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,u.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,u.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,u.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,u.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,u.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,u.BX)("defs",{children:[(0,u.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,u.tZ)("stop",{stopColor:"#B9FFB3"}),(0,u.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,u.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,u.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,u.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},ug=(0,ef.iv)([w.l0.color.foregroundDimmest,{textDecoration:"underline"}]),uy=function(){return(0,u.tZ)(v.G,{css:[w.l0.colWithGap(8),w.l0.py(8),w.l0.width("100%")],children:(0,u.BX)(v.G,{css:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.spaceBetween],children:[(0,u.tZ)("a",{target:"_blank",href:uc,css:ug,children:"Docs"}),(0,u.BX)(v.G,{css:[w.l0.rowWithGap(8),w.l0.align.center],children:[(0,u.tZ)(m.xv,{css:[w.l0.fontSize(14)],multiline:!1,children:"Powered by"}),(0,u.tZ)(uv,{})]})]})})},ub=n(25783),uw=n(61269),uZ=n(44322),ux=n(12674),uC=n(69574),u_=n(76900),uS=n(50585),uk=n(40042),uE=n(70995),uT=n(73590),uR=n(38938),uI=function(e){var t=e.headerTitle,n=e.onGoBack,r=e.children;return(0,u.BX)(v.G,{css:[w.l0.flex.column,w.l0.height("100%")],children:[(0,u.BX)(v.G,{css:[w.l0.flex.row,w.l0.py(16),w.l0.px(8),w.l0.align.center],children:[(0,u.tZ)(h.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,u.tZ)(sB.Z,{})}),(0,u.tZ)(m.xv,{css:[w.l0.fontSize(16),w.l0.ml(8)],multiline:!1,children:t})]}),(0,u.tZ)(v.G,{css:[w.l0.overflow("auto"),w.l0.height("calc(100% - 60px)")],children:r})]})},uD=(0,t1.cn)(""),uB=(0,t1.cn)(null),uG=(0,t1.cn)(null,function(e,t,n){var r=n.query;r&&t(uD,r);var i=e(uB);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})}),uA=n(85234),uP=n.n(uA),uN=n(41974),uL=n(88205),uO=n(37697),uU=(0,uL.O4)("replDatabasesQueryHistory",[]),uM=function(e,t){return!e.isPinned&&t.isPinned?1:e.isPinned&&!t.isPinned?-1:"number"==typeof e.pinnedTimestamp&&"number"==typeof t.pinnedTimestamp?e.pinnedTimestamp-t.pinnedTimestamp:t.timestamp-e.timestamp},uX=function(e,t){var n=e.findIndex(function(e){return!e.isPinned&&e.data===t.data});-1!==n?e.splice(n,1,t):e.push(t),e.sort(uM);var r=e.filter(function(e){return!e.isPinned}).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}},uF=function(e){var t=e.id,n=e.data,r=e.isPinned,i=(0,uO.lV)((0,_.useCallback)(function(e,n){var r=e(uU).find(function(e){return e.id===t}),i=(null==r?void 0:r.data)||"";i&&(n(uG,{query:i}),cV({action:"queryHistoryItemSelected"}))},[t])),o=(0,uO.lV)((0,_.useCallback)(function(e,n){var r=e(uU);n(uU,(0,uN.Uy)(r,function(e){var n=e.find(function(e){return e.id===t});n&&(n.isPinned=!n.isPinned,n.isPinned?n.pinnedTimestamp=Date.now():n.pinnedTimestamp=void 0),e.sort(uM)})),cV({action:"queryHistoryItemPinned"})},[t]));return(0,u.BX)(v.G,{css:[{borderTop:"1px solid ".concat(w.TV.outlineDefault),":hover":{background:w.TV.backgroundHigher}},w.l0.flex.row,w.l0.p(8),w.l0.color.foregroundDimmer,w.l0.align.center,w.l0.cursor.pointer],onClick:i,children:[(0,u.tZ)(m.xv,{css:[w.l0.flex.growAndShrink(1)],multiline:!1,children:n}),(0,u.tZ)(h.hU,{alt:"Pin query",onClick:o,children:r?(0,u.tZ)(uS.Z,{fill:w.TV.accentPrimaryDefault}):(0,u.tZ)(u_.Z,{})})]})},uW=function(e){var t=e.onExpand,n=(0,t0.Dv)(uU);return(0,u.tZ)(es.Q,{onClick:t,headerContent:(0,u.BX)(v.G,{css:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.p(2)],children:[(0,u.tZ)(a0.Z,{}),(0,u.tZ)(m.xv,{css:[w.l0.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,u.tZ)(v.G,{css:[w.l0.colWithGap(8),w.l0.height("100%")],children:0===n.length?(0,u.tZ)(v.G,{css:[w.l0.p(8)],children:(0,u.tZ)(m.xv,{css:[w.l0.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,u.tZ)(v.G,{children:n.map(function(e){return(0,u.tZ)(uF,(0,N._)({},e),e.id)})})})})},uH=new uC.R(function(){return(0,eL.W$)((0,ux.V)((0,u.tZ)("div",{css:[{fontFamily:w.TV.fontFamilyCode},w.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))}),uV=new ca.j(function(e){return eG.Wl.high((0,ub.sql)((0,N._)({dialect:ub.PostgreSQL},e)))}),uz=function(e){var t=e.queryResult,n=e.scrollRef;if(null==t?void 0:t.error)return(0,u.tZ)(v.G,{css:w.l0.px(8),children:(0,u.tZ)(m.xv,{css:[w.l0.color.accentNegativeDefault],children:null==t?void 0:t.error})});if(!(null==t?void 0:t.rows))return null;var r=s6(t);if(!r)return(0,u.tZ)(v.G,{css:w.l0.px(8),children:(0,u.tZ)(m.xv,{css:[w.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var i=r.headerColumns,o=r.bodyData;return(0,u.tZ)(v.G,{css:w.l0.px(8),children:(0,u.tZ)(s$,{headerColumns:i,bodyData:o,scrollRef:n})})},uj=(0,ef.iv)([w.l0.height("100%"),w.l0.position.relative,w.l0.overflow("auto")]),uq=(0,ef.iv)([w.l0.position.sticky,w.l0.top(0),w.l0.left(0),w.l0.zIndex(1),w.l0.backgroundColor.backgroundDefault]),uJ=function(e){var t=e.connectionString,n=e.performPaneOperation,r=(0,c._)((0,t0.KO)(uD),2),i=r[0],o=r[1],a=(0,co.Z)(),l=a.ref,s=a.view,d=(0,c._)((0,_.useState)(!1),2),f=d[0],h=d[1];(0,_.useEffect)(function(){return function(){var e;o(null!==(e=null==s?void 0:s.state.doc.toString())&&void 0!==e?e:"")}},[o,null==s?void 0:s.state.doc]);var p=(0,t0.b9)(uB);(0,_.useEffect)(function(){p(s)},[p,s]),ue({connectionString:t});var m=(0,t0.Dv)(s7),g=uR.q,y=(0,uw.Z)({filePath:g}),x=(0,Z.Z)().psql,C=(0,c._)((0,_.useState)(),2),S=C[0],k=C[1],E=(0,c._)((0,_.useState)(!1),2),T=E[0],R=E[1],I=(0,uO.lV)((0,_.useCallback)(function(e,t,n){if(n){var r={id:uP()(),data:n,timestamp:Date.now()},i=e(uU);t(uU,(0,uN.Uy)(i,function(e){uX(e,r)}))}},[])),D=(0,_.useCallback)(function(){function e(){return(e=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(n){switch(n.label){case 0:if(!s)return[2];n.label=1;case 1:return n.trys.push([1,,3,4]),R(!0),I(e=null==s?void 0:s.state.doc.toString()),[4,x.run({query:e,connectionString:t})];case 2:return k(n.sent()),cV({action:"queryRan"}),[3,4];case 3:return R(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,x,I,s]),B=s3(),G=(0,_.useCallback)(function(){B("databaseManager")},[B]),A=(0,_.useCallback)(function(){B("tableSchemas")},[B]),P=(0,_.useRef)(null),N=uV.use({schema:m}),L=(0,tK.P5)({controlName:"flag-postgresql-pane-inline-ai"}),O=(0,ac.T3)(),U=(0,uk.Ls)({path:g}),M=(0,uk.jg)({path:g}),F=(0,uk.fD)({path:g}),W=(0,uT.W)({generateCode:U,editCode:M,explainCode:F,onMoreClick:void 0}),H=(0,_.useCallback)(function(){s&&U(s,"unknown")},[s,U]),V=(0,_.useCallback)(function(e){return n({operation:"open",pane:e,secondary:!0})},[n]),z=(0,_.useCallback)(function(){V({type:"ghostwriterChat"})},[V]),j=(0,uZ.W)({onGenerateCode:H,onReplyInChat:z}),q=(0,uE.u)({isMobile:O,generateCode:U,filePath:g,openPane:V});return(0,u.tZ)(uI,{headerTitle:"Database Contents",onGoBack:G,children:(0,u.BX)(v.G,{css:[w.l0.colWithGap(8),uj],innerRef:P,children:[(0,u.BX)(v.G,{css:[w.l0.colWithGap(8),w.l0.px(8),w.l0.pb(8),f?null:uq],children:[(0,u.BX)(v.G,{css:[{border:"1px solid ".concat(w.TV.outlineDefault)},w.l0.borderRadius(2)],children:[(0,u.tZ)(eV.ZP,{ref:l,filePath:g,css:[cc.Mp,w.l0.backgroundColor.backgroundDefault,w.l0.borderRadius(8),w.l0.overflow("auto"),w.l0.minHeight(100),w.l0.maxHeight(500),{".cm-panel":{zIndex:1}}],initialDoc:i,extensions:[L?[]:uH,N,y,L&&!O?W:[],L?j:[],L?q:[]]}),(0,u.tZ)(uW,{expanded:f,onExpand:function(){h(function(e){return!e})}})]}),(0,u.tZ)(X.zx,{text:"Run Query",iconLeft:T?(0,u.tZ)(b.Z,{}):(0,u.tZ)(nQ.Z,{}),onClick:D,disabled:T})]}),(0,u.tZ)(uz,{queryResult:S,scrollRef:P}),(0,u.tZ)(v.G,{css:[w.l0.colWithGap(8),w.l0.px(8),w.l0.py(8)],children:(0,u.tZ)(X.zx,{css:w.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,u.tZ)(sZ.Z,{}),onClick:A})})]})})},uY=(0,t1.cn)(null),uK=(0,t1.cn)(null),u$=function(){var e=(0,t0.b9)(uY),t=(0,t0.b9)(uK);return(0,_.useCallback)(function(n){if(!n){e(null),t(null);return}e({connectionString:n,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase"}),t(n)},[t,e])},uQ=(0,g.X)({self:[w.l0.colWithGap(0),w.l0.height("100%"),w.l0.p(8)],main:[w.l0.colWithGap(16),w.l0.flex.grow(1),w.l0.flex.shrink(0)],header:[w.l0.rowWithGap(8),w.l0.align.center],status:[w.l0.width(8),w.l0.height(8),w.l0.backgroundColor.accentPositiveStronger,w.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(w.TV.accentPositiveStronger,")")}],title:[w.l0.color.accentPositiveStronger],docs:[c8.Z,w.l0.maxWidth("100%")],footer:[w.l0.pt(16)],remove:[w.l0.py(8)],removeConfirm:[w.l0.p(8),w.l0.colWithGap(8)]}),u0=function(e){var t,n=e.neonDatabases,r=e.onDatabaseDeleted,i=e.onDatabaseUnfreezed,o=e.performPaneOperation,a=n[0],l=(0,o2.Z)().showError,s=(0,eb.Z)(),d=(0,t0.Dv)(s2),f=s3(),h=(0,_.useCallback)(function(){f("queryEditor")},[f]),p=(0,c._)((t=(0,N._)({},sf,void 0),aZ.D(sp,t)),2),g=p[0],y=p[1].loading,b=(0,_.useCallback)(function(){C(!0)},[]),w=(0,_.useCallback)((0,tl._)(function(){var e,t,n;return(0,tc.Jh)(this,function(i){switch(i.label){case 0:return[4,g({variables:{input:{replId:s,databaseId:a.databaseId}}})];case 1:if(t=(e=i.sent()).data,n=e.errors,C(!1),n&&n.length>0)return l("Error when deleting Neon database: ".concat(null==n?void 0:n.join())),cV({action:"removed",success:!1}),[2];if((null==t?void 0:t.deleteNeonDatabase.__typename)!=="DeleteNeonDatabaseResult")return l("Error: ".concat(null==t?void 0:t.deleteNeonDatabase.message)),cV({action:"removed",success:!1}),[2];return(null==t?void 0:t.deleteNeonDatabase.success)?(r(),cV({action:"removed",success:!0})):(l("Error: Delete Neon Database failed."),cV({action:"removed",success:!1})),[2]}})}),[g,a.databaseId,r,s,l]),Z=(0,c._)((0,_.useState)(!1),2),x=Z[0],C=Z[1],S=(0,_.useCallback)(function(){C(!1)},[]),k=(0,t0.Dv)(uK),E=c0({connectionString:a.connectionString,databaseName:a.databaseName})[cq].split(".")[0],T=k||"".concat(a.connectionString,"/").concat(a.databaseName,"?sslmode=require&options=project%3D").concat(E);if("queryEditor"===d)return(0,u.tZ)(uJ,{connectionString:T,performPaneOperation:o});if("tableSchemas"===d)return(0,u.tZ)(ui,{connectionString:T});if(d.startsWith("table/")){var R=d.slice(d.indexOf("/")+1);return(0,u.tZ)(um,{tableName:R,connectionString:T})}return(0,u.BX)(v.G,{css:uQ.self,children:[(0,u.tZ)(v.G,{css:uQ.main,children:a.isFrozen?(0,u.tZ)(sb,{replId:s,neonProjectId:a.projectId,onDatabaseUnfreezed:i}):(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{css:uQ.header,children:[(0,u.tZ)(v.G,{css:uQ.status}),(0,u.tZ)(m.xv,{css:uQ.title,multiline:!1,children:"Database connected"})]}),(0,u.tZ)(sw,{title:"Database Info",children:(0,u.tZ)(uf,{connectionString:T,onOpenDatabaseViewerClick:h,showUsageLink:!0})}),(0,u.tZ)(sw,{title:"Using the database",isAccordion:!0,children:(0,u.tZ)(c3.ZP,{css:uQ.docs,children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: If you need to enable connection pooling for any reason, contact us at support@repl.it.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"})}),(0,u.tZ)(sw,{title:"Environment variables",isAccordion:!0,children:(0,u.tZ)(c2,{connectionString:T,databaseName:a.databaseName})})]})}),(0,u.tZ)(v.G,{css:uQ.footer,children:x||y?(0,u.BX)(F.Tg,{css:uQ.removeConfirm,elevated:!0,children:[(0,u.tZ)(m.xv,{children:"Removing this database will remove access to the data for this Repl."}),(0,u.tZ)(ru.E,{icon:(0,u.tZ)(nq.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,u.tZ)(X.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:y,iconLeft:(0,u.tZ)(c4.Z,{}),onClick:w}),(0,u.tZ)(X.zx,{text:"Cancel",disabled:y,onClick:S})]}):(0,u.tZ)(X.zx,{css:uQ.remove,text:"Remove Database",disabled:y,iconLeft:(0,u.tZ)(c4.Z,{}),onClick:b})}),(0,u.tZ)(uy,{})]})},u1=n(87409),u2=n(24336),u3=n(41365),u4=n(28341);function u8(){var e=(0,ew._)(["\n  query NeonStartPage($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n      usageBasedBilling {\n        __typename\n        ... on UserUsageBasedBillingSummary {\n          capabilities {\n            canUseUsageBasedBilling\n            explanation\n            hasPaymentMethod\n          }\n        }\n      }\n      usageInterval {\n        ... on UsageInterval {\n          resources {\n            neonComputeTime {\n              allotment\n              usage\n            }\n            neonDataStorage {\n              allotment\n              usage\n            }\n          }\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        currentUserPermissions {\n          createNeonDatabase\n        }\n      }\n    }\n  }\n"]);return u8=function(){return e},e}var u6={},u5=(0,eZ.Ps)(u8()),u9=(0,g.X)({self:[w.l0.px(8),w.l0.pt(16)],container:[w.l0.colWithGap(32),w.l0.py(32),w.l0.textAlign.center,u3.Qw.maxWidth],title:[w.l0.colWithGap(4),w.l0.width("100%"),w.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],usage:[w.l0.colWithGap(4),w.l0.width("100%"),w.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],cta:[w.l0.width("100%"),w.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[w.l0.colWithGap(8),w.l0.align.center],ctaStatusBanner:[w.l0.textAlign.left],payment:[w.l0.p(16),w.l0.borderRadius(12),w.l0.textAlign.left,w.l0.shadow(2)],budgetContainer:[w.l0.colWithGap(8),w.l0.border(),w.l0.borderRadius(8),w.l0.p(8)],disabledBanner:[w.l0.py(6),{alignSelf:"center"}],details:[w.l0.colWithGap(12),w.l0.maxWidth(400),{marginLeft:"auto",marginRight:"auto"}],detailsItem:{display:"grid",gridTemplateColumns:"56px auto",gap:20},detailsText:[w.l0.flex.growAndShrink(1),w.l0.textAlign.left]});function u7(e){var t=e.loading,n=e.canCreateDatabase,r=e.ubbExplanation,i=e.hasPaymentMethod,o=e.handleOnCreate,a=e.refetchUbbCapabilitiesQueryData,l=e.setShowPaymentMethodForm,c=e.showPaymentMethodForm,s=e.setShowSupportForm,d=(0,ac.sG)();return n?r===aw.Fp.NeedsSubscription||r===aw.Fp.NeedsSubscriptionOrPaymentMethod?d?(0,u.tZ)(ru.E,{text:"You need a subscription to create a database. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),css:u9.ctaStatusBanner}):(0,u.BX)(v.G,{css:u9.ctaContainer,children:[(0,u.tZ)(st.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to create a database",css:u9.cta,colorway:"primary",variant:"outlined",disabled:c,onPlanCheckoutComplete:a}),(0,u.tZ)(X.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:u9.cta,disabled:c,loading:t,iconLeft:(0,u.tZ)(se.Z,{}),onClick:function(){return l()}})]}):r===aw.Fp.NeedsSmsVerification?(0,u.tZ)(c6.Z,{context:aw.jv.Neon,onSuccess:a}):r===aw.Fp.NeedsPaymentMethod?d?(0,u.tZ)(ru.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),css:u9.ctaStatusBanner}):(0,u.tZ)(X.zx,{colorway:"primary",text:"Add a payment method",css:u9.cta,disabled:c,loading:t,iconLeft:(0,u.tZ)(se.Z,{}),onClick:function(){return l()}}):r===aw.Fp.NeedsUnbanning?(0,u.tZ)(c7.u,{text:"Your account currently has restrictions on creating a database. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),css:u9.ctaStatusBanner,onClick:function(){return s()}}):r===aw.Fp.InsufficientBudget?(0,u.BX)(u.HY,{children:[(0,u.tZ)(ru.E,{text:"You've reached your monthly usage budget. Increase your budget to create a database.",colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),css:u9.ctaStatusBanner}),(0,u.tZ)(v.G,{css:u9.budgetContainer,children:(0,u.tZ)(c9.L,{onUpdateSuccess:a})})]}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(X.zx,{colorway:"primary",onClick:o,css:u9.cta,text:t?"":"Create a database",iconLeft:t?(0,u.tZ)(b.Z,{}):(0,u.tZ)(u.HY,{}),loading:t}),!1===i?(0,u.tZ)(c7.u,{text:"Add a payment method to avoid downtime",colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),css:u9.ctaStatusBanner,onClick:function(){return d?null:l()}}):null]}):(0,u.tZ)(ru.E,{text:"You must be an owner of the Repl to create a database.",colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),css:u9.ctaStatusBanner})}var de=function(e){var t,n,r,i=e.onDatabaseCreated,o=(0,c._)((0,_.useState)(!1),2),a=o[0],l=o[1],s=(0,c._)((0,_.useState)(!1),2),d=s[0],f=s[1],h=(0,eb.Z)(),p=(0,o2.Z)().showError,g=(t=(0,N._)({},u6,{notifyOnNetworkStatusChange:!0,variables:{replId:h},onError:function(e){p(e.message)}}),ex.a(u5,t)),y=g.loading,b=g.data,Z=g.refetch,x=(0,c._)((n=(0,N._)({},sf,{onError:function(e){p("Error when creating Neon database: ".concat(e.message)),cV({action:"created",success:!1})},onCompleted:function(e){if((null==e?void 0:e.createNeonDatabase.__typename)==="CreateNeonDatabaseResult"){var t=e.createNeonDatabase;i({__typename:"NeonDatabase",databaseId:t.databaseId,databaseName:t.databaseName,connectionString:t.connectionString,projectId:t.projectId,isFrozen:t.isFrozen}),cV({action:"created",success:!0})}else{p("Error: ".concat(null==e?void 0:e.createNeonDatabase.message)),cV({action:"created",success:!1});return}}}),aZ.D(sh,n)),2),C=x[0],S=x[1].loading,k=(null==b?void 0:null===(r=b.currentUser)||void 0===r?void 0:r.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?b.currentUser.usageBasedBilling.capabilities:null,E=(0,_.useMemo)(function(){return function(e){var t=e.data,n=null==t?void 0:t.usageInterval;if(n&&"UsageInterval"===n.__typename){var r=Math.max(0,n.resources.neonComputeTime.allotment-n.resources.neonComputeTime.usage),i=(0,u1.fZ)(r,{resourceUsageType:"ComputeHours"}),o=Math.max(0,n.resources.neonDataStorage.allotment-n.resources.neonDataStorage.usage);return{formattedComputeTimeAmount:i,formattedDataStorageAmount:(0,u1.fZ)(o,{precision:1,resourceUsageType:"GiB"})}}}({data:null==b?void 0:b.currentUser})},[b]);return(0,u.BX)(v.G,{css:u9.self,children:[(0,u.tZ)(rs.u,{isOpen:d,onRequestClose:function(){return f(!1)},children:(0,u.tZ)(c5.Z,{onRequestClose:function(){return f(!1)}})}),(0,u.BX)(v.G,{css:u9.container,children:[(0,u.BX)(v.G,{css:u9.title,children:[(0,u.tZ)(m.xv,{variant:"subheadBig",children:"PostgreSQL Database"}),(0,u.tZ)(m.xv,{color:"dimmer",children:"Fully-managed, usage based PostgreSQL database with 10GB of fast read/write storage."}),(0,u.tZ)(m.xv,{css:w.l0.textAlign.center,children:(0,u.tZ)("a",{href:uc,target:"_blank",rel:"noopener",children:"Learn more"})})]}),(0,u.BX)(v.G,{css:w.l0.colWithGap(16),children:[(0,u.tZ)(v.G,{css:[w.l0.rowWithGap(0),w.l0.justify.center],children:(0,u.tZ)(oE.Z,{art:"Database"})}),null!=E?(0,u.BX)(m.xv,{css:u9.usage,color:"dimmer",children:["You have ",E.formattedComputeTimeAmount," left this month and ",E.formattedDataStorageAmount," of storage left in total."]}):null,(0,u.BX)(v.G,{css:w.l0.colWithGap(8),children:[(0,u.tZ)(u7,{loading:y||S,canCreateDatabase:(null==b?void 0:b.repl.__typename)==="Repl"&&b.repl.currentUserPermissions.createNeonDatabase,ubbExplanation:null==k?void 0:k.explanation,hasPaymentMethod:null==k?void 0:k.hasPaymentMethod,handleOnCreate:function(){C({variables:{input:{replId:h}}})},refetchUbbCapabilitiesQueryData:Z,setShowPaymentMethodForm:function(){return l(!0)},showPaymentMethodForm:a,setShowSupportForm:function(){return f(!0)}}),a?(0,u.tZ)(F.Tg,{elevated:!0,css:u9.payment,children:(0,u.tZ)(u4.q,{onSuccess:(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:return l(!1),[4,Z()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,u.BX)(v.G,{css:u9.details,children:[(0,u.BX)(v.G,{css:u9.detailsItem,children:[(0,u.tZ)(u2.lt,{}),(0,u.BX)(m.xv,{css:u9.detailsText,children:["Get charged for what you use across compute time, storage, written data and data transfer,"," ",(0,u.tZ)("a",{href:us,target:"_blank",rel:"noopener",children:"see pricing"})]})]}),(0,u.BX)(v.G,{css:u9.detailsItem,children:[(0,u.tZ)(u2.fG,{}),(0,u.BX)(m.xv,{css:u9.detailsText,children:["Free usage allocations are included in Replit plans, and then billed at a per unit price,"," ",(0,u.tZ)("a",{href:us,target:"_blank",rel:"noopener",children:"see allocations"})]})]})]})]})]})},dt=function(e){var t,n,r=e.performPaneOperation,i=(0,eb.Z)(),o=(0,o2.Z)().showError,a=(0,Z.Z)().psql,l=(0,c._)((0,_.useState)([]),2),s=l[0],d=l[1],f=(t=(0,N._)({},sf,{variables:{input:{replId:i}},fetchPolicy:"no-cache",notifyOnNetworkStatusChange:!0,onCompleted:function(e){if("GetNeonDatabasesResult"===e.getNeonDatabases.__typename){d(e.getNeonDatabases.databases);return}o("Error: ".concat(e.getNeonDatabases.message))}}),ex.a(sm,t)),h=f.loading,p=f.refetch,m=c1(),g=(0,_.useCallback)((n=(0,tl._)(function(e){var t;return(0,tc.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),d([e]),[4,a.ensureNixPsqlPackageInstalled(!0)];case 1:return n.sent(),m({connectionString:e.connectionString,databaseName:e.databaseName}),[3,3];case 2:return t=n.sent(),o("Error: ".concat(t.message)),[3,3];case 3:return[2]}})}),function(e){return n.apply(this,arguments)}),[a,m,o]),y=(0,t0.Dv)(uY);return y?(0,u.tZ)(u0,{neonDatabases:[y],onDatabaseDeleted:p,onDatabaseUnfreezed:p,performPaneOperation:r}):h?(0,u.tZ)(v.G,{css:[w.l0.flex.row,w.l0.justify.center,w.l0.p(32)],children:(0,u.tZ)(b.Z,{})}):s.length?(0,u.tZ)(u0,{neonDatabases:s,onDatabaseDeleted:p,onDatabaseUnfreezed:p,performPaneOperation:r}):(0,u.tZ)(de,{onDatabaseCreated:g})},dn=d.Dy.Object({type:d.Dy.Literal("neon")}),dr={Content:function(e){var t=e.options;return(0,u.tZ)(dt,{performPaneOperation:t.performPaneOperation})},Icon:function(e){var t=e.size;return(0,u.tZ)(cX.Z,{size:t})},getTitle:function(){return"PostgreSQL"},decode:function(e){return f.B4.Decode(dn,e)}},di=n(69340),da=n(46298),dl=n(13033),dc=n(54556),ds=n(49580),du=n(70316),dd=n(93213),df=n(10118),dh=(0,g.X)({self:[w.l0.p(12),w.l0.colWithGap(16)],devUrl:[w.l0.rowWithGap(4),w.l0.align.center],url:[w.l0.color.accentPositiveStronger,w.l0.fontSize("small"),w.l0.focusRing,{"&:hover":[w.l0.cursor.pointer,w.l0.color.accentPositiveStrongest]}],secondaryUrl:[w.l0.color.foregroundDimmest,w.l0.fontSize("small"),w.l0.focusRing,{"&:hover":[w.l0.cursor.pointer,w.l0.color.accentPrimaryStrongest]}],section:[w.l0.colWithGap(4)],portHeader:[w.l0.rowWithGap(8),w.l0.align.baseline],openPort:[w.l0.color.accentPositiveStronger],localPortIcon:[w.l0.color.foregroundDefault,w.l0.px(4),{flex:"0 0 auto",marginLeft:"auto"}],internalMessage:[w.l0.flex.shrink(1),{marginLeft:"auto",span:w.l0.color.foregroundDimmest}],portStatus:[w.l0.py(0),w.l0.px(4)],newPort:[w.l0.color.foregroundDefault,w.l0.rowWithGap(4),w.l0.align.center,w.l0.my(1),w.l0.borderRadius(16),w.l0.height(20)],externalPortButton:[{"&":[w.l0.height(20),w.l0.borderRadius(16),w.l0.color.foregroundDefault]}],externalPortPopup:[{"&":[w.l0.height(20),w.l0.p(6),w.l0.borderRadius(16),w.l0.color.foregroundDefault],"& > span":[w.l0.fontSize(12)],"& > svg":[w.l0.mr(4)]}],textButton:[w.l0.cursor.pointer,w.l0.reset.button,w.l0.color.accentPrimaryStronger,w.l0.focusRing,w.l0.hover(w.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],newPortInput:[w.l0.height(20),w.l0.my(1)],newPortClose:w.l0.mr(4),portActionItem:[w.l0.fontSize(w.TV.fontSizeDefault),w.l0.viewStyle,w.l0.height(32),w.l0.px(16),w.l0.py(8),w.l0.flex.row,w.l0.align.center,w.l0.color.foregroundDefault,w.l0.backgroundColor.backgroundDefault,ne.gU.listItem,{":not([disabled])":{":hover":{backgroundColor:w.TV.backgroundHigher}}}]});function dp(e){var t,n,r,i=e.localPort,o=e.externalPort,a=e.isLocalhost,l=e.onPortChange,c=(0,Z.Z)().ports.updateDotReplitPortsMapping,s=(t=(0,Z.Z)().ports,n=(0,da.Z)(t.portsState),r=new Set(null==n?void 0:n.map(function(e){var t;return null!==(t=(0,du.OD)(e.configuration))&&void 0!==t&&t}).filter(Boolean)),Array.from(du.UK).sort(function(e,t){return e-t}).map(function(e){return{isAvailable:!r.has(e),externalPort:e}}));return(0,u.tZ)(v.G,{css:w.l0.flex.row,children:void 0!==o&&0!==o?(0,u.tZ)(X.zx,{css:dh.externalPortButton,iconRight:(0,u.tZ)(nJ.Z,{}),text:":".concat(o),size:"small",onClick:function(){i&&(c(i,void 0,a),null==l||l())}}):(0,u.tZ)(dl.ZE,{cssProps:[dh.externalPortPopup],label:"Set external port",onAction:function(e){if(i){var t=s.find(function(t){return String(t.externalPort)===e});t&&t.isAvailable&&(c(i,t.externalPort,a),null==l||l())}},children:s.map(function(e){var t=e.isAvailable,n=e.externalPort;return(0,u.tZ)(dl.ck,{"aria-label":String(n),children:(0,u.BX)(v.G,{css:t?w.l0.color.foregroundDefault:w.l0.color.foregroundDimmest,children:[":",n]})},String(n))})})})}function dm(e){var t=e.portState,n=null;switch(t.configuration.type){case du.DL.MISCONFIGURED:n=(0,u.tZ)(ti.u,{tooltip:"Port misconfigured",delay:"default",children:(0,u.tZ)(nq.Z,{})});break;case du.DL.CONFIG_MISSING:n=(0,u.tZ)(ti.u,{tooltip:"Configuration missing",delay:"default",children:(0,u.tZ)(nq.Z,{})});break;case du.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:n=(0,u.tZ)(nq.Z,{});break;case du.DL.FORWARDED:n=(0,u.tZ)(W.Z,{});case du.DL.INTERNAL_ONLY:}return(0,u.tZ)("span",{css:dh.localPortIcon,children:n})}function dv(e){var t=e.portState,n=e.width,r=(0,du.VZ)(t.configuration)?"localhost":"0.0.0.0";return(0,u.BX)(dd.sg,{width:n||130,children:[(0,u.BX)(m.xv,{css:t.isOpen&&dh.openPort,children:[r,":",t.configuration.localPort]}),(0,u.tZ)(dm,{portState:t})]})}function dg(e){var t=e.portState,n=e.openWebview,r=e.openVncOutput,i=e.width;if(t.configuration.type===du.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE)return(0,u.tZ)(dd.sg,{width:i||180,children:(0,u.tZ)(ru.E,{css:dh.portStatus,icon:(0,u.tZ)(nq.Z,{}),text:"No ports available"})});var o=!!n&&t.isOpen&&t.configuration.type===du.DL.FORWARDED,a=!!r&&t.configuration.isVnc;return(0,u.BX)(dd.sg,{width:i||180,children:[t.configuration.isVnc?(0,u.tZ)(ru.E,{css:dh.portStatus,icon:(0,u.tZ)(li.Z,{}),text:"VNC Ports do not require external port"}):(0,u.tZ)(dp,{localPort:t.configuration.localPort,externalPort:(0,du.OD)(t.configuration),isLocalhost:(0,du.VZ)(t.configuration)}),o?(0,u.tZ)(h.hU,{alt:"Open in Webview",onClick:n,css:w.l0.color.foregroundDefault,children:(0,u.tZ)(dc.Z,{})}):null,a?(0,u.tZ)(h.hU,{alt:"View VNC output",onClick:r,css:w.l0.color.foregroundDefault,children:(0,u.tZ)(dc.Z,{})}):null]})}function dy(e){var t,n=e.portState;return n.isOpen?(0,u.BX)(u.HY,{children:[(0,u.tZ)(dd.sg,{width:100,children:(t=n.processInfo.cmdline[0].split("/"))[t.length-1]}),(0,u.tZ)(dd.sg,{width:100,children:n.processInfo.pid})]}):(0,u.tZ)(dd.sg,{width:100})}function db(e){var t=e.portState,n=e.onAction,r=[{label:"Open external link",key:"EXTERNAL_LINK",icon:(0,u.tZ)(rv.Z,{})},{label:"Remove port config",key:"REMOVE",icon:(0,u.tZ)(c4.Z,{})}];return t.configuration.isVnc?r.unshift({label:"View VNC output",key:"OPEN_VNC_OUTPUT",icon:(0,u.tZ)(dc.Z,{})}):r.unshift({label:"Open webview",key:"OPEN_WEBVIEW",icon:(0,u.tZ)(dc.Z,{})}),(0,u.tZ)(dd.sg,{width:26,last:!0,children:(0,u.tZ)(dl.ZE,{cssProps:[w.l0.height(22),w.l0.width(22),w.l0.color.foregroundDefault,{background:"transparent"}],menuCssProps:[{li:[w.l0.p(0)],"li > div":[w.l0.pl(6),w.l0.rowWithGap(4),w.l0.align.center]}],items:r,icon:(0,u.tZ)(ds.Z,{}),onAction:function(e){switch(e){case"OPEN_WEBVIEW":case"OPEN_VNC_OUTPUT":case"EXTERNAL_LINK":case"REMOVE":n({type:e,payload:{portState:t}})}},children:r.map(function(e){return(0,u.tZ)(dl.ck,{children:(0,u.BX)(v.G,{css:dh.portActionItem,children:[e.icon?e.icon:(0,u.tZ)(v.G,{css:[w.l0.width(16)]}),(0,u.tZ)(m.xv,{multiline:!1,children:e.label})]})},e.key)})})})}function dw(e){var t=e.portState,n=e.portAction;return(0,u.BX)(dd.X2,{children:[(0,u.tZ)(dv,{portState:t}),(0,u.tZ)(dg,{portState:t,openWebview:function(){n({type:"OPEN_WEBVIEW",payload:{portState:t}})},openVncOutput:function(){n({type:"OPEN_VNC_OUTPUT",payload:{portState:t}})}}),(0,u.tZ)(dy,{portState:t}),(0,u.tZ)(db,{portState:t,onAction:n})]},t.configuration.localPort)}(gq=yn||(yn={})).OPEN_WEBVIEW="OPEN_WEBVIEW",gq.OPEN_VNC_OUTPUT="OPEN_VNC_OUTPUT",gq.EXTERNAL_LINK="EXTERNAL_LINK",gq.REMOVE="REMOVE";var dZ=function(e){var t=e.text,n=e.onClick;return(0,u.tZ)("button",{css:dh.textButton,onClick:n,children:t})};function dx(e){var t,n=e.openDotReplit,r=(0,c._)((0,_.useState)(!1),2),i=r[0],o=r[1],a=(0,c._)((0,_.useState)(),2),l=a[0],s=a[1],d=null===(t=(0,Z.Z)().ports.portsState.current)||void 0===t?void 0:t.some(function(e){return e.configuration.localPort===l});return i?(0,u.BX)(dd.X2,{children:[(0,u.BX)(dd.sg,{width:130,children:[(0,u.tZ)(h.hU,{css:dh.newPortClose,alt:"Close",onClick:function(){return o(!1)},size:18,children:(0,u.tZ)(nJ.Z,{})}),(0,u.tZ)(U.II,{css:dh.newPortInput,value:(null==l?void 0:l.toString())||"",onChange:function(e){return s(e.target.value?parseInt(e.target.value,10):void 0)}})]}),(0,u.tZ)(dd.sg,{children:d?(0,u.tZ)(ru.E,{css:dh.portStatus,colorway:"warning",text:"Local port already exists"}):(0,u.tZ)(dp,{localPort:l,isLocalhost:!1,onPortChange:function(){return o(!1)}})})]}):(0,u.BX)(dd.X2,{children:[(0,u.tZ)(dd.sg,{width:130,children:(0,u.tZ)(X.zx,{css:dh.newPort,iconLeft:(0,u.tZ)(ni.Z,{size:12}),text:"New port",size:"small",onClick:function(){return o(!0)}})}),(0,u.tZ)(dd.sg,{children:(0,u.BX)(m.xv,{variant:"small",children:["This port config is saved in the"," ",(0,u.tZ)(dZ,{text:".replit file",onClick:n}),"."," "]})})]})}function dC(e){var t,n=e.openDotReplit,r=e.openWebview,i=e.openVncOutput,o=(0,eb.Z)(),a=(0,df.J_)(o),l=(0,o2.Z)().showError,c=(0,Z.Z)().ports,s=c.portsState,d=c.removeDotReplitPortsMapping,f=function(e){switch(e.type){case"OPEN_WEBVIEW":r(e.payload.portState.configuration.localPort);break;case"OPEN_VNC_OUTPUT":i();break;case"EXTERNAL_LINK":var t=(0,du.OD)(e.payload.portState.configuration);if(!(null==a?void 0:a.presentationUrl)){l("URL not available.");return}var n=(0,df.hw)(null==a?void 0:a.presentationUrl,t).toString();window.open(n,"_blank");break;case"REMOVE":d(e.payload.portState.configuration.localPort,(0,du.OD)(e.payload.portState.configuration))}};return(0,u.BX)(v.G,{css:dh.self,children:[(null==a?void 0:a.presentationUrl)?(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{css:dh.section,children:[(0,u.tZ)(m.xv,{children:"Dev URL:"}),(0,u.BX)(v.G,{css:dh.devUrl,children:[(0,u.tZ)(sT(),{legacyBehavior:!0,href:a.presentationUrl,passHref:!0,children:(0,u.tZ)("a",{css:dh.url,target:"_blank",children:a.presentationUrl})}),(0,u.tZ)(eK.m,{textToCopy:a.presentationUrl})]})]}),(0,u.tZ)(t7.R,{})]}):null,(0,u.BX)(v.G,{css:dh.section,children:[(0,u.BX)(v.G,{css:dh.portHeader,children:[(0,u.tZ)(m.xv,{children:"Ports"}),(0,u.tZ)(sT(),{legacyBehavior:!0,href:"https://docs.replit.com/programming-ide/workspace-features/webview",passHref:!0,children:(0,u.tZ)("a",{css:dh.secondaryUrl,target:"_blank",children:"Learn more"})})]}),(0,u.BX)(dd.iA,{children:[(0,u.BX)(dd.X2,{children:[(0,u.tZ)(dd.sg,{header:!0,width:130,children:"Internal Port"}),(0,u.tZ)(dd.sg,{header:!0,width:180,children:"External Port"}),(0,u.tZ)(dd.sg,{header:!0,width:100,children:"Name"}),(0,u.tZ)(dd.sg,{header:!0,width:100,children:"Pid"})]}),s.current&&(null===(t=s.current)||void 0===t?void 0:t.length)>0?s.current.map(function(e){return(0,u.tZ)(dw,{portState:e,portAction:f},e.configuration.localPort)}):null,(0,u.tZ)(dx,{openDotReplit:n})]})]})]})}var d_=d.Dy.Object({type:d.Dy.Literal("networking")}),dS={Content:function(e){var t,n=e.options.performPaneOperation,r=(0,o2.Z)().showError,i=(0,Z.Z)().fs;return(0,u.tZ)(dC,{openDotReplit:(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:return[4,i.stat(".replit")];case 1:if(!e.sent().exists)return r("Could not find .replit configuration file."),[2];return n({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:".replit"}}}),[2]}})}),openWebview:(t=(0,tl._)(function(e){return(0,tc.Jh)(this,function(t){return n({operation:"open",pane:{type:"webview",data:e?{portType:"local",port:e}:void 0},secondary:!0}),[2]})}),function(e){return t.apply(this,arguments)}),openVncOutput:(0,tl._)(function(){return(0,tc.Jh)(this,function(e){return n({operation:"open",pane:{type:"vnc"},secondary:!0}),[2]})})})},Icon:function(e){var t=e.size;return(0,u.tZ)(di.Z,{size:t})},getTitle:function(){return"Networking"},decode:function(e){return f.B4.Decode(d_,e)}},dk=n(80654),dE=n(26734),dT=n(37841),dR=n(91664),dI=d.Dy.Object({id:d.Dy.String(),name:d.Dy.String(),contentType:d.Dy.Optional(d.Dy.String()),timeCreated:d.Dy.String(),size:d.Dy.String()}),dD=d.Dy.Array(dI),dB={FILE:"file"},dG=n(18770);function dA(e){return"".concat(e.status," - ").concat(e.statusText)}function dP(){return(dP=(0,tl._)(function(e){var t,n,r,i;return(0,tc.Jh)(this,function(o){switch(o.label){case 0:return t=e.bucketExternalId,[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o"),{method:"GET",credentials:"same-origin"})];case 1:if(!(n=o.sent()).ok)throw Error("Failed to get objects: ".concat(dA(n)));return[4,n.json()];case 2:if(i=null!==(r=o.sent().items)&&void 0!==r?r:[],!f.B4.Check(dD,i))throw(0,dG.ZA)(dD,i);return[2,i]}})})).apply(this,arguments)}function dN(e){return dL.apply(this,arguments)}function dL(){return(dL=(0,tl._)(function(e){var t,n,r,i;return(0,tc.Jh)(this,function(o){switch(t=e.bucketExternalId,n=e.objectName,r=e.file,void 0===(i=e.uploadMethod)?1:i){case 1:return[2,function(e){return dO.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})];case 2:return[2,function(e){return dF.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})]}return[2]})})).apply(this,arguments)}function dO(){return(dO=(0,tl._)(function(e){var t,n,r,i,o;return(0,tc.Jh)(this,function(a){switch(a.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,i=encodeURIComponent(n),[4,fetch("/object-storage/upload/storage/v1/b/".concat(t,"/o?uploadType=media&name=").concat(i),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},body:r})];case 1:if(!(o=a.sent()).ok)throw Error("Failed to upload object: ".concat(dA(o)));return[2]}})})).apply(this,arguments)}function dU(){return(dU=(0,tl._)(function(e){var t,n,r,i,o,a;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,[4,fetch("/object-storage/".concat(t,"/").concat(n,"?uploads"),{method:"POST",credentials:"same-origin",headers:{"Content-Length":"0","Content-Type":r.type,"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(i=l.sent()).ok)throw Error("Failed to initiate multipart upload: ".concat(dA(i)));return[4,i.text()];case 2:if(o=l.sent(),!(a=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("UploadId")[0].textContent))throw Error("Failed to initiate multipart upload: missing UploadId");return[2,a]}})})).apply(this,arguments)}function dM(){return(dM=(0,tl._)(function(e){var t,n,r,i,o,a,l;return(0,tc.Jh)(this,function(c){switch(c.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.partNumber,i=e.uploadId,o=e.chunk,[4,fetch("/object-storage/".concat(t,"/").concat(n,"?partNumber=").concat(r,"&uploadId=").concat(i),{method:"PUT",credentials:"same-origin",headers:{"Content-Length":o.length.toString(),"Content-Type":"text/xml","X-Requested-With":"XMLHttpRequest"},body:o})];case 1:if(!(a=c.sent()).ok)throw Error("Failed to upload chunk: ".concat(dA(a)));if(!(l=a.headers.get("x-upload-etag")))throw Error("Failed to upload chunk: missing x-upload-etag");return[2,{partNumber:r,etag:l}]}})})).apply(this,arguments)}function dX(){return(dX=(0,tl._)(function(e){var t,n,r,i,o,a,l,c;return(0,tc.Jh)(this,function(s){switch(s.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.uploadId,i=e.parts,a=(o=document.implementation.createDocument("","",null)).createElement("CompleteMultipartUpload"),i.forEach(function(e){var t=o.createElement("Part"),n=o.createElement("PartNumber");n.textContent=e.partNumber.toString(),t.appendChild(n);var r=o.createElement("ETag");r.textContent=e.etag,t.appendChild(r),a.appendChild(t)}),o.appendChild(a),l=new XMLSerializer().serializeToString(o),[4,fetch("/object-storage/".concat(t,"/").concat(n,"?uploadId=").concat(r),{method:"POST",credentials:"same-origin",headers:{"Content-Length":l.length.toString(),"Content-Type":"application/xml","X-Requested-With":"XMLHttpRequest"},body:l})];case 1:if(!(c=s.sent()).ok)throw Error("Failed to complete multipart upload: ".concat(dA(c)));return[2]}})})).apply(this,arguments)}function dF(){return(dF=(0,tl._)(function(e){var t,n,r,i,o,a,l,c;return(0,tc.Jh)(this,function(s){switch(s.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,[4,(0,dR.pV)(r)];case 1:return i=s.sent(),a=(o=tI.Z.from(i)).toBuffer(),[4,function(e){return dU.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})];case 2:return l=s.sent(),[4,Promise.all(Array(Math.ceil(o.length/8388608)).fill(0).map(function(e,r){var i=a.subarray(8388608*r,(r+1)*8388608);return function(e){return dM.apply(this,arguments)}({bucketExternalId:t,objectName:n,partNumber:r+1,uploadId:l,chunk:i})}))];case 3:return c=s.sent(),[4,function(e){return dX.apply(this,arguments)}({bucketExternalId:t,objectName:n,uploadId:l,parts:c})];case 4:return s.sent(),[2]}})})).apply(this,arguments)}function dW(e){return dH.apply(this,arguments)}function dH(){return(dH=(0,tl._)(function(e){var t,n,r;return(0,tc.Jh)(this,function(i){switch(i.label){case 0:return t=e.bucketExternalId,n=e.objectName,[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o/").concat(n.replaceAll("/","%2F")),{method:"DELETE",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(r=i.sent()).ok)throw Error("Failed to delete object: ".concat(dA(r)));return[2]}})})).apply(this,arguments)}function dV(){return(dV=(0,tl._)(function(e){var t,n,r,i,o,a,l;return(0,tc.Jh)(this,function(c){switch(c.label){case 0:return t=e.sourceBucketExternalId,n=e.destinationBucketExternalId,r=e.sourceObjectName,i=e.destinationObjectName,o=encodeURIComponent(r),a=encodeURIComponent(i),[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o/").concat(o,"/copyTo/b/").concat(n,"/o/").concat(a),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(l=c.sent()).ok)throw Error("Failed to copy object: ".concat(dA(l)));return[2]}})})).apply(this,arguments)}(gJ=yr||(yr={}))[gJ.Direct=1]="Direct",gJ[gJ.Multipart=2]="Multipart";var dz=(0,t1.cn)(new Map),dj=(0,t1.cn)(null,function(e,t,n){var r=n.bucketExternalId,i=n.objects;t(dz,function(e){return(0,uN.Uy)(e,function(e){e.set(r,i)})})}),dq=(0,t1.cn)(null,function(e,t,n){var r=n.bucketExternalId,i=n.name,o=n.contentType,a=n.size,l={id:"optimistic-"+tB()(),name:i,contentType:o,size:a,timeCreated:new Date().toISOString(),optimisticallyInserted:!0};t(dz,function(e){return(0,uN.Uy)(e,function(e){var t=e.get(r);if(!t){e.set(r,[l]);return}var n=t.find(function(e){return e.name===i});n?Object.assign(n,l):t.push(l)})})}),dJ=(0,t1.cn)(null,function(e,t,n){var r=n.name,i=n.bucketExternalId,o=n.isPendingDeletion,a=n.isOptimisticallyInserted;t(dz,function(e){return(0,uN.Uy)(e,function(e){var t=e.get(i);if(!t)throw Error("Bucket not found when updating object");var n=t.findIndex(function(e){return e.name===r});if(-1===n)throw Error("Bucket not found when updating object");void 0!==o&&(t[n].isPendingDeletion=o),void 0!==a&&(t[n].optimisticallyInserted=a)})})}),dY=(0,t1.cn)(null,function(e,t,n){var r=n.name,i=n.bucketExternalId;t(dz,function(e){return(0,uN.Uy)(e,function(e){var t=e.get(i);if(!t)throw Error("Bucket not found when removing object");e.set(i,t.filter(function(e){return e.name!==r}))})})}),dK=new Intl.Collator;function d$(e){return e.sort(function(e,t){return dK.compare(e.displayName,t.displayName)})}function dQ(e){var t,n=e.bucketExternalId;return null!==(t=(0,t0.Dv)(dz).get(n))&&void 0!==t?t:[]}function d0(){var e=(0,c._)((0,_.useState)(!1),2),t=e[0],n=e[1],r=(0,t0.b9)(dj);function i(){return(i=(0,tl._)(function(e){var t,i,o,a;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:t=e.bucketExternalId,i=e.onError,n(!0),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,function(e){return dP.apply(this,arguments)}({bucketExternalId:t})];case 2:return o=l.sent(),r({bucketExternalId:t,objects:o}),[3,4];case 3:return a=l.sent(),null==i||i(a),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,fetchObjects:function(e){return i.apply(this,arguments)}}}function d1(){var e=(0,c._)((0,_.useState)(!1),2),t=e[0],n=e[1],r=(0,t0.b9)(dq),i=(0,t0.b9)(dY),o=(0,t0.b9)(dJ);function a(){return(a=(0,tl._)(function(e){var t,a,l,c,s;return(0,tc.Jh)(this,function(u){switch(u.label){case 0:t=e.bucketExternalId,a=e.files,l=e.targetFolder,c=e.onError,n(!0),u.label=1;case 1:var d;return u.trys.push([1,3,,4]),[4,Promise.all(a.map((d=(0,tl._)(function(e){var n,a;return(0,tc.Jh)(this,function(c){switch(c.label){case 0:n=l+(e.webkitRelativePath||e.dirPath||e.name),r({bucketExternalId:t,name:n,contentType:e.type,size:null==e?void 0:e.size.toString()}),a=e.size>31457280?yr.Multipart:yr.Direct,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,dN({bucketExternalId:t,objectName:n,file:e,uploadMethod:a})];case 2:return c.sent(),o({bucketExternalId:t,name:n,isOptimisticallyInserted:!1}),[3,4];case 3:return c.sent(),i({bucketExternalId:t,name:n}),[3,4];case 4:return[2]}})}),function(e){return d.apply(this,arguments)})))];case 2:return u.sent(),[3,4];case 3:return s=u.sent(),null==c||c(s),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{uploadFiles:function(e){return a.apply(this,arguments)},loading:t}}function d2(){var e=(0,ew._)(["\n  fragment ObjectStorageBucket on Bucket {\n    id\n    externalId\n    name\n  }\n"]);return d2=function(){return e},e}function d3(){var e=(0,ew._)(["\n  query ObjectStorageReplBucketStatus($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        defaultBucket {\n          ... on Bucket {\n            ...ObjectStorageBucket\n          }\n          ... on Error {\n            message\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n          ... on UserError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return d3=function(){return e},e}var d4={},d8=(0,eZ.Ps)(d2()),d6=(0,eZ.Ps)(d3(),d8),d5=n(45077),d9=n(41753),d7=n(23815),fe=n(320),ft=n(11894),fn=n(90188),fr=n(27482),fi=[{icon:(0,u.tZ)(d7.Z,{}),title:"JavaScript",value:"js"},{icon:(0,u.tZ)(fe.Z,{}),title:"Python",value:"py"},{icon:(0,u.tZ)(oL.Z,{}),title:"All other languages",value:"other"}],fo={js:{packagerConfigLanguage:"nodejs",packageName:"@replit/object-storage",commands:[{label:"Import Object Store Library",code:"import { Client } from '@replit/object-storage'\nconst client = new Client()"},{label:"Get an object",code:"client.downloadAsText('file.json')"},{label:"List the objects in the bucket",code:"client.list()"},{label:"Add an object to the bucket",code:"client.uploadFromText('file.json', data)"},{label:"Delete an object from the bucket",code:"client.delete('file.json')"}]},py:{packagerConfigLanguage:"python3",packageName:"replit-object-storage",commands:[{label:"Import Object Store Library",code:"from replit.object_storage import Client\nclient = Client()"},{label:"Get an object",code:'client.download_as_text("file.json")'},{label:"List the objects in the bucket",code:"client.list()"},{label:"Add an object to the bucket",code:'client.upload_from_text("file.json", data)'},{label:"Delete an object from the bucket",code:'client.delete("file.json")'}]},other:{description:(0,u.tZ)(c3.ZP,{components:{code:function(e){return(0,u.tZ)(d9.Z,(0,N._)({language:"json"},e))}},children:'\nYou can use the [Google Cloud client libraries](https://cloud.google.com/storage/docs/reference/libraries#use) to interact with your bucket in any of the supported languages.\n\nIf there isn\'t a client library for your language of choice, you can use the [JSON API](https://cloud.google.com/storage/docs/json_api).\n\nWith both the client libraries and the JSON API, only blob/file/object APIs are authorized.\n\n## Authorization\n\n### Client libraries\n\n1. Create a JSON file with these contents\n\n```\n{\n  "type": "external_account",\n  "audience": "replit",\n  "credential_source": {\n    "url": "http://127.0.0.1:1106/credential"\n  },\n  "token_url": "http://127.0.0.1:1106/token"\n}\n```\n\n2. Set the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to the path of your JSON file\n3. Set the `GCLOUD_PROJECT` environment variable to `""`\n\n### JSON API\n\n1. Issue a `POST` request to `http://127.0.0.1:1106/token`\n\n## Bucket Selection\nUsing Google Cloud APIs or libraries directly requires a bucket name parameter to be specified on all requests. This field is interchangeable with your bucket\'s ID within Replit Object Storage.\n\nTo get the ID of the default bucket for your Repl or Deployment, issue a `GET` request to `http://127.0.0.1:1106/object-storage/default-bucket`\n'}),commands:[]}},fa=(0,g.X)({wrapper:[w.l0.colWithGap(16)],section:[w.l0.colWithGap(6)],selectWrapper:[w.l0.rowWithGap(0)],statusBanner:[w.l0.maxWidth("fit-content")]});function fl(e){var t=e.onError,n=(0,c._)((0,_.useState)("js"),2),r=n[0],i=n[1],o=(0,o2.Z)().showConfirm,a=(0,Z.Z)().packager,l=(0,fn.I)().configs,s=(0,fr.z9)(),d=(0,c._)((0,_.useState)(!1),2),f=d[0],h=d[1],p=l.find(function(e){return e.language===fo[r].packagerConfigLanguage}),g=!!(fo[r].packagerConfigLanguage&&fo[r].packageName&&p),y=!!(p&&s(p.id).some(function(e){return e.name===fo[r].packageName})),b=(0,c._)((0,_.useState)(!1),2),w=b[0],x=b[1];function C(){return(C=(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:if(!g)return t(Error("Package not available for selected language")),[2];return h(!0),[4,a.addPackages([{name:fo[r].packageName}])];case 1:return e.sent()?(o("Installed ".concat(fo[r].packageName," package")),x(!0)):t(Error("Failed to install ".concat(fo[r].packageName," package"))),[2]}})})).apply(this,arguments)}var S=fi.find(function(e){return e.value===r}),k=w||y;return(0,_.useLayoutEffect)(function(){var e=!0,t=!1,n=void 0;try{for(var r,o=fi[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=function(){var e=r.value;if(fo[e.value].packagerConfigLanguage&&l.find(function(t){return t.language===fo[e.value].packagerConfigLanguage}))return i(e.value),{v:void 0}}();if("object"===(0,d5._)(a))return a.v}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}i("other")},[]),(0,u.BX)(v.G,{css:fa.wrapper,children:[(0,u.tZ)(v.G,{css:fa.selectWrapper,children:(0,u.tZ)(ft.P,{items:fi,selectedItem:S,initialSelectedItem:fi[0],onChange:function(e){x(!1),i(e.value)}})}),fo[r].description?fo[r].description:null,!k&&g?(0,u.tZ)(X.zx,{onClick:function(){return C.apply(this,arguments)},text:"Install ".concat(fo[r].packageName," package"),colorway:"primary",loading:f}):null,S&&k?(0,u.tZ)(ru.E,{text:"Package installed",colorway:"positive",css:fa.statusBanner}):null,fo[r].commands.map(function(e){return(0,u.BX)(v.G,{css:fa.section,children:[(0,u.tZ)(m.xv,{children:e.label}),(0,u.tZ)(c3.ZP,{components:{code:function(e){return(0,u.tZ)(d9.Z,(0,N._)({language:r},e))}},children:"```\n".concat(e.code)})]},e.label)})]})}var fc=n(12933);function fs(){var e=(0,ew._)(["\n  mutation ObjectStoragePaneIntroCreateBucket($input: CreateBucketInput!) {\n    createBucket(input: $input) {\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return fs=function(){return e},e}var fu={},fd=(0,eZ.Ps)(fs(),d8),ff=[{imageUrl:"/public/images/object-storage/objects-in-bucket.svg",text:"Store immutable files, like photos and documents, in writable buckets (databases for unstructured files).",altText:"An image and a file going into a bucket"},{imageUrl:"/public/images/object-storage/upload-to-cloud.svg",text:"Deploy apps that handle variable sets of files added by your users, like an upload-based photo gallery.",altText:"Images being uploaded to a cloud"},{imageUrl:"/public/images/object-storage/share-same-bucket.svg",text:"Buckets are automatically shared between development and production, so you can easily pass files to your users directly from the Workspace.",altText:"Development icon and deployment icon sharing a bucket"}],fh=(0,g.X)({wrapper:[w.l0.center,w.l0.pt(64),w.l0.px(8)],content:[w.l0.colWithGap(24),w.l0.center,w.l0.maxWidth(400),w.l0.textAlign.center],row:[w.l0.rowWithGap(16)],rowText:[w.l0.flex.growAndShrink(1),w.l0.textAlign.left]});function fp(e){var t,n=e.onBucketCreated,r=e.onError,i=(0,eb.Z)(),o=(0,c._)((t=(0,N._)({},fu,{variables:{input:{replId:i}}}),aZ.D(fd,t)),2),a=o[0],l=o[1].loading;return(0,u.tZ)(v.G,{css:fh.wrapper,children:(0,u.BX)(v.G,{css:fh.content,children:[(0,u.tZ)(m.xv,{variant:"subheadBig",children:"Persistent shared file storage"}),ff.map(function(e,t){return(0,u.BX)(v.G,{css:fh.row,children:[(0,u.tZ)(v.G,{children:(0,u.tZ)(fc.Z,{src:e.imageUrl,width:44,height:44,alt:e.altText})}),(0,u.tZ)(m.xv,{css:fh.rowText,children:e.text})]},t)}),(0,u.tZ)(X.zx,{text:l?"Creating bucket...":"Create a bucket",onClick:function(){a({onCompleted:function(e){var t="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!t){r(Error("Failed to create bucket"));return}n(t)},onError:r})},colorway:"primary",iconLeft:l?(0,u.tZ)(b.Z,{}):void 0,disabled:l})]})})}var fm=n(80952),fv=n(19653),fg=n(33298),fy=n(65078),fb=n(75334),fw=n(35116),fZ=n(34357),fx=n(96213),fC=n(55642),f_=n(36084),fS=n(47968),fk=n(20314),fE=n(25978),fT=n(6191),fR=function(e){var t=e.folderPath,n=e.onDropNativeFiles,r=(0,c._)((0,fE.L)(function(){return{accept:[dB.FILE,fT.FILE],drop:function(e){return"files"in e&&n(e.files),{name:t}},collect:function(e){return{isOver:!!e.isOver()}}}}),2);return{isDraggedOver:r[0].isOver,drop:r[1]}},fI=function(e){var t=e.currentFolder,n=e.onDropNativeFiles,r=(0,c._)((0,fE.L)(function(){return{accept:[fT.FILE],drop:function(e,t){t.didDrop()||e.dirContent.then(function(e){n(e)})},collect:function(e){return{isOverCurrent:e.isOver({shallow:!0})}}}},[t]),2);return{isOverCurrent:r[0].isOverCurrent,drop:r[1]}},fD=n(75588),fB="1px dashed ".concat(w.TV.accentPrimaryDefault),fG=w.nC.min(500),fA=(0,fg.$)(["bodyOutline"]),fP=fA.cssVars,fN=fA.styleTokens,fL=(0,g.X)({wrapper:[w.l0.flex.grow(1)],buttons:[w.l0.colWithGap(8),(0,eB._)({},fG,[w.l0.rowWithGap(8)])],primaryButtons:[w.l0.rowWithGap(8)],secondaryButtons:[w.l0.rowWithGap(8),w.l0.justify.spaceBetween,w.l0.flex.grow(1)],tableWrapper:[w.l0.flex.growAndShrink(1),w.l0.borderRadius(4),{outline:fN.bodyOutline}],tableHeaderMainColumn:[w.l0.textAlign.left,w.l0.p(4),w.l0.width("50%")],tableHeader:[w.l0.textAlign.left,w.l0.p(4),w.l0.width("25%")]});function fO(e){var t=e.bucketExternalId,n=e.onOpenCommandsTab,r=e.onError,i=dQ({bucketExternalId:t}),o=(0,c._)((0,_.useState)(""),2),a=o[0],l=o[1],d=function(e){var t=e.objects,n=e.currentFolder,r=[],i=new Map,o=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;if(d.name.startsWith(n)&&d.name!==n){var f=d.name.slice(n.length);if(!f.includes("/")){r.push((0,L._)((0,N._)({},d),{isFolder:!1,displayName:f}));continue}var h=f.split("/")[0];if(i.get(h)||i.set(h,{isFolder:!0,name:n+h+"/",displayName:h}),d.name===n+h+"/"){var p=i.get(h);if(!p)throw Error("Folder should have been added to map");p.optimisticallyInserted=d.optimisticallyInserted,p.isPendingDeletion=d.isPendingDeletion}}}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var m=d$(Array.from(i.values())),v=d$(r);return(0,s._)(m).concat((0,s._)(v))}({currentFolder:a,objects:i}),f=d0(),h=f.fetchObjects,p=f.loading,m=function(){var e=(0,c._)((0,_.useState)(!1),2),t=e[0],n=e[1],r=(0,t0.b9)(dq),i=(0,t0.b9)(dJ),o=(0,t0.b9)(dY);function a(){return(a=(0,tl._)(function(e){var t,a,l,c,s,u,d;return(0,tc.Jh)(this,function(f){switch(f.label){case 0:if(t=e.bucketExternalId,a=e.folderName,l=e.currentFolder,c=e.onError,a.includes("/"))return null==c||c(Error("Folder name cannot contain a forward slash")),[2];n(!0),r({bucketExternalId:t,name:s=l+a+"/",contentType:"text/plain",size:"0"}),u=new File([""],a,{type:"text/plain"}),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,dN({bucketExternalId:t,objectName:s,file:u})];case 2:return f.sent(),i({bucketExternalId:t,name:s,isOptimisticallyInserted:!1}),[3,4];case 3:return d=f.sent(),null==c||c(d),o({bucketExternalId:t,name:s}),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{createFolder:function(e){return a.apply(this,arguments)},loading:t}}().createFolder,g=d1().uploadFiles,y=(0,_.useRef)(null),b=(0,_.useRef)(null),w=(0,c._)((0,_.useState)(!1),2),Z=w[0],x=w[1],C=(0,c._)((0,_.useState)(null),2),S=C[0],k=C[1],E=fI({currentFolder:a,onDropNativeFiles:function(e){g({bucketExternalId:t,files:e,targetFolder:a,onError:r})}}),T=E.isOverCurrent,R=E.drop;return(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{css:fL.wrapper,children:[(0,u.BX)(v.G,{css:fL.buttons,children:[(0,u.BX)(v.G,{css:fL.primaryButtons,children:[(0,u.tZ)(X.zx,{onClick:function(){y.current&&y.current.click()},text:"Upload files",colorway:"primary",iconLeft:(0,u.tZ)(fw.Z,{})}),(0,u.tZ)(X.zx,{onClick:function(){b.current&&b.current.click()},text:"Upload folder",colorway:"primary",iconLeft:(0,u.tZ)(fC.Z,{})})]}),(0,u.BX)(v.G,{css:fL.secondaryButtons,children:[(0,u.tZ)(X.zx,{onClick:function(){return x(!0)},text:"Create folder",iconLeft:(0,u.tZ)(fx.Z,{})}),(0,u.tZ)(X.zx,{onClick:function(){return h({bucketExternalId:t})},text:"Refresh",loading:p,iconLeft:(0,u.tZ)(nL.Z,{})})]})]}),(0,u.tZ)(fQ,{currentFolder:a,bucketExternalId:t,setCurrentFolder:l,onError:r}),(0,u.tZ)(v.G,{innerRef:R,css:fL.tableWrapper,style:(0,eB._)({},fP.bodyOutline,T?fB:void 0),children:i.length||Z?(0,u.BX)("table",{children:[(0,u.tZ)("thead",{children:(0,u.BX)("tr",{children:[(0,u.tZ)("th",{css:fL.tableHeaderMainColumn,children:"Name"}),(0,u.tZ)("th",{css:fL.tableHeader,children:"Added"}),(0,u.tZ)("th",{css:fL.tableHeader,children:"Size"})]})}),(0,u.BX)("tbody",{children:[Z?(0,u.tZ)(f2,{onCreateFolder:function(e){x(!1),m({bucketExternalId:t,folderName:e,currentFolder:a,onError:r})},onCanceled:function(){return x(!1)}}):null,d.map(function(e){return e.isFolder?(0,u.tZ)(fF,{item:e,setCurrentFolder:l,onDeleteClick:k,bucketExternalId:t,onError:r},e.name):(0,u.tZ)(fW,{item:e,bucketExternalId:t,onDeleteClick:k,onError:r},e.name)})]})]}):(0,u.tZ)(f6,{onOpenCommandsTab:n})}),(0,u.tZ)(fD.Q,{fileUploadInputRef:y,dirUploadInputRef:b,uploadFiles:function(e){return g({bucketExternalId:t,files:e.files,targetFolder:a,onError:r})}})]}),(0,u.tZ)(f4,{bucketExternalId:t,requestedDeleteItem:S,onRequestClose:function(){return k(null)},onError:r})]})}var fU=(0,fg.$)(["rowOutline","rowOpacity","rowTextDecoration","rowCursor"]),fM=fU.cssVars,fX=fU.styleTokens;function fF(e){var t,n=e.item,r=e.bucketExternalId,i=e.setCurrentFolder,o=e.onDeleteClick,a=e.onError,l=d1().uploadFiles,c=(0,o2.Z)().showConfirm,s=fR({folderPath:n.name,onDropNativeFiles:function(e){c('Uploading files to "'.concat(n.name,'"')),l({bucketExternalId:r,files:e,targetFolder:n.name,onError:a})}}),d=s.isDraggedOver,f=s.drop;return(0,u.tZ)(fj,{item:n,ref:f,onDeleteClick:function(){return o(n)},icon:(0,u.tZ)(fZ.Z,{}),timeCreatedCell:"-",sizeCell:"-",style:(t={},(0,eB._)(t,fM.rowOutline,d?fB:void 0),(0,eB._)(t,fM.rowCursor,"pointer"),t),onClick:function(){return i(n.name)},onKeyDown:function(e){"Enter"===e.key&&i(n.name)}})}function fW(e){var t,n,r,i,o,a=e.item,l=e.bucketExternalId,s=e.onDeleteClick,d=e.onError,f="/object-storage/storage/v1/b/".concat(l,"/o/").concat(a.name.replace("/","%2F"),"?alt=media"),p=!!(a.optimisticallyInserted||a.isPendingDeletion),m=function(){var e=(0,c._)((0,_.useState)(!1),2),t=e[0],n=e[1],r=(0,t0.b9)(dJ),i=(0,t0.b9)(dq),o=(0,t0.b9)(dY);function a(){return(a=(0,tl._)(function(e){var t,a,l,c,s,u,d;return(0,tc.Jh)(this,function(f){switch(f.label){case 0:t=e.bucketExternalId,a=e.object,l=e.destinationFolder,c=e.onError,s=e.onSuccess,n(!0),u=l+a.name.split("/").pop(),r({bucketExternalId:t,name:a.name,isPendingDeletion:!0}),i({bucketExternalId:t,name:u,contentType:a.contentType,size:a.size}),f.label=1;case 1:return f.trys.push([1,4,,5]),[4,function(e){return dV.apply(this,arguments)}({destinationBucketExternalId:t,sourceBucketExternalId:t,sourceObjectName:a.name,destinationObjectName:u})];case 2:return f.sent(),[4,dW({bucketExternalId:t,objectName:a.name})];case 3:return f.sent(),o({bucketExternalId:t,name:a.name}),r({bucketExternalId:t,name:u,isOptimisticallyInserted:!1}),null==s||s(),[3,5];case 4:return d=f.sent(),null==c||c(d),r({bucketExternalId:t,name:a.name,isPendingDeletion:!1}),o({bucketExternalId:t,name:u}),[3,5];case 5:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,moveObject:function(e){return a.apply(this,arguments)}}}().moveObject,v=(0,o2.Z)().showConfirm,g=(n=(t={item:a,disableDrag:p,onDropOverFolder:function(e){return m({bucketExternalId:l,object:a,destinationFolder:e,onSuccess:function(){v('Moved "'.concat(a.name,'" to "').concat(e,'"'))},onError:d})}}).item,r=t.disableDrag,i=t.onDropOverFolder,{isDragging:(o=(0,c._)((0,fk.c)(function(){return{type:dB.FILE,canDrag:!r,item:function(){return{name:n.name,type:dB.FILE}},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,t){var n=t.getDropResult();n&&n&&i(n.name)}}},[r]),2))[0].isDragging,drag:o[1]}),b=g.isDragging,Z=g.drag;return(0,u.tZ)(fj,{item:a,ref:Z,onDeleteClick:function(){return s(a)},icon:(0,u.tZ)(f3,{contentType:a.contentType}),timeCreatedCell:(0,u.tZ)(nr.EK,{date:a.timeCreated}),sizeCell:sD(Number(a.size),{isKib:!0,isKibNotation:!0}),style:(0,eB._)({},fM.rowOpacity,b?.5:void 0),additionalActionButtons:(0,u.tZ)(u.HY,{children:(0,u.tZ)(h.hU,{alt:"Download",css:fV.rowActionButton,children:(0,u.tZ)("a",{download:!0,href:f,css:w.l0.color.foregroundDefault,children:(0,u.tZ)(y.Z,{})})})})})}var fH=(0,g.X)({row:[w.l0.position.relative,w.l0.borderRadius(4),{outline:fX.rowOutline,outlineOffset:-1,opacity:fX.rowOpacity,cursor:fX.rowCursor,":nth-of-type(even)":{background:"color-mix(in srgb, ".concat(w.TV.backgroundDefault," 60%, ").concat(w.TV.backgroundRoot,")")},":hover":{background:w.TV.backgroundHigher},":hover #action-buttons":{display:"flex"},":focus":{outline:"2px solid ".concat(w.TV.accentPrimaryDefault)}}],text:[w.l0.flex.shrink(1)]}),fV=(0,g.X)({row:[fH.row],pendingRow:[fH.row,w.l0.color.foregroundDimmest],tableData:[w.l0.p(4),{":first-of-type":{borderTopLeftRadius:4,borderBottomLeftRadius:4},":last-of-type, :nth-last-of-type(2)":{borderTopRightRadius:4,borderBottomRightRadius:4}}],objectIconAndName:[w.l0.rowWithGap(8),w.l0.align.center],text:fH.text,strikeThroughText:[fH.text,{textDecoration:"line-through"}],actionButtonTableData:[w.l0.position.relative],rowActionButtonGroup:[w.l0.px(4),w.l0.position.absolute,w.l0.right(0),w.l0.top(0),w.l0.bottom(0),w.l0.rowWithGap(4),w.l0.align.center,w.l0.backgroundColor.backgroundHigher,{display:"none",borderTopRightRadius:4,borderBottomRightRadius:4}],rowActionButton:[ne.gU.filled],loadingTableData:[w.l0.position.relative],loadingIconWrapper:[w.l0.position.absolute,w.l0.right(4),w.l0.top(0),w.l0.bottom(0),w.l0.justify.center],loadingIcon:[{borderRadius:"50%"},w.l0.backgroundColor.backgroundDefault]}),fz=function(){var e=(0,c._)((0,_.useState)(!1),2),t=e[0],n=e[1],r=(0,c._)((0,_.useState)(null),2),i=r[0],o=r[1];return(0,_.useEffect)(function(){if(null!==i){var e=function(){n(i.offsetWidth<i.scrollWidth||i.offsetHeight<i.scrollHeight)};e();var t=new ResizeObserver(e);return t.observe(i),function(){return t.disconnect()}}},[i]),{attachObserver:o,isOverflowing:t}},fj=_.forwardRef(function(e,t){var n=e.item,r=e.onDeleteClick,i=e.icon,o=e.timeCreatedCell,a=e.sizeCell,l=e.style,c=e.onClick,s=e.onKeyDown,d=e.additionalActionButtons,f=n.isPendingDeletion?fV.strikeThroughText:fV.text,p=n.optimisticallyInserted||n.isPendingDeletion,g=fz(),y=g.attachObserver,Z=g.isOverflowing;return(0,u.BX)("tr",{ref:t,tabIndex:0,css:p?fV.pendingRow:fV.row,style:l,onClick:c,onKeyDown:s,children:[(0,u.tZ)("td",{css:fV.tableData,children:(0,u.tZ)(ti.u,{isDisabled:!Z,tooltip:n.displayName,children:(0,u.BX)(v.G,{css:fV.objectIconAndName,children:[i,(0,u.tZ)(m.xv,{multiline:!0,maxLines:1,css:f,ref:y,children:n.displayName})]})})}),(0,u.tZ)("td",{css:fV.tableData,children:(0,u.tZ)(m.xv,{multiline:!0,maxLines:1,css:f,children:o})}),(0,u.tZ)("td",{css:fV.tableData,children:(0,u.tZ)(m.xv,{multiline:!0,maxLines:1,css:f,children:a})}),p?null:(0,u.tZ)("td",{css:fV.actionButtonTableData,children:(0,u.BX)(v.G,{css:fV.rowActionButtonGroup,id:"action-buttons",children:[d,(0,u.tZ)(h.hU,{onClick:r,alt:"Delete",css:fV.rowActionButton,children:(0,u.tZ)(c4.Z,{color:w.TV.accentNegativeDefault})})]})}),p?(0,u.tZ)("td",{css:fV.loadingTableData,children:(0,u.tZ)(v.G,{css:fV.loadingIconWrapper,children:(0,u.tZ)(b.Z,{size:24,css:fV.loadingIcon})})}):null]})}),fq=(0,fg.$)(["breadcrumbOutline","breadcrumbTextColor"]),fJ=fq.cssVars,fY=fq.styleTokens,fK=(0,g.X)({wrapper:[w.l0.rowWithGap(2),w.l0.align.center,w.l0.pt(12),w.l0.pb(4)],breadcrumb:[{color:fY.breadcrumbTextColor,outline:fY.breadcrumbOutline}]}),f$=function(e){var t=e.split("/").filter(function(e){return""!==e}),n=t.map(function(e,n){return{folderName:e,path:t.slice(0,n+1).join("/")+"/"}});return[{folderName:"Objects",path:""}].concat((0,s._)(n))};function fQ(e){var t=e.currentFolder,n=e.bucketExternalId,r=e.setCurrentFolder,i=e.onError,o=f$(t);return(0,u.tZ)(v.G,{css:fK.wrapper,children:o.map(function(e,t){var a=e.folderName,l=e.path,c=t===o.length-1;return(0,u.BX)(_.Fragment,{children:[(0,u.tZ)(f0,{folderPath:l,folderName:a,bucketExternalId:n,onClick:function(){return r(l)},isLastBreadcrumb:c,onError:i}),c?null:(0,u.tZ)(m.xv,{color:"dimmest",children:"/"})]},l)})})}function f0(e){var t,n=e.folderPath,r=e.folderName,i=e.bucketExternalId,o=e.onClick,a=e.isLastBreadcrumb,l=e.onError,c=d1().uploadFiles,s=fR({folderPath:n,onDropNativeFiles:function(e){return c({bucketExternalId:i,files:e,targetFolder:n,onError:l})}}),d=s.isDraggedOver,f=s.drop;return(0,u.tZ)(X.zx,{ref:f,text:r,variant:"nofill",onClick:o,iconLeft:(0,u.tZ)(fZ.Z,{}),size:"small",disabled:a,style:(t={},(0,eB._)(t,fJ.breadcrumbTextColor,a?w.TV.foregroundDefault:void 0),(0,eB._)(t,fJ.breadcrumbOutline,d?fB:void 0),t),css:fK.breadcrumb})}var f1=(0,g.X)({row:[w.l0.rowWithGap(8),w.l0.align.center],icon:[w.l0.height(24),w.l0.width(24),w.l0.center]});function f2(e){var t=e.onCreateFolder,n=e.onCanceled,r=(0,c._)((0,_.useState)(""),2),i=r[0],o=r[1],a=(0,fv.Z)(n,[]);return(0,u.tZ)("tr",{children:(0,u.tZ)("td",{colSpan:3,children:(0,u.BX)(v.G,{innerRef:a,css:f1.row,children:[(0,u.tZ)(v.G,{css:f1.icon,children:(0,u.tZ)(fZ.Z,{})}),(0,u.tZ)(U.II,{value:i,autoFocus:!0,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(t(i),o("")),"Escape"===e.key&&n()},autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})]})})})}function f3(e){var t=e.contentType;return t?t.startsWith("image/")?(0,u.tZ)(f_.Z,{}):t.startsWith("video/")?(0,u.tZ)(fy.Z,{}):t.startsWith("audio/")?(0,u.tZ)(fS.Z,{}):(0,u.tZ)(fb.Z,{}):(0,u.tZ)(fb.Z,{})}function f4(e){var t,n=e.bucketExternalId,r=e.requestedDeleteItem,i=e.onRequestClose,o=e.onError,a=function(){var e=(0,c._)((0,_.useState)(!1),2),t=e[0],n=e[1],r=(0,t0.b9)(dJ),i=(0,t0.b9)(dY);function o(){return(o=(0,tl._)(function(e){var t,o,a,l;return(0,tc.Jh)(this,function(c){switch(c.label){case 0:t=e.bucketExternalId,o=e.objectName,a=e.onError,n(!0),r({bucketExternalId:t,name:o,isPendingDeletion:!0}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,dW({bucketExternalId:t,objectName:o})];case 2:return c.sent(),i({bucketExternalId:t,name:o}),[3,4];case 3:return l=c.sent(),null==a||a(l),r({bucketExternalId:t,name:o,isPendingDeletion:!1}),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,deleteObject:function(e){return o.apply(this,arguments)}}}().deleteObject,l=function(){var e=(0,c._)((0,_.useState)(!1),2),t=e[0],n=e[1],r=(0,t0.b9)(dJ),i=(0,t0.b9)(dY),o=(0,t0.Dv)(dz);function a(){return(a=(0,tl._)(function(e){var t,a,l,c,s,u;return(0,tc.Jh)(this,function(d){switch(d.label){case 0:t=e.bucketExternalId,a=e.folderPath,l=e.onError,n(!0),s=(null!==(c=o.get(t))&&void 0!==c?c:[]).filter(function(e){return e.name.startsWith(a)}),d.label=1;case 1:var f;return d.trys.push([1,3,,4]),[4,Promise.all(s.map((f=(0,tl._)(function(e){return(0,tc.Jh)(this,function(n){switch(n.label){case 0:r({bucketExternalId:t,name:e.name,isPendingDeletion:!0}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,dW({bucketExternalId:t,objectName:e.name})];case 2:return n.sent(),i({bucketExternalId:t,name:e.name}),[3,4];case 3:return n.sent(),r({bucketExternalId:t,name:e.name,isPendingDeletion:!1}),[3,4];case 4:return[2]}})}),function(e){return f.apply(this,arguments)})))];case 2:return d.sent(),[3,4];case 3:return u=d.sent(),null==l||l(u),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,deleteFolder:function(e){return a.apply(this,arguments)}}}().deleteFolder,s=(t=(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:if(!(null==r?void 0:r.isFolder))return[3,2];return[4,l({bucketExternalId:n,folderPath:r.name,onError:o})];case 1:return e.sent(),i(),[2];case 2:if(!r)return[3,4];return[4,a({bucketExternalId:n,objectName:r.name,onError:o})];case 3:e.sent(),i(),e.label=4;case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,u.tZ)(rs.u,{isOpen:!!r,onRequestClose:i,children:r?(0,u.tZ)(fm.Z,{name:r.displayName,description:'"'.concat(r.displayName,'" ').concat(r.isFolder?" and all its contents":""),entityType:r.isFolder?"folder":"file",hideModal:i,delete:s}):null})}var f8=(0,g.X)({wrapper:[w.l0.center,w.l0.colWithGap(16),w.l0.flex.grow(1),w.l0.justify.center,w.l0.borderRadius(4),{outline:fN.bodyOutline}],textWrapper:[w.l0.center,w.l0.colWithGap(4)],text:[w.l0.center],textRow:[w.l0.rowWithGap(4),w.l0.align.center],textButton:[w.l0.color.accentPrimaryStronger]});function f6(e){var t=e.onOpenCommandsTab;return(0,u.tZ)(v.G,{css:f8.wrapper,style:(0,eB._)({},fP.bodyOutline,"1px dashed ".concat(w.TV.outlineDefault)),children:(0,u.BX)(v.G,{css:f8.textWrapper,children:[(0,u.tZ)(m.xv,{variant:"subheadBig",children:"No objects"}),(0,u.BX)(v.G,{css:f8.text,children:[(0,u.tZ)(m.xv,{children:"Drag and drop or click to upload,"}),(0,u.BX)(v.G,{css:f8.textRow,children:[(0,u.tZ)(m.xv,{children:"or"}),(0,u.tZ)(X.zx,{variant:"underlinedOnHover",colorway:"primary",onClick:t,text:"upload using commands",css:f8.textButton})]})]})]})})}function f5(){var e=(0,ew._)(["\n  mutation ObjectStorageSettingsDeleteBucket($input: DeleteBucketInput!) {\n    deleteBucket(input: $input) {\n      ... on Bucket {\n        id\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return f5=function(){return e},e}var f9={},f7=(0,eZ.Ps)(f5()),he=(0,g.X)({wrapper:[w.l0.colWithGap(32)],section:[w.l0.colWithGap(6)]});function ht(e){var t,n=e.bucketId,r=e.bucketExternalId,i=e.onSettingsUpdate,o=e.onError,a=(0,c._)((0,_.useState)(!1),2),l=a[0],s=a[1],d=function(){return s(!1)},f=(0,c._)((t=(0,N._)({},f9,void 0),aZ.D(f7,t)),2),h=f[0],p=f[1].loading,g=(0,o2.Z)().showConfirm;return(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{css:he.wrapper,children:[(0,u.BX)(v.G,{css:he.section,children:[(0,u.tZ)(m.xv,{variant:"subheadDefault",children:"Bucket ID"}),(0,u.tZ)(c3.ZP,{children:"```\n".concat(r)})]}),(0,u.BX)(v.G,{css:he.section,children:[(0,u.tZ)(X.zx,{text:p?"Deleting…":"Delete bucket",loading:p,iconLeft:(0,u.tZ)(c4.Z,{color:w.TV.accentNegativeStronger}),css:w.l0.color.accentNegativeStronger,onClick:function(){return s(!0)}}),(0,u.tZ)(m.xv,{color:"dimmest",children:"You cannot undo this action"})]})]}),(0,u.tZ)(rs.u,{isOpen:l,onRequestClose:d,children:(0,u.tZ)(fm.Z,{name:"bucket",description:"this bucket and all its contents",entityType:"bucket",hideModal:d,delete:function(){return h({variables:{input:{bucketId:n}},onError:o,onCompleted:function(e){"Bucket"===e.deleteBucket.__typename?(i({type:"deleteBucket",data:{bucketId:n}}),g("Bucket deleted")):o(Error("Failed to delete bucket: "+e.deleteBucket.message))}})}})})]})}var hn=n(53157),hr=[{icon:(0,u.tZ)(dk.Z,{}),title:"Objects",value:"objects"},{icon:(0,u.tZ)(oL.Z,{}),title:"Commands",value:"commands"},{icon:(0,u.tZ)(nN.Z,{}),title:"Settings",value:"settings"}],hi=(0,g.X)({errorWrapper:[w.l0.p(16)],loadingWrapper:[w.l0.center,w.l0.p(24)],wrapper:[w.l0.flex.column,w.l0.flex.grow(1)],tabList:[w.l0.px(12),w.l0.py(4),w.l0.flex.grow(0)],tabPanels:[w.l0.flex.column,w.l0.px(8),w.l0.py(12),w.l0.flex.grow(1)],objectTabPanel:[w.l0.flex.column,w.l0.flex.grow(1)]});function ho(){var e,t,n,r,i=(0,c._)((0,_.useState)(),2),o=i[0],a=i[1],l=(0,c._)((0,_.useState)(0),2),s=l[0],d=l[1],f=dQ({bucketExternalId:null!==(r=null==o?void 0:o.externalId)&&void 0!==r?r:""}),h=d0(),p=h.fetchObjects,m=h.loading,g=(0,Z.Z)().dotReplit,y=(0,o2.Z)().showError,w=function(e){var t;y(e.message),tu.$e(function(n){n.setTag("object-storage-pane",!0),t&&n.setExtras(t),tu.Tb(e)})},x=(e={variables:{replId:(0,eb.Z)()},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if("Repl"!==e.repl.__typename){y("Failed to fetch bucket data");return}if(e.repl.defaultBucket){if("Bucket"!==e.repl.defaultBucket.__typename){w(Error(e.repl.defaultBucket.message));return}var t=e.repl.defaultBucket;a(t),p({bucketExternalId:t.externalId,onError:w})}}},t=(0,N._)({},d4,e),ex.a(d6,t)),C=x.loading,S=x.error;return S?(0,u.tZ)(v.G,{css:hi.errorWrapper,children:(0,u.tZ)(ru.E,{text:'Error: "'.concat(S.message,'". The issue has been logged and the Replit team will look into it.'),colorway:"negative"})}):C||m&&!f.length?(0,u.tZ)(v.G,{css:hi.loadingWrapper,children:(0,u.tZ)(b.Z,{})}):o?(0,u.BX)(dT.mQ,{css:hi.wrapper,selectedIndex:s,onSelectionChange:function(e){return d(e)},children:[(0,u.tZ)(dT.td,{withDividers:!1,css:hi.tabList,children:hr.map(function(e){return(0,u.tZ)(dT.OK,{iconLeft:e.icon,children:e.title},e.value)})}),(0,u.BX)(dT.nP,{css:hi.tabPanels,children:[(0,u.tZ)(dT.x4,{css:hi.objectTabPanel,children:(0,u.tZ)(dE.Z,{children:(0,u.tZ)(fO,{bucketExternalId:o.externalId,onOpenCommandsTab:function(){d(hr.findIndex(function(e){return"commands"===e.value}))},onError:w})})}),(0,u.tZ)(dT.x4,{children:(0,u.tZ)(fl,{onError:w})}),(0,u.tZ)(dT.x4,{children:(0,u.tZ)(ht,{bucketId:o.id,bucketExternalId:o.externalId,onSettingsUpdate:function(e){"deleteBucket"===e.type&&a(void 0)},onError:w})})]})]}):(0,u.tZ)(fp,{onBucketCreated:(n=(0,tl._)(function(e){return(0,tc.Jh)(this,function(t){switch(t.label){case 0:return a(e),[4,g.updateDotReplit([(0,hn.pp)(e.externalId)])];case 1:return t.sent(),[2]}})}),function(e){return n.apply(this,arguments)}),onError:w})}var ha=d.Dy.Object({type:d.Dy.Literal("objectStorage")}),hl={Content:function(){return(0,u.tZ)(ho,{})},Icon:function(e){var t=e.size;return(0,u.tZ)(dk.Z,{size:t})},getTitle:function(){return"Object Storage"},decode:function(e){return f.B4.Decode(ha,e)}},hc=n(86596);(0,t1.cn)({replId:"",packageManagers:{}}),(gY=yi||(yi={})).Initializing="Initializing",gY.Installing="Installing",gY.Uninstalling="Uninstalling",gY.Idle="Idle",(gK=yo||(yo={})).Install="Install",gK.Uninstall="Uninstall";var hs=(0,_.createContext)(null);function hu(){var e=(0,_.useContext)(hs);if(!e)throw Error("Expected store in context");return e}var hd=(0,t1.cn)(null);function hf(){return(0,t0.Dv)(hd,{store:hu()})}(0,t1.cn)(null);var hh=n(82877);function hp(e){var t=hf(),n=(0,Z.Z)(),r=(0,c._)((0,_.useState)(null),2),i=r[0],o=r[1];return(0,_.useEffect)(function(){if((null==t?void 0:t.id)&&e.name){var r,i=(0,hh.C)(t.id),a=!1;return(r=(0,tl._)(function(){var r;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:return[4,i.getPackageInfo({id:t.id,name:e.name,services:n})];case 1:if(r=l.sent(),a)return[2];return o(null!=r?r:null),[2]}})}),function(){return r.apply(this,arguments)})(),function(){a=!0}}},[null==t?void 0:t.id,e.name]),i}var hm=n(23936),hv=n(41331),hg=n.n(hv),hy=/(.+)(?:\S+)?<([^>,]+)[>,]/,hb=v.K.span;function hw(e){var t=e.author,n=hy.exec(t);if(n){var r=n[1],i=n[2];return(0,u.BX)(u.HY,{children:["By ",r,(0,u.BX)("a",{href:"mailto:".concat(i),children:["<",i,">"]})]})}return(0,u.BX)(hb,{children:["By ",t]})}var hZ=n(82400);function hx(e){var t=e.isInstalled,n=e.isInQueue;return e.isCurrentAction?(0,u.tZ)(b.Z,{}):n?(0,u.tZ)(hZ.Z,{}):t?(0,u.tZ)(c4.Z,{}):(0,u.tZ)(y.Z,{})}var hC=v.K.span,h_=(0,g.X)({metadata:[w.l0.colWithGap(2)],metadataSkeleton:[w.l0.colWithGap(8),w.l0.pt(4)],metadataSkeletonVersion:[ep.p.foregroundPulse(),w.l0.height(16),w.l0.maxWidth(64),w.l0.borderRadius(4)],metadataSkeletonDescription:[ep.p.foregroundPulse(),w.l0.height(16),w.l0.borderRadius(4),w.l0.maxWidth(425)],root:[w.l0.borderRadius(8),w.l0.p(8)],header:[w.l0.flex.row,w.l0.justify.spaceBetween],headerTitle:[w.l0.display.flex,w.l0.rowWithGap(8),w.l0.flex.growAndShrink(1)],headerTitleText:[w.l0.display.inline,w.l0.flex.growAndShrink(1),w.l0.overflow("hidden"),w.l0.truncate],headerTitlePills:[w.l0.display.inlineFlex,w.l0.rowWithGap(4),w.l0.flex.shrink(0)],headerButton:[],content:[w.l0.colWithGap(4)],error:[w.l0.mt(4)],actions:[w.l0.rowWithGap(8),w.l0.mt(8)],consoleButton:[w.l0.width("calc(50% - ".concat(w.TV.space8,")"))],cancelButton:[w.l0.width("calc(50% - ".concat(w.TV.space8,")"))],actionButton:[w.l0.flex.grow(1),w.l0.flex.shrink(0)]});function hS(e){var t=e.title,n=e.content,r=e.isExpanded;return(0,u.BX)(v.G,{css:h_.metadata,children:[t?(0,u.tZ)(m.xv,{color:"dimmer",children:t}):null,n?(0,u.tZ)(m.xv,{maxLines:r?void 0:1,children:n}):null]})}function hk(e){var t=e.title,n=e.content;return(0,u.BX)(v.G,{css:h_.metadataSkeleton,children:[void 0===t||t?(0,u.tZ)(v.G,{css:h_.metadataSkeletonVersion}):null,void 0===n||n?(0,u.tZ)(v.G,{css:h_.metadataSkeletonDescription}):null]})}function hE(e){var t,n=e.name,r=e.pkg,i=e.isMetadataLoading,o=e.openConsole,a=e.pills,l=hf(),s=(0,fr.te)(null==l?void 0:l.id),d=(0,fr.pN)(null==l?void 0:l.id),f=(0,fr.B2)(),p=(0,fr.cW)(),g=(0,fr.wY)(),y=(0,_.useMemo)(function(){return r.license?hg()(r.license,{upgrade:!1})||(r.license.length<40?r.license:"Unknown License"):"Unknown License"},[r.license]),b=(0,_.useMemo)(function(){return!!(null!==f&&f.pkgs.find(function(e){return e.name===r.name}))},[f]),w=(0,_.useMemo)(function(){return p.find(function(e){return e.pkgs.find(function(e){return e.name===r.name})})},[p]),Z=!!w,x=(0,_.useMemo)(function(){return!!s.find(function(e){return e.name===r.name})},[s]),C=!!(r.homepageURL||r.license||r.author),S=(0,_.useMemo)(function(){return!!d.find(function(e){return e.name===r.name})},[d]),k=(0,c._)((0,_.useState)(!1),2),E=k[0],T=k[1],R=(0,fr.jh)(),I=(0,fr.Wx)(),D=(0,fr.zi)();return(0,u.BX)(F.Tg,{css:h_.root,elevated:!0,children:[(0,u.BX)(v.G,{css:h_.header,children:[(0,u.BX)(m.h4,{css:h_.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,u.BX)(hC,{css:h_.headerTitleText,children:[null!=n?n:r.name,r.version?(0,u.BX)(m.xv,{color:"dimmer",children:["@",r.version]}):null]}),a?(0,u.tZ)(v.G,{css:h_.headerTitlePills,children:a}):null]}),C?(0,u.tZ)(h.hU,{css:h_.headerButton,alt:"Show more info",tooltipBehavior:"hidden",onClick:function(){return T(function(e){return!e})},children:(0,u.tZ)(lk.Z,{rotate:E?90:0})}):null]}),(0,u.tZ)(v.G,{css:h_.content,children:void 0!==i&&i?(0,u.tZ)(hk,{title:!1}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(hS,{content:null!==(t=r.description)&&void 0!==t?t:"This package has no description.",isExpanded:E}),r.homepageURL&&E?(0,u.tZ)(hS,{content:(0,u.tZ)("a",{href:r.homepageURL,rel:"noreferrer noopener",target:"_blank",children:r.homepageURL}),isExpanded:E}):null,y&&E?(0,u.tZ)(hS,{content:y,isExpanded:E}):null,r.author&&E?(0,u.tZ)(hS,{content:(0,u.tZ)(hw,{author:r.author}),isExpanded:E}):null]})}),S?(0,u.tZ)(ru.E,{css:h_.error,colorway:"negative",icon:(0,u.tZ)(nq.Z,{}),text:"Couldn't ".concat(x?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,u.tZ)(v.G,{css:h_.actions,children:S?(0,u.BX)(u.HY,{children:[(0,u.tZ)(X.zx,{css:h_.consoleButton,text:"Console",onClick:function(){o()},disabled:b||Z,colorway:"primary",iconLeft:(0,u.tZ)(hm.Z,{})}),(0,u.tZ)(X.zx,{css:h_.actionButton,text:"Try Again",onClick:function(){(null==l?void 0:l.id)&&(g(l.id,[r]),x?I({id:l.id,pkg:r}):R({id:l.id,pkg:r}))},loading:b||Z,colorway:x?"red":void 0,variant:x?"outlined":void 0,iconLeft:(0,u.tZ)(hx,{isInstalled:x,isInQueue:Z,isCurrentAction:b})})]}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(X.zx,{css:h_.actionButton,text:b?(null==f?void 0:f.kind)===fr.TH.Install?"Installing":"Removing":Z?(null==w?void 0:w.kind)===fr.TH.Install?"Waiting to install":"Waiting to remove":x?"Remove":"Install",onClick:function(){(null==l?void 0:l.id)&&(x?I({id:l.id,pkg:r}):R({id:l.id,pkg:r}))},loading:b||Z,colorway:x?"red":void 0,variant:x?"outlined":void 0,iconLeft:(0,u.tZ)(hx,{isInstalled:x,isInQueue:Z,isCurrentAction:b})}),Z?(0,u.tZ)(X.zx,{css:h_.cancelButton,text:"Cancel",onClick:function(){r.name&&D(r.name)},disabled:b,loading:b}):null]})})]})}function hT(e){var t,n,r=e.pkg,i=e.openConsole,o=hp(r),a=o?(0,L._)((0,N._)({},o),{version:null!==(t=r.spec)&&void 0!==t?t:o.version}):r;return(0,u.tZ)(hE,{name:null!==(n=null==o?void 0:o.prettyName)&&void 0!==n?n:void 0,pkg:a,isMetadataLoading:null===o,openConsole:i})}function hR(e){return(0,u.tZ)("a",(0,N._)({href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer"},e))}var hI=(0,g.X)({root:[w.l0.colWithGap(8),{"@container (min-width: 600px)":[w.l0.colWithGap(0),w.l0.align.start,{display:"grid",gridTemplate:"auto / 1fr 1fr",gap:w.TV.space8}],"@container (min-width: 1200px)":[{display:"grid",gridTemplate:"auto / 1fr 1fr 1fr",gap:w.TV.space8}]}]});function hD(e){return(0,u.tZ)(v.G,(0,L._)((0,N._)({},e),{css:hI.root}))}function hB(e){var t=e.name,n=e.openConsole,r=hp({name:t});return(0,u.tZ)(hE,{pkg:null!=r?r:{name:t},isMetadataLoading:null===r,openConsole:n,pills:[(0,u.tZ)(uh.D,{text:"Suggested",colorway:"primary"},"suggested")]})}var hG=(0,g.X)({packages:[w.l0.pt(8)],separator:[w.l0.backgroundColor.backgroundHigher,w.l0.height(1),w.l0.borderRadius(1),w.l0.mt(6),{border:"none",marginLeft:"auto",marginRight:"auto",width:"95%"}]});function hA(e){var t=e.openConsole,n=hf(),r=(0,fr.te)(null==n?void 0:n.id),i=(0,fr.B2)(),o=(0,fr.cW)(),a=[];switch(null==n?void 0:n.language){default:return null;case"nodejs":a=["express","discord.js","axios","moment","node-fetch","chalk"];break;case"python3":a=["replit","requests","pandas","discord","matplotlib","flask"]}var l=function(e){if(r.find(function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e})||(i&&i.kind===fr.TH.Install?i.pkgs.find(function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e}):null))return!0;var t=!0,n=!1,a=void 0;try{for(var l,c=o[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var s=l.value;if(s.kind===fr.TH.Install&&s.pkgs.find(function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e}))return!0}}catch(e){n=!0,a=e}finally{try{t||null==c.return||c.return()}finally{if(n)throw a}}return!1},c=a.filter(function(e){return!l(e)}).map(function(e){return(0,u.tZ)(hB,{name:e,openConsole:t},e)});return c.length>0?(0,u.BX)(u.HY,{children:[(0,u.tZ)("hr",{css:hG.separator}),(0,u.tZ)(hD,{css:hG.packages,children:c})]}):null}var hP=(0,g.X)({root:[w.l0.maxWidth(800),w.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[w.l0.maxWidth(1400)]}],header:[w.l0.flex.row,w.l0.justify.spaceBetween,w.l0.py(4)],headerLeft:[w.l0.rowWithGap(4),w.l0.align.center],headerLoadingIcon:[w.l0.px(4)],headerRight:[w.l0.rowWithGap(4)],headerTitle:[{textTransform:"capitalize"}],packages:[w.l0.pt(8)],empty:[w.l0.pt(8),w.l0.colWithGap(8),w.l0.width("100%")],packagesWrapper:[w.l0.colWithGap(8),w.l0.width("100%")]});function hN(e){var t=e.openFile,n=e.openConsole,r=hf(),i=(0,fr.te)(null==r?void 0:r.id),o=(0,fr.$z)(null==r?void 0:r.id),a=(0,fr.cW)(),l=(0,fr.B2)(),d=(0,c._)((0,_.useState)(!0),2),f=d[0],p=d[1];if(null===r)return null;if(!o||o===fr.C0.Uninitialized||o===fr.C0.Initializing)return(0,u.tZ)(v.G,{css:hP.root,children:(0,u.BX)(v.G,{css:hP.header,children:[(0,u.BX)(v.G,{css:hP.headerLeft,children:[(0,u.tZ)(ti.u,{tooltip:"Loading",children:(0,u.tZ)(v.G,{css:hP.headerLoadingIcon,children:(0,u.tZ)(b.Z,{})})}),(0,u.BX)(m.h4,{css:hP.headerTitle,variant:"subheadDefault",level:2,children:[r.language," Packages"]})]}),(0,u.tZ)(v.G,{css:hP.headerRight,children:r.packagerFiles.length>0?(0,u.tZ)(h.hU,{alt:"Open ".concat(r.packagerFiles[0]),onClick:function(){r&&t(r.packagerFiles[0])},children:(0,u.tZ)(fb.Z,{})}):null})]})});var g=l&&l.id===r.id&&l.kind===fr.TH.Install?l.pkgs:[],y=a.flatMap(function(e){return e.id===r.id&&e.kind===fr.TH.Install?e.pkgs:[]}),w=(0,s._)(g).concat((0,s._)(y),(0,s._)(i));return(0,u.BX)(v.G,{css:hP.root,children:[(0,u.BX)(v.G,{css:hP.header,children:[(0,u.BX)(v.G,{css:hP.headerLeft,children:[w.length>0?(0,u.tZ)(h.hU,{alt:"Show packages",tooltipBehavior:"hidden",onClick:function(){return p(function(e){return!e})},children:(0,u.tZ)(lk.Z,{rotate:f?90:0})}):null,(0,u.BX)(m.h4,{css:hP.headerTitle,variant:"subheadDefault",level:2,children:[r.language," Packages"]})]}),(0,u.tZ)(v.G,{css:hP.headerRight,children:0===w.length?(0,u.tZ)(m.h4,{level:3,children:"No Packages Installed."}):(0,u.BX)(u.HY,{children:[(0,u.BX)(m.h4,{level:3,children:["Installed ",w.length," ",(0,eh.Z)("package",w.length)]}),r.packagerFiles.length>0?(0,u.tZ)(h.hU,{alt:"Open ".concat(r.packagerFiles[0]),onClick:function(){r&&t(r.packagerFiles[0])},children:(0,u.tZ)(fb.Z,{})}):null]})})]}),f?(0,u.BX)(v.G,{css:0===w.length?hP.empty:hP.packagesWrapper,children:[0===w.length?(0,u.BX)(m.xv,{children:["You don't have any packages installed."," ",r.packageSearch?(0,u.BX)(u.HY,{children:["Try searching for a package to install, or"," ",(0,u.tZ)(hR,{children:"learn more about packages here"}),"","."]}):(0,u.BX)(m.xv,{children:[(0,u.tZ)(hR,{children:"Learn more about packages here"}),"","."]})]}):null,w.length>0?(0,u.tZ)(u.HY,{children:(0,u.tZ)(hD,{css:hP.packages,children:w.sort(function(e,t){return(null==e?void 0:e.name)?(null==t?void 0:t.name)?e.name.localeCompare(t.name):-1:1}).map(function(e){return(0,u.tZ)(hT,{pkg:e,openConsole:n},e.name)})})}):null,(0,u.tZ)(hA,{openConsole:n})]}):null]})}var hL=n(12945);function hO(){var e=(0,Z.Z)(),t=(0,uO.lV)((0,_.useCallback)(function(e){return e(hd)},[hd]),{store:hu()});return(0,_.useCallback)(function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t();return(null==i?void 0:i.id)?(0,hh.C)(i.id).search((0,N._)({id:i.id,query:n,services:e},r)):[]},[])}function hU(e){var t=e.onResults,n=e.onLoading,r=e.className,i=e.searchOpts,o=hf(),a=(0,c._)((0,_.useState)(""),2),l=a[0],s=a[1],d=(0,_.useRef)(0),f=function(){d.current++,null==t||t(null),null==n||n(!1)},h=hO();(0,hL.Z)(function(){if(""!==l.trim()){var e,r=++d.current;(e=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(o){switch(o.label){case 0:return null==n||n(!0),[4,h(l,i)];case 1:if(e=o.sent(),r!==d.current)return[2];return null==t||t(null!=e?e:[]),null==n||n(!1),[2]}})}),function(){return e.apply(this,arguments)})()}},[l,i],500);var p=(0,_.useRef)(null);return(0,_.useEffect)(function(){p.current&&p.current.focus()},[]),(0,u.tZ)(v.G,{className:r,children:(0,u.tZ)(nn.E,{inputRef:p,value:l,onChange:function(e){""===e.target.value.trim()&&f(),s(e.target.value)},onClear:function(){s(""),f()},placeholder:o?"Search ".concat(o.language," packages"):void 0})})}var hM=(0,g.X)({root:[w.l0.maxWidth(800),w.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[w.l0.maxWidth(1400)]}],skeleton:[w.l0.borderRadius(8),w.l0.p(8),ep.p.backgroundPulse(),w.l0.height(128)]});function hX(){return(0,u.tZ)(v.G,{css:hM.root,children:(0,u.tZ)(hD,{children:Array.from({length:3},function(e,t){return(0,u.tZ)(F.Tg,{css:hM.skeleton,elevated:!0},"SearchLoading-".concat(t))})})})}function hF(e){var t=e.pkg,n=e.openConsole;return(0,u.tZ)(hE,{pkg:t,openConsole:n})}var hW=(0,g.X)({root:[w.l0.colWithGap(8),w.l0.maxWidth(800),w.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[w.l0.maxWidth(1400)]}],results:[w.l0.colWithGap(8)],empty:[w.l0.flex.row,w.l0.justify.center]});function hH(e){var t=e.results,n=e.openConsole;return(0,u.tZ)(v.G,{css:hW.root,children:(0,u.tZ)(v.G,{css:hW.results,children:0===t.length?(0,u.tZ)(m.xv,{color:"dimmer",css:hW.empty,children:"No Packages Found"}):(0,u.tZ)(hD,{children:t.map(function(e){return(0,u.tZ)(hF,{pkg:e,openConsole:n},e.name)})})})})}var hV=n(98250),hz=(0,g.X)({root:[w.l0.p(8),w.l0.borderRadius(8),w.l0.colWithGap(16)],header:[w.l0.flex.row,w.l0.align.center,w.l0.justify.spaceBetween],headerLeft:[w.l0.rowWithGap(4),w.l0.align.center],headerRight:[],content:[w.l0.display.block]});function hj(e){var t=e.title,n=e.onClose,r=e.children,i=(0,c._)((0,_.useState)(!0),2),o=i[0],a=i[1];return(0,u.BX)(F.Tg,{elevated:!0,css:hz.root,children:[(0,u.BX)(v.G,{css:hz.header,children:[(0,u.BX)(v.G,{css:hz.headerLeft,children:[(0,u.tZ)(m.h4,{level:2,variant:"subheadDefault",children:t}),(0,u.tZ)(h.hU,{alt:o?"Minimize tip information":"Expand tip information",tooltipBehavior:"hidden",onClick:function(){return a(function(e){return!e})},children:(0,u.tZ)(lk.Z,{rotate:o?90:0})})]}),(0,u.tZ)(v.G,{css:hz.headerRight,children:(0,u.tZ)(h.hU,{alt:"Dismiss tip",tooltipBehavior:"hidden",onClick:n,children:(0,u.tZ)(nJ.Z,{})})})]}),o?(0,u.tZ)(v.G,{css:hz.content,children:r}):null]})}var hq=(0,g.X)({root:[w.l0.colWithGap(8),w.l0.pb(24)]});function hJ(){var e=(0,hV.Z)("packager","show_packager_about_tooltip"),t=(0,hV.Z)("packager","show_packager_import_tooltip");return((0,_.useEffect)(function(){e.register()},[e]),(0,_.useEffect)(function(){t.register()},[t]),e.shouldDisplay||t.shouldDisplay)?(0,u.BX)(v.G,{css:hq.root,children:[e.shouldDisplay?(0,u.BX)(hj,{title:"What are packages?",onClose:e.dismiss,children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,u.tZ)(hR,{children:"Learn more about packages"}),"","."]}):null,t.shouldDisplay?(0,u.tZ)(hj,{title:"Tip—Auto Import",onClose:t.dismiss,children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null]}):null}function hY(e){var t=e.children,n=e.config,r=(0,t0.b9)(hd,{store:hu()});return(0,_.useEffect)(function(){(null==n?void 0:n.id)&&r(n)},[n]),(0,u.tZ)(u.HY,{children:t})}function hK(e){var t=e.children,n=e.config,r=(0,c._)((0,_.useState)(function(){return(0,t1.MT)()}),1)[0];return(0,u.tZ)(hs.Provider,{value:r,children:n?(0,u.tZ)(hY,{config:n,children:t}):t})}var h$=(0,g.X)({root:[w.l0.pt(16),w.l0.p(8),{containerType:"inline-size"}],loading:[w.l0.center,w.l0.p(8),w.l0.height("100%")],center:[w.l0.width("100%"),w.l0.maxWidth(600),w.l0.colWithGap(4),{marginLeft:"auto",marginRight:"auto","@container (min-width: 400px)":[w.l0.maxWidth(800)],"@container (min-width: 1200px)":[w.l0.maxWidth(1400)]}],title:[],content:[w.l0.pt(8),w.l0.colWithGap(16)],search:[w.l0.rowWithGap(8),w.l0.width("100%")],searchInput:[w.l0.flex.grow(1)],configSelect:[],packages:[w.l0.colWithGap(16)]});function hQ(e){var t,n,r,i,o,a=e.openFile,l=e.openConsole,s=(0,fn.I)(),d=s.configs,f=s.loading,h=(0,P.Z)(function(){return d.filter(function(e){return"nix"!==e.id})},[d]),p=(0,c._)((t=(0,fn.I)().configs,n=(0,P.Z)(function(){return t.filter(function(e){return"nix"!==e.id})},[t]),i=(r=(0,c._)((0,_.useState)(null),2))[0],o=r[1],(0,_.useEffect)(function(){n.length>0&&(null==i||!n.find(function(e){return e&&e.id===i.id}))&&o(n[0])},[i,n]),[i,o]),2),g=p[0],y=p[1],w=(0,c._)((0,_.useState)(null),2),Z=w[0],x=w[1],C=(0,c._)((0,_.useState)(!1),2),S=C[0],k=C[1],E=null;return(E=null!==Z?(0,u.tZ)(hH,{results:Z,openConsole:l}):S?(0,u.tZ)(hX,{}):(0,u.tZ)(u.HY,{children:h.map(function(e){return e.id===(null==g?void 0:g.id)?(0,u.tZ)(hN,{openFile:a,openConsole:l},e.id):(0,u.tZ)(hK,{config:e,children:(0,u.tZ)(hN,{openFile:a,openConsole:l})},e.id)})}),f)?(0,u.tZ)(v.G,{css:h$.loading,children:(0,u.tZ)(b.Z,{})}):(0,u.tZ)(v.G,{css:h$.root,children:(0,u.tZ)(v.G,{css:h$.center,children:0===h.length?(0,u.BX)(v.G,{children:[(0,u.tZ)(m.h4,{level:2,variant:"subheadBig",children:"Sorry, packages are not configured for this Repl."}),(0,u.tZ)(m.xv,{variant:"subheadDefault",children:"We are working on making more features configurable and packages available for more languages, check back again in the future."})]}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(hJ,{}),(0,u.tZ)(m.h4,{css:h$.title,level:2,variant:"subheadBig",children:"Packages"}),(0,u.tZ)(v.G,{css:h$.content,children:(0,u.BX)(hK,{config:g,children:[(0,u.BX)(v.G,{css:h$.search,children:[(null==g?void 0:g.packageSearch)?(0,u.tZ)(hU,{css:h$.searchInput,onResults:x,onLoading:k}):(0,u.tZ)(v.G,{css:h$.searchInput}),h.length>1&&(0,u.tZ)(ft.P,{css:h$.configSelect,items:h,selectedItem:g,onChange:function(e){return y(e)},"aria-label":"Select packager configuration"})]}),(0,u.tZ)(v.G,{css:h$.packages,children:E})]})})]})})})}var h0=d.Dy.Object({type:d.Dy.Literal("packager")}),h1={Content:function(e){var t=e.options;return(0,u.tZ)(hQ,{openFile:function(e){return t.performPaneOperation({operation:"open",pane:(0,x.$E)(e),secondary:!0})},openConsole:function(){t.performPaneOperation({operation:"open",pane:{type:"runnerOutput"},secondary:!0})}})},Icon:function(e){var t=e.size;return(0,u.tZ)(hc.Z,{size:t})},getTitle:function(){return"Packages"},decode:function(e){return f.B4.Decode(h0,e)}},h2=n(76575),h3=n(32681),h4=n.n(h3),h8=n(68568),h6=n(79760),h5=(0,g.X)({create:[w.l0.colWithGap(8),w.l0.p(8)],pedit:{width:"100%",height:"100%"},canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0},upgradeButton:[w.l0.position.absolute,w.l0.top(8),w.l0.left("50%"),{transform:"translateX(-50%)"}]});function h9(e){var t=e.data,n=e.onSave,r=(0,_.useRef)(null),i=(0,_.useRef)(null),o=(0,Z.Z)().fs,a=(0,o2.Z)(),l=a.showError,s=a.showConfirm,d=(0,c._)((0,_.useState)(!1),2),f=d[0],h=d[1],p=(0,cw.Z)(function(){var e=r.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)},{type:"debounce",wait:100});return(0,_.useEffect)(function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var o=h4()({canvas:e,data:t}),a=function(){return n(o.save())};return o.on("change",a),o.on("save",a),o.on("export",function(){return h(!0)}),i.current=o,e.focus(),function(){o&&o.cleanUp(),i.current&&(i.current=null)}}},[t,n,r]),(0,u.BX)(u.HY,{children:[(0,u.tZ)("canvas",{css:h5.canvas,ref:function(e){r.current=e,p(e)},tabIndex:0}),(0,u.tZ)(rs.u,{isOpen:f,onRequestClose:function(){return h(!1)},children:(0,u.tZ)(h8.Z,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return h(!1)},onConfirm:function(e){if(!i.current){h(!1);return}var t="".concat(e,".png"),n=i.current.curFrame().toPNG();o.writeFile(t,tI.Z.from(n)).then(function(e){if(e.error){l("Failed to write to file ".concat(t));return}s("Successfully exported to ".concat(t)),h(!1)})}})})]})}function h7(e){var t,n=e.activeFile,r=(0,Z.Z)().fs,i=(0,c._)((0,_.useState)(!0),2),o=i[0],a=i[1],l=(0,c._)((0,_.useState)(null),2),s=l[0],d=l[1],f=(0,o2.Z)().showError,h=n.endsWith(".kbmsprite");(0,_.useEffect)(function(){var e=!1;function t(){return(t=(0,tl._)(function(){var t,i,o;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:return[4,r.readFile(n)];case 1:if(t=l.sent(),a(!1),e)return[2];if(t.error)return f("failed to read ".concat(n)),[2];return o=(i=t.content.toString())&&JSON.parse(i),d(h?(0,h6.C)(o):o),[2]}})})).apply(this,arguments)}return!function(){t.apply(this,arguments)}(),function(){e=!0}},[r,n,f,h]);var p=(0,_.useCallback)((t=(0,tl._)(function(e){return(0,tc.Jh)(this,function(t){switch(t.label){case 0:if(!h)return[3,2];return[4,(0,h6.u)(e)];case 1:e=t.sent(),t.label=2;case 2:return[4,r.writeFile(n,tI.Z.from(JSON.stringify(e)))];case 3:return t.sent().error&&f("Failed to save ".concat(n,", please try again")),[2]}})}),function(e){return t.apply(this,arguments)}),[r,n,f,h]);return o?(0,u.tZ)(b.Z,{}):s?(0,u.tZ)(h9,{data:s,onSave:p}):(0,u.tZ)(pe,{onCreate:function(e){return d(e)}})}function pe(e){var t=e.onCreate,n=(0,c._)((0,_.useState)(""),2),r=n[0],i=n[1],o=(0,c._)((0,_.useState)(""),2),a=o[0],l=o[1],s=Number(r),d=Number(a);return(0,u.BX)(v.G,{css:h5.create,children:[(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,u.tZ)(U.II,{placeholder:"width",value:r,onChange:function(e){return i(e.target.value)}}),(0,u.tZ)(U.II,{placeholder:"height",value:a,onChange:function(e){return l(e.target.value)}}),(0,u.tZ)(X.zx,{text:"Create",disabled:!(s>0&&d>0),onClick:function(){t({width:Math.ceil(s),height:Math.ceil(d)})}})]})}var pt=d.Dy.Object({type:d.Dy.Literal("pedit"),data:d.Dy.Object({path:d.Dy.String()})}),pn={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,u.tZ)(pr,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,u.tZ)(h2.Z,{size:t})},getTitle:function(e){return(0,S.UO)(e.data.path)},decode:function(e){return f.B4.Decode(pt,e)}};function pr(e){var t=e.path,n=e.performPaneOperation,r=(0,x.Mp)({path:t,performPaneOperation:n});return(0,C.L5)(function(){if(r)return{commands:r}},[r]),(0,u.BX)(u.HY,{children:[(0,u.tZ)(x.HK,{path:t,performPaneOperation:n}),(0,u.tZ)(x.VY,{children:(0,u.tZ)(h7,{activeFile:t})})]})}var pi=n(2924),po=n(51460),pa=n(39743),pl=(0,g.X)({badge:[w.l0.backgroundColor.backgroundHighest,w.l0.borderRadius(4),{padding:"0 0.35em"}],container:[w.l0.p(8),w.l0.colWithGap(8)],header:[w.l0.py(4),w.l0.justify.spaceBetween,w.l0.flex.grow(1),w.l0.pr(16),w.l0.height(24)],result:[w.l0.borderRadius(4),w.l0.overflow("hidden")],problems:[w.l0.px(6),w.l0.py(6)],item:[ne.gU.listItem,w.l0.reset.button,w.l0.justify.spaceBetween,w.l0.px(8),w.l0.py(4),w.l0.overflow("hidden"),w.l0.cursor.pointer,w.l0.borderRadius(4),{"&:focus-visible":[w.l0.focusRing],"&:hover, &:focus-visible":[w.l0.backgroundColor.backgroundHighest]}],itemMain:[w.l0.flex.growAndShrink(1)],itemSecondary:[w.l0.color.foregroundDimmest],flex:[w.l0.rowWithGap(8),w.l0.align.center],message:[w.l0.flex.shrink(1),w.l0.overflowX("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function pc(e){var t=e.isActive,n=e.performPaneOperation,r=(0,c._)((0,_.useState)({}),2),i=r[0],o=r[1],a=(0,pa.nC)(),l=(0,C.dr)(),s=(0,_.useCallback)(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=a()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)!function(){var e,t=r.value;if("codeEditor"===t[1].type){var n=l(t[0]);if(n&&"codeEditor"===n.type){var i=t[1].data.path,a=null===(e=n.fetchProblems)||void 0===e?void 0:e.call(n);i&&a&&o(function(e){return(0,L._)((0,N._)({},e),(0,eB._)({},i,a))})}}}()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},[l,a]);return(0,_.useEffect)(function(){t&&s()},[t,s]),(0,C.L5)(function(){return{type:"problems",updateProblems:function(e,t){o(function(n){return(0,L._)((0,N._)({},n),(0,eB._)({},e,t))})}}},[o]),(0,u.BX)(v.G,{css:pl.container,children:[Object.values(i).some(function(e){return e.length>0})?null:(0,u.tZ)(m.xv,{children:"No problems detected in this workspace"}),Object.keys(i).map(function(e){return 0===i[e].length?null:(0,u.tZ)(F.Tg,{elevated:!0,css:pl.result,children:(0,u.tZ)(es.Q,{chevron:"end",defaultExpanded:!0,headerContent:(0,u.BX)(v.G,{css:[pl.flex,pl.header],children:[(0,u.BX)(v.G,{css:pl.flex,children:[(0,u.tZ)(p.Z,{path:e}),(0,u.tZ)(m.xv,{children:e})]}),(0,u.tZ)(v.G,{css:pl.badge,children:i[e].length>99?"99+":i[e].length})]}),children:(0,u.tZ)(v.G,{css:pl.problems,children:i[e].map(function(t,r){var i=t.range.start.line+1,o=t.range.start.character;return(0,u.tZ)(po.Z,{problem:t,onClick:function(){n({operation:"open",pane:{type:"codeEditor",data:{path:e,line:i,col:o}},secondary:!0})}},"".concat(i,"-").concat(o,"-").concat(r))})})},e)},e)})]})}var ps=d.Dy.Object({type:d.Dy.Literal("problems")}),pu={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,u.tZ)(pc,{isActive:n,performPaneOperation:r})},Icon:function(){return(0,u.tZ)(pi.Z,{})},getTitle:function(){return"Problems"},decode:function(e){return f.B4.Decode(ps,e)}},pd=n(87344),pf=n(1592),ph=n(19004),pp=n(57159),pm=n(65914),pv=n(45795),pg=n(31562),py=d.Dy.Object({type:d.Dy.Literal("shell"),data:d.Dy.Optional(d.Dy.Object({initialPwd:d.Dy.Optional(d.Dy.String())}))}),pb={Content:function(e){var t,n,r=e.pane,i=e.options,o=(0,tK.P5)({controlName:"flag-pid2-shell-muxed",logFlagToAnalytics:!1}),a=(0,tK.P5)({controlName:"flag-pid2-shell",logFlagToAnalytics:!1});return o||a?(0,u.tZ)(pg.x,{paneId:i.paneId,isActive:i.isActive,initialPwd:null===(n=r.data)||void 0===n?void 0:n.initialPwd,performPaneOperation:i.performPaneOperation}):(0,u.tZ)(pw,{isActive:i.isActive,initialPwd:null===(t=r.data)||void 0===t?void 0:t.initialPwd,performPaneOperation:i.performPaneOperation})},Icon:function(e){var t=e.size;return(0,u.tZ)(pf.Z,{size:t})},getTitle:function(){return"Shell"},decode:function(e){return f.B4.Decode(py,e)}};function pw(e){var t,n=e.isActive,r=e.initialPwd,i=e.performPaneOperation,o=(0,Z.Z)(),a=o.container,l=o.fs,s=(0,c._)((0,_.useState)(!1),2),d=s[0],f=s[1],h=(0,c._)((0,_.useState)(void 0),2),p=h[0],m=h[1],v=(0,_.useCallback)(function(e){i({operation:"open",secondary:!0,pane:{type:(0,B.Dp)(e),data:e}})},[i]),g=(0,_.useCallback)(function(e){i({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[i]),y=(0,r9.bD)({onSession:function(e){i({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,b=(0,c._)((0,pm.N)(),1)[0],w=(0,_.useCallback)((t=(0,tl._)(function(e){return(0,tc.Jh)(this,function(t){return(0,a1.j)(a1.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:b,user_model_selection:b,message_content:e,message_source:"shell"}),y({kind:"message",message:e,intent:pp.$h.EXPLAIN,model:"advanced"===b?pp.BY.ADVANCED:pp.BY.BASIC}),[2]})}),function(e){return t.apply(this,arguments)}),[b,y]),x=(0,_.useCallback)(function(e,t){i({operation:"open",secondary:!0,pane:{type:"webview",data:{portType:"local",path:e,port:t}}})},[i]),S=(0,c._)((0,_.useState)(0),2),k=S[0],E=S[1],T=(0,c._)((0,_.useState)(!1),2),R=T[0],I=T[1],D=(0,c._)((0,ph.St)({container:a,initialPwd:r,onOutput:(0,_.useCallback)(function(){f(!0)},[f]),onShellMetadata:m,openFile:v,listFiles:l.listFiles,openWebview:x,onOpenGeneratePrompt:function(){(0,a1.j)(a1.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell",message_content:null}),I(!0)},onUpdateCurrentPromptLineNumber:function(e){E(e)}}),3),G=D[0],A=D[1],P=D[2],N=(0,_.useMemo)(function(){return[{type:"action",label:"Clear shell",icon:(0,u.tZ)(c4.Z,{}),run:function(){return null==G?void 0:G.clear()}}]},[G]);(0,C.Wk)(function(){return G},[G]),(0,C.L5)(function(){if(G&&d)return{actions:N,type:"shell",exec:function(e){P(e+"\n")}}},[G,P,d,N]);var L=(0,_.useId)(),O="scope-shell-".concat(L);return(0,ic.ow)(O,n),(0,il.Il)(function(){return[pv.CH.id,{run:function(){(0,a1.j)(a1.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell",message_content:null}),I(!0)},scope:O,bubble:!1}]},[I]),(0,u.tZ)(ph.N2,{shell:G,shellMetadata:p,sendToShellChannel:P,shellRef:A,performPaneOperation:i,openSearchAndReplace:g,openAIWithMessage:w,currentPromptLineNumber:k,isGeneratePromptVisible:R,onOpenGeneratePrompt:function(){(0,a1.j)(a1.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell"}),I(!0)},onCloseGeneratePrompt:function(){return I(!1)}})}var pZ=n(36238),px=n(72121),pC=(0,g.X)({root:[w.l0.pt(16),w.l0.p(8)],center:[w.l0.width("100%"),w.l0.maxWidth(600),w.l0.colWithGap(4),{marginLeft:"auto",marginRight:"auto","@container (min-width: 400px)":[w.l0.maxWidth(800)],"@container (min-width: 1200px)":[w.l0.maxWidth(1400)]}],title:[],content:[w.l0.pt(8),w.l0.colWithGap(16)],search:[w.l0.rowWithGap(8),w.l0.width("100%")],searchInput:[w.l0.flex.grow(1)],packages:[w.l0.colWithGap(16)],checkboxContainer:[w.l0.rowWithGap(8),w.l0.align.center]}),p_=function(){};function pS(e){var t=e.openConsole,n=(0,fn.I)().configs,r=(0,P.Z)(function(){return n.find(function(e){return"nix"===e.id})},[n]),i=(0,c._)((0,_.useState)(null),2),o=i[0],a=i[1],l=(0,c._)((0,_.useState)(!1),2),s=l[0],d=l[1],f=null;f=s?(0,u.tZ)(hX,{}):null!==o?(0,u.tZ)(hH,{results:o,openConsole:t}):(null==r?void 0:r.id)?(0,u.tZ)(hN,{openFile:p_,openConsole:t},r.id):null;var h=(0,_.useId)(),p=(0,c._)((0,_.useState)({nixOpts:{filterBuilt:!0}}),2),g=p[0],y=p[1],b=g.nixOpts.filterBuilt,w=(0,_.useCallback)(function(e){d(!0),y(function(t){return{nixOpts:(0,L._)((0,N._)({},t.nixOpts),{filterBuilt:e})}})},[d,y]);return(0,u.tZ)(hK,{config:r,children:(0,u.tZ)(v.G,{css:pC.root,children:(0,u.BX)(v.G,{css:pC.center,children:[(0,u.tZ)(m.h4,{css:pC.title,level:2,variant:"subheadBig",children:"System Dependencies"}),(0,u.BX)(v.G,{css:pC.content,children:[(null==r?void 0:r.packageSearch)?(0,u.BX)(v.G,{css:pC.search,children:[(0,u.tZ)(hU,{css:pC.searchInput,onResults:a,onLoading:d,searchOpts:g}),(0,u.BX)(v.G,{css:pC.checkboxContainer,children:[(0,u.tZ)(o_.X,{id:h,checked:b,onChange:w}),(0,u.tZ)(px.Z,{children:"Filter out uncached packages"})]})]}):null,(0,u.tZ)(v.G,{css:pC.packages,children:f})]})]})})})}var pk=d.Dy.Object({type:d.Dy.Literal("systemDependencies")}),pE={Content:function(e){var t=e.options;return(0,u.tZ)(pS,{openConsole:function(){t.performPaneOperation({operation:"open",pane:{type:"runnerOutput"},secondary:!0})}})},Icon:function(e){var t=e.size;return(0,u.tZ)(pZ.Z,{size:t})},getTitle:function(){return"System Dependencies"},decode:function(e){return f.B4.Decode(pk,e)}},pT=n(86858),pR=d.Dy.Object({type:d.Dy.Literal("unitTests")}),pI={Content:function(e){var t=e.options,n=(0,pa.nC)(),r=(0,C.dr)();function i(){var e=n().find(function(e){var t=(0,c._)(e,2);return"runnerOutput"===(t[0],t[1].type)});if(e)return e[0]}return(0,u.tZ)(v.G,{css:[w.l0.p(8),B.F3],children:(0,u.tZ)(pT.Z,{getRunnerOutput:function(){var e=i();if(e||t.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=i()){var n=r(e);if((null==n?void 0:n.type)==="runnerOutput")return n}}})})},Icon:function(e){var t=e.size;return(0,u.tZ)(nQ.Z,{size:t})},getTitle:function(){return"Unit Tests"},decode:function(e){return f.B4.Decode(pR,e)}},pD=n(28266),pB=n.n(pD),pG=n(69977),pA=n(21625),pP=n(66810);(g$=ya||(ya={})).Connecting="Connecting",g$.Connected="Connected",g$.Disconnected="Disconnected",g$.Errored="Errored";var pN="VNC_PASSWORD";function pL(e){var t,r,i,o,a=e.fs,l=e.container,s=(0,c._)((0,_.useState)(null),2),d=s[0],f=s[1],h=(0,c._)((0,_.useState)(void 0),2),p=h[0],m=h[1],v=(0,c._)((0,_.useState)(!1),2),g=v[0],y=v[1],w=(0,c._)((0,_.useState)("Connecting"),2),Z=w[0],x=w[1],C=(0,c._)((0,_.useState)(null),2),S=C[0],k=C[1],E=(0,c._)((0,_.useState)(!1),2),T=E[0],R=E[1],I=(0,c._)((0,_.useState)(!1),2),D=I[0],B=I[1],G=(0,_.useRef)(0),A=(0,_.useRef)(!1),P=(r=(t=(0,c._)((0,_.useState)(null),2))[0],i=t[1],o=(0,pA.Z)(l),(0,_.useEffect)(function(){if(!r){if(l.getConnectionState()===pP.em.CONNECTED){if(!o)return;i((0,df.hw)(o.replace("http","ws"),pP.Y8).toString());return}return l.onConnectionStateChanged(function(e){e===pP.em.CONNECTED&&o&&i((0,df.hw)(o.replace("http","ws"),pP.Y8).toString())})}},[o,r,l]),{vncUrl:r}).vncUrl;(0,a1.j)(a1.U3.VNC_OPENED),(0,_.useEffect)(function(){return A.current=!0,function(){A.current=!1}},[]);var N=(0,c._)((0,_.useState)(null),2),L=N[0],O=N[1],U=(0,_.useRef)(function(){return null});(0,_.useEffect)(function(){U.current()},[L]);var M=(0,cw.Z)(function(e){return O(e.width&&e.height?{width:e.width,height:e.height}:null)},{type:"throttle",wait:100}),X=(0,_.useRef)(function(e){});(0,_.useEffect)(function(){X.current(D)},[D]),(0,_.useEffect)(function(){if(!d){var e=!1;return n.e(994).then(n.bind(n,30994)).then(function(t){e||f(t)}),function(){e=!0}}},[d]),(0,_.useEffect)(function(){"Disconnected"===Z&&setTimeout(function(){x("Connecting")},Math.random()*(Math.pow(2,G.current)-1)*1e3)},[Z]),(0,_.useEffect)(function(){if("Disconnected"===Z){var e=setTimeout(function(){x("Connecting")},Math.random()*(Math.pow(2,G.current)-1)*1e3);return function(){clearTimeout(e)}}},[Z]);var F=(0,eb.Z)();(0,_.useEffect)(function(){if(P&&S&&d&&"Connecting"===Z){G.current++;var e=d.default,t=l.getConnectionMetadata(),n={credentials:{username:null==t?void 0:t.token,password:p||""}};(0,a1.j)(a1.U3.VNC_CONNECTED);var r=new e(S,P,n);r.scaleViewport=!0,r.resizeSession=!0;var i=function(){G.current=0,x("Connected")},o=function(e){var t=e.detail.capabilities.audio;R(void 0!==window.MediaSource&&!!t)},c=function(e){if(U.current=function(){return null},X.current=function(e){},r.removeEventListener("securityfailure",s),r.removeEventListener("disconnect",c),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),!e.detail.clean){var t=l.getConnectionMetadata(),n=t?(0,pG.he)(t.token):null;(0,a1.j)(a1.U3.VNC_ERRORED,{vncUrl:P,replId:F,cluster:null==n?void 0:n.cluster}),x("Errored");return}x("Disconnected")},s=function(){var e,t=function(){y(!0)};(e=(0,tl._)(function(){var e,n,r;return(0,tc.Jh)(this,function(i){switch(i.label){case 0:return[4,a.readFile(".env")];case 1:if((e=i.sent()).error||(n=e.content.toString("utf8"),!(pN in(r=cH.Z.parse(n)))))return t(),[2];return m(r[pN]),[2]}})}),function(){return e.apply(this,arguments)})().catch(function(e){return tu.Tb(e)})};return r.addEventListener("connect",i),r.addEventListener("capabilities",o),r.addEventListener("disconnect",c),r.addEventListener("securityfailure",s),U.current=function(){return r._windowResize()},R(!1),B(!1),X.current=function(t){t?((0,a1.j)(a1.U3.VNC_AUDIO_ENABLED),r.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):r.disableAudio()},function(){A.current||(U.current=function(){return null},X.current=function(e){},r.removeEventListener("securityfailure",s),r.removeEventListener("disconnect",c),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),r.disconnect())}}},[d,S,l,P,a,p,Z,F]);var W="vnc-output-".concat(Z.toLowerCase());return(0,u.BX)("div",{className:"jsx-612fb0831fb3a82c vnc",children:[T?(0,u.BX)("label",{className:"jsx-612fb0831fb3a82c vnc-audio",children:["\uD83C\uDFA7"," ",(0,u.tZ)("input",{type:"checkbox",checked:D,onChange:function(e){return B(e.target.checked)},className:"jsx-612fb0831fb3a82c"})]}):null,(0,u.tZ)("div",{ref:function(e){M(e),k(e)},"data-cy":W,className:"jsx-612fb0831fb3a82c vnc-target"}),"Connecting"===Z||"Disconnected"===Z?(0,u.tZ)("div",{className:"jsx-612fb0831fb3a82c vnc-overlay",children:(0,u.tZ)(b.Z,{size:32})}):null,"Errored"===Z?(0,u.tZ)(pU,{vncUrl:P,onRetry:function(){return x("Connecting")}}):null,(0,u.tZ)(rs.u,{isOpen:g,onRequestClose:function(){return y(!1)},children:(0,u.tZ)(h8.Z,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return y(!1)},onConfirm:function(e){m(e),y(!1)}})}),(0,u.tZ)(pB(),{id:"612fb0831fb3a82c",children:".vnc.jsx-612fb0831fb3a82c{position:relative}.vnc.jsx-612fb0831fb3a82c,.vnc-target.jsx-612fb0831fb3a82c{height:100%;width:100%}.vnc-audio.jsx-612fb0831fb3a82c{position:absolute;bottom:0;right:0;padding:.2em}.vnc-overlay.jsx-612fb0831fb3a82c{top:0;position:absolute;height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(0,0,0,.85);color:var(--white)}"})]})}var pO=(0,g.X)({root:[w.l0.coverContainer,w.l0.center,w.l0.p(16)],inner:[w.l0.colWithGap(8),w.l0.width(250)],diagnosisContent:[w.l0.py(8)]});function pU(e){var t=e.vncUrl,n=e.onRetry,r=null;return t&&(r=(0,u.tZ)(es.Q,{headerContent:"Diagnosis",children:(0,u.tZ)(v.G,{css:pO.diagnosisContent,children:(0,u.tZ)(c3.ZP,{children:"If you see a browser error, it's possible that your ISP have security settings blocking the URL. Please contact your ISP and ask them to unblock the URL above. Here are the support links for common ISPs:\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n"})})})),(0,u.tZ)(v.G,{css:pO.root,children:(0,u.BX)(v.G,{css:pO.inner,children:[(0,u.tZ)(ru.E,{colorway:"warning",text:"There was an error connecting to the server"}),r,(0,u.tZ)(X.zx,{iconLeft:(0,u.tZ)(nL.Z,{}),text:"Try again",onClick:n})]})})}var pM=d.Dy.Object({type:d.Dy.Literal("vnc")}),pX={Content:function(){return(0,u.tZ)(pF,{})},Icon:function(e){var t=e.size;return(0,u.tZ)(dc.Z,{size:t})},getTitle:function(){return"Output"},decode:function(e){return f.B4.Decode(pM,e)}};function pF(){var e=(0,Z.Z)(),t=e.fs,n=e.container;return(0,u.tZ)(v.G,{css:[w.l0.flex.growAndShrink(1)],children:(0,u.tZ)(pL,{fs:t,container:n})})}var pW=n(36214),pH=n(54501),pV=n(90079),pz=n(98001),pj=n(80012),pq=n(15229);function pJ(){var e=(0,ew._)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return pJ=function(){return e},e}var pY={},pK=(0,eZ.Ps)(pJ());function p$(e){var t=e.event,n=t.input,r=t.output,i=t.error,o=t.start,a=t.end,l=t.cached,s=(0,c._)((0,_.useState)(!0),2),d=s[0],f=s[1],h=(0,_.useCallback)(function(){return f(function(e){return!e})},[]),p="bash"===n[0]&&"-c"===n[1]?n.slice(2).join(" "):n.join(" "),m=r.trimEnd();return(0,u.BX)(v.G,{css:[(0,pj.ec)(i?"negative":"positive"),l?{opacity:.75}:void 0,w.l0.borderRadius(8)],children:[(0,u.BX)(v.G,{onClick:h,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&h()},tabIndex:0,css:[w.l0.rowWithGap(4),w.l0.justify.spaceBetween,w.l0.py(4),w.l0.px(8),w.l0.font.code,w.l0.cursor.pointer],children:[(0,u.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",p]}),(0,u.BX)("span",{css:[w.l0.color.foregroundDimmer,w.l0.flex.shrink(0)],children:[i?(0,u.tZ)("span",{css:[w.l0.mr(16)],children:i}):null,l?(0,u.tZ)("span",{children:"CACHED"}):(0,u.BX)("span",{children:[a-o," ms"]})]})]}),d?null:(0,u.tZ)(v.G,{css:[w.l0.px(2),w.l0.pb(2),w.l0.borderRadius(0,0,8,8)],children:(0,u.tZ)(F.Tg,{elevated:!0,css:[w.l0.p(8),w.l0.borderRadius(8)],children:(0,u.tZ)(pz.Z,{code:m})})})]})}var pQ=n(90029),p0=n(6498),p1=n(57117);function p2(e){var t=e.t,n=e.children;return(0,u.BX)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,u.BX)(m.xv,{css:{minWidth:"8em"},multiline:!1,children:[t,":"," "]}),(0,u.tZ)("span",{children:n})]})}var p3=n(59452),p4=n(20025),p8=(0,g.X)({container:[w.l0.colWithGap(8),w.l0.height("100%"),w.l0.position.relative],controls:[w.l0.colWithGap(8),w.l0.px(4),w.l0.pb(8),w.l0.backgroundColor.backgroundDefault],filters:[w.l0.rowWithGap(4),w.l0.justify.spaceBetween]}),p6=(0,g.X)({in:[w.l0.color.greenStrongest],out:[w.l0.color.redStrongest],error:[w.l0.color.magentaStrongest]}),p5=[w.l0.flex.row,w.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],p9=(0,g.X)({clickable:(0,s._)(p5),clickableHighlighted:(0,s._)(p5).concat([w.l0.backgroundColor.accentPositiveDimmer]),inner:[w.l0.flex.grow(1),w.l0.rowWithGap(4),w.l0.maxWidth("100%")],log:[w.l0.flex.growAndShrink(1),{opacity:.5}],row:[w.l0.my(4),w.l0.mx(4)],timestamp:[w.l0.fontSize(13),{cursor:"pointer"}]});function p7(e){var t,n=e.log,r=e.filters,i=e.timeRef,o=e.setTimeRef,a=(0,_.useMemo)(function(){return r.highlightOnly&&(0,p4.cF)(n,r)},[r,n]),l=null!==(t=n.cmd.channel)&&void 0!==t?t:0,s=(0,_.useMemo)(function(){var e=(0,N._)({},n.cmd);return delete e.channel,{cleaned:e,formatted:JSON.stringify(e,null,2)}},[n]),d=i?n.timestamp-i:n.timestamp,f=(0,c._)((0,p1.Z)(!0),2),h=f[0],p=f[1];return(0,u.BX)(v.G,{css:p9.row,children:[(0,u.tZ)(v.G,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:a?p9.clickableHighlighted:p9.clickable,children:(0,u.BX)(v.G,{css:p9.inner,children:[(0,u.tZ)(m.xv,{className:"icon",multiline:!1,children:"in"===n.dir?(0,u.tZ)(v.G,{css:p6.in,children:"→"}):"out"===n.dir?(0,u.tZ)(v.G,{css:p6.out,children:"←"}):(0,u.tZ)(v.G,{css:p6.error,children:"⚠"})}),(0,u.tZ)(m.xv,{className:"link",multiline:!1,children:(0,u.BX)("code",{children:["#",l," - ",n.channel.service,n.channel.name?"::".concat(n.channel.name):""]})}),(0,u.tZ)(m.xv,{css:p9.log,multiline:!1,children:(0,u.tZ)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:s.formatted})}),null!=d&&(0,u.tZ)(v.G,{style:{opacity:.5},onClick:function(){o(n.timestamp)},children:(0,u.tZ)(m.xv,{css:p9.timestamp,multiline:!1,children:n.timestamp===i?"(reference)":(0,u.BX)(u.HY,{children:[d.toFixed(0)," ms"]})})})]})}),!h&&(0,u.tZ)(u.HY,{children:void 0!==s.cleaned&&(0,u.tZ)(p3.g,{name:"cmd",src:s.cleaned})})]})}var me=(0,g.X)({listContainer:[w.l0.position.relative,w.l0.height("100%")],listScroller:[w.l0.overflow("auto"),w.l0.coverContainer],listBox:[w.l0.width("100%"),w.l0.position.relative],listItem:[w.l0.position.absolute,w.l0.top(0),w.l0.left(0),w.l0.width("100%")]}),mt=(0,_.memo)(function(e){var t=e.logs,n=e.filters,r=e.timeRef,i=e.setTimeRef,o=(0,_.useRef)(null),a=(0,t9.MG)({count:t.length,getScrollElement:function(){return o.current},getItemKey:function(e){return t[e].id},estimateSize:function(){return 30},overscan:10});return(0,u.tZ)("div",{css:me.listContainer,children:(0,u.BX)("div",{ref:o,css:me.listScroller,children:[(0,u.tZ)("div",{css:me.listBox,style:{height:"".concat(a.getTotalSize(),"px")},children:a.getVirtualItems().map(function(e){var o=e.index,l=e.key,c=e.start,s=t[o];return s?(0,u.tZ)("div",{"data-index":o,ref:a.measureElement,css:me.listItem,style:{transform:"translateY(".concat(c,"px)")},children:(0,u.tZ)(p7,{log:s,filters:n,timeRef:r,setTimeRef:i})},l):null})}),(0,u.tZ)("div",{className:"bottom-anchor"})]})})}),mn=function(e){var t=e.filters,n=e.updateFilters;return(0,u.BX)(v.G,{css:w.l0.colWithGap(4),children:[(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,u.tZ)(U.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=(0,c._)(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{t=new RegExp(i,o)}catch(e){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:"Channel (comma separated ids, clear to reset)"}),(0,u.tZ)(U.II,{id:"channels",onChange:function(e){n({channels:e.currentTarget.value.split(",").map(function(e){return e.trim()}).map(Number).filter(function(e){return!isNaN(e)})})},placeholder:"1,2,3"}),(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,u.tZ)(as.E,{css:w.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t=e.target.value;n({direction:"in"===t||"out"===t||""===t?t:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map(function(e){return(0,u.BX)(v.G,{css:[w.l0.rowWithGap(8)],children:[(0,u.tZ)(as.Y,{id:e.val,value:e.val}),(0,u.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)})}),(0,u.tZ)(m.xv,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,u.tZ)(as.E,{css:w.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map(function(e){return(0,u.BX)(v.G,{css:[w.l0.rowWithGap(8)],children:[(0,u.tZ)(as.Y,{id:e.val,value:e.val}),(0,u.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)})})]})},mr=n(33980),mi=n(75958),mo=n(46547),ma=n(30124),ml=n(48311),mc=n(71462),ms=n(48342);function mu(){var e=(0,ew._)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return mu=function(){return e},e}function md(){var e=(0,ew._)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return md=function(){return e},e}var mf={},mh=(0,eZ.Ps)(mu()),mp=(0,eZ.Ps)(md(),mh),mm=n(79834),mv=n(49500),mg=n(47726),my=n(36556);function mb(e){var t=e.sessionId,n=(0,c._)((0,_.useState)(!1),2),r=n[0],i=n[1],o=(0,c._)((0,_.useState)(""),2),a=o[0],l=o[1],s=(0,c._)((0,_.useState)(!1),2),d=s[0],f=s[1],h=(0,o2.Z)().showConfirm,p=(0,ab.U)();return null==t?(0,u.tZ)(v.G,{children:(0,u.tZ)(m.xv,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,u.BX)(v.G,{css:[w.l0.colWithGap(8)],children:[(0,u.BX)(m.xv,{variant:"small",multiline:!1,children:["RUM Session ID: ",t]}),(0,u.tZ)(m.xv,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,u.BX)(v.G,{css:[w.l0.colWithGap(16)],children:[(0,u.tZ)(U.B,{id:p("message"),placeholder:"What can we do better?",value:a,onChange:function(e){return l(e.target.value)},disabled:r}),(0,u.BX)(v.G,{css:[w.l0.rowWithGap(8)],children:[(0,u.tZ)(o_.X,{id:p("issueInRecording"),checked:d,onChange:function(e){return f(e)}}),(0,u.tZ)("label",{htmlFor:p("issueInRecording"),children:(0,u.tZ)(m.xv,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,u.tZ)(X.zx,{onClick:function(){var e=uP()();i(!0),(0,my.fc)({name:"replitOnReplit:issue",context:{message:a,issueInRecording:d,customEventId:e}}),h("Issue submitted! Have a cookie \uD83C\uDF6A",5e3),setTimeout(function(){i(!1),l(""),f(!1)},5e3)},text:"Submit",disabled:r||0===a.trim().length,colorway:"primary"})]})]})}var mw=n(66451),mZ={"Session state":function(){var e=(0,r7.Yz)();return(0,u.tZ)(mc.Z,{json:e})},"File context":function(){var e=(0,r7.Tt)(),t=(0,pa.AA)(),n=(0,c._)((0,pm.N)(),1)[0],r=(0,r7.Bk)(),i=(0,Z.Z)(),o=i.fs,a=i.dotReplit,l=(0,mw.G)(o,a),s=(0,c._)((0,_.useState)(null),2),d=s[0],f=s[1];return(0,_.useEffect)(function(){var i=!1;function o(){return(o=(0,tl._)(function(){var o;return(0,tc.Jh)(this,function(a){switch(a.label){case 0:return[4,l({model:"advanced"===n&&r()?pp.BY.ADVANCED:pp.BY.BASIC,filePreferences:e,recentFiles:t()})];case 1:if(o=a.sent(),i)return[2];return f(o),[2]}})})).apply(this,arguments)}return function(){o.apply(this,arguments)}(),function(){i=!0}},[t,e,n,r,l]),(0,u.tZ)(mc.Z,{json:d})}};(gQ=yl||(yl={})).Repl="repl",gQ.Logs="logs",gQ.LSP="lsp",gQ.AI="ai",gQ.GhostwriterChat="aiChat",gQ.Git="git",gQ.History2="history2",gQ.Metadata="metadata",gQ.Override="override",gQ.DDRum="rum";var mx=(yc={},(0,eB._)(yc,"repl",function(){var e,t,n,r,i,o,a,l,c,s=(0,eb.Z)(),d=(e=(0,N._)({},mf,{variables:{replId:s}}),ex.a(mp,e)).data,f=(0,mm.r9)(),h=(null==d?void 0:d.repl.__typename)==="Repl"?JSON.parse(JSON.stringify(d.repl)):void 0;return h&&(delete h.__typename,null===(t=h.user)||void 0===t||delete t.__typename,null===(n=h.origin)||void 0===n||delete n.__typename,delete h.config.__typename,null===(r=h.source)||void 0===r||delete r.__typename,null===(o=h.source)||void 0===o||null===(i=o.release)||void 0===i||delete i.__typename,null===(c=h.source)||void 0===c||null===(l=c.release)||void 0===l||null===(a=l.repl)||void 0===a||delete a.__typename),(0,u.BX)(v.G,{css:[w.l0.colWithGap(16),w.l0.p(4)],children:[(0,u.tZ)(ms.Z,{replId:s}),(0,u.tZ)("div",{className:"jsx-3187c500f6b377b0",children:h?(0,u.tZ)(mc.Z,{json:h}):null}),(0,u.tZ)(X.zx,{text:"Assign pid2 client to window for testing",onClick:function(){window.pid2=f,mv.log("window.pid2: ",f)}}),(0,u.tZ)(pB(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})}),(0,eB._)(yc,"logs",function(e){var t=e.isHidden,n=(0,c._)((0,p1.Z)(!1),2),r=n[0],i=n[1],o=(0,c._)((0,_.useState)(null),2),a=o[0],l=o[1],s=(0,p4.gd)(),d=(0,p4.qc)(),f=(0,p4.$G)(),p=(0,p4.mN)(),m=(0,p4.Ay)(),g=(0,p4._t)();return t?null:(0,u.BX)(v.G,{css:p8.container,children:[(0,u.BX)(v.G,{css:p8.controls,children:[(0,u.tZ)(X.zx,{colorway:d?void 0:"positive",onClick:f,text:d?"Stop logging goval":"Start logging goval"}),(0,u.BX)(v.G,{css:p8.filters,children:[(0,u.tZ)(X.zx,{onClick:i,text:r?"Hide filters":"Show filters"}),a?(0,u.tZ)(X.zx,{onClick:function(){return l(null)},text:"Reset Time Ref"}):null,(0,u.tZ)(h.hU,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(s)),t=document.createElement("a");t.setAttribute("href",e);var n=new Date().toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,u.tZ)(y.Z,{})}),(0,u.tZ)(X.zx,{colorway:"negative",onClick:function(){return g()},text:"Clear logs"})]}),r?(0,u.tZ)(mn,{filters:p,updateFilters:function(e){m((0,N._)({},p,e))}}):null]}),(0,u.tZ)(mt,{logs:s,filters:p,timeRef:a,setTimeRef:l})]})}),(0,eB._)(yc,"lsp",p3.L),(0,eB._)(yc,"ai",pV.ho),(0,eB._)(yc,"aiChat",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isHidden;return e?null:(0,u.tZ)(v.G,{children:(0,u.BX)(dT.mQ,{children:[(0,u.tZ)(dT.td,{"aria-label":"Tabs",children:Object.keys(mZ).map(function(e){return(0,u.tZ)(dT.OK,{children:e},e)})}),(0,u.tZ)(dT.nP,{children:Object.entries(mZ).map(function(e){var t=(0,c._)(e,2),n=t[0],r=t[1];return(0,u.tZ)(dT.x4,{children:(0,u.tZ)(r,{})},n)})})]})})}),(0,eB._)(yc,"git",function(){var e,t=(0,c._)((0,_.useState)([]),2),n=t[0],r=t[1],i=(e=(0,N._)({},pY,void 0),ex.a(pK,e)).data,o=(0,da.Z)(pq.e);return(0,_.useEffect)(function(){o&&r(function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,s._)(e)).slice(0,100)})},[o]),(0,u.BX)(v.G,{css:[w.l0.p(8)],children:[(0,u.BX)(F.Tg,{elevated:!0,css:[w.l0.borderRadius(8),w.l0.p(8),w.l0.mb(8)],children:[(0,u.tZ)("span",{children:"Git Service Connection Info"}),(0,u.tZ)("pre",{children:(null==i?void 0:i.currentUser)?JSON.stringify(i,function(e,t){return"accessToken"===e?"censored":t},2):"No gitHubInfo"})]}),(0,u.tZ)(v.G,{css:[w.l0.colWithGap(4)],children:n.length?n.map(function(e){return(0,u.tZ)(p$,{event:e},e.key)}):"No events yet..."})]})}),(0,eB._)(yc,"history2",function(){var e=(0,ab.U)()("toggleIsShowingChanges"),t=(0,da.Z)(a4.BI)(),n=(0,da.Z)(a4.Jp)(),r=(0,c._)((0,p1.Z)(!1),2),i=r[0],o=r[1];if(!t)return null;var a=t.filePath,l=t.changes,s=t.users,d=t.version,f=t.playing,h=t.count,p=l[d];if(!p)return(0,u.BX)(v.G,{children:[(0,u.BX)("div",{children:["Change at ",d," not found. Here's the state"]}),(0,u.tZ)("pre",{children:JSON.stringify(t,null,2)})]});var m=null==s?void 0:s[p.userId],g=p.timestamp,y=i&&n?function(e,t){try{return(0,p0.ed)(e,t).op}catch(e){return e}}(p.changes,n.state.doc.sliceString(0)):null;return(0,u.BX)(v.G,{css:[w.l0.colWithGap(16),w.l0.p(4)],children:[(0,u.BX)(v.G,{css:[w.l0.colWithGap(4)],children:[(0,u.tZ)(p2,{t:"File",children:(0,u.tZ)("pre",{children:a})}),(0,u.BX)(p2,{t:"Version",children:[d," / ",h-1]}),(0,u.tZ)(p2,{t:"Playing",children:(0,u.tZ)(pQ.Z,{children:f?"true":"false"})}),(0,u.tZ)(p2,{t:"Date",children:(0,u.tZ)(nr.EK,{date:g})})]}),m?(0,u.BX)(v.G,{children:[(0,u.tZ)(p2,{t:"Author",children:m.username}),(0,u.BX)(v.G,{css:[w.l0.pl(8),w.l0.colWithGap(4)],children:[(0,u.tZ)(p2,{t:"ID",children:m.id}),(0,u.tZ)(p2,{t:"Name",children:m.username}),(0,u.tZ)(p2,{t:"Image",children:(0,u.tZ)("a",{href:m.image,children:m.image})})]})]}):null,(0,u.BX)(v.G,{css:[w.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,u.tZ)(a9.Z,{id:e,isOn:i,onChange:o}),(0,u.tZ)("label",{htmlFor:e,children:"Changes"})]}),p?null:"No changes",i&&p?(0,u.tZ)(u.HY,{children:(0,u.BX)(v.G,{children:[(0,u.tZ)(p2,{t:"Changeset",children:(0,u.tZ)("pre",{children:JSON.stringify(p,null,2)})}),n?(0,u.tZ)(u.HY,{children:(0,u.BX)(v.G,{css:[w.l0.mt(4)],children:[(0,u.tZ)(p2,{t:"OT",children:(0,u.tZ)("pre",{children:JSON.stringify(y,null,2)})}),(0,u.tZ)("p",{children:(0,u.BX)("small",{children:["Note that the OT value is translated ",(0,u.tZ)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})}),(0,eB._)(yc,"metadata",function(){var e=(0,Z.Z)().container;(0,mr.Z)(e);var t=e.getConnectionMetadata();if(!t)return(0,u.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,r=new URL(t.conmanURL).host,i='./conman-repl -t "'.concat(n,'" -u ').concat(r);return(0,u.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,u.BX)(v.G,{css:w.l0.rowWithGap(2),children:[(0,u.BX)(m.xv,{css:w.l0.flex.shrink(1),multiline:!1,children:["conman Repl command: ",(0,u.tZ)(pQ.Z,{children:i})]}),(0,u.tZ)(h.hU,{alt:"Copy to clipboard",onClick:function(){return(0,M.Z)(i)},children:(0,u.tZ)(cF.Z,{})})]}),(0,u.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,u.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(t,null,2)})]}),(0,u.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,u.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,u.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,u.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,pG.he)(t.token),null,2)})]}),(0,u.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,u.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,u.tZ)(pB(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})}),(0,eB._)(yc,"override",function(){var e,t,n=(0,c._)((0,_.useState)(mi.Z.get("gurl","string")||""),2),r=n[0],i=n[1],o=(0,c._)((0,_.useState)(mi.Z.get("pid2Version","string")||""),2),a=o[0],l=o[1],s=(0,c._)((0,_.useState)(""),2),d=s[0],f=s[1],h=u$(),p=""===r?"null":JSON.stringify((0,mo.t)(r),null,2);return(0,u.BX)(v.G,{css:[w.l0.pt(16),w.l0.px(12),w.l0.colWithGap(12)],children:[(0,u.BX)(v.G,{css:[w.l0.colWithGap(12)],children:[(0,u.tZ)(ml.ZP,{label:"Custom pid2 version",placeholder:"pid2 hash (e.g. 76ce274246bb7a07f908076d3a74a0171c3267fb)",value:a,onChange:function(e){return l(e.currentTarget.value)}}),(0,u.BX)("p",{children:[(0,u.tZ)("code",{children:"pid2"})," version:"," ",(0,u.tZ)("code",{children:null!==(t=null!==(e=mi.Z.get("pid2Version","string"))&&void 0!==e?e:"d27252478990fb30da11e9645326b36bf15c8f39")&&void 0!==t?t:"dev"})]}),(0,u.BX)(v.G,{css:[w.l0.rowWithGap(12)],children:[(0,u.tZ)(ma.Z,{color:"yellow",onClick:function(){mi.Z.set("pid2Version",a),window.location.reload()},children:"Set pid2Version and reload"}),(0,u.tZ)(ma.Z,{color:"orange",onClick:function(){mi.Z.remove("pid2Version"),window.location.reload()},children:"Unset pid2Version and reload"})]})]}),(0,u.tZ)("hr",{css:[w.l0.my(16),{borderColor:w.TV.outlineDefault}]}),(0,u.BX)(v.G,{css:[w.l0.colWithGap(12)],children:[(0,u.tZ)(ml.ZP,{label:"Custom gurl",placeholder:"ws://localhost:".concat(4560),value:r,onChange:function(e){return i(e.currentTarget.value)}}),(0,u.BX)("pre",{children:["metadata override preview:",p]}),(0,u.BX)(v.G,{css:[w.l0.rowWithGap(12)],children:[(0,u.tZ)(ma.Z,{color:"positive",onClick:function(){mi.Z.set("gurl",r),window.location.reload()},children:"Set gurl and reload"}),(0,u.tZ)(ma.Z,{color:"yellow",onClick:function(){mi.Z.set("gurl","wss://eval.canary.replit.com"),window.location.reload()},children:"Switch to canary & reload"}),(0,u.tZ)(ma.Z,{color:"orange",onClick:function(){mi.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"}),(0,u.tZ)(ma.Z,{color:"red",onClick:function(){mi.Z.set("gurl","ws://localhost:4560"),window.location.reload()},children:"Switch to localhost & reload"})]}),(0,u.tZ)("div",{children:mi.Z.get("gurl","string")?"currently in localStorage: ".concat(mi.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,u.tZ)("p",{children:"Gurl order of precedence:"}),(0,u.BX)("ol",{style:{margin:12},children:[(0,u.tZ)("li",{children:"‘gurl’ in localStorage (set above)"}),(0,u.BX)("li",{children:["If in development webapp and a there’s a response from",(0,u.tZ)("code",{children:"https://localhost:4563"})," or",(0,u.BX)("code",{children:["http://localhost:",4560]}),", then it will use that."]}),(0,u.BX)("li",{children:["default is ",(0,u.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]}),(0,u.tZ)("hr",{css:[w.l0.my(16),{borderColor:w.TV.outlineDefault}]}),(0,u.BX)(v.G,{css:[w.l0.colWithGap(12)],children:[(0,u.tZ)(m.xv,{multiline:!1,children:"Override Database"}),(0,u.tZ)(ml.ZP,{type:"text",value:d,onChange:function(e){f(e.target.value)}}),(0,u.tZ)(v.G,{css:[w.l0.rowWithGap(8)],children:(0,u.tZ)(ma.Z,{color:"positive",onClick:function(){h(d)},children:"Override Postgres connection string"})})]})]})}),(0,eB._)(yc,"rum",function(){var e,t=null===(e=mg.v.getInternalContext())||void 0===e?void 0:e.session_id,n=mg.v.getInitConfiguration(),r=null!=n&&100===n.sampleRate,i=(0,c._)((0,_.useState)(null!=t),2),o=i[0],a=i[1];return(0,u.tZ)(v.G,{css:[w.l0.colWithGap(16),w.l0.p(4)],children:r?(0,u.BX)(u.HY,{children:[(0,u.tZ)(X.zx,{onClick:o?function(){mg.v.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,my.Oo)({name:"replitOnReplit"}),setTimeout(function(){a(!0)},1e3)},text:o?"\uD83D\uDD34 Recording... Click to stop and reload page":"Start Recording",colorway:o?void 0:"primary",css:(0,N._)({},o&&ep.p.backgroundPulse(w.TV.redDimmest,w.TV.redDimmer))}),o?(0,u.tZ)(mb,{sessionId:t}):null]}):(0,u.tZ)(X.zx,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})}),yc),mC=Object.values(yl),m_=(0,g.X)({surface:[w.l0.colWithGap(8),w.l0.p(4),w.l0.height("100%")],tabs:[{flexWrap:"wrap",flexDirection:"row",gap:"4px"}],tab:[w.l0.flex.growAndShrink(1),w.l0.overflow("auto")],content:[w.l0.flex.grow(1)]});function mS(e){var t=e.paneOptions,n=(0,c._)((0,_.useState)("repl"),2),r=n[0],i=n[1],o=mC.map(function(e){return(0,u.tZ)(X.zx,{colorway:e===r?"primary":void 0,onClick:function(){return i(e)},text:e},e)});return(0,u.BX)(F.Tg,{background:"default",css:m_.surface,children:[(0,u.tZ)(v.G,{css:m_.tabs,children:o}),(0,u.tZ)(v.G,{css:m_.tab,children:Object.entries(mx).map(function(e){var n=(0,c._)(e,2),i=n[0],o=n[1];return(0,u.tZ)(v.G,{css:m_.content,style:{display:i!==r?"none":"inherit"},children:"override"===i&&"override"!==r?null:(0,u.tZ)(o,{isHidden:t.isHidden||r!==i})},i)})})]})}var mk=d.Dy.Object({type:d.Dy.Literal("adminPanel")}),mE={Content:function(e){var t=e.options;return(0,u.tZ)(mS,{paneOptions:t})},Icon:function(e){var t=e.size;return(0,u.tZ)(pH.Z,{color:"red",size:t})},getTitle:function(){return"Debug"},decode:function(e){return f.B4.Decode(mk,e)}},mT=(0,g.X)({header:[w.l0.flex.row,w.l0.justify.spaceBetween,w.l0.height(36)]});function mR(e){var t=e.name,n=e.onAddClick,r=e.children;return(0,u.BX)(v.G,{children:[(0,u.BX)(v.G,{css:mT.header,children:[(0,u.tZ)(m.h4,{variant:"subheadDefault",level:2,children:(0,eh.Z)(t)}),(0,u.tZ)(h.hU,{alt:"Add ".concat(t.toLowerCase()),onClick:n,children:(0,u.tZ)(ni.Z,{})})]}),(0,u.tZ)(v.G,{children:r})]})}var mI=v.K.span,mD=(0,g.X)({metadata:[w.l0.colWithGap(2)],metadataSkeleton:[w.l0.colWithGap(8),w.l0.pt(4)],metadataSkeletonVersion:[ep.p.foregroundPulse(),w.l0.height(16),w.l0.maxWidth(64),w.l0.borderRadius(4)],metadataSkeletonDescription:[ep.p.foregroundPulse(),w.l0.height(16),w.l0.borderRadius(4),w.l0.maxWidth(425)],root:[w.l0.borderRadius(8),w.l0.p(8),w.l0.colWithGap(4)],header:[w.l0.flex.row,w.l0.justify.spaceBetween],headerTitle:[w.l0.display.flex,w.l0.rowWithGap(8),w.l0.flex.growAndShrink(1)],headerTitleText:[w.l0.display.inline,w.l0.flex.growAndShrink(1),w.l0.overflow("hidden"),w.l0.truncate],headerTitlePills:[w.l0.display.inlineFlex,w.l0.rowWithGap(4),w.l0.flex.shrink(0)],headerButton:[],content:[w.l0.colWithGap(4)],error:[w.l0.mt(4)],actions:[w.l0.rowWithGap(8),w.l0.mt(8)],consoleButton:[w.l0.width("calc(50% - ".concat(w.TV.space8,")"))],cancelButton:[w.l0.width("calc(50% - ".concat(w.TV.space8,")"))],actionButton:[w.l0.flex.grow(1),w.l0.flex.shrink(0)]});function mB(e){var t=e.title,n=e.content;return(0,u.BX)(v.G,{css:mD.metadata,children:[t?(0,u.tZ)(m.xv,{color:"dimmer",children:t}):null,n?(0,u.tZ)(m.xv,{children:n}):null]})}function mG(e){var t=e.title,n=e.content;return(0,u.BX)(v.G,{css:mD.metadataSkeleton,children:[void 0===t||t?(0,u.tZ)(v.G,{css:mD.metadataSkeletonVersion}):null,void 0===n||n?(0,u.tZ)(v.G,{css:mD.metadataSkeletonDescription}):null]})}function mA(e){var t,n=e.name,r=e.pkg,i=e.isMetadataLoading,o=e.openConsole,a=e.pills,l=hf(),c=(0,fr.te)(null==l?void 0:l.id),s=(0,fr.pN)(null==l?void 0:l.id),d=(0,fr.B2)(),f=(0,fr.cW)(),h=(0,fr.wY)(),p=(0,_.useMemo)(function(){return r.license?hg()(r.license,{upgrade:!1})||(r.license.length<40?r.license:"Unknown License"):"Unknown License"},[r.license]),g=(0,_.useMemo)(function(){return!!(null!==d&&d.pkgs.find(function(e){return e.name===r.name}))},[d]),y=(0,_.useMemo)(function(){return f.find(function(e){return e.pkgs.find(function(e){return e.name===r.name})})},[f]),b=!!y,w=(0,_.useMemo)(function(){return!!c.find(function(e){return e.name===r.name})},[c]),Z=(0,_.useMemo)(function(){return!!s.find(function(e){return e.name===r.name})},[s]),x=(0,fr.jh)(),C=(0,fr.Wx)(),S=(0,fr.zi)();return(0,u.BX)(F.Tg,{css:mD.root,children:[(0,u.tZ)(v.G,{css:mD.header,children:(0,u.BX)(m.h4,{css:mD.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,u.BX)(mI,{css:mD.headerTitleText,children:[null!=n?n:r.name,r.version?(0,u.BX)(m.xv,{color:"dimmer",children:["@",r.version]}):null]}),a?(0,u.tZ)(v.G,{css:mD.headerTitlePills,children:a}):null]})}),(0,u.tZ)(v.G,{css:mD.content,children:void 0!==i&&i?(0,u.tZ)(mG,{title:!1}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(mB,{content:null!==(t=r.description)&&void 0!==t?t:"This package has no description."}),r.homepageURL?(0,u.tZ)(mB,{content:(0,u.tZ)("a",{href:r.homepageURL,rel:"noreferrer noopener",target:"_blank",children:r.homepageURL})}):null,p?(0,u.tZ)(mB,{content:p}):null,r.author?(0,u.tZ)(mB,{content:(0,u.tZ)(hw,{author:r.author})}):null]})}),Z?(0,u.tZ)(ru.E,{css:mD.error,colorway:"negative",icon:(0,u.tZ)(nq.Z,{}),text:"Couldn't ".concat(w?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,u.tZ)(v.G,{css:mD.actions,children:Z?(0,u.BX)(u.HY,{children:[(0,u.tZ)(X.zx,{css:mD.consoleButton,text:"Console",onClick:function(){o()},disabled:g||b,colorway:"primary",iconLeft:(0,u.tZ)(hm.Z,{})}),(0,u.tZ)(X.zx,{css:mD.actionButton,text:"Try Again",onClick:function(){(null==l?void 0:l.id)&&(h(l.id,[r]),w?C({id:l.id,pkg:r}):x({id:l.id,pkg:r}))},loading:g||b,colorway:w?"red":void 0,variant:w?"outlined":void 0,iconLeft:(0,u.tZ)(hx,{isInstalled:w,isInQueue:b,isCurrentAction:g})})]}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(X.zx,{css:mD.actionButton,text:g?(null==d?void 0:d.kind)===fr.TH.Install?"Installing":"Removing":b?(null==y?void 0:y.kind)===fr.TH.Install?"Waiting to install":"Waiting to remove":w?"Remove":"Install",onClick:function(){(null==l?void 0:l.id)&&(w?C({id:l.id,pkg:r}):x({id:l.id,pkg:r}))},loading:g||b,colorway:w?"red":void 0,variant:w?"outlined":void 0,iconLeft:(0,u.tZ)(hx,{isInstalled:w,isInQueue:b,isCurrentAction:g})}),b?(0,u.tZ)(X.zx,{css:mD.cancelButton,text:"Cancel",onClick:function(){r.name&&S(r.name)},disabled:g,loading:g}):null]})})]})}(g0=ys||(ys={})).Overview="Overview",g0.PackageInfo="PackageInfo",g0.FormatterInfo="FormatterInfo",g0.LanguageServerInfo="LanguageServerInfo",g0.Search="Search",(g1=yu||(yu={})).Runtime="Runtime",g1.Packager="Packager",g1.Formatter="Formatter",g1.LanguageServer="LanguageServer";var mP=n(38953),mN=n(66958),mL=(0,g.X)({root:[w.l0.colWithGap(8)],package:[w.l0.p(4),w.l0.flex.row,w.l0.align.center,w.l0.border({color:"transparent"}),w.l0.justify.spaceBetween],packageMetadata:[w.l0.rowWithGap(8),w.l0.align.center],emptyState:[w.l0.backgroundColor.backgroundOverlay,w.l0.borderRadius(0,0,4,4),w.l0.color.foregroundDimmest],packager:[w.l0.backgroundColor.backgroundHigher,w.l0.borderRadius(4)],packagerHeader:[w.l0.pl(4),w.l0.flex.row,w.l0.justify.spaceBetween,w.l0.flex.growAndShrink(1)]});function mO(e){var t=e.text,n=e.onClick;return(0,u.tZ)(X.zx,{css:mL.emptyState,text:t,iconLeft:(0,u.tZ)(ni.Z,{}),onClick:n})}var mU=[{label:"Details",icon:(0,u.tZ)(mN.Z,{}),key:"details"},{label:"Remove",icon:(0,u.tZ)(c4.Z,{}),key:"remove",isDestructive:!0}];function mM(e){var t,n=e.pkg,r=e.viewDetails,i=e.uninstall,o=hp(n),a=o?(0,L._)((0,N._)({},o),{version:null!==(t=o.version)&&void 0!==t?t:n.spec}):n;return(0,u.BX)(v.G,{css:mL.package,children:[(0,u.BX)(v.G,{css:mL.packageMetadata,children:[(0,u.tZ)(hc.Z,{}),(0,u.tZ)(m.xv,{children:n.name}),a.version?(0,u.tZ)(m.xv,{color:"dimmer",children:a.version}):null]}),(0,u.tZ)(v.G,{children:(0,u.tZ)(mP.Z,{label:"Package ".concat(n.name," menu options"),items:mU,onItemClick:function(e){switch(e.key){case"details":r();break;case"remove":i();break;default:(0,t5.Z)(e)}}})})]})}function mX(e){var t,n=e.pkg,r=e.openConsole,i=e.setViewState,o=hf(),a=hp(n),l=a?(0,L._)((0,N._)({},a),{version:null!==(t=a.version)&&void 0!==t?t:n.spec}):n,c=(null==o?void 0:o.id)==="nix"?null==a?void 0:a.prettyName:void 0;return(0,u.BX)(v.G,{children:[(0,u.tZ)(h.hU,{alt:"Back",onClick:function(){i({view:ys.Overview})},children:(0,u.tZ)(sB.Z,{})}),(0,u.tZ)(mA,{pkg:l,name:c,isMetadataLoading:null==a,openConsole:r})]})}function mF(e){var t=e.onAddPackage,n=e.name;return(0,u.BX)(v.G,{css:mL.packagerHeader,children:[(0,u.tZ)(m.xv,{children:n}),(0,u.tZ)(h.hU,{alt:"Add new package",onClick:t,children:(0,u.tZ)(ni.Z,{})})]})}function mW(e){var t=e.setViewState,n=hf(),r=(0,fr.te)(null==n?void 0:n.id),i=(0,fr.Wx)();return n?(0,u.tZ)(v.G,{css:mL.packager,children:(0,u.tZ)(es.Q,{toggleOn:"chevron",headerContent:(0,u.tZ)(mF,{name:n.name,onAddPackage:function(){t({view:ys.Search,initialContext:n})}}),children:r.length>0?r.map(function(e){return(0,u.tZ)(mM,{pkg:e,viewDetails:function(){return t({view:ys.PackageInfo,pkg:e,config:n})},uninstall:function(){i({id:n.id,pkg:e})}},e.name)}):(0,u.tZ)(mO,{text:"Add ".concat(n.title," packages..."),onClick:function(){t({view:ys.Search,initialContext:n})}})})}):null}function mH(e){var t=(0,fn.I)().configs;return(0,u.tZ)(v.G,{css:mL.root,children:t.map(function(t){return(0,u.tZ)(hK,{config:t,children:(0,u.tZ)(mW,(0,N._)({},e))},t.id)})})}var mV=(0,g.X)({item:[w.l0.borderRadius(4),w.l0.height(32),w.l0.flex.row,w.l0.align.center,w.l0.p(8)],textContainer:[w.l0.overflow("hidden"),w.l0.maxWidth("100%"),w.l0.display.inlineBlock,{whiteSpace:"nowrap",textOverflow:"ellipsis"}]});function mz(e){var t=e.title,n=e.onClick;return(0,u.tZ)(F.Tg,{elevated:!0,css:mV.item,onClick:n,children:(0,u.tZ)(v.G,{css:mV.textContainer,children:(0,u.tZ)(m.xv,{children:t})})})}var mj=(0,g.X)({runtimes:[w.l0.colWithGap(8)]});function mq(e){var t=e.configs.runs.filter(function(e){return"language:nix/run"!==e.id});return(0,u.tZ)(v.G,{css:mj.runtimes,children:t.map(function(e){return(0,u.tZ)(mz,{title:e.name},e.id)})})}var mJ=(0,g.X)({formatters:[w.l0.colWithGap(8)]});function mY(e){var t=e.configs,n=e.onFormatterClick,r=t.formatters;return(0,u.tZ)(v.G,{css:mJ.formatters,children:r.map(function(e){return(0,u.tZ)(mz,{title:e.name,onClick:function(){n(e.id)}},e.id)})})}var mK=(0,g.X)({languageServers:[w.l0.colWithGap(8)]});function m$(e){var t=e.configs,n=e.onLanguageServerClick,r=t.languageServers;return(0,u.tZ)(v.G,{css:mK.languageServers,children:r.map(function(e){return(0,u.tZ)(mz,{title:e.name,onClick:function(){n(e.id)}},e.id)})})}var mQ=n(99007),m0=n(35970),m1=(0,g.X)({root:[w.l0.flex.growAndShrink(1)],results:[w.l0.flex.growAndShrink(1)],packagerResults:[w.l0.colWithGap(8)],submoduleResults:[w.l0.colWithGap(8),w.l0.p(8)],result:[w.l0.flex.row,w.l0.align.center,w.l0.justify.spaceBetween],resultMetadata:[w.l0.rowWithGap(8)],header:[w.l0.rowWithGap(8),w.l0.p(8),w.l0.align.center],searchInput:[w.l0.flex.grow(1)],select:[w.l0.minWidth(160)]});function m2(e){var t=e.query,n=(0,c._)((0,_.useState)([]),2),r=n[0],i=n[1],o=(0,_.useRef)(0),a=hO();return(0,hL.Z)(function(){if(""===t.trim()){i([]);return}var e,n=++o.current;(e=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:return[4,a(t)];case 1:if(e=r.sent(),n!==o.current)return[2];return i(e),[2]}})}),function(){return e.apply(this,arguments)})()},[t],500),(0,u.tZ)(v.G,{css:m1.packagerResults,children:r.map(function(e){return(0,u.tZ)(hF,{pkg:e,openConsole:function(){}},e.name)})})}function m3(e,t){return t?e.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())}):e}function m4(e){var t=e.query,n=e.category,r=e.registry,i=e.modules,o=(0,Z.Z)().toolchain,a=(0,o2.Z)().showNotice,l=function(e){var t=e.query,n=e.category,r=e.registry,i=e.modules;switch(n){case yu.Runtime:return m3(r.modules,t).filter(function(e){return!i.some(function(t){return t.id===e.id})});case yu.Formatter:return m3(r.formatters,t).filter(function(e){return!i.some(function(t){return t.resolvedId===e.moduleId})});case yu.LanguageServer:return m3(r.languageServers,t).filter(function(e){return!i.some(function(t){return t.resolvedId===e.moduleId})});case yu.Packager:return m3(r.packagers,t).filter(function(e){return!i.some(function(t){return t.resolvedId===e.moduleId})});default:(0,t5.Z)(n)}}({query:t,category:n,registry:r,modules:i});return(0,u.tZ)(v.G,{css:m1.submoduleResults,children:l?l.map(function(e){var t="moduleId"in e?e.moduleId:e.path,n="".concat(e.id,"-").concat(t,"-").concat("version"in e?e.version:e.displayVersion);return(0,u.BX)(v.G,{css:m1.result,children:[(0,u.BX)(v.G,{css:m1.resultMetadata,children:[(0,u.tZ)(m.xv,{children:e.name}),e.displayVersion?(0,u.tZ)(m.xv,{color:"dimmer",children:e.displayVersion}):null]}),(0,u.tZ)(v.G,{children:(0,u.tZ)(h.hU,{alt:"Install ".concat(e.name),onClick:function(){a("Installing ".concat(e.name)),o.addModule(t)},children:(0,u.tZ)(y.Z,{})})})]},n)}):null})}function m8(e){return"string"==typeof e}var m6=[yu.Runtime,yu.Packager,yu.LanguageServer,yu.Formatter].map(function(e){return{id:e,name:(0,eh.Z)(e===yu.LanguageServer?"Language Server":e)}});function m5(e){var t,n=e.setViewState,r=e.initialContext,i=e.registry,o=e.modules,a=(0,c._)((0,_.useState)(""),2),l=a[0],d=a[1],f=(0,_.useDeferredValue)(l),p=(0,c._)((0,_.useState)(r),2),m=p[0],g=p[1],y=(0,fn.I)().configs,b=(0,s._)(m6).concat((0,s._)(y)),w=m8(r)?null===(t=m6.find(function(e){return e.id===r}))||void 0===t?void 0:t.id:r.id;return(0,u.BX)(v.G,{css:m1.root,children:[(0,u.BX)(v.G,{css:m1.header,children:[(0,u.tZ)(h.hU,{alt:"Back",onClick:function(){n({view:ys.Overview})},children:(0,u.tZ)(sB.Z,{})}),(0,u.tZ)(mQ.P,{items:b,css:m1.select,"aria-label":"Change search context",defaultSelectedKey:w,onSelectionChange:function(e){var t=m6.find(function(t){return t.id===e});if(t){g(t.id),d("");return}var n=y.find(function(t){return t.id===e});if(!n)throw Error("Expected config");g(n),d("")},children:function(e){return(0,u.tZ)(m0.m9,{id:e.id,label:e.name})}}),(0,u.tZ)(v.G,{css:m1.searchInput,children:(0,u.tZ)(nn.E,{value:l,onChange:function(e){d(e.target.value)},placeholder:function(e){if(!m8(e))return"Search ".concat(e.name.toLowerCase()," packages");switch(e){case yu.Formatter:return"Filter formatters";case yu.LanguageServer:return"Filter language servers";case yu.Packager:return"Filter packagers";case yu.Runtime:return"Filter runtimes";default:(0,t5.Z)(e)}}(m)})})]}),(0,u.tZ)(v.G,{css:m1.results,children:m8(m)?(0,u.tZ)(m4,{query:f,category:m,registry:i,modules:o}):(0,u.tZ)(hK,{config:m,children:(0,u.tZ)(m2,{query:f})})})]})}var m9=(0,g.X)({root:[w.l0.p(8),w.l0.colWithGap(8)],header:[w.l0.rowWithGap(4),w.l0.align.center],section:[w.l0.colWithGap(4)],sectionHeader:[w.l0.flex.row,w.l0.justify.spaceBetween]});function m7(e){var t=e.header,n=e.description,r=e.initialValue,i=e.rightHeaderContent,o=(0,ab.U)(),a=(0,c._)((0,_.useState)(r||""),2),l=a[0],s=a[1];return(0,u.BX)(v.G,{css:m9.section,children:[(0,u.BX)(v.G,{css:m9.sectionHeader,children:[(0,u.tZ)(m.h4,{level:2,variant:"subheadDefault",children:t}),i||null]}),(0,u.tZ)(U.II,{id:o("section-".concat(t)),value:l,onChange:function(e){return s(e.target.value)}}),(0,u.tZ)(m.xv,{color:"dimmer",variant:"small",children:n})]})}function ve(e){var t,n,r=e.id,i=e.type,o=e.configs,a=e.setViewState,l=(0,c._)((0,_.useState)(!0),2),s=l[0],d=l[1],f=i===yu.Formatter?o.formatters.find(function(e){return e.id===r}):o.languageServers.find(function(e){return e.id===r});if(!f)throw Error("Expected item");return(0,u.BX)(v.G,{css:m9.root,children:[(0,u.BX)(v.G,{css:m9.header,children:[(0,u.tZ)(h.hU,{alt:"Back",onClick:function(){a({view:ys.Overview})},children:(0,u.tZ)(sB.Z,{})}),(0,u.tZ)(m.h4,{level:1,variant:"subheadBig",children:f.name})]}),(0,u.tZ)(m7,{header:"Apply To",description:"Always apply to files that match these globs",initialValue:null===(t=f.fileTypeAttrs)||void 0===t?void 0:t.filePattern}),(0,u.tZ)(m7,{header:"Detect new files",rightHeaderContent:(0,u.tZ)(a9.Z,{isOn:s,onChange:function(){d(function(e){return!e})}}),description:"Suggest for any new files that match these extensions",initialValue:null===(n=f.fileTypeAttrs)||void 0===n?void 0:n.extensions.join(", ")}),(0,u.tZ)(m7,{header:"Ignore",description:"Exclude specific files from these rules"})]})}var vt=n(12789),vn=n(83238),vr=(0,g.X)({root:[w.l0.p(12),w.l0.colWithGap(8)],loading:[w.l0.center,w.l0.flex.growAndShrink(1)]});function vi(e){var t=e.openConsole,n=(0,vt._)(),r=n.modules,i=n.configs,o=(0,vn.Z)(),a=(0,c._)((0,_.useState)({view:ys.Overview}),2),l=a[0],s=a[1];if(!r||!i||!o)return(0,u.tZ)(v.G,{css:vr.loading,children:(0,u.tZ)(b.Z,{})});switch(l.view){case ys.PackageInfo:return(0,u.tZ)(hK,{config:l.config,children:(0,u.tZ)(mX,{pkg:l.pkg,openConsole:t,setViewState:s})});case ys.FormatterInfo:return(0,u.tZ)(ve,{id:l.formatterId,type:yu.Formatter,setViewState:s,configs:i});case ys.LanguageServerInfo:return(0,u.tZ)(ve,{id:l.languageServerId,type:yu.LanguageServer,setViewState:s,configs:i});case ys.Search:return(0,u.tZ)(m5,{initialContext:l.initialContext,setViewState:s,registry:o,modules:r});case ys.Overview:return(0,u.BX)(v.G,{css:vr.root,children:[(0,u.tZ)(mR,{name:"Runtime",onAddClick:function(){s({view:ys.Search,initialContext:yu.Runtime})},children:(0,u.tZ)(mq,{configs:i})}),(0,u.tZ)(mR,{name:"Packager",onAddClick:function(){s({view:ys.Search,initialContext:yu.Packager})},children:(0,u.tZ)(mH,{setViewState:s})}),(0,u.tZ)(mR,{name:"Formatter",onAddClick:function(){s({view:ys.Search,initialContext:yu.Formatter})},children:(0,u.tZ)(mY,{configs:i,onFormatterClick:function(e){s({view:ys.FormatterInfo,formatterId:e})}})}),(0,u.tZ)(mR,{name:"Language server",onAddClick:function(){s({view:ys.Search,initialContext:yu.LanguageServer})},children:(0,u.tZ)(m$,{configs:i,onLanguageServerClick:function(e){s({view:ys.LanguageServerInfo,languageServerId:e})}})})]});default:(0,t5.Z)(l)}}var vo=d.Dy.Object({type:d.Dy.Literal("dependencies")}),va={Content:function(e){var t=e.options;return(0,u.tZ)(vi,{openFile:function(e){return t.performPaneOperation({operation:"open",pane:(0,x.$E)(e),secondary:!0})},openConsole:function(){t.performPaneOperation({operation:"open",pane:{type:"runnerOutput"},secondary:!0})}})},Icon:function(e){var t=e.size;return(0,u.tZ)(pZ.Z,{size:t})},getTitle:function(){return"Dependencies"},decode:function(e){return f.B4.Decode(vo,e)}},vl=n(63066),vc=n(59695),vs=n(89421);function vu(e){var t=e.text,n=(0,eP._)(e,["text"]),r=(0,_.useRef)(null),i=(0,_.useRef)(t);return(0,_.useEffect)(function(){if(i.current!==t){var e=t.length;!function n(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){var o=r.current;o&&(o.textContent=t.slice(0,i),i!==e&&n(i+1))})}()}},[t]),(0,_.useEffect)(function(){i.current=t},[t]),(0,u.tZ)(m.xv,(0,L._)((0,N._)({},n),{ref:r,children:t}))}var vd=n(36759),vf=n(21068),vh=n(62435),vp=(0,fg.$)(["fontSize","padding","border"]),vm=vp.cssVars,vv=vp.styleTokens,vg=(0,g.X)({root:[w.l0.rowWithGap(4),w.l0.center,w.l0.flex.growAndShrink(1)],input:[{backgroundColor:"transparent",border:vv.border,fontSize:vv.fontSize,padding:vv.padding},w.l0.flex.growAndShrink(1)]});function vy(e){var t,n,r=(0,c._)((0,_.useState)(e.initialValue),2),i=r[0],o=r[1],a=(0,ej.Z)(e.onCancel),l=(0,fv.Z)(function(){return a.current()},[]),s=(0,_.useRef)(null);(0,_.useEffect)(function(){var e;null===(e=s.current)||void 0===e||e.select()},[]);var d=e.compact?(t={},(0,eB._)(t,vm.border,"0 none"),(0,eB._)(t,vm.fontSize,w.TV.fontSizeSmall),(0,eB._)(t,vm.padding,"0 ".concat(w.TV.space2)),t):(n={},(0,eB._)(n,vm.padding,"".concat(w.TV.space8)),(0,eB._)(n,vm.fontSize,w.TV.fontSizeDefault),n);return(0,u.tZ)(v.G,{style:d,innerRef:l,css:vg.root,tag:"form",onSubmit:function(t){t.preventDefault(),i&&e.onSubmit(i)},children:(0,u.tZ)(U.II,{placeholder:"Name this chat",ref:s,css:vg.input,value:i,onChange:function(e){return o(e.currentTarget.value)},onKeyDown:function(t){"Escape"===t.key&&e.onCancel()}})})}var vb=(0,fg.$)(["sessionBackground","actionsButtonDisplay"]),vw=vb.cssVars,vZ=vb.styleTokens,vx=(0,g.X)({loading:[w.l0.coverContainer,w.l0.center],tabList:[w.l0.rowWithGap(4),w.l0.p(8),w.l0.align.center,w.l0.justify.spaceBetween],tabListLeft:[w.l0.viewStyle,w.l0.rowWithGap(2)],tabListRight:{justifySelf:"end"},tab:[w.l0.viewStyle,ne.gU.nofill,w.l0.px(8),w.l0.height(30),w.l0.justify.center,w.l0.borderRadius(4),{"&[data-selected]":{backgroundColor:ne.vb.interactiveBackgroundActive}}],sessions:[w.l0.overflowY("auto"),w.l0.flex.growAndShrink(1),w.l0.px(8)],editTimestamp:[w.l0.px(4)],session:[w.l0.p(4),w.l0.border({direction:"bottom"}),ne.gU.listItem,w.l0.borderRadius(4),(yd={backgroundColor:vZ.sessionBackground},(0,eB._)(yd,w.BC.canHover,(0,eB._)({},vw.actionsButtonDisplay,"none")),(0,eB._)(yd,"&:hover",(0,eB._)({},vw.actionsButtonDisplay,"block")),yd)],emptyState:[w.l0.center,w.l0.p(16)],header:[w.l0.rowWithGap(4),w.l0.height(24)],title:[w.l0.flex.growAndShrink(1)],actionsButton:[{opacity:.5,display:vZ.actionsButtonDisplay,"&:hover":{opacity:1}}]});function vC(e){var t=e.onClick;return(0,u.BX)(v.G,{style:(0,eB._)({},vw.sessionBackground,w.TV.accentPrimaryDimmest),css:vx.session,onClick:t,children:[(0,u.tZ)(v.G,{css:vx.header,children:(0,u.tZ)(v.G,{css:vx.title,children:(0,u.tZ)(m.xv,{multiline:!1,children:"New Chat"})})}),(0,u.tZ)(m.xv,{multiline:!1,color:"dimmest",variant:"small",children:"just now"})]})}function v_(e){var t,n=e.selected,r=e.onClick,i=e.onRename,o=e.onToggleArchived,a=e.session,l=(0,c._)((0,_.useState)(!1),2),s=l[0],d=l[1],f=(0,vf.av)(),p=f.menuProps,m=f.triggerProps,g=f.open;return s?(0,u.BX)(v.G,{children:[(0,u.tZ)(vy,{initialValue:null!==(t=a.title)&&void 0!==t?t:"",onCancel:function(){return d(!1)},onSubmit:function(e){i(e),d(!1)}}),(0,u.tZ)(v.G,{css:vx.editTimestamp,children:(0,u.tZ)(nr.EK,{textColor:"dimmest",textVariant:"small",date:a.created})})]}):(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,(0,L._)((0,N._)({style:n?(0,eB._)({},vw.sessionBackground,w.TV.accentPrimaryDimmest):void 0,css:vx.session,onClick:r},m),{children:[(0,u.BX)(v.G,{css:vx.header,children:[(0,u.tZ)(v.G,{css:vx.title,children:(0,u.tZ)(vu,{multiline:!1,text:a.title||"Untitled"})}),(0,u.tZ)(h.hU,{css:vx.actionsButton,alt:"Actions",tooltipBehavior:"hidden",onClick:function(e){var t=e.target.getBoundingClientRect();g({x:t.x,y:t.y})},children:(0,u.tZ)(vh.Z,{})})]}),(0,u.tZ)(nr.EK,{textColor:"dimmest",textVariant:"small",date:a.created})]})),(0,u.BX)(vf.xV,(0,L._)((0,N._)({},p),{children:[(0,u.tZ)(vf.Zo,{onClick:function(){return d(!0)},children:"Rename"}),(0,u.tZ)(vf.Zo,{onClick:o,children:a.archived?"Unarchive":"Archive"})]}))]})}function vS(){return(0,u.tZ)(v.G,{css:vx.emptyState,children:(0,u.tZ)(m.xv,{color:"dimmest",children:"No chats"})})}function vk(e){var t=e.currentSessionId,n=e.archivedOnly,r=(0,r7.mL)({archivedOnly:n}),i=r.sessions,o=r.loading;return o&&!i.length?(0,u.tZ)(v.G,{css:vx.loading,children:(0,u.tZ)(b.Z,{})}):(0,u.BX)(v.G,{css:vx.sessions,children:[!o&&0===i.length&&e.archivedOnly?(0,u.tZ)(vS,{}):null,e.archivedOnly||0!==i.length?null:(0,u.tZ)(vC,{onClick:function(){return e.onNewSessionClick()}}),i.map(function(n){return(0,u.tZ)(v_,{session:n,selected:n.id===t,onClick:function(){return e.onSessionClick(n.id)},onToggleArchived:function(){return e.onToggleArchived(n,e.currentSessionId)},onRename:function(t){return e.updateSession(n.id,{title:t})}},n.id)})]})}var vE=[{title:"Chats",archivedOnly:!1},{title:"Archived",archivedOnly:!0}];function vT(e){var t=(0,c._)((0,_.useState)(vE[0].title),2),n=t[0],r=t[1];return(0,u.BX)(vd.mQ,{selectedKey:n,onSelectionChange:r,children:[(0,u.BX)(v.G,{css:vx.tabList,children:[(0,u.tZ)(vd.td,{"aria-label":"Chats",css:vx.tabListLeft,children:vE.map(function(e){var t=e.title;return(0,u.tZ)(vd.OK,{id:t,css:vx.tab,children:(0,u.tZ)(m.xv,{color:"dimmer",children:t})},t)})}),(0,u.tZ)(v.G,{css:vx.tabListRight,children:(0,u.tZ)(h.hU,{alt:"New chat",onClick:function(){n!==vE[0].title&&r(vE[0].title),e.onNewSessionClick()},children:(0,u.tZ)(ni.Z,{})})})]}),vE.map(function(t){var n=t.title,r=t.archivedOnly;return(0,u.tZ)(vd.x4,{id:n,children:(0,u.tZ)(vk,(0,L._)((0,N._)({},e),{archivedOnly:r,updateSession:e.updateSession}))},n)})]})}var vR=n(14542),vI=n(6922),vD=n(77605),vB=n(36397),vG=n(78377),vA=n(20870),vP=eG.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:0}}),vN=new ca.j(function(e){return vP.of(e)}),vL={marker:"cm-empty-state-dom"},vO=eL.tk.theme((0,eB._)({},".".concat(vL.marker),{backgroundColor:w.TV.redDefault,opacity:"0.2"})),vU=eG.QQ.define({create:function(e){return e.doc.length},update:function(e,t){return t.state.doc.length}}),vM=function(e){return Math.max(e.doc.length-e.facet(vP),0)},vX=eG.QQ.define({create:vM,update:function(e,t){return(0,vA.aU)(t,"doc",vP)?vM(t.state):e},provide:function(e){return[vU,vO,(0,eL.EY)({above:!1,update:function(t){return(0,vA.aU)(t,e)},markers:function(t){var n=t.state.field(e);if(0===n)return[];var r=t.state.doc.length;return eL.dc.forRange(t,vL.marker,eG.jT.range(r-n,r))}})]}}),vF=(0,g.X)({charLimit:[w.l0.color.redDefault]});function vW(e){var t=e.view,n=(0,vI.IK)(t,vX);return n?(0,u.tZ)(m.xv,{variant:"small",css:vF.charLimit,children:n}):null}var vH=n(68574),vV=n(93801),vz=n(17971),vj=n(91859),vq=n(90493),vJ=n(57),vY=n(34335),vK=n(39171),v$=n(3212),vQ=n(27022),v0=n(5357),v1=(0,g.X)({popover:[w.l0.borderRadius(4),w.l0.border({color:w.TV.outlineDefault}),w.l0.overflow("hidden"),w.l0.maxWidth(260)]}),v2=(0,g.X)({root:[ne.gU.listItem,w.l0.p(4),w.l0.colWithGap(2)],content:[w.l0.rowWithGap(8),w.l0.align.center],left:[w.l0.flex.growAndShrink(1),w.l0.rowWithGap(4),w.l0.align.center,{fontSize:w.TV.fontSizeSmall}],warning:[{color:w.TV.accentNegativeDefault}],dir:[{opacity:.6},w.l0.flex.shrink(100)]});function v3(e){var t=e.path,n=e.highlighted,r=e.ranges,i=e.status,o=n?{backgroundColor:ne.vb.interactiveBackgroundActive}:void 0,a=i?({included:(0,u.tZ)(nQ.Z,{}),overflowing:(0,u.tZ)(nq.Z,{}),truncated:(0,u.tZ)(nq.Z,{}),unsupported:(0,u.tZ)(nq.Z,{})})[i]:null,l=(0,v0.Q1)({path:t,ranges:null!=r?r:[]}),c=l.directory,s=l.filename,d=c&&c.text.split("/"),f=d&&d.length>2?"".concat(d[0],"/.../").concat(d[d.length-1],"/"):c&&c.text+"/";return(0,u.BX)(v.G,{css:v2.root,style:o,children:[(0,u.BX)(v.G,{css:v2.content,style:o,children:[(0,u.BX)(v.G,{css:v2.left,style:o,children:[(0,u.tZ)(p.Z,{path:t,size:16}),(0,u.tZ)(vV.x,{text:s.text,highlight:s.ranges,dimmed:!n}),c?(0,u.tZ)(v.G,{color:"dimmest",css:v2.dir,children:(0,u.tZ)(ti.u,{tooltip:t,children:(0,u.tZ)(vV.x,{text:f||"",highlight:c.ranges,dimmed:!n})})}):null]}),(0,u.tZ)(ti.u,{tooltip:"File not supported",isDisabled:"unsupported"!==i,children:a})]}),"overflowing"===i||"truncated"===i?(0,u.tZ)(m.xv,{css:v2.warning,variant:"small",children:"Exceeds file memory"}):null]})}var v4=(0,fg.$)(["iconColor","placeholderColor","itemTransform","inputBorderRadius","inputBorder"]),v8=v4.cssVars,v6=v4.styleTokens,v5=(0,g.X)({root:[w.l0.width(240),w.l0.maxHeight(200),w.l0.display.flex],inputRow:[w.l0.position.relative,(yh={},(0,eB._)(yh,v8.iconColor,w.TV.foregroundDimmest),(0,eB._)(yh,v8.placeholderColor,w.TV.foregroundDimmer),(0,eB._)(yh,":focus-within, :hover",(yf={},(0,eB._)(yf,v8.iconColor,w.TV.foregroundDimmer),(0,eB._)(yf,v8.placeholderColor,w.TV.foregroundDimmest),yf)),yh)],searchIcon:[w.l0.pl(6),w.l0.coverContainer,w.l0.align.start,w.l0.justify.center,{color:v6.iconColor,pointerEvents:"none"}],input:[ne.gU.nofill,w.l0.p(4),w.l0.pl(24),{borderRadius:v6.inputBorderRadius,fontSize:w.TV.fontSizeSmall,margin:"-1px -1px 0",cursor:"text","::placeholder":{color:v6.placeholderColor},"@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}}}],header:[w.l0.rowWithGap(2),w.l0.px(4),w.l0.height(24),w.l0.align.center,w.l0.display.flex,w.l0.justify.spaceBetween],selectionButton:[w.l0.reset.button,ne.gU.nofill,w.l0.p(2),{fontSize:w.TV.fontSizeSmall}],menu:[w.l0.flex.growAndShrink(1),{overflow:"auto"}],item:[{transform:v6.itemTransform,position:"absolute",top:0,left:0,width:"100%"}]});function v9(e,t){return t.status&&!e.status?1:e.status&&!t.status?-1:"included"===t.status&&"included"!==e.status?1:"included"===e.status&&"included"!==t.status?-1:0}function v7(e){var t,n,r,i,o,a,l,s=e.fileContextInclusions,d=e.placement,f=void 0===d?"bottom":d,h=e.findFiles,p=e.overscan,g=e.onChange,y=e.unSelectAllFiles,Z=e.selectAllFiles,x=(0,_.useRef)(null),C=(0,c._)((0,_.useState)(""),2),S=C[0],k=C[1],E=(r=(n=(0,c._)((0,_.useState)({loading:!0,error:null,items:null}),2))[0],i=n[1],(o=(0,_.useRef)(null)).current||(o.current=(0,vK.Z)((t=(0,tl._)(function(e){var t;return(0,tc.Jh)(this,function(n){switch(n.label){case 0:return[4,h(e)];case 1:return t=n.sent(),(0,_.startTransition)(function(){i(null!==t.error?{error:t.error,loading:!1,items:null}:{items:t.files,total:t.total,error:null,loading:!1})}),[2]}})}),function(e){return t.apply(this,arguments)}),{wait:40})),a=(0,_.useCallback)(function(e){var t;return null===(t=o.current)||void 0===t?void 0:t.call(o,e).catch(function(){})},[]),(0,_.useEffect)(function(){return a(""),function(){try{var e;null===(e=o.current)||void 0===e||e.cancel()}catch(e){}}},[a]),{files:r.items,loading:r.loading,error:r.error,total:r.total,update:a}),T=E.files,R=E.total,I=E.loading,D=E.error,B=E.update,G=(0,_.useRef)(null),A=(0,ej.Z)(S),P=(0,_.useMemo)(function(){var e=new Map(s.map(function(e){return[e.path,e.inclusionStatus]})),t=null==T?void 0:T.map(function(t){var n=t.path;return{path:n,ranges:t.ranges,status:e.get(n)}});if(!t)return null;if(G.current)return(0,v$.Z)(t,{existing:G.current,getKey:function(e){return e.path}});if(A.current)return t;var n=t.sort(v9);return G.current=n,n},[T,s,A]),O=(0,_.useMemo)(function(){var e;return null!==(e=null==P?void 0:P.filter(function(e){return e.status}))&&void 0!==e?e:[]},[P]),U=(0,vJ.Kb)({inputValue:S,items:null!=P?P:[],isOpen:!0,defaultHighlightedIndex:0,stateReducer:function(e,t){var n=t.changes;switch(t.type){case vJ.Kb.stateChangeTypes.InputKeyDownEnter:case vJ.Kb.stateChangeTypes.ItemClick:return(0,uN.Uy)(n,function(t){t.highlightedIndex=e.highlightedIndex});default:return n}},onHighlightedIndexChange:function(e){void 0!==e.highlightedIndex&&-1!==e.highlightedIndex&&X.getVirtualItems()[e.highlightedIndex]&&X.scrollToIndex(e.highlightedIndex)},onStateChange:function(e){switch(e.type){case vJ.Kb.stateChangeTypes.InputKeyDownEnter:case vJ.Kb.stateChangeTypes.ItemClick:if(!e.selectedItem)break;var t,n,r,i=O.includes(e.selectedItem)?"exclude":"include";g({path:e.selectedItem.path,preference:i}),null===(r=x.current)||void 0===r||r.select();break;case vJ.Kb.stateChangeTypes.InputChange:k(null!==(t=e.inputValue)&&void 0!==t?t:""),B(null!==(n=e.inputValue)&&void 0!==n?n:"")}}}),M=(0,_.useRef)(null),X=(0,t9.MG)({count:null!==(l=null==P?void 0:P.length)&&void 0!==l?l:0,getScrollElement:function(){return M.current},estimateSize:function(){return 32},getItemKey:function(e){var t,n;return null!==(n=null==P?void 0:null===(t=P[e])||void 0===t?void 0:t.path)&&void 0!==n?n:""},overscan:void 0===p?4:p}),F=(0,u.BX)(v.G,{css:v5.inputRow,children:[(0,u.tZ)(v.G,{css:v5.searchIcon,children:I?(0,u.tZ)(b.Z,{size:12}):(0,u.tZ)(vq.Z,{size:12})}),(0,u.tZ)("input",(0,N._)({autoFocus:!0,placeholder:"Search files",css:v5.input},U.getInputProps({ref:x})))]}),W="top"===f?"0 0 ".concat(w.TV.space4," ").concat(w.TV.space4):"".concat(w.TV.space4," ").concat(w.TV.space4," 0 0");return!I||(null==P?void 0:P.length)||(W=w.TV.space4),(0,u.BX)(v.G,{css:v5.root,style:(0,eB._)({},v8.inputBorderRadius,W),children:["bottom"===f?F:null,D?(0,u.tZ)(ru.E,{icon:(0,u.tZ)(nq.Z,{}),text:D}):null,void 0!==R?(0,u.BX)(v.G,{css:v5.header,style:"bottom"===f?{borderTop:"1px solid "+w.TV.outlineDimmer}:void 0,children:[(0,u.tZ)(m.xv,{variant:"small",color:"dimmest",children:"".concat(s.length,"/").concat(R," selected")}),s.length?(0,u.tZ)(v.G,{tag:"button",css:v5.selectionButton,onClick:function(){return function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=(null!=T?T:[])[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a.path)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}y({paths:e})}()},children:"Unselect All"}):(0,u.tZ)(v.G,{tag:"button",css:v5.selectionButton,onClick:function(){return function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=(null!=T?T:[])[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a.path)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}Z({paths:e})}()},children:"Select All"})]}):null,(0,u.tZ)("div",(0,L._)((0,N._)({style:"top"===f?{borderBottom:"1px solid "+w.TV.outlineDimmer}:void 0,css:v5.menu},U.getMenuProps({ref:M})),{children:(0,u.tZ)("div",{style:{height:"".concat(X.getTotalSize(),"px"),width:"100%",position:"relative"},children:X.getVirtualItems().map(function(e){var t=e.index,n=e.key,r=e.start,i=null==P?void 0:P[t];return i?(0,u.tZ)(v.G,(0,L._)((0,N._)({"data-index":t,css:v5.item,style:(0,eB._)({},v8.itemTransform,"translateY(".concat(r,"px)"))},U.getItemProps({item:i,index:t,refKey:"innerRef",ref:X.measureElement})),{"aria-selected":void 0!==i.status,children:(0,u.tZ)(v3,{highlighted:t===U.highlightedIndex,path:i.path,ranges:i.ranges,status:i.status})}),n):null})})})),"top"===f?F:null]})}var ge=(0,g.X)({button:[w.l0.reset.button,w.l0.align.center,w.l0.cursor.pointer,w.l0.px(4),w.l0.py(2),w.l0.rowWithGap(4),ne.gU.nofill,w.l0.color.foregroundDimmest,{"&:hover":w.l0.color.foregroundDefault}]});function gt(e){var t,n=(0,c._)((0,_.useState)(!1),2),r=n[0],i=n[1],o=(0,c._)((0,_.useState)(null),2),a=o[0],l=o[1],s=(0,c._)((0,_.useState)(null),2),d=s[0],f=s[1];(0,_.useEffect)(function(){var e=function(e){var t,n;t=e.target,n=[d,a],t instanceof Node&&n.some(function(e){return null==e?void 0:e.contains(t)})||i(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[d,a]),(0,_.useEffect)(function(){var e=function(e){"Escape"===e.key&&i(!1)};if(r)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[r]);var h=(0,vY.D)(a,d,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom-start"}),p=e.fileContextInclusions,g=e.findFiles,y="Context",b=p.filter(function(e){return"included"===e.inclusionStatus});b.length&&(y=1===b.length?(0,S.UO)(b[0].path):b.length+" files");var w=(0,_.useId)();return(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{tag:"button",css:ge.button,innerRef:l,onClick:function(){return i(function(e){return!e})},onKeyDown:function(e){"ArrowDown"===e.key&&i(!0)},"aria-label":"Select files","aria-haspopup":!0,"aria-expanded":r,"aria-controls":w,children:[(0,u.tZ)(vj.Z,{}),(0,u.tZ)(m.xv,{variant:"small",children:y}),(0,u.tZ)(vQ.Z,{rotate:r?180:0,size:12})]}),r?(0,u.tZ)(vz.h,{children:(0,u.tZ)(sA.MT,{restoreFocus:!0,children:(0,u.tZ)(F.Tg,(0,L._)((0,N._)({id:w,elevated:!0,style:h.styles.popper,innerRef:f,css:v1.popover},h.attributes.popper),{children:(0,u.tZ)(v7,{overscan:e.overscan,onChange:e.onChange,unSelectAllFiles:e.unSelectAll,selectAllFiles:e.selectAll,findFiles:g,fileContextInclusions:p,placement:(null===(t=h.state)||void 0===t?void 0:t.placement.startsWith("top"))?"top":"bottom"})}))})}):null]})}var gn=n(81202),gr=n.n(gn),gi=eG.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:[]},compare:gr()}),go=new ca.j(function(e){return gi.of(e)}),ga={render:function(e){var t=e.file,n=t.path,r=t.match,i=(0,ux.V)((0,u.tZ)(v.G,{css:v2.root,style:{width:"100%"},className:"option",children:(0,u.BX)(v.G,{css:v2.content,children:[(0,u.BX)(v.G,{css:v2.left,children:[(0,u.tZ)(p.Z,{path:n,size:16}),(0,u.tZ)(vV.x,{text:r.filename.text,highlight:r.filename.ranges,dimmed:!0}),r.directory?(0,u.tZ)(v.G,{color:"dimmest",css:v2.dir,children:(0,u.tZ)(vV.x,{text:r.directory.text+"/",highlight:r.directory.ranges,dimmed:!0})}):null]}),"included"===t.inclusionStatus?(0,u.tZ)(nQ.Z,{}):null]})}));return i.style.display="flex",i.style.width="100%",i},position:81},gl=eL.tk.theme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:eO.TV.fontFamilyDefault,fontSize:eO.TV.fontSizeSmall},"& > ul > li":{padding:"0px",display:"flex",alignItems:"center"},"& > ul > li[aria-selected] .option":{backgroundColor:eO.TV.backgroundHighest}},".cm-completionLabel":{width:0}}),gc=new ca.j(function(e){if(!e)return[];function t(){return(t=(0,tl._)(function(t){var n,r,i,o,a;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:if(!e||!t.matchBefore(/@(\S*)/g)||null===(n=t.matchBefore(/\w*/)))return[2,null];return[4,e(n.text)];case 1:return i=null!==(r=l.sent().files)&&void 0!==r?r:[],o=new Map(t.state.facet(gi).map(function(e){return[e.path,e.inclusionStatus]})),a=i.map(function(e){var t=e.path,n=e.ranges;return{label:t,displayLabel:" ",file:{path:t,inclusionStatus:o.get(t),match:(0,v0.Q1)({path:t,ranges:null!=n?n:[]})}}}),[2,{from:n.from,filter:!1,options:a}]}})})).apply(this,arguments)}return[gl,(0,vH.ys)({defaultKeymap:!1,icons:!1,aboveCursor:!0,addToOptions:[ga],override:[function(e){return t.apply(this,arguments)}],maxRenderedOptions:100})]}),gs=new ca.j(function(e){return eL.tk.updateListener.of(function(t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value.annotation(vH.Jv);l&&e(l.label)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}})}),gu=n(16689),gd=n.n(gu),gf=(0,g.X)({root:[w.l0.display.inlineFlex],button:[w.l0.reset.button,w.l0.display.inlineFlex,w.l0.px(2),ne.gU.outlined,w.l0.borderRadius(4),w.l0.rowWithGap(2),w.l0.align.center],warning:{color:w.TV.redDefault}}),gh=new ux.J(function(e){var t=(0,S.UO)(e.path),n=(0,S.Il)(e.path);return(0,u.tZ)(ti.u,{isDisabled:!n&&!e.warning,tooltip:(0,u.BX)(v.G,{children:[e.warning?(0,u.tZ)(m.xv,{variant:"small",css:gf.warning,children:e.warning}):null,n?(0,u.BX)(m.xv,{variant:"small",color:"dimmest",children:[n,"/"]}):null]}),children:function(n,r){return(0,u.tZ)(v.G,(0,L._)((0,N._)({css:gf.root,innerRef:r},n),{children:(0,u.BX)(v.G,{tag:"button",css:gf.button,onClick:function(){return e.onClick()},children:[(0,u.tZ)(p.Z,{size:12,path:e.path}),(0,u.tZ)(m.xv,{variant:"small",children:t}),e.warning?(0,u.tZ)(nq.Z,{size:12}):null]})}))}})}),gp=function(e){"use strict";(0,la._)(n,e);var t=(0,lc._)(n);function n(e,r){var i;return(0,lo._)(this,n),(i=t.call(this)).file=e,i.onClick=r,i}var r=n.prototype;return r.eq=function(e){return this.file.path===e.file.path&&this.file.inclusionStatus===e.file.inclusionStatus},r.toDOM=function(){var e=this.file,t=e.path,n=e.inclusionStatus,r=null;switch(n){case"included":break;case"unsupported":r="File not supported";break;case"truncated":case"overflowing":r="Exceedes memory limit"}var i=gh.create({path:t,onClick:this.onClick,warning:r});return i.style.display="inline",i},n}(eL.l9),gm=function(e,t){return new eL.Y1({regexp:RegExp("".concat(e.map(function(e){var t=e.path;return"@".concat(gd()(t))}).join("|")),"g"),decoration:function(n,r){var i,o=n[0].substring(1,null===(i=n[0])||void 0===i?void 0:i.length),a=e.find(function(e){return e.path===o});return a?eL.p.replace({widget:new gp(a,function(){return t(o)}),inclusive:!0}):null}})},gv=new ca.j(function(e){return e?eL.lg.fromClass(function(){"use strict";function t(n){(0,lo._)(this,t);var r=n.state.facet(gi);this.match=r.length&&e?gm(r,e):null,this.placeholders=this.match?this.match.createDeco(n):eL.p.none}return t.prototype.update=function(t){var n=t.state.facet(gi);if(0===n.length){this.match=null,this.placeholders=eL.p.none;return}if((0,vA.aU)(t,gi)){this.match=gm(n,e),this.placeholders=this.match.createDeco(t.view);return}if((0,vA.aU)(t,"doc")){if(!this.match){this.match=gm(n,e),this.placeholders=this.match.createDeco(t.view);return}this.placeholders=this.match.updateDeco(t,this.placeholders)}},t}(),{decorations:function(e){return e.placeholders},provide:function(e){return eL.tk.atomicRanges.of(function(t){var n;return(null===(n=t.plugin(e))||void 0===n?void 0:n.placeholders)||eL.p.none})}}):[]}),gg=n(32472),gy={layer:"cm-placeholder-layer",dom:"cm-placeholder-dom"},gb=eL.tk.theme((yp={},(0,eB._)(yp,".".concat(gy.layer),{width:"100%",height:"100%",pointerEvents:"none"}),(0,eB._)(yp,".".concat(gy.dom),{position:"absolute",width:"100%",pointerEvents:"none",fontFamily:eO.TV.fontFamilyDefault,color:eO.TV.foregroundDimmest}),yp)),gw=function(e){return 0===e.doc.toString().trim().length};eG.r$.define({combine:function(){return!0}});var gZ=eG.Py.define(),gx=eG.QQ.define({create:gw,update:function(e,t){return gw(t.state)}}),gC=[gx,gb,(0,eL.EY)((g2=Date.now(),{above:!1,class:gy.layer,update:function(e){var t=!1;return(0,gg.j)(e,gZ,function(){t=!0,g2=Date.now()}),t||(0,vA.aU)(e,gx)},markers:function(e){if(!e.state.field(gx))return[];var t,n,r,i,o=e.coordsAtPos(0);if(!o)return[];var a=e.dom.getBoundingClientRect(),l=o.left-a.left;return[(n=(t={top:o.top-a.top,left:l,height:o.bottom-o.top,animateTimestamp:g2}).top,r=t.left,i=t.height,{draw:function(){var e="Type message...",t=document.createElement("div");t.className=gy.dom,t.style.width="100%",t.style.paddingTop=n+"px",t.style.paddingLeft=r+"px",t.style.height=i+"px";var o=e.length;return function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){t.textContent=e.slice(0,r),r<o&&n(r+1)})}(),t},animateTimestamp:t.animateTimestamp,eq:function(e){return this.animateTimestamp===e.animateTimestamp}})]}}))],g_=eL.tk.theme((0,eB._)({"& .cm-content":{fontFamily:w.TV.fontFamilyDefault}},"& .".concat(vD.ll),{display:"none"})),gS=(0,g.X)({footer:[w.l0.rowWithGap(8),w.l0.align.center],left:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.flex.growAndShrink(1),{cursor:"text"}],right:[w.l0.rowWithGap(8),w.l0.align.center],codemirror:[w.l0.maxHeight(300),w.l0.overflow("auto"),{"& .cm-content":w.l0.pt(8)}],send:[w.l0.borderRadius()],sendDisabled:[(0,pj.ec)("grey")],sendEnabled:[(0,pj.ec)("blurple")]});function gk(e){var t,n,r,i,o=(0,co.Z)(),a=o.ref,l=o.view;n=(t={view:l,setPromptEditor:e.inputRef}).view,r=t.setPromptEditor,i=(0,ej.Z)(r),(0,_.useEffect)(function(){if(n){var e=i.current;return e({setValue:function(e){n.state.doc.toString()!==e&&n.dispatch({changes:{from:0,to:n.state.doc.length,insert:e}})},focus:function(){n.focus(),n.dispatch({selection:{anchor:n.state.doc.length}})},animatePlaceholder:function(){n.dispatch({effects:gZ.of(!0)})}}),function(){e(null)}}},[n,i]);var s=(0,vI.IK)(l,gx),d=vN.use(e.maxLength),f=(0,ej.Z)(e.onSubmit),p=gE.use((0,_.useCallback)(function(e){return f.current(e)},[f]),!!e.connecting),m=gc.use(e.findFiles),g=gv.use(e.openFile),y=go.use(e.fileContextInclusions),w=e.updateFileContext,Z=gs.use((0,_.useCallback)(function(e){return null==w?void 0:w({path:e,preference:"include"})},[w]));if(e.hideInput)return null;var x=(!l||!0===s)&&!e.loading,C=(0,c._)(e.children,5),S=C[0],k=C[1],E=C[2],T=C[3],R=C[4];return(0,u.BX)(u.HY,{children:[(0,u.tZ)(eV.ZP,{ref:a,language:"markdown",css:gS.codemirror,hideGutter:!0,autocomplete:!1,fontSize:14,keyboardHandler:null,extensions:[g_,p,gC,vX,d,y,g,m,Z]}),(0,u.BX)(v.G,{css:gS.footer,children:[(0,u.BX)(v.G,{css:gS.left,onClick:function(e){e.target===e.currentTarget&&(null==l||l.focus())},children:[S,k,E]}),(0,u.BX)(v.G,{css:gS.right,children:[(0,u.tZ)(vW,{view:l}),T,R,(0,u.tZ)(F.Tg,{elevated:!0,css:gS.send,children:e.connecting?(0,u.tZ)(h.hU,{disabled:!0,alt:"Connecting....",children:(0,u.tZ)(b.Z,{})}):(0,u.tZ)(h.hU,{css:x?gS.sendDisabled:gS.sendEnabled,disabled:x,alt:e.loading?"Stop":"Send",onClick:function(){if(e.loading){e.onStop();return}if(l){var t=l.state.doc.toString();t&&(e.onSubmit(t),l.dispatch({changes:{from:0,to:l.state.doc.length}}))}},children:e.loading?(0,u.tZ)(vG.Z,{}):(0,u.tZ)(vB.Z,{})})})]})]})]})}var gE=new ca.j(function(e,t){return eL.tk.domEventHandlers({keydown:function(n,r){!((0,vH.SI)(r.state).length>0)&&"Enter"===n.key&&!n.shiftKey&&(n.preventDefault(),!(t||r.state.field(gx))&&(e(r.state.doc.toString()),r.dispatch({changes:{from:0,to:r.state.doc.length}})))}})}),gT=n(16764),gR=n(82314),gI=n(33559),gD=new Map([["NONE",{title:"Ask AI",description:"Detect actions based on the prompt",icon:(0,u.tZ)(gI.Z,{})}],["GENERATE",{title:"Generate",description:"Write starter code/tests",icon:(0,u.tZ)(gR.Z,{})}],["TRANSFORM",{title:"Modify",description:"Refactor existing features",icon:(0,u.tZ)(gR.Z,{})}],["EXPLAIN",{title:"Explain",description:"Ask a question about your code",icon:(0,u.tZ)(gT.Z,{})}],["REPLIT_DOCS",{title:"Ask replit.com",description:"Ask about how to do things on Replit",icon:(0,u.tZ)(gT.Z,{})}],["AGENT",{title:"Agent",description:"Let agent do the work for you",icon:(0,u.tZ)(gR.Z,{})}]]),gB=(0,g.X)({label:w.l0.visuallyHidden,heading:[w.l0.px(8),w.l0.py(4)],item:[w.l0.viewStyle,w.l0.px(8),w.l0.py(4),w.l0.cursor.pointer,ne.gU.listItem,w.l0.rowWithGap(8),{'&[data-selected="true"]':{backgroundColor:ne.vb.interactiveBackground},"&:last-of-type":{borderBottomRightRadius:4,borderBottomLeftRadius:4}}],surface:[w.l0.borderRadius(4),w.l0.border({color:w.TV.outlineDefault}),w.l0.overflow("hidden"),w.l0.maxWidth(260)],itemHeader:[w.l0.rowWithGap(4),w.l0.align.center],itemContent:[w.l0.flex.growAndShrink(1)]});function gG(e){var t=e.intent,n=e.selected,r=gD.get(t);if(!r)throw Error("Expected data");return(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{css:gB.itemContent,children:[(0,u.BX)(v.G,{css:gB.itemHeader,children:[(0,_.cloneElement)(r.icon,{size:16,color:w.TV.blurpleDefault}),(0,u.tZ)(m.xv,{variant:"small",children:r.title})]}),(0,u.tZ)(m.xv,{variant:"small",color:"dimmest",children:r.description})]}),n?(0,u.tZ)(nQ.Z,{color:w.TV.foregroundDimmer}):null]})}function gA(e){var t,n,r=null!==(t=gD.get(e.selectedItem))&&void 0!==t?t:gD.get("NONE");if(!r)throw Error("Expected selectedIntent");return(0,u.BX)(vd.Ph,{selectedKey:e.selectedItem,onSelectionChange:function(t){gD.has(t)&&e.onChange(t)},children:[(0,u.tZ)(vd.__,{css:gB.label,children:"Model type"}),(0,u.BX)(vR.UN,{children:[null!==(n=r.icon)&&void 0!==n?n:null,r.title]}),(0,u.tZ)(vd.J2,{children:(0,u.BX)(F.Tg,{css:gB.surface,elevated:!0,children:[(0,u.tZ)(v.G,{css:gB.heading,children:(0,u.tZ)(m.xv,{variant:"small",color:"dimmest",children:"Select a mode"})}),(0,u.tZ)(vd.wb,{"aria-label":"Intent",items:e.items.map(function(e){return{id:e}}),selectionMode:"single",children:function(t){var n;return(0,u.tZ)(vd.m9,{css:gB.item,textValue:null===(n=gD.get(t.id))||void 0===n?void 0:n.title,children:(0,u.tZ)(gG,{intent:t.id,selected:t.id===e.selectedItem})})}})]})})]})}var gP=new Map([["NONE",pp.$h.MESSAGE_ACTION_UNKNOWN],["GENERATE",pp.$h.GENERATE],["TRANSFORM",pp.$h.TRANSFORM],["EXPLAIN",pp.$h.EXPLAIN],["REPLIT_DOCS",pp.$h.REPLIT_DOCS],["AGENT",pp.$h.AGENT]]),gN=new Map([["NONE","ask_ai"],["GENERATE","generate"],["TRANSFORM","modify"],["EXPLAIN","explain"],["REPLIT_DOCS","ask_replit"],["AGENT","agent"]]),gL=new Map,gO=!0,gU=!1,gM=void 0;try{for(var gX,gF,gW,gH,gV,gz,gj,gq,gJ,gY,gK,g$,gQ,g0,g1,g2,g3,g4,g8,g6,g5,g9,g7,ye,yt,yn,yr,yi,yo,ya,yl,yc,ys,yu,yd,yf,yh,yp,ym,yv=gP[Symbol.iterator]();!(gO=(ym=yv.next()).done);gO=!0){var yg=(0,c._)(ym.value,2),yy=yg[0],yb=yg[1];gL.set(yb,yy)}}catch(e){gU=!0,gM=e}finally{try{gO||null==yv.return||yv.return()}finally{if(gU)throw gM}}var yw=n(77476),yZ=n(69249);function yx(){var e=(0,ew._)(["\n  fragment AiChatMessageUser on User {\n    id\n    username\n    image\n    url\n  }\n"]);return yx=function(){return e},e}function yC(){var e=(0,ew._)(["\n  query AiChatMessageUserData($id: Int!) {\n    user(id: $id) {\n      ...AiChatMessageUser\n    }\n  }\n  ","\n"]);return yC=function(){return e},e}var y_={},yS=(0,eZ.Ps)(yx()),yk=(0,eZ.Ps)(yC(),yS),yE=n(25270),yT=(0,g.X)({root:[w.l0.borderRadius(4),w.l0.border({color:w.TV.outlineDimmest})],header:[w.l0.rowWithGap(4),w.l0.border({color:w.TV.outlineDimmest,direction:"bottom"})],button:[{borderRadius:0,borderTopLeftRadius:4}]});function yR(e){var t=e.codeReference,n=e.onClick;return(0,u.BX)(F.Tg,{css:yT.root,children:[(0,u.tZ)(v.G,{css:yT.header,children:(0,u.tZ)(X.zx,{css:yT.button,size:"small",variant:"nofill",iconLeft:(0,u.tZ)(p.Z,{size:12,path:t.filePath}),iconRight:(0,u.tZ)(mN.Z,{}),text:"".concat(t.filePath," ").concat(t.range.lineFrom,":").concat(t.range.lineTo),onClick:n})}),(0,u.tZ)(pz.Z,{lineNumbers:!0,lineNumbersStart:t.range.lineFrom,language:t.language,code:t.code,filePath:t.filePath})]})}var yI=n(5744),yD=n(91893),yB=(0,s._)(yE.HC.keys()),yG=(0,s._)(yE.M8.keys()),yA=(0,s._)(yE.NK.keys());function yP(e){var t=(0,c._)((0,_.useState)(e.typeUsed),2),n=t[0],r=t[1],i=(0,c._)((0,_.useState)(e.modelUsed),2),o=i[0],a=i[1];return(0,u.BX)(yD.l0,{css:yL.form,onSubmit:function(t){t.preventDefault(),e.onRerun({model:o,type:n})},children:[(0,u.BX)(v.G,{css:yL.section,children:[(0,u.tZ)(v.G,{css:yL.header,children:(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",children:"Intent"})}),(0,u.tZ)(vd.Ee,{onChange:function(e){return r(Number(e))},children:yB.map(function(t){return(0,u.tZ)(vd.Y8,{value:t.toString(),children:(0,u.BX)(v.G,{css:yL.radioItemRow,children:[(0,u.BX)(v.G,{css:yL.radioItemText,children:[(0,u.tZ)(yE.Pr,{type:t,text:{variant:"small"}}),t===e.typeUsed?(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",children:"(Used)"}):null]}),n===t?(0,u.tZ)(nQ.Z,{color:w.TV.accentPrimaryStronger}):null]})},t.toString())})})]}),(0,u.BX)(v.G,{css:yL.section,children:[(0,u.tZ)(v.G,{css:yL.header,children:(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",children:"Model"})}),(0,u.tZ)(vd.Ee,{onChange:function(e){return a(Number(e))},children:yA.map(function(t){return(0,u.tZ)(vd.Y8,{value:t.toString(),children:(0,u.BX)(v.G,{css:yL.radioItemRow,children:[(0,u.BX)(v.G,{css:yL.radioItemText,children:[(0,u.tZ)(yE.gg,{model:t,text:{variant:"small"}}),t===e.modelUsed?(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",children:"(Used)"}):null]}),o===t?(0,u.tZ)(nQ.Z,{color:w.TV.accentPrimaryStronger}):null]})},t.toString())})})]}),(0,u.tZ)(v.G,{css:yL.formFooter,children:(0,u.tZ)(X.zx,{colorway:"primary",type:"submit",iconLeft:(0,u.tZ)(nL.Z,{}),text:"Rerun"})})]})}function yN(e){var t=(0,c._)((0,_.useState)(e.intentUsed),2),n=t[0],r=t[1],i=(0,c._)((0,_.useState)(e.modelUsed),2),o=i[0],a=i[1];return(0,u.BX)(yD.l0,{css:yL.form,onSubmit:function(t){var r=e.getRerunContent(),i=gL.get(n),a=o===pp.BY.BASIC?"basic":"advanced";(0,a1.j)(a1.U3.AI_CHAT_EVENT,{action:"message_reran",intent_type:gN.get(i||"NONE"),model:a,user_model_selection:a,message_content:r,message_source:"chat_pane"}),t.preventDefault(),e.onRerun({model:o,intent:n})},children:[(0,u.BX)(v.G,{css:yL.section,children:[(0,u.tZ)(v.G,{css:yL.header,children:(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",children:"Intent"})}),(0,u.tZ)(vd.Ee,{onChange:function(e){return r(Number(e))},children:yG.map(function(t){return(0,u.tZ)(vd.Y8,{value:t.toString(),children:(0,u.BX)(v.G,{css:yL.radioItemRow,children:[(0,u.BX)(v.G,{css:yL.radioItemText,children:[(0,u.tZ)(yE.Dz,{intent:t,text:{variant:"small"}}),t===e.intentUsed?(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",children:"(Used)"}):null]}),n===t?(0,u.tZ)(nQ.Z,{color:w.TV.accentPrimaryStronger}):null]})},t.toString())})})]}),(0,u.BX)(v.G,{css:yL.section,children:[(0,u.tZ)(v.G,{css:yL.header,children:(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",children:"Model"})}),(0,u.tZ)(vd.Ee,{onChange:function(e){return a(Number(e))},children:yA.map(function(t){return(0,u.tZ)(vd.Y8,{value:t.toString(),children:(0,u.BX)(v.G,{css:yL.radioItemRow,children:[(0,u.BX)(v.G,{css:yL.radioItemText,children:[(0,u.tZ)(yE.gg,{model:t,text:{variant:"small"}}),t===e.modelUsed?(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",children:"(Used)"}):null]}),o===t?(0,u.tZ)(nQ.Z,{color:w.TV.accentPrimaryStronger}):null]})},t.toString())})})]}),(0,u.tZ)(v.G,{css:yL.formFooter,children:(0,u.tZ)(X.zx,{colorway:"primary",type:"submit",iconLeft:(0,u.tZ)(nL.Z,{}),text:"Rerun"})})]})}var yL=(0,g.X)({form:[w.l0.width(200)],formFooter:[w.l0.px(8),w.l0.py(8)],header:[w.l0.py(4),w.l0.px(8)],radioItemText:[w.l0.rowWithGap(4)],section:{'& [role="radiogroup"]':{"& > label":[w.l0.p(8),w.l0.py(4),ne.gU.listItem,w.l0.display.block],'& > [data-focused="true"]':{backgroundColor:ne.vb.interactiveBackgroundActive,borderColor:w.TV.accentPrimaryDefault}}},radioItemRow:[w.l0.rowWithGap(4),w.l0.align.center,w.l0.justify.spaceBetween]}),yO=(0,_.createContext)(null),yU=yO.Provider;function yM(e){var t,n,r=(0,c._)((0,_.useState)(!1),2),i=r[0],o=r[1],a=(0,_.useContext)(yO),l=(0,r7.Un)();return(0,u.BX)(nt.xo,{label:l?"Rerun":"Connecting...",isOpen:i,onOpenChange:o,children:[function(e){var t=e.ref,n=(0,eP._)(e,["ref"]);return(0,u.tZ)(X.zx,(0,L._)((0,N._)({},n),{size:"small",variant:"outlined",ref:t,text:"Rerun",iconLeft:(0,u.tZ)(nL.Z,{}),iconRight:(0,u.tZ)(e$.Z,{size:12,rotate:i?180:0}),disabled:!l}))},"intentUsed"in e?(0,u.tZ)(yN,{onRerun:(t=(0,tl._)(function(t){var n,r,i;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:if(o(!1),n=e.onRerun,r={intent:t.intent,model:t.model},!a)return[3,2];return[4,a()];case 1:return i=l.sent(),[3,3];case 2:i=void 0,l.label=3;case 3:return n.apply(e,[(r.fileContext=i,r)]),[2]}})}),function(e){return t.apply(this,arguments)}),modelUsed:e.modelUsed,intentUsed:e.intentUsed,getRerunContent:e.getRerunContent}):(0,u.tZ)(yP,{onRerun:(n=(0,tl._)(function(t){var n,r,i;return(0,tc.Jh)(this,function(l){switch(l.label){case 0:if(o(!1),n=e.onRerun,r={type:t.type,model:t.model},!a)return[3,2];return[4,a()];case 1:return i=l.sent(),[3,3];case 2:i=void 0,l.label=3;case 3:return n.apply(e,[(r.fileContext=i,r)]),[2]}})}),function(e){return n.apply(this,arguments)}),modelUsed:e.modelUsed,typeUsed:e.typeUsed})]})}var yX=(0,g.X)({root:[w.l0.rowWithGap(2),w.l0.align.center]}),yF=(0,_.memo)(function(e){var t=e.eventIds,n=e.index,r=e.onClick,i=t.length;return i<2?null:(0,u.BX)(v.G,{css:yX.root,children:[(0,u.tZ)(h.hU,{onClick:function(){r(t[n>0?n-1:i-1])},alt:"Previous",tooltipBehavior:"hidden",children:(0,u.tZ)(sB.Z,{})}),(0,u.BX)(m.xv,{variant:"small",color:"dimmest",children:[n+1,"/",i]}),(0,u.tZ)(h.hU,{onClick:function(){r(t[n<i-1?n+1:0])},alt:"Next",tooltipBehavior:"hidden",children:(0,u.tZ)(W.Z,{})})]})}),yW=n(31417),yH=n(93880),yV=n(4354),yz=n(98640),yj=n(59500),yq=n(35909),yJ=n(85033),yY=n(46026),yK=n(92443),y$=n(37715),yQ=n(91620).lW;(r=i||(i={})).LOADING="LOADING",r.START_EXECUTING_LOCALLY="START_EXECUTING_LOCALLY",r.EXECUTING_LOCALLY="EXECUTING_LOCALLY",r.FINISHED_EXECUTING_LOCALLY="FINISHED_EXECUTING_LOCALLY",r.HAS_STORED_RESULT="HAS_STORED_RESULT";var y0=(0,g.X)({headerWrapper:[w.l0.borderRadius(4,4,0,0),w.l0.border({direction:"top",color:w.TV.outlineDimmest}),w.l0.border({direction:"x",color:w.TV.outlineDimmest}),w.l0.p(4),w.l0.backgroundColor.backgroundDefault,w.l0.color.foregroundDimmer,w.l0.rowWithGap(4),w.l0.align.center],headerCode:[w.l0.font.code,w.l0.display.inline,w.l0.fontSize(12)],terminalWrapper:[w.l0.position.relative,w.l0.borderRadius(0,0,4,4),w.l0.border({color:w.TV.outlineDimmest}),w.l0.overflow("hidden")],searchWrapper:[{gridRow:1,gridColumn:1,position:"sticky",right:2,height:30,margin:"2px 0 0 auto",zIndex:4}]}),y1="\x1b[?25l";function y2(e){var t=e.step,n=e.exitCode,r=0!==n;switch(t){case"LOADING":return null;case"START_EXECUTING_LOCALLY":case"EXECUTING_LOCALLY":return(0,u.tZ)(ti.u,{tooltip:"Running...",children:(0,u.tZ)(yz.Z,{color:w.TV.accentPositiveDefault})});case"FINISHED_EXECUTING_LOCALLY":case"HAS_STORED_RESULT":return(0,u.tZ)(ti.u,{tooltip:r?"Exit code: ".concat(n):"Finished",children:r?(0,u.tZ)(nq.Z,{}):(0,u.tZ)(nQ.Z,{})});default:(0,t5.Z)(t)}}function y3(e){var t=e.step,n=e.exitCode,r=e.command;return(0,u.BX)(v.G,{css:y0.headerWrapper,children:[(0,u.tZ)(y2,{step:t,exitCode:n}),(0,u.BX)("code",{css:y0.headerCode,children:["$ ",r]})]})}function y4(e){var t=e.channelName,n=e.command,r=e.result,i=e.executed,o=e.exitCode,a=e.onExecutionResult,l=e.openFile,s=e.listFiles,d=e.openWebview,f=e.isLastEvent,h=(0,c._)((0,_.useState)("LOADING"),2),p=h[0],m=h[1],g=(0,ej.Z)(p),y=(0,_.useRef)(null),b=(0,c._)((0,_.useState)(null),2),w=b[0],Z=b[1],x=(0,c._)((0,_.useState)(!1),2),C=x[0],S=x[1],k=(0,c._)((0,_.useState)(""),2),E=k[0],T=k[1],R=(0,ej.Z)(a),I=(0,_.useRef)(""),D=(0,yH.fB)({maxHeight:300,openFile:l,listFiles:s,openWebview:d}),B=D.visibleHeight,G=D.bufferHeight,A=D.wrapperResizeRef,P=D.xterm,L=D.xtermRef,O=(0,yj.av)().onContextMenu,U=(0,yq.j)({xterm:P,openShellSearch:function(e){S(!0),T(e)}}),M=(0,y$.U)(function(e){var n;return n=(0,tl._)(function(n){var r,i,o,a,l,s,u,d,f;return(0,tc.Jh)(this,function(h){switch(h.label){case 0:return[4,e.shellExec.readBuffer.subscribe({id:t})];case 1:r=c._.apply(void 0,[h.sent(),1])[0],i=new Uint8Array([]),o=!1,a=!1,h.label=2;case 2:h.trys.push([2,7,8,13]),s=(0,yW._)(r),h.label=3;case 3:return[4,s.next()];case 4:if(!(o=!(u=h.sent()).done))return[3,6];if(!(d=u.value).ok)throw Error("pid2 non-ok msg: ".concat(d.payload.message));"output"===d.payload.$kind&&(i=yQ.concat([i,d.payload.output])),"finished"===d.payload.$kind&&(R.current({result:i.toString(),exitCode:n.exitCode}),e.shellExec.cleanStoredState.rpc({id:t})),h.label=5;case 5:return o=!1,[3,3];case 6:return[3,13];case 7:return f=h.sent(),a=!0,l=f,[3,13];case 8:if(h.trys.push([8,,11,12]),!(o&&null!=s.return))return[3,10];return[4,s.return()];case 9:h.sent(),h.label=10;case 10:return[3,12];case 11:if(a)throw l;return[7];case 12:return[7];case 13:return[2]}})}),function(e){return n.apply(this,arguments)}},[t,R]);(0,_.useEffect)(function(){if(P){if(i&&"LOADING"===g.current){m("HAS_STORED_RESULT");return}if(!i&&"LOADING"===g.current){m("START_EXECUTING_LOCALLY");return}}},[i,P,g]),(0,yK.L)(function(e){function n(){return(n=(0,tl._)(function(){var n,r,i,o,a,l,s,u,d,f,h,v,g;return(0,tc.Jh)(this,function(b){switch(b.label){case 0:if("START_EXECUTING_LOCALLY"!==p||!P||!w)return[2];return m("EXECUTING_LOCALLY"),[4,e.shellExec.connect.stream({id:t})];case 1:r=(n=c._.apply(void 0,[b.sent(),2]))[0],i=n[1],y.current=r,a=(o=P.getSize()).cols,l=o.rows,r.push({$kind:"resize",cols:a,rows:l}),s=!1,u=!1,b.label=2;case 2:b.trys.push([2,7,8,13]),f=(0,yW._)(i),b.label=3;case 3:return[4,f.next()];case 4:if(!(s=!(h=b.sent()).done))return[3,6];if(!(v=h.value).ok)throw Error("pid2 non-ok msg: ".concat(v.payload.message));"output"===v.payload.$kind&&w(v.payload.output),b.label=5;case 5:return s=!1,[3,3];case 6:return[3,13];case 7:return g=b.sent(),u=!0,d=g,[3,13];case 8:if(b.trys.push([8,,11,12]),!(s&&null!=f.return))return[3,10];return[4,f.return()];case 9:b.sent(),b.label=10;case 10:return[3,12];case 11:if(u)throw d;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}!function(){n.apply(this,arguments)}()},[P,w,p,t]),(0,yK.L)(function(e){function n(){return(n=(0,tl._)(function(){var n,r,i,o,a,l,s,u,d,f,h;return(0,tc.Jh)(this,function(p){switch(p.label){case 0:if(!w||!M)return[2];return[4,e.shellExec.monitor.subscribe({id:t})];case 1:r=(n=c._.apply(void 0,[p.sent(),2]))[0],i=n[1],o=!1,a=!1,p.label=2;case 2:p.trys.push([2,9,10,15]),s=(0,yW._)(r),p.label=3;case 3:return[4,s.next()];case 4:if(!(o=!(u=p.sent()).done))return[3,8];if(!(d=u.value).ok){if("NO_PROCESS_MATCHING_ID"===d.payload.code)return[3,7];throw Error("pid2 non-ok msg: ".concat(d.payload.message))}if(!((f=d.payload).state!==I.current))return[3,7];if("Finished"!==f.state)return[3,6];return m("FINISHED_EXECUTING_LOCALLY"),[4,M({exitCode:f.exitCode})];case 5:p.sent(),w(y1),i(),p.label=6;case 6:I.current=f.state,p.label=7;case 7:return o=!1,[3,3];case 8:return[3,15];case 9:return h=p.sent(),a=!0,l=h,[3,15];case 10:if(p.trys.push([10,,13,14]),!(o&&null!=s.return))return[3,12];return[4,s.return()];case 11:p.sent(),p.label=12;case 12:return[3,14];case 13:if(a)throw l;return[7];case 14:return[7];case 15:return[2]}})})).apply(this,arguments)}!function(){n.apply(this,arguments)}()},[w,t,M,I]),(0,_.useEffect)(function(){return function(){"EXECUTING_LOCALLY"===g.current&&(null==M||M({exitCode:-1}))}},[g,M]),(0,_.useEffect)(function(){f||"EXECUTING_LOCALLY"!==g.current||(m("FINISHED_EXECUTING_LOCALLY"),null==M||M({exitCode:-1}))},[f,g,M]),(0,_.useEffect)(function(){"HAS_STORED_RESULT"===p&&P&&(P.write(r),P.write(y1))},[P,p,r,n]);var X=(0,_.useCallback)(function(e){return Z(function(){return e}),function(){}},[]);return(0,u.BX)(v.G,{children:[(0,u.tZ)(y3,{step:p,exitCode:o,command:n}),(0,u.BX)(v.G,{css:y0.terminalWrapper,style:{height:B},children:["LOADING"===p?(0,u.tZ)(yV.Z,{}):null,(0,u.BX)(yH.VU,{xterm:P,wrapperResizeRef:A,bufferHeight:G,onInput:function(e){if(!y.current)return!1;var t=new Uint8Array(yQ.from(e));y.current.push({$kind:"stdin",stdin:t})},onMessage:X,onResizeTerminal:function(e){var t;null===(t=y.current)||void 0===t||t.push((0,N._)({$kind:"resize"},e))},onKeyDown:function(e){"f"===e.key&&(0,yY.jh)(e)&&(S(!0),e.preventDefault())},children:[P&&C?(0,u.tZ)(v.G,{css:y0.searchWrapper,children:(0,u.tZ)(yJ.R,{searchValue:E,setSearchValue:T,findPrevious:P.findPrevious,findNext:P.findNext,exit:function(){return S(!1)}})}):null,(0,u.tZ)(yH.UB,{xtermRef:L,visibleHeight:B,maxHeight:300,onContextMenu:function(e){return O(e,{command:U})}})]})]})]})}var y8="file:///";function y6(e){var t=e.sources,n=e.openFile,r=Array.from(new Set(t.map(function(e){return e.url}))).map(function(e){return t.find(function(t){return t.url===e})}).filter(function(e){return!!e}),i=(0,g.X)({root:[w.l0.px(8),w.l0.py(6),w.l0.colWithGap(4),w.l0.height(36),w.l0.justify.center,w.l0.borderRadius(8),w.l0.width("100%")],listBox:[w.l0.backgroundColor.backgroundHigher,w.l0.borderRadius(8)],item:[w.l0.cursor.pointer,ne.gU.listItem,w.l0.borderRadius(8)],content:[w.l0.align.center,w.l0.rowWithGap(8),w.l0.color.foregroundDimmer],textContainer:[w.l0.display.block,w.l0.pl(4),w.l0.color.foregroundDefault,{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"96%"}],icon:[w.l0.color.foregroundDimmest]});function o(e){return e.startsWith(y8)?e.substring(y8.length):e}var a=function(e){if(e.startsWith(y8)){var t=o(e);null==n||n({path:t})}else{var r=(0,na.vt)(e);window.open(r,"_blank")}};return(0,u.tZ)(vd.wb,{css:i.listBox,"aria-label":"Sources List",children:null==r?void 0:r.map(function(e,t){return(0,u.tZ)(vd.m9,{css:i.item,textValue:e.url,children:(0,u.tZ)(v.G,{css:i.root,onClick:function(){return a(e.url)},children:(0,u.BX)(v.G,{css:i.content,children:[(0,u.tZ)(oL.Z,{size:20,css:i.icon}),(0,u.tZ)(v.G,{css:i.textContainer,children:(0,u.tZ)(m.xv,{children:o(e.url)})})]})})},t)})})}var y5=(0,g.X)({message:[w.l0.colWithGap(8)],header:[w.l0.rowWithGap(8),w.l0.align.center],footer:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.spaceBetween],footerRight:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.end,w.l0.flex.growAndShrink(1)],iconLabel:[w.l0.rowWithGap(4),w.l0.align.center],item:[w.l0.cursor.pointer,ne.gU.listItem,w.l0.borderRadius(8)],sourceButton:[w.l0.color.foregroundDimmest]});function y9(e){if(!e)return!1;var t=e.contents.contents;return!("messageEventContents"===t.$kind&&t.messageEventContents.intent===pp.$h.DEBUG)}var y7=(0,_.memo)(function(e){var t=(0,r7.Ti)(e.id),n=(0,r7.Mi)(e.id,be),r=(0,r7.Mi)(e.id,y9),i=(0,tK.P5)({controlName:"flag-pid2-shell-in-ai-chat",logFlagToAnalytics:!1}),o=(0,_.useMemo)(function(){if(r)return function(t){return(0,u.tZ)(yI._l,(0,L._)((0,N._)({},t),{eventId:e.id,openFile:e.openFile,onStartLocalShellExecution:e.onStartLocalShellExecution,replSlug:e.replSlug}))}},[r,e.id,e.openFile,e.onStartLocalShellExecution,e.replSlug]);return(null==t?void 0:t.content)||!n||n.state===pp.he.COMPLETE?(null==t?void 0:t.$kind)==="messageEventContents"||(null==t?void 0:t.$kind)==="inlineActionEventContents"?(0,u.tZ)(yI.JG,{text:t.content||"",codeComponent:o}):i&&e.openFile&&e.listFiles&&(null==t?void 0:t.$kind)==="localShellExecutionEventContents"&&t.content?(0,u.tZ)(y4,{channelName:t.content.channelName,command:t.content.command,result:t.content.result,executed:t.content.executed,exitCode:t.content.exitCode,onExecutionResult:function(t){e.onEndLocalShellExecution((0,N._)({eventId:e.id},t))},openFile:e.openFile,openWebview:e.openWebview,listFiles:e.listFiles,isLastEvent:e.isLastEvent}):null:(0,u.tZ)(b.Z,{})});function be(e){if(!e)return null;var t,n=e.contents.contents,r={type:pp.BY.MODEL_TYPE_UNKNOWN,overrideModelName:""},i=null;(null==n?void 0:n.$kind)==="messageEventContents"?(i={value:n.messageEventContents.intent,kind:"message"},r=n.messageEventContents.usedModelSelector,t=n.messageEventContents.sources):(null==n?void 0:n.$kind)==="inlineActionEventContents"?(i={value:n.inlineActionEventContents.messageType,kind:"inline"},r=n.inlineActionEventContents.usedModelSelector):(null==n?void 0:n.$kind)==="localShellExecutionEventContents"&&(i={kind:"localShellExecution"});var o=e.error&&e.error.type!==pp.lZ.EVENT_ERROR_TYPE_UNKNOWN?e.error.type:null;return{id:e.id,created:e.created,sender:{type:e.sender.type,id:e.sender.id},parentEventId:e.parentEventId,state:e.state,codeReference:function(e){switch(null==e?void 0:e.contents.contents.$kind){case"messageEventContents":if(e.contents.contents.messageEventContents.intent===pp.$h.DEBUG)break;return e.contents.contents.messageEventContents.codeReference;case"inlineActionEventContents":return e.contents.contents.inlineActionEventContents.codeReference;default:return null}}(e),intent:i,error:o,usedModelSelector:r,sources:t}}var bt=(0,_.memo)(function(e){var t,n,r,i,o,a,l,s,d=(0,c._)((0,_.useState)(!1),2),f=d[0],h=d[1],p=(0,r7.oV)(),g=(0,r7.$q)(e.id),y=(0,tK.P5)({controlName:"flag-richard-whittington",logFlagToAnalytics:!1}),b=(0,r7.Mi)(e.id,be);if(!b)return null;var Z=b.sender;function x(t){if(!b)throw Error("Expected event");p(b.id,t),g&&e.setActiveChild({parentEventId:g.parentEventId,eventId:null})}return Z.type===pp.FW.USER?(0,u.BX)(v.G,{css:y5.message,children:[(0,u.BX)(v.G,{css:y5.header,children:[(0,u.tZ)(bi,{id:Number(Z.id)}),(0,u.tZ)(nr.EK,{textVariant:"small",textColor:"dimmest",date:b.created}),(null===(l=b.intent)||void 0===l?void 0:l.kind)==="localShellExecution"?(0,u.BX)(v.G,{css:y5.iconLabel,children:[(0,u.tZ)(pf.Z,{color:w.TV.foregroundDimmest,size:12}),(0,u.tZ)(m.xv,{color:"dimmest",variant:"small",children:"Shell Execution"})]}):null]}),(0,u.tZ)(y7,{id:e.id,onStartLocalShellExecution:e.onStartLocalShellExecution,onEndLocalShellExecution:e.onEndLocalShellExecution,openFile:e.openFile,listFiles:e.listFiles,openWebview:e.openWebview,replSlug:e.replSlug,isLastEvent:e.isLastEvent}),(null===(s=b.codeReference)||void 0===s?void 0:s.code)?(0,u.tZ)(yR,{codeReference:b.codeReference,onClick:function(){var t,n,r=null===(t=b.codeReference)||void 0===t?void 0:t.filePath;e.openFile&&r&&e.openFile({path:r,line:null===(n=b.codeReference)||void 0===n?void 0:n.range.lineTo})}}):null]}):(0,u.BX)(v.G,{css:y5.message,children:[(0,u.BX)(v.G,{css:y5.header,children:[(0,u.tZ)(yZ.R,{advanced:!0,size:24,showUsername:!0}),(0,u.tZ)(nr.EK,{textVariant:"small",textColor:"dimmest",date:b.created}),(null===(t=b.intent)||void 0===t?void 0:t.kind)==="message"?(0,u.tZ)(yE.Dz,{intent:b.intent.value,icon:{color:w.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(null===(n=b.intent)||void 0===n?void 0:n.kind)==="inline"?(0,u.tZ)(yE.Pr,{type:b.intent.value,icon:{color:w.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(0,u.tZ)(yE.gg,{model:b.usedModelSelector.type===pp.BY.OVERRIDE?y?"Advanced":b.usedModelSelector.overrideModelName:b.usedModelSelector.type,icon:{color:w.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}})]}),(0,u.tZ)(y7,{id:e.id,openFile:e.openFile,onStartLocalShellExecution:e.onStartLocalShellExecution,onEndLocalShellExecution:e.onEndLocalShellExecution,openWebview:e.openWebview,listFiles:e.listFiles,replSlug:e.replSlug,isLastEvent:e.isLastEvent}),b.state===pp.he.COMPLETE?(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{css:y5.footer,children:[(null===(r=b.sources)||void 0===r?void 0:r.length)?(0,u.tZ)(X.zx,{size:"default",variant:"nofill",text:"Sources",css:y5.sourceButton,iconRight:(0,u.tZ)(e$.Z,{size:12,rotate:f?180:0}),onClick:function(){return h(function(e){return!e})}}):null,(0,u.tZ)(v.G,{children:b.error?(0,u.tZ)(bn,{type:b.error}):null}),(0,u.BX)(v.G,{css:y5.footerRight,children:[g?(0,u.tZ)(yF,{eventIds:g.eventIds,index:g.index,onClick:function(t){return e.setActiveChild({parentEventId:g.parentEventId,eventId:t})}}):null,(null===(i=b.intent)||void 0===i?void 0:i.kind)==="message"?(0,u.tZ)(yM,{modelUsed:b.usedModelSelector.type,intentUsed:null===(o=b.intent)||void 0===o?void 0:o.value,getRerunContent:function(){return function(t){var n=e.getEvents().filter(function(e){return e.id===t}),r=n.length>0?n[0]:null;if(r){var i=r.parentEventId,o=e.getEvents().filter(function(e){return e.id===i}),a=o.length>0?o[0]:null;if(a&&"messageEventContents"===a.contents.contents.$kind)return a.contents.contents.messageEventContents.content}return null}(b.id)},onRerun:x}):null,(null===(a=b.intent)||void 0===a?void 0:a.kind)==="inline"?(0,u.tZ)(yM,{modelUsed:b.usedModelSelector.type,typeUsed:b.intent.value,onRerun:x}):null]})]}),f&&b.sources?(0,u.tZ)(y6,{sources:b.sources,openFile:e.openFile}):null]}):null]})});function bn(e){switch(e.type){case pp.lZ.MANUALLY_ABORTED:return(0,u.tZ)(ru.E,{icon:(0,u.tZ)(li.Z,{}),text:"Message was stopped"});case pp.lZ.USAGE_LIMIT:return(0,u.tZ)(ru.E,{icon:(0,u.tZ)(nq.Z,{}),colorway:"orange",text:"Usage limit reached"});default:return(0,u.tZ)(ru.E,{icon:(0,u.tZ)(nq.Z,{}),colorway:"red",text:"Something went wrong"})}}var br=(0,g.X)({root:[w.l0.rowWithGap(8),w.l0.align.center]});function bi(e){var t,n,r,i,o,a=(t={variables:{id:e.id}},n=(0,N._)({},y_,t),ex.a(yk,n)).data,l=null==a?void 0:a.user;return(0,u.BX)(v.G,{css:br.root,children:[(0,u.tZ)(nl.q,{size:24,username:null!==(r=null==l?void 0:l.username)&&void 0!==r?r:"",src:null!==(i=null==l?void 0:l.image)&&void 0!==i?i:""}),(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",children:null!==(o=null==l?void 0:l.username)&&void 0!==o?o:""})]})}var bo=n(24268),ba=(0,fg.$)(["transform","opacity"]),bl=ba.cssVars,bc=ba.styleTokens,bs=(0,g.X)({root:[w.l0.position.relative,{height:0}],container:[w.l0.position.absolute,w.l0.bottom(0),w.l0.left("50%"),{transitionProperty:["opacity","transform"],transitionTimingFunction:cZ.H.timingFunction,transitionDuration:cZ.H.duration,opacity:bc.opacity,transform:bc.transform}],button:[w.l0.reset.button,ne.gU.filledAndOutlined,w.l0.p(4),w.l0.rowWithGap(4),w.l0.align.center,w.l0.borderRadius(16),w.l0.shadow(1)]}),bu={hidden:(o={},(0,eB._)(o,bl.opacity,"0"),(0,eB._)(o,bl.transform,"translate(-50%, ".concat(w.TV.space4,")")),o),visible:(a={},(0,eB._)(a,bl.opacity,"1"),(0,eB._)(a,bl.transform,"translate(-50%, calc(-1 * ".concat(w.TV.space4,"))")),a)};function bd(e){var t=e.visible,n=e.onClick,r=(0,_.useRef)(null);return(0,bo.j)(r,t,function(e){return e?bu.visible:bu.hidden}),(0,u.tZ)(v.G,{innerRef:r,css:bs.root,children:(0,u.tZ)(v.G,{css:bs.container,children:(0,u.BX)(F.Tg,{css:bs.button,elevated:!0,tag:"button",onClick:n,children:[(0,u.tZ)(iT.Z,{size:12}),(0,u.tZ)(m.xv,{variant:"small",children:"Scroll to latest"})]})})})}var bf=n(48376),bh=n(28659),bp=(0,g.X)({events:[w.l0.colWithGap(0),w.l0.overflowY("auto"),w.l0.flex.growAndShrink(1),w.l0.width("100%"),w.l0.py(8)],event:[w.l0.px(16),w.l0.py(8)],loading:[w.l0.center,w.l0.height("100%")]});function bm(e){var t,n,r,i,o,a,l,s,d,f,h,p,m=(0,r7.kP)(e.sessionId),g=(0,r7.hI)(null!==(p=null==m?void 0:m.id)&&void 0!==p?p:null,e.parentToActiveChild),y=g.events,w=g.loading,Z=g.getEvents,x=(n=(t={sessionId:(null==m?void 0:m.id)||null,loading:w}).sessionId,r=t.loading,i=(0,c._)((0,_.useState)(function(){return(0,bf.u)(!1)}),1)[0],a=(o=(0,c._)((0,_.useState)(null),2))[0],l=o[1],d=(s=(0,c._)((0,_.useState)(null),2))[0],f=s[1],(0,_.useEffect)(function(){if(a&&d)return(0,bh.j)(a,function(){return i.set(!1),function(){i.set(!0)}},{root:d,rootMargin:"100px"})},[i,a,d]),h=(0,_.useRef)(new Map),(0,_.useEffect)(function(){if(d&&a&&n&&!r){var e=h.current.get(n);void 0===e?(0,ck.Z)(a,{behavior:"instant"}):d.scrollTop=e}},[d,a,n,r]),{showButton:i,anchorRef:l,scrollRef:f,onClick:function(){a&&(0,ck.Z)(a)},onScroll:(0,_.useCallback)(function(e){if(n){var t=e.currentTarget.scrollTop;0!==t&&h.current.set(n,t)}},[n])}),C=y.length,S=C>0?y[C-1]:null;return(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{css:bp.events,innerRef:x.scrollRef,onScroll:x.onScroll,onWheel:function(t){t.deltaY<0&&e.shouldAutoscrollRef.current&&(e.shouldAutoscrollRef.current=!1)},children:[w&&0===C?(0,u.tZ)(v.G,{css:bp.loading,children:(0,u.tZ)(b.Z,{size:32})}):null,y.map(function(t,n){return(0,u.tZ)(v.G,{css:bp.event,children:(0,u.tZ)(bt,{id:t,getEvents:Z,setActiveChild:e.setActiveChild,openFile:e.openFile,openWebview:e.openWebview,listFiles:e.listFiles,replSlug:e.replSlug,onStartLocalShellExecution:e.onStartLocalShellExecution,onEndLocalShellExecution:e.onEndLocalShellExecution,isLastEvent:n===y.length-1})},t)}),(0,u.tZ)(v.G,{innerRef:x.anchorRef}),S?(0,u.tZ)(bv,{enabledRef:e.shouldAutoscrollRef,lastEventId:S}):null]}),(0,u.tZ)(bd,{visible:x.showButton,onClick:x.onClick})]})}function bv(e){var t=e.lastEventId,n=e.enabledRef,r=(0,_.useRef)(null),i=(0,r7.SH)(t);return(0,_.useEffect)(function(){var e=function(){o&&cancelAnimationFrame(o)},t=function(){n.current&&(e(),o=requestAnimationFrame(function(){r.current&&(0,ck.Z)(r.current)}))},o=null;t();var a=i.subscribe(t);return function(){a(),e()}},[i,n,t]),(0,u.tZ)("div",{ref:r})}var bg=n(24635),by=n(57120);function bb(e){var t,n=(0,c._)((0,_.useState)(!1),2),r=n[0],i=n[1];return r?(0,u.tZ)(vy,{compact:!0,initialValue:null!==(t=e.session.title)&&void 0!==t?t:"",onCancel:function(){return i(!1)},onSubmit:function(t){i(!1),e.onRename(t)}}):(0,u.tZ)(bZ,{session:e.session,onRename:function(){return i(!0)},onToggleArchived:e.onToggleArchived})}var bw=(0,g.X)({root:[w.l0.flex.growAndShrink(1),{maxWidth:"100%"}],button:[w.l0.px(4),w.l0.reset.button,w.l0.rowWithGap(4),w.l0.align.center,w.l0.flex.growAndShrink(1),ne.gU.nofill,{fontWeight:w.TV.fontWeightMedium,svg:[w.l0.color.foregroundDimmest],"&:hover svg":[w.l0.color.foregroundDimmer]}],popover:[w.l0.borderRadius(4),w.l0.shadow(1),w.l0.border()],item:[ne.gU.listItem,w.l0.minWidth(140),w.l0.px(4),w.l0.py(2)]});function bZ(e){var t=["Rename",e.session.archived?"Unarchive":"Archive"],n=(0,vJ.L7)({items:t,onSelectedItemChange:function(t){switch(t.selectedItem){case"Rename":e.onRename();break;case"Archive":case"Unarchive":e.onToggleArchived()}}}),r=(0,c._)((0,_.useState)(null),2),i=r[0],o=r[1],a=(0,c._)((0,_.useState)(null),2),l=a[0],s=a[1],d=(0,vY.D)(i,l,{modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom"});return(0,u.tZ)(u.HY,{children:(0,u.BX)(v.G,{css:bw.root,children:[(0,u.BX)(v.G,(0,L._)((0,N._)({tag:"button",css:bw.button},n.getToggleButtonProps({refKey:"innerRef",ref:o})),{children:[(0,u.tZ)(vu,{variant:"small",color:e.session.title?"default":"dimmest",multiline:!1,text:e.session.title||"New chat"}),(0,u.tZ)(vQ.Z,{rotate:n.isOpen?180:0,size:12})]})),(0,u.tZ)(v.G,(0,L._)((0,N._)({},n.getMenuProps({refKey:"innerRef"})),{children:n.isOpen?(0,u.tZ)(vz.h,{children:(0,u.tZ)(F.Tg,(0,L._)((0,N._)({elevated:!0,style:d.styles.popper,innerRef:s,css:bw.popover},d.attributes.popper),{children:t.map(function(e,t){var r=n.highlightedIndex===t?{backgroundColor:ne.vb.interactiveBackground}:void 0;return(0,u.tZ)(v.G,(0,L._)((0,N._)({css:bw.item,style:r},n.getItemProps({refKey:"innerRef",item:e,index:t})),{children:(0,u.tZ)(m.xv,{variant:"small",children:e})}),e)})}))}):null}))]})})}var bx=(0,g.X)({root:[w.l0.rowWithGap(4)],items:[w.l0.border({direction:"bottom"}),w.l0.maxWidth(280)],divider:[w.l0.border({direction:"bottom",color:w.TV.outlineDimmest})]});function bC(e){var t=e.basic,n=e.advanced,r=e.isPro,i=e.onUpgrade,o="basic"===e.currentModel?t:n,a=o.usage/o.limit>.95,l=(0,c._)((0,_.useState)(!1),2),s=l[0],d=l[1];return(0,u.BX)(v.G,{css:bx.root,children:[a?(0,u.tZ)(vR.cF,{used:o.usage,total:o.limit,inline:!0}):null,(0,u.BX)(nt.xo,{label:"usage",isOpen:s,onOpenChange:function(e){e&&(0,a1.j)(a1.U3.AI_CHAT_EVENT,{action:"viewed_usage",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),d(e)},children:[(0,u.tZ)(h.hU,{alt:"Usage",children:(0,u.tZ)(bg.Z,{})}),(0,u.BX)(v.G,{css:bx.items,children:[(0,u.tZ)(vR.cv,{quota:{used:t.usage,total:t.limit},selected:!1,hasAccessToAdvancedModel:r}),(0,u.tZ)(v.G,{css:bx.divider}),(0,u.tZ)(vR.LX,{hasAccessToAdvancedModel:r,selected:!1,quota:{used:n.usage,total:n.limit},onUpgrade:i})]})]})]})}var b_=(0,g.X)({root:[w.l0.height(36),w.l0.rowWithGap(4),w.l0.px(2),w.l0.justify.spaceBetween,w.l0.align.center,w.l0.border({color:w.TV.outlineDimmest,direction:"bottom"})],center:[w.l0.flex.growAndShrink(1),w.l0.align.center],right:[w.l0.rowWithGap(0)]});function bS(e){var t=(0,c._)(e.children,2),n=t[0],r=t[1];return(0,u.BX)(v.G,{css:b_.root,children:[(0,u.tZ)(h.hU,{alt:"All Chats",onClick:function(){return e.onSidebarButtonClick()},children:(0,u.tZ)(by.Z,{})}),(0,u.tZ)(v.G,{css:b_.center,children:n}),(0,u.BX)(v.G,{css:b_.right,children:[r,(0,u.tZ)(h.hU,{alt:"New Chat",onClick:function(){return e.onAddButtonClick()},children:(0,u.tZ)(ni.Z,{})})]})]})}var bk=n(53557),bE=function(e){return"color-mix(in srgb, ".concat(eO.TV.blurpleDefault," ").concat(100*e,"%, transparent)")},bT=w.nC.min(440),bR=(0,ef.F4)({"0%":{opacity:0},"100%":{opacity:1}}),bI=(0,fg.$)(["animationDelay"]),bD=bI.styleTokens,bB=bI.cssVars,bG=(0,g.X)({root:[w.l0.reset.button,ne.gU.filled,w.l0.borderRadius(4),w.l0.align.center,w.l0.p(6),w.l0.color.blurpleDefault,w.l0.cursor.pointer,w.l0.align.start,(l={},(0,eB._)(l,bT,[w.l0.rowWithGap(4),w.l0.align.center]),(0,eB._)(l,ne.dj.interactiveBackground,bE(.1)),(0,eB._)(l,ne.dj.interactiveBackgroundActive,bE(.2)),(0,eB._)(l,"opacity",0),(0,eB._)(l,"animationName",bR),(0,eB._)(l,"animationDuration","800ms"),(0,eB._)(l,"animationFillMode","forwards"),(0,eB._)(l,"animationTimingFunction","ease-out"),(0,eB._)(l,"animationDelay",bD.animationDelay),l)],iconText:w.l0.rowWithGap(4)});function bA(e){return(0,u.BX)(v.G,{css:bG.root,onClick:e.onClick,style:(0,eB._)({},bB.animationDelay,20*e.index+"ms"),children:[(0,u.BX)(v.G,{css:bG.iconText,children:[(0,_.cloneElement)(e.icon,{size:16,color:eO.TV.blurpleDefault}),(0,u.tZ)(m.xv,{variant:"small",children:e.text})]}),(0,u.tZ)(m.xv,{variant:"small",color:"dimmer",children:e.description})]})}var bP=(0,g.X)({root:[w.l0.flex.growAndShrink(1),w.l0.position.relative,w.l0.overflow("auto"),w.l0.display.block],content:[w.l0.py(32),w.l0.px(32),w.l0.center,w.l0.colWithGap(12),w.l0.minHeight("100%")],header:[w.l0.colWithGap(8),w.l0.align.center,w.l0.maxWidth(370),w.l0.textAlign.center],buttons:[w.l0.colWithGap(8),(0,eB._)({},bT,[w.l0.align.center])]});function bN(e){var t,n,r,i,o=e.onPromptClick,a=(r=(n=(0,c._)((0,pa.Bx)(),1)[0])?bk.$R.from(n):null,i=null!=n?n:"index.js",[{icon:(0,u.tZ)(gR.Z,{}),title:"Generate",description:"Create a personal assistant chatbot",action:"GENERATE"},{icon:(0,u.tZ)(pH.Z,{}),title:"Debug",description:n?"Find bugs in ".concat(n):"Fix the price updating logic",action:"DEBUG"},{icon:(0,u.tZ)(gT.Z,{}),title:"Explain",description:"How does ".concat(i," work?"),action:"EXPLAIN",promptToFill:n?"How can I improve the code in "+n:"How can I improve the code in "},{icon:(0,u.tZ)(gT.Z,{}),title:"Ask replit.com",description:"How do I deploy a ".concat(null!==(t=null==r?void 0:r.name)&&void 0!==t?t:"python"," project?"),action:"REPLIT_DOCS"}]);return o?(0,u.tZ)(v.G,{css:bP.root,children:(0,u.BX)(v.G,{css:bP.content,children:[(0,u.BX)(v.G,{css:bP.header,children:[(0,u.tZ)(yZ.R,{advanced:!0,showUsername:!1}),(0,u.tZ)(m.xv,{variant:"subheadBig",children:"Replit AI"}),(0,u.tZ)(m.xv,{color:"dimmest",children:"Use Replit AI to set up new projects, answer questions about your code, and assist your thinking."})]}),(0,u.tZ)(v.G,{css:bP.buttons,children:a.map(function(e,t){return(0,u.tZ)(bA,{index:t,icon:e.icon,text:e.title,description:e.description,onClick:function(){var t,n=null!==(t=e.promptToFill)&&void 0!==t?t:e.description;(0,a1.j)(a1.U3.GHOSTWRITER_CHAT_EXAMPLE_CLICKED,{title:e.title}),o({intent:e.action,value:n})}},e.action)})})]})}):null}var bL=n(14375),bO=(0,g.X)({surface:[w.l0.flex.growAndShrink(0),w.l0.borderRadius(8),w.l0.m(8),w.l0.position.relative,{marginTop:"auto"}],messageBoxContainer:[w.l0.p(8)],quotaLimitContainer:[w.l0.p(8),w.l0.colWithGap(8),w.l0.position.relative,{marginTop:"auto"}]});function bU(e){var t=e.text,n=e.type,r=(0,c._)((0,_.useState)(!1),2),i=r[0],o=r[1],a=(0,c._)((0,pm.N)(),2)[1];return(0,u.BX)(v.G,{css:bO.quotaLimitContainer,children:[(0,u.tZ)(ru.E,{icon:(0,u.tZ)(nq.Z,{}),colorway:"red",text:t}),"basic"===n?(0,u.tZ)(X.zx,{onClick:function(){return o(!0)},colorway:"blurple",text:"Upgrade to Replit ".concat(bL.we)}):(0,u.tZ)(X.zx,{onClick:function(){return a("basic")},colorway:"blurple",text:"Switch back to basic model"}),(0,u.tZ)(vs.Z,{isOpen:i,onClose:function(){return o(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}var bM=n(56412),bX=n(99189),bF=n(18317),bW=n(72343),bH=(0,g.X)({heading:[w.l0.px(8),w.l0.py(2)],button:[w.l0.reset.button,w.l0.align.center,w.l0.cursor.pointer,w.l0.px(4),w.l0.py(2),w.l0.rowWithGap(4),ne.gU.nofill,w.l0.color.foregroundDimmest,{"&:hover":w.l0.color.foregroundDefault}],list:[w.l0.width(240),w.l0.maxHeight(200),w.l0.flex.column,w.l0.borderRadius(),{backgroundColor:w.TV.backgroundHigher}],listItem:[w.l0.px(8),w.l0.py(4),w.l0.cursor.pointer,w.l0.align.center,w.l0.rowWithGap(4),ne.gU.listItem,{justifyContent:"space-between","&:hover":{backgroundColor:w.TV.backgroundHighest}}],listLeft:[w.l0.flex.row,w.l0.rowWithGap(4)]});function bV(e){var t=(0,c._)((0,_.useState)(!1),2),n=t[0],r=t[1],i=(0,c._)((0,_.useState)(null),2),o=i[0],a=i[1],l=(0,c._)((0,_.useState)(null),2),d=l[0],f=l[1],h=(0,_.useId)(),p=e.repos,g=e.selectedRepos,y=e.setSelectedRepos;(0,_.useEffect)(function(){var e=function(e){var t,n;t=e.target,n=[d,o],t instanceof Node&&n.some(function(e){return null==e?void 0:e.contains(t)})||r(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[d,o]);var b=(0,vY.D)(o,d,{modifiers:[{name:"offset",options:{offset:[0,4]}}],placement:"bottom-start"}),w=function(e){(null==g?void 0:g.find(function(t){return t.id===e.id}))?y(g.filter(function(t){return t.id!==e.id})):y((0,s._)(g||[]).concat([e]))};return(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{tag:"button",css:bH.button,innerRef:a,onClick:function(){return r(function(e){return!e})},"aria-haspopup":"true","aria-expanded":n,"aria-controls":h,children:[(0,u.tZ)(ln.Z,{}),(0,u.tZ)(m.xv,{variant:"small",children:"Repos"}),(0,u.tZ)(vQ.Z,{rotate:n?180:0,size:12})]}),n&&(0,u.tZ)(vz.h,{children:(0,u.tZ)(sA.MT,{restoreFocus:!0,children:(0,u.BX)(F.Tg,(0,L._)((0,N._)({id:h,elevated:!0,style:b.styles.popper,innerRef:f,css:v1.popover},b.attributes.popper),{children:[(0,u.tZ)(v.G,{css:bH.heading,children:(0,u.tZ)(m.xv,{variant:"small",color:"dimmest",children:"Select a repo"})}),(0,u.tZ)(v.G,{css:bH.list,children:p.map(function(e){return(0,u.BX)(v.G,{css:bH.listItem,onClick:function(){w(e)},children:[(0,u.BX)(v.G,{css:bH.listLeft,children:[(0,u.tZ)(ln.Z,{}),(0,u.tZ)(m.xv,{variant:"small",children:e.name})]}),(null==g?void 0:g.find(function(t){return t.id===e.id}))?(0,u.tZ)(nQ.Z,{}):null]},e.id)})})]}))})})]})}var bz=(0,fg.$)(["sidebarTransform","mainPaddingLeft"]),bj=bz.cssVars,bq=bz.styleTokens,bJ=(0,g.X)({content:[w.l0.position.relative,w.l0.flex.growAndShrink(1),w.l0.height("100%"),w.l0.container("content"),w.l0.colorMixBg(w.TV.blurpleDefault,"transparent",.05)],header:[{zIndex:1}],sidebar:[w.l0.border({direction:"right",color:w.TV.outlineDimmest}),w.l0.position.absolute,w.l0.top(0),w.l0.left(0),w.l0.height("100%"),w.l0.width("100%"),w.l0.maxWidth(200),(0,eB._)({zIndex:1,transform:bq.sidebarTransform,transitionProperty:"transform",transitionDuration:cZ.H.duration},w.nC.min(500,"content"),[w.l0.width(200),{transitionDuration:"0s"}])],main:[w.l0.position.relative,w.l0.flex.growAndShrink(1),w.l0.justify.end,(0,eB._)({},w.nC.min(500,"content"),{paddingLeft:bq.mainPaddingLeft})],chatInputWrapper:[w.l0.px(8),w.l0.pb(8),{justifySelf:"end"}],chatInput:[w.l0.backgroundColor.backgroundDefault,w.l0.borderRadius(4),w.l0.pb(8),w.l0.pl(4),w.l0.pr(8),{border:"1px solid ".concat(w.TV.outlineDimmest),"&:focus-within, &:hover":{border:"1px solid ".concat(w.TV.outlineDimmer)},"&:active":{border:"1px solid ".concat(w.TV.accentPrimaryDefault)}}],errorBannerContainer:[w.l0.height("100%"),w.l0.align.center,w.l0.justify.center],errorBanner:[w.l0.minHeight("fit-content"),w.l0.p(8)],ragCheckbox:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.pt(2)]}),bY=["NONE","GENERATE","TRANSFORM","EXPLAIN","REPLIT_DOCS"],bK=[{id:"8a6e4dc7-REPL-89497084-8d53-4e51-8dd3-981624164935",name:"web5-js"}];function b$(e){var t,n,r,i,o,a,l,d,f,h,p,g,y,b,Z,x,C,S,k,E,T=(0,vl.Z)(),R=(0,c._)((0,_.useState)(!1),2),I=R[0],D=R[1],B=(0,c._)((0,_.useState)("NONE"),2),G=B[0],A=B[1],P=(0,c._)((0,pm.N)(),2),N=P[0],L=P[1],O=(0,c._)((0,_.useState)(!1),2),U=O[0],M=O[1],X=(0,c._)((0,_.useState)(null),2),W=X[0],H=X[1],V=(0,r7.p)(),z=(0,r7.Bk)(),j=e.workspace,q=(null==j?void 0:j.getFileContext)?function(){var t,n;return j.getFileContext({model:"advanced"===N&&z()?pp.BY.ADVANCED:pp.BY.BASIC,filePreferences:V(),recentFiles:null!==(n=null===(t=e.recentFilesObservable)||void 0===t?void 0:t.current)&&void 0!==n?n:[]})}:void 0,J=(0,r9.bD)({initialSessionId:e.initialSessionId,getFileContext:q}),Y=J.sendMessage,K=J.sendUpdateEvent,$=J.stopMessage,Q=J.loading,ee=J.setSessionId,et=J.sessionId,en=J.setActiveChild,er=J.parentToActiveChild,ei=(0,ej.Z)(e.sessionRef);(0,_.useEffect)(function(){var e;null===(e=ei.current)||void 0===e||e.call(ei,{sessionId:et,setSessionId:ee})},[et,ei,ee]);var eo=(0,r7.Un)(),ea=(0,vc.Gn)("chatEngine").preferences,el=(0,_.useCallback)(function(e){var t=e.command,n=e.channelName,r=e.parentEventId;eo&&(eN.current=!0,Y({kind:"localShellExecution",command:t,channelName:n,parentEventId:r,model:"advanced"===N?pp.BY.ADVANCED:pp.BY.BASIC,state:pp.he.IN_PROGRESS}))},[eo,N,Y]),ec=(0,_.useCallback)(function(e){var t=e.eventId,n=e.result,r=e.exitCode;eo&&K({eventId:t,operations:[{id:uP()(),operationType:pp.ai.SET,key:"result",value:n},{id:uP()(),operationType:pp.ai.SET,key:"exit_code",intValue:r},{id:uP()(),operationType:pp.ai.SET,key:"executed",boolValue:!0}],state:pp.he.COMPLETE})},[eo,K]),es=(0,r7.ZR)().hasAccessToAdvancedModel,eu=(0,r7.kP)(et),ed=(0,r7.xe)(),ef=(0,bW.v)(),eh=(0,yw.yL)(ef).messageCharacters,ep=(n=(0,eb.Z)(),r=(0,r7.mL)().sessions.length>1,o=(i=(0,c._)((0,_.useState)(function(){var e=mi.Z.get("chat-sidebar-open:".concat(n),"boolean");return null!==e?e:r}),2))[0],a=i[1],l=(0,_.useRef)(0),d=(0,cw.Z)(function(e){return l.current=e.width}),f=(0,_.useRef)(null),h=(0,_.useRef)(null),t={},(0,eB._)(t,bj.sidebarTransform,"translateX(".concat(o?"0":"-100%",")")),(0,eB._)(t,bj.mainPaddingLeft,(o?200:0)+"px"),p=(0,_.useCallback)(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ifNecessary;if(!e){a(!1);return}l.current<500&&a(!1)},[]),(0,_.useEffect)(function(){f.current&&null===mi.Z.get("chat-sidebar-open:".concat(n),"boolean")&&r&&a(f.current.clientWidth>500)},[n,r]),(0,_.useEffect)(function(){var e=function(e){var t;!(!h.current||e.target instanceof HTMLElement&&h.current.contains(e.target))&&e.target instanceof HTMLElement&&(null===(t=f.current)||void 0===t?void 0:t.contains(e.target))&&p({ifNecessary:!0})};if(o)return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[o,p]),g=(0,_.useCallback)(function(){a(function(e){return e||(0,a1.j)(a1.U3.AI_CHAT_EVENT,{action:"chat_sidebar_opened",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),mi.Z.set("chat-sidebar-open:".concat(n),!e),!e})},[n]),{rootRef:(0,ir.l)(f,d),sidebarRef:h,toggle:g,close:p,style:t}),em=(0,c._)((0,_.useState)(null),2),ev=em[0],eg=em[1],ey=(0,au.useRouter)(),ew=!!ey.query.hideChatInput;function eZ(e){ep.close({ifNecessary:!0}),ee(e),T||null==ev||ev.focus()}b=(y={enableBridge:(0,ac.Gv)(ey),sendChatMessage:function(e){Y({kind:"message",message:e,model:"advanced"===N?pp.BY.ADVANCED:pp.BY.BASIC,intent:pp.$h.NONE})},abortResponse:function(){$()}}).enableBridge,Z=y.sendChatMessage,x=y.abortResponse,C=(0,ej.Z)(Z),S=(0,ej.Z)(x),(0,_.useEffect)(function(){if(b){var e=function(e){return(0,bX.I6)(e,function(e){var t=e.type;switch(t){case bF.cF.GHOSTWRITER_CHAT_SEND:C.current(e.chatMessage),(0,bX.gU)(e.id);break;case bF.cF.GHOSTWRITER_CHAT_ABORT_RESPONSE:S.current(),(0,bX.gU)(e.id);break;default:(0,t5.Z)(t)}})};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}},[S,b,C]),(0,_.useCallback)(function(){var e={messageType:bF.cF.GHOSTWRITER_CHAT_FOCUS_INPUT};(0,bX.bG)(e,tB()())},[]);var ex=(0,r7.Tt)(),eC=(0,r7.fX)(),e_=(0,r7.dR)(),eS=(0,r7._i)(),ek=(0,r7.Ud)(),eE=(0,c._)((0,_.useState)([]),2),eT=eE[0],eR=eE[1],eI=(0,ej.Z)(null===(k=e.workspace)||void 0===k?void 0:k.getFileContext),eD=e.recentFilesObservable;(0,_.useEffect)(function(){var e=function(e){return t.apply(this,arguments)};if(eD)return e(eD.current),eD.subscribe((0,vK.Z)(e,{wait:2e3}));function t(){return(t=(0,tl._)(function(e){var t,n;return(0,tc.Jh)(this,function(r){switch(r.label){case 0:return[4,null===(t=eI.current)||void 0===t?void 0:t.call(eI,{model:"advanced"===N&&z()?pp.BY.ADVANCED:pp.BY.BASIC,filePreferences:ex,recentFiles:e})];case 1:if(!(n=r.sent()))return[2];return eR(function(e){var t=e.filePreferences,n=e.fileContextState,r=new Map(n.fileContext.map(function(e){return[e.filePath,"included"]})),i=!0,o=!1,a=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var d=(0,c._)(l.value,2),f=d[0],h=d[1];if("exclude"===h){r.delete(f);continue}if(n.unsupportedPreferredFiles.has(f)){r.set(f,"unsupported");continue}r.set(f,"included"===r.get(f)?"included":"overflowing")}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return(0,s._)(r.entries()).map(function(e){var t=(0,c._)(e,2);return{path:t[0],inclusionStatus:t[1]}})}({fileContextState:n,filePreferences:ex})),[2]}})})).apply(this,arguments)}},[eD,ex,N,eI,z]);var eG=(0,_.useRef)(null);function eA(){(0,a1.j)(a1.U3.AI_CHAT_EVENT,{action:"new_chat",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),eZ(null),null==ev||ev.animatePlaceholder(),(0,lZ.A)(eG,"border-color",w.TV.accentPrimaryDefault),setTimeout(function(){requestAnimationFrame(function(){var e;null===(e=eG.current)||void 0===e||e.style.removeProperty("border-color")})},60)}var eP=ed?function(e,t){var n=e.basicModelLimits,r=e.advancedModelLimits;switch(t){case pp.BY.BASIC:if(n.usage<n.limit)break;return{resetTime:n.resetTime};case pp.BY.ADVANCED:if(r.usage<r.limit||0===r.limit)break;return{resetTime:r.resetTime}}return null}(ed,"advanced"===N?pp.BY.ADVANCED:pp.BY.BASIC):null,eN=(0,_.useRef)(!1),eL=(0,tK.P5)({controlName:"flag-richard-whittington",logFlagToAnalytics:!1}),eO=((0,tK.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1})&&bY.push("AGENT"),bY),eU=(0,r7.mL)().sessions,eM=(0,r7.mL)({archivedOnly:!0}).sessions;function eX(e,t){if((0,a1.j)(a1.U3.AI_CHAT_EVENT,{action:e.archived?"chat_unarchived":"chat_archived",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),e.id===t){var n=e.archived?eM:eU;if(n.length>1){var r=n.find(function(t){return t.id!==e.id});eZ(r?r.id:null)}else eA()}ek(e.id,{archived:!e.archived})}return(0,u.BX)(u.HY,{children:[(0,u.BX)(v.G,{innerRef:ep.rootRef,css:bJ.content,style:ep.style,children:[(0,u.tZ)(F.Tg,{css:bJ.header,children:(0,u.BX)(bS,{onAddButtonClick:eA,onSidebarButtonClick:function(){return ep.toggle()},children:[eu?(0,u.tZ)(bb,{session:eu,onRename:function(e){(0,a1.j)(a1.U3.AI_CHAT_EVENT,{action:"chat_renamed",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),ek(eu.id,{title:e})},onToggleArchived:function(){eX(eu,eu.id)}},eu.id):null,ed?(0,u.tZ)(bC,{basic:ed.basicModelLimits,advanced:ed.basicModelLimits,isPro:es,currentModel:N,onUpgrade:function(){return D(!0)}}):null]})}),(0,u.BX)(v.G,{css:bJ.main,children:[(0,u.tZ)(F.Tg,{css:bJ.sidebar,innerRef:ep.sidebarRef,children:(0,u.tZ)(vT,{currentSessionId:et,onSessionClick:eZ,onNewSessionClick:eA,updateSession:ek,onToggleArchived:eX})}),et?(0,u.tZ)(yU,{value:null!=q?q:null,children:(0,u.tZ)(yI.sQ,{value:null!==(E=null==j?void 0:j.codeInsertObservable)&&void 0!==E?E:(0,bf.u)(null),children:(0,u.tZ)(bm,{sessionId:et,parentToActiveChild:er,setActiveChild:en,openFile:null==j?void 0:j.openFile,openWebview:null==j?void 0:j.openWebview,listFiles:null==j?void 0:j.listFiles,replSlug:null==j?void 0:j.replSlug,shouldAutoscrollRef:eN,onStartLocalShellExecution:el,onEndLocalShellExecution:ec})})}):(0,u.tZ)(bN,{onPromptClick:ev?function(e){var t;A(e.intent),null==ev||null===(t=ev.setValue)||void 0===t||t.call(ev,e.value),T||null==ev||ev.focus()}:void 0}),(0,u.BX)(v.G,{css:bJ.chatInputWrapper,children:[eP?(0,u.tZ)(bU,{type:N,text:"advanced"===N?"Quota reached. Refreshes ".concat((0,bM.Z)(new Date(eP.resetTime),"do MMM, hh:mm a")):"100% quota reached. Upgrade to get unlimited quota."}):null,ew?null:(0,u.tZ)(v.G,{css:bJ.chatInput,innerRef:eG,children:(0,u.BX)(gk,{connecting:!eo,inputRef:function(t){var n;eg(t),null===(n=e.inputRef)||void 0===n||n.call(e,t)},findFiles:null==j?void 0:j.findFiles,fileContextInclusions:eT,updateFileContext:function(e){return eS(e.path,e.preference)},openFile:null==j?void 0:j.openFile,maxLength:eh,loading:Q,onStop:$,onSubmit:function(e){if(eo){var t,n=null==W?void 0:W.map(function(e){return e.id});eN.current=!0,(0,a1.j)(a1.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:gN.get(G),model:N,user_model_selection:N,message_content:e,message_source:"chat_pane"}),Y({kind:"message",message:e,model:"advanced"===N?pp.BY.ADVANCED:pp.BY.BASIC,intent:null!==(t=gP.get(G))&&void 0!==t?t:pp.$h.MESSAGE_ACTION_UNKNOWN,useRag:U,extraResources:n})}},children:[(0,u.tZ)(gA,{items:eO,selectedItem:G,onChange:A}),j?(0,u.tZ)(gt,{onChange:function(e){return eS(e.path,e.preference)},unSelectAll:function(e){return e_(e.paths)},selectAll:function(e){return eC(e.paths)},findFiles:j.findFiles,fileContextInclusions:eT}):null,eL?(0,u.tZ)(bV,{repos:bK,selectedRepos:W,setSelectedRepos:H}):null,eL?(0,u.BX)(v.G,{css:bJ.ragCheckbox,children:[(0,u.tZ)(o_.X,{id:"rag-checkbox",name:"RAG Checkbox",checked:U,onChange:function(e){return M(e)}}),(0,u.tZ)(m.xv,{multiline:!1,variant:"small",color:"dimmest",children:"Use RAG"})]}):null,ed?(0,u.tZ)(vR.q2,{userLimits:ed,selectedItem:N,hasAccessToAdvancedModel:es,onChange:function(e){if(!es&&"advanced"===e){D(!0);return}e!==N&&(0,a1.j)(a1.U3.AI_CHAT_EVENT,{action:"model_changed",intent_type:null,model:e,user_model_selection:e,message_content:null,message_source:"chat_pane"}),L(e)},advancedChatEngineOverride:ea.chatEngine}):null]})})]})]})]}),(0,u.tZ)(vs.Z,{isOpen:I,onClose:function(){return D(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}var bQ=n(44167),b0=n(38101),b1=n(9413),b2=n(84806),b3=d.Dy.Object({type:d.Dy.Literal("ghostwriterChat"),data:d.Dy.Optional(d.Dy.Object({sessionId:d.Dy.Optional(d.Dy.String())}))}),b4=(0,g.X)({root:[w.l0.center,w.l0.flex.growAndShrink(1),w.l0.p(16)]});function b8(){return(0,u.tZ)(v.G,{css:b4.root,children:(0,u.tZ)(m.xv,{children:"AI is disabled for this team"})})}var b6={Content:function(e){var t,n,r,i,o,a,l,s,d,f,h,p,m=e.pane.data,v=e.options,g=(0,tK.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),y=v.performPaneOperation,b=(0,_.useCallback)(function(e){y({operation:"open",pane:"string"==typeof e?(0,x.$E)(e):{type:(0,B.Dp)(e),data:e},secondary:!0})},[y]),w=(0,Z.Z)(),S=w.fs,k=w.dotReplit,E=(0,b2.Z)(),T=(t=(0,pa.AA)(),n=(0,bQ.T)(),(0,_.useCallback)((r=(0,tl._)(function(e){var r,i,o,a,l;return(0,tc.Jh)(this,function(c){switch(c.label){case 0:return[4,S.listFiles()];case 1:if((r=c.sent()).error||!r.files)return[2,{error:null!==(i=r.error)&&void 0!==i?i:"Something went wrong",files:null}];if(o=r.files.filter(function(e){return!n(e)}),!e)return[3,3];return[4,(0,v0.Rz)(e,o)];case 2:return l=c.sent(),[3,4];case 3:l=(0,v$.Z)(o,{existing:t(),getKey:function(e){return e}}).map(function(e){return{path:e}}),c.label=4;case 4:return a=l,[2,{total:o.length,files:a,error:null}]}})}),function(e){return r.apply(this,arguments)}),[S,n,t])),R=(0,mw.G)(S,k),I=(0,pa._3)(),D=(i=(0,c._)((0,_.useState)(function(){return(0,bf.u)(null)}),1)[0],o=(0,C.qs)(),(0,_.useEffect)(function(){var e=function(e){return i.set((null==e?void 0:e.insertGhostwriterChatCode)&&e.revertGhostwriterChatCode?{insert:e.insertGhostwriterChatCode,revert:e.revertGhostwriterChatCode}:null)};return e(o.current),o.subscribe(e)},[o,i]),i),G=(0,_.useMemo)(function(){return{openFile:b,listFiles:S.listFiles,findFiles:T,getFileContext:R,codeInsertObservable:D,replSlug:null==E?void 0:E.slug}},[b,T,R,D,S,E]),A=(0,c._)((0,_.useState)(null),2),P=A[0],N=A[1],L=(0,c._)((0,_.useState)(null),2),O=L[0],U=L[1];return(l=(a={sessionId:null==O?void 0:O.sessionId,setSessionId:null==O?void 0:O.setSessionId,data:m,performPaneOperation:y}).sessionId,s=a.setSessionId,d=a.data,f=a.performPaneOperation,(0,_.useEffect)(function(){l&&f({operation:"replace",pane:{type:"ghostwriterChat",data:{sessionId:l}}})},[l,f]),h=null==d?void 0:d.sessionId,p=(0,ej.Z)(l),(0,_.useEffect)(function(){s&&h&&h!==p.current&&s(h)},[h,p,s]),(0,C.Wk)(function(){return P},[P]),(0,b1.v)().isTeamWithAiDisabled)?(0,u.tZ)(b8,{}):g?(0,u.tZ)(b0.Z,{textVariant:"headerDefault",showImage:!0}):(0,u.tZ)(b$,{sessionRef:U,inputRef:N,initialSessionId:null==m?void 0:m.sessionId,recentFilesObservable:I,workspace:G})},Icon:function(e){var t=e.size;return(0,u.tZ)(io.Z,{size:t})},getTitle:function(){return"AI"},decode:function(e){return f.B4.Decode(b3,e)}},b5=n(39712),b9=n(85995),b7=n(17841),we=n(99609);function wt(){var e=(0,ew._)(["\n  query SshPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n            isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n          }\n          ... on User {\n            id\n            username\n          }\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return wt=function(){return e},e}function wn(){var e=(0,ew._)(["\n  mutation SshPaneAddSshKey($input: AddPublicSshKeyInput!) {\n    addPublicSshKey(input: $input) {\n      __typename\n      ... on CurrentUser {\n        id\n        publicSshKeys {\n          ... on PublicSshKeysOutput {\n            __typename\n            keys {\n              id\n              key\n              label\n              timeCreated\n            }\n          }\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return wn=function(){return e},e}function wr(){var e=(0,ew._)(["\n  mutation SshPaneDeleteSshKey($input: DeletePublicSshKeyInput!) {\n    deletePublicSshKey(input: $input) {\n      __typename\n      ... on CurrentUser {\n        id\n        publicSshKeys {\n          ... on PublicSshKeysOutput {\n            __typename\n            keys {\n              id\n              key\n              label\n              timeCreated\n            }\n          }\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return wr=function(){return e},e}function wi(){var e=(0,ew._)(["\n  query SshPaneCurrentUser {\n    currentUser {\n      id\n      __typename\n      publicSshKeys {\n        ... on PublicSshKeysOutput {\n          keys {\n            id\n            key\n            label\n            timeCreated\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n"]);return wi=function(){return e},e}var wo={},wa=(0,eZ.Ps)(wt());wn(),wr();var wl=(0,eZ.Ps)(wi()),wc=n(36809),ws=n(71326),wu=n(84522),wd=n(25200),wf=n(14775),wh=n(818),wp=n(29507),wm=n(25360),wv=n(25165),wg=n(77847),wy=n(79125),wb=n(68586);function ww(){var e=(0,wy.Z)(),t=e.openInVSCode,n=e.onConfirmConfig,r=e.isConfigModalOpen,i=e.closeConfigModal;return(0,u.BX)(F.Tg,{css:wC.connectInstructions,elevated:!0,children:[(0,u.BX)(v.G,{css:wC.connectHeader,children:[(0,u.tZ)(m.h4,{level:3,children:"Connect to VS Code"}),(0,u.tZ)(m.xv,{color:"dimmer",children:"One-click SSH setup will launch VS Code and configure keys for you."})]}),(0,u.tZ)(X.zx,{text:"Launch VS Code",iconLeft:(0,u.tZ)(wh.Z,{}),css:wC.launchVSCodeButton,onClick:function(){(0,a1.j)(a1.U3.OPEN_IN_VSCODE_CLICKED,{source:"ssh_pane"}),t()}}),(0,u.tZ)(rs.u,{isOpen:r,onRequestClose:i,centered:!0,children:(0,u.tZ)(wv.Z,{onConfirm:n})})]})}function wZ(e){var t=e.sshHostname,n=e.sshUser,r=e.sshPort,i=(0,wg.Z)(),o="ssh -i ".concat(i,"/.ssh/replit -p ").concat(r," ").concat(n,"@").concat(t);return(0,u.BX)(F.Tg,{css:wC.connectInstructions,elevated:!0,children:[(0,u.BX)(v.G,{css:wC.connectHeader,children:[(0,u.tZ)(m.h4,{level:3,children:"Connect manually"}),(0,u.tZ)(m.xv,{color:"dimmer",children:"Use the command below to connect via CLI or another IDE."})]}),(0,u.tZ)(wm.Z,{code:o,header:"Shell command",multiline:!1,onCopy:function(){(0,a1.j)(a1.U3.COPY_SSH_KEY_COMMAND_CLICKED,{source:"ssh_pane"})}})]})}function wx(e){var t=e.onPurchaseComplete,n=(0,c._)((0,_.useState)(!1),2),r=n[0],i=n[1];return(0,u.BX)(v.G,{css:wC.requireSubscription,children:[(0,u.BX)(m.h4,{level:3,variant:"subheadDefault",children:["SSH is only available to Replit ",bL.we," Members."]}),(0,u.BX)(m.xv,{children:["With SSH, you can access your Repl's shell remotely. SSH enables workflows like easy file transfer or using your favorite local IDE to edit your code on Replit."," ",(0,u.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"Learn more here"})]}),(0,u.tZ)(X.zx,{onClick:function(){return i(!0)},text:"Join Replit ".concat(bL.we),iconLeft:(0,u.tZ)(b7.Z,{}),colorway:"blurple"}),(0,u.tZ)(vs.Z,{isOpen:r,onClose:function(){return i(!1)},type:"purchase",onPurchaseComplete:t,analyticsContext:{upgrade:{context:"cycles_page"}}})]})}var wC=(0,g.X)({manageKeys:[w.l0.flex.row,w.l0.justify.spaceBetween],tabContainer:[w.l0.colWithGap(8),w.l0.p(8)],loading:[w.l0.center,w.l0.coverContainer],requireSubscription:[w.l0.colWithGap(16)],connectEmptyState:[w.l0.colWithGap(8),w.l0.center,w.l0.border({color:w.TV.outlineDefault,width:1,style:"dashed"}),w.l0.borderRadius(4),w.l0.py(24),w.l0.px(12)],connectHeader:[w.l0.colWithGap(4)],connectInstructions:[w.l0.colWithGap(12),w.l0.p(8),w.l0.borderRadius(4)],connectContainer:[w.l0.colWithGap(16),w.l0.py(8)],launchVSCodeButton:[w.l0.borderRadius(8)]});function w_(e){var t=e.legacyKeys,n=e.openFile,r=(0,eb.Z)(),i="legacy-ssh-keys-warning-".concat(r),o=(0,c._)((0,_.useState)(function(){return!mi.Z.get(i,"boolean")}),2),a=o[0],l=o[1],s=(0,_.useRef)(!1);return((0,_.useEffect)(function(){return mi.Z.get(i,"boolean")||l(!0),function(){s.current&&mi.Z.set(i,!0)}},[i]),t&&0!==t.length&&a)?(0,u.tZ)(v.G,{children:(0,u.tZ)(c7.u,{colorway:"warning",icon:(0,u.tZ)(nq.Z,{}),text:"Don't see your SSH keys here? We're moving from Repl-level keys to user-level keys. Click here to view your existing keys and re-add them using the 'New SSH Key' button above.",onClick:function(){n(ws.J),s.current=!0}})}):null}function wS(e){var t,n,r,i,o,a,l=(o=(0,N._)({},wo,void 0),ex.a(wl,o)),s=l.data,d=l.loading,f=(0,c._)((0,_.useState)(!1),2),h=f[0],p=f[1],g=(0,c._)((0,_.useState)(0),2),y=g[0],x=g[1],C=(n=(t=(0,c._)((0,_.useState)(null),2))[0],r=t[1],i=(0,Z.Z)().fs,(0,_.useEffect)(function(){function e(){return(e=(0,tl._)(function(){var e;return(0,tc.Jh)(this,function(t){switch(t.label){case 0:return[4,i.readFile(ws.J)];case 1:if((e=t.sent()).error===cE.Df.NotFound||e.error===cE.Df.IsDirectory)return[2];if(e.error)throw Error("Unexpected error reading authorized keys");return r(e.content.toString().split("\n").map(function(e){return e.startsWith("#")||(0,wp.Z)(e)?null:e}).filter(Boolean)),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i]),n),S=(0,wu.Z)();if(d||!S)return(0,u.tZ)(v.G,{css:wC.loading,children:(0,u.tZ)(b.Z,{size:24})});var k=S.sshHostname,E=S.sshUser,T=S.sshPort,R=s&&(null===(a=s.currentUser)||void 0===a?void 0:a.__typename)==="CurrentUser"&&"PublicSshKeysOutput"===s.currentUser.publicSshKeys.__typename?s.currentUser.publicSshKeys.keys:[],I=R.length>=wb.R;return(0,u.BX)(dT.mQ,{selectedIndex:y,onSelectionChange:x,children:[(0,u.BX)(dT.td,{children:[(0,u.tZ)(dT.OK,{iconLeft:(0,u.tZ)(b7.Z,{}),children:"Connect"}),(0,u.tZ)(dT.OK,{iconLeft:(0,u.tZ)(we.Z,{}),children:"Keys"})]}),(0,u.BX)(dT.nP,{children:[(0,u.tZ)(dT.x4,{children:(0,u.BX)(v.G,{css:wC.tabContainer,children:[(0,u.tZ)(m.h4,{variant:"subheadDefault",level:2,children:"Use Replit with another editor"}),(0,u.tZ)(m.xv,{color:"dimmer",children:"SSH allows you to connect to a Repl from another machine or IDE."}),0===R.length?(0,u.BX)(v.G,{css:wC.connectEmptyState,children:[(0,u.tZ)(we.Z,{size:24,color:w.TV.foregroundDimmest}),(0,u.tZ)(m.xv,{color:"dimmer",children:"You need to add an SSH key to your account before connecting"}),(0,u.tZ)(X.zx,{text:"Manage SSH keys",colorway:"primary",size:"small",onClick:function(){x(1)}})]}):(0,u.BX)(v.G,{css:wC.connectContainer,children:[(0,u.tZ)(ww,{}),(0,u.tZ)(wZ,{sshHostname:k,sshPort:T,sshUser:E})]}),(0,u.tZ)(wf.s,{})]})}),(0,u.tZ)(dT.x4,{children:(0,u.BX)(v.G,{css:wC.tabContainer,children:[(0,u.BX)(v.G,{css:wC.manageKeys,children:[(0,u.tZ)(m.h4,{variant:"subheadDefault",level:2,children:"Manage SSH Keys"}),(0,u.tZ)(ti.u,{tooltip:"You are over the SSH key limit. Please remove some of your keys to add more.",isDisabled:!I,children:(0,u.tZ)(X.zx,{text:"Add SSH key",colorway:"primary",size:"small",disabled:I,iconLeft:(0,u.tZ)(ni.Z,{}),onClick:function(){return p(!0)}})})]}),(0,u.tZ)(m.xv,{color:"dimmer",children:"Add authorized keys to configure SSH access to this Repl."}),(0,u.tZ)(w_,{legacyKeys:C,openFile:e.openFile}),(0,u.tZ)(wc.A,{keys:R}),(0,u.tZ)(rs.u,{isOpen:h,onRequestClose:function(){return p(!1)},centered:!0,children:(0,u.tZ)(wd.r,{onConfirm:function(){return p(!1)}})})]})})]})]})}function wk(e){var t,n,r,i=(n={variables:{replId:(0,eb.Z)()}},r=(0,N._)({},wo,n),ex.a(wa,r)),o=i.data,a=i.loading,l=i.refetch;if(!o||a)return(0,u.tZ)(v.G,{css:wC.loading,children:(0,u.tZ)(b.Z,{size:24})});if("ReplRedirect"===o.repl.__typename)throw Error("Got repl redirect for replId query");if("SubscriptionExpiredError"===o.repl.__typename)return(0,u.tZ)(v.G,{children:(0,u.tZ)(m.xv,{children:"This Repl is private and your subscription expried. Please reload for further action."})});if(!o.currentUser)return(0,u.tZ)(v.G,{children:(0,u.tZ)(m.xv,{children:"You must be logged in to use SSH."})});var c=(0,b9.jX)(o.currentUser.userSubscriptionType),s=(null===(t=o.repl.owner)||void 0===t?void 0:t.__typename)==="Team"&&o.repl.owner.isTeamsPro;return c||s?(0,u.tZ)(wS,(0,N._)({},e)):(0,u.tZ)(wx,{onPurchaseComplete:function(){l()}})}var wE=d.Dy.Object({type:d.Dy.Literal("ssh")}),wT=(0,g.X)({root:[w.l0.height("100%"),w.l0.overflowY("auto"),B.F3],header:[w.l0.rowWithGap(8)],container:[w.l0.colWithGap(8),w.l0.flex.grow(1)],wrapper:[w.l0.flex.grow(1),w.l0.py(8),w.l0.position.relative]}),wR={Content:function(e){var t=e.options;return(0,u.tZ)(v.G,{css:wT.root,children:(0,u.tZ)(v.G,{css:wT.container,children:(0,u.tZ)(v.G,{css:wT.wrapper,children:(0,u.tZ)(wk,{openFile:function(e){return t.performPaneOperation({operation:"open",pane:(0,x.$E)(e),secondary:!0})}})})})})},Icon:function(e){var t=e.size;return(0,u.tZ)(b5.Z,{size:t})},getTitle:function(){return"SSH"},decode:function(e){return f.B4.Decode(wE,e)}},wI=n(39864),wD=n(50243),wB=n(55260),wG=(0,g.X)({wrapper:[w.l0.p(8)]});function wA(){var e=(0,wB.Z)(),t=e.configObservable,n=e.runStateObservable,r=e.runWorkflow,i=(0,wD.yL)(t),o=(0,wD.yL)(n),a=(0,c._)((0,_.useState)([]),2),l=a[0],s=a[1],d=(0,c._)((0,_.useState)(void 0),2),f=d[0],h=d[1];return(0,_.useEffect)(function(){var e,t,n,r=null!==(n=null==i?void 0:null===(e=i.workflow)||void 0===e?void 0:e.map(function(e){return{id:e.name}}))&&void 0!==n?n:[];s(r),h(null===(t=r[0])||void 0===t?void 0:t.id)},[i]),(0,u.BX)(v.G,{css:wG.wrapper,children:[(0,u.tZ)(m.xv,{children:'This is a "debug" version of the pane, proper implementation will follow.'}),(0,u.tZ)(m.xv,{children:"Config:"}),(0,u.tZ)("pre",{children:(0,u.tZ)("code",{children:JSON.stringify(i,null,2)})}),(0,u.tZ)(m.xv,{children:"Run State:"}),(0,u.tZ)("pre",{children:(0,u.tZ)("code",{children:JSON.stringify(o,null,2)})}),(0,u.BX)(v.G,{children:[(0,u.tZ)(mQ.P,{"aria-label":"Workflow",onSelectionChange:function(e){h(e)},selectedKey:f,items:l,children:function(e){return(0,u.tZ)(m0.m9,{label:e.id},e.id)}}),(0,u.tZ)(X.zx,{onClick:(0,tl._)(function(){return(0,tc.Jh)(this,function(e){switch(e.label){case 0:if(!f)return[2];return[4,r({workflowId:f})];case 1:return e.sent(),[2]}})}),text:"Run",disabled:!f})]})]})}var wP=(0,g.X)({unavailable:[w.l0.p(8)]}),wN=d.Dy.Object({type:d.Dy.Literal("workflows")}),wL={Content:function(){return(0,tK.P5)({controlName:"flag-work-flows",logFlagToAnalytics:!0})?(0,u.tZ)(wA,{}):(0,u.tZ)(v.G,{css:wP.unavailable,children:(0,u.tZ)(m.xv,{children:"Workflows is not available."})})},Icon:function(e){var t=e.size;return(0,u.tZ)(wI.Z,{size:t})},getTitle:function(){return"Workflows"},decode:function(e){return f.B4.Decode(wN,e)}},wO=n(9618),wU=function(e,t){return""===e?t:"".concat(e,"/").concat(t)};function wM(){return(wM=(0,tl._)(function(e){var t,n,r,i,o,a,l,s,u,d,f;return(0,tc.Jh)(this,function(h){switch(h.label){case 0:return t=e.head,n=e.base,r=e.diff,i=e.git,o=wU(r.initial.path,r.initial.filename),a=wU(r.final.path,r.final.filename),[4,Promise.all([i.getFileContents({path:o,revision:t}),i.getFileContents({path:a,revision:n})])];case 1:if(s=(l=c._.apply(void 0,[h.sent(),2]))[0],(u=l[1]).error)throw Error("fetchFileContentsForDiff could not fetch base file: ".concat(o," for ").concat(n));if(s.error)throw Error("fetchFileContentsForDiff could not fetch head file: ".concat(a," for ").concat(t));return[2,{baseFileContent:null!==(d=u.content)&&void 0!==d?d:"",headFileContent:null!==(f=s.content)&&void 0!==f?f:""}]}})})).apply(this,arguments)}var wX=n(35986),wF=function(){};function wW(e){var t,n,r,i,o,a=e.head,l=e.base,d=(0,Z.Z)().git,f=(n=(t={head:a,base:l}).head,r=t.base,i=(0,wX.H)({base:r,head:n,flags:(0,s._)(wX.s).concat(["--name-status"])}),(0,P.Z)(function(){if(null==i||i.loading)return{loading:!0,error:null,data:null};if(i.error)return{loading:!1,error:i.error,data:null};var e,t=null!==(e=i.data)&&void 0!==e?e:"",n=(0,ta.qE)(t),r=(0,ta.Bi)(t);return{loading:!1,error:null,data:Array.from(new Set((0,s._)(n).concat((0,s._)(r)))).filter(function(e){return["DELETED","ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}).map(function(e){var t,n;return{id:(0,tD.v4)(),status:e.type,loading:!1,initial:{filename:(0,S.UO)(null!==(t=e.originalPath)&&void 0!==t?t:e.path),path:(0,S.Il)(null!==(n=e.originalPath)&&void 0!==n?n:e.path),content:""},final:{filename:(0,S.UO)(e.path),path:(0,S.Il)(e.path),content:""}}})}},[i])),h=(0,c._)((0,_.useState)([]),2),p=h[0],v=h[1],g=(0,c._)((0,_.useState)("Split"),2),y=g[0],w=g[1],x=(0,c._)((0,_.useState)({}),2),C=x[0],k=x[1],E=(0,o2.Z)().showError;(0,_.useEffect)(function(){var e;null!=f.data&&v(null!==(e=f.data.map(function(e){return(0,L._)((0,N._)({},e),{loading:!0})}))&&void 0!==e?e:[])},[f]);var T=(o=(0,tl._)(function(e,t){var n,r,i,o;return(0,tc.Jh)(this,function(c){switch(c.label){case 0:if(k(function(n){var r=(0,N._)({},n);return r[e]=t,r}),!(n=p.find(function(t){return t.id===e})))return E("Missing diff for ".concat(e)),[2];if(!(!t&&n.loading))return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(e){return wM.apply(this,arguments)}({git:d,head:a,base:l,diff:n})];case 2:return i=(r=c.sent()).baseFileContent,o=r.headFileContent,v(function(t){var r=(0,s._)(t),a=r.findIndex(function(t){return t.id===e});return r[a]=(0,L._)((0,N._)({},n),{loading:!1,initial:(0,L._)((0,N._)({},n.initial),{content:i}),final:(0,L._)((0,N._)({},n.final),{content:o})}),r}),[3,4];case 3:return c.sent(),E("Error loading diff for ".concat(e)),[2];case 4:return[2]}})}),function(e,t){return o.apply(this,arguments)});return f.loading?(0,u.tZ)(b.Z,{}):f.error||null==p?(0,u.tZ)(m.xv,{children:"Something went wrong. Please try another Repl."}):(0,u.tZ)(oV,{query:"",setQuery:wF,totalDiffs:p.length,diffs:p,splitOrUnified:y,setSplitOrUnified:w,folded:C,setFolded:T})}var wH=n(86069);function wV(){var e=(0,ew._)(["\n  fragment ReplMergeRelatedRepl on Repl {\n    id\n    ...ReplSelectorRepl\n  }\n  ","\n"]);return wV=function(){return e},e}function wz(){var e=(0,ew._)(["\n  query ReplToReplMerge($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n      }\n    }\n  }\n"]);return wz=function(){return e},e}function wj(){var e=(0,ew._)(["\n  query ReplToReplMergeGetRelatedRepls(\n    $id: String!\n    $search: RelatedGitReplsInput!\n  ) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        relatedGitRepls(input: $search) {\n          items {\n            ...ReplMergeRelatedRepl\n          }\n          pageInfo {\n            hasNextPage\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return wj=function(){return e},e}var wq={},wJ=(0,eZ.Ps)(wV(),wH.$v),wY=(0,eZ.Ps)(wz()),wK=(0,eZ.Ps)(wj(),wJ),w$=(0,fg.$)(["commit-text-foreground","commit-extended-text-foreground","commit-graph-color","segment-grid-area"]),wQ=w$.cssVars,w0=w$.styleTokens,w1=[w.l0.position.absolute,{top:6,left:3,width:10,height:10,borderRadius:"50%"}],w2=(0,g.X)({graph:[w.l0.display.grid,{gridTemplateAreas:'\n        "lefttitle righttitle"\n        "left right" \n        "leftcenter rightcenter"  \n        "common common"',gridTemplateColumns:"1fr 1fr",gridTemplateRows:"min-content min-content min-content min-content"}],graphCompact:[w.l0.display.grid,{gridTemplateAreas:'\n        "lefttitle lefttitle"\n        "left left"\n        "spacer righttitle"\n        "spacer right"\n        "leftcenter rightcenter"\n        "common common"',gridTemplateColumns:"minmax(16px, min-content) 1fr",gridTemplateRows:"min-content min-content min-content min-content min-content"}],segment:[w.l0.flex.column,w.l0.align.start,w.l0.justify.end,{gridArea:w0["segment-grid-area"],minWidth:0,maxWidth:"100%"}],action:[{gridArea:w0["segment-grid-area"]}],commit:[w.l0.flex.row,w.l0.align.start,w.l0.justify.start,{minWidth:0,maxWidth:"100%"}],decoration:[w.l0.position.relative,{height:"100%",width:16}],commitDot:[w1,{backgroundColor:w0["commit-graph-color"]}],commitDotUntracked:[w1,{"&:before":[w1,{boxSizing:"border-box",top:-2,left:-2,content:'""',border:"2px dashed ".concat(w0["commit-graph-color"])}],border:"2px solid ".concat(w.TV.accentPrimaryStronger)}],line:[{marginLeft:"auto",marginRight:"auto",position:"absolute",width:"2px",left:"calc(50% - ".concat(1,"px)"),height:"calc(100% - ".concat(8,"px)"),backgroundColor:w0["commit-graph-color"],transform:"translateY(".concat(15,"px)")},{background:"linear-gradient(to top, transparent 0%,  ".concat(w0["commit-graph-color"]," ").concat(10,"px)")}],commitColumn:[w.l0.colWithGap(8),{minWidth:0,maxWidth:"calc(100% - ".concat(16,"px)"),overflow:"hidden"}],commitMessage:[{color:w0["commit-text-foreground"]}],commitDescription:[{color:w0["commit-extended-text-foreground"]}],splitLeft:[{position:"relative",height:16,width:"100%"}],splitRight:[{position:"relative",height:16,width:16}],curveRight:[w.l0.position.absolute,{bottom:0,left:7,borderRadius:"100% 0 0 0",borderTop:"2px solid ".concat(w0["commit-graph-color"]),borderLeft:"2px solid ".concat(w0["commit-graph-color"]),height:9,width:9}],curveUp:[w.l0.position.absolute,{top:0,left:0,borderRadius:"0 0 100% 0",borderBottom:"2px solid ".concat(w0["commit-graph-color"]),borderRight:"2px solid ".concat(w0["commit-graph-color"]),height:9,width:9}],fullLine:[{position:"absolute",width:2,height:"100%",left:7,backgroundColor:w.TV.accentPrimaryDefault}],sidewaysLine:[{position:"absolute",width:"calc(100% - ".concat(16,"px)"),height:2,left:16,top:7,backgroundColor:w.TV.accentPrimaryDefault}]}),w3=function(e){var t=e.children,n=e.compact,r=void 0!==n&&n,i=e.hasLeft,o=e.hasRight;return(0,u.BX)(v.G,{css:r?w2.graphCompact:w2.graph,children:[t,i&&o?(0,u.tZ)(w6,{}):null,r?(0,u.tZ)("div",{css:[w.l0.height("100%"),w.l0.position.relative,{"grid-area":"spacer"}],children:(0,u.tZ)("div",{css:w2.decoration,children:(0,u.tZ)("div",{css:w2.fullLine})})}):null]})},w4=function(e){var t,n,r=e.children,i=e.area,o=e.title;if(!_.Children.count(r))return null;var a="common"===i?(t={},(0,eB._)(t,wQ["segment-grid-area"],i),(0,eB._)(t,wQ["commit-graph-color"],w.TV.outlineDefault),(0,eB._)(t,wQ["commit-text-foreground"],w.TV.foregroundDimmer),(0,eB._)(t,wQ["commit-extended-text-foreground"],w.TV.foregroundDimmest),t):(n={},(0,eB._)(n,wQ["segment-grid-area"],i),(0,eB._)(n,wQ["commit-graph-color"],w.TV.accentPrimaryDefault),(0,eB._)(n,wQ["commit-text-foreground"],w.TV.accentPrimaryStrongest),(0,eB._)(n,wQ["commit-extended-text-foreground"],w.TV.foregroundDimmest),n);return(0,u.BX)(u.HY,{children:["common"===i?null:(0,u.tZ)(w8,{area:i,children:o}),(0,u.tZ)(v.G,{style:a,tag:"ol",css:w2.segment,"aria-label":i,children:r})]})},w8=function(e){var t=e.children,n=e.area,r=(0,eB._)({},wQ["segment-grid-area"],"".concat(n,"title"));return(0,u.tZ)(v.G,{style:r,css:w2.action,children:"string"==typeof t?(0,u.tZ)(m.h4,{level:3,variant:"subheadDefault",color:"dimmer",children:t}):t})},w6=function(){var e=(0,eB._)({},wQ["commit-graph-color"],w.TV.accentPrimaryDefault);return(0,u.BX)(u.HY,{children:[(0,u.BX)("div",{css:w2.splitLeft,style:e,children:[(0,u.BX)("div",{css:w2.decoration,children:[(0,u.tZ)("div",{css:w2.line,"data-line":!0}),(0,u.tZ)("div",{css:w2.fullLine,"data-full-line":!0})]}),(0,u.tZ)("div",{css:w2.curveRight}),(0,u.tZ)("div",{css:w2.sidewaysLine})]}),(0,u.tZ)("div",{css:w2.splitRight,style:e,children:(0,u.tZ)("div",{css:w2.curveUp})})]})},w5=function(e){var t=e.message,n=e.description,r=e.type;return(0,u.BX)(v.G,{tag:"li",css:w2.commit,children:[(0,u.BX)("div",{css:w2.decoration,children:[(0,u.tZ)("div",{css:w2.line}),(0,u.tZ)("div",{css:"working"===r?w2.commitDotUntracked:w2.commitDot})]}),(0,u.BX)(v.G,{css:w2.commitColumn,children:[(0,u.tZ)(m.xv,{multiline:!1,css:w2.commitMessage,style:"working"===r?(0,eB._)({},wQ["commit-text-foreground"],w.TV.accentPrimaryStronger):{},children:t}),n?(0,u.tZ)(m.xv,{css:w2.commitDescription,children:n}):null]})]})},w9=n(10495),w7=function(){var e,t,n,r,i,o,a,l,c=(0,ts.Z)((t=(0,tl._)(function(e){return(0,tc.Jh)(this,function(t){return[2,e.getBranch("main")]})}),function(e){return t.apply(this,arguments)})),s=rN(c&&null===c.error?c.branch:null),d=(0,ts.Z)((e=(0,tl._)(function(e){return(0,tc.Jh)(this,function(t){return[2,e.getRepositoryState()]})}),function(t){return e.apply(this,arguments)})),f=null!==(l=d&&null===d.error&&d.type===t$.y5.NORMAL&&d.state!==t$.yG.CLEAN)&&void 0!==l&&l;return(0,u.BX)(w3,{hasLeft:!!(null==s?void 0:null===(n=s.onlyRemote)||void 0===n?void 0:n.length),hasRight:!!(null==s?void 0:null===(r=s.onlyLocal)||void 0===r?void 0:r.length)||f,children:[(0,u.tZ)(w4,{area:"left",title:"Remote",children:null==s?void 0:null===(i=s.onlyRemote)||void 0===i?void 0:i.map(function(e){return(0,u.tZ)(w5,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,w9.F)(e.author.date))},e.hash)})}),(0,u.BX)(w4,{area:"right",title:"My workspace",children:[f?(0,u.tZ)(w5,{type:"working",message:"uncommitted changes"}):null,null==s?void 0:null===(o=s.onlyLocal)||void 0===o?void 0:o.map(function(e){return(0,u.tZ)(w5,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,w9.F)(e.author.date))},e.hash)})]}),(0,u.tZ)(w4,{area:"common",children:null==s?void 0:null===(a=s.log)||void 0===a?void 0:a.map(function(e){return(0,u.tZ)(w5,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,w9.F)(e.author.date))},e.hash)})})]})},Ze=n(51197),Zt=n(4565),Zn=n(31741),Zr=n(63713),Zi=n(26246),Zo=(0,g.X)({inputRow:[w.l0.viewStyle,w.l0.flex.row,w.l0.align.center],input:[{paddingRight:25}],trigger:[{marginLeft:-25}],popover:[{width:"var(--trigger-width)",padding:1}]});function Za(e){var t=e.label,n=e.description,r=e.children,i=e.dataCy,o=(0,eP._)(e,["label","description","children","dataCy"]);return Zl({id:o.id,label:t,"aria-labelledby":o["aria-labelledby"],"aria-label":o["aria-label"]}),(0,u.BX)(vd.Ct,(0,L._)((0,N._)({},o),{"data-cy":i,children:[t?(0,u.tZ)(Zr._,{children:t}):null,(0,u.BX)("div",{css:Zo.inputRow,children:[(0,u.tZ)(U.II,{css:Zo.input}),(0,u.tZ)(h.hU,{alt:"open",isTooltipOpen:!1,css:Zo.trigger,children:(0,u.tZ)(e$.Z,{})})]}),n?(0,u.tZ)(Zi.FE,{children:n}):null,(0,u.tZ)(Zn.cp,{}),(0,u.tZ)(nt.Bf,{noArrow:!0,css:Zo.popover,children:(0,u.tZ)(m0.wb,{children:r})})]}))}var Zl=function(){},Zc=(0,g.X)({replSelector:[w.l0.minWidth(240)]}),Zs=function(e){var t,n=(t=(0,N._)({},wq,{variables:e}),ex.a(wK,t));return n.data?"Repl"!==n.data.repl.__typename?{error:"Something went wrong. Please try another Repl.",loading:!1,items:[]}:{error:null,loading:!1,items:n.data.repl.relatedGitRepls.items}:{error:null,loading:!0,items:[]}},Zu=function(e){var t=e.replId,n=e.onSelect,r=e.selectedReplId,i=(0,eP._)(e,["replId","onSelect","selectedReplId"]),o=(0,c._)((0,_.useState)(""),2),a=(o[0],o[1]),l=Zs({id:t,search:{}}),s=(0,ej.Z)(n),d=(0,_.useCallback)(function(e){var t=l.items.find(function(t){return t.id===e});t&&(s.current(t.id),a(t.title))},[l.items,s]);return(0,u.tZ)(Za,(0,L._)((0,N._)({menuTrigger:"focus",onInputChange:a,onSelectionChange:d,items:l.items,selectedKey:r,css:Zc.replSelector},i),{children:function(e){return(0,u.tZ)(m0.m9,{label:e.title,icon:(0,u.tZ)(Zt.Z,{iconUrl:e.iconUrl,alt:""}),description:e.owner?"@".concat(e.owner.username):""})}}))},Zd=(0,g.X)({header:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.p(8),{borderBottom:"1px solid ".concat(w.TV.outlineDefault)}],toggle:[w.l0.minWidth(99)]});function Zf(e){var t,n,r=(t={variables:{id:e.replId}},n=(0,N._)({},wq,t),ex.a(wY,n)),i=r.data,o=r.loading,a=r.error;return o?(0,u.tZ)(b.Z,{}):a||(null==i?void 0:i.repl.__typename)!=="Repl"?(0,u.tZ)(m.xv,{children:"Something went wrong. Please try another Repl."}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(wW,{head:"HEAD",base:"HEAD~1"}),(0,u.tZ)(X.zx,{colorway:"primary",text:"Pull changes",iconLeft:(0,u.tZ)(y.Z,{}),onClick:function(){return alert("Coming soon")}})]})}var Zh=function(e){var t=e.selectedReplId;return t?(0,u.tZ)(u.HY,{children:(0,u.tZ)(Zf,{replId:t})}):null},Zp=function(){var e=(0,c._)((0,_.useState)(function(){return(0,t1.MT)()}),1)[0];return(0,u.tZ)(u.HY,{children:(0,u.BX)(t2.Provider,{value:e,children:[(0,u.tZ)(ra,{}),(0,u.tZ)(w7,{})]})})},Zm=function(e){var t=e.children;return(0,u.tZ)(v.G,{css:Zd.header,children:t})};function Zv(){var e=(0,c._)((0,_.useState)(null),2),t=e[0],n=e[1],r=(0,eb.Z)(),i=(0,c._)((0,_.useState)("changes"),2),o=i[0],a=i[1],l=function(){return a("changes"===o?"commits":"changes")};return(0,u.BX)(u.HY,{children:[(0,u.BX)(Zm,{children:["changes"===o?(0,u.tZ)(X.zx,{css:Zd.toggle,text:"Changes",iconLeft:(0,u.tZ)(Ze.Z,{}),onClick:l},"toggle"):(0,u.tZ)(X.zx,{css:Zd.toggle,text:"Commits",iconLeft:(0,u.tZ)(to.Z,{}),onClick:l},"toggle"),(0,u.tZ)(m.xv,{color:"dimmer",children:"compared against"}),(0,u.tZ)(Zu,{"aria-label":"Select a Repl",replId:r,selectedReplId:t,onSelect:n}),(0,u.tZ)(X.zx,{text:"Pull",iconLeft:(0,u.tZ)(y.Z,{})})]}),"changes"===o?(0,u.tZ)(Zh,{selectedReplId:t}):(0,u.tZ)(Zp,{})]})}function Zg(){return(0,tK.P5)({controlName:"flag-first-class-git-r2r",logFlagToAnalytics:!1})?(0,u.tZ)(Zv,{}):null}var Zy=d.Dy.Object({type:d.Dy.Literal("project")}),Zb={Content:function(){return(0,u.tZ)(Zg,{})},Icon:function(){return(0,u.tZ)(wO.Z,{})},getTitle:function(){return"Project"},decode:function(e){return f.B4.Decode(Zy,e)}};function Zw(){return{codeEditor:I.D,webview:pW.R,media:cU,binary:T,pedit:pn,vnc:pX,unitTests:pI,adminPanel:mE,runnerOutput:pd.G,shell:pb,packager:h1,dependencies:va,systemDependencies:pE,envEditor:tq,draw:tW,git:aQ,diff:tZ,history:cv,database:eD,neon:dr,markdown:cL,ssh:wR,ghostwriterChat:b6,problems:pu,networking:dS,objectStorage:hl,workflows:wL,project:Zb}}},89587:function(e,t,n){n.d(t,{Qk:function(){return d},el:function(){return u}});var r=n(27387),i=n(96583),o=n(50959),a=n(42650),l=n(43471),c=n(53157),s=(0,a.cn)(!1),u=function(e){var t=(0,l.$X)(s);(0,o.useEffect)(function(){return e.watch(function(e){var n,r;if(e.error){if("NOT_FOUND"===e.error){t(!0);return}t(!1)}t(!(null===(r=e.config)||void 0===r?void 0:null===(n=r.autoSave)||void 0===n?void 0:n.disabled))})},[e,t])},d=function(){return(0,l.Hg)(s)};(0,r._)(function(e,t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.updateDotReplit([(0,c.Bn)(!t)])];case 1:return[2,n.sent()]}})})},68883:function(e,t,n){n.d(t,{T:function(){return o},u:function(){return a}});var r=n(43471),i=(0,n(42650).cn)(null);function o(){return(0,r.$X)(i)}function a(){return(0,r.Hg)(i)}},70016:function(e,t,n){n.d(t,{L5:function(){return b},Wk:function(){return D},Xq:function(){return P},Y6:function(){return w},bS:function(){return B},c4:function(){return E},dr:function(){return Z},qs:function(){return C},u1:function(){return k}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(85733),c=n(36647),s=n(63066),u=n(41974),d=n(42650),f=n(88205),h=n(50959),p=n(39743),m=n(43471),v=n(77454),g=(0,d.cn)({}),y=(0,d.cn)(null,function(e,t,n){t(g,function(e){return(0,u.Uy)(e,function(e){null===n.actions?delete e[n.paneId]:e[n.paneId]=n.actions})})});function b(e,t){var n=A(),r=(0,m.$X)(y),i=(0,l.Z)(e);(0,h.useEffect)(function(){var e;return r({paneId:n,actions:null!==(e=i.current())&&void 0!==e?e:null}),function(){r({paneId:n,actions:null})}},[r,n,i].concat((0,o._)(t)))}function w(e){var t=(0,c.Z)(function(){return(0,f.kv)(g,function(t){return e?t[e]:{}})},[e]);return(0,m.Hg)(t)}function Z(){var e=(0,m.XD)(g);return(0,h.useCallback)(function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null},[e])}var x=(0,d.cn)(function(e){var t=e(v._s);if(!t||!t.isVisible)return null;var n=!0,r=!1,o=void 0;try{for(var a,l=e(p.A1)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c,s=(0,i._)(a.value,2),u=s[0],d=s[1];if("codeEditor"===d.type&&d.data.path===t.path){var f=null!==(c=e(g)[u])&&void 0!==c?c:null;return(null==f?void 0:f.type)==="codeEditor"?f:null}}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return null});function C(){return(0,m.yL)(x)}var _=(0,d.cn)(new Map),S=(0,d.cn)(null,function(e,t,n,r){t(_,function(e){var t=new Map(e);return null===r?t.delete(n):r&&t.set(n,r),t})});function k(){return(0,m.$X)(S)}function E(){var e,t,n=(e=(0,m.rF)(),(0,h.useCallback)(function(t){return e((0,f.kv)(g,function(e){return e[t]}))},[e]));return(0,h.useCallback)((t=(0,r._)(function(e){return(0,a.Jh)(this,function(t){return[2,new Promise(function(t){var r=n(e);if(r.current){t(r.current);return}var i=r.subscribe(function(e){e&&(t(e),i())})})]})}),function(e){return t.apply(this,arguments)}),[n])}var T=(0,d.cn)(new Map),R=(0,d.cn)(null,function(e,t,n){t(T,function(e){return(0,u.Uy)(e,function(e){null===n.focus?e.delete(n.paneId):e.set(n.paneId,n.focus)})})});function I(e){var t=document.activeElement;return!!e&&!!t&&e!==t&&e.contains(t)}function D(e,t){var n=(0,l.Z)(e),r=A(),a=(0,s.Z)(),c=(0,h.useRef)(!a),u=(0,m.$X)(R),d=(0,m.XD)(p.J1),f=(0,m.XD)(_),v=(0,i._)((0,h.useState)(null),2),g=v[0],y=v[1];return(0,h.useEffect)(function(){n.current&&y(n.current())},t?(0,o._)(t):[]),(0,h.useEffect)(function(){var e=function(e){d()===r&&e.target!==f().get(r)&&(c.current=!1)};return document.body.addEventListener("focus",e,!0),function(){document.body.removeEventListener("focus",e,!0)}},[d,f,r]),(0,h.useEffect)(function(){if(g){var e=function(){g.focus()};return c.current&&d()===r&&!I(f().get(r))&&e(),u({paneId:r,focus:e}),function(){u({paneId:r,focus:null})}}},[g,u,r,d,f,a]),y}function B(){var e=(0,m.XD)(T),t=(0,m.XD)(_);return(0,c.Z)(function(){return function(n){var r=e().get(n),i=t().get(n);if(!I(i)){if(r){r();return}null==i||i.focus()}}},[e,t])}var G=(0,h.createContext)(null);function A(){var e=(0,h.useContext)(G);if(!e)throw Error("Expected pane id in context");return e}var P=G.Provider},67883:function(e,t,n){n.d(t,{mK:function(){return s},qm:function(){return l},xx:function(){return c}});var r=n(42650),i=n(50959),o=n(43471),a=(0,r.cn)(!1);function l(){return(0,o.Hg)(a)}function c(){var e=(0,o.$X)(a);return(0,i.useCallback)(function(){return e(!0)},[e])}function s(e){var t=(0,o.$X)(a),n=(0,i.useRef)(!1);(0,i.useEffect)(function(){n.current||(n.current=!0,t(e))},[t,e])}},39885:function(e,t,n){n.d(t,{a9:function(){return a},kM:function(){return l}});var r=n(42650),i=n(43471),o=(0,r.cn)(null);function a(){return(0,i.$X)(o)}function l(){return(0,i.Hg)(o)}},25114:function(e,t,n){n.d(t,{F:function(){return L},Z:function(){return O}});var r,i=n(27387),o=n(66626),a=n(63257),l=n(96583),c=n(43182),s=n(59695),u=n(63685),d=n(57967),f=n(85733),h=n(75993),p=n(43690),m=n(1813),v=n(11407),g=n(50798),y=n(50959),b=n(55927),w=n(30826),Z=n.n(w)()(function(){if("undefined"!=typeof AudioContext){var e=(r||(r=new AudioContext),r),t=e.createBufferSource();e.decodeAudioData(function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(n){t.buffer=n,t.connect(e.destination),t.start(0)})}},500,{leading:!0,trailing:!0}),x="replit-icons-font",C=n(36556),_="BESbswy";function S(e){return k.apply(this,arguments)}function k(){return(k=(0,i._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,t){return T.apply(this,arguments)}(document.fonts,e)];case 1:case 3:return t.sent(),[2];case 2:return[4,Promise.all([R("serif",e),R("sans-serif",e),R("monospace",e)])]}})})).apply(this,arguments)}function E(e){var t=e.family,n=e.style,r=e.weight;return"".concat(void 0===n?"normal":n," ").concat(void 0===r?"normal":r," 100px ").concat(t)}function T(){return(T=(0,i._)(function(e,t){var n,r,i,o,a,c;return(0,l.Jh)(this,function(l){return n=t.fontInfo,i=void 0===(r=t.characters)?_:r,a=void 0===(o=t.timeout)?3e3:o,c=E(n),[2,new Promise(function(t,r){var o=!1,l=C.kg.timeStart({family:n.family,style:n.style,weight:n.weight}),s=setTimeout(function(){o=!0,l("xterm font loading timed out"),t()},a);e.load(c,i).then(function(){o||(clearTimeout(s),t())}).catch(function(e){o||(clearTimeout(s),r(e))})})]})})).apply(this,arguments)}function R(e,t){return I.apply(this,arguments)}function I(){return(I=(0,i._)(function(e,t){var n,r,i,o,a,c,s,u,d;return(0,l.Jh)(this,function(l){return(n=t.fontInfo,i=void 0===(r=t.characters)?_:r,a=void 0===(o=t.timeout)?3e3:o,c=E(n),(s=document.createElement("span")).innerText=i,s.style.font="normal normal 100px ".concat(e),s.style.position="absolute",s.style.left="-9999px",s.style.top="-9999px",document.body.appendChild(s),u=s.offsetWidth,s.style.font=c,(d=function(){return u!==s.offsetWidth})())?[2]:[2,new Promise(function(e,t){var r=setInterval(function(){d()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(s),e())},50),i=setTimeout(function(){if(clearInterval(r),document.body.removeChild(s),d()){e();return}t(Error("Font loading timed out "+n.family))},a)})]})})).apply(this,arguments)}function D(e){c.Tb(e)}var B='"ReplitHack"',G=String.fromCharCode(61095);function A(){return(A=(0,i._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return!function(){if(!document.getElementById(x)){var e=document.createElement("style");e.id=x,e.type="text/css",e.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(e)}}(),[4,Promise.all([S({fontInfo:{family:"replit-icons"},characters:G}).catch(D),S({fontInfo:{family:B,weight:"400"}}).catch(D),S({fontInfo:{family:B,weight:"400",style:"italic"}}).catch(D),S({fontInfo:{family:B,weight:"700"}}).catch(D),S({fontInfo:{family:B,weight:"700",style:"italic"}}).catch(D)])];case 1:return e.sent(),[2]}})})).apply(this,arguments)}var P=n(81541),N=n(49500),L=1e4;function O(e){var t,r,w,x,C=(0,o._)((0,y.useState)(null),2),_=C[0],S=C[1],k=(0,o._)((0,y.useState)(null),2),E=k[0],T=k[1],R=(0,P.f)(),I=(0,s.Gn)("fontSize","accessibleTerminal","shellBellAudio").preferences,D=I.fontSize,G=I.accessibleTerminal,O=I.shellBellAudio,U=(0,m.uV)(),M=(0,d.Z)(),X=null==e?void 0:e.openFile,F=(0,f.Z)(null==e?void 0:e.openWebview),W=null==e?void 0:e.listFiles,H=(0,y.useMemo)(function(){return X&&W?{openFile:X,listFiles:W}:null},[X,W]),V=(0,f.Z)(null==e?void 0:e.onInBandOSCMessages),z={screenReaderMode:G,fileLinking:H,terminalTheme:R,fontSize:D,scrollback:null==e?void 0:e.scrollback},j=(0,f.Z)(z),q=(0,b.Z)(function(){(null==e?void 0:e.autoFit)!==!1&&(null==E||E.fit())},{type:"debounce",wait:200}),J=(0,y.useRef)(null),Y=(0,f.Z)(null==e?void 0:e.size),K=(0,g.Sy)();return(0,y.useLayoutEffect)(function(){if(_){var e=[];return(function(){return t.apply(this,arguments)})().catch(function(e){if(e.message&&e.message.toLowerCase().includes("loading chunk")){c.$e(function(t){t.setExtra("message",e.message),t.setExtra("stack",e.stack),c.Tb(Error("Loading chunk failed"))});return}U({error:e,origin:"Xterm: init"})}),function(){e.forEach(function(e){return e()})}}function t(){return(t=(0,i._)(function(){var t,r,i,s,d,f,m,y,b,w,Z,x,C,S,k,E,R,I,D,G,P,O,U,X,W;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return[4,Promise.all([Promise.all([(0,p.Z)(function(){return n.e(573).then(n.t.bind(n,99125,23))}),(0,p.Z)(function(){return n.e(9970).then(n.t.bind(n,9970,23))}),(0,p.Z)(function(){return n.e(4819).then(n.t.bind(n,14819,23))}),(0,p.Z)(function(){return n.e(8650).then(n.t.bind(n,66829,23))}),(0,p.Z)(function(){return n.e(7040).then(n.t.bind(n,57040,23))}),(0,p.Z)(function(){return n.e(7158).then(n.bind(n,47158))}),(0,p.Z)(function(){return n.e(2527).then(n.t.bind(n,72527,23))}),(0,p.Z)(function(){return n.e(783).then(n.t.bind(n,20783,23))})]),function(){return A.apply(this,arguments)}()])];case 1:var H;if(m=o._.apply(void 0,[l.sent(),1]),b=(y=(0,o._)(m[0],8))[0].Terminal,w=y[1].FitAddon,Z=y[2].SearchAddon,x=y[3].WebLinksAddon,C=y[4].Unicode11Addon,S=y[5].FileLinkAddon,k=y[6].CanvasAddon,E=y[7].WebglAddon,!_)return[2];return I={allowProposedApi:!0,cursorBlink:!1,scrollback:null!==(R=j.current.scrollback)&&void 0!==R?R:L,tabStopWidth:4,fontFamily:"".concat(B,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:j.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:j.current.terminalTheme,screenReaderMode:j.current.screenReaderMode,logger:{trace:function(e,n){return(t=N).trace.apply(t,["xterm: "+e].concat((0,a._)(n)))},debug:function(e,t){return(r=N).debug.apply(r,["xterm: "+e].concat((0,a._)(t)))},info:function(e,t){return(i=N).info.apply(i,["xterm: "+e].concat((0,a._)(t)))},warn:function(e,t){return(s=N).warn.apply(s,["xterm: "+e].concat((0,a._)(t)))},error:function(e,t){"string"==typeof e&&e.includes("Parsing error")||N.error("xterm: "+e,t)}}},(null===(d=Y.current)||void 0===d?void 0:d.cols)!==void 0&&(I.cols=Y.current.cols),(null===(f=Y.current)||void 0===f?void 0:f.rows)!==void 0&&(I.rows=Y.current.rows),D=new b(I),j.current.fileLinking?(J.current=new S(j.current.fileLinking.openFile,j.current.fileLinking.listFiles),D.loadAddon(J.current)):J.current=null,G=new w,D.loadAddon(G),P=new x((H=function(e){M?u.X.openExternalUrl(e):window.open(e,"_blank")},function(e,t){var n;try{n=new URL(t)}catch(e){return}if(("0.0.0.0"===n.hostname||"localhost"===n.hostname)&&void 0!==F.current){F.current(n.pathname,parseInt(n.port,10));return}H(t)})),D.loadAddon(P),O=new Z,D.loadAddon(O),U=new C,D.loadAddon(U),D.unicode.activeVersion="11",D.open(_),e.push(function(){try{D.dispose()}catch(e){}}),function(){try{if(!(!function(){if(!/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent))return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&document.createElement("canvas").getContext("webgl2"))){var e=new k;D.loadAddon(e);return}var t=new E;D.loadAddon(t),t.onContextLoss(function(){t.dispose(),D.loadAddon(new k)})}catch(e){var n=new k;D.loadAddon(n)}}(),X=!1,W=null,D.attachCustomKeyEventHandler(function(e){var t=(0,v.IX)(e);if(t){var n=t;W&&(n=(0,v.cZ)(W,t));var r=K(n);switch(r.kind){case g.Xp.NoMatch:W=null;break;case g.Xp.WaitingForChord:return W=r.key,!1;case g.Xp.MatchFound:return W=null,!1}}return(!window.navigator.clipboard||"c"!==e.key.toLowerCase()||!e.ctrlKey||!e.shiftKey||("keyup"===e.type&&D.hasSelection()&&(0,h.Z)(D.getSelection()).catch(function(e){c.$e(function(t){t.setTag("xterm-clipboard",!0),t.setExtra("type","copy"),c.Tb(e)})}),e.preventDefault(),e.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!X)&&(X="escape"===e.key.toLowerCase(),!0))}),V.current&&Object.entries(V.current).forEach(function(e){var t=(0,o._)(e,2),n=t[0],r=t[1];D.parser.registerOscHandler(Number(n),function(e){return r(D,e),!0})}),T({onKey:D.onKey.bind(D),onData:D.onData.bind(D),onResize:D.onResize.bind(D),write:D.write.bind(D),fit:function(){var e=_.getBoundingClientRect(),t=e.width,n=e.height;t>0&&n>0&&G.fit()},focus:function(){return D.focus()},clear:function(){return D.clear()},findPrevious:function(e,t){return O.findPrevious(e,t)},findNext:function(e,t){return O.findNext(e,t)},getSize:function(){return{cols:D.cols,rows:D.rows}},paste:function(e){return D.paste(e)},_term:D}),q(_),[2]}})})).apply(this,arguments)}},[_,q,j,U,Y,K,M,F,V]),t=null==E?void 0:E._term,r=z.screenReaderMode,w=z.fileLinking,x=z.terminalTheme,(0,y.useEffect)(function(){t&&x&&(t.options.theme=x)},[t,x]),(0,y.useEffect)(function(){t&&(t.options.screenReaderMode=r)},[t,r]),(0,y.useEffect)(function(){if(t){if(!w){J.current&&J.current.deactivate();return}if(!J.current){var e=!1;return n.e(7158).then(n.bind(n,47158)).then(function(n){var r=n.FileLinkAddon;e||(J.current=new r(w.openFile,w.listFiles),t.loadAddon(J.current))}),function(){e=!0}}J.current.update(w.openFile,w.listFiles),J.current.reactivate()}},[t,w,J]),(0,y.useEffect)(function(){var e=null==E?void 0:E._term;e&&D&&e.options.fontSize!==D&&(e.options.fontSize=D,e.refresh(0,e.rows-1),E.fit())},[D,E]),(0,y.useEffect)(function(){if(O){var e=null==E?void 0:E._term;if(e)return e.onBell(Z).dispose}},[O,E]),[E,S]}},81541:function(e,t,n){n.d(t,{f:function(){return a}});var r=n(55460),i=n(65377),o=n(50959);function a(){var e=(0,r.F)().values;return(0,o.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Sj.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)},[e])}},50243:function(e,t,n){n.d(t,{yL:function(){return a}});var r=n(76913),i=n(50959),o=n(66626);function a(e,t){var n=(0,o._)((0,i.useState)(),2)[1],a=(0,i.useMemo)(function(){if(!e)return{subscribe:function(){return function(){}},getSnapshot:function(){return null}};var t=r.y$.from(e);return{subscribe:function(e){return t.subscribe({next:e,error:function(e){n(function(){throw e})}})},getSnapshot:function(){return e.current}}},[e]),l=a.subscribe,c=a.getSnapshot,s=(0,i.useSyncExternalStore)(l,c,c);return e?s:t}},76913:function(e,t,n){n.d(t,{y$:function(){return s},vU:function(){return p}}),n(17694);var r=n(12285),i=n(83176),o=n(25490),a=n(4955),l=n(63257),c=n(9670),s=function(e){"use strict";(0,a._)(n,e);var t=(0,c._)(n);function n(e){return(0,r._)(this,n),t.call(this,e)}var s=n.prototype;return s.subscribe=function(e,t,r){var a,l;return a=(0,i._)((0,o._)(n.prototype),"subscribe",this).call(this,e,t,r),Object.defineProperty(l=function(){a.unsubscribe()},"closed",{get:function(){return a.closed}}),l.unsubscribe=function(){a.unsubscribe()},l},s[Symbol.observable]=function(){return this},n.from=function(e){return(0,i._)((0,o._)(n),"from",this).call(this,e)},n.of=function(){for(var e,t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=(0,i._)((0,o._)(n),"of",this)).call.apply(e,[this].concat((0,l._)(r)))},n}(n(11600).y);s.prototype[Symbol.species]=s;var u=n(4384),d=function(){"use strict";function e(){(0,r._)(this,e),this.listeners=new Map}var t=e.prototype;return t.add=function(e){var t=this,n=function(){t.listeners.delete(n)};return this.listeners.set(n,e),n},t.notify=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,c=this.listeners.values()[Symbol.iterator]();!(r=(a=c.next()).done);r=!0)a.value.apply(void 0,(0,l._)(t))}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}},t.clear=function(){this.listeners.clear()},t[Symbol.iterator]=function(){return this.listeners.values()},(0,u._)(e,[{key:"size",get:function(){return this.listeners.size}}]),e}(),f=function(){"use strict";function e(t){(0,r._)(this,e),this.observable=new s(t)}var t=e.prototype;return t.subscribe=function(e){return this.observable.subscribe(e)},t.map=function(e){return new h(e,this)},t[Symbol.observable]=function(){return this.observable},e}(),h=function(e){"use strict";(0,a._)(n,e);var t=(0,c._)(n);function n(e,i){(0,r._)(this,n);var o,a=s.from(i);return(o=t.call(this,function(e){return a.subscribe(function(t){if(o.cached&&o.cached.value===t)e.next(o.cached.result);else{var n=o.fn(t);o.cached={value:t,result:n},e.next(n)}})})).source=i,o.fn=e,o.cached=null,o}return(0,u._)(n,[{key:"current",get:function(){var e=this.source.current;if(this.cached&&this.cached.value===e)return this.cached.result;var t=this.fn(e);return this.cached={value:e,result:t},t}}]),n}(f),p=function(e){"use strict";(0,a._)(n,e);var t=(0,c._)(n);function n(e){(0,r._)(this,n);var i,o=new d;return(i=t.call(this,function(e){var t=o.add(function(t){e.next(t)});return e.next(i.state),t})).listeners=o,i.state=e,i}var i=n.prototype;return i.set=function(e){e!==this.state&&(this.state=e,this.listeners.notify(e))},i.update=function(e){this.set(e(this.state))},(0,u._)(n,[{key:"current",get:function(){return this.state}}]),n}(f)},8605:function(e,t,n){n.d(t,{o_:function(){return h},bL:function(){return p},ZP:function(){return m}});var r=n(806),i=n(40996),o=n(20732),a=n(52116),l=n(41733),c=n(30509),s=n(36725),u="SERVER",d={codec:s.f,heartbeatIntervalMs:2500,heartbeatsUntilDead:4,sessionDisconnectGraceMs:15e3},f=(0,c._)((0,l._)({},d),{connectionRetryOptions:{baseIntervalMs:250,maxJitterMs:500,maxBackoffMs:32e3,attemptBudgetCapacity:5,budgetRestoreIntervalMs:5e3}}),h=u,p=i.K1,m=function(e,t,n){(0,a.nb)(t),(0,a.uR)("info");var i=new o.k(n,e,f);return{client:(0,r.eI)(i,u,!1),transport:i}}},80454:function(e,t,n){n.d(t,{f:function(){return r}});var r={production:"wss://production-ai-chat.replit.com/ws",staging:"wss://staging-ai-chat.replit.com/ws",development:"ws://127.0.0.1:8000/ws"}},80047:function(e,t,n){n.d(t,{OO:function(){return r},Uw:function(){return i},vw:function(){return o}});var r="replit-repltuned-v1-5-3b",i={"replit-repltuned-v1-5-3b":{},"replit-v1-5-3b":{}},o=new Set(Object.keys(i))},97906:function(e,t,n){function r(e){return 15113696===e}function i(e){return 777914===e||r(e)||3944703===e||29762144===e}n.d(t,{v4:function(){return r},xm:function(){return i}})},51585:function(e,t,n){n.d(t,{I:function(){return i},z:function(){return r}});var r=100,i=250},2049:function(e,t,n){n.d(t,{z2:function(){return l}});var r=n(63257),i=n(80047),o=n(77476),a=[{id:"true",editorPreferencesValue:!0,title:"true"},{id:"false",editorPreferencesValue:!1,title:"false"}],l={layout:{id:"layout",name:"Default Layout",description:"Change the layout of the editor.",type:"select",editorPreferencesKey:"isLayoutStacked",options:[{id:"side-by-side",editorPreferencesValue:!1,title:"side-by-side"},{id:"stacked",editorPreferencesValue:!0,title:"stacked"}]},fontSize:{id:"fontSize",name:"Font Size",description:"Change the font size of the editor.",type:"select",editorPreferencesKey:"fontSize",options:[{id:"10",editorPreferencesValue:10,title:"tiny"},{id:"12",editorPreferencesValue:12,title:"small"},{id:"14",editorPreferencesValue:14,title:"normal"},{id:"18",editorPreferencesValue:18,title:"large"},{id:"24",editorPreferencesValue:24,title:"huge"}]},wrapping:{id:"wrapping",name:"Wrapping",description:"Change whether the editor wraps lines or not.",type:"select",editorPreferencesKey:"wrapping",options:[{id:"none",editorPreferencesValue:!1,title:"none"},{id:"soft",editorPreferencesValue:!0,title:"soft wrap"}]},minimap:{id:"minimap",name:"Minimap",description:"Change the minimap display.",type:"select",editorPreferencesKey:"minimapDisplay",options:[{id:"none",editorPreferencesValue:"none",title:"none"},{id:"blocks",editorPreferencesValue:"blocks",title:"blocks"},{id:"characters",editorPreferencesValue:"characters",title:"characters"}]},indentationDetection:{id:"indentDetection",name:"Indentation Detection",description:"Automatically detect indentation settings when opening a file.",type:"boolean",editorPreferencesKey:"indentDetection",options:a},indentFormatPastes:{id:"indentFormatPastes",name:"Format Pasted Text Indentation",description:"Automatically format the indentation of pasted text.",type:"boolean",editorPreferencesKey:"indentFormatPastes",options:a},indentIsSpaces:{id:"indentationCharacter",name:"Indentation Character",description:"The character used for indenting lines.",type:"select",editorPreferencesKey:"indentIsSpaces",options:[{id:"spaces",editorPreferencesValue:!0,title:"spaces"},{id:"tabs",editorPreferencesValue:!1,title:"tabs"}]},keyboardHandler:{id:"keyboardHandler",name:"Keybinds",description:"Use another keyboard mapping",type:"select",editorPreferencesKey:"keyboardHandler",options:[{id:"default",editorPreferencesValue:null,title:"default"},{id:"emacs",editorPreferencesValue:"emacs",title:"emacs"},{id:"vim",editorPreferencesValue:"vim",title:"vim"}]},showFileTreeGitStatus:{id:"showFileTreeGitStatus",name:"Filetree Git Status",description:"Show the Git status of files in the file tree.",type:"boolean",editorPreferencesKey:"showFileTreeGitStatus",options:a},codeIntelligence:{id:"codeIntelligence",name:"Code Intelligence",description:"Code intelligence gives you autocomplete, as well as hints as you type.",type:"boolean",editorPreferencesKey:"codeIntelligence",options:a},semanticTokens:{id:"semanticTokens",name:"Semantic Tokens",description:"Enables enhanced syntax highlighting from language servers.",type:"boolean",editorPreferencesKey:"semanticTokens",options:a},shellBellAudio:{id:"shellBellAudio",name:"Shell Bell Audible Indicator",description:"Play sound in the Shell on issues like a failed tab completion.",type:"boolean",editorPreferencesKey:"shellBellAudio",options:a},accessibleTerminal:{id:"accessibleTerminal",name:"Accessible Terminal Output",description:"Enable this setting to use a screen reader. Warning: this can negatively affect performance.",type:"boolean",editorPreferencesKey:"accessibleTerminal",options:a},webviewAutoOpenOnPortOpened:{id:"webviewAutoOpenOnPortOpened",name:"Automatic Webview",description:"Open a webview automatically when a port is open.",type:"boolean",editorPreferencesKey:"webviewAutoOpenOnPortOpened",options:a},forwardPortsAutomatically:{id:"forwardPortsAutomatically",name:"Forward Opened Ports Automatically",description:"Automatically configure detected newly opened ports.",type:"select",editorPreferencesKey:"forwardPortsAutomatically",options:[{id:"none",editorPreferencesValue:"none",title:"never"},{id:"only-global",editorPreferencesValue:"only-global",title:"all ports except localhost"},{id:"all",editorPreferencesValue:"all",title:"all ports"}]},chatAudioNotification:{id:"chatAudioNotification",name:"Chat Audio Notification",description:"Enables playing a sound when you receive a new chat message.",type:"boolean",editorPreferencesKey:"chatAudioNotification",options:a},multiselectModifierKey:{id:"multiselectModifierKey",name:"Multiselect Modifier Key",description:"Modifier key for selecting multiple items in the filetree.",type:"select",editorPreferencesKey:"multiselectModifierKey",options:[{id:"cmdOrCtrlKey",editorPreferencesValue:"cmdOrCtrlKey",title:"cmdOrCtrlKey"},{id:"altKey",editorPreferencesValue:"altKey",title:"altKey"}]},completeCodeEngine:{id:"completeCodeEngine",name:"AI Code Completion Engine",description:"The engine used for code completion.",type:"select",editorPreferencesKey:"completeCodeEngine",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(i.vw).map(function(e){return{id:e,editorPreferencesValue:e,title:e}})))},codeSuggestion:{id:"codeSuggestion",name:"AI Code Completion",description:"Code completion provides inline “ghost text” suggestions while you code.",type:"boolean",editorPreferencesKey:"codeSuggestion",options:a},chatEngine:{id:"chatEngine",name:"AI Chat Engine",description:"The engine used for chat completion.",type:"select",editorPreferencesKey:"chatEngine",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(o.ce).map(function(e){return{id:e,editorPreferencesValue:e,title:e}})))},ghostwriterUseAdvancedModel:{id:"ghostwriterUseAdvancedModel",name:"Use Advanced AI Model",description:"Advanced models require a lot of power and have usage limits. They're most useful for tasks that are ambiguous or require creativity.",type:"boolean",editorPreferencesKey:"ghostwriterUseAdvancedModel",options:a}}},58498:function(e,t,n){n.d(t,{F5:function(){return d},Hk:function(){return s},Kd:function(){return u},N$:function(){return c},Ob:function(){return l},Vl:function(){return a},Vt:function(){return r},ig:function(){return i},lF:function(){return o}});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,c="https://twitter.com/",s="https://www.linkedin.com/in/",u="https://github.com/",d=/\/$/},19327:function(e,t,n){n.d(t,{Z:function(){return u}});var r,i,o=n(27387),a=n(98924),l=n(96583);(r=i||(i={})).CHANNEL_OPENED="CHANNEL_OPENED",r.OUTPUT_RECEIVED="OUTPUT_RECEIVED",r.STDERR_RECEIVED="STDERR_RECEIVED",r.STATE_CHANGED="STATE_CHANGED";var c=n(12663),s=n(20075);function u(e){var t,n=e.container,r=(0,c.ZP)(),u=null,d=!1;function f(){return(f=(0,o._)(function(){return(0,l.Jh)(this,function(e){if(d)throw Error("closed");return u?[2,u]:[2,new Promise(function(e){r.once(i.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}var h="",p="",m=n.openChannel({service:"exec"},function(e){var t=e.channel,n=!1;return t.onCommand(function(e){if(null!=e.output)h+=e.output,r.emit(i.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)p+=e.stderr,r.emit(i.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!n){n=!0;return}r.emit(i.STATE_CHANGED,{state:e.state,outputBuffer:h,stderrBuffer:p}),e.state===s.api.State.Stopped&&(h="",p="")}}),u=t,r.emit(i.CHANNEL_OPENED,t),function(){u=null}});return{request:(t=(0,o._)(function(e){var t,n,r,i,o,c,u,d,h;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=e.env,n=e.args,i=void 0===(r=e.lifecycle)?s.api.Exec.Lifecycle.BLOCKING:r,c=void 0!==(o=e.splitStderr)&&o,u=(0,a._)(e,["env","args","lifecycle","splitStderr"]),[4,function(){return f.apply(this,arguments)}()];case 1:return h=(d=l.sent()).request({exec:{env:t,args:n,lifecycle:i,splitStderr:c}}),i===s.api.Exec.Lifecycle.STDIN&&"stdin"in u&&(d.send({input:u.stdin}),d.send({inputClose:{}})),[2,h]}})}),function(e){return t.apply(this,arguments)}),onOutput:function(e){return r.on(i.OUTPUT_RECEIVED,e),function(){r.off(i.OUTPUT_RECEIVED,e)}},onStderr:function(e){return r.on(i.STDERR_RECEIVED,e),function(){r.off(i.STDERR_RECEIVED,e)}},onStateChanged:function(e){return r.on(i.STATE_CHANGED,e),function(){r.off(i.STATE_CHANGED,e)}},getStatus:function(){return u?u.status:"closed"},dispose:function(){d=!0,m(),u=null}}}}}]);
//# sourceMappingURL=6143-2d09c9361204574d.js.map