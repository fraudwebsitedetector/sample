!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="affc8a1c-7730-4834-897b-effa1f89335c",e._sentryDebugIdIdentifier="sentry-dbid-affc8a1c-7730-4834-897b-effa1f89335c")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"ea8dc62d"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1618],{3212:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e,t){var n=t.existing,r=t.getKey,i=new Map,l=!0,a=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(l=(s=c.next()).done);l=!0){var u=s.value;i.set(r(u),u)}}catch(e){a=!0,o=e}finally{try{l||null==c.return||c.return()}finally{if(a)throw o}}var d=new Set,p=[],h=!0,f=!1,g=void 0;try{for(var v,m=n[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var b=v.value,y=r(b),w=i.get(y);w&&(p.push(w),d.add(y))}}catch(e){f=!0,g=e}finally{try{h||null==m.return||m.return()}finally{if(f)throw g}}var Z=!0,_=!1,x=void 0;try{for(var R,C=e[Symbol.iterator]();!(Z=(R=C.next()).done);Z=!0){var S=R.value;d.has(r(S))||p.push(S)}}catch(e){_=!0,x=e}finally{try{Z||null==C.return||C.return()}finally{if(_)throw x}}return p}},11618:function(e,t,n){n.d(t,{Z:function(){return t$}});var r,i,l=n(42516),a=n(74985),o=n(82230),s=n(94778),c=n(60772),u=n(29318),d=n(72093),p=n(60100),h=n(27387),f=n(41733),g=n(30509),v=n(66626),m=n(96583),b=n(85733),y=n(60305),w=n(12285),Z=n(4955),_=n(14105),x=n(9670),R=n(29609),C=n(92031),S=n(3341),T=n.n(S),I=n(85438),V=n(50959),k=n(47048),U=n(94610),G=n(21262),P=n(71440),E=n(58995);function F(){var e=(0,G._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return F=function(){return e},e}var D={},B=(0,P.Ps)(F(),p.FW),W=n(99165);function X(){var e=(0,G._)(["\n  mutation UseSetReplTagsSetTags($input: SetReplTagsInput!) {\n    setReplTags(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return X=function(){return e},e}var N={},L=(0,P.Ps)(X(),p.FW);function z(e){var t,n,r,i,l,a,o;return e.error?e.error.message||"Something went wrong saving your Repl Tags":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplTags)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplTags)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(l=a.setReplTags)||void 0===l?void 0:l.__typename)==="UserError"?e.data.setReplTags.message:(null===(o=e.data)||void 0===o?void 0:o.setReplTags)&&"Repl"!==e.data.setReplTags.__typename?"Something went wrong posting your Repl":void 0}function j(){var e=(0,G._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return j=function(){return e},e}var M={},A=(0,P.Ps)(j(),p.FW);function O(e){var t,n,r,i,l,a,o;return e.error?e.error.message||"Something went wrong saving your Cover page":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplViewSettings)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplViewSettings)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(l=a.setReplViewSettings)||void 0===l?void 0:l.__typename)==="UserError"?e.data.setReplViewSettings.message:(null===(o=e.data)||void 0===o?void 0:o.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function K(){var e=(0,G._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return K=function(){return e},e}var H={},J=(0,P.Ps)(K(),p.FW);function $(e){return e.message||"Something went wrong saving updates to your Repl"}function Y(e){return"repl_file"===e||"repl_image"===e}(r=i||(i={})).ReplFile="repl_file",r.ReplImage="repl_image";var q=function(e){"use strict";(0,Z._)(n,e);var t=(0,x._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error)),Q=function(e){"use strict";(0,Z._)(n,e);var t=(0,x._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error)),ee=function(e){"use strict";(0,Z._)(n,e);var t=(0,x._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error));function et(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your Repl a title"}}function en(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this Repl do?"}}var er=(0,V.createContext)(null),ei=function(e){var t=(0,V.useContext)(er);if(!t)throw Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},el=function(){var e=(0,V.useContext)(er);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},ea=n(15235),eo=n(99236),es=n(64479),ec=n(64432),eu=n(2511),ed=n(1383),ep=n(8147),eh=n(87128),ef=n(98674),eg=n(38414),ev=n(57253),em=n(19068),eb=n(59947),ey=s.K.button,ew=function(){return(0,a.tZ)(s.G,{css:[d.l0.flex.row,d.l0.flex.grow(1),{borderTop:"1px solid ".concat(d.TV.outlineDimmest)}]})},eZ=function(e){var t=e.isActive,n=e.isComplete,r=e.children,i=e.onClick,l=e.disabled;return(0,a.BX)(ey,{type:"button",css:[d.l0.reset.button,d.l0.position.relative,em.gU.nofill,t&&d.l0.backgroundColor.backgroundHigher,d.l0.p(4),d.l0.borderRadius(4)],onClick:i,disabled:l,children:[(0,a.tZ)(o.xv,{variant:"small",multiline:!1,children:r}),n?(0,a.tZ)(eb.Z,{size:6,strokeWidth:6,color:d.TV.foregroundDimmer,css:[d.l0.position.absolute,{top:2,right:-2}]}):null]})},e_=n(80854),ex=n(28800);function eR(e){var t=e.error,n=e.dataCy;return t?(0,a.BX)(s.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:[(0,a.tZ)(eh.Z,{css:[d.l0.color.accentNegativeStronger]}),(0,a.tZ)(o.xv,{css:[d.l0.flex.growAndShrink(1),d.l0.color.accentNegativeStronger],dataCy:n,children:t.message})]}):null}var eC=n(59520),eS=n(91945),eT=n(17642),eI=n(14872),eV=n(3212),ek=n(10495),eU=n(72333),eG=n(18060),eP=n(90493);function eE(){var e=(0,G._)(["\n  fragment PublishableReplSelectorRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    slug\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n    iconUrl\n  }\n"]);return eE=function(){return e},e}function eF(){var e=(0,G._)(["\n  query PublishableReplSelector($search: String!) {\n    currentUser {\n      id\n      publishableReplSearch(search: $search) {\n        id\n        ...PublishableReplSelectorRepl\n      }\n    }\n  }\n  ","\n"]);return eF=function(){return e},e}var eD={},eB=(0,P.Ps)(eE()),eW=(0,P.Ps)(eF(),eB),eX=s.K.div,eN=s.K.li,eL={searchValue:"",loading:!1,repls:[]};function ez(e,t){switch(t.type){case"data":var n,r=(null===(n=t.data.currentUser)||void 0===n?void 0:n.publishableReplSearch)||[];return(0,g._)((0,f._)({},e),{loading:!1,repls:(0,eV.Z)(r,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return(0,g._)((0,f._)({},e),{loading:!0});case"searchValue":return(0,g._)((0,f._)({},e),{searchValue:t.searchValue})}}function ej(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function eM(e){var t,n=(0,V.useRef)(null);(0,eC.rf)(function(){var t;e.selectedRepl&&(null===(t=n.current)||void 0===t||t.blur())},[e.selectedRepl]);var r=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&ej(e.selectedRepl)===e.inputValue?(0,a.tZ)(s.G,{css:[d.l0.px(8),d.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,a.tZ)(eU.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,a.BX)(s.G,{css:[{position:"relative"}],children:[(0,a.BX)(eX,(0,g._)((0,f._)({},e.getComboboxProps()),{css:{position:"relative"},children:[r,(0,a.tZ)(eG.II,(0,f._)({css:[d.l0.pr(32),r&&d.l0.pl(32)]},e.getInputProps({placeholder:"Search for a Repl",onFocus:e.onFocus,ref:n}))),(0,a.tZ)(s.G,{css:[d.l0.center,d.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,a.tZ)(u.Z,{}):(0,a.tZ)(eP.Z,{})})]})),(0,a.tZ)(eX,(0,g._)((0,f._)({},e.getMenuProps()),{css:{position:"relative"},children:e.isOpen?(0,a.BX)(eS.Z,{children:[e.loading&&0===e.repls.length?(0,a.tZ)(eN,{css:[d.l0.center,d.l0.py(32)],children:(0,a.tZ)(u.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,a.tZ)(eN,{css:[d.l0.center,d.l0.py(32)],children:(0,a.tZ)(o.xv,{color:"dimmer",variant:"small",multiline:!1,children:"No Repls found"})}),e.repls.map(function(t,n){return(0,a.tZ)(eN,(0,g._)((0,f._)({},e.getItemProps({item:t,index:n})),{children:(0,a.tZ)(eT.Z,{taller:!0,filter:"",title:ej(t),subtitle:(0,ek.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===n,icon:t.iconUrl?(0,a.tZ)(eU.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)})]}):null}))]})}var eA=n(56731),eO=n(21371),eK=s.K.label,eH=(0,V.forwardRef)(function(e,t){return(0,a.tZ)(eK,(0,g._)((0,f._)({},e),{ref:t,css:d.l0.color.foregroundDimmer}))}),eJ=function(){var e,t,n,r,i,l,o,c=(0,eA.U)()("repl"),u=ei("replId"),p=ei("iconUrl"),h=(t=(e=(0,v._)((0,V.useReducer)(ez,eL),2))[0],n=e[1],l=(r={variables:{search:(0,eI.Z)(t.searchValue,200)},notifyOnNetworkStatusChange:!0,onCompleted:function(e){n({type:"data",data:e})}},i=(0,f._)({},eD,r),E.a(eW,i)).loading,(0,V.useEffect)(function(){l&&n({type:"loading"})},[l]),o=(0,V.useCallback)(function(e){return n({type:"searchValue",searchValue:e||""})},[]),{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:o}),m=(0,eO.Kb)({id:c,items:h.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;h.setSearchValue(t)},onSelectedItemChange:function(e){(null==e?void 0:e.selectedItem)&&(u.setValue(e.selectedItem.id),m.closeMenu())},itemToString:ej});return(0,a.BX)(s.G,{css:[d.l0.colWithGap(4)],children:[(0,a.tZ)(eH,{css:d.l0.color.foregroundDimmer,htmlFor:c,children:"Repl"}),(0,a.tZ)(eM,{getComboboxProps:m.getComboboxProps,getInputProps:m.getInputProps,getItemProps:m.getItemProps,getMenuProps:m.getMenuProps,isOpen:m.isOpen,highlightedIndex:m.highlightedIndex,inputValue:m.inputValue,selectedRepl:m.selectedItem?(0,g._)((0,f._)({},m.selectedItem),{iconUrl:p.value||m.selectedItem.iconUrl}):void 0,repls:h.repls,loading:h.loading,onFocus:function(e){m.selectedItem&&(e.preventDefault(),e.currentTarget.select(),h.setSearchValue("")),m.openMenu()}})]})},e$=function(){var e=(0,eA.U)(),t=e("replName"),n=e("replDescription"),r=el(),i=r.replIdField,l=r.replTitleField,c=r.replDescriptionField,u=r.isSaving;return(0,a.BX)(s.G,{css:[d.l0.colWithGap(16),d.l0.flex.growAndShrink(1)],children:[!i.value||i.touched?(0,a.tZ)(eJ,{}):null,(0,a.BX)(s.G,{css:[d.l0.colWithGap(4)],children:[(0,a.tZ)(s.G,{css:[d.l0.flex.row,d.l0.align.baseline,d.l0.justify.spaceBetween],children:(0,a.tZ)(eH,{css:[d.l0.color.foregroundDimmer,{lineHeight:d.TV.lineHeightSmall}],htmlFor:t,children:"Repl name"})}),l.value]}),(0,a.BX)(s.G,{css:[d.l0.colWithGap(4)],children:[(0,a.BX)(s.G,{css:[d.l0.flex.row,d.l0.align.baseline,d.l0.justify.spaceBetween],children:[(0,a.tZ)(eH,{css:[d.l0.color.foregroundDimmer,{lineHeight:d.TV.lineHeightSmall}],htmlFor:n,children:"Repl description"}),(0,a.BX)(o.xv,{multiline:!1,css:{color:c.value.length>1e3?d.TV.accentNegativeStronger:d.TV.foregroundDimmest},children:[c.value.length,"/",1e3]})]}),(0,a.tZ)(eG.B,{id:n,value:c.value,disabled:!i.value||u,onChange:function(e){c.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[d.l0.minHeight(128),d.l0.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),c.touched?(0,a.tZ)(eR,{error:c.error,dataCy:"publish-form-repl-description-error"}):null]})]})},eY=function(e){var t=e.showPlayButton,n=e.children,r=e.active;return(0,a.BX)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,a.tZ)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?d.TV.accentPrimaryDimmest:void 0},children:n}),(0,a.BX)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,a.tZ)("rect",{width:"268",height:"17",fill:d.TV.backgroundDefault}),(0,a.tZ)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:d.TV.accentPositiveDimmer}),(0,a.tZ)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:d.TV.backgroundHighest}),(0,a.tZ)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:d.TV.backgroundHighest}),(0,a.tZ)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?d.TV.accentPrimaryDefault:d.TV.outlineDimmer}),t?(0,a.tZ)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:d.TV.white}):null,(0,a.tZ)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?d.TV.accentPrimaryDefault:d.TV.outlineDimmer,strokeWidth:"1"})]})]})},eq=n(43312),eQ=n(39667),e0=n(36559),e1=s.K.ol,e2=s.K.li,e4=(0,eq.iv)([d.l0.py(4),d.l0.borderRadius(8),{border:"1px solid ".concat(d.TV.outlineDimmest),borderRadius:d.TV.borderRadius8,backgroundColor:em.vb.interactiveBackground,zIndex:d.n0,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:d.TV.space8,listStyle:"none"}]),e3={backgroundColor:em.vb.interactiveBackgroundActive},e8={backgroundColor:d.TV.accentPrimaryDimmer},e5=(0,eq.iv)([d.l0.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,f._)({},e3),":active":(0,f._)({},e8)}}]);function e6(e){var t,n,r,i,l,c,u,p,y,w,Z,_,x,R,C,S,T=e.fs,I=e.initiallySelectedFile,k=e.onFileSelect,U=e.onClear,G=(0,V.useRef)(null),P=(n=(t=(0,v._)((0,V.useState)({isLoading:!0,error:null,files:[]}),2))[0],r=t[1],(0,V.useEffect)(function(){function e(){return(e=(0,h._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,T.listFiles()];case 1:if((e=n.sent()).error)throw Error(e.error);return r({isLoading:!1,error:null,files:(null!==(t=e.files)&&void 0!==t?t:[]).slice().sort(function(e,t){return e.localeCompare(t)}).map(function(e){return{file:e,pathDepth:(0,e0.U$)(e)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return n.sent(),r({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[T]),(0,f._)({},n)),E=P.isLoading,F=P.files,D=P.error,B=(l=(i={files:F,inputRef:G,initiallySelectedFile:I}).files,c=i.inputRef,u=i.initiallySelectedFile,y=(p=(0,v._)((0,V.useState)(!1),2))[0],w=p[1],_=(Z=(0,v._)((0,V.useState)(l),2))[0],x=Z[1],R=(0,V.useCallback)(function(e){return l.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())})},[l]),C=(0,eO.Kb)({items:_,isOpen:y,initialInputValue:u,initialSelectedItem:_.find(function(e){return e===u}),onIsOpenChange:function(e){w(!!e.isOpen)},onInputValueChange:function(e){var t;x(R(null!==(t=e.inputValue)&&void 0!==t?t:""))}}),S=(0,V.useCallback)(function(){var e;w(!1),null===(e=c.current)||void 0===e||e.blur()},[c]),(0,V.useEffect)(function(){var e;x(R(null!==(e=C.inputValue)&&void 0!==e?e:""))},[l,R,C.inputValue]),(0,V.useEffect)(function(){C.selectedItem&&S()},[C.selectedItem,S]),(0,g._)((0,f._)({},C),{closeMenu:S,items:_})),W=(0,b.Z)(k);return(0,V.useEffect)(function(){B.selectedItem&&W.current(B.selectedItem)},[B.selectedItem,W]),(0,a.BX)(s.G,{children:[(0,a.tZ)(s.G,(0,g._)((0,f._)({},B.getComboboxProps({refKey:"innerRef"})),{css:[d.l0.position.relative],children:(0,a.tZ)(eQ.E,(0,g._)((0,f._)({},B.getInputProps({onFocus:B.openMenu,ref:G,refKey:"inputRef",disabled:E,placeholder:"Search your files"})),{onClear:function(){var e;B.reset(),null===(e=G.current)||void 0===e||e.focus(),U()},loading:E}))})),(0,a.BX)(s.G,(0,g._)((0,f._)({},B.getMenuProps({refKey:"innerRef"})),{css:[d.l0.position.relative],children:[D?(0,a.tZ)(s.G,{css:[d.l0.p(8)],children:(0,a.tZ)(o.xv,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!D&&B.isOpen?(0,a.tZ)(e1,{css:[e4],children:B.items.length>0?B.items.map(function(e,t){return(0,a.tZ)(e2,(0,g._)((0,f._)({css:[e5,B.highlightedIndex===t&&e3,e===B.selectedItem&&e8]},B.getItemProps({item:e,index:t,onClick:function(){B.closeMenu()}})),{children:(0,a.tZ)(o.xv,{multiline:!1,children:e})}),e)}):(0,a.tZ)(e2,{css:[d.l0.p(8)],children:(0,a.BX)(o.xv,{multiline:!1,children:['No files found for "',B.inputValue,'"']})})}):null]}))]})}var e7=n(73064),e9=function(e){var t=(0,V.useRef)(null);return{inputProps:{onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var l=i?i[0]:null;l&&e(l)}},"aria-hidden":"true",ref:t,accept:e7.W9.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.click()}},inputRef:t}},te=function(e){var t=e9(e.onFile),n=t.inputProps,r=t.buttonProps;return(0,a.BX)(a.HY,{children:[(0,a.tZ)("input",(0,g._)((0,f._)({},n),{css:{display:"none"}})),e.children(r)]})};n(83003);var tt=n(12933);n(71730),n(85763),n(45271);var tn=n(36084);n(80888),n(55821),n(76171);var tr=n(98308);n(30177);var ti=(0,eq.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function tl(e){var t=e.src,n=e.alt;return(0,a.BX)(s.G,{css:[ti,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,a.tZ)(tt.Z,{objectFit:"cover",layout:"fill",src:t,alt:n}),(0,a.tZ)(s.G,{css:[ti,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}var ta=n(54579),to=[{value:i.ReplImage,text:"Photo"},{value:i.ReplFile,text:"File"}],ts=function(e){var t,n,r,l,c,p,b=e.fs,y=(0,eA.U)(),w=y("coverPage"),Z=el(),_=Z.selectedRepl,x=Z.coverFileField,R=Z.coverUrlField,S=Z.coverDefaultViewField,T=(0,v._)((t=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!(null==e?void 0:e.length)||!(t=e[0]).type.startsWith("image/"))return[2];return[4,U.uploadImage(t,tr.N.ReplCoverImage)];case 1:return n.sent(),[2]}})}),n=function(e){return t.apply(this,arguments)},l=(r=(0,v._)((0,V.useState)(!1),2))[0],c=r[1],p=(0,V.useRef)(0),[l,(0,V.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),p.current++,c(!0)},onDragLeave:function(e){e.preventDefault(),p.current--,0===p.current&&c(!1)},onDrop:function(e){e.preventDefault(),p.current=0,c(!1),e.persist();var t,r,i=Array.from(null!==(r=null==e?void 0:null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&void 0!==r?r:[]);if(0===i.length){n(null);return}n(i)},onDragOver:function(e){e.preventDefault()}}},[n])]),2),I=T[0],k=T[1],U=(0,C.W)(R.setValue);return(0,a.BX)(s.G,(0,g._)((0,f._)({css:[d.l0.colWithGap(16)]},k),{children:[(0,a.BX)(s.G,{css:d.l0.colWithGap(12),children:[(0,a.tZ)(s.G,{css:[d.l0.rowWithGap(8)],children:(0,a.tZ)(ta.E,{tag:"fieldset",css:[d.l0.rowWithGap(24)],name:w,value:S.value,onChange:function(e){Y(e.target.value)&&S.setValue(e.target.value)},children:to.map(function(e){return(0,a.BX)(s.G,{css:[d.l0.rowWithGap(8)],children:[(0,a.tZ)(ta.Y,{id:y(e.value),value:e.value}),(0,a.tZ)("label",{htmlFor:y(e.value),children:e.text})]},e.value)})})}),S.value===i.ReplImage&&(0,a.BX)(s.G,{css:[d.l0.colWithGap(4),d.l0.align.center],children:[(0,a.tZ)(te,{onFile:function(e){return U.uploadImage(e,tr.N.ReplCoverImage)},children:function(e){var t=e.onClick;return(0,a.tZ)(ea.zx,{onClick:t,colorway:I?"primary":void 0,text:"Upload a cover photo",iconLeft:U.isLoading?(0,a.tZ)(u.Z,{}):(0,a.tZ)(tn.Z,{}),stretch:!0})}}),U.error?(0,a.tZ)(eo.E,{colorway:"negative",icon:(0,a.tZ)(eh.Z,{}),text:U.error}):null,(0,a.tZ)(o.xv,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),S.value===i.ReplFile&&(0,a.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,a.tZ)(e6,{fs:b,initiallySelectedFile:x.value,onFileSelect:x.setValue,onClear:function(){return x.setValue("")}},null==_?void 0:_.id),(0,a.tZ)(eR,{error:x.error})]})]}),S.value===i.ReplImage&&(0,a.BX)(eY,{active:I,showPlayButton:S.value===i.ReplImage&&!!R.value&&!U.isLoading,children:[S.value===i.ReplImage&&R.value?(0,a.tZ)(tl,{src:R.value,alt:"cover"}):null,U.isLoading?(0,a.tZ)(s.G,{css:[{position:"absolute",inset:0},d.l0.align.center,d.l0.justify.center],children:(0,a.tZ)(u.Z,{color:d.TV.white,size:24})}):null]})]}))},tc=(n(64318),function(){ei("iconUrl");var e=el(),t=e.replIconInput,n=e.replIconUrl;return(0,a.BX)(s.G,{css:[d.l0.colWithGap(16),d.l0.align.center],children:[(0,a.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,a.BX)(s.G,{css:[d.l0.rowWithGap(8)],children:[(0,a.tZ)(te,{onFile:function(e){return t.uploadImage(e,tr.N.ReplIcon)},css:d.l0.backgroundColor.accentNegativeDefault,children:function(e){var t=e.onClick;return(0,a.tZ)(ea.zx,{onClick:t,text:"Upload image",iconLeft:(0,a.tZ)(tn.Z,{}),css:[d.l0.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),t.error?(0,a.tZ)(s.G,{children:(0,a.tZ)(eo.E,{icon:(0,a.tZ)(eh.Z,{}),colorway:"negative",text:t.error,closable:!0,closeAction:t.clearError})}):null]}),(0,a.tZ)(eU.LN,{alt:"icon",size:84,iconUrl:n,isLoading:!!t.previewUrl,css:[d.l0.backgroundColor.backgroundHigher]})]})}),tu=n(85638),td=n(71089),tp=n(59249),th=function(){var e=ei("isTemplate"),t=(0,eA.U)()("templateCheckbox");return(0,a.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,a.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,a.BX)(s.G,{css:[d.l0.rowWithGap(8)],children:[(0,a.tZ)(td.X,{id:t,checked:e.value,onChange:function(t){return e.setValue(t)}}),(0,a.tZ)("label",{htmlFor:t,children:"Publish as Template"})]}),(0,a.tZ)(eR,{error:e.error})]}),(0,a.tZ)(o.xv,{variant:"small",color:"dimmer",children:"This is a good option for Repls meant as starting points for future work."}),(0,a.tZ)(s.G,{css:[d.l0.align.start],children:(0,a.tZ)(tu.Z,{href:"https://docs.replit.com/programming-ide/how-to-make-a-replit-template",target:"_blank",text:"What makes a good Template?",iconRight:(0,a.tZ)(tp.Z,{}),variant:"outlined",size:"small"})}),(0,a.tZ)(s.G,{css:[d.l0.pt(16)],children:(0,a.BX)(o.xv,{children:["Please make sure your Repl abides by the"," ",(0,a.tZ)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})]})},tf=n(63257),tg=n(42074),tv=n(21063),tm=s.K.ul,tb=s.K.li;function ty(e){var t=e.children;return(0,a.tZ)(s.G,{css:[d.l0.px(8),d.l0.pt(8)],children:(0,a.tZ)(o.xv,{multiline:!1,css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function tw(e){var t=e.highlighted,n=e.tag;return(0,a.tZ)(s.G,{css:[d.l0.rowWithGap(8),d.l0.p(8),t&&{backgroundColor:em.gU.listItem["@media (hover: hover)"][":not([disabled])"][":not(textarea):active"].backgroundColor},{cursor:"pointer"}],children:(0,a.BX)(s.G,{css:[d.l0.flex.growAndShrink(1),d.l0.rowWithGap(4),d.l0.align.center],children:[(0,a.tZ)(o.xv,{multiline:!1,children:n.id}),n.isOfficial?(0,a.tZ)(tv.Z,{}):null]})})}var tZ=V.memo(function(e){var t=e.getItemProps,n=e.highlightedIndex,r=e.data;return(0,a.tZ)(eS.Z,{css:[d.l0.minWidth(200)],children:r.sections.reduce(function(e,r){return e.sections.push((0,a.BX)(tb,{children:[(0,a.tZ)(ty,{children:r.title}),(0,a.tZ)(tm,{css:[d.l0.pt(4),d.l0.pb(8)],children:r.tags.map(function(r){var i=e.itemIndex++;return(0,a.tZ)(tb,(0,g._)((0,f._)({},t({item:r,index:i})),{children:(0,a.tZ)(tw,{tag:r,highlighted:n===i})}),r.id)})})]},r.title)),e},{sections:[],itemIndex:0}).sections})});tZ.displayName="TagsMenu";var t_=n(16691);function tx(){var e=(0,G._)(["\n  fragment TagsComboboxTag on Tag {\n    id\n    isOfficial\n  }\n"]);return tx=function(){return e},e}function tR(){var e=(0,G._)(["\n  query TagsCombobox($limit: Int, $search: String) {\n    tagGroups {\n      official(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n      community(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n    }\n  }\n  ","\n"]);return tR=function(){return e},e}var tC={},tS=(0,P.Ps)(tx()),tT=(0,P.Ps)(tR(),tS),tI=/^[0-9a-zA-Z]+$/,tV=function(e){return e.id},tk=n(29252),tU=s.K.div,tG=s.K.input,tP=(0,eq.iv)([d.l0.fontSize(12),d.l0.pl(24),d.l0.pr(8),d.l0.py(4)]);function tE(){return(0,a.tZ)(o.xv,{multiline:!1,css:[d.l0.px(4),d.l0.flex.row,d.l0.align.center,d.l0.position.absolute,d.l0.height("100%"),d.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,a.tZ)(tk.Z,{size:12})})}function tF(e){var t=e.text,n=e.children;return(0,a.BX)(es.Tg,{elevated:!0,css:[d.l0.position.relative,d.l0.minWidth(30),d.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:d.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,a.tZ)(tE,{}),(0,a.tZ)(o.xv,{css:[{visibility:"hidden"},tP],multiline:!1,children:t}),n]})}function tD(e){var t,n,r,i,l,o,c,u,p,h,m,y,w,Z,_,x,R,C,S,T,I=(t=e.onRemove,n=e.onSelect,r=e.filter,i=e.inputValue,l=e.setInputValue,o=(0,eI.Z)(i,100),c=(0,b.Z)(n),C=(p=(u={search:o,filter:void 0===r?function(){return!0}:r}).search,h=u.filter,y=(m=(0,f._)({},tC,{variables:{limit:p?10:3,search:p}}),E.a(tT,m)).data,Z=(w=(0,v._)((0,V.useState)({official:[],community:[],newTag:[]}),2))[0],_=w[1],x=(0,V.useMemo)(function(){if(y){var e=[],t=[],n=new Set,r=!0,i=!1,l=void 0;try{for(var a,o=y.tagGroups.official[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;n.add(s.id.toLowerCase()),h(s)&&e.push(s)}}catch(e){i=!0,l=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw l}}var c=!0,u=!1,d=void 0;try{for(var f,g=y.tagGroups.community[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;n.add(v.id.toLowerCase()),h(v)&&t.push(v)}}catch(e){u=!0,d=e}finally{try{c||null==g.return||g.return()}finally{if(u)throw d}}var m=t.find(function(e){return e.id===p}),b=!p||m||n.has(p.toLowerCase())?void 0:{id:p,isOfficial:!1};return{official:e,community:t,newTag:b&&h(b)?[b]:[]}}},[y,h,p]),(0,V.useEffect)(function(){if(x){var e=x.official,t=x.community,n=x.newTag;_(function(r){return{official:(0,eV.Z)(e,{existing:r.official,getKey:tV}),community:(0,eV.Z)(t,{existing:r.community,getKey:tV}),newTag:n}})}},[x]),R={tagGroups:Z,reset:function(){_({official:[],community:[],newTag:[]})}}).tagGroups,S=R.reset,T=(0,eO.Kb)({inputValue:i,items:(0,tf._)(C.official).concat((0,tf._)(C.community),(0,tf._)(C.newTag)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(S(),l(""),T.reset(),T.openMenu())}}),(0,t_.Z)(function(){T.selectedItem&&c.current(T.selectedItem)},[T.selectedItem]),{tagGroups:C,combobox:T,onChange:function(e){var t=e.currentTarget.value;(!t||tI.test(t))&&!(t.length>30)&&l(t)},onKeyDown:function(e){""===i&&"Backspace"===e.key&&(e.preventDefault(),t())}}),k=I.combobox,U=I.tagGroups,G=I.onChange,P=I.onKeyDown,F=(0,V.useMemo)(function(){var e;return e=[],(U.official.length&&e.push({title:"Official Tags",tags:U.official}),U.community.length&&e.push({title:"Community Tags",tags:U.community}),U.newTag.length&&e.push({title:"Create new tag",tags:U.newTag}),0===e.length)?null:{type:"sections",sections:e}},[U]),D="Add tag";return(0,a.BX)(s.G,{children:[(0,a.tZ)(tU,(0,g._)((0,f._)({},k.getComboboxProps()),{css:[d.l0.flex.row],children:(0,a.tZ)(tF,{text:k.inputValue||D,children:(0,a.tZ)(tG,(0,f._)({css:[d.l0.coverContainer,tP,d.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":d.l0.color.foregroundDefault,"&:focus::placeholder":d.l0.color.foregroundDimmest}]},k.getInputProps({placeholder:D,onChange:G,onKeyDown:P,onFocus:function(){k.openMenu()}})))})})),(0,a.tZ)(tU,(0,g._)((0,f._)({},k.getMenuProps()),{css:[d.l0.position.relative],children:F&&k.isOpen?(0,a.tZ)(tZ,{getItemProps:k.getItemProps,highlightedIndex:k.highlightedIndex,data:F}):null}))]})}function tB(e){var t=e.tags,n=e.max,r=e.onAdd,i=e.onRemove,l=t.map(function(e){return e.id}),o=(0,v._)((0,V.useState)(""),2),c=o[0],u=o[1];return(0,a.BX)(s.G,{css:[d.l0.flex.row,d.l0.flex.wrap,{margin:"calc(-1 * ".concat(d.TV.space4,")")}],children:[t.map(function(e,t){return(0,a.tZ)(s.G,{css:[d.l0.m(4)],children:(0,a.tZ)(tg.g,{small:!0,tag:e,onClick:function(){return i(t)}})},e.id)}),t.length<(void 0===n?5:n)?(0,a.tZ)(s.G,{css:[d.l0.m(4)],children:(0,a.tZ)(tD,{onSelect:r,filter:function(e){return!l.includes(e.id.toLowerCase())},inputValue:c,setInputValue:u,onRemove:function(){var e=t.length-1;e>=0&&(u(t[e].id),i(e))}})}):null]})}var tW=function(){var e=ei("tags");return(0,a.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,a.tZ)(s.G,{css:[d.l0.colWithGap(4)],children:(0,a.tZ)(tB,{max:5,tags:e.value,onAdd:function(t){return e.setValue((0,tf._)(e.value).concat([t]))},onRemove:function(t){return e.setValue((0,tf._)(e.value.slice(0,t)).concat((0,tf._)(e.value.slice(t+1))))}})}),(0,a.BX)(s.G,{css:d.l0.rowWithGap(4),children:[(0,a.tZ)(o.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Adding tags helps others find your Repl."}),(0,a.BX)(o.xv,{color:"dimmest",variant:"small",multiline:!1,children:[e.value.length,"/",5]})]})]})},tX=n(2993),tN=n(45098),tL=n(19393),tz=n(39126),tj=n(46180),tM=n(1813),tA=n(36632),tO=s.K.form,tK=function(e){var t=e.user,n=el(),r=n.selectedRepl,i=n.replTitleField,c=n.replDescriptionField,p=n.replIconUrl,h=n.tagsField,v=n.isTemplateField;return(0,a.BX)(es.Tg,{background:"root",css:[(0,l._)({},(0,ef.et)("tabletMin"),{display:"flex"}),d.l0.flex.growAndShrink(1),d.l0.p(16),d.l0.colWithGap(12),d.l0.align.center,d.l0.display.none],children:[(0,a.tZ)(o.xv,{multiline:!1,variant:"small",color:"dimmer",css:[d.l0.width("100%"),{fontWeight:d.TV.fontWeightMedium}],children:"Preview"}),(0,a.BX)(s.G,{css:[d.l0.width("100%"),d.l0.maxWidth(432),d.l0.position.relative],children:[(0,a.tZ)(s.G,{css:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+d.TV.backgroundRoot+", inset 0 -48px 24px -24px "+d.TV.backgroundRoot}}),(0,a.BX)(s.G,{css:[d.l0.height(416),d.l0.colWithGap(24),d.l0.justify.center,d.l0.overflow("hidden"),d.l0.backgroundColor.backgroundRoot],children:[(0,a.tZ)(e_.O,{}),r&&p?(0,a.tZ)(e_.Z,{post:{user:t,repl:(0,g._)((0,f._)({},r),{title:i.value,iconUrl:p,tags:h.value,description:c.value,isTemplate:v.value})}}):(0,a.tZ)(s.G,{css:[d.l0.flex.grow(1),d.l0.align.center,d.l0.justify.center],children:(0,a.tZ)(u.Z,{})}),(0,a.tZ)(e_.O,{})]})]})]})},tH=["Basics","Tags","Icon","Cover page","Publishing"];function tJ(e){var t,n,r,c,p,g,w,Z,_,x,S,G,P,F,X,j,K,ei,el,em,eb,ey,e_,eR=e.replId,eC=e.currentUser,eS=e.source,eT=function(e){var t,n,r,i,l,a,o,s,c=(0,R.Y)(e.replId||null,function(e){return e?null:{message:"Select a Repl to share"}}),u=(t={variables:{id:c.value||""},skip:!c.value},n=(0,f._)({},D,t),E.a(B,n)),d=(null===(r=u.data)||void 0===r?void 0:r.repl.__typename)==="Repl"?u.data.repl:null,p=!!(null==d?void 0:d.publishedAs),g=(0,R.Y)("",et),w=(0,R.Y)("",en),Z=(0,R.Y)(null,function(){return null}),_=(0,R.Y)("repl_image",function(){return null}),x=(0,R.Y)(null,function(){return null}),S=(0,R.Y)("",e.fileValidator),G=(0,R.Y)([],function(){return null}),P=(0,b.Z)(d),F=(0,R.Y)(!1,function(e){var t=P.current;return e&&(null==t?void 0:t.lastPublishedAt)?{message:"This Repl has already been published. Please unpublish before publishing as a Template."}:e||(null==t?void 0:t.publishedAs)!==I.O2.Template?void 0:{message:"This Repl has already been published as a Template. Please unpublish before publishing as a Repl."}}),X=function(){var e,t=(0,v._)((e=(0,f._)({},M,void 0),W.D(A,e)),2),n=t[0],r=t[1];function i(){return(i=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:O(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:O(r),setReplViewSettings:function(e){return i.apply(this,arguments)}}}(),j=function(){var e,t=(0,v._)((e=(0,f._)({},N,void 0),W.D(L,e)),2),n=t[0],r=t[1];function i(){return(i=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:z(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Repl Tags"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:z(r),setReplTags:function(e){return i.apply(this,arguments)}}}(),K=function(){var e,t=(0,v._)((e=(0,f._)({},H,void 0),W.D(J,e)),2),n=t[0],r=t[1];function i(){return(i=(0,h._)(function(e){return(0,m.Jh)(this,function(t){switch(t.label){case 0:if(r.loading)return[2,{data:null,error:null}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:t.sent().data,error:null}];case 3:return[2,{data:null,error:$(t.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:r.error&&$(r.error),updateRepl:function(e){return i.apply(this,arguments)}}}(),er=(0,U.O)(),ei=(0,k.r)(),el=(null==d?void 0:null===(i=d.replViewSettings)||void 0===i?void 0:i.defaultView)&&Y(d.replViewSettings.defaultView)?d.replViewSettings.defaultView:"repl_image",ea=(0,b.Z)(g.setValue),eo=(0,b.Z)(w.setValue),es=(0,b.Z)(G.setValue),ec=(0,b.Z)(Z.setValue),eu=(0,b.Z)(x.setValue),ed=(0,b.Z)(_.setValue),ep=(0,b.Z)(S.setValue),eh=(0,b.Z)(F.setValue);(0,V.useEffect)(function(){var e,t,n,r;d&&(eh.current("Template"===d.publishedAs),ed.current(el),ep.current(null!==(t=null===(e=d.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==t?t:""),ea.current(d.isRenamed?d.title:"",{preventTouch:!0}),eo.current(null!==(n=d.description)&&void 0!==n?n:"",{preventTouch:!0}),es.current(d.tags),ec.current(d.iconUrl.endsWith(".svg")?null:d.iconUrl),eu.current(null!==(r=d.imageUrl)&&void 0!==r?r:null))},[d,eu,ec,es,ea,eo,el,ed,ep,eh]);var ef=(0,C.W)(Z.setValue),eg=ef.previewUrl||Z.value||(null==d?void 0:d.iconUrl)||(null==d?void 0:d.templateInfo.iconUrl),ev=null!==(s=null===(o=[c,g,w,Z,_,x,G,S,F].filter(function(e){return(e!==S||"repl_file"===_.value)&&e.error}))||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:null===(l=a.error)||void 0===l?void 0:l.message)&&void 0!==s?s:null;function em(){return(em=(0,h._)(function(){var e,t,n,r,i,l,a,o,s,c,u;return(0,m.Jh)(this,function(p){switch(p.label){case 0:if(!d)throw new q("Missing repl");if(t=d.title!==g.value,n=d.description!==w.value,r=d.iconUrl!==Z.value,i="repl_image"===_.value&&d.imageUrl!==x.value,l=S.value&&"repl_file"===_.value&&(null===(e=d.replViewSettings)||void 0===e?void 0:e.replFile)!==S.value,a=_.value&&el!==_.value,o=!T()(d.tags,G.value),!(t||n||r))return[3,2];if(g.error||w.error||Z.error)throw new q;return[4,K.updateRepl({id:d.id,title:t?g.value:void 0,description:n?w.value:void 0,iconUrl:r?Z.value:void 0})];case 1:if((s=p.sent()).error)throw new Q(s.error);p.label=2;case 2:if(!(a||i||l))return[3,4];if("repl_image"===_.value&&x.error||"repl_file"===_.value&&S.error)throw new q;return[4,X.setReplViewSettings({replId:d.id,defaultView:"repl_image"===_.value?I.bV.ReplImage:I.bV.ReplFile,replImage:i?x.value:void 0,replFile:l?S.value:void 0})];case 3:if((c=p.sent()).error)throw new Q(c.error);p.label=4;case 4:if(!o)return[3,6];if(G.error)throw new q;return[4,j.setReplTags({replId:d.id,tags:G.value.map(function(e){return e.id})})];case 5:if((u=p.sent()).error)throw new Q(u.error);p.label=6;case 6:return[2]}})})).apply(this,arguments)}function eb(){return(eb=(0,h._)(function(){var t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:if(!d)throw new q("Missing repl");if(ev)throw new q(null!=ev?ev:"Something went wrong");if(!F.value)return[3,2];return[4,ei.createDeployment({input:{replId:d.id,description:w.value,iconUrl:eg||d.iconUrl}})];case 1:if((t=r.sent()).error)throw new ee(t.error);return(0,y.j)(y.U3.POST_MADE,{source:e.source,replType:"template_repl",title:g.value,description:w.value,tags:G.value.map(function(e){return e.id}),defaultView:_.value}),[2];case 2:return[4,er.publish({input:{replId:d.id}})];case 3:if((n=r.sent()).error)throw new ee(n.error);return(0,y.j)(y.U3.POST_MADE,{source:e.source,replType:"regular_repl",title:g.value,description:w.value,tags:G.value.map(function(e){return e.id}),defaultView:_.value}),[2]}})})).apply(this,arguments)}var ey=K.loading||X.loading||j.loading,ew=K.error||X.error||j.error,eZ=er.loading||ei.loading,e_=er.error||ei.error;return{selectedRepl:d,isReplLoading:u.loading,replLoadingError:u.error,replIdField:c,replTitleField:g,replDescriptionField:w,iconUrlField:Z,coverDefaultViewField:_,coverUrlField:x,coverFileField:S,tagsField:G,isTemplateField:F,replIconInput:ef,replIconUrl:eg,inputError:ev,save:function(){return em.apply(this,arguments)},isSaving:ey,savingError:ew,publish:function(){return eb.apply(this,arguments)},isPublishing:eZ,publishingError:e_,isPublished:p}}({replId:eR,fileValidator:(t=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!eH)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eH.stat(e)];case 2:if(!(t=n.sent()).exists||t.type!==ev.Tv.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return n.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),source:eS}),eI=eT.selectedRepl,eV=eT.isReplLoading,ek=eT.replLoadingError,eU=eT.replIdField,eG=eT.replTitleField,eP=eT.replDescriptionField,eE=eT.iconUrlField,eF=eT.tagsField,eD=eT.coverDefaultViewField,eB=eT.coverUrlField,eW=eT.coverFileField,eX=eT.isTemplateField,eN=eT.save,eL=eT.isSaving,ez=eT.savingError,ej=eT.publish,eM=eT.isPublishing,eA=eT.publishingError,eO=eT.isPublished,eK=(r=(n={repl:eI,currentUser:eC}).repl,c=n.currentUser,g=(p=(0,v._)((0,tM.qg)(),2))[0],w=p[1],Z=(0,tM.ic)(),x=(_=(0,v._)((0,V.useState)(function(){var e,t,n;return e=(0,tX.ZP)({onUnrecoverableError:(0,tj.Z)({throwBsod:w,origin:"Publish: services/onUnrecoverableError"})}),t=(0,tz.Z)({container:e}),n=(0,tA.Z)({container:e,fs:t}),{container:e,fs:t,dotReplit:n}}),1)[0]).container,S=_.fs,G=_.dotReplit,F=(P=(0,v._)((0,V.useState)(function(){return x.getConnectionState()===tX.em.CONNECTED}),2))[0],X=P[1],j=(0,tN.b)(r?{repl:r,currentUser:c}:null),K=(0,tL.S)(),(0,V.useEffect)(function(){if(r&&j&&x.getConnectionState()===tX.em.DISCONNECTED)return x.connect({context:j,getMinimumRetryDelayMs:K}),function(){return x.close()}},[r,x,j]),(0,V.useEffect)(function(){return x.onConnectionStateChanged(function(e){X(e===tX.em.CONNECTED)})},[x]),{isConnected:F,container:x,fs:S,dotReplit:G,bsodId:null==g?void 0:g.eventId,devClearBsod:function(){return Z()}}),eH=eK.fs,eJ=eK.dotReplit,eY=eK.bsodId,eq=(0,v._)((0,V.useState)(0),2),eQ=eq[0],e0=eq[1],e1=tH[eQ],e2=eQ===tH.length-1,e4=(0,v._)((0,V.useState)({show:!1,isUpdate:!1}),2),e3=e4[0],e8=e4[1],e5=(0,v._)((0,V.useState)(function(){return Array(tH.length).fill(!1)}),2),e6=e5[0],e7=e5[1],e9=(0,V.useCallback)(function(e,t){e6[e]=t,e7(e6)},[e6]);(0,V.useEffect)(function(){eT.replTitleField.value&&eT.replDescriptionField.value?e9(0,!0):e9(0,!1),eT.tagsField.value.length>0?e9(1,!0):e9(1,!1),eT.iconUrlField.value?e9(2,!0):e9(2,!1),eT.coverDefaultViewField.value===i.ReplImage&&eT.coverUrlField.value||eT.coverDefaultViewField.value===i.ReplFile&&eT.coverFileField.value?e9(3,!0):e9(3,!1)},[e6,eT,e9]);var te=(el=(ei=(0,v._)((0,V.useState)({isLoading:!0,error:null,entryPoint:null}),2))[0],em=ei[1],(0,V.useEffect)(function(){function e(){return(e=(0,h._)(function(){var e,t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,eJ.getConfig()];case 1:if((t=r.sent()).error)throw Error(t.errorMessage);return em({isLoading:!1,error:null,entryPoint:null!==(n=null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.entrypoint)&&void 0!==n?n:null}),[3,3];case 2:return r.sent(),em({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[eJ]),(0,f._)({},el));(0,V.useEffect)(function(){te.isLoading||!te.entryPoint||eW.value||eW.setValue(te.entryPoint)},[te.isLoading,te.entryPoint,eW]);var tt=(0,v._)((0,V.useState)(!1),2),tn=tt[0],tr=tt[1];(0,V.useEffect)(function(){tn||eR&&(eV||eO)||(tr(!0),(0,y.j)(y.U3.PUBLISH_SELECTED,{source:eS}))},[tn,eS,eR,eV,eO]);var ti=(0,b.Z)(!!((null==eI?void 0:eI.publishedAs)||(null==eI?void 0:eI.lastPublishedAt))),tl=(0,b.Z)(e1);if((0,V.useEffect)(function(){return function(){ti.current||(0,y.j)(y.U3.PUBLISH_FLOW_EXITED,{source:eS,lastSectionVisited:tl.current})}},[eS,ti,tl]),eY)return(0,a.tZ)(eg.Z,{});if(e3.show&&eI)return(0,a.tZ)(ex.q,{repl:eI,isUpdate:e3.isUpdate});var ta={Basics:{hasError:!!(eU.error||eG.error||eP.error),isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.all([eU.validate(),eG.validate(),eP.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Tags:{hasError:!!eF.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eF.validate()];case 1:return[2,!e.sent()]}})})},Icon:{hasError:!!eE.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eE.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(eD.value===i.ReplImage?eB.error:eW.error),isValid:(0,h._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:if(eD.value!==i.ReplImage)return[3,2];return[4,eB.validate()];case 1:return e=!t.sent(),[3,4];case 2:return[4,eW.validate()];case 3:e=!t.sent(),t.label=4;case 4:return[2,e]}})})},Publishing:{hasError:!!eX.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eX.validate()];case 1:return[2,!e.sent()]}})})}},to=ta[e1].hasError,tu=ta[e1].isValid,td=null!==(e_=tH.find(function(e){return ta[e].hasError}))&&void 0!==e_?e_:null,tp=null;eI?ek||ez||eA?tp="Something went wrong - please try again":to&&(tp="Please fill out the the form"):tp="Please select a Repl";var tf=!!(!eI||to||ek||eV||eL||eM),tg=!!eX.value,tv=(eb=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(t=tf)return[3,2];return[4,tu()];case 1:t=!n.sent(),n.label=2;case 2:if(t)return[2];n.label=3;case 3:return n.trys.push([3,5,,6]),e0(e),[4,eN()];case 4:return n.sent(),[3,6];case 5:return n.sent(),[2];case 6:return[2]}})}),function(e){return eb.apply(this,arguments)}),tm=eQ>0;return(0,a.tZ)(er.Provider,{value:eT,children:(0,a.BX)(es.Tg,{css:[d.l0.borderRadius(8),d.l0.flex.row,d.l0.overflow("hidden"),(0,l._)({},(0,ef.et)("tabletMax"),{minWidth:850})],background:"default",dataCy:"publish-form-container",children:[(0,a.BX)(s.G,{css:[d.l0.colWithGap(12),d.l0.p(16),d.l0.minWidth(320),d.l0.flex.growAndShrink(1),(0,l._)({},(0,ef.et)("tabletMin"),{maxWidth:320})],children:[(0,a.tZ)(o.xv,{variant:"subheadBig",multiline:!1,children:eO?"Edit Publish Settings":"Publish ".concat(eR?"this":"a"," Repl")}),(0,a.BX)(tO,{onSubmit:(ey=(0,h._)(function(e){var t,n,r,i,l,a;return(0,m.Jh)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),!e2)return[3,13];t=!0,n=!1,r=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),i=tH[Symbol.iterator](),o.label=2;case 2:if(t=(l=i.next()).done)return[3,5];return[4,ta[l.value].isValid()];case 3:if(!o.sent())return[2];o.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return a=o.sent(),n=!0,r=a,[3,8];case 7:try{t||null==i.return||i.return()}finally{if(n)throw r}return[7];case 8:if(eO)return[3,10];return[4,ej()];case 9:return o.sent(),e8({show:!0,isUpdate:!1}),[3,12];case 10:return[4,eN()];case 11:o.sent(),e8({show:!0,isUpdate:!0}),o.label=12;case 12:return[3,14];case 13:tv(eQ+1),o.label=14;case 14:return[2]}})}),function(e){return ey.apply(this,arguments)}),css:[d.l0.colWithGap(16),d.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(s.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:tH.map(function(e,t){return(0,a.BX)(V.Fragment,{children:[0!==t&&(0,a.tZ)(ew,{}),(0,a.tZ)(eZ,{isActive:eQ===t,isComplete:e6[t],onClick:function(){return tv(t)},disabled:tf,children:e})]},e)})}),(0,a.BX)(s.G,{css:d.l0.flex.growAndShrink(1),children:["Basics"===e1&&(0,a.tZ)(e$,{}),"Tags"===e1&&(0,a.tZ)(tW,{}),"Icon"===e1&&(0,a.tZ)(tc,{}),"Cover page"===e1&&(0,a.tZ)(ts,{fs:eH}),"Publishing"===e1&&(0,a.tZ)(th,{})]}),(0,a.BX)(s.G,{children:[e2&&td&&td!==e1?(0,a.tZ)(eo.E,{colorway:"negative",icon:(0,a.tZ)(eh.Z,{}),text:"Please fix error in ".concat(td," section")}):null,ez?(0,a.tZ)(eo.E,{colorway:"negative",icon:(0,a.tZ)(eh.Z,{}),text:ez}):null,eA?(0,a.tZ)(eo.E,{colorway:"negative",icon:(0,a.tZ)(eh.Z,{}),text:eA}):null]}),(0,a.BX)(s.G,{css:[d.l0.rowWithGap(8),d.l0.align.center,tm?d.l0.justify.spaceBetween:d.l0.justify.end],children:[tm?(0,a.tZ)(ea.zx,{type:"button",iconLeft:(0,a.tZ)(eu.Z,{}),disabled:tf,onClick:function(){return tv(eQ-1)},text:"Back"}):null,eL?(0,a.tZ)(s.G,{css:[d.l0.rowWithGap(4),d.l0.color.foregroundDimmer],children:(0,a.tZ)(u.Z,{})}):null,(0,a.BX)(ec.u,{tooltip:tp,placement:"bottom",isDisabled:!tp,children:[!e2&&(0,a.tZ)(ea.zx,{type:"submit",colorway:"primary",iconLeft:(0,a.tZ)(ed.Z,{}),disabled:tf,text:"Next",dataCy:"publish-form-next-button"}),e2&&!eO?(0,a.tZ)(ea.zx,{type:"submit",colorway:"primary",css:[{boxShadow:"0px 0px 16px 0px ".concat(d.TV.accentPrimaryDimmer," !important")}],iconLeft:(0,a.tZ)(ep.Z,{}),disabled:!!(tf||td),text:eM?tg?"Submitting...":"Publishing...":tg?"Submit Template":"Publish to Community",dataCy:"publish-form-publish-button"}):null,e2&&eO?(0,a.tZ)(ea.zx,{type:"submit",colorway:"primary",iconLeft:(0,a.tZ)(ep.Z,{}),disabled:!!(tf||td),text:eL?"Saving...":"Save"}):null]})]})]})]}),(0,a.tZ)(tK,{user:eC})]})})}function t$(e){var t,n,r=e.replId,i=e.source,h=(0,p.NH)(),f=(null===(n=h.data)||void 0===n?void 0:null===(t=n.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?h.data.currentUser:null;return h.loading?(0,a.tZ)(s.G,{css:[d.l0.center,d.l0.p(32),d.l0.width(512),(0,l._)({},"@media (max-width: ".concat(c.j.tabletMin,"px)"),[{width:"100%"}])],children:(0,a.tZ)(u.Z,{})}):h.error||!f?(0,a.tZ)(s.G,{css:[d.l0.center,d.l0.p(32)],children:(0,a.tZ)(o.xv,{multiline:!1,children:"Something went wrong, please try again."})}):(0,a.tZ)(tJ,{source:i,replId:r,currentUser:f})}},28800:function(e,t,n){n.d(t,{q:function(){return Z}});var r=n(42516),i=n(41733),l=n(30509),a=n(74985),o=n(61967),s=n(34186),c=n(85638),u=n(64479),d=n(82230),p=n(94778),h=n(60772),f=n(1383),g=n(76677),v=n(72093),m=n(85438),b=n(47336),y=n.n(b),w=n(12202),Z=function(e){var t=e.repl,n=e.isUpdate,b=(0,o.j3)(t),Z=t.url?(0,o.QB)(t):"",_=t.publishedAs===m.O2.Template,x=(0,s.Z)({text:"Check out what I just published on Replit: ".concat(t.title),url:Z});return(0,a.BX)(u.Tg,{background:"default",css:[v.l0.borderRadius(8),v.l0.overflow("hidden"),v.l0.colWithGap(16),v.l0.width(510),v.l0.p(16),v.l0.flex.growAndShrink(1),(0,r._)({},"@media (max-width: ".concat(h.j.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,a.BX)(p.G,{css:[v.l0.colWithGap(16)],children:[(0,a.BX)(d.xv,{variant:"subheadBig",multiline:!1,children:[_?"Template":"Repl"," ",n?"updated":"published","!"]})," ",(0,a.BX)(p.G,{css:[v.l0.colWithGap(4)],children:[(0,a.tZ)(d.xv,{variant:"small",css:[v.l0.color.foregroundDimmer],multiline:!1,children:"Cover page link"}),(0,a.BX)(p.G,{css:[v.l0.rowWithGap(4),v.l0.align.center],children:[(0,a.tZ)(y(),(0,l._)((0,i._)({legacyBehavior:!0},b),{css:[v.l0.flex.growAndShrink(1)],children:(0,a.tZ)("a",{css:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:Z})})),(0,a.tZ)(w.m,{tooltipDelay:"none",tooltipText:"Copy link",textToCopy:Z})]})]})]}),(0,a.BX)(p.G,{css:[v.l0.rowWithGap(12),v.l0.justify.end,(0,r._)({alignItems:"flex-end"},v.BC.max("mobileMax"),[v.l0.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],children:[(0,a.tZ)(c.Z,{prefetch:!1,href:x,iconLeft:(0,a.tZ)(g.Z,{}),text:"Share to Twitter",target:"_blank",css:[(0,r._)({},v.BC.max("mobileMax"),[v.l0.mr(0)])]}),(0,a.tZ)(c.Z,{iconRight:(0,a.tZ)(f.Z,{}),text:_?"Go to Templates":"Go to Community",href:_?{pathname:"/templates/templates"}:{pathname:"/postsFeed",query:{order:"new"}},as:_?"/templates":"/community/all"})]})]})}},47048:function(e,t,n){n.d(t,{r:function(){return b}});var r=n(27387),i=n(66626),l=n(96583),a=n(41733),o=n(21262),s=n(71440),c=n(60100),u=n(99165);function d(){var e=(0,o._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,o._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var h={},f=(0,s.Ps)(d(),c.FW),g=(0,s.Ps)(p(),c.FW),v="Something went wrong publishing your Template";function m(e){if(e.error)return e.error.message||v;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return v}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return v}}}function b(){var e,t,n,o,s=(0,i._)((e=(0,a._)({},h,void 0),u.D(f,e)),2),c=s[0],d=s[1],p=(0,i._)((t=(0,a._)({},h,void 0),u.D(g,t)),2),b=p[0],y=p[1];return{createRelease:(n=(0,r._)(function(e){var t,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,d.loading||y.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,b({refetchQueries:["ReplEnvironmentHeader"],variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:m(n)}];case 3:return r.sent(),[2,{data:null,error:v}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),createDeployment:(o=(0,r._)(function(e){var t,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,d.loading||y.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c({variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:m(n)}];case 3:return r.sent(),[2,{data:null,error:v}];case 4:return[2]}})}),function(e){return o.apply(this,arguments)}),data:d.data||y.data,loading:d.loading||y.loading,error:m(d||y)}}},92031:function(e,t,n){n.d(t,{W:function(){return m},Z:function(){return b}});var r=n(41733),i=n(30509),l=n(66626),a=n(74985),o=n(71730),s=n(73064),c=n(72333),u=n(64479),d=n(94778),p=n(76575),h=n(29318),f=n(76171),g=n(72093),v=n(50959);function m(e){var t=(0,l._)((0,v.useState)(null),2),n=t[0],a=t[1],s=(0,l._)((0,v.useState)(null),2),c=s[0],u=s[1],d=(0,o.Z)({onUpload:function(t){var n=t.url;a(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;u(null),a(t)},onError:function(e){a(null),u(e.message)}}),p=(0,v.useCallback)(function(){return u(null)},[]);return(0,i._)((0,r._)({},d),{error:c,clearError:p,previewUrl:n})}function b(e){var t=(0,v.useRef)(null),n=e.size||48;return(0,a.BX)(d.G,{css:[g.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,a.BX)(a.HY,{children:[(0,a.tZ)(c.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,a.tZ)(u.Tg,{className:"surface",elevated:!0,css:[g.l0.borderRadius(8),g.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,a.tZ)(d.G,{className:"icon",css:[g.l0.coverContainer,g.l0.center,g.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,a.tZ)(h.Z,{}):(0,a.tZ)(p.Z,{})})]}):(0,a.tZ)(d.G,{css:[g.l0.center,g.l0.width(n),g.l0.height(n),g.l0.borderRadius(8),g.l0.color.foregroundDimmer,{border:"1px dashed "+g.TV.outlineDefault,"&:hover":{color:g.TV.accentPrimaryDefault,borderColor:g.TV.accentPrimaryDefault}}],children:(0,a.tZ)(f.Z,{})}),(0,a.tZ)("input",{css:[[g.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:t,accept:s.W9.join(","),type:"file",onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var l=i?i[0]:null;l&&e.onUpload(l)}}})]})}},85447:function(e,t,n){var r=n(42516),i=n(41733),l=n(30509),a=n(98924),o=n(74985),s=n(28266),c=n.n(s),u=n(97754),d=n.n(u),p=n(72602);n(50959),t.Z=function(e){var t,n=e.level,s=e.fontFamily,u=void 0===s?"sans-serif":s,h=e.fontWeight,f=void 0===h?"medium":h,g=e.foreground,v=void 0===g?1:g,m=e.align,b=void 0===m?"left":m,y=e.truncate,w=e.className,Z=void 0===w?"":w,_=e.children,x=(0,a._)(e,["level","fontFamily","fontWeight","foreground","align","truncate","className","children"]);return(0,o.BX)("h".concat(n),(0,l._)((0,i._)({},x),{className:c().dynamic([["e5be6eb40aa527b5",[p.Z.levels[n],p.Z.fontFamily[u],p.Z.fontWeight[f],p.Z.foreground[v],b]]])+" "+(d()("heading",(t={},(0,r._)(t,Z,!!Z),(0,r._)(t,"truncate",void 0!==y&&y),t))||""),children:[_,(0,o.tZ)(c(),{id:"e5be6eb40aa527b5",dynamic:[p.Z.levels[n],p.Z.fontFamily[u],p.Z.fontWeight[f],p.Z.foreground[v],b],children:".heading.__jsx-style-dynamic-selector{font-size:".concat(p.Z.levels[n],";font-family:").concat(p.Z.fontFamily[u],";font-weight:").concat(p.Z.fontWeight[f],";color:").concat(p.Z.foreground[v],";text-align:").concat(b,"}.truncate.__jsx-style-dynamic-selector{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:100%}")})]}))}},96372:function(e,t,n){n.d(t,{b:function(){return o}});var r=n(74985),i=n(28266),l=n.n(i),a=n(72602),o=function(e){return"number"==typeof e&&e>0&&e in a.Z.spacing?a.Z.spacing[e]:e};t.Z=function(e){var t=e.size,n=e.width,i=void 0===n?1:n,a=e.height,s=void 0===a?1:a,c=t&&o(t);return(0,r.tZ)("div",{className:l().dynamic([["a1e4519405658715",[c||o(i),c||o(s)]]]),children:(0,r.tZ)(l(),{id:"a1e4519405658715",dynamic:[c||o(i),c||o(s)],children:"div.__jsx-style-dynamic-selector{width:".concat(c||o(i),";height:").concat(c||o(s),";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}")})})}},24857:function(e,t,n){n.d(t,{Ug:function(){return f},gC:function(){return g}});var r=n(41733),i=n(30509),l=n(98924),a=n(74985),o=n(28266),s=n.n(o);n(50959);var c=n(97754),u=n.n(c),d=n(96372),p=function(e){return"start"===e||"end"===e?"flex-".concat(e):e},h=function(e){var t=e.dir,n=void 0===t?"row":t,o=e.spacing,c=void 0===o?0:o,h=e.align,f=void 0===h?"start":h,g=e.justify,v=void 0===g?"start":g,m=e.isInline,b=void 0!==m&&m,y=e.isReversed,w=void 0!==y&&y,Z=e.wrap,_=void 0===Z?"wrap":Z,x=e.constrainWidth,R=e.tag,C=void 0===R?"div":R,S=e.className,T=e.children,I=(0,l._)(e,["dir","spacing","align","justify","isInline","isReversed","wrap","constrainWidth","tag","className","children"]),V=w?"".concat(n,"-reverse"):n,k="row"===n;return(0,a.BX)(C,(0,i._)((0,r._)({},I),{className:s().dynamic([["da9a798c9b4d5e1c",[C,b?"inline-flex":"flex",V,p(f),p(v),_,w?"left":"right",(0,d.b)(c),w?"left":"right",w?"top":"bottom",(0,d.b)(c),w?"top":"bottom"]]])+" "+(I&&null!=I.className&&I.className||u()(S,{"h-stack":k,"v-stack":!k,"constrain-width":void 0!==x&&x})||""),children:[T,(0,a.tZ)(s(),{id:"da9a798c9b4d5e1c",dynamic:[C,b?"inline-flex":"flex",V,p(f),p(v),_,w?"left":"right",(0,d.b)(c),w?"left":"right",w?"top":"bottom",(0,d.b)(c),w?"top":"bottom"],children:"".concat(C,".__jsx-style-dynamic-selector{display:").concat(b?"inline-flex":"flex",";-webkit-flex-direction:").concat(V,";-ms-flex-direction:").concat(V,";flex-direction:").concat(V,";-webkit-box-align:").concat(p(f),";-webkit-align-items:").concat(p(f),";-moz-box-align:").concat(p(f),";-ms-flex-align:").concat(p(f),";align-items:").concat(p(f),";-webkit-box-pack:").concat(p(v),";-webkit-justify-content:").concat(p(v),";-moz-box-pack:").concat(p(v),";-ms-flex-pack:").concat(p(v),";justify-content:").concat(p(v),";-webkit-flex-wrap:").concat(_,";-ms-flex-wrap:").concat(_,";flex-wrap:").concat(_,"}.h-stack.__jsx-style-dynamic-selector>*{margin-").concat(w?"left":"right",":").concat((0,d.b)(c),"}.h-stack.__jsx-style-dynamic-selector>*:last-child{margin-").concat(w?"left":"right",":0}.v-stack.__jsx-style-dynamic-selector>*{margin-").concat(w?"top":"bottom",":").concat((0,d.b)(c),"}.v-stack.__jsx-style-dynamic-selector>*:last-child{margin-").concat(w?"top":"bottom",":0}.constrain-width.__jsx-style-dynamic-selector{max-width:100%}")})]}))},f=function(e){return(0,a.tZ)(h,(0,i._)((0,r._)({},e),{dir:"row"}))},g=function(e){return(0,a.tZ)(h,(0,i._)((0,r._)({},e),{dir:"column"}))}},38414:function(e,t,n){n.d(t,{Z:function(){return U}});var r=n(27387),i=n(66626),l=n(78950),a=n(63257),o=n(96583),s=n(74985),c=n(28266),u=n.n(c),d=n(94311),p=n(45271),h=n(72093),f=n(30124),g=n(85447),v=n(24857),m=n(72121),b=n(50959),y=n(41733),w=n(21262),Z=n(71440),_=n(58995);function x(){var e=(0,w._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return x=function(){return e},e}var R={},C=(0,Z.Ps)(x()),S=n(1813),T=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,I=/at (https:\/\/.+\.js):(\d+):(\d+)/;function V(){return(V=(0,r._)(function(e){var t,s,c,u,d,p,h,f;function g(){return(g=(0,r._)(function(e){var n,r,i;return(0,o.Jh)(this,function(l){switch(l.label){case 0:if(n=t.get(e))return[2,n];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=l.sent(),i=new s.SourceMapConsumer(r),t.set(e,i),[2,i];case 3:return l.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,o.Jh)(this,function(v){switch(v.label){case 0:t=new Map,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,n.e(4552).then(n.t.bind(n,94552,19))];case 2:return s=v.sent(),[3,4];case 3:throw v.sent(),Error("source-map not available");case 4:var m;if(!(c=e.stack))throw Error("expected error.stack to be defined");return u=c.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),p=(d=(0,l._)(u))[0],[4,Promise.all(d.slice(1).map((m=(0,r._)(function(e){var t,n,r,l,a,s,c,u,d,p;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(T.test(e)){if(!(a=T.exec(e)))throw Error("expected result");n=(s=(0,i._)(a.slice(2),3))[0],r=s[1],l=s[2]}else{if(!I.test(e))return[2,e];if(!(c=I.exec(e)))throw Error("expected result");n=(u=(0,i._)(c.slice(1),3))[0],r=u[1],l=u[2]}return[4,function(e){return g.apply(this,arguments)}("".concat(n,".map"))];case 1:if(!(d=o.sent()))return[2,"    ".concat(e)];if(p=d.originalPositionFor({line:Number(r),column:Number(l)}),t)return[2,"    at ".concat(p.name," (").concat(p.source,":").concat(p.line,":").concat(p.column,")")];return[2,"    at ".concat(p.source,":").concat(p.line,":").concat(p.column)]}})}),function(e){return m.apply(this,arguments)})))];case 5:return h=v.sent(),Object.assign(f=Error(),{name:e.name,stack:[p].concat((0,a._)(h)).join("\n"),message:e.message},e),[2,f]}})})).apply(this,arguments)}var k=function(e){var t=e.bsod,n=(0,i._)((0,b.useState)(null),2),l=n[0],a=n[1];(0,b.useEffect)(function(){(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return V.apply(this,arguments)}(t.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[t.error]);var c=(0,b.useMemo)(function(){var e,n,r,i;return l?null!==(r=null===(n=l.stack)||void 0===n?void 0:n.split("\n"))&&void 0!==r?r:[]:null!==(i=null===(e=t.error.stack)||void 0===e?void 0:e.split("\n"))&&void 0!==i?i:[]},[l,t.error.stack]);return(0,s.tZ)("div",{css:[h.l0.p(16),h.l0.width("100%"),h.l0.backgroundColor.backgroundHigher,h.l0.borderRadius(8),h.l0.overflowY("hidden"),{whiteSpace:"pre"}],children:(0,s.tZ)(v.gC,{spacing:1,children:(0,s.BX)("div",{css:[h.l0.font.code,h.l0.fontSize(12)],children:[(0,s.BX)("div",{children:["Origin: ",t.origin]}),null==c?void 0:c.map(function(e,t){var n=e.replace("webpack-internal:///./",""),r=n.includes("node_modules");return(0,s.tZ)("div",{css:r?h.l0.color.foregroundDimmest:null,children:n},t)})]})})})},U=function(){var e,t,n,r=(0,i._)((0,S.qg)(),1)[0],l=(e=(0,y._)({},R,{skip:!r}),_.a(C,e)),a=l.data,o=l.loading;if((0,S.ic)(),!r)return null;var c=(null==a?void 0:null===(t=a.currentUser)||void 0===t?void 0:t.isStaff)||(null==a?void 0:null===(n=a.currentUser)||void 0===n?void 0:n.isAdmin);return(0,s.BX)(p.u,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,s.BX)(v.gC,{spacing:2,align:"center",children:[(0,s.tZ)(g.Z,{level:2,children:" Your Repl is having a bit of trouble."}),(0,s.tZ)("div",{className:u().dynamic([["d03b8962c5704815",[h.n0]]])+" spacer"}),(0,s.tZ)(m.Z,{size:"large",children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to coding."}),(0,s.tZ)("div",{css:[h.l0.p(16),h.l0.width("100%"),h.l0.backgroundColor.backgroundHigher,h.l0.borderRadius(8)],className:u().dynamic([["d03b8962c5704815",[h.n0]]]),children:(0,s.BX)(v.gC,{spacing:1,children:[!o&&(null==a?void 0:a.currentUser)?(0,s.BX)(v.Ug,{spacing:2,align:"center",children:[(0,s.tZ)(d.q,{src:a.currentUser.image,username:a.currentUser.username,size:48}),(0,s.tZ)(m.Z,{size:"medium",children:a.currentUser.username})]}):null,(0,s.BX)("div",{css:[h.l0.font.code],className:u().dynamic([["d03b8962c5704815",[h.n0]]]),children:["Error: ",r.eventId]})]})}),c?(0,s.tZ)(k,{bsod:r}):null,(0,s.tZ)("div",{className:u().dynamic([["d03b8962c5704815",[h.n0]]])+" spacer"}),(0,s.tZ)(f.Z,{onClick:function(){return window.location.reload()},color:"primary",filled:!0,fullWidth:!0,children:"reload"}),!1]}),(0,s.tZ)(u(),{id:"d03b8962c5704815",dynamic:[h.n0],children:".sentry-error-embed-wrapper{z-index:".concat(h.n0,"!important}")})]})}}}]);
//# sourceMappingURL=1618-76ee3c2d6bbdba9f.js.map